/*! For license information please see main.8fd604a2.js.LICENSE.txt */
(()=>{var e={557:function(e,t,n){var a;"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof this||("undefined"!==typeof window?window:"undefined"!==typeof self?self:n.g),a=function(e){return function(){"use strict";var t={172:function(e,t){var n=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.CellHookData=t.HookData=void 0;var a=function(e,t,n){this.table=t,this.pageNumber=t.pageNumber,this.pageCount=this.pageNumber,this.settings=t.settings,this.cursor=n,this.doc=e.getDocument()};t.HookData=a;var r=function(e){function t(t,n,a,r,s,i){var o=e.call(this,t,n,i)||this;return o.cell=a,o.row=r,o.column=s,o.section=r.section,o}return n(t,e),t}(a);t.CellHookData=r},340:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),r=n(136),s=n(744),i=n(776),o=n(664),l=n(972);t.default=function(e){e.API.autoTable=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];1===t.length?e=t[0]:(console.error("Use of deprecated autoTable initiation"),(e=t[2]||{}).columns=t[0],e.body=t[1]);var a=(0,i.parseInput)(this,e),r=(0,l.createTable)(this,a);return(0,o.drawTable)(this,r),this},e.API.lastAutoTable=!1,e.API.previousAutoTable=!1,e.API.autoTable.previous=!1,e.API.autoTableText=function(e,t,n,a){(0,r.default)(e,t,n,a,this)},e.API.autoTableSetDefaults=function(e){return s.DocHandler.setDefaults(e,this),this},e.autoTableSetDefaults=function(e,t){s.DocHandler.setDefaults(e,t)},e.API.autoTableHtmlToJson=function(e,t){var n;if(void 0===t&&(t=!1),"undefined"===typeof window)return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var r=new s.DocHandler(this),i=(0,a.parseHtml)(r,e,window,t,!1),o=i.head,l=i.body;return{columns:(null===(n=o[0])||void 0===n?void 0:n.map((function(e){return e.content})))||[],rows:l,data:l}},e.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var e=this.lastAutoTable;return e&&e.finalY?e.finalY:0},e.API.autoTableAddPageContent=function(t){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),e.API.autoTable.globalDefaults||(e.API.autoTable.globalDefaults={}),e.API.autoTable.globalDefaults.addPageContent=t,this},e.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}},136:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,a,r){a=a||{};var s=r.internal.scaleFactor,i=r.internal.getFontSize()/s,o=i*(r.getLineHeightFactor?r.getLineHeightFactor():1.15),l="",c=1;if("middle"!==a.valign&&"bottom"!==a.valign&&"center"!==a.halign&&"right"!==a.halign||(c=(l="string"===typeof e?e.split(/\r\n|\r|\n/g):e).length||1),n+=i*(2-1.15),"middle"===a.valign?n-=c/2*o:"bottom"===a.valign&&(n-=c*o),"center"===a.halign||"right"===a.halign){var d=i;if("center"===a.halign&&(d*=.5),l&&c>=1){for(var u=0;u<l.length;u++)r.text(l[u],t-r.getStringUnitWidth(l[u])*d,n),n+=o;return r}t-=r.getStringUnitWidth(e)*d}return"justify"===a.halign?r.text(e,t,n,{maxWidth:a.maxWidth||100,align:"justify"}):r.text(e,t,n),r}},420:function(e,t){function n(e,t){var n=e>0,a=t||0===t;return n&&a?"DF":n?"S":a?"F":null}function a(e,t){var n,a,r,s;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(3===e.length)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(2===e.length)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e=1===e.length?e[0]:t}return"object"===typeof e?("number"===typeof e.vertical&&(e.top=e.vertical,e.bottom=e.vertical),"number"===typeof e.horizontal&&(e.right=e.horizontal,e.left=e.horizontal),{left:null!==(n=e.left)&&void 0!==n?n:t,top:null!==(a=e.top)&&void 0!==a?a:t,right:null!==(r=e.right)&&void 0!==r?r:t,bottom:null!==(s=e.bottom)&&void 0!==s?s:t}):("number"!==typeof e&&(e=t),{top:e,right:e,bottom:e,left:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.getPageAvailableWidth=t.parseSpacing=t.getFillStyle=t.addTableBorder=t.getStringWidth=void 0,t.getStringWidth=function(e,t,n){return n.applyStyles(t,!0),(Array.isArray(e)?e:[e]).map((function(e){return n.getTextWidth(e)})).reduce((function(e,t){return Math.max(e,t)}),0)},t.addTableBorder=function(e,t,a,r){var s=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:s,lineColor:i});var o=n(s,!1);o&&e.rect(a.x,a.y,t.getWidth(e.pageSize().width),r.y-a.y,o)},t.getFillStyle=n,t.parseSpacing=a,t.getPageAvailableWidth=function(e,t){var n=a(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}},796:function(e,t){var n=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function a(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.getTheme=t.defaultStyles=t.HtmlRowInput=void 0;var a=function(e){function t(t){var n=e.call(this)||this;return n._element=t,n}return n(t,e),t}(Array);t.HtmlRowInput=a,t.defaultStyles=function(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}},t.getTheme=function(e){return{striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}}[e]}},903:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseCss=void 0;var a=n(420);function r(e,t){var n=s(e,t);if(!n)return null;var a=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!a||!Array.isArray(a))return null;var r=[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])];return 0===parseInt(a[4])||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function s(e,t){var n=t(e);return"rgba(0, 0, 0, 0)"===n||"transparent"===n||"initial"===n||"inherit"===n?null==e.parentElement?null:s(e.parentElement,t):n}t.parseCss=function(e,t,n,s,i){var o={},l=96/72,c=r(t,(function(e){return i.getComputedStyle(e).backgroundColor}));null!=c&&(o.fillColor=c);var d=r(t,(function(e){return i.getComputedStyle(e).color}));null!=d&&(o.textColor=d);var u=function(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],r=96/(72/t),s=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=n.map((function(e){return parseInt(e||"0")/r})),o=(0,a.parseSpacing)(i,0);return s>o.top&&(o.top=s),s>o.bottom&&(o.bottom=s),o}(s,n);u&&(o.cellPadding=u);var h="borderTopColor",m=l*n,f=s.borderTopWidth;if(s.borderBottomWidth===f&&s.borderRightWidth===f&&s.borderLeftWidth===f){var p=(parseFloat(f)||0)/m;p&&(o.lineWidth=p)}else o.lineWidth={top:(parseFloat(s.borderTopWidth)||0)/m,right:(parseFloat(s.borderRightWidth)||0)/m,bottom:(parseFloat(s.borderBottomWidth)||0)/m,left:(parseFloat(s.borderLeftWidth)||0)/m},o.lineWidth.top||(o.lineWidth.right?h="borderRightColor":o.lineWidth.bottom?h="borderBottomColor":o.lineWidth.left&&(h="borderLeftColor"));var g=r(t,(function(e){return i.getComputedStyle(e)[h]}));null!=g&&(o.lineColor=g);var x=["left","right","center","justify"];-1!==x.indexOf(s.textAlign)&&(o.halign=s.textAlign),-1!==(x=["middle","bottom","top"]).indexOf(s.verticalAlign)&&(o.valign=s.verticalAlign);var b=parseInt(s.fontSize||"");isNaN(b)||(o.fontSize=b/l);var v=function(e){var t="";return("bold"===e.fontWeight||"bolder"===e.fontWeight||parseInt(e.fontWeight)>=700)&&(t="bold"),"italic"!==e.fontStyle&&"oblique"!==e.fontStyle||(t+="italic"),t}(s);v&&(o.fontStyle=v);var y=(s.fontFamily||"").toLowerCase();return-1!==e.indexOf(y)&&(o.font=y),o}},744:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DocHandler=void 0;var n={},a=function(){function e(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(e,t){void 0===t&&(t=null),t?t.__autoTableDocumentDefaults=e:n=e},e.unifyColor=function(e){return Array.isArray(e)?e:"number"===typeof e?[e,e,e]:"string"===typeof e?[e]:null},e.prototype.applyStyles=function(t,n){var a,r,s;void 0===n&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(t.font&&(l=t.font),t.fontStyle){o=t.fontStyle;var c=this.getFontList()[l];c&&-1===c.indexOf(o)&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var d=e.unifyColor(t.fillColor);d&&(a=this.jsPDFDocument).setFillColor.apply(a,d),(d=e.unifyColor(t.textColor))&&(r=this.jsPDFDocument).setTextColor.apply(r,d),(d=e.unifyColor(t.lineColor))&&(s=this.jsPDFDocument).setDrawColor.apply(s,d),"number"===typeof t.lineWidth&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(e,t,n){return this.jsPDFDocument.splitTextToSize(e,t,n)},e.prototype.rect=function(e,t,n,a,r){return this.jsPDFDocument.rect(e,t,n,a,r)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return n||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return null==e.width&&(e={width:e.getWidth(),height:e.getHeight()}),e},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}();t.DocHandler=a},4:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseHtml=void 0;var a=n(903),r=n(796);function s(e,t,n,s,o,l){for(var c=new r.HtmlRowInput(s),d=0;d<s.cells.length;d++){var u=s.cells[d],h=n.getComputedStyle(u);if(o||"none"!==h.display){var m=void 0;l&&(m=(0,a.parseCss)(e,u,t,h,n)),c.push({rowSpan:u.rowSpan,colSpan:u.colSpan,styles:m,_element:u,content:i(u)})}}var f=n.getComputedStyle(s);if(c.length>0&&(o||"none"!==f.display))return c}function i(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map((function(e){return e.trim()})).join("\n"),t.innerText||t.textContent||""}t.parseHtml=function(e,t,n,a,r){var i,o,l;void 0===a&&(a=!1),void 0===r&&(r=!1),l="string"===typeof t?n.document.querySelector(t):t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),u=[],h=[],m=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:u,body:h,foot:m};for(var f=0;f<l.rows.length;f++){var p=l.rows[f],g=null===(o=null===(i=null===p||void 0===p?void 0:p.parentElement)||void 0===i?void 0:i.tagName)||void 0===o?void 0:o.toLowerCase(),x=s(c,d,n,p,a,r);x&&("thead"===g?u.push(x):"tfoot"===g?m.push(x):h.push(x))}return{head:u,body:h,foot:m}}},776:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseInput=void 0;var a=n(4),r=n(356),s=n(420),i=n(744),o=n(792);t.parseInput=function(e,t){var n=new i.DocHandler(e),l=n.getDocumentOptions(),c=n.getGlobalOptions();(0,o.default)(n,c,l,t);var d,u=(0,r.assign)({},c,l,t);"undefined"!==typeof window&&(d=window);var h=function(e,t,n){for(var a={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},s=function(s){if("columnStyles"===s){var i=e[s],o=t[s],l=n[s];a.columnStyles=(0,r.assign)({},i,o,l)}else{var c=[e,t,n].map((function(e){return e[s]||{}}));a[s]=(0,r.assign)({},c[0],c[1],c[2])}},i=0,o=Object.keys(a);i<o.length;i++)s(o[i]);return a}(c,l,t),m=function(e,t,n){for(var a={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},r=0,s=[e,t,n];r<s.length;r++){var i=s[r];i.didParseCell&&a.didParseCell.push(i.didParseCell),i.willDrawCell&&a.willDrawCell.push(i.willDrawCell),i.didDrawCell&&a.didDrawCell.push(i.didDrawCell),i.willDrawPage&&a.willDrawPage.push(i.willDrawPage),i.didDrawPage&&a.didDrawPage.push(i.didDrawPage)}return a}(c,l,t),f=function(e,t){var n,a,r,i,o,l,c,d,u,h,m,f,p,g,x=(0,s.parseSpacing)(t.margin,40/e.scaleFactor()),b=null!==(n=function(e,t){var n=e.getLastAutoTable(),a=e.scaleFactor(),r=e.pageNumber(),s=!1;return n&&n.startPageNumber&&(s=n.startPageNumber+n.pageNumber-1===r),"number"===typeof t?t:null!=t&&!1!==t||!s||null==(null===n||void 0===n?void 0:n.finalY)?null:n.finalY+20/a}(e,t.startY))&&void 0!==n?n:x.top;p=!0===t.showFoot?"everyPage":!1===t.showFoot?"never":null!==(a=t.showFoot)&&void 0!==a?a:"everyPage",g=!0===t.showHead?"everyPage":!1===t.showHead?"never":null!==(r=t.showHead)&&void 0!==r?r:"everyPage";var v=null!==(i=t.useCss)&&void 0!==i&&i,y=t.theme||(v?"plain":"striped"),w=!!t.horizontalPageBreak,j=null!==(o=t.horizontalPageBreakRepeat)&&void 0!==o?o:null;return{includeHiddenHtml:null!==(l=t.includeHiddenHtml)&&void 0!==l&&l,useCss:v,theme:y,startY:b,margin:x,pageBreak:null!==(c=t.pageBreak)&&void 0!==c?c:"auto",rowPageBreak:null!==(d=t.rowPageBreak)&&void 0!==d?d:"auto",tableWidth:null!==(u=t.tableWidth)&&void 0!==u?u:"auto",showHead:g,showFoot:p,tableLineWidth:null!==(h=t.tableLineWidth)&&void 0!==h?h:0,tableLineColor:null!==(m=t.tableLineColor)&&void 0!==m?m:200,horizontalPageBreak:w,horizontalPageBreakRepeat:j,horizontalPageBreakBehaviour:null!==(f=t.horizontalPageBreakBehaviour)&&void 0!==f?f:"afterAllRows"}}(n,u),p=function(e,t,n){var r=t.head||[],s=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(n){var l=(0,a.parseHtml)(e,t.html,n,o,t.useCss)||{};r=l.head||r,s=l.body||r,i=l.foot||r}else console.error("Cannot parse html in non browser environment")}var c=t.columns||function(e,t,n){var a=e[0]||t[0]||n[0]||[],r=[];return Object.keys(a).filter((function(e){return"_element"!==e})).forEach((function(e){var t,n=1;"object"!==typeof(t=Array.isArray(a)?a[parseInt(e)]:a[e])||Array.isArray(t)||(n=(null===t||void 0===t?void 0:t.colSpan)||1);for(var s=0;s<n;s++){var i={dataKey:Array.isArray(a)?r.length:e+(s>0?"_".concat(s):"")};r.push(i)}})),r}(r,s,i);return{columns:c,head:r,body:s,foot:i}}(n,u,d);return{id:t.tableId,content:p,hooks:m,styles:h,settings:f}}},792:function(e,t){function n(e){e.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),e.minCellHeight||(e.minCellHeight=e.rowHeight)):e.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),e.cellWidth||(e.cellWidth=e.columnWidth))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,r){for(var s=function(t){t&&"object"!==typeof t&&console.error("The options parameter should be of type object, is: "+typeof t),"undefined"!==typeof t.extendWidth&&(t.tableWidth=t.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),"undefined"!==typeof t.margins&&("undefined"===typeof t.margin&&(t.margin=t.margins),console.error("Use of deprecated option: margins, use margin instead.")),t.startY&&"number"!==typeof t.startY&&(console.error("Invalid value for startY option",t.startY),delete t.startY),!t.didDrawPage&&(t.afterPageContent||t.beforePageContent||t.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),t.didDrawPage=function(n){e.applyStyles(e.userStyles),t.beforePageContent&&t.beforePageContent(n),e.applyStyles(e.userStyles),t.afterPageContent&&t.afterPageContent(n),e.applyStyles(e.userStyles),t.afterPageAdd&&n.pageNumber>1&&n.afterPageAdd(n),e.applyStyles(e.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach((function(e){t[e]&&console.error('The "'.concat(e,'" hook has changed in version 3.0, check the changelog for how to migrate.'))})),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach((function(e){var n=e[0],a=e[1];t[a]&&(console.error("Use of deprecated option ".concat(a,". Use ").concat(n," instead")),t[n]=t[a])})),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach((function(e){var n="string"===typeof e?e:e[0],a="string"===typeof e?e:e[1];"undefined"!==typeof t[n]&&("undefined"===typeof t.styles[a]&&(t.styles[a]=t[n]),console.error("Use of deprecated option: "+n+", use the style "+a+" instead."))}));for(var a=0,r=["styles","bodyStyles","headStyles","footStyles"];a<r.length;a++)n(t[r[a]]||{});for(var s=t.columnStyles||{},i=0,o=Object.keys(s);i<o.length;i++)n(s[o[i]]||{})},i=0,o=[t,a,r];i<o.length;i++)s(o[i])}},260:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.Column=t.Cell=t.Row=t.Table=void 0;var a=n(796),r=n(172),s=n(420),i=function(){function e(e,t){this.pageNumber=1,this.pageCount=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return e.prototype.getHeadHeight=function(e){return this.head.reduce((function(t,n){return t+n.getMaxCellHeight(e)}),0)},e.prototype.getFootHeight=function(e){return this.foot.reduce((function(t,n){return t+n.getMaxCellHeight(e)}),0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(e,t,n,a,s,i){for(var o=0,l=t;o<l.length;o++){var c=!1===(0,l[o])(new r.CellHookData(e,this,n,a,s,i));if(n.text=Array.isArray(n.text)?n.text:[n.text],c)return!1}return!0},e.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var n=0,a=this.hooks.didDrawPage;n<a.length;n++)(0,a[n])(new r.HookData(e,this,t))},e.prototype.callWillDrawPageHooks=function(e,t){for(var n=0,a=this.hooks.willDrawPage;n<a.length;n++)(0,a[n])(new r.HookData(e,this,t))},e.prototype.getWidth=function(e){if("number"===typeof this.settings.tableWidth)return this.settings.tableWidth;if("wrap"===this.settings.tableWidth)return this.columns.reduce((function(e,t){return e+t.wrappedWidth}),0);var t=this.settings.margin;return e-t.left-t.right},e}();t.Table=i;var o=function(){function e(e,t,n,r,s){void 0===s&&(s=!1),this.height=0,this.raw=e,e instanceof a.HtmlRowInput&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=n,this.cells=r,this.spansMultiplePages=s}return e.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce((function(e,n){var a;return Math.max(e,(null===(a=t.cells[n.index])||void 0===a?void 0:a.height)||0)}),0)},e.prototype.hasRowSpan=function(e){var t=this;return e.filter((function(e){var n=t.cells[e.index];return!!n&&n.rowSpan>1})).length>0},e.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},e.prototype.getMinimumRowHeight=function(e,t){var n=this;return e.reduce((function(e,a){var r=n.cells[a.index];if(!r)return 0;var s=t.getLineHeight(r.styles.fontSize),i=r.padding("vertical")+s;return i>e?i:e}),0)},e}();t.Row=o;var l=function(){function e(e,t,n){var a,r;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=n,this.raw=e;var s=e;null==e||"object"!==typeof e||Array.isArray(e)?(this.rowSpan=1,this.colSpan=1):(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=null!==(r=null!==(a=e.content)&&void 0!==a?a:e.title)&&void 0!==r?r:e,e._element&&(this.raw=e._element));var i=null!=s?""+s:"";this.text=i.split(/\r\n|\r|\n/g)}return e.prototype.getTextPos=function(){var e,t;if("top"===this.styles.valign)e=this.y+this.padding("top");else if("bottom"===this.styles.valign)e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}if("right"===this.styles.halign)t=this.x+this.width-this.padding("right");else if("center"===this.styles.halign){var a=this.width-this.padding("horizontal");t=this.x+a/2+this.padding("left")}else t=this.x+this.padding("left");return{x:t,y:e}},e.prototype.getContentHeight=function(e,t){void 0===t&&(t=1.15);var n=(Array.isArray(this.text)?this.text.length:1)*(this.styles.fontSize/e*t)+this.padding("vertical");return Math.max(n,this.styles.minCellHeight)},e.prototype.padding=function(e){var t=(0,s.parseSpacing)(this.styles.cellPadding,0);return"vertical"===e?t.top+t.bottom:"horizontal"===e?t.left+t.right:t[e]},e}();t.Cell=l;var c=function(){function e(e,t,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=n}return e.prototype.getMaxCustomCellWidth=function(e){for(var t=0,n=0,a=e.allRows();n<a.length;n++){var r=a[n].cells[this.index];r&&"number"===typeof r.styles.cellWidth&&(t=Math.max(t,r.styles.cellWidth))}return t},e}();t.Column=c},356:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.assign=void 0,t.assign=function(e,t,n,a,r){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(s[l]=o[l])}return s}},972:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createTable=void 0;var a=n(744),r=n(260),s=n(324),i=n(796),o=n(356);function l(e,t,n,a,s,i){var o={};return t.map((function(t,l){for(var c=0,u={},h=0,m=0,f=0,p=n;f<p.length;f++){var g=p[f];if(null==o[g.index]||0===o[g.index].left)if(0===m){var x=void 0,b={};"object"!==typeof(x=Array.isArray(t)?t[g.index-h-c]:t[g.dataKey])||Array.isArray(x)||(b=(null===x||void 0===x?void 0:x.styles)||{});var v=d(e,g,l,s,a,i,b),y=new r.Cell(x,v,e);u[g.dataKey]=y,u[g.index]=y,m=y.colSpan-1,o[g.index]={left:y.rowSpan-1,times:m}}else m--,h++;else o[g.index].left--,m=o[g.index].times,c++}return new r.Row(t,l,e,u)}))}function c(e,t){var n={};return e.forEach((function(e){if(null!=e.raw){var a=function(e,t){if("head"===e){if("object"===typeof t)return t.header||t.title||null;if("string"===typeof t||"number"===typeof t)return t}else if("foot"===e&&"object"===typeof t)return t.footer;return null}(t,e.raw);null!=a&&(n[e.dataKey]=a)}})),Object.keys(n).length>0?n:null}function d(e,t,n,a,r,s,l){var c,d=(0,i.getTheme)(a);"head"===e?c=r.headStyles:"body"===e?c=r.bodyStyles:"foot"===e&&(c=r.footStyles);var u=(0,o.assign)({},d.table,d[e],r.styles,c),h=r.columnStyles[t.dataKey]||r.columnStyles[t.index]||{},m="body"===e?h:{},f="body"===e&&n%2===0?(0,o.assign)({},d.alternateRow,r.alternateRowStyles):{},p=(0,i.defaultStyles)(s),g=(0,o.assign)({},p,u,f,m);return(0,o.assign)(g,l)}t.createTable=function(e,t){var n=new a.DocHandler(e),i=function(e,t){var n,a=e.content,s=function(e){return e.map((function(e,t){var n,a,s;return s="object"===typeof e&&null!==(a=null!==(n=e.dataKey)&&void 0!==n?n:e.key)&&void 0!==a?a:t,new r.Column(s,e,t)}))}(a.columns);(0===a.head.length&&(n=c(s,"head"))&&a.head.push(n),0===a.foot.length)&&((n=c(s,"foot"))&&a.foot.push(n));var i=e.settings.theme,o=e.styles;return{columns:s,head:l("head",a.head,s,o,i,t),body:l("body",a.body,s,o,i,t),foot:l("foot",a.foot,s,o,i,t)}}(t,n.scaleFactor()),o=new r.Table(t,i);return(0,s.calculateWidths)(n,o),n.applyStyles(n.userStyles),o}},664:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.addPage=t.drawTable=void 0;var a=n(420),r=n(260),s=n(744),i=n(356),o=n(136),l=n(224);function c(e,t,n,a){var r=t.settings;e.applyStyles(e.userStyles),"firstPage"!==r.showHead&&"everyPage"!==r.showHead||t.head.forEach((function(r){return f(e,t,r,n,a)}))}function d(e,t,n,a,r,s){e.applyStyles(e.userStyles),s=null!==s&&void 0!==s?s:t.body.length;var i=Math.min(n+s,t.body.length),o=-1;return t.body.slice(n,i).forEach((function(s,i){var l=n+i===t.body.length-1,c=g(e,t,l,a);s.canEntireRowFit(c,r)&&(f(e,t,s,a,r),o=n+i)})),o}function u(e,t,n,a){var r=t.settings;e.applyStyles(e.userStyles),"lastPage"!==r.showFoot&&"everyPage"!==r.showFoot||t.foot.forEach((function(r){return f(e,t,r,n,a)}))}function h(e,t,n){var a=n.getLineHeight(e.styles.fontSize),r=e.padding("vertical"),s=Math.floor((t-r)/a);return Math.max(0,s)}function m(e,t,n,a,s,o,l){var c=g(e,t,a,o);if(n.canEntireRowFit(c,l))f(e,t,n,o,l);else if(function(e,t,n,a){var r=e.pageSize().height,s=a.settings.margin,i=r-(s.top+s.bottom);"body"===t.section&&(i-=a.getHeadHeight(a.columns)+a.getFootHeight(a.columns));var o=t.getMinimumRowHeight(a.columns,e),l=o<n;if(o>i)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!l)return!1;var c=t.hasRowSpan(a.columns);return t.getMaxCellHeight(a.columns)>i?(c&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!c&&"avoid"!==a.settings.rowPageBreak}(e,n,c,t)){var d=function(e,t,n,a){var s={};e.spansMultiplePages=!0,e.height=0;for(var o=0,l=0,c=n.columns;l<c.length;l++){var d=c[l];if(v=e.cells[d.index]){Array.isArray(v.text)||(v.text=[v.text]);var u=new r.Cell(v.raw,v.styles,v.section);(u=(0,i.assign)(u,v)).text=[];var m=h(v,t,a);v.text.length>m&&(u.text=v.text.splice(m,v.text.length));var f=a.scaleFactor(),p=a.getLineHeightFactor();v.contentHeight=v.getContentHeight(f,p),v.contentHeight>=t&&(v.contentHeight=t,u.styles.minCellHeight-=t),v.contentHeight>e.height&&(e.height=v.contentHeight),u.contentHeight=u.getContentHeight(f,p),u.contentHeight>o&&(o=u.contentHeight),s[d.index]=u}}var g=new r.Row(e.raw,-1,e.section,s,!0);g.height=o;for(var x=0,b=n.columns;x<b.length;x++){var v;d=b[x],(u=g.cells[d.index])&&(u.height=g.height),(v=e.cells[d.index])&&(v.height=e.height)}return g}(n,c,t,e);f(e,t,n,o,l),x(e,t,s,o,l),m(e,t,d,a,s,o,l)}else x(e,t,s,o,l),m(e,t,n,a,s,o,l)}function f(e,t,n,a,r){a.x=t.settings.margin.left;for(var s=0,i=r;s<i.length;s++){var l=i[s],c=n.cells[l.index];if(c)if(e.applyStyles(c.styles),c.x=a.x,c.y=a.y,!1!==t.callCellHooks(e,t.hooks.willDrawCell,c,n,l,a)){p(e,c,a);var d=c.getTextPos();(0,o.default)(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,n,l,a),a.x+=l.width}else a.x+=l.width;else a.x+=l.width}a.y+=n.height}function p(e,t,n){var r=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),"number"===typeof r.lineWidth){var s=(0,a.getFillStyle)(r.lineWidth,r.fillColor);s&&e.rect(t.x,n.y,t.width,t.height,s)}else"object"===typeof r.lineWidth&&(r.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),function(e,t,n,a){var r,s,i,o;function l(t,n,a,r,s){e.getDocument().setLineWidth(t),e.getDocument().line(n,a,r,s,"S")}a.top&&(r=n.x,s=n.y,i=n.x+t.width,o=n.y,a.right&&(i+=.5*a.right),a.left&&(r-=.5*a.left),l(a.top,r,s,i,o)),a.bottom&&(r=n.x,s=n.y+t.height,i=n.x+t.width,o=n.y+t.height,a.right&&(i+=.5*a.right),a.left&&(r-=.5*a.left),l(a.bottom,r,s,i,o)),a.left&&(r=n.x,s=n.y,i=n.x,o=n.y+t.height,a.top&&(s-=.5*a.top),a.bottom&&(o+=.5*a.bottom),l(a.left,r,s,i,o)),a.right&&(r=n.x+t.width,s=n.y,i=n.x+t.width,o=n.y+t.height,a.top&&(s-=.5*a.top),a.bottom&&(o+=.5*a.bottom),l(a.right,r,s,i,o))}(e,t,n,r.lineWidth))}function g(e,t,n,a){var r=t.settings.margin.bottom,s=t.settings.showFoot;return("everyPage"===s||"lastPage"===s&&n)&&(r+=t.getFootHeight(t.columns)),e.pageSize().height-a.y-r}function x(e,t,n,r,s,i){void 0===s&&(s=[]),void 0===i&&(i=!1),e.applyStyles(e.userStyles),"everyPage"!==t.settings.showFoot||i||t.foot.forEach((function(n){return f(e,t,n,r,s)})),t.callEndPageHooks(e,r);var o=t.settings.margin;(0,a.addTableBorder)(e,t,n,r),b(e),t.pageNumber++,t.pageCount++,r.x=o.left,r.y=o.top,n.y=o.top,t.callWillDrawPageHooks(e,r),"everyPage"===t.settings.showHead&&(t.head.forEach((function(n){return f(e,t,n,r,s)})),e.applyStyles(e.userStyles))}function b(e){var t=e.pageNumber();return e.setPage(t+1),e.pageNumber()===t&&(e.addPage(),!0)}t.drawTable=function(e,t){var n=t.settings,r=n.startY,o=n.margin,h={x:o.left,y:r},p=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),g=r+o.bottom+p;"avoid"===n.pageBreak&&(g+=t.body.reduce((function(e,t){return e+t.height}),0));var v=new s.DocHandler(e);("always"===n.pageBreak||null!=n.startY&&g>v.pageSize().height)&&(b(v),h.y=o.top),t.callWillDrawPageHooks(v,h);var y=(0,i.assign)({},h);t.startPageNumber=v.pageNumber(),n.horizontalPageBreak?function(e,t,n,a){var r=(0,l.calculateAllColumnsCanFitInPage)(e,t),s=t.settings;if("afterAllRows"===s.horizontalPageBreakBehaviour)r.forEach((function(r,s){e.applyStyles(e.userStyles),s>0?x(e,t,n,a,r.columns,!0):c(e,t,a,r.columns),function(e,t,n,a,r){e.applyStyles(e.userStyles),t.body.forEach((function(s,i){var o=i===t.body.length-1;m(e,t,s,o,n,a,r)}))}(e,t,n,a,r.columns),u(e,t,a,r.columns)}));else for(var i=-1,o=r[0],h=function(){var s=i;if(o){e.applyStyles(e.userStyles);var l=o.columns;i>=0?x(e,t,n,a,l,!0):c(e,t,a,l),s=d(e,t,i+1,a,l),u(e,t,a,l)}var h=s-i;r.slice(1).forEach((function(r){e.applyStyles(e.userStyles),x(e,t,n,a,r.columns,!0),d(e,t,i+1,a,r.columns,h),u(e,t,a,r.columns)})),i=s};i<t.body.length-1;)h()}(v,t,y,h):(v.applyStyles(v.userStyles),"firstPage"!==n.showHead&&"everyPage"!==n.showHead||t.head.forEach((function(e){return f(v,t,e,h,t.columns)})),v.applyStyles(v.userStyles),t.body.forEach((function(e,n){var a=n===t.body.length-1;m(v,t,e,a,y,h,t.columns)})),v.applyStyles(v.userStyles),"lastPage"!==n.showFoot&&"everyPage"!==n.showFoot||t.foot.forEach((function(e){return f(v,t,e,h,t.columns)}))),(0,a.addTableBorder)(v,t,y,h),t.callEndPageHooks(v,h),t.finalY=h.y,e.lastAutoTable=t,e.previousAutoTable=t,e.autoTable&&(e.autoTable.previous=t),v.applyStyles(v.userStyles)},t.addPage=x},224:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateAllColumnsCanFitInPage=void 0;var a=n(420);function r(e,t,n){var r;void 0===n&&(n={});var s=(0,a.getPageAvailableWidth)(e,t),i=new Map,o=[],l=[],c=[];t.settings.horizontalPageBreakRepeat,Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:"string"!==typeof t.settings.horizontalPageBreakRepeat&&"number"!==typeof t.settings.horizontalPageBreakRepeat||(c=[t.settings.horizontalPageBreakRepeat]),c.forEach((function(e){var n=t.columns.find((function(t){return t.dataKey===e||t.index===e}));n&&!i.has(n.index)&&(i.set(n.index,!0),o.push(n.index),l.push(t.columns[n.index]),s-=n.wrappedWidth)}));for(var d=!0,u=null!==(r=null===n||void 0===n?void 0:n.start)&&void 0!==r?r:0;u<t.columns.length;)if(i.has(u))u++;else{var h=t.columns[u].wrappedWidth;if(!(d||s>=h))break;d=!1,o.push(u),l.push(t.columns[u]),s-=h,u++}return{colIndexes:o,columns:l,lastIndex:u-1}}t.calculateAllColumnsCanFitInPage=function(e,t){for(var n=[],a=0;a<t.columns.length;a++){var s=r(e,t,{start:a});s.columns.length&&(n.push(s),a=s.lastIndex)}return n}},324:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ellipsize=t.resizeColumns=t.calculateWidths=void 0;var a=n(420);function r(e,t,n){for(var a=t,s=e.reduce((function(e,t){return e+t.wrappedWidth}),0),i=0;i<e.length;i++){var o=e[i],l=a*(o.wrappedWidth/s),c=o.width+l,d=n(o),u=c<d?d:c;t-=u-o.width,o.width=u}if(t=Math.round(1e10*t)/1e10){var h=e.filter((function(e){return!(t<0)||e.width>n(e)}));h.length&&(t=r(h,t,n))}return t}function s(e,t,n,r,s){return e.map((function(e){return function(e,t,n,r,s){var i=1e4*r.scaleFactor();if((t=Math.ceil(t*i)/i)>=(0,a.getStringWidth)(e,n,r))return e;for(;t<(0,a.getStringWidth)(e+s,n,r)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+s}(e,t,n,r,s)}))}t.calculateWidths=function(e,t){!function(e,t){var n=e.scaleFactor(),r=t.settings.horizontalPageBreak,s=(0,a.getPageAvailableWidth)(e,t);t.allRows().forEach((function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){var u=t.hooks.didParseCell;t.callCellHooks(e,u,d,i,c,null);var h=d.padding("horizontal");d.contentWidth=(0,a.getStringWidth)(d.text,d.styles,e)+h;var m=(0,a.getStringWidth)(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=m+d.padding("horizontal"),"number"===typeof d.styles.cellWidth)d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if("wrap"===d.styles.cellWidth||!0===r)d.contentWidth>s?(d.minWidth=s,d.wrappedWidth=s):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var f=10/n;d.minWidth=d.styles.minCellWidth||f,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}})),t.allRows().forEach((function(e){for(var n=0,a=t.columns;n<a.length;n++){var r=a[n],s=e.cells[r.index];if(s&&1===s.colSpan)r.wrappedWidth=Math.max(r.wrappedWidth,s.wrappedWidth),r.minWidth=Math.max(r.minWidth,s.minWidth),r.minReadableWidth=Math.max(r.minReadableWidth,s.minReadableWidth);else{var i=t.styles.columnStyles[r.dataKey]||t.styles.columnStyles[r.index]||{},o=i.cellWidth||i.minCellWidth;o&&"number"===typeof o&&(r.minWidth=o,r.wrappedWidth=o)}s&&(s.colSpan>1&&!r.minWidth&&(r.minWidth=s.minWidth),s.colSpan>1&&!r.wrappedWidth&&(r.wrappedWidth=s.minWidth))}}))}(e,t);var n=[],i=0;t.columns.forEach((function(e){var a=e.getMaxCustomCellWidth(t);a?e.width=a:(e.width=e.wrappedWidth,n.push(e)),i+=e.width}));var o=t.getWidth(e.pageSize().width)-i;o&&(o=r(n,o,(function(e){return Math.max(e.minReadableWidth,e.minWidth)}))),o&&(o=r(n,o,(function(e){return e.minWidth}))),o=Math.abs(o),!t.settings.horizontalPageBreak&&o>.1/e.scaleFactor()&&(o=o<1?o:Math.round(o),console.warn("Of the table content, ".concat(o," units width could not fit page"))),function(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var a=t[n],r=null,s=0,i=0,o=0;o<e.columns.length;o++){var l=e.columns[o];if((i-=1)>1&&e.columns[o+1])s+=l.width,delete a.cells[l.index];else if(r){var c=r;delete a.cells[l.index],r=null,c.width=l.width+s}else{if(!(c=a.cells[l.index]))continue;if(i=c.colSpan,s=0,c.colSpan>1){r=c,s+=l.width;continue}c.width=l.width+s}}}(t),function(e,t){for(var n={count:0,height:0},a=0,r=e.allRows();a<r.length;a++){for(var i=r[a],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){t.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if("linebreak"===d.styles.overflow)d.text=t.splitTextToSize(d.text,u+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if("ellipsize"===d.styles.overflow)d.text=s(d.text,u,d.styles,t,"...");else if("hidden"===d.styles.overflow)d.text=s(d.text,u,d.styles,t,"");else if("function"===typeof d.styles.overflow){var h=d.styles.overflow(d.text,u);d.text="string"===typeof h?[h]:h}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var m=d.contentHeight/d.rowSpan;d.rowSpan>1&&n.count*n.height<m*d.rowSpan?n={height:m,count:d.rowSpan}:n&&n.count>0&&n.height>m&&(m=n.height),m>i.height&&(i.height=m)}}n.count--}}(t,e),function(e){for(var t={},n=1,a=e.allRows(),r=0;r<a.length;r++)for(var s=a[r],i=0,o=e.columns;i<o.length;i++){var l=o[i],c=t[l.index];if(n>1)n--,delete s.cells[l.index];else if(c)c.cell.height+=s.height,n=c.cell.colSpan,delete s.cells[l.index],c.left--,c.left<=1&&delete t[l.index];else{var d=s.cells[l.index];if(!d)continue;if(d.height=s.height,d.rowSpan>1){var u=a.length-r,h=d.rowSpan>u?u:d.rowSpan;t[l.index]={cell:d,left:h,row:s}}}}}(t)},t.resizeColumns=r,t.ellipsize=s},964:function(t){if("undefined"===typeof e){var n=new Error("Cannot find module 'undefined'");throw n.code="MODULE_NOT_FOUND",n}t.exports=e}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var s=n[e]={exports:{}};return t[e].call(s.exports,s,s.exports,a),s.exports}var r={};return function(){var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.Cell=e.Column=e.Row=e.Table=e.CellHookData=e.__drawTable=e.__createTable=e.applyPlugin=void 0;var t=a(340),n=a(776),s=a(664),i=a(972),o=a(260);Object.defineProperty(e,"Table",{enumerable:!0,get:function(){return o.Table}});var l=a(172);Object.defineProperty(e,"CellHookData",{enumerable:!0,get:function(){return l.CellHookData}});var c=a(260);function d(e){(0,t.default)(e)}Object.defineProperty(e,"Cell",{enumerable:!0,get:function(){return c.Cell}}),Object.defineProperty(e,"Column",{enumerable:!0,get:function(){return c.Column}}),Object.defineProperty(e,"Row",{enumerable:!0,get:function(){return c.Row}}),e.applyPlugin=d,e.__createTable=function(e,t){var a=(0,n.parseInput)(e,t);return(0,i.createTable)(e,a)},e.__drawTable=function(e,t){(0,s.drawTable)(e,t)};try{var u=a(964);u.jsPDF&&(u=u.jsPDF),d(u)}catch(h){}e.default=function(e,t){var a=(0,n.parseInput)(e,t),r=(0,i.createTable)(e,a);(0,s.drawTable)(e,r)}}(),r}()},e.exports=a(function(){try{return n(7762)}catch(e){}}())},579:(e,t,n)=>{"use strict";e.exports=n(1153)},1153:(e,t,n)=>{"use strict";var a=n(5043),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var a,s={},c=null,d=null;for(a in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,a)&&!l.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===s[a]&&(s[a]=t[a]);return{$$typeof:r,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},1487:(e,t,n)=>{"use strict";n.d(t,{O9:()=>u,Ow:()=>d,VU:()=>b,VX:()=>v,getPatientProgramsGrade:()=>c,getProgramById:()=>l,lF:()=>h,og:()=>p,pF:()=>i,rx:()=>g,sp:()=>o,uc:()=>x,v2:()=>m,xT:()=>f});var a=n(9722),r=n(3488);const s=a.A.create({baseURL:r.H});s.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e)));const i=async()=>{try{return(await s.get("/programs")).data}catch(e){throw console.error("Erro ao carregar programas"),e}},o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n={search:e};t&&(n.discipline=t);return(await s.get("/programs",{params:n})).data}catch(n){throw console.error("Erro ao buscar programas:",n),n}},l=async e=>{try{return(await s.get("/programs/".concat(e))).data}catch(t){throw console.error("Erro ao carregar programa"),t}},c=async e=>{try{return(await s.get("/programs/patient/".concat(e,"/grade"))).data}catch(t){throw t}},d=async e=>{try{return(await s.get("/assignments/".concat(e))).data}catch(t){throw t}},u=async()=>{try{return(await s.get("/assignments/prompt-levels")).data}catch(e){throw console.error("Erro ao buscar n\xedveis de prompting:",e),e}},h=async e=>{try{return(await s.post("/assignments/progress",e)).data}catch(t){throw t}},m=async e=>{try{return(await s.get("/assignments/".concat(e,"/progress"))).data}catch(t){throw t}},f=async(e,t)=>{try{return(await s.patch("/assignments/".concat(e,"/status"),{status:t})).data}catch(n){throw n}},p=async e=>{try{return(await s.post("/programs/custom",e)).data}catch(t){throw console.error("Erro ao criar programa customizado:",t),t}},g=async()=>{try{return(await s.get("/programs/custom")).data}catch(e){throw console.error("Erro ao buscar programas customizados:",e),e}},x=async()=>{try{return(await s.get("/programs/hierarchy")).data}catch(e){throw console.error("Erro ao buscar hierarquia de disciplinas:",e),e}},b=async(e,t)=>{try{return(await s.put("/programs/".concat(e),t)).data}catch(n){throw console.error("Erro ao atualizar programa customizado:",n),n}},v=async e=>{try{return(await s.delete("/programs/".concat(e))).data}catch(t){throw console.error("Erro ao remover programa customizado:",t),t}}},1497:(e,t,n)=>{"use strict";var a=n(3218);function r(){}function s(){}s.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,s,i){if(i!==a){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:r};return n.PropTypes=n,n}},2284:(e,t,n)=>{"use strict";function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}n.d(t,{A:()=>a})},2730:(e,t,n)=>{"use strict";var a=n(5043),r=n(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},f={};function p(e,t,n,a,r,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var x=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,n,a){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,a){if(null===t||"undefined"===typeof t||function(e,t,n,a){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,a))return!0;if(a)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,a)&&(n=null),a||null===r?function(e){return!!u.call(f,e)||!u.call(m,e)&&(h.test(e)?f[e]=!0:(m[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,a=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,a?e.setAttributeNS(a,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(x,b);g[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(x,b);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(x,b);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var y=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var R,I=Object.assign;function F(e){if(void 0===R)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var a=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){a=c}e.call(t.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=a.stack.split("\n"),i=r.length-1,o=s.length-1;1<=i&&0<=o&&r[i]!==s[o];)o--;for(;1<=i&&0<=o;i--,o--)if(r[i]!==s[o]){if(1!==i||1!==o)do{if(i--,0>--o||r[i]!==s[o]){var l="\n"+r[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function q(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case j:return"Portal";case S:return"Profiler";case _:return"StrictMode";case P:return"Suspense";case L:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){a=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),a="";return e&&(a=V(e)?e.checked?"true":"false":e.value),(e=a)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function K(e,t){var n=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:a,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Q(e,t){J(e,t);var n=H(t.value),a=t.type;if(null!=n)"number"===a?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,a){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&a&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(a&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),a=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=a&&(e.defaultValue=""+a)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,a){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var a=0===n.indexOf("--"),r=pe(n,t[n],a);"float"===n&&(n="cssFloat"),a?e.setProperty(n,r):e[n]=r}}Object.keys(me).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]}))}));var xe=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,Ne=null,_e=null;function Se(e){if(e=vr(e)){if("function"!==typeof je)throw Error(s(280));var t=e.stateNode;t&&(t=wr(t),je(e.stateNode,e.type,t))}}function ke(e){Ne?_e?_e.push(e):_e=[e]:Ne=e}function Ce(){if(Ne){var e=Ne,t=_e;if(_e=Ne=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ae(e,t){return e(t)}function Pe(){}var Le=!1;function Ee(e,t,n){if(Le)return e(t,n);Le=!0;try{return Ae(e,t,n)}finally{Le=!1,(null!==Ne||null!==_e)&&(Pe(),Ce())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var a=wr(n);if(null===a)return null;n=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Me=!1;if(d)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(de){Me=!1}function Te(e,t,n,a,r,s,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Re=!1,Ie=null,Fe=!1,ze=null,Be={onError:function(e){Re=!0,Ie=e}};function qe(e,t,n,a,r,s,i,o,l){Re=!1,Ie=null,Te.apply(Be,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ue(e)!==e)throw Error(s(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,a=t;;){var r=n.return;if(null===r)break;var i=r.alternate;if(null===i){if(null!==(a=r.return)){n=a;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return He(r),e;if(i===a)return He(r),t;i=i.sibling}throw Error(s(188))}if(n.return!==a.return)n=r,a=i;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,a=i;break}if(l===a){o=!0,a=r,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,a=r;break}if(l===a){o=!0,a=i,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==a)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Ge=r.unstable_scheduleCallback,$e=r.unstable_cancelCallback,Xe=r.unstable_shouldYield,Ke=r.unstable_requestPaint,Je=r.unstable_now,Qe=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,at=r.unstable_IdlePriority,rt=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var a=0,r=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~r;0!==o?a=ut(o):0!==(s&=i)&&(a=ut(s))}else 0!==(i=n&~r)?a=ut(i):0!==s&&(a=ut(s));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&r)&&((r=a&-a)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&a)&&(a|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)r=1<<(n=31-it(t)),a|=e[n],t&=~r;return a}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var a=31-it(n),r=1<<a;r&t|e[a]&t&&(e[a]|=t),n&=~r}}var vt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,Nt,_t,St,kt=!1,Ct=[],At=null,Pt=null,Lt=null,Et=new Map,Dt=new Map,Mt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":Et.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Rt(e,t,n,a,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:a,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=vr(t))&&jt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function It(e){var t=br(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void St(e.priority,(function(){Nt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=vr(n))&&jt(t),e.blockedOn=n,!1;var a=new(n=e.nativeEvent).constructor(n.type,n);ye=a,n.target.dispatchEvent(a),ye=null,t.shift()}return!0}function zt(e,t,n){Ft(e)&&n.delete(t)}function Bt(){kt=!1,null!==At&&Ft(At)&&(At=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==Lt&&Ft(Lt)&&(Lt=null),Et.forEach(zt),Dt.forEach(zt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bt)))}function Ut(e){function t(t){return qt(t,e)}if(0<Ct.length){qt(Ct[0],e);for(var n=1;n<Ct.length;n++){var a=Ct[n];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==At&&qt(At,e),null!==Pt&&qt(Pt,e),null!==Lt&&qt(Lt,e),Et.forEach(t),Dt.forEach(t),n=0;n<Mt.length;n++)(a=Mt[n]).blockedOn===e&&(a.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)It(n),null===n.blockedOn&&Mt.shift()}var Wt=y.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,a){var r=vt,s=Wt.transition;Wt.transition=null;try{vt=1,Gt(e,t,n,a)}finally{vt=r,Wt.transition=s}}function Yt(e,t,n,a){var r=vt,s=Wt.transition;Wt.transition=null;try{vt=4,Gt(e,t,n,a)}finally{vt=r,Wt.transition=s}}function Gt(e,t,n,a){if(Ht){var r=Xt(e,t,n,a);if(null===r)Ha(e,t,a,$t,n),Tt(e,a);else if(function(e,t,n,a,r){switch(t){case"focusin":return At=Rt(At,e,t,n,a,r),!0;case"dragenter":return Pt=Rt(Pt,e,t,n,a,r),!0;case"mouseover":return Lt=Rt(Lt,e,t,n,a,r),!0;case"pointerover":var s=r.pointerId;return Et.set(s,Rt(Et.get(s)||null,e,t,n,a,r)),!0;case"gotpointercapture":return s=r.pointerId,Dt.set(s,Rt(Dt.get(s)||null,e,t,n,a,r)),!0}return!1}(r,e,t,n,a))a.stopPropagation();else if(Tt(e,a),4&t&&-1<Ot.indexOf(e)){for(;null!==r;){var s=vr(r);if(null!==s&&wt(s),null===(s=Xt(e,t,n,a))&&Ha(e,t,a,$t,n),s===r)break;r=s}null!==r&&a.stopPropagation()}else Ha(e,t,a,null,n)}}var $t=null;function Xt(e,t,n,a){if($t=null,null!==(e=br(e=we(a))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Jt=null,Qt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Qt,a=n.length,r="value"in Jt?Jt.value:Jt.textContent,s=r.length;for(e=0;e<a&&n[e]===r[e];e++);var i=a-e;for(t=1;t<=i&&n[a-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function an(){return!1}function rn(e){function t(t,n,a,r,s){for(var i in this._reactName=t,this._targetInst=a,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(r):r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:an,this.isPropagationStopped=an,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=rn(cn),un=I({},cn,{view:0,detail:0}),hn=rn(un),mn=I({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=rn(mn),pn=rn(I({},mn,{dataTransfer:0})),gn=rn(I({},un,{relatedTarget:0})),xn=rn(I({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=I({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=rn(bn),yn=rn(I({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _n(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Sn(){return _n}var kn=I({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=rn(kn),An=rn(I({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=rn(I({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Ln=rn(I({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),En=I({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=rn(En),Mn=[9,13,27,32],On=d&&"CompositionEvent"in window,Tn=null;d&&"documentMode"in document&&(Tn=document.documentMode);var Rn=d&&"TextEvent"in window&&!Tn,In=d&&(!On||Tn&&8<Tn&&11>=Tn),Fn=String.fromCharCode(32),zn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Vn(e,t,n,a){ke(a),0<(t=Ya(t,"onChange")).length&&(n=new dn("onChange","change",null,n,a),e.push({event:n,listeners:t}))}var Yn=null,Gn=null;function $n(e){Fa(e,0)}function Xn(e){if(G(yr(e)))return e}function Kn(e,t){if("change"===e)return t}var Jn=!1;if(d){var Qn;if(d){var Zn="oninput"in document;if(!Zn){var ea=document.createElement("div");ea.setAttribute("oninput","return;"),Zn="function"===typeof ea.oninput}Qn=Zn}else Qn=!1;Jn=Qn&&(!document.documentMode||9<document.documentMode)}function ta(){Yn&&(Yn.detachEvent("onpropertychange",na),Gn=Yn=null)}function na(e){if("value"===e.propertyName&&Xn(Gn)){var t=[];Vn(t,Gn,e,we(e)),Ee($n,t)}}function aa(e,t,n){"focusin"===e?(ta(),Gn=n,(Yn=t).attachEvent("onpropertychange",na)):"focusout"===e&&ta()}function ra(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Gn)}function sa(e,t){if("click"===e)return Xn(t)}function ia(e,t){if("input"===e||"change"===e)return Xn(t)}var oa="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function la(e,t){if(oa(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(a=0;a<n.length;a++){var r=n[a];if(!u.call(t,r)||!oa(e[r],t[r]))return!1}return!0}function ca(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function da(e,t){var n,a=ca(e);for(e=0;a;){if(3===a.nodeType){if(n=e+a.textContent.length,e<=t&&n>=t)return{node:a,offset:t-e};e=n}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ca(a)}}function ua(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ua(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ha(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(a){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function ma(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fa(e){var t=ha(),n=e.focusedElem,a=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ua(n.ownerDocument.documentElement,n)){if(null!==a&&ma(n))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(a.start,r);a=void 0===a.end?s:Math.min(a.end,r),!e.extend&&s>a&&(r=a,a=s,s=r),r=da(n,s);var i=da(n,a);r&&i&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>a?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pa=d&&"documentMode"in document&&11>=document.documentMode,ga=null,xa=null,ba=null,va=!1;function ya(e,t,n){var a=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;va||null==ga||ga!==$(a)||("selectionStart"in(a=ga)&&ma(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ba&&la(ba,a)||(ba=a,0<(a=Ya(xa,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:a}),t.target=ga)))}function wa(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ja={animationend:wa("Animation","AnimationEnd"),animationiteration:wa("Animation","AnimationIteration"),animationstart:wa("Animation","AnimationStart"),transitionend:wa("Transition","TransitionEnd")},Na={},_a={};function Sa(e){if(Na[e])return Na[e];if(!ja[e])return e;var t,n=ja[e];for(t in n)if(n.hasOwnProperty(t)&&t in _a)return Na[e]=n[t];return e}d&&(_a=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);var ka=Sa("animationend"),Ca=Sa("animationiteration"),Aa=Sa("animationstart"),Pa=Sa("transitionend"),La=new Map,Ea="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Da(e,t){La.set(e,t),l(t,[e])}for(var Ma=0;Ma<Ea.length;Ma++){var Oa=Ea[Ma];Da(Oa.toLowerCase(),"on"+(Oa[0].toUpperCase()+Oa.slice(1)))}Da(ka,"onAnimationEnd"),Da(Ca,"onAnimationIteration"),Da(Aa,"onAnimationStart"),Da("dblclick","onDoubleClick"),Da("focusin","onFocus"),Da("focusout","onBlur"),Da(Pa,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ta="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ra=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ta));function Ia(e,t,n){var a=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,a,r,i,o,l,c){if(qe.apply(this,arguments),Re){if(!Re)throw Error(s(198));var d=Ie;Re=!1,Ie=null,Fe||(Fe=!0,ze=d)}}(a,t,void 0,e),e.currentTarget=null}function Fa(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var a=e[n],r=a.event;a=a.listeners;e:{var s=void 0;if(t)for(var i=a.length-1;0<=i;i--){var o=a[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;Ia(r,o,c),s=l}else for(i=0;i<a.length;i++){if(l=(o=a[i]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;Ia(r,o,c),s=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function za(e,t){var n=t[pr];void 0===n&&(n=t[pr]=new Set);var a=e+"__bubble";n.has(a)||(Wa(t,e,2,!1),n.add(a))}function Ba(e,t,n){var a=0;t&&(a|=4),Wa(n,e,a,t)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Ua(e){if(!e[qa]){e[qa]=!0,i.forEach((function(t){"selectionchange"!==t&&(Ra.has(t)||Ba(t,!1,e),Ba(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qa]||(t[qa]=!0,Ba("selectionchange",!1,t))}}function Wa(e,t,n,a){switch(Kt(t)){case 1:var r=Vt;break;case 4:r=Yt;break;default:r=Gt}n=r.bind(null,t,n,e),r=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),a?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Ha(e,t,n,a,r){var s=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var i=a.tag;if(3===i||4===i){var o=a.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===i)for(i=a.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;i=i.return}for(;null!==o;){if(null===(i=br(o)))return;if(5===(l=i.tag)||6===l){a=s=i;continue e}o=o.parentNode}}a=a.return}Ee((function(){var a=s,r=we(n),i=[];e:{var o=La.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case ka:case Ca:case Aa:l=xn;break;case Pa:l=Ln;break;case"scroll":l=hn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,f=a;null!==f;){var p=(m=f).stateNode;if(5===m.tag&&null!==p&&(m=p,null!==h&&(null!=(p=De(f,h))&&d.push(Va(f,p,m)))),u)break;f=f.return}0<d.length&&(o=new l(o,c,null,n,r),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===ye||!(c=n.relatedTarget||n.fromElement)||!br(c)&&!c[fr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=a,null!==(c=(c=n.relatedTarget||n.toElement)?br(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=a),l!==c)){if(d=fn,p="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=An,p="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?o:yr(l),m=null==c?o:yr(c),(o=new d(p,f+"leave",l,n,r)).target=u,o.relatedTarget=m,p=null,br(r)===a&&((d=new d(h,f+"enter",c,n,r)).target=m,d.relatedTarget=u,p=d),u=p,l&&c)e:{for(h=c,f=0,m=d=l;m;m=Ga(m))f++;for(m=0,p=h;p;p=Ga(p))m++;for(;0<f-m;)d=Ga(d),f--;for(;0<m-f;)h=Ga(h),m--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Ga(d),h=Ga(h)}d=null}else d=null;null!==l&&$a(i,o,l,d,!1),null!==c&&null!==u&&$a(i,u,c,d,!0)}if("select"===(l=(o=a?yr(a):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Kn;else if(Hn(o))if(Jn)g=ia;else{g=ra;var x=aa}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sa);switch(g&&(g=g(e,a))?Vn(i,g,n,r):(x&&x(e,o,a),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&ee(o,"number",o.value)),x=a?yr(a):window,e){case"focusin":(Hn(x)||"true"===x.contentEditable)&&(ga=x,xa=a,ba=null);break;case"focusout":ba=xa=ga=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,ya(i,n,r);break;case"selectionchange":if(pa)break;case"keydown":case"keyup":ya(i,n,r)}var b;if(On)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Un?Bn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(In&&"ko"!==n.locale&&(Un||"onCompositionStart"!==v?"onCompositionEnd"===v&&Un&&(b=en()):(Qt="value"in(Jt=r)?Jt.value:Jt.textContent,Un=!0)),0<(x=Ya(a,v)).length&&(v=new yn(v,e,null,n,r),i.push({event:v,listeners:x}),b?v.data=b:null!==(b=qn(n))&&(v.data=b))),(b=Rn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(zn=!0,Fn);case"textInput":return(e=t.data)===Fn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!On&&Bn(e,t)?(e=en(),Zt=Qt=Jt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(a=Ya(a,"onBeforeInput")).length&&(r=new yn("onBeforeInput","beforeinput",null,n,r),i.push({event:r,listeners:a}),r.data=b))}Fa(i,t)}))}function Va(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ya(e,t){for(var n=t+"Capture",a=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=De(e,n))&&a.unshift(Va(e,s,r)),null!=(s=De(e,t))&&a.push(Va(e,s,r))),e=e.return}return a}function Ga(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $a(e,t,n,a,r){for(var s=t._reactName,i=[];null!==n&&n!==a;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===a)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=De(n,s))&&i.unshift(Va(n,l,o)):r||null!=(l=De(n,s))&&i.push(Va(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Xa=/\r\n?/g,Ka=/\u0000|\uFFFD/g;function Ja(e){return("string"===typeof e?e:""+e).replace(Xa,"\n").replace(Ka,"")}function Qa(e,t,n){if(t=Ja(t),Ja(e)!==t&&n)throw Error(s(425))}function Za(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ar="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ir="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(or)}:ar;function or(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,a=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===a)return e.removeChild(r),void Ut(t);a--}else"$"!==n&&"$?"!==n&&"$!"!==n||a++;n=r}while(n);Ut(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),hr="__reactFiber$"+ur,mr="__reactProps$"+ur,fr="__reactContainer$"+ur,pr="__reactEvents$"+ur,gr="__reactListeners$"+ur,xr="__reactHandles$"+ur;function br(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=dr(e);null!==e;){if(n=e[hr])return n;e=dr(e)}return t}n=(e=n).parentNode}return null}function vr(e){return!(e=e[hr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wr(e){return e[mr]||null}var jr=[],Nr=-1;function _r(e){return{current:e}}function Sr(e){0>Nr||(e.current=jr[Nr],jr[Nr]=null,Nr--)}function kr(e,t){Nr++,jr[Nr]=e.current,e.current=t}var Cr={},Ar=_r(Cr),Pr=_r(!1),Lr=Cr;function Er(e,t){var n=e.type.contextTypes;if(!n)return Cr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Dr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mr(){Sr(Pr),Sr(Ar)}function Or(e,t,n){if(Ar.current!==Cr)throw Error(s(168));kr(Ar,t),kr(Pr,n)}function Tr(e,t,n){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return n;for(var r in a=a.getChildContext())if(!(r in t))throw Error(s(108,W(e)||"Unknown",r));return I({},n,a)}function Rr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Cr,Lr=Ar.current,kr(Ar,e),kr(Pr,Pr.current),!0}function Ir(e,t,n){var a=e.stateNode;if(!a)throw Error(s(169));n?(e=Tr(e,t,Lr),a.__reactInternalMemoizedMergedChildContext=e,Sr(Pr),Sr(Ar),kr(Ar,e)):Sr(Pr),kr(Pr,n)}var Fr=null,zr=!1,Br=!1;function qr(e){null===Fr?Fr=[e]:Fr.push(e)}function Ur(){if(!Br&&null!==Fr){Br=!0;var e=0,t=vt;try{var n=Fr;for(vt=1;e<n.length;e++){var a=n[e];do{a=a(!0)}while(null!==a)}Fr=null,zr=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),Ge(Ze,Ur),r}finally{vt=t,Br=!1}}return null}var Wr=[],Hr=0,Vr=null,Yr=0,Gr=[],$r=0,Xr=null,Kr=1,Jr="";function Qr(e,t){Wr[Hr++]=Yr,Wr[Hr++]=Vr,Vr=e,Yr=t}function Zr(e,t,n){Gr[$r++]=Kr,Gr[$r++]=Jr,Gr[$r++]=Xr,Xr=e;var a=Kr;e=Jr;var r=32-it(a)-1;a&=~(1<<r),n+=1;var s=32-it(t)+r;if(30<s){var i=r-r%5;s=(a&(1<<i)-1).toString(32),a>>=i,r-=i,Kr=1<<32-it(t)+r|n<<r|a,Jr=s+e}else Kr=1<<s|n<<r|a,Jr=e}function es(e){null!==e.return&&(Qr(e,1),Zr(e,1,0))}function ts(e){for(;e===Vr;)Vr=Wr[--Hr],Wr[Hr]=null,Yr=Wr[--Hr],Wr[Hr]=null;for(;e===Xr;)Xr=Gr[--$r],Gr[$r]=null,Jr=Gr[--$r],Gr[$r]=null,Kr=Gr[--$r],Gr[$r]=null}var ns=null,as=null,rs=!1,ss=null;function is(e,t){var n=Ec(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,as=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,as=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xr?{id:Kr,overflow:Jr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ec(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,as=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=as;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var a=ns;t&&os(e,t)?is(a,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function us(e){if(e!==ns)return!1;if(!rs)return ds(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=as)){if(ls(e))throw hs(),Error(s(418));for(;t;)is(e,t),t=cr(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){as=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}as=null}}else as=ns?cr(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=as;e;)e=cr(e.nextSibling)}function ms(){as=ns=null,rs=!1}function fs(e){null===ss?ss=[e]:ss.push(e)}var ps=y.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var a=n.stateNode}if(!a)throw Error(s(147,e));var r=a,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function xs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bs(e){return(0,e._init)(e._payload)}function vs(e){function t(t,n){if(e){var a=t.deletions;null===a?(t.deletions=[n],t.flags|=16):a.push(n)}}function n(n,a){if(!e)return null;for(;null!==a;)t(n,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function i(t,n,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<n?(t.flags|=2,n):a:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,a){return null===t||6!==t.tag?((t=Ic(n,e.mode,a)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,a){var s=n.type;return s===N?u(e,t,n.props.children,a,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&bs(s)===t.type)?((a=r(t,n.props)).ref=gs(e,t,n),a.return=e,a):((a=Oc(n.type,n.key,n.props,null,e.mode,a)).ref=gs(e,t,n),a.return=e,a)}function d(e,t,n,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,a)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,a,s){return null===t||7!==t.tag?((t=Tc(n,e.mode,a,s)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ic(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case j:return(t=Fc(t,e.mode,n)).return=e,t;case D:return h(e,(0,t._init)(t._payload),n)}if(te(t)||T(t))return(t=Tc(t,e.mode,n,null)).return=e,t;xs(e,t)}return null}function m(e,t,n,a){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,a);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(e,t,n,a):null;case j:return n.key===r?d(e,t,n,a):null;case D:return m(e,t,(r=n._init)(n._payload),a)}if(te(n)||T(n))return null!==r?null:u(e,t,n,a,null);xs(e,n)}return null}function f(e,t,n,a,r){if("string"===typeof a&&""!==a||"number"===typeof a)return l(t,e=e.get(n)||null,""+a,r);if("object"===typeof a&&null!==a){switch(a.$$typeof){case w:return c(t,e=e.get(null===a.key?n:a.key)||null,a,r);case j:return d(t,e=e.get(null===a.key?n:a.key)||null,a,r);case D:return f(e,t,n,(0,a._init)(a._payload),r)}if(te(a)||T(a))return u(t,e=e.get(n)||null,a,r,null);xs(t,a)}return null}function p(r,s,o,l){for(var c=null,d=null,u=s,p=s=0,g=null;null!==u&&p<o.length;p++){u.index>p?(g=u,u=null):g=u.sibling;var x=m(r,u,o[p],l);if(null===x){null===u&&(u=g);break}e&&u&&null===x.alternate&&t(r,u),s=i(x,s,p),null===d?c=x:d.sibling=x,d=x,u=g}if(p===o.length)return n(r,u),rs&&Qr(r,p),c;if(null===u){for(;p<o.length;p++)null!==(u=h(r,o[p],l))&&(s=i(u,s,p),null===d?c=u:d.sibling=u,d=u);return rs&&Qr(r,p),c}for(u=a(r,u);p<o.length;p++)null!==(g=f(u,r,p,o[p],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?p:g.key),s=i(g,s,p),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach((function(e){return t(r,e)})),rs&&Qr(r,p),c}function g(r,o,l,c){var d=T(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,p=o,g=o=0,x=null,b=l.next();null!==p&&!b.done;g++,b=l.next()){p.index>g?(x=p,p=null):x=p.sibling;var v=m(r,p,b.value,c);if(null===v){null===p&&(p=x);break}e&&p&&null===v.alternate&&t(r,p),o=i(v,o,g),null===u?d=v:u.sibling=v,u=v,p=x}if(b.done)return n(r,p),rs&&Qr(r,g),d;if(null===p){for(;!b.done;g++,b=l.next())null!==(b=h(r,b.value,c))&&(o=i(b,o,g),null===u?d=b:u.sibling=b,u=b);return rs&&Qr(r,g),d}for(p=a(r,p);!b.done;g++,b=l.next())null!==(b=f(p,r,g,b.value,c))&&(e&&null!==b.alternate&&p.delete(null===b.key?g:b.key),o=i(b,o,g),null===u?d=b:u.sibling=b,u=b);return e&&p.forEach((function(e){return t(r,e)})),rs&&Qr(r,g),d}return function e(a,s,i,l){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,d=s;null!==d;){if(d.key===c){if((c=i.type)===N){if(7===d.tag){n(a,d.sibling),(s=r(d,i.props.children)).return=a,a=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&bs(c)===d.type){n(a,d.sibling),(s=r(d,i.props)).ref=gs(a,d,i),s.return=a,a=s;break e}n(a,d);break}t(a,d),d=d.sibling}i.type===N?((s=Tc(i.props.children,a.mode,l,i.key)).return=a,a=s):((l=Oc(i.type,i.key,i.props,null,a.mode,l)).ref=gs(a,s,i),l.return=a,a=l)}return o(a);case j:e:{for(d=i.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){n(a,s.sibling),(s=r(s,i.children||[])).return=a,a=s;break e}n(a,s);break}t(a,s),s=s.sibling}(s=Fc(i,a.mode,l)).return=a,a=s}return o(a);case D:return e(a,s,(d=i._init)(i._payload),l)}if(te(i))return p(a,s,i,l);if(T(i))return g(a,s,i,l);xs(a,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(n(a,s.sibling),(s=r(s,i)).return=a,a=s):(n(a,s),(s=Ic(i,a.mode,l)).return=a,a=s),o(a)):n(a,s)}}var ys=vs(!0),ws=vs(!1),js=_r(null),Ns=null,_s=null,Ss=null;function ks(){Ss=_s=Ns=null}function Cs(e){var t=js.current;Sr(js),e._currentValue=t}function As(e,t,n){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===n)break;e=e.return}}function Ps(e,t){Ns=e,Ss=_s=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vo=!0),e.firstContext=null)}function Ls(e){var t=e._currentValue;if(Ss!==e)if(e={context:e,memoizedValue:t,next:null},null===_s){if(null===Ns)throw Error(s(308));_s=e,Ns.dependencies={lanes:0,firstContext:e}}else _s=_s.next=e;return t}var Es=null;function Ds(e){null===Es?Es=[e]:Es.push(e)}function Ms(e,t,n,a){var r=t.interleaved;return null===r?(n.next=n,Ds(t)):(n.next=r.next,r.next=n),t.interleaved=n,Os(e,a)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ts=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Is(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zs(e,t,n){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Al)){var r=a.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),a.pending=t,Os(e,n)}return null===(r=a.interleaved)?(t.next=t,Ds(a)):(t.next=r.next,r.next=t),a.interleaved=t,Os(e,n)}function Bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,bt(e,n)}}function qs(e,t){var n=e.updateQueue,a=e.alternate;if(null!==a&&n===(a=a.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:a.shared,effects:a.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Us(e,t,n,a){var r=e.updateQueue;Ts=!1;var s=r.firstBaseUpdate,i=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?s=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=r.baseState;for(i=0,d=c=l=null,o=s;;){var h=o.lane,m=o.eventTime;if((a&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,p=o;switch(h=t,m=n,p.tag){case 1:if("function"===typeof(f=p.payload)){u=f.call(m,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=p.payload)?f.call(m,u,h):f)||void 0===h)break e;u=I({},u,h);break e;case 2:Ts=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(h=o).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===d&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{i|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Rl|=i,e.lanes=i,e.memoizedState=u}}function Ws(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],r=a.callback;if(null!==r){if(a.callback=null,a=n,"function"!==typeof r)throw Error(s(191,r));r.call(a)}}}var Hs={},Vs=_r(Hs),Ys=_r(Hs),Gs=_r(Hs);function $s(e){if(e===Hs)throw Error(s(174));return e}function Xs(e,t){switch(kr(Gs,t),kr(Ys,e),kr(Vs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sr(Vs),kr(Vs,t)}function Ks(){Sr(Vs),Sr(Ys),Sr(Gs)}function Js(e){$s(Gs.current);var t=$s(Vs.current),n=le(t,e.type);t!==n&&(kr(Ys,e),kr(Vs,n))}function Qs(e){Ys.current===e&&(Sr(Vs),Sr(Ys))}var Zs=_r(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var ai=y.ReactCurrentDispatcher,ri=y.ReactCurrentBatchConfig,si=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(s(321))}function fi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oa(e[n],t[n]))return!1;return!0}function pi(e,t,n,a,r,i){if(si=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ai.current=null===e||null===e.memoizedState?Qi:Zi,e=n(a,r),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(s(301));i+=1,li=oi=null,t.updateQueue=null,ai.current=eo,e=n(a,r)}while(di)}if(ai.current=Ji,t=null!==oi&&null!==oi.next,si=0,li=oi=ii=null,ci=!1,t)throw Error(s(300));return e}function gi(){var e=0!==ui;return ui=0,e}function xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function bi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function vi(e,t){return"function"===typeof t?t(e):t}function yi(e){var t=bi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var a=oi,r=a.baseQueue,i=n.pending;if(null!==i){if(null!==r){var o=r.next;r.next=i.next,i.next=o}a.baseQueue=r=i,n.pending=null}if(null!==r){i=r.next,a=a.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((si&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=a):c=c.next=h,ii.lanes|=u,Rl|=u}d=d.next}while(null!==d&&d!==i);null===c?o=a:c.next=l,oa(a,t.memoizedState)||(vo=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=c,n.lastRenderedState=a}if(null!==(e=n.interleaved)){r=e;do{i=r.lane,ii.lanes|=i,Rl|=i,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wi(e){var t=bi(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var a=n.dispatch,r=n.pending,i=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{i=e(i,o.action),o=o.next}while(o!==r);oa(i,t.memoizedState)||(vo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,a]}function ji(){}function Ni(e,t){var n=ii,a=bi(),r=t(),i=!oa(a.memoizedState,r);if(i&&(a.memoizedState=r,vo=!0),a=a.queue,Ti(ki.bind(null,n,a,e),[e]),a.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Li(9,Si.bind(null,n,a,r,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&si)||_i(n,t,r)}return r}function _i(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Si(e,t,n,a){t.value=n,t.getSnapshot=a,Ci(t)&&Ai(e)}function ki(e,t,n){return n((function(){Ci(t)&&Ai(e)}))}function Ci(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oa(e,n)}catch(a){return!0}}function Ai(e){var t=Os(e,1);null!==t&&nc(t,e,1,-1)}function Pi(e){var t=xi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[t.memoizedState,e]}function Li(e,t,n,a){return e={tag:e,create:t,destroy:n,deps:a,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(a=n.next,n.next=e,e.next=a,t.lastEffect=e),e}function Ei(){return bi().memoizedState}function Di(e,t,n,a){var r=xi();ii.flags|=e,r.memoizedState=Li(1|t,n,void 0,void 0===a?null:a)}function Mi(e,t,n,a){var r=bi();a=void 0===a?null:a;var s=void 0;if(null!==oi){var i=oi.memoizedState;if(s=i.destroy,null!==a&&fi(a,i.deps))return void(r.memoizedState=Li(t,n,s,a))}ii.flags|=e,r.memoizedState=Li(1|t,n,s,a)}function Oi(e,t){return Di(8390656,8,e,t)}function Ti(e,t){return Mi(2048,8,e,t)}function Ri(e,t){return Mi(4,2,e,t)}function Ii(e,t){return Mi(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mi(4,4,Fi.bind(null,t,e),n)}function Bi(){}function qi(e,t){var n=bi();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&fi(t,a[1])?a[0]:(n.memoizedState=[e,t],e)}function Ui(e,t){var n=bi();t=void 0===t?null:t;var a=n.memoizedState;return null!==a&&null!==t&&fi(t,a[1])?a[0]:(e=e(),n.memoizedState=[e,t],e)}function Wi(e,t,n){return 0===(21&si)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=n):(oa(n,t)||(n=pt(),ii.lanes|=n,Rl|=n,e.baseState=!0),t)}function Hi(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var a=ri.transition;ri.transition={};try{e(!1),t()}finally{vt=n,ri.transition=a}}function Vi(){return bi().memoizedState}function Yi(e,t,n){var a=tc(e);if(n={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null},$i(e))Xi(t,n);else if(null!==(n=Ms(e,t,n,a))){nc(n,e,a,ec()),Ki(n,t,a)}}function Gi(e,t,n){var a=tc(e),r={lane:a,action:n,hasEagerState:!1,eagerState:null,next:null};if($i(e))Xi(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=s(i,n);if(r.hasEagerState=!0,r.eagerState=o,oa(o,i)){var l=t.interleaved;return null===l?(r.next=r,Ds(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Ms(e,t,r,a))&&(nc(n,e,a,r=ec()),Ki(n,t,a))}}function $i(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Xi(e,t){di=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ki(e,t,n){if(0!==(4194240&n)){var a=t.lanes;n|=a&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Ji={readContext:Ls,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Qi={readContext:Ls,useCallback:function(e,t){return xi().memoizedState=[e,void 0===t?null:t],e},useContext:Ls,useEffect:Oi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Di(4194308,4,Fi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Di(4194308,4,e,t)},useInsertionEffect:function(e,t){return Di(4,2,e,t)},useMemo:function(e,t){var n=xi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var a=xi();return t=void 0!==n?n(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Yi.bind(null,ii,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},xi().memoizedState=e},useState:Pi,useDebugValue:Bi,useDeferredValue:function(e){return xi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=Hi.bind(null,e[1]),xi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var a=ii,r=xi();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!==(30&si)||_i(a,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Oi(ki.bind(null,a,i,e),[e]),a.flags|=2048,Li(9,Si.bind(null,a,i,n,t),void 0,null),n},useId:function(){var e=xi(),t=Pl.identifierPrefix;if(rs){var n=Jr;t=":"+t+"R"+(n=(Kr&~(1<<32-it(Kr)-1)).toString(32)+n),0<(n=ui++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Ls,useCallback:qi,useContext:Ls,useEffect:Ti,useImperativeHandle:zi,useInsertionEffect:Ri,useLayoutEffect:Ii,useMemo:Ui,useReducer:yi,useRef:Ei,useState:function(){return yi(vi)},useDebugValue:Bi,useDeferredValue:function(e){return Wi(bi(),oi.memoizedState,e)},useTransition:function(){return[yi(vi)[0],bi().memoizedState]},useMutableSource:ji,useSyncExternalStore:Ni,useId:Vi,unstable_isNewReconciler:!1},eo={readContext:Ls,useCallback:qi,useContext:Ls,useEffect:Ti,useImperativeHandle:zi,useInsertionEffect:Ri,useLayoutEffect:Ii,useMemo:Ui,useReducer:wi,useRef:Ei,useState:function(){return wi(vi)},useDebugValue:Bi,useDeferredValue:function(e){var t=bi();return null===oi?t.memoizedState=e:Wi(t,oi.memoizedState,e)},useTransition:function(){return[wi(vi)[0],bi().memoizedState]},useMutableSource:ji,useSyncExternalStore:Ni,useId:Vi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=I({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,a){n=null===(n=n(a,t=e.memoizedState))||void 0===n?t:I({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ao={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var a=ec(),r=tc(e),s=Fs(a,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,r))&&(nc(t,e,r,a),Bs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var a=ec(),r=tc(e),s=Fs(a,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=zs(e,s,r))&&(nc(t,e,r,a),Bs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),a=tc(e),r=Fs(n,a);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=zs(e,r,a))&&(nc(t,e,a,n),Bs(t,e,a))}};function ro(e,t,n,a,r,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!la(n,a)||!la(r,s))}function so(e,t,n){var a=!1,r=Cr,s=t.contextType;return"object"===typeof s&&null!==s?s=Ls(s):(r=Dr(t)?Lr:Ar.current,s=(a=null!==(a=t.contextTypes)&&void 0!==a)?Er(e,r):Cr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ao,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function io(e,t,n,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,a),t.state!==e&&ao.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,a){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Ls(s):(s=Dr(t)?Lr:Ar.current,r.context=Er(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ao.enqueueReplaceState(r,r.state,null),Us(e,n,r,a),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",a=t;do{n+=q(a),a=a.return}while(a);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var a=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=a),uo(0,t)},n}function fo(e,t,n){(n=Fs(-1,n)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var r=t.value;n.payload=function(){return a(r)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof a&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function po(e,t,n){var a=e.pingCache;if(null===a){a=e.pingCache=new ho;var r=new Set;a.set(t,r)}else void 0===(r=a.get(t))&&(r=new Set,a.set(t,r));r.has(n)||(r.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xo(e,t,n,a,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,zs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var bo=y.ReactCurrentOwner,vo=!1;function yo(e,t,n,a){t.child=null===e?ws(t,null,n,a):ys(t,e.child,n,a)}function wo(e,t,n,a,r){n=n.render;var s=t.ref;return Ps(t,r),a=pi(e,t,n,a,s,r),n=gi(),null===e||vo?(rs&&n&&es(t),t.flags|=1,yo(e,t,a,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ho(e,t,r))}function jo(e,t,n,a,r){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,a,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,a,r))}if(s=e.child,0===(e.lanes&r)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:la)(i,a)&&e.ref===t.ref)return Ho(e,t,r)}return t.flags|=1,(e=Mc(s,a)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,a,r){if(null!==e){var s=e.memoizedProps;if(la(s,a)&&e.ref===t.ref){if(vo=!1,t.pendingProps=a=s,0===(e.lanes&r))return t.lanes=e.lanes,Ho(e,t,r);0!==(131072&e.flags)&&(vo=!0)}}return ko(e,t,n,a,r)}function _o(e,t,n){var a=t.pendingProps,r=a.children,s=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},kr(Ml,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,kr(Ml,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==s?s.baseLanes:n,kr(Ml,Dl),Dl|=a}else null!==s?(a=s.baseLanes|n,t.memoizedState=null):a=n,kr(Ml,Dl),Dl|=a;return yo(e,t,r,n),t.child}function So(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ko(e,t,n,a,r){var s=Dr(n)?Lr:Ar.current;return s=Er(t,s),Ps(t,r),n=pi(e,t,n,a,s,r),a=gi(),null===e||vo?(rs&&a&&es(t),t.flags|=1,yo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ho(e,t,r))}function Co(e,t,n,a,r){if(Dr(n)){var s=!0;Rr(t)}else s=!1;if(Ps(t,r),null===t.stateNode)Wo(e,t),so(t,n,a),oo(t,n,a,r),a=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ls(c):c=Er(t,c=Dr(n)?Lr:Ar.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==a||l!==c)&&io(t,i,a,c),Ts=!1;var h=t.memoizedState;i.state=h,Us(t,a,i,r),l=t.memoizedState,o!==a||h!==l||Pr.current||Ts?("function"===typeof d&&(no(t,n,d,a),l=t.memoizedState),(o=Ts||ro(t,n,o,a,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=l),i.props=a,i.state=l,i.context=c,a=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),a=!1)}else{i=t.stateNode,Is(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ls(l):l=Er(t,l=Dr(n)?Lr:Ar.current);var m=n.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,a,l),Ts=!1,h=t.memoizedState,i.state=h,Us(t,a,i,r);var f=t.memoizedState;o!==u||h!==f||Pr.current||Ts?("function"===typeof m&&(no(t,n,m,a),f=t.memoizedState),(c=Ts||ro(t,n,c,a,h,f,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(a,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=f),i.props=a,i.state=f,i.context=l,a=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),a=!1)}return Ao(e,t,n,a,s,r)}function Ao(e,t,n,a,r,s){So(e,t);var i=0!==(128&t.flags);if(!a&&!i)return r&&Ir(t,n,!1),Ho(e,t,s);a=t.stateNode,bo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&i?(t.child=ys(t,e.child,null,s),t.child=ys(t,null,o,s)):yo(e,t,o,s),t.memoizedState=a.state,r&&Ir(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Or(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Or(0,t.context,!1),Xs(e,t.containerInfo)}function Lo(e,t,n,a,r){return ms(),fs(r),t.flags|=256,yo(e,t,n,a),t.child}var Eo,Do,Mo,Oo,To={dehydrated:null,treeContext:null,retryLane:0};function Ro(e){return{baseLanes:e,cachePool:null,transitions:null}}function Io(e,t,n){var a,r=t.pendingProps,i=Zs.current,o=!1,l=0!==(128&t.flags);if((a=l)||(a=(null===e||null!==e.memoizedState)&&0!==(2&i)),a?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),kr(Zs,1&i),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Rc(l,r,0,null),e=Tc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ro(n),t.memoizedState=To,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(a=i.dehydrated))return function(e,t,n,a,r,i,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,a=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=a.fallback,r=t.mode,a=Rc({mode:"visible",children:a.children},r,0,null),(i=Tc(i,r,o,null)).flags|=2,a.return=t,i.return=t,a.sibling=i,t.child=a,0!==(1&t.mode)&&ys(t,e.child,null,o),t.child.memoizedState=Ro(o),t.memoizedState=To,i);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===r.data){if(a=r.nextSibling&&r.nextSibling.dataset)var l=a.dgst;return a=l,zo(e,t,o,a=co(i=Error(s(419)),a,void 0))}if(l=0!==(o&e.childLanes),vo||l){if(null!==(a=Pl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(a.suspendedLanes|o))?0:r)&&r!==i.retryLane&&(i.retryLane=r,Os(e,r),nc(a,e,r,-1))}return pc(),zo(e,t,o,a=co(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,as=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Gr[$r++]=Kr,Gr[$r++]=Jr,Gr[$r++]=Xr,Kr=e.id,Jr=e.overflow,Xr=t),t=Fo(t,a.children),t.flags|=4096,t)}(e,t,l,r,a,i,n);if(o){o=r.fallback,l=t.mode,a=(i=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==i?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Mc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==a?o=Mc(a,o):(o=Tc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?Ro(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=To,r}return e=(o=e.child).sibling,r=Mc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fo(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,a){return null!==a&&fs(a),ys(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),As(e.return,t,n)}function qo(e,t,n,a,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=a,s.tail=n,s.tailMode=r)}function Uo(e,t,n){var a=t.pendingProps,r=a.revealOrder,s=a.tail;if(yo(e,t,a.children,n),0!==(2&(a=Zs.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(kr(Zs,a),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),qo(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ei(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}qo(t,!0,n,null,s);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vo(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var a=null;null!==n;)null!==n.alternate&&(a=n),n=n.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Yo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,a=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=14680064&r.subtreeFlags,a|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=n,t}function Go(e,t,n){var a=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(t),null;case 1:case 17:return Dr(t.type)&&Mr(),Yo(t),null;case 3:return a=t.stateNode,Ks(),Sr(Pr),Sr(Ar),ni(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ic(ss),ss=null))),Do(e,t),Yo(t),null;case 5:Qs(t);var r=$s(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Mo(e,t,n,a,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(s(166));return Yo(t),null}if(e=$s(Vs.current),us(t)){a=t.stateNode,n=t.type;var i=t.memoizedProps;switch(a[hr]=t,a[mr]=i,e=0!==(1&t.mode),n){case"dialog":za("cancel",a),za("close",a);break;case"iframe":case"object":case"embed":za("load",a);break;case"video":case"audio":for(r=0;r<Ta.length;r++)za(Ta[r],a);break;case"source":za("error",a);break;case"img":case"image":case"link":za("error",a),za("load",a);break;case"details":za("toggle",a);break;case"input":K(a,i),za("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},za("invalid",a);break;case"textarea":re(a,i),za("invalid",a)}for(var l in be(n,i),r=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?a.textContent!==c&&(!0!==i.suppressHydrationWarning&&Qa(a.textContent,c,e),r=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Qa(a.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&za("scroll",a)}switch(n){case"input":Y(a),Z(a,i,!0);break;case"textarea":Y(a),ie(a);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(a.onclick=Za)}a=r,t.updateQueue=a,null!==a&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=l.createElement(n,{is:a.is}):(e=l.createElement(n),"select"===n&&(l=e,a.multiple?l.multiple=!0:a.size&&(l.size=a.size))):e=l.createElementNS(e,n),e[hr]=t,e[mr]=a,Eo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(n,a),n){case"dialog":za("cancel",e),za("close",e),r=a;break;case"iframe":case"object":case"embed":za("load",e),r=a;break;case"video":case"audio":for(r=0;r<Ta.length;r++)za(Ta[r],e);r=a;break;case"source":za("error",e),r=a;break;case"img":case"image":case"link":za("error",e),za("load",e),r=a;break;case"details":za("toggle",e),r=a;break;case"input":K(e,a),r=X(e,a),za("invalid",e);break;case"option":default:r=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},r=I({},a,{value:void 0}),za("invalid",e);break;case"textarea":re(e,a),r=ae(e,a),za("invalid",e)}for(i in be(n,r),c=r)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&za("scroll",e):null!=d&&v(e,i,d,l))}switch(n){case"input":Y(e),Z(e,a,!1);break;case"textarea":Y(e),ie(e);break;case"option":null!=a.value&&e.setAttribute("value",""+H(a.value));break;case"select":e.multiple=!!a.multiple,null!=(i=a.value)?ne(e,!!a.multiple,i,!1):null!=a.defaultValue&&ne(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Za)}switch(n){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Yo(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(s(166));if(n=$s(Gs.current),$s(Vs.current),us(t)){if(a=t.stateNode,n=t.memoizedProps,a[hr]=t,(i=a.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Qa(a.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qa(a.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(a=(9===n.nodeType?n:n.ownerDocument).createTextNode(a))[hr]=t,t.stateNode=a}return Yo(t),null;case 13:if(Sr(Zs),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==as&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ms(),t.flags|=98560,i=!1;else if(i=us(t),null!==a&&null!==a.dehydrated){if(null===e){if(!i)throw Error(s(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(s(317));i[hr]=t}else ms(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Yo(t),i=!1}else null!==ss&&(ic(ss),ss=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ol&&(Ol=3):pc())),null!==t.updateQueue&&(t.flags|=4),Yo(t),null);case 4:return Ks(),Do(e,t),null===e&&Ua(t.stateNode.containerInfo),Yo(t),null;case 10:return Cs(t.type._context),Yo(t),null;case 19:if(Sr(Zs),null===(i=t.memoizedState))return Yo(t),null;if(a=0!==(128&t.flags),null===(l=i.rendering))if(a)Vo(i,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Vo(i,!1),null!==(a=l.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=n,n=t.child;null!==n;)e=a,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return kr(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==i.tail&&Je()>Ul&&(t.flags|=128,a=!0,Vo(i,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=ei(l))){if(t.flags|=128,a=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!rs)return Yo(t),null}else 2*Je()-i.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,a=!0,Vo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Je(),t.sibling=null,n=Zs.current,kr(Zs,a?1&n|2:1&n),t):(Yo(t),null);case 22:case 23:return uc(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Yo(t),6&t.subtreeFlags&&(t.flags|=8192)):Yo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function $o(e,t){switch(ts(t),t.tag){case 1:return Dr(t.type)&&Mr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ks(),Sr(Pr),Sr(Ar),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qs(t),null;case 13:if(Sr(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ms()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sr(Zs),null;case 4:return Ks(),null;case 10:return Cs(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Eo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},Mo=function(e,t,n,a){var r=e.memoizedProps;if(r!==a){e=t.stateNode,$s(Vs.current);var s,i=null;switch(n){case"input":r=X(e,r),a=X(e,a),i=[];break;case"select":r=I({},r,{value:void 0}),a=I({},a,{value:void 0}),i=[];break;case"textarea":r=ae(e,r),a=ae(e,a),i=[];break;default:"function"!==typeof r.onClick&&"function"===typeof a.onClick&&(e.onclick=Za)}for(d in be(n,a),n=null,r)if(!a.hasOwnProperty(d)&&r.hasOwnProperty(d)&&null!=r[d])if("style"===d){var l=r[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(l=null!=r?r[d]:void 0,a.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&za("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Oo=function(e,t,n,a){n!==a&&(t.flags|=4)};var Xo=!1,Ko=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(a){_c(e,t,a)}else n.current=null}function el(e,t,n){try{n()}catch(a){_c(e,t,a)}}var tl=!1;function nl(e,t,n){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var r=a=a.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(t,n,s)}r=r.next}while(r!==a)}}function al(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var a=n.create;n.destroy=a()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[mr],delete t[pr],delete t[gr],delete t[xr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Za));else if(4!==a&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==a&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:Ko||Zo(n,t);case 6:var a=dl,r=ul;dl=null,hl(e,t,n),ul=r,null!==(dl=a)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ut(e)):lr(dl,n.stateNode));break;case 4:a=dl,r=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=a,ul=r;break;case 0:case 11:case 14:case 15:if(!Ko&&(null!==(a=n.updateQueue)&&null!==(a=a.lastEffect))){r=a=a.next;do{var s=r,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&el(n,t,i),r=r.next}while(r!==a)}hl(e,t,n);break;case 1:if(!Ko&&(Zo(n,t),"function"===typeof(a=n.stateNode).componentWillUnmount))try{a.props=n.memoizedProps,a.state=n.memoizedState,a.componentWillUnmount()}catch(o){_c(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Ko=(a=Ko)||null!==n.memoizedState,hl(e,t,n),Ko=a):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Jo),t.forEach((function(t){var a=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(a,a))}))}}function pl(e,t){var n=t.deletions;if(null!==n)for(var a=0;a<n.length;a++){var r=n[a];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));ml(i,o,r),dl=null,ul=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(d){_c(r,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pl(t,e),xl(e),4&a){try{nl(3,e,e.return),al(3,e)}catch(g){_c(e,e.return,g)}try{nl(5,e,e.return)}catch(g){_c(e,e.return,g)}}break;case 1:pl(t,e),xl(e),512&a&&null!==n&&Zo(n,n.return);break;case 5:if(pl(t,e),xl(e),512&a&&null!==n&&Zo(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(g){_c(e,e.return,g)}}if(4&a&&null!=(r=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&J(r,i),ve(l,o);var d=ve(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(r,h):"dangerouslySetInnerHTML"===u?ue(r,h):"children"===u?he(r,h):v(r,u,h,d)}switch(l){case"input":Q(r,i);break;case"textarea":se(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?ne(r,!!i.multiple,f,!1):m!==!!i.multiple&&(null!=i.defaultValue?ne(r,!!i.multiple,i.defaultValue,!0):ne(r,!!i.multiple,i.multiple?[]:"",!1))}r[mr]=i}catch(g){_c(e,e.return,g)}}break;case 6:if(pl(t,e),xl(e),4&a){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(g){_c(e,e.return,g)}}break;case 3:if(pl(t,e),xl(e),4&a&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){_c(e,e.return,g)}break;case 4:default:pl(t,e),xl(e);break;case 13:pl(t,e),xl(e),8192&(r=e.child).flags&&(i=null!==r.memoizedState,r.stateNode.isHidden=i,!i||null!==r.alternate&&null!==r.alternate.memoizedState||(ql=Je())),4&a&&fl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Ko=(d=Ko)||u,pl(t,e),Ko=d):pl(t,e),xl(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qo=e,u=e.child;null!==u;){for(h=Qo=u;null!==Qo;){switch(f=(m=Qo).child,m.tag){case 0:case 11:case 14:case 15:nl(4,m,m.return);break;case 1:Zo(m,m.return);var p=m.stateNode;if("function"===typeof p.componentWillUnmount){a=m,n=m.return;try{t=a,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){_c(a,n,g)}}break;case 5:Zo(m,m.return);break;case 22:if(null!==m.memoizedState){wl(h);continue}}null!==f?(f.return=m,Qo=f):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{r=h.stateNode,d?"function"===typeof(i=r.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(g){_c(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){_c(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:pl(t,e),xl(e),4&a&&fl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var a=n;break e}n=n.return}throw Error(s(160))}switch(a.tag){case 5:var r=a.stateNode;32&a.flags&&(he(r,""),a.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var i=a.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(s(161))}}catch(o){_c(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Qo=e,vl(e,t,n)}function vl(e,t,n){for(var a=0!==(1&e.mode);null!==Qo;){var r=Qo,s=r.child;if(22===r.tag&&a){var i=null!==r.memoizedState||Xo;if(!i){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Ko;o=Xo;var c=Ko;if(Xo=i,(Ko=l)&&!c)for(Qo=r;null!==Qo;)l=(i=Qo).child,22===i.tag&&null!==i.memoizedState?jl(r):null!==l?(l.return=i,Qo=l):jl(r);for(;null!==s;)Qo=s,vl(s,t,n),s=s.sibling;Qo=r,Xo=o,Ko=c}yl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Qo=s):yl(e)}}function yl(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ko||al(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Ko)if(null===n)a.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);a.componentDidUpdate(r,n.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Ws(t,i,a);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ws(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ut(h)}}}break;default:throw Error(s(163))}Ko||512&t.flags&&rl(t)}catch(m){_c(t,t.return,m)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function wl(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qo=n;break}Qo=t.return}}function jl(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{al(4,t)}catch(l){_c(t,n,l)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var r=t.return;try{a.componentDidMount()}catch(l){_c(t,r,l)}}var s=t.return;try{rl(t)}catch(l){_c(t,s,l)}break;case 5:var i=t.return;try{rl(t)}catch(l){_c(t,i,l)}}}catch(l){_c(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var Nl,_l=Math.ceil,Sl=y.ReactCurrentDispatcher,kl=y.ReactCurrentOwner,Cl=y.ReactCurrentBatchConfig,Al=0,Pl=null,Ll=null,El=0,Dl=0,Ml=_r(0),Ol=0,Tl=null,Rl=0,Il=0,Fl=0,zl=null,Bl=null,ql=0,Ul=1/0,Wl=null,Hl=!1,Vl=null,Yl=null,Gl=!1,$l=null,Xl=0,Kl=0,Jl=null,Ql=-1,Zl=0;function ec(){return 0!==(6&Al)?Je():-1!==Ql?Ql:Ql=Je()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==El?El&-El:null!==ps.transition?(0===Zl&&(Zl=pt()),Zl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function nc(e,t,n,a){if(50<Kl)throw Kl=0,Jl=null,Error(s(185));xt(e,n,a),0!==(2&Al)&&e===Pl||(e===Pl&&(0===(2&Al)&&(Il|=n),4===Ol&&oc(e,El)),ac(e,a),1===n&&0===Al&&0===(1&t.mode)&&(Ul=Je()+500,zr&&Ur()))}function ac(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),o=1<<i,l=r[i];-1===l?0!==(o&n)&&0===(o&a)||(r[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var a=ht(e,e===Pl?El:0);if(0===a)null!==n&&$e(n),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=n&&$e(n),1===t)0===e.tag?function(e){zr=!0,qr(e)}(lc.bind(null,e)):qr(lc.bind(null,e)),ir((function(){0===(6&Al)&&Ur()})),n=null;else{switch(yt(a)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=at}n=Pc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Ql=-1,Zl=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var a=ht(e,e===Pl?El:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=gc(e,a);else{t=a;var r=Al;Al|=2;var i=fc();for(Pl===e&&El===t||(Wl=null,Ul=Je()+500,hc(e,t));;)try{bc();break}catch(l){mc(e,l)}ks(),Sl.current=i,Al=r,null!==Ll?t=0:(Pl=null,El=0,t=Ol)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(a=r,t=sc(e,r))),1===t)throw n=Tl,hc(e,0),oc(e,a),ac(e,Je()),n;if(6===t)oc(e,a);else{if(r=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var a=0;a<n.length;a++){var r=n[a],s=r.getSnapshot;r=r.value;try{if(!oa(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,a))&&(0!==(i=ft(e))&&(a=i,t=sc(e,i))),1===t))throw n=Tl,hc(e,0),oc(e,a),ac(e,Je()),n;switch(e.finishedWork=r,e.finishedLanes=a,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Bl,Wl);break;case 3:if(oc(e,a),(130023424&a)===a&&10<(t=ql+500-Je())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&a)!==a){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ar(wc.bind(null,e,Bl,Wl),t);break}wc(e,Bl,Wl);break;case 4:if(oc(e,a),(4194240&a)===a)break;for(t=e.eventTimes,r=-1;0<a;){var o=31-it(a);i=1<<o,(o=t[o])>r&&(r=o),a&=~i}if(a=r,10<(a=(120>(a=Je()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*_l(a/1960))-a)){e.timeoutHandle=ar(wc.bind(null,e,Bl,Wl),a);break}wc(e,Bl,Wl);break;default:throw Error(s(329))}}}return ac(e,Je()),e.callbackNode===n?rc.bind(null,e):null}function sc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ic(t)),e}function ic(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function oc(e,t){for(t&=~Fl,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),a=1<<n;e[n]=-1,t&=~a}}function lc(e){if(0!==(6&Al))throw Error(s(327));jc();var t=ht(e,0);if(0===(1&t))return ac(e,Je()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var a=ft(e);0!==a&&(t=a,n=sc(e,a))}if(1===n)throw n=Tl,hc(e,0),oc(e,t),ac(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Bl,Wl),ac(e,Je()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Ul=Je()+500,zr&&Ur())}}function dc(e){null!==$l&&0===$l.tag&&0===(6&Al)&&jc();var t=Al;Al|=1;var n=Cl.transition,a=vt;try{if(Cl.transition=null,vt=1,e)return e()}finally{vt=a,Cl.transition=n,0===(6&(Al=t))&&Ur()}}function uc(){Dl=Ml.current,Sr(Ml)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Ll)for(n=Ll.return;null!==n;){var a=n;switch(ts(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Mr();break;case 3:Ks(),Sr(Pr),Sr(Ar),ni();break;case 5:Qs(a);break;case 4:Ks();break;case 13:case 19:Sr(Zs);break;case 10:Cs(a.type._context);break;case 22:case 23:uc()}n=n.return}if(Pl=e,Ll=e=Mc(e.current,null),El=Dl=t,Ol=0,Tl=null,Fl=Il=Rl=0,Bl=zl=null,null!==Es){for(t=0;t<Es.length;t++)if(null!==(a=(n=Es[t]).interleaved)){n.interleaved=null;var r=a.next,s=n.pending;if(null!==s){var i=s.next;s.next=r,a.next=i}n.pending=a}Es=null}return e}function mc(e,t){for(;;){var n=Ll;try{if(ks(),ai.current=Ji,ci){for(var a=ii.memoizedState;null!==a;){var r=a.queue;null!==r&&(r.pending=null),a=a.next}ci=!1}if(si=0,li=oi=ii=null,di=!1,ui=0,kl.current=null,null===n||null===n.return){Ol=1,Tl=t,Ll=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=El,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=go(o);if(null!==f){f.flags&=-257,xo(f,o,l,0,t),1&f.mode&&po(i,d,t),c=d;var p=(t=f).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){po(i,d,t),pc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var x=go(o);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),xo(x,o,l,0,t),fs(lo(c,l));break e}}i=c=lo(c,l),4!==Ol&&(Ol=2),null===zl?zl=[i]:zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,qs(i,mo(0,c,t));break e;case 1:l=c;var b=i.type,v=i.stateNode;if(0===(128&i.flags)&&("function"===typeof b.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Yl||!Yl.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,qs(i,fo(i,l,t));break e}}i=i.return}while(null!==i)}yc(n)}catch(y){t=y,Ll===n&&null!==n&&(Ll=n=n.return);continue}break}}function fc(){var e=Sl.current;return Sl.current=Ji,null===e?Ji:e}function pc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Pl||0===(268435455&Rl)&&0===(268435455&Il)||oc(Pl,El)}function gc(e,t){var n=Al;Al|=2;var a=fc();for(Pl===e&&El===t||(Wl=null,hc(e,t));;)try{xc();break}catch(r){mc(e,r)}if(ks(),Al=n,Sl.current=a,null!==Ll)throw Error(s(261));return Pl=null,El=0,Ol}function xc(){for(;null!==Ll;)vc(Ll)}function bc(){for(;null!==Ll&&!Xe();)vc(Ll)}function vc(e){var t=Nl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?yc(e):Ll=t,kl.current=null}function yc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Dl)))return void(Ll=n)}else{if(null!==(n=$o(n,t)))return n.flags&=32767,void(Ll=n);if(null===e)return Ol=6,void(Ll=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ll=t);Ll=t=e}while(null!==t);0===Ol&&(Ol=5)}function wc(e,t,n){var a=vt,r=Cl.transition;try{Cl.transition=null,vt=1,function(e,t,n,a){do{jc()}while(null!==$l);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-it(n),s=1<<r;t[r]=0,a[r]=-1,e[r]=-1,n&=~s}}(e,i),e===Pl&&(Ll=Pl=null,El=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Pc(tt,(function(){return jc(),null}))),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Cl.transition,Cl.transition=null;var o=vt;vt=1;var l=Al;Al|=4,kl.current=null,function(e,t){if(er=Ht,ma(e=ha())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(a&&0!==a.rangeCount){n=a.anchorNode;var r=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==i||0!==a&&3!==h.nodeType||(c=o+a),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)m=h,h=f;for(;;){if(h===e)break t;if(m===n&&++d===r&&(l=o),m===i&&++u===a&&(c=o),null!==(f=h.nextSibling))break;m=(h=m).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ht=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,x=p.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),x);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(s(163))}}catch(w){_c(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}p=tl,tl=!1}(e,n),gl(n,e),fa(tr),Ht=!!er,tr=er=null,e.current=n,bl(n,e,r),Ke(),Al=l,vt=o,Cl.transition=i}else e.current=n;if(Gl&&(Gl=!1,$l=e,Xl=r),i=e.pendingLanes,0===i&&(Yl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ac(e,Je()),null!==t)for(a=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],a(r.value,{componentStack:r.stack,digest:r.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Xl)&&0!==e.tag&&jc(),i=e.pendingLanes,0!==(1&i)?e===Jl?Kl++:(Kl=0,Jl=e):Kl=0,Ur()}(e,t,n,a)}finally{Cl.transition=r,vt=a}return null}function jc(){if(null!==$l){var e=yt(Xl),t=Cl.transition,n=vt;try{if(Cl.transition=null,vt=16>e?16:e,null===$l)var a=!1;else{if(e=$l,$l=null,Xl=0,0!==(6&Al))throw Error(s(331));var r=Al;for(Al|=4,Qo=e.current;null!==Qo;){var i=Qo,o=i.child;if(0!==(16&Qo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qo=d;null!==Qo;){var u=Qo;switch(u.tag){case 0:case 11:case 15:nl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Qo=h;else for(;null!==Qo;){var m=(u=Qo).sibling,f=u.return;if(sl(u),u===d){Qo=null;break}if(null!==m){m.return=f,Qo=m;break}Qo=f}}}var p=i.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}Qo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(i=Qo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var b=i.sibling;if(null!==b){b.return=i.return,Qo=b;break e}Qo=i.return}}var v=e.current;for(Qo=v;null!==Qo;){var y=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==y)y.return=o,Qo=y;else e:for(o=v;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(j){_c(l,l.return,j)}if(l===o){Qo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qo=w;break e}Qo=l.return}}if(Al=r,Ur(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(j){}a=!0}return a}finally{vt=n,Cl.transition=t}}return!1}function Nc(e,t,n){e=zs(e,t=mo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(xt(e,1,t),ac(e,t))}function _c(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Yl||!Yl.has(a))){t=zs(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(xt(t,1,e),ac(t,e));break}}t=t.return}}function Sc(e,t,n){var a=e.pingCache;null!==a&&a.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(El&n)===n&&(4===Ol||3===Ol&&(130023424&El)===El&&500>Je()-ql?hc(e,0):Fl|=n),ac(e,t)}function kc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Os(e,t))&&(xt(e,t,n),ac(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var a=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(s(314))}null!==a&&a.delete(t),kc(e,n)}function Pc(e,t){return Ge(e,t)}function Lc(e,t,n,a){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ec(e,t,n,a){return new Lc(e,t,n,a)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Ec(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,a,r,i){var o=2;if(a=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Tc(n.children,r,i,t);case _:o=8,r|=8;break;case S:return(e=Ec(12,n,t,2|r)).elementType=S,e.lanes=i,e;case P:return(e=Ec(13,n,t,r)).elementType=P,e.lanes=i,e;case L:return(e=Ec(19,n,t,r)).elementType=L,e.lanes=i,e;case M:return Rc(n,r,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:o=10;break e;case C:o=9;break e;case A:o=11;break e;case E:o=14;break e;case D:o=16,a=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Ec(o,n,t,r)).elementType=e,t.type=a,t.lanes=i,t}function Tc(e,t,n,a){return(e=Ec(7,e,a,t)).lanes=n,e}function Rc(e,t,n,a){return(e=Ec(22,e,a,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Ic(e,t,n){return(e=Ec(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ec(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,a,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=a,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,a,r,s,i,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Ec(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:a,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function qc(e){if(!e)return Cr;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Dr(n))return Tr(e,n,t)}return t}function Uc(e,t,n,a,r,s,i,o,l){return(e=Bc(n,a,!0,e,0,s,0,o,l)).context=qc(null),n=e.current,(s=Fs(a=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,zs(n,s,r),e.current.lanes=r,xt(e,r,a),ac(e,a),e}function Wc(e,t,n,a){var r=t.current,s=ec(),i=tc(r);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,i)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=zs(r,t,i))&&(nc(e,r,i,s),Bs(e,r,i)),i}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pr.current)vo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return vo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),ms();break;case 5:Js(t);break;case 1:Dr(t.type)&&Rr(t);break;case 4:Xs(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,r=t.memoizedProps.value;kr(js,a._currentValue),a._currentValue=r;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(kr(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Io(e,t,n):(kr(Zs,1&Zs.current),null!==(e=Ho(e,t,n))?e.sibling:null);kr(Zs,1&Zs.current);break;case 19:if(a=0!==(n&t.childLanes),0!==(128&e.flags)){if(a)return Uo(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),kr(Zs,Zs.current),a)break;return null;case 22:case 23:return t.lanes=0,_o(e,t,n)}return Ho(e,t,n)}(e,t,n);vo=0!==(131072&e.flags)}else vo=!1,rs&&0!==(1048576&t.flags)&&Zr(t,Yr,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Wo(e,t),e=t.pendingProps;var r=Er(t,Ar.current);Ps(t,n),r=pi(null,t,a,e,r,n);var i=gi();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dr(a)?(i=!0,Rr(t)):i=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Rs(t),r.updater=ao,t.stateNode=r,r._reactInternals=t,oo(t,a,e,n),t=Ao(null,t,a,!0,i,n)):(t.tag=0,rs&&i&&es(t),yo(null,t,r,n),t=t.child),t;case 16:a=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,a=(r=a._init)(a._payload),t.type=a,r=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===E)return 14}return 2}(a),e=to(a,e),r){case 0:t=ko(null,t,a,e,n);break e;case 1:t=Co(null,t,a,e,n);break e;case 11:t=wo(null,t,a,e,n);break e;case 14:t=jo(null,t,a,to(a.type,e),n);break e}throw Error(s(306,a,""))}return t;case 0:return a=t.type,r=t.pendingProps,ko(e,t,a,r=t.elementType===a?r:to(a,r),n);case 1:return a=t.type,r=t.pendingProps,Co(e,t,a,r=t.elementType===a?r:to(a,r),n);case 3:e:{if(Po(t),null===e)throw Error(s(387));a=t.pendingProps,r=(i=t.memoizedState).element,Is(e,t),Us(t,a,null,n);var o=t.memoizedState;if(a=o.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Lo(e,t,a,n,r=lo(Error(s(423)),t));break e}if(a!==r){t=Lo(e,t,a,n,r=lo(Error(s(424)),t));break e}for(as=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=ws(t,null,a,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ms(),a===r){t=Ho(e,t,n);break e}yo(e,t,a,n)}t=t.child}return t;case 5:return Js(t),null===e&&cs(t),a=t.type,r=t.pendingProps,i=null!==e?e.memoizedProps:null,o=r.children,nr(a,r)?o=null:null!==i&&nr(a,i)&&(t.flags|=32),So(e,t),yo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Io(e,t,n);case 4:return Xs(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=ys(t,null,a,n):yo(e,t,a,n),t.child;case 11:return a=t.type,r=t.pendingProps,wo(e,t,a,r=t.elementType===a?r:to(a,r),n);case 7:return yo(e,t,t.pendingProps,n),t.child;case 8:case 12:return yo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(a=t.type._context,r=t.pendingProps,i=t.memoizedProps,o=r.value,kr(js,a._currentValue),a._currentValue=o,null!==i)if(oa(i.value,o)){if(i.children===r.children&&!Pr.current){t=Ho(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===a){if(1===i.tag){(c=Fs(-1,n&-n)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),As(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),As(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}yo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,a=t.pendingProps.children,Ps(t,n),a=a(r=Ls(r)),t.flags|=1,yo(e,t,a,n),t.child;case 14:return r=to(a=t.type,t.pendingProps),jo(e,t,a,r=to(a.type,r),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return a=t.type,r=t.pendingProps,r=t.elementType===a?r:to(a,r),Wo(e,t),t.tag=1,Dr(a)?(e=!0,Rr(t)):e=!1,Ps(t,n),so(t,a,r),oo(t,a,r,n),Ao(null,t,a,!0,e,n);case 19:return Uo(e,t,n);case 22:return _o(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Zc(e,t,n,a,r){var s=n._reactRootContainer;if(s){var i=s;if("function"===typeof r){var o=r;r=function(){var e=Hc(i);o.call(e)}}Wc(t,i,e,r)}else i=function(e,t,n,a,r){if(r){if("function"===typeof a){var s=a;a=function(){var e=Hc(i);s.call(e)}}var i=Uc(t,a,e,0,null,!1,0,"",Qc);return e._reactRootContainer=i,e[fr]=i.current,Ua(8===e.nodeType?e.parentNode:e),dc(),i}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof a){var o=a;a=function(){var e=Hc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[fr]=l.current,Ua(8===e.nodeType?e.parentNode:e),dc((function(){Wc(t,l,n,a)})),l}(n,t,e,r,a);return Hc(i)}Xc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Xc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Wc(null,e,null,null)})),t[fr]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&It(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(bt(t,1|n),ac(t,Je()),0===(6&Al)&&(Ul=Je()+500,Ur()))}break;case 13:dc((function(){var t=Os(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Yc(e,1)}},jt=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)nc(t,e,134217728,ec());Yc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),n=Os(e,t);if(null!==n)nc(n,e,t,ec());Yc(e,t)}},_t=function(){return vt},St=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},je=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var a=n[t];if(a!==e&&a.form===e.form){var r=wr(a);if(!r)throw Error(s(90));G(a),Q(a,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[vr,yr,wr,ke,Ce,cc]},td={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{rt=ad.inject(nd),st=ad}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kc(t))throw Error(s(200));return function(e,t,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==a?null:""+a,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Kc(e))throw Error(s(299));var n=!1,a="",r=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,a,r),e[fr]=t.current,Ua(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kc(e))throw Error(s(405));var a=null!=n&&n.hydratedSources||null,r=!1,i="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,r,0,i,o),e[fr]=t.current,Ua(e),a)for(e=0;e<a.length;e++)r=(r=(n=a[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,a){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3488:(e,t,n)=>{"use strict";n.d(t,{G:()=>r,H:()=>a});const a={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"https://abaplay-backendv2.onrender.com/api",r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SOCKET_URL||"https://abaplay-backendv2.onrender.com"},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function b(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=x.prototype;var y=v.prototype=new b;y.constructor=v,p(y,x.prototype),y.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,N={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,a){var r,s={},i=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,r)&&!_.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=a;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:i,ref:o,props:s,_owner:N.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,r,s,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case a:l=!0}}if(l)return i=i(l=e),e=""===s?"."+A(l,0):s,w(i)?(r="",null!=e&&(r=e.replace(C,"$&/")+"/"),P(i,t,r,"",(function(e){return e}))):null!=i&&(k(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(C,"$&/")+"/")+e)),t.push(i)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var d=s+A(o=e[c],c);l+=P(o,t,r,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,r,d=s+A(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function L(e,t,n){if(null==e)return e;var a=[],r=0;return P(e,a,"","",(function(e){return t.call(n,e,r++)})),a}function E(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},M={transition:null},O={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:M,ReactCurrentOwner:N};function T(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:L,forEach:function(e,t,n){L(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return L(e,(function(){t++})),t},toArray:function(e){return L(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=r,t.Profiler=i,t.PureComponent=v,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=T,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=p({},e.props),s=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=N.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!_.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=a;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:i,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:E}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=T,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},4391:(e,t,n)=>{"use strict";var a=n(7950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},4980:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(2284);function r(e){var t=function(e,t){if("object"!=(0,a.A)(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=(0,a.A)(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,a.A)(t)?t:t+""}function s(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5173:(e,t,n)=>{e.exports=n(1497)()},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var a=n-1>>>1,r=e[a];if(!(0<s(r,t)))break e;e[a]=t,e[n]=r,n=a}}function a(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var a=0,r=e.length,i=r>>>1;a<i;){var o=2*(a+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<r&&0>s(d,l)?(e[a]=d,e[c]=n,a=c):(e[a]=l,e[o]=n,a=o);else{if(!(c<r&&0>s(d,n)))break e;e[a]=d,e[c]=n,a=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,f=!1,p=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=a(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,n(c,t)}t=a(d)}}function w(e){if(g=!1,y(e),!p)if(null!==a(c))p=!0,M(j);else{var t=a(d);null!==t&&O(w,t.startTime-e)}}function j(e,n){p=!1,g&&(g=!1,b(k),k=-1),f=!0;var s=m;try{for(y(n),h=a(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var o=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===a(c)&&r(c),y(n)}else r(c);h=a(c)}if(null!==h)var l=!0;else{var u=a(d);null!==u&&O(w,u.startTime-n),l=!1}return l}finally{h=null,m=s,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,_=!1,S=null,k=-1,C=5,A=-1;function P(){return!(t.unstable_now()-A<C)}function L(){if(null!==S){var e=t.unstable_now();A=e;var n=!0;try{n=S(!0,e)}finally{n?N():(_=!1,S=null)}}else _=!1}if("function"===typeof v)N=function(){v(L)};else if("undefined"!==typeof MessageChannel){var E=new MessageChannel,D=E.port2;E.port1.onmessage=L,N=function(){D.postMessage(null)}}else N=function(){x(L,0)};function M(e){S=e,_||(_=!0,N())}function O(e,n){k=x((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,M(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return a(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,r,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>i?(e.sortIndex=s,n(d,e),null===a(c)&&e===a(d)&&(g?(b(k),k=-1):g=!0,O(w,s-i))):(e.sortIndex=o,n(c,e),p||f||(p=!0,M(j))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},7762:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AcroForm:()=>wt,AcroFormAppearance:()=>vt,AcroFormButton:()=>ht,AcroFormCheckBox:()=>gt,AcroFormChoiceField:()=>lt,AcroFormComboBox:()=>dt,AcroFormEditBox:()=>ut,AcroFormListBox:()=>ct,AcroFormPasswordField:()=>bt,AcroFormPushButton:()=>mt,AcroFormRadioButton:()=>ft,AcroFormTextField:()=>xt,GState:()=>Pe,ShadingPattern:()=>Ee,TilingPattern:()=>De,default:()=>yn,jsPDF:()=>Me});var a=n(2284),r=Uint8Array,s=Uint16Array,i=Int32Array,o=new r([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new r([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new r([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=function(e,t){for(var n=new s(31),a=0;a<31;++a)n[a]=t+=1<<e[a-1];var r=new i(n[30]);for(a=1;a<30;++a)for(var o=n[a];o<n[a+1];++o)r[o]=o-n[a]<<5|a;return{b:n,r:r}},u=d(o,2),h=u.b,m=u.r;h[28]=258,m[258]=28;for(var f=d(l,0),p=f.b,g=f.r,x=new s(32768),b=0;b<32768;++b){var v=(43690&b)>>1|(21845&b)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,x[b]=((65280&v)>>8|(255&v)<<8)>>1}var y=function(e,t,n){for(var a=e.length,r=0,i=new s(t);r<a;++r)e[r]&&++i[e[r]-1];var o,l=new s(t);for(r=1;r<t;++r)l[r]=l[r-1]+i[r-1]<<1;if(n){o=new s(1<<t);var c=15-t;for(r=0;r<a;++r)if(e[r])for(var d=r<<4|e[r],u=t-e[r],h=l[e[r]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)o[x[h]>>c]=d}else for(o=new s(a),r=0;r<a;++r)e[r]&&(o[r]=x[l[e[r]-1]++]>>15-e[r]);return o},w=new r(288);for(b=0;b<144;++b)w[b]=8;for(b=144;b<256;++b)w[b]=9;for(b=256;b<280;++b)w[b]=7;for(b=280;b<288;++b)w[b]=8;var j=new r(32);for(b=0;b<32;++b)j[b]=5;var N=y(w,9,0),_=y(w,9,1),S=y(j,5,0),k=y(j,5,1),C=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},A=function(e,t,n){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(7&t)&n},P=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},L=function(e){return(e+7)/8|0},E=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new r(e.subarray(t,n))},D=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(e,t,n){var a=new Error(t||D[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,M),!n)throw a;return a},O=function(e,t,n,a){var s=e.length,i=a?a.length:0;if(!s||t.f&&!t.l)return n||new r(0);var d=!n,u=d||2!=t.i,m=t.i;d&&(n=new r(3*s));var f=function(e){var t=n.length;if(e>t){var a=new r(Math.max(2*t,e));a.set(n),n=a}},g=t.f||0,x=t.p||0,b=t.b||0,v=t.l,w=t.d,j=t.m,N=t.n,S=8*s;do{if(!v){g=A(e,x,1);var D=A(e,x+1,3);if(x+=3,!D){var O=e[(V=L(x)+4)-4]|e[V-3]<<8,T=V+O;if(T>s){m&&M(0);break}u&&f(b+O),n.set(e.subarray(V,T),b),t.b=b+=O,t.p=x=8*T,t.f=g;continue}if(1==D)v=_,w=k,j=9,N=5;else if(2==D){var R=A(e,x,31)+257,I=A(e,x+10,15)+4,F=R+A(e,x+5,31)+1;x+=14;for(var z=new r(F),B=new r(19),q=0;q<I;++q)B[c[q]]=A(e,x+3*q,7);x+=3*I;var U=C(B),W=(1<<U)-1,H=y(B,U,1);for(q=0;q<F;){var V,Y=H[A(e,x,W)];if(x+=15&Y,(V=Y>>4)<16)z[q++]=V;else{var G=0,$=0;for(16==V?($=3+A(e,x,3),x+=2,G=z[q-1]):17==V?($=3+A(e,x,7),x+=3):18==V&&($=11+A(e,x,127),x+=7);$--;)z[q++]=G}}var X=z.subarray(0,R),K=z.subarray(R);j=C(X),N=C(K),v=y(X,j,1),w=y(K,N,1)}else M(1);if(x>S){m&&M(0);break}}u&&f(b+131072);for(var J=(1<<j)-1,Q=(1<<N)-1,Z=x;;Z=x){var ee=(G=v[P(e,x)&J])>>4;if((x+=15&G)>S){m&&M(0);break}if(G||M(2),ee<256)n[b++]=ee;else{if(256==ee){Z=x,v=null;break}var te=ee-254;if(ee>264){var ne=o[q=ee-257];te=A(e,x,(1<<ne)-1)+h[q],x+=ne}var ae=w[P(e,x)&Q],re=ae>>4;ae||M(3),x+=15&ae;K=p[re];if(re>3){ne=l[re];K+=P(e,x)&(1<<ne)-1,x+=ne}if(x>S){m&&M(0);break}u&&f(b+131072);var se=b+te;if(b<K){var ie=i-K,oe=Math.min(K,se);for(ie+b<0&&M(3);b<oe;++b)n[b]=a[ie+b]}for(;b<se;++b)n[b]=n[b-K]}}t.l=v,t.p=Z,t.b=b,t.f=g,v&&(g=1,t.m=j,t.d=w,t.n=N)}while(!g);return b!=n.length&&d?E(n,0,b):n.subarray(0,b)},T=function(e,t,n){n<<=7&t;var a=t/8|0;e[a]|=n,e[a+1]|=n>>8},R=function(e,t,n){n<<=7&t;var a=t/8|0;e[a]|=n,e[a+1]|=n>>8,e[a+2]|=n>>16},I=function(e,t){for(var n=[],a=0;a<e.length;++a)e[a]&&n.push({s:a,f:e[a]});var i=n.length,o=n.slice();if(!i)return{t:H,l:0};if(1==i){var l=new r(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var c=n[0],d=n[1],u=0,h=1,m=2;for(n[0]={s:-1,f:c.f+d.f,l:c,r:d};h!=i-1;)c=n[n[u].f<n[m].f?u++:m++],d=n[u!=h&&n[u].f<n[m].f?u++:m++],n[h++]={s:-1,f:c.f+d.f,l:c,r:d};var f=o[0].s;for(a=1;a<i;++a)o[a].s>f&&(f=o[a].s);var p=new s(f+1),g=F(n[h-1],p,0);if(g>t){a=0;var x=0,b=g-t,v=1<<b;for(o.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));a<i;++a){var y=o[a].s;if(!(p[y]>t))break;x+=v-(1<<g-p[y]),p[y]=t}for(x>>=b;x>0;){var w=o[a].s;p[w]<t?x-=1<<t-p[w]++-1:++a}for(;a>=0&&x;--a){var j=o[a].s;p[j]==t&&(--p[j],++x)}g=t}return{t:new r(p),l:g}},F=function(e,t,n){return-1==e.s?Math.max(F(e.l,t,n+1),F(e.r,t,n+1)):t[e.s]=n},z=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new s(++t),a=0,r=e[0],i=1,o=function(e){n[a++]=e},l=1;l<=t;++l)if(e[l]==r&&l!=t)++i;else{if(!r&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(r),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(r);i=1,r=e[l]}return{c:n.subarray(0,a),n:t}},B=function(e,t){for(var n=0,a=0;a<t.length;++a)n+=e[a]*t[a];return n},q=function(e,t,n){var a=n.length,r=L(t+2);e[r]=255&a,e[r+1]=a>>8,e[r+2]=255^e[r],e[r+3]=255^e[r+1];for(var s=0;s<a;++s)e[r+s+4]=n[s];return 8*(r+4+a)},U=function(e,t,n,a,r,i,d,u,h,m,f){T(t,f++,n),++r[256];for(var p=I(r,15),g=p.t,x=p.l,b=I(i,15),v=b.t,_=b.l,k=z(g),C=k.c,A=k.n,P=z(v),L=P.c,E=P.n,D=new s(19),M=0;M<C.length;++M)++D[31&C[M]];for(M=0;M<L.length;++M)++D[31&L[M]];for(var O=I(D,7),F=O.t,U=O.l,W=19;W>4&&!F[c[W-1]];--W);var H,V,Y,G,$=m+5<<3,X=B(r,w)+B(i,j)+d,K=B(r,g)+B(i,v)+d+14+3*W+B(D,F)+2*D[16]+3*D[17]+7*D[18];if(h>=0&&$<=X&&$<=K)return q(t,f,e.subarray(h,h+m));if(T(t,f,1+(K<X)),f+=2,K<X){H=y(g,x,0),V=g,Y=y(v,_,0),G=v;var J=y(F,U,0);T(t,f,A-257),T(t,f+5,E-1),T(t,f+10,W-4),f+=14;for(M=0;M<W;++M)T(t,f+3*M,F[c[M]]);f+=3*W;for(var Q=[C,L],Z=0;Z<2;++Z){var ee=Q[Z];for(M=0;M<ee.length;++M){var te=31&ee[M];T(t,f,J[te]),f+=F[te],te>15&&(T(t,f,ee[M]>>5&127),f+=ee[M]>>12)}}}else H=N,V=w,Y=S,G=j;for(M=0;M<u;++M){var ne=a[M];if(ne>255){R(t,f,H[(te=ne>>18&31)+257]),f+=V[te+257],te>7&&(T(t,f,ne>>23&31),f+=o[te]);var ae=31&ne;R(t,f,Y[ae]),f+=G[ae],ae>3&&(R(t,f,ne>>5&8191),f+=l[ae])}else R(t,f,H[ne]),f+=V[ne]}return R(t,f,H[256]),f+V[256]},W=new i([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),H=new r(0),V=function(e,t,n,a,c,d){var u=d.z||e.length,h=new r(a+u+5*(1+Math.ceil(u/7e3))+c),f=h.subarray(a,h.length-c),p=d.l,x=7&(d.r||0);if(t){x&&(f[0]=d.r>>3);for(var b=W[t-1],v=b>>13,y=8191&b,w=(1<<n)-1,j=d.p||new s(32768),N=d.h||new s(w+1),_=Math.ceil(n/3),S=2*_,k=function(t){return(e[t]^e[t+1]<<_^e[t+2]<<S)&w},C=new i(25e3),A=new s(288),P=new s(32),D=0,M=0,O=d.i||0,T=0,R=d.w||0,I=0;O+2<u;++O){var F=k(O),z=32767&O,B=N[F];if(j[z]=B,N[F]=z,R<=O){var H=u-O;if((D>7e3||T>24576)&&(H>423||!p)){x=U(e,f,0,C,A,P,M,T,I,O-I,x),T=D=M=0,I=O;for(var V=0;V<286;++V)A[V]=0;for(V=0;V<30;++V)P[V]=0}var Y=2,G=0,$=y,X=z-B&32767;if(H>2&&F==k(O-X))for(var K=Math.min(v,H)-1,J=Math.min(32767,O),Q=Math.min(258,H);X<=J&&--$&&z!=B;){if(e[O+Y]==e[O+Y-X]){for(var Z=0;Z<Q&&e[O+Z]==e[O+Z-X];++Z);if(Z>Y){if(Y=Z,G=X,Z>K)break;var ee=Math.min(X,Z-2),te=0;for(V=0;V<ee;++V){var ne=O-X+V&32767,ae=ne-j[ne]&32767;ae>te&&(te=ae,B=ne)}}}X+=(z=B)-(B=j[z])&32767}if(G){C[T++]=268435456|m[Y]<<18|g[G];var re=31&m[Y],se=31&g[G];M+=o[re]+l[se],++A[257+re],++P[se],R=O+Y,++D}else C[T++]=e[O],++A[e[O]]}}for(O=Math.max(O,R);O<u;++O)C[T++]=e[O],++A[e[O]];x=U(e,f,p,C,A,P,M,T,I,O-I,x),p||(d.r=7&x|f[x/8|0]<<3,x-=7,d.h=N,d.p=j,d.i=O,d.w=R)}else{for(O=d.w||0;O<u+p;O+=65535){var ie=O+65535;ie>=u&&(f[x/8|0]=p,ie=u),x=q(f,x+1,e.subarray(O,ie))}d.i=u}return E(h,0,a+L(x)+c)},Y=function(){var e=1,t=0;return{p:function(n){for(var a=e,r=t,s=0|n.length,i=0;i!=s;){for(var o=Math.min(i+2655,s);i<o;++i)r+=a+=n[i];a=(65535&a)+15*(a>>16),r=(65535&r)+15*(r>>16)}e=a,t=r},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},G=function(e,t,n,a,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new r(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return V(e,null==t.level?6:t.level,null==t.mem?s.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,n,a,s)},$=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},X=function(e,t){var n=t.level,a=0==n?0:n<6?1:9==n?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var r=Y();r.p(t.dictionary),$(e,2,r.d())}},K=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&M(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&M(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function J(e,t){t||(t={});var n=Y();n.p(e);var a=G(e,t,t.dictionary?6:2,4);return X(a,t),$(a,a.length-4,n.d()),a}function Q(e,t){return O(e.subarray(K(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var Z="undefined"!=typeof TextDecoder&&new TextDecoder;try{Z.decode(H,{stream:!0})}catch(wn){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var ee=function(){return"undefined"!=typeof window?window:"undefined"!=typeof n.g?n.g:"undefined"!=typeof self?self:this}();function te(){ee.console&&"function"==typeof ee.console.log&&ee.console.log.apply(ee.console,arguments)}var ne={log:te,warn:function(e){ee.console&&("function"==typeof ee.console.warn?ee.console.warn.apply(ee.console,arguments):te.call(null,arguments))},error:function(e){ee.console&&("function"==typeof ee.console.error?ee.console.error.apply(ee.console,arguments):te(e))}};function ae(e,t,n){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){le(a.response,t,n)},a.onerror=function(){ne.error("could not download file")},a.send()}function re(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function se(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ie,oe,le=ee.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,a.A)(window))||window!==ee?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var a=ee.URL||ee.webkitURL,r=document.createElement("a");t=t||e.name||"download",r.download=t,r.rel="noopener","string"==typeof e?(r.href=e,r.origin!==location.origin?re(r.href)?ae(e,t,n):se(r,r.target="_blank"):se(r)):(r.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(r.href)}),4e4),setTimeout((function(){se(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download","string"==typeof e)if(re(e))ae(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){se(r)}))}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,a.A)(t)&&(ne.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return ae(e,t,n);var s="application/octet-stream"===e.type,i=/constructor/i.test(ee.HTMLElement)||ee.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&"object"===("undefined"==typeof FileReader?"undefined":(0,a.A)(FileReader))){var l=new FileReader;l.onloadend=function(){var e=l.result;e=o?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},l.readAsDataURL(e)}else{var c=ee.URL||ee.webkitURL,d=c.createObjectURL(e);r?r.location=d:location.href=d,r=null,setTimeout((function(){c.revokeObjectURL(d)}),4e4)}});function ce(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],a=0;a<n.length;a++){var r=n[a].re,s=n[a].process,i=r.exec(e);i&&(t=s(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),n=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==n.length&&(n="0"+n),"#"+e+t+n}}function de(e,t){var n=e[0],a=e[1],r=e[2],s=e[3];n=he(n,a,r,s,t[0],7,-680876936),s=he(s,n,a,r,t[1],12,-389564586),r=he(r,s,n,a,t[2],17,606105819),a=he(a,r,s,n,t[3],22,-1044525330),n=he(n,a,r,s,t[4],7,-176418897),s=he(s,n,a,r,t[5],12,1200080426),r=he(r,s,n,a,t[6],17,-1473231341),a=he(a,r,s,n,t[7],22,-45705983),n=he(n,a,r,s,t[8],7,1770035416),s=he(s,n,a,r,t[9],12,-1958414417),r=he(r,s,n,a,t[10],17,-42063),a=he(a,r,s,n,t[11],22,-1990404162),n=he(n,a,r,s,t[12],7,1804603682),s=he(s,n,a,r,t[13],12,-40341101),r=he(r,s,n,a,t[14],17,-1502002290),n=me(n,a=he(a,r,s,n,t[15],22,1236535329),r,s,t[1],5,-165796510),s=me(s,n,a,r,t[6],9,-1069501632),r=me(r,s,n,a,t[11],14,643717713),a=me(a,r,s,n,t[0],20,-373897302),n=me(n,a,r,s,t[5],5,-701558691),s=me(s,n,a,r,t[10],9,38016083),r=me(r,s,n,a,t[15],14,-660478335),a=me(a,r,s,n,t[4],20,-405537848),n=me(n,a,r,s,t[9],5,568446438),s=me(s,n,a,r,t[14],9,-1019803690),r=me(r,s,n,a,t[3],14,-187363961),a=me(a,r,s,n,t[8],20,1163531501),n=me(n,a,r,s,t[13],5,-1444681467),s=me(s,n,a,r,t[2],9,-51403784),r=me(r,s,n,a,t[7],14,1735328473),n=fe(n,a=me(a,r,s,n,t[12],20,-1926607734),r,s,t[5],4,-378558),s=fe(s,n,a,r,t[8],11,-2022574463),r=fe(r,s,n,a,t[11],16,1839030562),a=fe(a,r,s,n,t[14],23,-35309556),n=fe(n,a,r,s,t[1],4,-1530992060),s=fe(s,n,a,r,t[4],11,1272893353),r=fe(r,s,n,a,t[7],16,-155497632),a=fe(a,r,s,n,t[10],23,-1094730640),n=fe(n,a,r,s,t[13],4,681279174),s=fe(s,n,a,r,t[0],11,-358537222),r=fe(r,s,n,a,t[3],16,-722521979),a=fe(a,r,s,n,t[6],23,76029189),n=fe(n,a,r,s,t[9],4,-640364487),s=fe(s,n,a,r,t[12],11,-421815835),r=fe(r,s,n,a,t[15],16,530742520),n=pe(n,a=fe(a,r,s,n,t[2],23,-995338651),r,s,t[0],6,-198630844),s=pe(s,n,a,r,t[7],10,1126891415),r=pe(r,s,n,a,t[14],15,-1416354905),a=pe(a,r,s,n,t[5],21,-57434055),n=pe(n,a,r,s,t[12],6,1700485571),s=pe(s,n,a,r,t[3],10,-1894986606),r=pe(r,s,n,a,t[10],15,-1051523),a=pe(a,r,s,n,t[1],21,-2054922799),n=pe(n,a,r,s,t[8],6,1873313359),s=pe(s,n,a,r,t[15],10,-30611744),r=pe(r,s,n,a,t[6],15,-1560198380),a=pe(a,r,s,n,t[13],21,1309151649),n=pe(n,a,r,s,t[4],6,-145523070),s=pe(s,n,a,r,t[11],10,-1120210379),r=pe(r,s,n,a,t[2],15,718787259),a=pe(a,r,s,n,t[9],21,-343485551),e[0]=Ne(n,e[0]),e[1]=Ne(a,e[1]),e[2]=Ne(r,e[2]),e[3]=Ne(s,e[3])}function ue(e,t,n,a,r,s){return t=Ne(Ne(t,e),Ne(a,s)),Ne(t<<r|t>>>32-r,n)}function he(e,t,n,a,r,s,i){return ue(t&n|~t&a,e,t,r,s,i)}function me(e,t,n,a,r,s,i){return ue(t&a|n&~a,e,t,r,s,i)}function fe(e,t,n,a,r,s,i){return ue(t^n^a,e,t,r,s,i)}function pe(e,t,n,a,r,s,i){return ue(n^(t|~a),e,t,r,s,i)}function ge(e){var t,n=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)de(a,xe(e.substring(t-64,t)));e=e.substring(t-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(de(a,r),t=0;t<16;t++)r[t]=0;return r[14]=8*n,de(a,r),a}function xe(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}ie=ee.atob.bind(ee),oe=ee.btoa.bind(ee);var be="0123456789abcdef".split("");function ve(e){for(var t="",n=0;n<4;n++)t+=be[e>>8*n+4&15]+be[e>>8*n&15];return t}function ye(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function we(e){return ge(e).map(ye).join("")}var je="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=ve(e[t]);return e.join("")}(ge("hello"));function Ne(e,t){if(je){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}function _e(e,t){var n,a,r,s;if(e!==n){for(var i=(r=e,s=1+(256/e.length|0),new Array(s+1).join(r)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+i.charCodeAt(l))%256,o[l]=o[c],o[c]=d}n=e,a=o}else o=a;var u=t.length,h=0,m=0,f="";for(l=0;l<u;l++)m=(m+(d=o[h=(h+1)%256]))%256,o[h]=o[m],o[m]=d,i=o[(o[h]+o[m])%256],f+=String.fromCharCode(t.charCodeAt(l)^i);return f}var Se={print:4,modify:8,copy:16,"annot-forms":32};function ke(e,t,n,a){this.v=1,this.r=2;var r=192;e.forEach((function(e){if(void 0!==Se.perm)throw new Error("Invalid permission: "+e);r+=Se[e]})),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var s=(t+this.padding).substr(0,32),i=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,i),this.P=-(1+(255^r)),this.encryptionKey=we(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=_e(this.encryptionKey,this.padding)}function Ce(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,a=0;a<n;a++){var r=e.charCodeAt(a);t+=r<33||35===r||37===r||40===r||41===r||47===r||60===r||62===r||91===r||93===r||123===r||125===r||r>126?"#"+("0"+r.toString(16)).slice(-2):e[a]}return t}function Ae(e){if("object"!==(0,a.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,n,a){if(a=a||!1,"string"!=typeof e||"function"!=typeof n||"boolean"!=typeof a)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var r=Math.random().toString(35);return t[e][r]=[n,!!a],r},this.unsubscribe=function(e){for(var n in t)if(t[n][e])return delete t[n][e],0===Object.keys(t[n]).length&&delete t[n],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var a=Array.prototype.slice.call(arguments,1),r=[];for(var s in t[n]){var i=t[n][s];try{i[0].apply(e,a)}catch(n){ee.console&&ne.error("jsPDF PubSub Error",n.message,n)}i[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Pe(e){if(!(this instanceof Pe))return new Pe(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Le(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Ee(e,t,n,a,r){if(!(this instanceof Ee))return new Ee(e,t,n,a,r);this.type="axial"===e?2:3,this.coords=t,this.colors=n,Le.call(this,a,r)}function De(e,t,n,a,r){if(!(this instanceof De))return new De(e,t,n,a,r);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Le.call(this,a,r)}function Me(e){var t,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;"object"===(0,a.A)(e=e||{})&&(n=e.orientation,r=e.unit||r,s=e.format||s,i=e.compress||e.compressPdf||i,null!==(u=e.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(!0===i?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,m={},f={internal:{},__private__:{}};f.__private__.PubSub=Ae;var p="1.3",g=f.__private__.getPdfVersion=function(){return p};f.__private__.setPdfVersion=function(e){p=e};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return x};var b=f.__private__.getPageFormat=function(e){return x[e]};s=s||"a4";var v="compat",y="advanced",w=v;function j(){this.saveGraphicsState(),Q(new He(be,0,0,-be,0,Nn()*be).toString()+" cm"),this.setFontSize(this.getFontSize()/be),d="n",w=y}function N(){this.restoreGraphicsState(),d="S",w=v}var _=f.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};f.advancedAPI=function(e){var t=w===v;return t&&j.call(this),"function"!=typeof e||(e(this),t&&N.call(this)),this},f.compatAPI=function(e){var t=w===y;return t&&N.call(this),"function"!=typeof e||(e(this),t&&j.call(this)),this},f.isAdvancedAPI=function(){return w===y};var S,k=function(e){if(w!==y)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},C=f.roundToPrecision=f.__private__.roundToPrecision=function(e,n){var a=t||n;if(isNaN(e)||isNaN(a))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(a).replace(/0+$/,"")};S=f.hpf=f.__private__.hpf="number"==typeof c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return C(e,c)}:"smart"===c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return C(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return C(e,16)};var A=f.f2=f.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return C(e,2)},P=f.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return C(e,3)},L=f.scale=f.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return w===v?e*be:w===y?e:void 0},E=function(e){return L(function(e){return w===v?Nn()-e:w===y?e:void 0}(e))};f.__private__.setPrecision=f.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var D,M="00000000000000000000000000000000",O=f.__private__.getFileId=function(){return M},T=f.__private__.setFileId=function(e){return M=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():M.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==u&&(Dt=new ke(u.userPermissions,u.userPassword,u.ownerPassword,M)),M};f.setFileId=function(e){return T(e),this},f.getFileId=function(){return O()};var R=f.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),n=t<0?"+":"-",a=Math.floor(Math.abs(t/60)),r=Math.abs(t%60),s=[n,q(a),"'",q(r),"'"].join("");return["D:",e.getFullYear(),q(e.getMonth()+1),q(e.getDate()),q(e.getHours()),q(e.getMinutes()),q(e.getSeconds()),s].join("")},I=f.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),n=parseInt(e.substr(6,2),10)-1,a=parseInt(e.substr(8,2),10),r=parseInt(e.substr(10,2),10),s=parseInt(e.substr(12,2),10),i=parseInt(e.substr(14,2),10);return new Date(t,n,a,r,s,i,0)},F=f.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=R(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return D=t},z=f.__private__.getCreationDate=function(e){var t=D;return"jsDate"===e&&(t=I(D)),t};f.setCreationDate=function(e){return F(e),this},f.getCreationDate=function(e){return z(e)};var B,q=f.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},U=f.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},W=0,H=[],V=[],Y=0,G=[],$=[],X=!1,K=V;f.__private__.setCustomOutputDestination=function(e){X=!0,K=e};var J=function(e){X||(K=e)};f.__private__.resetCustomOutputDestination=function(){X=!1,K=V};var Q=f.__private__.out=function(e){return e=e.toString(),Y+=e.length+1,K.push(e),K},Z=f.__private__.write=function(e){return Q(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},te=f.__private__.getArrayBuffer=function(e){for(var t=e.length,n=new ArrayBuffer(t),a=new Uint8Array(n);t--;)a[t]=e.charCodeAt(t);return n},ae=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return ae};var re=e.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(e){return re=w===y?e/be:e,this};var se,ie=f.__private__.getFontSize=f.getFontSize=function(){return w===v?re:re*be},de=e.R2L||!1;f.__private__.setR2L=f.setR2L=function(e){return de=e,this},f.__private__.getR2L=f.getR2L=function(){return de};var ue,he=f.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))se=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');se=e}else se=parseInt(e,10)};f.__private__.getZoomMode=function(){return se};var me,fe=f.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');ue=e};f.__private__.getPageMode=function(){return ue};var pe=f.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');me=e};f.__private__.getLayoutMode=function(){return me},f.__private__.setDisplayMode=f.setDisplayMode=function(e,t,n){return he(e),pe(t),fe(n),this};var ge={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ge).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ge[e]},f.__private__.getDocumentProperties=function(){return ge},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(e){for(var t in ge)ge.hasOwnProperty(t)&&e[t]&&(ge[t]=e[t]);return this},f.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ge).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ge[e]=t};var xe,be,ve,ye,we,je={},Ne={},_e=[],Se={},Le={},Oe={},Te={},Re=null,Ie=0,Fe=[],ze=new Ae(f),Be=e.hotfixes||[],qe={},Ue={},We=[],He=function e(t,n,a,r,s,i){if(!(this instanceof e))return new e(t,n,a,r,s,i);isNaN(t)&&(t=1),isNaN(n)&&(n=0),isNaN(a)&&(a=0),isNaN(r)&&(r=1),isNaN(s)&&(s=0),isNaN(i)&&(i=0),this._matrix=[t,n,a,r,s,i]};Object.defineProperty(He.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(He.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(He.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(He.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(He.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(He.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(He.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(He.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(He.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(He.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(He.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(He.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(He.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(He.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(He.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(He.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),He.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(e)},He.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,n=e.sx*this.shy+e.shy*this.sy,a=e.shx*this.sx+e.sy*this.shx,r=e.shx*this.shy+e.sy*this.sy,s=e.tx*this.sx+e.ty*this.shx+this.tx,i=e.tx*this.shy+e.ty*this.sy+this.ty;return new He(t,n,a,r,s,i)},He.prototype.decompose=function(){var e=this.sx,t=this.shy,n=this.shx,a=this.sy,r=this.tx,s=this.ty,i=Math.sqrt(e*e+t*t),o=(e/=i)*n+(t/=i)*a;n-=e*o,a-=t*o;var l=Math.sqrt(n*n+a*a);return o/=l,e*(a/=l)<t*(n/=l)&&(e=-e,t=-t,o=-o,i=-i),{scale:new He(i,0,0,l,0,0),translate:new He(1,0,0,1,r,s),rotate:new He(e,t,-t,e,0,0),skew:new He(1,0,o,1,0,0)}},He.prototype.toString=function(e){return this.join(" ")},He.prototype.inversed=function(){var e=this.sx,t=this.shy,n=this.shx,a=this.sy,r=this.tx,s=this.ty,i=1/(e*a-t*n),o=a*i,l=-t*i,c=-n*i,d=e*i;return new He(o,l,c,d,-o*r-c*s,-l*r-d*s)},He.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,n=e.x*this.shy+e.y*this.sy+this.ty;return new gn(t,n)},He.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),n=this.applyToPoint(new gn(e.x+e.w,e.y+e.h));return new xn(t.x,t.y,n.x-t.x,n.y-t.y)},He.prototype.clone=function(){var e=this.sx,t=this.shy,n=this.shx,a=this.sy,r=this.tx,s=this.ty;return new He(e,t,n,a,r,s)},f.Matrix=He;var Ve=f.matrixMult=function(e,t){return t.multiply(e)},Ye=new He(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Ye;var Ge=function(e,t){if(!Le[e]){var n=(t instanceof Ee?"Sh":"P")+(Object.keys(Se).length+1).toString(10);t.id=n,Le[e]=n,Se[n]=t,ze.publish("addPattern",t)}};f.ShadingPattern=Ee,f.TilingPattern=De,f.addShadingPattern=function(e,t){return k("addShadingPattern()"),Ge(e,t),this},f.beginTilingPattern=function(e){k("beginTilingPattern()"),vn(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},f.endTilingPattern=function(e,t){k("endTilingPattern()"),t.stream=$[B].join("\n"),Ge(e,t),ze.publish("endTilingPattern",t),We.pop().restore()};var $e,Xe=f.__private__.newObject=function(){var e=Ke();return Je(e,!0),e},Ke=f.__private__.newObjectDeferred=function(){return W++,H[W]=function(){return Y},W},Je=function(e,t){return t="boolean"==typeof t&&t,H[e]=Y,t&&Q(e+" 0 obj"),e},Qe=f.__private__.newAdditionalObject=function(){var e={objId:Ke(),content:""};return G.push(e),e},Ze=Ke(),et=Ke(),tt=f.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var n=parseFloat(t[0]);t=[n,n,n,"r"]}for(var a="#",r=0;r<3;r++)a+=("0"+Math.floor(255*parseFloat(t[r])).toString(16)).slice(-2);return a},nt=f.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var n=e.ch1,r=e.ch2,s=e.ch3,i=e.ch4,o="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var l=new ce(n);if(l.ok)n=l.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var c=parseInt(n.substr(1),16);n=c>>16&255,r=c>>8&255,s=255&c}if(void 0===r||void 0===i&&n===r&&r===s)if("string"==typeof n)t=n+" "+o[0];else if(2===e.precision)t=A(n/255)+" "+o[0];else t=P(n/255)+" "+o[0];else if(void 0===i||"object"===(0,a.A)(i)){if(i&&!isNaN(i.a)&&0===i.a)return["1.","1.","1.",o[1]].join(" ");if("string"==typeof n)t=[n,r,s,o[1]].join(" ");else if(2===e.precision)t=[A(n/255),A(r/255),A(s/255),o[1]].join(" ");else t=[P(n/255),P(r/255),P(s/255),o[1]].join(" ")}else if("string"==typeof n)t=[n,r,s,i,o[2]].join(" ");else if(2===e.precision)t=[A(n),A(r),A(s),A(i),o[2]].join(" ");else t=[P(n),P(r),P(s),P(i),o[2]].join(" ");return t},at=f.__private__.getFilters=function(){return o},rt=f.__private__.putStream=function(e){var t=(e=e||{}).data||"",n=e.filters||at(),a=e.alreadyAppliedFilters||[],r=e.addLength1||!1,s=t.length,i=e.objectId,o=function(e){return e};if(null!==u&&void 0===i)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(o=Dt.encryptor(i,0));var l={};!0===n&&(n=["FlateEncode"]);var c=e.additionalKeyValues||[],d=(l=void 0!==Me.API.processDataByFilters?Me.API.processDataByFilters(t,n):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(a)?a.join(" "):a.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===r&&c.push({key:"Length1",value:s})),0!=d.length)if(d.split("/").length-1==1)c.push({key:"Filter",value:d});else{c.push({key:"Filter",value:"["+d+"]"});for(var h=0;h<c.length;h+=1)if("DecodeParms"===c[h].key){for(var m=[],f=0;f<l.reverseChain.split("/").length-1;f+=1)m.push("null");m.push(c[h].value),c[h].value="["+m.join(" ")+"]"}}Q("<<");for(var p=0;p<c.length;p++)Q("/"+c[p].key+" "+c[p].value);Q(">>"),0!==l.data.length&&(Q("stream"),Q(o(l.data)),Q("endstream"))},st=f.__private__.putPage=function(e){var t=e.number,n=e.data,a=e.objId,r=e.contentsObjId;Je(a,!0),Q("<</Type /Page"),Q("/Parent "+e.rootDictionaryObjId+" 0 R"),Q("/Resources "+e.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(S(e.mediaBox.bottomLeftX))+" "+parseFloat(S(e.mediaBox.bottomLeftY))+" "+S(e.mediaBox.topRightX)+" "+S(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&Q("/CropBox ["+S(e.cropBox.bottomLeftX)+" "+S(e.cropBox.bottomLeftY)+" "+S(e.cropBox.topRightX)+" "+S(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&Q("/BleedBox ["+S(e.bleedBox.bottomLeftX)+" "+S(e.bleedBox.bottomLeftY)+" "+S(e.bleedBox.topRightX)+" "+S(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&Q("/TrimBox ["+S(e.trimBox.bottomLeftX)+" "+S(e.trimBox.bottomLeftY)+" "+S(e.trimBox.topRightX)+" "+S(e.trimBox.topRightY)+"]"),null!==e.artBox&&Q("/ArtBox ["+S(e.artBox.bottomLeftX)+" "+S(e.artBox.bottomLeftY)+" "+S(e.artBox.topRightX)+" "+S(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&Q("/UserUnit "+e.userUnit),ze.publish("putPage",{objId:a,pageContext:Fe[t],pageNumber:t,page:n}),Q("/Contents "+r+" 0 R"),Q(">>"),Q("endobj");var s=n.join("\n");return w===y&&(s+="\nQ"),Je(r,!0),rt({data:s,filters:at(),objectId:r}),Q("endobj"),a},it=f.__private__.putPages=function(){var e,t,n=[];for(e=1;e<=Ie;e++)Fe[e].objId=Ke(),Fe[e].contentsObjId=Ke();for(e=1;e<=Ie;e++)n.push(st({number:e,data:$[e],objId:Fe[e].objId,contentsObjId:Fe[e].contentsObjId,mediaBox:Fe[e].mediaBox,cropBox:Fe[e].cropBox,bleedBox:Fe[e].bleedBox,trimBox:Fe[e].trimBox,artBox:Fe[e].artBox,userUnit:Fe[e].userUnit,rootDictionaryObjId:Ze,resourceDictionaryObjId:et}));Je(Ze,!0),Q("<</Type /Pages");var a="/Kids [";for(t=0;t<Ie;t++)a+=n[t]+" 0 R ";Q(a+"]"),Q("/Count "+Ie),Q(">>"),Q("endobj"),ze.publish("postPutPages")},ot=function(e){ze.publish("putFont",{font:e,out:Q,newObject:Xe,putStream:rt}),!0!==e.isAlreadyPutted&&(e.objectNumber=Xe(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+Ce(e.postScriptName)),Q("/Subtype /Type1"),"string"==typeof e.encoding&&Q("/Encoding /"+e.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},lt=function(e){e.objectNumber=Xe();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[S(e.x),S(e.y),S(e.x+e.width),S(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var n=e.pages[1].join("\n");rt({data:n,additionalKeyValues:t,objectId:e.objectNumber}),Q("endobj")},ct=function(e,t){t||(t=21);var n=Xe(),a=function(e,t){var n,a=[],r=1/(t-1);for(n=0;n<1;n+=r)a.push(n);if(a.push(1),0!=e[0].offset){var s={offset:0,color:e[0].color};e.unshift(s)}if(1!=e[e.length-1].offset){var i={offset:1,color:e[e.length-1].color};e.push(i)}for(var o="",l=0,c=0;c<a.length;c++){for(n=a[c];n>e[l+1].offset;)l++;var d=e[l].offset,u=(n-d)/(e[l+1].offset-d),h=e[l].color,m=e[l+1].color;o+=U(Math.round((1-u)*h[0]+u*m[0]).toString(16))+U(Math.round((1-u)*h[1]+u*m[1]).toString(16))+U(Math.round((1-u)*h[2]+u*m[2]).toString(16))}return o.trim()}(e.colors,t),r=[];r.push({key:"FunctionType",value:"0"}),r.push({key:"Domain",value:"[0.0 1.0]"}),r.push({key:"Size",value:"["+t+"]"}),r.push({key:"BitsPerSample",value:"8"}),r.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),r.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rt({data:a,additionalKeyValues:r,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Q("endobj"),e.objectNumber=Xe(),Q("<< /ShadingType "+e.type),Q("/ColorSpace /DeviceRGB");var s="/Coords ["+S(parseFloat(e.coords[0]))+" "+S(parseFloat(e.coords[1]))+" ";2===e.type?s+=S(parseFloat(e.coords[2]))+" "+S(parseFloat(e.coords[3])):s+=S(parseFloat(e.coords[2]))+" "+S(parseFloat(e.coords[3]))+" "+S(parseFloat(e.coords[4]))+" "+S(parseFloat(e.coords[5])),Q(s+="]"),e.matrix&&Q("/Matrix ["+e.matrix.toString()+"]"),Q("/Function "+n+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},dt=function(e,t){var n=Ke(),a=Xe();t.push({resourcesOid:n,objectOid:a}),e.objectNumber=a;var r=[];r.push({key:"Type",value:"/Pattern"}),r.push({key:"PatternType",value:"1"}),r.push({key:"PaintType",value:"1"}),r.push({key:"TilingType",value:"1"}),r.push({key:"BBox",value:"["+e.boundingBox.map(S).join(" ")+"]"}),r.push({key:"XStep",value:S(e.xStep)}),r.push({key:"YStep",value:S(e.yStep)}),r.push({key:"Resources",value:n+" 0 R"}),e.matrix&&r.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),rt({data:e.stream,additionalKeyValues:r,objectId:e.objectNumber}),Q("endobj")},ut=function(e){for(var t in e.objectNumber=Xe(),Q("<<"),e)switch(t){case"opacity":Q("/ca "+A(e[t]));break;case"stroke-opacity":Q("/CA "+A(e[t]))}Q(">>"),Q("endobj")},ht=function(e){Je(e.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in Q("/Font <<"),je)je.hasOwnProperty(e)&&(!1===h||!0===h&&m.hasOwnProperty(e))&&Q("/"+e+" "+je[e].objectNumber+" 0 R");Q(">>")}(),function(){if(Object.keys(Se).length>0){for(var e in Q("/Shading <<"),Se)Se.hasOwnProperty(e)&&Se[e]instanceof Ee&&Se[e].objectNumber>=0&&Q("/"+e+" "+Se[e].objectNumber+" 0 R");ze.publish("putShadingPatternDict"),Q(">>")}}(),function(e){if(Object.keys(Se).length>0){for(var t in Q("/Pattern <<"),Se)Se.hasOwnProperty(t)&&Se[t]instanceof f.TilingPattern&&Se[t].objectNumber>=0&&Se[t].objectNumber<e&&Q("/"+t+" "+Se[t].objectNumber+" 0 R");ze.publish("putTilingPatternDict"),Q(">>")}}(e.objectOid),function(){if(Object.keys(Oe).length>0){var e;for(e in Q("/ExtGState <<"),Oe)Oe.hasOwnProperty(e)&&Oe[e].objectNumber>=0&&Q("/"+e+" "+Oe[e].objectNumber+" 0 R");ze.publish("putGStateDict"),Q(">>")}}(),function(){for(var e in Q("/XObject <<"),qe)qe.hasOwnProperty(e)&&qe[e].objectNumber>=0&&Q("/"+e+" "+qe[e].objectNumber+" 0 R");ze.publish("putXobjectDict"),Q(">>")}(),Q(">>"),Q("endobj")},mt=function(){var e=[];(function(){for(var e in je)je.hasOwnProperty(e)&&(!1===h||!0===h&&m.hasOwnProperty(e))&&ot(je[e])})(),function(){var e;for(e in Oe)Oe.hasOwnProperty(e)&&ut(Oe[e])}(),function(){for(var e in qe)qe.hasOwnProperty(e)&&lt(qe[e])}(),function(e){var t;for(t in Se)Se.hasOwnProperty(t)&&(Se[t]instanceof Ee?ct(Se[t]):Se[t]instanceof De&&dt(Se[t],e))}(e),ze.publish("putResources"),e.forEach(ht),ht({resourcesOid:et,objectOid:Number.MAX_SAFE_INTEGER}),ze.publish("postPutResources")},ft=function(e){Ne[e.fontName]=Ne[e.fontName]||{},Ne[e.fontName][e.fontStyle]=e.id},pt=function(e,t,n,a,r){var s={id:"F"+(Object.keys(je).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:n,encoding:a,isStandardFont:r||!1,metadata:{}};return ze.publish("addFont",{font:s,instance:this}),je[s.id]=s,ft(s),s.id},gt=f.__private__.pdfEscape=f.pdfEscape=function(e,t){return function(e,t){var n,a,r,s,i,o,l,c,d;if(r=(t=t||{}).sourceEncoding||"Unicode",i=t.outputEncoding,(t.autoencode||i)&&je[xe].metadata&&je[xe].metadata[r]&&je[xe].metadata[r].encoding&&(s=je[xe].metadata[r].encoding,!i&&je[xe].encoding&&(i=je[xe].encoding),!i&&s.codePages&&(i=s.codePages[0]),"string"==typeof i&&(i=s[i]),i)){for(l=!1,o=[],n=0,a=e.length;n<a;n++)(c=i[e.charCodeAt(n)])?o.push(String.fromCharCode(c)):o.push(e[n]),o[n].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(n=e.length;void 0===l&&0!==n;)e.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return e;for(o=t.noBOM?[]:[254,255],n=0,a=e.length;n<a;n++){if((d=(c=e.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(d),o.push(c-(d<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xt=f.__private__.beginPage=function(e){$[++Ie]=[],Fe[Ie]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},yt(Ie),J($[B])},bt=function(e,t){var a,r,i;switch(n=t||n,"string"==typeof e&&(a=b(e.toLowerCase()),Array.isArray(a)&&(r=a[0],i=a[1])),Array.isArray(e)&&(r=e[0]*be,i=e[1]*be),isNaN(r)&&(r=s[0],i=s[1]),(r>14400||i>14400)&&(ne.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),r=Math.min(14400,r),i=Math.min(14400,i)),s=[r,i],n.substr(0,1)){case"l":i>r&&(s=[i,r]);break;case"p":r>i&&(s=[i,r])}xt(s),Qt(Kt),Q(on),0!==mn&&Q(mn+" J"),0!==fn&&Q(fn+" j"),ze.publish("addPage",{pageNumber:Ie})},vt=function(e){e>0&&e<=Ie&&($.splice(e,1),Fe.splice(e,1),Ie--,B>Ie&&(B=Ie),this.setPage(B))},yt=function(e){e>0&&e<=Ie&&(B=e)},wt=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return $.length-1},jt=function(e,t,n){var a,r=void 0;return n=n||{},e=void 0!==e?e:je[xe].fontName,t=void 0!==t?t:je[xe].fontStyle,a=e.toLowerCase(),void 0!==Ne[a]&&void 0!==Ne[a][t]?r=Ne[a][t]:void 0!==Ne[e]&&void 0!==Ne[e][t]?r=Ne[e][t]:!1===n.disableWarning&&ne.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),r||n.noFallback||null==(r=Ne.times[t])&&(r=Ne.times.normal),r},Nt=f.__private__.putInfo=function(){var e=Xe(),t=function(e){return e};for(var n in null!==u&&(t=Dt.encryptor(e,0)),Q("<<"),Q("/Producer ("+gt(t("jsPDF "+Me.version))+")"),ge)ge.hasOwnProperty(n)&&ge[n]&&Q("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+gt(t(ge[n]))+")");Q("/CreationDate ("+gt(t(D))+")"),Q(">>"),Q("endobj")},_t=f.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Ze;switch(Xe(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+t+" 0 R"),se||(se="fullwidth"),se){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+se;"%"===n.substr(n.length-1)&&(se=parseInt(se)/100),"number"==typeof se&&Q("/OpenAction [3 0 R /XYZ null null "+A(se)+"]")}switch(me||(me="continuous"),me){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}ue&&Q("/PageMode /"+ue),ze.publish("putCatalog"),Q(">>"),Q("endobj")},St=f.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(W+1)),Q("/Root "+W+" 0 R"),Q("/Info "+(W-1)+" 0 R"),null!==u&&Q("/Encrypt "+Dt.oid+" 0 R"),Q("/ID [ <"+M+"> <"+M+"> ]"),Q(">>")},kt=f.__private__.putHeader=function(){Q("%PDF-"+p),Q("%\xba\xdf\xac\xe0")},Ct=f.__private__.putXRef=function(){var e="0000000000";Q("xref"),Q("0 "+(W+1)),Q("0000000000 65535 f ");for(var t=1;t<=W;t++)"function"==typeof H[t]?Q((e+H[t]()).slice(-10)+" 00000 n "):void 0!==H[t]?Q((e+H[t]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},At=f.__private__.buildDocument=function(){W=0,Y=0,V=[],H=[],G=[],Ze=Ke(),et=Ke(),J(V),ze.publish("buildDocument"),kt(),it(),function(){ze.publish("putAdditionalObjects");for(var e=0;e<G.length;e++){var t=G[e];Je(t.objId,!0),Q(t.content),Q("endobj")}ze.publish("postPutAdditionalObjects")}(),mt(),null!==u&&(Dt.oid=Xe(),Q("<<"),Q("/Filter /Standard"),Q("/V "+Dt.v),Q("/R "+Dt.r),Q("/U <"+Dt.toHexString(Dt.U)+">"),Q("/O <"+Dt.toHexString(Dt.O)+">"),Q("/P "+Dt.P),Q(">>"),Q("endobj")),Nt(),_t();var e=Y;return Ct(),St(),Q("startxref"),Q(""+e),Q("%%EOF"),J($[B]),V.join("\n")},Pt=f.__private__.getBlob=function(e){return new Blob([te(e)],{type:"application/pdf"})},Lt=f.output=f.__private__.output=($e=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return At();case"save":f.save(t.filename);break;case"arraybuffer":return te(At());case"blob":return Pt(At());case"bloburi":case"bloburl":if(void 0!==ee.URL&&"function"==typeof ee.URL.createObjectURL)return ee.URL&&ee.URL.createObjectURL(Pt(At()))||void 0;ne.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",a=At();try{n=oe(a)}catch(e){n=oe(unescape(encodeURIComponent(a)))}return"data:application/pdf;filename="+t.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(ee)){var r="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",s=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(r=t.pdfObjectUrl,s="");var i='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+r+'"'+s+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=ee.open();return null!==o&&o.document.write(i),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(ee)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=ee.open();if(null!==c){c.document.write(l);var d=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(d.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(ee))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',h=ee.open();if(null!==h&&(h.document.write(u),h.document.title=t.filename),h||"undefined"==typeof safari)return h;break;case"datauri":case"dataurl":return ee.document.location.href=this.output("datauristring",t);default:return null}},$e.foo=function(){try{return $e.apply(this,arguments)}catch($e){var e=$e.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+$e.message;if(!ee.console)throw new Error(t);ee.console.error(t,$e),ee.alert&&alert(t)}},$e.foo.bar=$e,$e.foo),Et=function(e){return!0===Array.isArray(Be)&&Be.indexOf(e)>-1};switch(r){case"pt":be=1;break;case"mm":be=72/25.4;break;case"cm":be=72/2.54;break;case"in":be=72;break;case"px":be=1==Et("px_scaling")?.75:96/72;break;case"pc":case"em":be=12;break;case"ex":be=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);be=r}var Dt=null;F(),T();var Mt=f.__private__.getPageInfo=f.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Fe[e].objId,pageNumber:e,pageContext:Fe[e]}},Ot=f.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Fe)if(Fe[t].objId===e)break;return Mt(t)},Tt=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:Fe[B].objId,pageNumber:B,pageContext:Fe[B]}};f.addPage=function(){return bt.apply(this,arguments),this},f.setPage=function(){return yt.apply(this,arguments),J.call(this,$[B]),this},f.insertPage=function(e){return this.addPage(),this.movePage(B,e),this},f.movePage=function(e,t){var n,a;if(e>t){n=$[e],a=Fe[e];for(var r=e;r>t;r--)$[r]=$[r-1],Fe[r]=Fe[r-1];$[t]=n,Fe[t]=a,this.setPage(t)}else if(e<t){n=$[e],a=Fe[e];for(var s=e;s<t;s++)$[s]=$[s+1],Fe[s]=Fe[s+1];$[t]=n,Fe[t]=a,this.setPage(t)}return this},f.deletePage=function(){return vt.apply(this,arguments),this},f.__private__.text=f.text=function(e,t,n,r,s){var i,o,l,c,d,u,h,f,p,g=(r=r||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof n||Array.isArray(n))){var x=n;n=t,t=e,e=x}if(arguments[3]instanceof He==0?(l=arguments[4],c=arguments[5],"object"===(0,a.A)(h=arguments[3])&&null!==h||("string"==typeof l&&(c=l,l=null),"string"==typeof h&&(c=h,h=null),"number"==typeof h&&(l=h,h=null),r={flags:h,angle:l,align:c})):(k("The transform parameter of text() with a Matrix value"),p=s),isNaN(t)||isNaN(n)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return g;var b,v="",j="number"==typeof r.lineHeightFactor?r.lineHeightFactor:Xt,N=g.internal.scaleFactor;function _(e){return e=e.split("\t").join(Array(r.TabLen||9).join(" ")),gt(e,h)}function C(e){for(var t,n=e.concat(),a=[],r=n.length;r--;)"string"==typeof(t=n.shift())?a.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?a.push(t[0]):a.push([t[0],t[1],t[2]]);return a}function A(e,t){var n;if("string"==typeof e)n=t(e)[0];else if(Array.isArray(e)){for(var a,r,s=e.concat(),i=[],o=s.length;o--;)"string"==typeof(a=s.shift())?i.push(t(a)[0]):Array.isArray(a)&&"string"==typeof a[0]&&(r=t(a[0],a[1],a[2]),i.push([r[0],r[1],r[2]]));n=i}return n}var P=!1,E=!0;if("string"==typeof e)P=!0;else if(Array.isArray(e)){var D=e.concat();o=[];for(var M,O=D.length;O--;)("string"!=typeof(M=D.shift())||Array.isArray(M)&&"string"!=typeof M[0])&&(E=!1);P=E}if(!1===P)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var T=re/g.internal.scaleFactor,R=T*(j-1);switch(r.baseline){case"bottom":n-=R;break;case"top":n+=T-R;break;case"hanging":n+=T-2*R;break;case"middle":n+=T/2-R}if((u=r.maxWidth||0)>0&&("string"==typeof e?e=g.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(g.splitTextToSize(t,u))}),[]))),i={text:e,x:t,y:n,options:r,mutex:{pdfEscape:gt,activeFontKey:xe,fonts:je,activeFontSize:re}},ze.publish("preProcessText",i),e=i.text,l=(r=i.options).angle,p instanceof He==0&&l&&"number"==typeof l){l*=Math.PI/180,0===r.rotationDirection&&(l=-l),w===y&&(l=-l);var I=Math.cos(l),F=Math.sin(l);p=new He(I,F,-F,I,0,0)}else l&&l instanceof He&&(p=l);w!==y||p||(p=Ye),void 0!==(d=r.charSpace||un)&&(v+=S(L(d))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(f=r.horizontalScale)&&(v+=S(100*f)+" Tz\n"),r.lang;var z=-1,B=void 0!==r.renderingMode?r.renderingMode:r.stroke,q=g.internal.getCurrentPageInfo().pageContext;switch(B){case 0:case!1:case"fill":z=0;break;case 1:case!0:case"stroke":z=1;break;case 2:case"fillThenStroke":z=2;break;case 3:case"invisible":z=3;break;case 4:case"fillAndAddForClipping":z=4;break;case 5:case"strokeAndAddPathForClipping":z=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":z=6;break;case 7:case"addToPathForClipping":z=7}var U=void 0!==q.usedRenderingMode?q.usedRenderingMode:-1;-1!==z?v+=z+" Tr\n":-1!==U&&(v+="0 Tr\n"),-1!==z&&(q.usedRenderingMode=z),c=r.align||"left";var W,H=re*j,V=g.internal.pageSize.getWidth(),Y=je[xe];d=r.charSpace||un,u=r.maxWidth||0,h=Object.assign({autoencode:!0,noBOM:!0},r.flags);var G=[],$=function(e){return g.getStringUnitWidth(e,{font:Y,charSpace:d,fontSize:re,doKerning:!1})*re/N};if("[object Array]"===Object.prototype.toString.call(e)){var X;o=C(e),"left"!==c&&(W=o.map($));var K,J=0;if("right"===c){t-=W[0],e=[],O=o.length;for(var Z=0;Z<O;Z++)0===Z?(K=nn(t),X=an(n)):(K=L(J-W[Z]),X=-H),e.push([o[Z],K,X]),J=W[Z]}else if("center"===c){t-=W[0]/2,e=[],O=o.length;for(var ee=0;ee<O;ee++)0===ee?(K=nn(t),X=an(n)):(K=L((J-W[ee])/2),X=-H),e.push([o[ee],K,X]),J=W[ee]}else if("left"===c){e=[],O=o.length;for(var te=0;te<O;te++)e.push(o[te])}else if("justify"===c&&"Identity-H"===Y.encoding){e=[],O=o.length,u=0!==u?u:V;for(var ne=0,ae=0;ae<O;ae++)if(X=0===ae?an(n):-H,K=0===ae?nn(t):ne,ae<O-1){var se=L((u-W[ae])/(o[ae].split(" ").length-1)),ie=o[ae].split(" ");e.push([ie[0]+" ",K,X]),ne=0;for(var oe=1;oe<ie.length;oe++){var le=($(ie[oe-1]+" "+ie[oe])-$(ie[oe]))*N+se;oe==ie.length-1?e.push([ie[oe],le,0]):e.push([ie[oe]+" ",le,0]),ne-=le}}else e.push([o[ae],K,X]);e.push(["",ne,0])}else{if("justify"!==c)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],O=o.length,u=0!==u?u:V,ae=0;ae<O;ae++)X=0===ae?an(n):-H,K=0===ae?nn(t):0,ae<O-1?G.push(S(L((u-W[ae])/(o[ae].split(" ").length-1)))):G.push(0),e.push([o[ae],K,X])}}!0===("boolean"==typeof r.R2L?r.R2L:de)&&(e=A(e,(function(e,t,n){return[e.split("").reverse().join(""),t,n]}))),i={text:e,x:t,y:n,options:r,mutex:{pdfEscape:gt,activeFontKey:xe,fonts:je,activeFontSize:re}},ze.publish("postProcessText",i),e=i.text,b=i.mutex.isHex||!1;var ce=je[xe].encoding;"WinAnsiEncoding"!==ce&&"StandardEncoding"!==ce||(e=A(e,(function(e,t,n){return[_(e),t,n]}))),o=C(e),e=[];for(var ue,he,me,fe=Array.isArray(o[0])?1:0,pe="",ge=function(e,t,n){var a="";return n instanceof He?(n="number"==typeof r.angle?Ve(n,new He(1,0,0,1,e,t)):Ve(new He(1,0,0,1,e,t),n),w===y&&(n=Ve(new He(1,0,0,-1,0,0),n)),a=n.join(" ")+" Tm\n"):a=S(e)+" "+S(t)+" Td\n",a},be=0;be<o.length;be++){switch(pe="",fe){case 1:me=(b?"<":"(")+o[be][0]+(b?">":")"),ue=parseFloat(o[be][1]),he=parseFloat(o[be][2]);break;case 0:me=(b?"<":"(")+o[be]+(b?">":")"),ue=nn(t),he=an(n)}void 0!==G&&void 0!==G[be]&&(pe=G[be]+" Tw\n"),0===be?e.push(pe+ge(ue,he,p)+me):0===fe?e.push(pe+me):1===fe&&e.push(pe+ge(ue,he,p)+me)}e=0===fe?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var ve="BT\n/";return ve+=xe+" "+re+" Tf\n",ve+=S(re*j)+" TL\n",ve+=cn+"\n",ve+=v,ve+=e,Q(ve+="ET"),m[xe]=!0,g};var Rt=f.__private__.clip=f.clip=function(e){return Q("evenodd"===e?"W*":"W"),this};f.clipEvenOdd=function(){return Rt("evenodd")},f.__private__.discardPath=f.discardPath=function(){return Q("n"),this};var It=f.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(e){return It(e)&&(d=e),this};var Ft=f.__private__.getStyle=f.getStyle=function(e){var t=d;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},zt=f.close=function(){return Q("h"),this};f.stroke=function(){return Q("S"),this},f.fill=function(e){return Bt("f",e),this},f.fillEvenOdd=function(e){return Bt("f*",e),this},f.fillStroke=function(e){return Bt("B",e),this},f.fillStrokeEvenOdd=function(e){return Bt("B*",e),this};var Bt=function(e,t){"object"===(0,a.A)(t)?Wt(t,e):Q(e)},qt=function(e){null===e||w===y&&void 0===e||(e=Ft(e),Q(e))};function Ut(e,t,n,a,r){var s=new De(t||this.boundingBox,n||this.xStep,a||this.yStep,this.gState,r||this.matrix);s.stream=this.stream;var i=e+"$$"+this.cloneIndex+++"$$";return Ge(i,s),s}var Wt=function(e,t){var n=Le[e.key],a=Se[n];if(a instanceof Ee)Q("q"),Q(Ht(t)),a.gState&&f.setGState(a.gState),Q(e.matrix.toString()+" cm"),Q("/"+n+" sh"),Q("Q");else if(a instanceof De){var r=new He(1,0,0,-1,0,Nn());e.matrix&&(r=r.multiply(e.matrix||Ye),n=Ut.call(a,e.key,e.boundingBox,e.xStep,e.yStep,r).id),Q("q"),Q("/Pattern cs"),Q("/"+n+" scn"),a.gState&&f.setGState(a.gState),Q(t),Q("Q")}},Ht=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Vt=f.moveTo=function(e,t){return Q(S(L(e))+" "+S(E(t))+" m"),this},Yt=f.lineTo=function(e,t){return Q(S(L(e))+" "+S(E(t))+" l"),this},Gt=f.curveTo=function(e,t,n,a,r,s){return Q([S(L(e)),S(E(t)),S(L(n)),S(E(a)),S(L(r)),S(E(s)),"c"].join(" ")),this};f.__private__.line=f.line=function(e,t,n,a,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||!It(r))throw new Error("Invalid arguments passed to jsPDF.line");return w===v?this.lines([[n-e,a-t]],e,t,[1,1],r||"S"):this.lines([[n-e,a-t]],e,t,[1,1]).stroke()},f.__private__.lines=f.lines=function(e,t,n,a,r,s){var i,o,l,c,d,u,h,m,f,p,g,x;if("number"==typeof e&&(x=n,n=t,t=e,e=x),a=a||[1,1],s=s||!1,isNaN(t)||isNaN(n)||!Array.isArray(e)||!Array.isArray(a)||!It(r)||"boolean"!=typeof s)throw new Error("Invalid arguments passed to jsPDF.lines");for(Vt(t,n),i=a[0],o=a[1],c=e.length,p=t,g=n,l=0;l<c;l++)2===(d=e[l]).length?(p=d[0]*i+p,g=d[1]*o+g,Yt(p,g)):(u=d[0]*i+p,h=d[1]*o+g,m=d[2]*i+p,f=d[3]*o+g,p=d[4]*i+p,g=d[5]*o+g,Gt(u,h,m,f,p,g));return s&&zt(),qt(r),this},f.path=function(e){for(var t=0;t<e.length;t++){var n=e[t],a=n.c;switch(n.op){case"m":Vt(a[0],a[1]);break;case"l":Yt(a[0],a[1]);break;case"c":Gt.apply(this,a);break;case"h":zt()}}return this},f.__private__.rect=f.rect=function(e,t,n,a,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||!It(r))throw new Error("Invalid arguments passed to jsPDF.rect");return w===v&&(a=-a),Q([S(L(e)),S(E(t)),S(L(n)),S(L(a)),"re"].join(" ")),qt(r),this},f.__private__.triangle=f.triangle=function(e,t,n,a,r,s,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||isNaN(r)||isNaN(s)||!It(i))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-e,a-t],[r-n,s-a],[e-r,t-s]],e,t,[1,1],i,!0),this},f.__private__.roundedRect=f.roundedRect=function(e,t,n,a,r,s,i){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||isNaN(r)||isNaN(s)||!It(i))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return r=Math.min(r,.5*n),s=Math.min(s,.5*a),this.lines([[n-2*r,0],[r*o,0,r,s-s*o,r,s],[0,a-2*s],[0,s*o,-r*o,s,-r,s],[2*r-n,0],[-r*o,0,-r,-s*o,-r,-s],[0,2*s-a],[0,-s*o,r*o,-s,r,-s]],e+r,t,[1,1],i,!0),this},f.__private__.ellipse=f.ellipse=function(e,t,n,a,r){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||!It(r))throw new Error("Invalid arguments passed to jsPDF.ellipse");var s=4/3*(Math.SQRT2-1)*n,i=4/3*(Math.SQRT2-1)*a;return Vt(e+n,t),Gt(e+n,t-i,e+s,t-a,e,t-a),Gt(e-s,t-a,e-n,t-i,e-n,t),Gt(e-n,t+i,e-s,t+a,e,t+a),Gt(e+s,t+a,e+n,t+i,e+n,t),qt(r),this},f.__private__.circle=f.circle=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||!It(a))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,n,n,a)},f.setFont=function(e,t,n){return n&&(t=_(t,n)),xe=jt(e,t,{disableWarning:!1}),this};var $t=f.__private__.getFont=f.getFont=function(){return je[jt.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var e,t,n={};for(e in Ne)if(Ne.hasOwnProperty(e))for(t in n[e]=[],Ne[e])Ne[e].hasOwnProperty(t)&&n[e].push(t);return n},f.addFont=function(e,t,n,a,r){var s=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==s.indexOf(arguments[3])?r=arguments[3]:arguments[3]&&-1==s.indexOf(arguments[3])&&(n=_(n,a)),pt.call(this,e,t,n,r=r||"Identity-H")};var Xt,Kt=e.lineWidth||.200025,Jt=f.__private__.getLineWidth=f.getLineWidth=function(){return Kt},Qt=f.__private__.setLineWidth=f.setLineWidth=function(e){return Kt=e,Q(S(L(e))+" w"),this};f.__private__.setLineDash=Me.API.setLineDash=Me.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map((function(e){return S(L(e))})).join(" "),t=S(L(t)),Q("["+e+"] "+t+" d"),this};var Zt=f.__private__.getLineHeight=f.getLineHeight=function(){return re*Xt};f.__private__.getLineHeight=f.getLineHeight=function(){return re*Xt};var en=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Xt=e),this},tn=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return Xt};en(e.lineHeight);var nn=f.__private__.getHorizontalCoordinate=function(e){return L(e)},an=f.__private__.getVerticalCoordinate=function(e){return w===y?e:Fe[B].mediaBox.topRightY-Fe[B].mediaBox.bottomLeftY-L(e)},rn=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(e){return S(nn(e))},sn=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(e){return S(an(e))},on=e.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return tt(on)},f.__private__.setStrokeColor=f.setDrawColor=function(e,t,n,a){return on=nt({ch1:e,ch2:t,ch3:n,ch4:a,pdfColorType:"draw",precision:2}),Q(on),this};var ln=e.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return tt(ln)},f.__private__.setFillColor=f.setFillColor=function(e,t,n,a){return ln=nt({ch1:e,ch2:t,ch3:n,ch4:a,pdfColorType:"fill",precision:2}),Q(ln),this};var cn=e.textColor||"0 g",dn=f.__private__.getTextColor=f.getTextColor=function(){return tt(cn)};f.__private__.setTextColor=f.setTextColor=function(e,t,n,a){return cn=nt({ch1:e,ch2:t,ch3:n,ch4:a,pdfColorType:"text",precision:3}),this};var un=e.charSpace,hn=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(un||0)};f.__private__.setCharSpace=f.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return un=e,this};var mn=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(e){var t=f.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return mn=t,Q(t+" J"),this};var fn=0;f.__private__.setLineJoin=f.setLineJoin=function(e){var t=f.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fn=t,Q(t+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(S(L(e))+" M"),this},f.GState=Pe,f.setGState=function(e){(e="string"==typeof e?Oe[Te[e]]:pn(null,e)).equals(Re)||(Q("/"+e.id+" gs"),Re=e)};var pn=function(e,t){if(!e||!Te[e]){var n=!1;for(var a in Oe)if(Oe.hasOwnProperty(a)&&Oe[a].equals(t)){n=!0;break}if(n)t=Oe[a];else{var r="GS"+(Object.keys(Oe).length+1).toString(10);Oe[r]=t,t.id=r}return e&&(Te[e]=t.id),ze.publish("addGState",t),t}};f.addGState=function(e,t){return pn(e,t),this},f.saveGraphicsState=function(){return Q("q"),_e.push({key:xe,size:re,color:cn}),this},f.restoreGraphicsState=function(){Q("Q");var e=_e.pop();return xe=e.key,re=e.size,cn=e.color,Re=null,this},f.setCurrentTransformationMatrix=function(e){return Q(e.toString()+" cm"),this},f.comment=function(e){return Q("#"+e),this};var gn=function(e,t){var n=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var a=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}});var r="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return r},set:function(e){r=e.toString()}}),this},xn=function(e,t,n,a){gn.call(this,e,t),this.type="rect";var r=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}});var s=a||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return s},set:function(e){isNaN(e)||(s=parseFloat(e))}}),this},bn=function(){this.page=Ie,this.currentPage=B,this.pages=$.slice(0),this.pagesContext=Fe.slice(0),this.x=ve,this.y=ye,this.matrix=we,this.width=wn(B),this.height=Nn(B),this.outputDestination=K,this.id="",this.objectNumber=-1};bn.prototype.restore=function(){Ie=this.page,B=this.currentPage,Fe=this.pagesContext,$=this.pages,ve=this.x,ye=this.y,we=this.matrix,jn(B,this.width),_n(B,this.height),K=this.outputDestination};var vn=function(e,t,n,a,r){We.push(new bn),Ie=B=0,$=[],ve=e,ye=t,we=r,xt([n,a])};for(var yn in f.beginFormObject=function(e,t,n,a,r){return vn(e,t,n,a,r),this},f.endFormObject=function(e){return function(e){if(Ue[e])We.pop().restore();else{var t=new bn,n="Xo"+(Object.keys(qe).length+1).toString(10);t.id=n,Ue[e]=n,qe[n]=t,ze.publish("addFormObject",t),We.pop().restore()}}(e),this},f.doFormObject=function(e,t){var n=qe[Ue[e]];return Q("q"),Q(t.toString()+" cm"),Q("/"+n.id+" Do"),Q("Q"),this},f.getFormObject=function(e){var t=qe[Ue[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},f.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(le(Pt(At()),e),"function"==typeof le.unload&&ee.setTimeout&&setTimeout(le.unload,911),this):new Promise((function(t,n){try{var a=le(Pt(At()),e);"function"==typeof le.unload&&ee.setTimeout&&setTimeout(le.unload,911),t(a)}catch(e){n(e.message)}}))},Me.API)Me.API.hasOwnProperty(yn)&&("events"===yn&&Me.API.events.length?function(e,t){var n,a,r;for(r=t.length-1;-1!==r;r--)n=t[r][0],a=t[r][1],e.subscribe.apply(e,[n].concat("function"==typeof a?[a]:a))}(ze,Me.API.events):f[yn]=Me.API[yn]);var wn=f.getPageWidth=function(e){return(Fe[e=e||B].mediaBox.topRightX-Fe[e].mediaBox.bottomLeftX)/be},jn=f.setPageWidth=function(e,t){Fe[e].mediaBox.topRightX=t*be+Fe[e].mediaBox.bottomLeftX},Nn=f.getPageHeight=function(e){return(Fe[e=e||B].mediaBox.topRightY-Fe[e].mediaBox.bottomLeftY)/be},_n=f.setPageHeight=function(e,t){Fe[e].mediaBox.topRightY=t*be+Fe[e].mediaBox.bottomLeftY};return f.internal={pdfEscape:gt,getStyle:Ft,getFont:$t,getFontSize:ie,getCharSpace:hn,getTextColor:dn,getLineHeight:Zt,getLineHeightFactor:tn,getLineWidth:Jt,write:Z,getHorizontalCoordinate:nn,getVerticalCoordinate:an,getCoordinateString:rn,getVerticalCoordinateString:sn,collections:{},newObject:Xe,newAdditionalObject:Qe,newObjectDeferred:Ke,newObjectDeferredBegin:Je,getFilters:at,putStream:rt,events:ze,scaleFactor:be,pageSize:{getWidth:function(){return wn(B)},setWidth:function(e){jn(B,e)},getHeight:function(){return Nn(B)},setHeight:function(e){_n(B,e)}},encryptionOptions:u,encryption:Dt,getEncryptor:function(e){return null!==u?Dt.encryptor(e,0):function(e){return e}},output:Lt,getNumberOfPages:wt,pages:$,out:Q,f2:A,f3:P,getPageInfo:Mt,getPageInfoByObjId:Ot,getCurrentPageInfo:Tt,getPDFVersion:g,Point:gn,Rectangle:xn,Matrix:He,hasHotfix:Et},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return wn(B)},set:function(e){jn(B,e)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Nn(B)},set:function(e){_n(B,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,n=ae.length;t<n;t++){var a=pt.call(this,e[t][0],e[t][1],e[t][2],ae[t][3],!0);!1===h&&(m[a]=!0);var r=e[t][0].split("-");ft({id:a,fontName:r[0],fontStyle:r[1]||""})}ze.publish("addFonts",{fonts:je,dictionary:Ne})}.call(f,ae),xe="F1",bt(s,n),ze.publish("initialized"),f}ke.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},ke.prototype.toHexString=function(e){return e.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},ke.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},ke.prototype.processOwnerPassword=function(e,t){return _e(we(t).substr(0,5),e)},ke.prototype.encryptor=function(e,t){var n=we(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return _e(n,e)}},Pe.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||(0,a.A)(e)!==(0,a.A)(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return 0===r},Me.API={events:[]},Me.version="2.5.2";var Oe=Me.API,Te=1,Re=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ie=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Fe=function(e){return e.toFixed(2)},ze=function(e){return e.toFixed(5)};Oe.__acroform__={};var Be=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},qe=function(e){return e*Te},Ue=function(e){var t=new st,n=vt.internal.getHeight(e)||0,a=vt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Fe(a)),Number(Fe(n))],t},We=Oe.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},He=Oe.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},Ve=Oe.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},Ye=Oe.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Ve(e,t-1)},Ge=Oe.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return We(e,t-1)},$e=Oe.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return He(e,t-1)},Xe=Oe.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,r=e[0],s=e[1],i=e[2],o=e[3],l={};return l.lowerLeft_X=n(r)||0,l.lowerLeft_Y=a(s+o)||0,l.upperRight_X=n(r+i)||0,l.upperRight_Y=a(s)||0,[Number(Fe(l.lowerLeft_X)),Number(Fe(l.lowerLeft_Y)),Number(Fe(l.upperRight_X)),Number(Fe(l.upperRight_Y))]},Ke=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,a=Je(e,n),r=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+r+" "+Fe(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var s=Ue(e);return s.scope=e.scope,s.stream=t.join("\n"),s}},Je=function(e,t){var n=0===e.fontSize?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},r=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");r=e.multiline?r.map((function(e){return e.split("\n")})):r.map((function(e){return[e]}));var s=n,i=vt.internal.getHeight(e)||0;i=i<0?-i:i;var o=vt.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,n,a){if(t+1<r.length){var s=n+" "+r[t+1][0];return Qe(s,e,a).width<=o-4}return!1};s++;e:for(;s>0;){t="",s--;var c,d,u=Qe("3",e,s).height,h=e.multiline?i-s:(i-u)/2,m=h+=2,f=0,p=0,g=0;if(s<=0){t="(...) Tj\n",t+="% Width of Text: "+Qe(t,e,s=12).width+", FieldWidth:"+o+"\n";break}for(var x="",b=0,v=0;v<r.length;v++)if(r.hasOwnProperty(v)){var y=!1;if(1!==r[v].length&&g!==r[v].length-1){if((u+2)*(b+2)+2>i)continue e;x+=r[v][g],y=!0,p=v,v--}else{x=" "==(x+=r[v][g]+" ").substr(x.length-1)?x.substr(0,x.length-1):x;var w=parseInt(v),j=l(w,x,s),N=v>=r.length-1;if(j&&!N){x+=" ",g=0;continue}if(j||N){if(N)p=w;else if(e.multiline&&(u+2)*(b+2)+2>i)continue e}else{if(!e.multiline)continue e;if((u+2)*(b+2)+2>i)continue e;p=w}}for(var _="",S=f;S<=p;S++){var k=r[S];if(e.multiline){if(S===p){_+=k[g]+" ",g=(g+1)%k.length;continue}if(S===f){_+=k[k.length-1]+" ";continue}}_+=k[0]+" "}switch(_=" "==_.substr(_.length-1)?_.substr(0,_.length-1):_,d=Qe(_,e,s).width,e.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}t+=Fe(c)+" "+Fe(m)+" Td\n",t+="("+Re(_)+") Tj\n",t+=-Fe(c)+" 0 Td\n",m=-(s+2),d=0,f=y?p:p+1,b++,x=""}break}return a.text=t,a.fontSize=s,a},Qe=function(e,t,n){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),r=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},Ze={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},et=function(e,t){var n={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find((function(e){return e.type===n.type&&e.object===n.object}))&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},tt=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(ot.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Ze)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Te=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new it,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})),e.internal.events.subscribe("buildDocument",(function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];a.objId=void 0,a.hasAnnotation&&et(a,e)}}(e)})),e.internal.events.subscribe("putCatalog",(function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)})),e.internal.events.subscribe("postPutPages",(function(t){!function(e,t){var n=!e;for(var r in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(r)){var s=e[r],i=[],o=s.Rect;if(s.Rect&&(s.Rect=Xe(s.Rect,t)),t.internal.newObjectDeferredBegin(s.objId,!0),s.DA=vt.createDefaultAppearanceStream(s),"object"===(0,a.A)(s)&&"function"==typeof s.getKeyValueListForStream&&(i=s.getKeyValueListForStream()),s.Rect=o,s.hasAppearanceStream&&!s.appearanceStreamContent){var l=Ke(s);i.push({key:"AP",value:"<</N "+l+">>"}),t.internal.acroformPlugin.xForms.push(l)}if(s.appearanceStreamContent){var c="";for(var d in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(d)){var u=s.appearanceStreamContent[d];if(c+="/"+d+" ",c+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var r in u)if(u.hasOwnProperty(r)){var h=u[r];"function"==typeof h&&(h=h.call(t,s)),c+="/"+r+" "+h+" ",t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h)}}else"function"==typeof(h=u)&&(h=h.call(t,s)),c+="/"+r+" "+h,t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h);c+=">>"}i.push({key:"AP",value:"<<\n"+c+">>"})}t.internal.putStream({additionalKeyValues:i,objectId:s.objId}),t.internal.out("endobj")}n&&function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,s=e[n];t.internal.newObjectDeferredBegin(s.objId,!0),"object"===(0,a.A)(s)&&"function"==typeof s.putStream&&s.putStream(),delete e[r]}}(t.internal.acroformPlugin.xForms,t)}(t,e)})),e.internal.acroformPlugin.isInitialized=!0}},nt=Oe.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(e){return e};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(0!==i&&(s+=" "),(0,a.A)(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":"/"!==e[i].substr(0,1)?(void 0!==t&&n&&(r=n.internal.getEncryptor(t)),s+="("+Re(r(e[i].toString()))+")"):s+=e[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},at=function(e,t,n){var a=function(e){return e};return void 0!==t&&n&&(a=n.internal.getEncryptor(t)),(e=e||"").toString(),"("+Re(a(e))+")"},rt=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};rt.prototype.toString=function(){return this.objId+" 0 R"},rt.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},rt.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)}));for(var n in t)if(!1===Object.getOwnPropertyDescriptor(this,t[n]).configurable){var a=t[n],r=this[a];r&&(Array.isArray(r)?e.push({key:a,value:nt(r,this.objId,this.scope)}):r instanceof rt?(r.scope=this.scope,e.push({key:a,value:r.objId+" 0 R"})):"function"!=typeof r&&e.push({key:a,value:r}))}return e};var st=function(){rt.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};Be(st,rt);var it=function(){rt.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Re(t(e))+")"}},set:function(t){e=t}})};Be(it,rt);var ot=function e(){rt.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(t,3))},set:function(e){!0===Boolean(e)?this.F=Ge(t,3):this.F=$e(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');n=e}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==a.length)return a},set:function(e){a=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(e){a[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(e){a[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(e){a[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(e){a[3]=e}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof pt)return;s="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Re(t(s))+")"},set:function(e){s=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(e){s=e}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/Te:c},set:function(e){c=e}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=e}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof pt||this instanceof xt))return at(u,this.objId,this.scope)},set:function(e){e=e.toString(),u=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof ht==0?at(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof ht==0?"("===e.substr(0,1)?Ie(e.substr(1,e.length-2)):Ie(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ht==1?Ie(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof ht==1?"/"+e:e}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ht==0?at(m,this.objId,this.scope):m},set:function(e){e=e.toString(),m=this instanceof ht==0?"("===e.substr(0,1)?Ie(e.substr(1,e.length-2)):Ie(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ht==1?Ie(m.substr(1,m.length-1)):m},set:function(e){e=e.toString(),m=this instanceof ht==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var f,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(e){e=Boolean(e),p=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(f)return f},set:function(e){f=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,1):this.Ff=$e(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,2):this.Ff=$e(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,3):this.Ff=$e(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Be(ot,rt);var lt=function(){ot.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nt(t,this.objId,this.scope)},set:function(e){var n,a;a=[],"string"==typeof(n=e)&&(a=function(e,t,n){n||(n=1);for(var a,r=[];a=t.exec(e);)r.push(a[n]);return r}(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,n){for(n=n||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,18):this.Ff=$e(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=Ge(this.Ff,19):this.Ff=$e(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=Ge(this.Ff,20),t.sort()):this.Ff=$e(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,22):this.Ff=$e(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,23):this.Ff=$e(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,27):this.Ff=$e(this.Ff,27)}}),this.hasAppearanceStream=!1};Be(lt,ot);var ct=function(){lt.call(this),this.fontName="helvetica",this.combo=!1};Be(ct,lt);var dt=function(){ct.call(this),this.combo=!0};Be(dt,ct);var ut=function(){dt.call(this),this.edit=!0};Be(ut,dt);var ht=function(){ot.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,15):this.Ff=$e(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,16):this.Ff=$e(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,17):this.Ff=$e(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,26):this.Ff=$e(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+Re(e(t[n]))+")");return a.push(">>"),a.join("\n")}},set:function(e){"object"===(0,a.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};Be(ht,ot);var mt=function(){ht.call(this),this.pushButton=!0};Be(mt,ht);var ft=function(){ht.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};Be(ft,ht);var pt=function(){var e,t;ot.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,n=[];for(t in n.push("<<"),r)n.push("/"+t+" ("+Re(e(r[t]))+")");return n.push(">>"),n.join("\n")},set:function(e){"object"===(0,a.A)(e)&&(r=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(e){"string"==typeof e&&(r.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(e){n="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=vt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Be(pt,ot),ft.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},ft.prototype.createOption=function(e){var t=new pt;return t.Parent=this,t.optionName=e,this.Kids.push(t),yt.call(this.scope,t),t};var gt=function(){ht.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=vt.CheckBox.createAppearanceStream()};Be(gt,ht);var xt=function(){ot.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,13):this.Ff=$e(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,21):this.Ff=$e(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,23):this.Ff=$e(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,24):this.Ff=$e(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,25):this.Ff=$e(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,26):this.Ff=$e(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Be(xt,ot);var bt=function(){xt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ye(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=Ge(this.Ff,14):this.Ff=$e(this.Ff,14)}}),this.password=!0};Be(bt,xt);var vt={CheckBox:{createAppearanceStream:function(){return{N:{On:vt.CheckBox.YesNormal},D:{On:vt.CheckBox.YesPushDown,Off:vt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Ue(e);t.scope=e.scope;var n=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),s=Je(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+Fe(vt.internal.getWidth(e))+" "+Fe(vt.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+a+" "+Fe(s.fontSize)+" Tf "+r),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join("\n"),t},YesNormal:function(e){var t=Ue(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),r=[],s=vt.internal.getHeight(e),i=vt.internal.getWidth(e),o=Je(e,e.caption);return r.push("1 g"),r.push("0 0 "+Fe(i)+" "+Fe(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+Fe(i-1)+" "+Fe(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+Fe(o.fontSize)+" Tf "+a),r.push(o.text),r.push("ET"),r.push("Q"),t.stream=r.join("\n"),t},OffPushDown:function(e){var t=Ue(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Fe(vt.internal.getWidth(e))+" "+Fe(vt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Circle.YesNormal,t.D[e]=vt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Ue(e);t.scope=e.scope;var n=[],a=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var r=vt.internal.Bezier_C,s=Number((a*r).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+ze(vt.internal.getWidth(e)/2)+" "+ze(vt.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+s+" "+s+" "+a+" 0 "+a+" c"),n.push("-"+s+" "+a+" -"+a+" "+s+" -"+a+" 0 c"),n.push("-"+a+" -"+s+" -"+s+" -"+a+" 0 -"+a+" c"),n.push(s+" -"+a+" "+a+" -"+s+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=Ue(e);t.scope=e.scope;var n=[],a=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var r=Number((2*a).toFixed(5)),s=Number((r*vt.internal.Bezier_C).toFixed(5)),i=Number((a*vt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ze(vt.internal.getWidth(e)/2)+" "+ze(vt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+ze(vt.internal.getWidth(e)/2)+" "+ze(vt.internal.getHeight(e)/2)+" cm"),n.push(a+" 0 m"),n.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),n.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),n.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),n.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=Ue(e);t.scope=e.scope;var n=[],a=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var r=Number((2*a).toFixed(5)),s=Number((r*vt.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+ze(vt.internal.getWidth(e)/2)+" "+ze(vt.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Cross.YesNormal,t.D[e]=vt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Ue(e);t.scope=e.scope;var n=[],a=vt.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+Fe(vt.internal.getWidth(e)-2)+" "+Fe(vt.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Fe(a.x1.x)+" "+Fe(a.x1.y)+" m"),n.push(Fe(a.x2.x)+" "+Fe(a.x2.y)+" l"),n.push(Fe(a.x4.x)+" "+Fe(a.x4.y)+" m"),n.push(Fe(a.x3.x)+" "+Fe(a.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join("\n"),t},YesPushDown:function(e){var t=Ue(e);t.scope=e.scope;var n=vt.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+Fe(vt.internal.getWidth(e))+" "+Fe(vt.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+Fe(vt.internal.getWidth(e)-2)+" "+Fe(vt.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(Fe(n.x1.x)+" "+Fe(n.x1.y)+" m"),a.push(Fe(n.x2.x)+" "+Fe(n.x2.y)+" l"),a.push(Fe(n.x4.x)+" "+Fe(n.x4.y)+" m"),a.push(Fe(n.x3.x)+" "+Fe(n.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join("\n"),t},OffPushDown:function(e){var t=Ue(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Fe(vt.internal.getWidth(e))+" "+Fe(vt.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};vt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=vt.internal.getWidth(e),n=vt.internal.getHeight(e),a=Math.min(t,n);return{x1:{x:(t-a)/2,y:(n-a)/2+a},x2:{x:(t-a)/2+a,y:(n-a)/2},x3:{x:(t-a)/2,y:(n-a)/2},x4:{x:(t-a)/2+a,y:(n-a)/2+a}}}},vt.internal.getWidth=function(e){var t=0;return"object"===(0,a.A)(e)&&(t=qe(e.Rect[2])),t},vt.internal.getHeight=function(e){var t=0;return"object"===(0,a.A)(e)&&(t=qe(e.Rect[3])),t};var yt=Oe.addField=function(e){if(tt(this,e),!(e instanceof ot))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Oe.AcroFormChoiceField=lt,Oe.AcroFormListBox=ct,Oe.AcroFormComboBox=dt,Oe.AcroFormEditBox=ut,Oe.AcroFormButton=ht,Oe.AcroFormPushButton=mt,Oe.AcroFormRadioButton=ft,Oe.AcroFormCheckBox=gt,Oe.AcroFormTextField=xt,Oe.AcroFormPasswordField=bt,Oe.AcroFormAppearance=vt,Oe.AcroForm={ChoiceField:lt,ListBox:ct,ComboBox:dt,EditBox:ut,Button:ht,PushButton:mt,RadioButton:ft,CheckBox:gt,TextField:xt,PasswordField:bt,Appearance:vt},Me.AcroForm={ChoiceField:lt,ListBox:ct,ComboBox:dt,EditBox:ut,Button:ht,PushButton:mt,RadioButton:ft,CheckBox:gt,TextField:xt,PasswordField:bt,Appearance:vt};var wt=Me.AcroForm;function jt(e){return e.reduce((function(e,t,n){return e[t]=n,e}),{})}!function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(e,a){var r,s,i,o,l,c=t;if("RGBA"===(a=a||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(N(e))for(l in n)for(i=n[l],r=0;r<i.length;r+=1){for(o=!0,s=0;s<i[r].length;s+=1)if(void 0!==i[r][s]&&i[r][s]!==e[s]){o=!1;break}if(!0===o){c=l;break}}else for(l in n)for(i=n[l],r=0;r<i.length;r+=1){for(o=!0,s=0;s<i[r].length;s+=1)if(void 0!==i[r][s]&&i[r][s]!==e.charCodeAt(s)){o=!1;break}if(!0===o){c=l;break}}return c===t&&a!==t&&(c=a),c},s=function e(t){for(var n=this.internal.write,a=this.internal.putStream,r=(0,this.internal.getFilters)();-1!==r.indexOf("FlateEncode");)r.splice(r.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var s=[];if(s.push({key:"Type",value:"/XObject"}),s.push({key:"Subtype",value:"/Image"}),s.push({key:"Width",value:t.width}),s.push({key:"Height",value:t.height}),t.colorSpace===x.INDEXED?s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(s.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===x.DEVICE_CMYK&&s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),s.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&s.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var i="",o=0,l=t.transparency.length;o<l;o++)i+=t.transparency[o]+" "+t.transparency[o]+" ";s.push({key:"Mask",value:"["+i+"]"})}void 0!==t.sMask&&s.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(a({data:t.data,additionalKeyValues:s,alreadyAppliedFilters:c,objectId:t.objectId}),n("endobj"),"sMask"in t&&void 0!==t.sMask){var d="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,u={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:d,data:t.sMask};"filter"in t&&(u.filter=t.filter),e.call(this,u)}if(t.colorSpace===x.INDEXED){var h=this.internal.newObject();a({data:S(new Uint8Array(t.palette)),objectId:h}),n("endobj")}},i=function(){var e=this.internal.collections.addImage_images;for(var t in e)s.call(this,e[t])},o=function(){var e,t=this.internal.collections.addImage_images,n=this.internal.write;for(var a in t)n("/I"+(e=t[a]).index,e.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var e=this.internal.collections.addImage_images;return l.call(this),e},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(t){return"function"==typeof e["process"+t.toUpperCase()]},h=function(e){return"object"===(0,a.A)(e)&&1===e.nodeType},m=function(t,n){if("IMG"===t.nodeName&&t.hasAttribute("src")){var a=""+t.getAttribute("src");if(0===a.indexOf("data:image/"))return ie(unescape(a).split("base64,").pop());var r=e.loadFile(a,!0);if(void 0!==r)return r}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var s;switch(n){case"PNG":s="image/png";break;case"WEBP":s="image/webp";break;default:s="image/jpeg"}return ie(t.toDataURL(s,1).split("base64,").pop())}},f=function(e){var t=this.internal.collections.addImage_images;if(t)for(var n in t)if(e===t[n].alias)return t[n]},p=function(e,t,n){return e||t||(e=-96,t=-96),e<0&&(e=-1*n.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*n.height*72/t/this.internal.scaleFactor),0===e&&(e=t*n.width/n.height),0===t&&(t=e*n.height/n.width),[e,t]},g=function(e,t,n,a,r,s){var i=p.call(this,n,a,r),o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=c.call(this);if(n=i[0],a=i[1],d[r.index]=r,s){s*=Math.PI/180;var u=Math.cos(s),h=Math.sin(s),m=function(e){return e.toFixed(4)},f=[m(u),m(h),m(-1*h),m(u),0,0,"cm"]}this.internal.write("q"),s?(this.internal.write([1,"0","0",1,o(e),l(t+a),"cm"].join(" ")),this.internal.write(f.join(" ")),this.internal.write([o(n),"0","0",o(a),"0","0","cm"].join(" "))):this.internal.write([o(n),"0","0",o(a),o(e),l(t+a),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+r.index+" Do"),this.internal.write("Q")},x=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=e.__addimage__.sHashCode=function(e){var t,n,a=0;if("string"==typeof e)for(n=e.length,t=0;t<n;t++)a=(a<<5)-a+e.charCodeAt(t),a|=0;else if(N(e))for(n=e.byteLength/2,t=0;t<n;t++)a=(a<<5)-a+e[t],a|=0;return a},y=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},w=e.__addimage__.extractImageFromDataUrl=function(e){var t=(e=e||"").split("base64,"),n=null;if(2===t.length){var a=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(t[0]);Array.isArray(a)&&(n={mimeType:a[1],charset:a[2],data:t[1]})}return n},j=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return j()&&e instanceof ArrayBuffer};var N=e.__addimage__.isArrayBufferView=function(e){return j()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},_=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,n=new Uint8Array(t),a=0;a<t;a++)n[a]=e.charCodeAt(a);return n},S=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",n=N(e)?e:new Uint8Array(e),a=0;a<n.length;a+=8192)t+=String.fromCharCode.apply(null,n.subarray(a,a+8192));return t};e.addImage=function(){var e,n,r,s,i,o,c,d,u;if("number"==typeof arguments[1]?(n=t,r=arguments[1],s=arguments[2],i=arguments[3],o=arguments[4],c=arguments[5],d=arguments[6],u=arguments[7]):(n=arguments[1],r=arguments[2],s=arguments[3],i=arguments[4],o=arguments[5],c=arguments[6],d=arguments[7],u=arguments[8]),"object"===(0,a.A)(e=arguments[0])&&!h(e)&&"imageData"in e){var m=e;e=m.imageData,n=m.format||n||t,r=m.x||r||0,s=m.y||s||0,i=m.w||m.width||i,o=m.h||m.height||o,c=m.alias||c,d=m.compression||d,u=m.rotation||m.angle||u}var f=this.internal.getFilters();if(void 0===d&&-1!==f.indexOf("FlateEncode")&&(d="SLOW"),isNaN(r)||isNaN(s))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var p=k.call(this,e,n,c,d);return g.call(this,r,s,i,o,p,u),this};var k=function(n,a,s,i){var o,l,c;if("string"==typeof n&&r(n)===t){n=unescape(n);var p=C(n,!1);(""!==p||void 0!==(p=e.loadFile(n,!0)))&&(n=p)}if(h(n)&&(n=m(n,a)),a=r(n,a),!u(a))throw new Error("addImage does not support files of type '"+a+"', please ensure that a plugin for '"+a+"' support is added.");if((null==(c=s)||0===c.length)&&(s=function(e){return"string"==typeof e||N(e)?v(e):N(e.data)?v(e.data):null}(n)),(o=f.call(this,s))||(j()&&(n instanceof Uint8Array||"RGBA"===a||(l=n,n=_(n))),o=this["process"+a.toUpperCase()](n,d.call(this),s,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:b.NONE}(i),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},C=e.__addimage__.convertBase64ToBinaryString=function(e,t){var n;t="boolean"!=typeof t||t;var a,r="";if("string"==typeof e){a=null!==(n=w(e))?n.data:e;try{r=ie(a)}catch(e){if(t)throw y(a)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};e.getImageProperties=function(n){var a,s,i="";if(h(n)&&(n=m(n)),"string"==typeof n&&r(n)===t&&(""===(i=C(n,!1))&&(i=e.loadFile(n)||""),n=i),s=r(n),!u(s))throw new Error("addImage does not support files of type '"+s+"', please ensure that a plugin for '"+s+"' support is added.");if(!j()||n instanceof Uint8Array||(n=_(n)),!(a=this["process"+s.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return a.fileType=s,a}}(Me.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};Me.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var n,a,r,s=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,d=0;d<l.length&&!c;d++)switch((n=l[d]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var u=0;u<l.length;u++){n=l[u];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(e.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(f.objId),x=n.title||"Note";r="<</Type /Annot /Subtype /Text "+(a="/Rect ["+s(n.bounds.x)+" "+i(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+i(n.bounds.y)+"] ")+"/Contents ("+h(g(n.contents))+")",r+=" /Popup "+p.objId+" 0 R",r+=" /P "+o.objId+" 0 R",r+=" /T ("+h(g(x))+") >>",f.content=r;var b=f.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+s(n.bounds.x+30)+" "+i(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+i(n.bounds.y)+"] ")+" /Parent "+b,n.open&&(r+=" /Open true"),r+=" >>",p.content=r,this.internal.write(f.objId,"0 R",p.objId,"0 R");break;case"freetext":a="/Rect ["+s(n.bounds.x)+" "+i(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+i(n.bounds.y+n.bounds.h)+"] ";var v=n.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+h(m(n.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+v+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(n.options.name){var y=this.annotations._nameMap[n.options.name];n.options.pageNumber=y.page,n.options.top=y.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",r="",n.options.url)r="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,r+=" /FitV "+n.options.left+"]";break;default:var w=i(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),r+=" /XYZ "+n.options.left+" "+w+" "+n.options.zoom+"]"}""!=r&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,n,a,r){var s=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:i(e),y:o(t),w:i(e+n),h:o(t+a)},options:r,type:"link"})},e.textWithLink=function(e,t,n,a){var r,s,i=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==a.maxWidth){s=a.maxWidth;var l=this.splitTextToSize(e,s).length;r=Math.ceil(o*l)}else s=i,r=o;return this.text(e,t,n,a),n+=.2*o,"center"===a.align&&(t-=i/2),"right"===a.align&&(t-=i),this.link(t,n-o,s,r,a),i},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(Me.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];e.__arabicParser__={};var s=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},i=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return i(e)&&r.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return i(e)&&s(e)&&t[e.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return i(e)&&s(e)&&4==t[e.charCodeAt(0)].length},u=e.__arabicParser__.resolveLigatures=function(e){var t=0,a=n,r="",s=0;for(t=0;t<e.length;t+=1)void 0!==a[e.charCodeAt(t)]?(s++,"number"==typeof(a=a[e.charCodeAt(t)])&&(r+=String.fromCharCode(a),a=n,s=0),t===e.length-1&&(a=n,r+=e.charAt(t-(s-1)),t-=s-1,s=0)):(a=n,r+=e.charAt(t-s),t-=s,s=0);return r};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==a[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,n){return i(e)?!1===s(e)?-1:!c(e)||!i(t)&&!i(n)||!i(n)&&o(t)||o(e)&&!i(t)||o(e)&&l(t)||o(e)&&o(t)?0:d(e)&&i(t)&&!o(t)&&i(n)&&c(n)?3:o(e)||!i(n)?1:2:-1},m=function(e){var n=0,a=0,r=0,s="",o="",l="",c=(e=e||"").split("\\s+"),d=[];for(n=0;n<c.length;n+=1){for(d.push(""),a=0;a<c[n].length;a+=1)s=c[n][a],o=c[n][a-1],l=c[n][a+1],i(s)?(r=h(s,o,l),d[n]+=-1!==r?String.fromCharCode(t[s.charCodeAt(0)][r]):s):d[n]+=s;d[n]=u(d[n])}return d.join(" ")},f=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(t)){var a=0;for(n=[],a=0;a<t.length;a+=1)Array.isArray(t[a])?n.push([m(t[a][0]),t[a][1],t[a][2]]):n.push([m(t[a])]);e=n}else e=m(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",f])}(Me.API),Me.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}));return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(e){n=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(e){a=e}});var r={};Object.defineProperty(this,"style",{get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var n;if("2d"!==(e=e||"2d"))return null;for(n in t)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=t[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Me.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var a=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var r=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var s=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return s},set:function(e){s=e}});var i=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return i},set:function(e){i=e}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){r.call(this);var n=(t=t||{}).fontSize||this.getFontSize(),a=t.font||this.getFont(),s=t.scaleFactor||this.internal.scaleFactor,i=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var d=t.maxWidth;d>0?"string"==typeof e?e=this.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(c.splitTextToSize(t,d))}),[])):e=Array.isArray(e)?e:[e];for(var u=0;u<e.length;u++)i<(l=this.getStringUnitWidth(e[u],{font:a})*n)&&(i=l);return 0!==i&&(o=e.length),{w:i/=s,h:Math.max((o*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/s,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var e;e=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var a=this.internal.__cell__.lastCell,s=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==a.lineNumber&&(a.lineNumber===e.lineNumber?(e.x=(a.x||0)+(a.width||0),e.y=a.y||0):a.y+a.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=a.y+a.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===n?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-s,e.y+s,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+s,{align:"center",baseline:"top",maxWidth:e.width-s-s}):this.text(e.text,e.x+s,e.y+s,{align:"left",baseline:"top",maxWidth:e.width-s-s})),this.internal.__cell__.lastCell=e,this};e.table=function(e,n,c,d,u){if(r.call(this),!c)throw new Error("No data for PDF table.");var h,m,f,p,g=[],x=[],b=[],v={},y={},w=[],j=[],N=(u=u||{}).autoSize||!1,_=!1!==u.printHeaders,S=u.css&&void 0!==u.css["font-size"]?16*u.css["font-size"]:u.fontSize||12,k=u.margins||Object.assign({width:this.getPageWidth()},t),C="number"==typeof u.padding?u.padding:3,A=u.headerBackgroundColor||"#c8c8c8",P=u.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=_,this.internal.__cell__.margins=k,this.internal.__cell__.table_font_size=S,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=A,this.internal.__cell__.headerTextColor=P,this.setFontSize(S),null==d)x=g=Object.keys(c[0]),b=g.map((function(){return"left"}));else if(Array.isArray(d)&&"object"===(0,a.A)(d[0]))for(g=d.map((function(e){return e.name})),x=d.map((function(e){return e.prompt||e.name||""})),b=d.map((function(e){return e.align||"left"})),h=0;h<d.length;h+=1)y[d[h].name]=d[h].width*(19.049976/25.4);else Array.isArray(d)&&"string"==typeof d[0]&&(x=g=d,b=g.map((function(){return"left"})));if(N||Array.isArray(d)&&"string"==typeof d[0])for(h=0;h<g.length;h+=1){for(v[p=g[h]]=c.map((function(e){return e[p]})),this.setFont(void 0,"bold"),w.push(this.getTextDimensions(x[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=v[p],this.setFont(void 0,"normal"),f=0;f<m.length;f+=1)w.push(this.getTextDimensions(m[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);y[p]=Math.max.apply(null,w)+C+C,w=[]}if(_){var L={};for(h=0;h<g.length;h+=1)L[g[h]]={},L[g[h]].text=x[h],L[g[h]].align=b[h];var E=l.call(this,L,y);j=g.map((function(t){return new i(e,n,y[t],E,L[t].text,void 0,L[t].align)})),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var D=d.reduce((function(e,t){return e[t.name]=t.align,e}),{});for(h=0;h<c.length;h+=1){"rowStart"in u&&u.rowStart instanceof Function&&u.rowStart({row:h,data:c[h]},this);var M=l.call(this,c[h],y);for(f=0;f<g.length;f+=1){var O=c[h][g[f]];"cellStart"in u&&u.cellStart instanceof Function&&u.cellStart({row:h,col:f,data:O},this),o.call(this,new i(e,n,y[g[f]],M,O,h+2,D[g[f]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=n,this};var l=function(e,t){var n=this.internal.__cell__.padding,a=this.internal.__cell__.table_font_size,r=this.internal.scaleFactor;return Object.keys(e).map((function(a){var r=e[a];return this.splitTextToSize(r.hasOwnProperty("text")?r.text:r,t[a]-n-n)}),this).map((function(e){return this.getLineHeightFactor()*e.length*a/r+n+n}),this).reduce((function(e,t){return Math.max(e,t)}),0)};e.setTableHeaderRow=function(e){r.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var a;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){a=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(a.y=this.internal.__cell__.margins.top||0,l.push(a)),a.lineNumber=e;var d=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,a),this.setTextColor(d)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(Me.API);var Nt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},_t=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],St=jt(_t),kt=[100,200,300,400,500,600,700,800,900],Ct=jt(kt);function At(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(e){return Nt[e=e||"normal"]?e:"normal"}(e.style),a=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),r=function(e){return"number"==typeof St[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:n,weight:a,stretch:r,src:e.src||[],ref:e.ref||{name:t,style:[r,n,a].join(" ")}}}function Pt(e,t,n,a){var r;for(r=n;r>=0&&r<t.length;r+=a)if(e[t[r]])return e[t[r]];for(r=n;r>=0&&r<t.length;r-=a)if(e[t[r]])return e[t[r]]}var Lt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Et={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Dt(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Mt(e){return e.trimLeft()}function Ot(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function Tt(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var Rt,It,Ft,zt,Bt=["times"];!function(e){var t,n,r,s,i,o,l,c,d,u=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new c,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new o,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new o,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(e){n=Boolean(e)}});var a=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return a},set:function(e){a=Boolean(e)}});var r=0;Object.defineProperty(this,"posX",{get:function(){return r},set:function(e){isNaN(e)||(r=e)}});var s=0;Object.defineProperty(this,"posY",{get:function(){return s},set:function(e){isNaN(e)||(s=e)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),d.margin=t}});var i=!1;Object.defineProperty(this,"autoPaging",{get:function(){return i},set:function(e){i=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(e){e instanceof u&&(d=e)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(e){d.path=e}});var c=[];Object.defineProperty(this,"ctxStack",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=m(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=m(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var h=null;function f(e,t){if(null===h){var n=function(e){var t=[];return Object.keys(e).forEach((function(n){e[n].forEach((function(e){var a=null;switch(e){case"bold":a={family:n,weight:"bold"};break;case"italic":a={family:n,style:"italic"};break;case"bolditalic":a={family:n,weight:"bold",style:"italic"};break;case"":case"normal":a={family:n}}null!==a&&(a.ref={name:n,style:e},t.push(a))}))})),t}(e.getFontList());h=function(e){for(var t={},n=0;n<e.length;++n){var a=At(e[n]),r=a.family,s=a.stretch,i=a.style,o=a.weight;t[r]=t[r]||{},t[r][s]=t[r][s]||{},t[r][s][i]=t[r][s][i]||{},t[r][s][i][o]=a}return t}(n.concat(t))}return h}var p=null;Object.defineProperty(this,"fontFaces",{get:function(){return p},set:function(e){h=null,p=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var n=t[1],a=(t[2],t[3]),r=t[4],s=(t[5],t[6]),i=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(r)[2];r="px"===i?Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor):"em"===i?Math.floor(parseFloat(r)*this.pdf.getFontSize()):Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(r);var o=function(e){var t,n,a=[],r=e.trim();if(""===r)return Bt;if(r in Et)return[Et[r]];for(;""!==r;){switch(n=null,t=(r=Mt(r)).charAt(0)){case'"':case"'":n=Ot(r.substring(1),t);break;default:n=Tt(r)}if(null===n)return Bt;if(a.push(n[0]),""!==(r=Mt(n[1]))&&","!==r.charAt(0))return Bt;r=r.replace(/^,/,"")}return a}(s);if(this.fontFaces){var l=function(e,t,n){for(var a=(n=n||{}).defaultFontFamily||"times",r=Object.assign({},Lt,n.genericFontFamilies||{}),s=null,i=null,o=0;o<t.length;++o)if(r[(s=At(t[o])).family]&&(s.family=r[s.family]),e.hasOwnProperty(s.family)){i=e[s.family];break}if(!(i=i||e[a]))throw new Error("Could not find a font-family for the rule '"+Dt(s)+"' and default family '"+a+"'.");if(i=function(e,t){if(t[e])return t[e];var n=St[e],a=n<=St.normal?-1:1,r=Pt(t,_t,n,a);if(!r)throw new Error("Could not find a matching font-stretch value for "+e);return r}(s.stretch,i),i=function(e,t){if(t[e])return t[e];for(var n=Nt[e],a=0;a<n.length;++a)if(t[n[a]])return t[n[a]];throw new Error("Could not find a matching font-style for "+e)}(s.style,i),!(i=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var n=Ct[e],a=Pt(t,kt,n,e<400?-1:1);if(!a)throw new Error("Could not find a matching font-weight for value "+e);return a}(s.weight,i)))throw new Error("Failed to resolve a font for the rule '"+Dt(s)+"'.");return i}(f(this.pdf,this.fontFaces),o.map((function(e){return{family:e,stretch:"normal",weight:a,style:n}})));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===a||parseInt(a,10)>=700||"bold"===n)&&(c="bold"),"italic"===n&&(c+="italic"),0===c.length&&(c="normal");for(var d="",u={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<o.length;h++){if(void 0!==this.pdf.internal.getFont(o[h],c,{noFallback:!0,disableWarning:!0})){d=o[h];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(o[h],"bold",{noFallback:!0,disableWarning:!0}))d=o[h],c="bold";else if(void 0!==this.pdf.internal.getFont(o[h],"normal",{noFallback:!0,disableWarning:!0})){d=o[h],c="normal";break}}if(""===d)for(var m=0;m<o.length;m++)if(u[o[m]]){d=u[o[m]];break}d=""===d?"Times":d,this.pdf.setFont(d,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,F.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,F.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};h.prototype.setLineDash=function(e){this.lineDash=e},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){w.call(this,"fill",!1)},h.prototype.stroke=function(){w.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(e,t)},h.prototype.closePath=function(){var e=new o(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,a.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new o(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(e.x,e.y)},h.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(n.x,n.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},h.prototype.quadraticCurveTo=function(e,t,n,a){if(isNaN(n)||isNaN(a)||isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var r=this.ctx.transform.applyToPoint(new o(n,a)),s=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"qct",x1:s.x,y1:s.y,x:r.x,y:r.y}),this.ctx.lastPoint=new o(r.x,r.y)},h.prototype.bezierCurveTo=function(e,t,n,a,r,s){if(isNaN(r)||isNaN(s)||isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw ne.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var i=this.ctx.transform.applyToPoint(new o(r,s)),l=this.ctx.transform.applyToPoint(new o(e,t)),c=this.ctx.transform.applyToPoint(new o(n,a));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:i.x,y:i.y}),this.ctx.lastPoint=new o(i.x,i.y)},h.prototype.arc=function(e,t,n,a,r,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||isNaN(r))throw ne.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(s=Boolean(s),!this.ctx.transform.isIdentity){var i=this.ctx.transform.applyToPoint(new o(e,t));e=i.x,t=i.y;var l=this.ctx.transform.applyToPoint(new o(0,n)),c=this.ctx.transform.applyToPoint(new o(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(r-a)>=2*Math.PI&&(a=0,r=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:n,startAngle:a,endAngle:r,counterclockwise:s})},h.prototype.arcTo=function(e,t,n,a,r){throw new Error("arcTo not implemented.")},h.prototype.rect=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw ne.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+a),this.lineTo(e,t+a),this.lineTo(e,t),this.lineTo(e+n,t),this.lineTo(e,t)},h.prototype.fillRect=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw ne.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var r={};"butt"!==this.lineCap&&(r.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(r.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,n,a),this.fill(),r.hasOwnProperty("lineCap")&&(this.lineCap=r.lineCap),r.hasOwnProperty("lineJoin")&&(this.lineJoin=r.lineJoin)}},h.prototype.strokeRect=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw ne.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");p.call(this)||(this.beginPath(),this.rect(e,t,n,a),this.stroke())},h.prototype.clearRect=function(e,t,n,a){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a))throw ne.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,n,a))},h.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var a=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=a}},h.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(e){var t,n,a,r;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,n=0,a=0,r=0;else{var s=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==s)t=parseInt(s[1]),n=parseInt(s[2]),a=parseInt(s[3]),r=1;else if(null!==(s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(s[1]),n=parseInt(s[2]),a=parseInt(s[3]),r=parseFloat(s[4]);else{if(r=1,"string"==typeof e&&"#"!==e.charAt(0)){var i=new ce(e);e=i.ok?i.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,n=e.substring(2,3),n+=n,a=e.substring(3,4),a+=a):(t=e.substring(1,3),n=e.substring(3,5),a=e.substring(5,7)),t=parseInt(t,16),n=parseInt(n,16),a=parseInt(a,16)}}return{r:t,g:n,b:a,a:r,style:e}},f=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},p=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};h.prototype.fillText=function(e,t,n,a){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw ne.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(a=isNaN(a)?void 0:a,!f.call(this)){var r=T(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;P.call(this,{text:e,x:t,y:n,scale:s,angle:r,align:this.textAlign,maxWidth:a})}},h.prototype.strokeText=function(e,t,n,a){if(isNaN(t)||isNaN(n)||"string"!=typeof e)throw ne.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!p.call(this)){a=isNaN(a)?void 0:a;var r=T(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;P.call(this,{text:e,x:t,y:n,scale:s,renderingMode:"stroke",angle:r,align:this.textAlign,maxWidth:a})}},h.prototype.measureText=function(e){if("string"!=typeof e)throw ne.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,n=this.pdf.internal.scaleFactor,a=t.internal.getFontSize(),r=t.getStringUnitWidth(e)*a/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:r*=Math.round(96*n/72*1e4)/1e4})},h.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new c(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.rotate=function(e){if(isNaN(e))throw ne.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new c(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},h.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw ne.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new c(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.transform=function(e,t,n,a,r,s){if(isNaN(e)||isNaN(t)||isNaN(n)||isNaN(a)||isNaN(r)||isNaN(s))throw ne.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var i=new c(e,t,n,a,r,s);this.ctx.transform=this.ctx.transform.multiply(i)},h.prototype.setTransform=function(e,t,n,a,r,s){e=isNaN(e)?1:e,t=isNaN(t)?0:t,n=isNaN(n)?0:n,a=isNaN(a)?1:a,r=isNaN(r)?0:r,s=isNaN(s)?0:s,this.ctx.transform=new c(e,t,n,a,r,s)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(e,t,n,a,r,s,i,o,d){var u=this.pdf.getImageProperties(e),h=1,m=1,f=1,p=1;void 0!==a&&void 0!==o&&(f=o/a,p=d/r,h=u.width/a*o/a,m=u.height/r*d/r),void 0===s&&(s=t,i=n,t=0,n=0),void 0!==a&&void 0===o&&(o=a,d=r),void 0===a&&void 0===o&&(o=u.width,d=u.height);for(var b,w=this.ctx.transform.decompose(),N=T(w.rotate.shx),_=new c,S=(_=(_=(_=_.multiply(w.translate)).multiply(w.skew)).multiply(w.scale)).applyToRectangle(new l(s-t*f,i-n*p,a*h,r*m)),k=x.call(this,S),C=[],A=0;A<k.length;A+=1)-1===C.indexOf(k[A])&&C.push(k[A]);if(y(C),this.autoPaging)for(var P=C[0],L=C[C.length-1],E=P;E<L+1;E++){this.pdf.setPage(E);var D=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],M=1===E?this.posY+this.margin[0]:this.margin[0],O=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],R=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],I=1===E?0:O+(E-2)*R;if(0!==this.ctx.clip_path.length){var F=this.path;b=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(b,this.posX+this.margin[3],-I+M+this.ctx.prevPageLastElemOffset),j.call(this,"fill",!0),this.path=F}var z=JSON.parse(JSON.stringify(S));z=v([z],this.posX+this.margin[3],-I+M+this.ctx.prevPageLastElemOffset)[0];var B=(E>P||E<L)&&g.call(this);B&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],D,R,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",z.x,z.y,z.w,z.h,null,null,N),B&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",S.x,S.y,S.w,S.h,null,null,N)};var x=function(e,t,n){var a=[];t=t||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var r=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":a.push(Math.floor((e.y+r)/n)+1);break;case"arc":a.push(Math.floor((e.y+r-e.radius)/n)+1),a.push(Math.floor((e.y+r+e.radius)/n)+1);break;case"qct":var s=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);a.push(Math.floor((s.y+r)/n)+1),a.push(Math.floor((s.y+s.h+r)/n)+1);break;case"bct":var i=I(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);a.push(Math.floor((i.y+r)/n)+1),a.push(Math.floor((i.y+i.h+r)/n)+1);break;case"rect":a.push(Math.floor((e.y+r)/n)+1),a.push(Math.floor((e.y+e.h+r)/n)+1)}for(var o=0;o<a.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<a[o];)b.call(this);return a},b=function(){var e=this.fillStyle,t=this.strokeStyle,n=this.font,a=this.lineCap,r=this.lineWidth,s=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=n,this.lineCap=a,this.lineWidth=r,this.lineJoin=s},v=function(e,t,n){for(var a=0;a<e.length;a++)switch(e[a].type){case"bct":e[a].x2+=t,e[a].y2+=n;case"qct":e[a].x1+=t,e[a].y1+=n;default:e[a].x+=t,e[a].y+=n}return e},y=function(e){return e.sort((function(e,t){return e-t}))},w=function(e,t){for(var n,a,r=this.fillStyle,s=this.strokeStyle,i=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,d=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),h=[],m=0;m<u.length;m++)if(void 0!==u[m].x)for(var f=x.call(this,u[m]),p=0;p<f.length;p+=1)-1===h.indexOf(f[p])&&h.push(f[p]);for(var w=0;w<h.length;w++)for(;this.pdf.internal.getNumberOfPages()<h[w];)b.call(this);if(y(h),this.autoPaging)for(var N=h[0],_=h[h.length-1],S=N;S<_+1;S++){this.pdf.setPage(S),this.fillStyle=r,this.strokeStyle=s,this.lineCap=i,this.lineWidth=l,this.lineJoin=c;var k=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],C=1===S?this.posY+this.margin[0]:this.margin[0],A=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],P=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],L=1===S?0:A+(S-2)*P;if(0!==this.ctx.clip_path.length){var E=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(n,this.posX+this.margin[3],-L+C+this.ctx.prevPageLastElemOffset),j.call(this,e,!0),this.path=E}if(a=JSON.parse(JSON.stringify(d)),this.path=v(a,this.posX+this.margin[3],-L+C+this.ctx.prevPageLastElemOffset),!1===t||0===S){var D=(S>N||S<_)&&g.call(this);D&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],k,P,null).clip().discardPath()),j.call(this,e,t),D&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,j.call(this,e,t),this.lineWidth=o;this.path=d},j=function(e,t){if(("stroke"!==e||t||!p.call(this))&&("stroke"===e||t||!f.call(this))){for(var n,a,r=[],s=this.path,i=0;i<s.length;i++){var o=s[i];switch(o.type){case"begin":r.push({begin:!0});break;case"close":r.push({close:!0});break;case"mt":r.push({start:o,deltas:[],abs:[]});break;case"lt":var l=r.length;if(s[i-1]&&!isNaN(s[i-1].x)&&(n=[o.x-s[i-1].x,o.y-s[i-1].y],l>0))for(;l>=0;l--)if(!0!==r[l-1].close&&!0!==r[l-1].begin){r[l-1].deltas.push(n),r[l-1].abs.push(o);break}break;case"bct":n=[o.x1-s[i-1].x,o.y1-s[i-1].y,o.x2-s[i-1].x,o.y2-s[i-1].y,o.x-s[i-1].x,o.y-s[i-1].y],r[r.length-1].deltas.push(n);break;case"qct":var c=s[i-1].x+2/3*(o.x1-s[i-1].x),d=s[i-1].y+2/3*(o.y1-s[i-1].y),u=o.x+2/3*(o.x1-o.x),h=o.y+2/3*(o.y1-o.y),m=o.x,g=o.y;n=[c-s[i-1].x,d-s[i-1].y,u-s[i-1].x,h-s[i-1].y,m-s[i-1].x,g-s[i-1].y],r[r.length-1].deltas.push(n);break;case"arc":r.push({deltas:[],abs:[],arc:!0}),Array.isArray(r[r.length-1].abs)&&r[r.length-1].abs.push(o)}}a=t?null:"stroke"===e?"stroke":"fill";for(var x=!1,b=0;b<r.length;b++)if(r[b].arc)for(var v=r[b].abs,y=0;y<v.length;y++){var w=v[y];"arc"===w.type?S.call(this,w.x,w.y,w.radius,w.startAngle,w.endAngle,w.counterclockwise,void 0,t,!x):L.call(this,w.x,w.y),x=!0}else if(!0===r[b].close)this.pdf.internal.out("h"),x=!1;else if(!0!==r[b].begin){var j=r[b].start.x,N=r[b].start.y;E.call(this,r[b].deltas,j,N),x=!0}a&&k.call(this,a),t&&C.call(this)}},N=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-n;case"top":return e+t-n;case"hanging":return e+t-2*n;case"middle":return e+t/2-n;default:return e}},_=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(e,t,n,a,r,s,i,o,l){for(var c=M.call(this,n,a,r,s),d=0;d<c.length;d++){var u=c[d];0===d&&(l?A.call(this,u.x1+e,u.y1+t):L.call(this,u.x1+e,u.y1+t)),D.call(this,e,t,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}o?C.call(this):k.call(this,i)},k=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},C=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(e,t){this.pdf.internal.out(n(e)+" "+r(t)+" m")},P=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var n=this.pdf.getTextDimensions(e.text),a=N.call(this,e.y),r=_.call(this,a)-n.h,s=this.ctx.transform.applyToPoint(new o(e.x,a)),i=this.ctx.transform.decompose(),d=new c;d=(d=(d=d.multiply(i.translate)).multiply(i.skew)).multiply(i.scale);for(var u,h,m,f=this.ctx.transform.applyToRectangle(new l(e.x,a,n.w,n.h)),p=d.applyToRectangle(new l(e.x,r,n.w,n.h)),b=x.call(this,p),w=[],S=0;S<b.length;S+=1)-1===w.indexOf(b[S])&&w.push(b[S]);if(y(w),this.autoPaging)for(var k=w[0],C=w[w.length-1],A=k;A<C+1;A++){this.pdf.setPage(A);var P=1===A?this.posY+this.margin[0]:this.margin[0],L=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],E=this.pdf.internal.pageSize.height-this.margin[2],D=E-this.margin[0],M=this.pdf.internal.pageSize.width-this.margin[1],O=M-this.margin[3],T=1===A?0:L+(A-2)*D;if(0!==this.ctx.clip_path.length){var R=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(u,this.posX+this.margin[3],-1*T+P),j.call(this,"fill",!0),this.path=R}var I=v([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-T+P+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),m=this.lineWidth,this.lineWidth=m*e.scale);var F="text"!==this.autoPaging;if(F||I.y+I.h<=E){if(F||I.y>=P&&I.x<=M){var z=F?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||M-I.x)[0],B=v([JSON.parse(JSON.stringify(f))],this.posX+this.margin[3],-T+P+this.ctx.prevPageLastElemOffset)[0],q=F&&(A>k||A<C)&&g.call(this);q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],O,D,null).clip().discardPath()),this.pdf.text(z,B.x,B.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),q&&this.pdf.restoreGraphicsState()}}else I.y<E&&(this.ctx.prevPageLastElemOffset+=E-I.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=m)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),m=this.lineWidth,this.lineWidth=m*e.scale),this.pdf.text(e.text,s.x+this.posX,s.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=m)},L=function(e,t,a,s){a=a||0,s=s||0,this.pdf.internal.out(n(e+a)+" "+r(t+s)+" l")},E=function(e,t,n){return this.pdf.lines(e,t,n,null,null)},D=function(e,n,a,r,o,l,c,d){this.pdf.internal.out([t(s(a+e)),t(i(r+n)),t(s(o+e)),t(i(l+n)),t(s(c+e)),t(i(d+n)),"c"].join(" "))},M=function(e,t,n,a){for(var r=2*Math.PI,s=Math.PI/2;t>n;)t-=r;var i=Math.abs(n-t);i<r&&a&&(i=r-i);for(var o=[],l=a?-1:1,c=t;i>1e-5;){var d=c+l*Math.min(i,s);o.push(O.call(this,e,c,d)),i-=Math.abs(d-c),c=d}return o},O=function(e,t,n){var a=(n-t)/2,r=e*Math.cos(a),s=e*Math.sin(a),i=r,o=-s,l=i*i+o*o,c=l+i*r+o*s,d=4/3*(Math.sqrt(2*l*c)-c)/(i*s-o*r),u=i-d*o,h=o+d*i,m=u,f=-h,p=a+t,g=Math.cos(p),x=Math.sin(p);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:u*g-h*x,y2:u*x+h*g,x3:m*g-f*x,y3:m*x+f*g,x4:e*Math.cos(n),y4:e*Math.sin(n)}},T=function(e){return 180*e/Math.PI},R=function(e,t,n,a,r,s){var i=e+.5*(n-e),o=t+.5*(a-t),c=r+.5*(n-r),d=s+.5*(a-s),u=Math.min(e,r,i,c),h=Math.max(e,r,i,c),m=Math.min(t,s,o,d),f=Math.max(t,s,o,d);return new l(u,m,h-u,f-m)},I=function(e,t,n,a,r,s,i,o){var c,d,u,h,m,f,p,g,x,b,v,y,w,j,N=n-e,_=a-t,S=r-n,k=s-a,C=i-r,A=o-s;for(d=0;d<41;d++)x=(p=(u=e+(c=d/40)*N)+c*((m=n+c*S)-u))+c*(m+c*(r+c*C-m)-p),b=(g=(h=t+c*_)+c*((f=a+c*k)-h))+c*(f+c*(s+c*A-f)-g),0==d?(v=x,y=b,w=x,j=b):(v=Math.min(v,x),y=Math.min(y,b),w=Math.max(w,x),j=Math.max(j,b));return new l(Math.round(v),Math.round(y),Math.round(w-v),Math.round(j-y))},F=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,n=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(Me.API),function(e){var t=function(e){var t,n,a,r,s,i,o,l,c,d;for(/[^\x00-\xFF]/.test(e),n=[],a=0,r=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;r>a;a+=4)0!==(s=(e.charCodeAt(a)<<24)+(e.charCodeAt(a+1)<<16)+(e.charCodeAt(a+2)<<8)+e.charCodeAt(a+3))?(i=(s=((s=((s=((s=(s-(d=s%85))/85)-(c=s%85))/85)-(l=s%85))/85)-(o=s%85))/85)%85,n.push(i+33,o+33,l+33,c+33,d+33)):n.push(122);return function(e,t){for(var n=t;n>0;n--)e.pop()}(n,t.length),String.fromCharCode.apply(String,n)+"~>"},n=function(e){var t,n,a,r,s,i=String,o="length",l=255,c="charCodeAt",d="slice",u="replace";for(e[d](-2),e=e[d](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),a=[],r=0,s=(e+=t="uuuuu"[d](e[o]%5||5))[o];s>r;r+=5)n=52200625*(e[c](r)-33)+614125*(e[c](r+1)-33)+7225*(e[c](r+2)-33)+85*(e[c](r+3)-33)+(e[c](r+4)-33),a.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(e,t){for(var n=t;n>0;n--)e.pop()}(a,t[o]),i.fromCharCode.apply(i,a)},a=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var n="",a=0;a<e.length;a+=2)n+=String.fromCharCode("0x"+(e[a]+e[a+1]));return n},r=function(e){for(var t=new Uint8Array(e.length),n=e.length;n--;)t[n]=e.charCodeAt(n);return(t=J(t)).reduce((function(e,t){return e+String.fromCharCode(t)}),"")};e.processDataByFilters=function(e,s){var i=0,o=e||"",l=[];for("string"==typeof(s=s||[])&&(s=[s]),i=0;i<s.length;i+=1)switch(s[i]){case"ASCII85Decode":case"/ASCII85Decode":o=n(o),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":o=t(o),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":o=a(o),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":o=o.split("").map((function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)})).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":o=r(o),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[i]+'" is not implemented')}return{data:o,reverseChain:l.reverse().join(" ")}}}(Me.API),(zt=Me.API).loadFile=function(e,t,n){return function(e,t,n){t=!1!==t,n="function"==typeof n?n:function(){};var a=void 0;try{a=function(e,t,n){var a=new XMLHttpRequest,r=0,s=function(e){var t=e.length,n=[],a=String.fromCharCode;for(r=0;r<t;r+=1)n.push(a(255&e.charCodeAt(r)));return n.join("")};if(a.open("GET",e,!t),a.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(a.onload=function(){200===a.status?n(s(this.responseText)):n(void 0)}),a.send(null),t&&200===a.status)return s(a.responseText)}(e,t,n)}catch(e){}return a}(e,t,n)},zt.loadImageFile=zt.loadFile,function(e){function t(){return(ee.html2canvas?Promise.resolve(ee.html2canvas):n.e(239).then(n.t.bind(n,5239,23))).catch((function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))})).then((function(e){return e.default?e.default:e}))}function r(){return(ee.DOMPurify?Promise.resolve(ee.DOMPurify):n.e(213).then(n.t.bind(n,6213,23))).catch((function(e){return Promise.reject(new Error("Could not load dompurify: "+e))})).then((function(e){return e.default?e.default:e}))}var s=function(e){var t=(0,a.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},i=function(e,t){var n=document.createElement(e);for(var a in t.className&&(n.className=t.className),t.innerHTML&&t.dompurify&&(n.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)n.style[a]=t.style[a];return n},o=function e(t){var n=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),a=e.convert(Promise.resolve(),n);return(a=a.setProgress(1,e,1,[e])).set(t)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(e,t){return e.__proto__=t||o.prototype,e},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(e,t){return this.then((function(){switch(t=t||function(e){switch(s(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(r).then((function(t){return this.set({src:i("div",{innerHTML:e,dompurify:t})})}));case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,n){for(var a=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),r=t.firstChild;r;r=r.nextSibling)!0!==n&&1===r.nodeType&&"SCRIPT"===r.nodeName||a.appendChild(e(r,n));return 1===t.nodeType&&("CANVAS"===t.nodeName?(a.width=t.width,a.height=t.height,a.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(a.value=t.value),a.addEventListener("load",(function(){a.scrollTop=t.scrollTop,a.scrollLeft=t.scrollLeft}),!0)),a}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=this.opt.jsPDF,n=this.opt.fontFaces,a="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,r=Object.assign({async:!0,allowTaint:!0,scale:a,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete r.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=n,n)for(var s=0;s<n.length;++s){var i=n[s],o=i.src.find((function(e){return"truetype"===e.format}));o&&t.addFont(o.url,i.ref.name,i.ref.style)}return r.windowHeight=r.windowHeight||0,r.windowHeight=0==r.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):r.windowHeight,t.context2d.save(!0),e(this.prop.container,r)})).then((function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(e,t,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},o.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(e,t)}))},o.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}}))},o.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(e){if("object"!==s(e))return this;var t=Object.keys(e||{}).map((function(t){if(t in o.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}}),this);return this.then((function(){return this.thenList(t)}))},o.prototype.get=function(e,t){return this.then((function(){var n=e in o.template.prop?this.prop[e]:this.opt[e];return t?t(n):n}))},o.prototype.setMargin=function(e){return this.then((function(){switch(s(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e})).then(this.setPageSize)},o.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then((function(){(e=e||Me.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e}))},o.prototype.setProgress=function(e,t,n,a){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=n&&(this.progress.n=n),null!=a&&(this.progress.stack=a),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(e,t,n,a){return this.setProgress(e?this.progress.val+e:null,t||null,n?this.progress.n+n:null,a?this.progress.stack.concat(a):null)},o.prototype.then=function(e,t){var n=this;return this.thenCore(e,t,(function(e,t){return n.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,(function(t){return n.updateProgress(null,e),t})).then(e,t).then((function(e){return n.updateProgress(1),e}))}))},o.prototype.thenCore=function(e,t,n){n=n||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var a=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:o.convert(Object.assign({},this),Promise.prototype),r=n.call(a,e,t);return o.convert(r,this.__proto__)},o.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},o.prototype.thenList=function(e){var t=this;return e.forEach((function(e){t=t.thenCore(e)})),t},o.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return o.convert(t,this)},o.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},o.prototype.error=function(e){return this.then((function(){throw new Error(e)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Me.getPageSize=function(e,t,n){if("object"===(0,a.A)(e)){var r=e;e=r.orientation,t=r.unit||t,n=r.format||n}t=t||"mm",n=n||"a4",e=(""+(e||"P")).toLowerCase();var s,i=(""+n).toLowerCase(),o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":s=1;break;case"mm":s=72/25.4;break;case"cm":s=72/2.54;break;case"in":s=72;break;case"px":s=.75;break;case"pc":case"em":s=12;break;case"ex":s=6;break;default:throw"Invalid unit: "+t}var l,c=0,d=0;if(o.hasOwnProperty(i))c=o[i][1]/s,d=o[i][0]/s;else try{c=n[1],d=n[0]}catch(zt){throw new Error("Invalid format: "+n)}if("p"===e||"portrait"===e)e="p",d>c&&(l=d,d=c,c=l);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",c>d&&(l=d,d=c,c=l)}return{width:d,height:c,unit:t,k:s,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(At):null;var n=new o(t);return t.worker?n:n.from(e).doCallback()}}(Me.API),Me.API.addJS=function(e){return Ft=e,this.internal.events.subscribe("postPutResources",(function(){Rt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Rt+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),It=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ft+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==Rt&&void 0!==It&&this.internal.out("/Names <</JavaScript "+Rt+" 0 R>>")})),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=e.outline.render().split(/\r\n/),r=0;r<a.length;r++){var s=a[r],i=n.exec(s);if(null!=i){var o=i[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(r=0;r<l;r++){var d=e.internal.newObject();c.push(d);var u=e.internal.getPageInfo(r+1);e.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),r=0;r<c.length;r++)e.internal.write("(page_"+(r+1)+")"+c[r]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,n){var a={title:t,options:n,children:[]};return null==e&&(e=this.root),e.children.push(a),a},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var n=0;n<t.children.length;n++)this.genIds_r(t.children[n])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<t.children.length;a++){var r=t.children[a];this.objStart(r),this.line("/Title "+this.makeString(r.title)),this.line("/Parent "+this.makeRef(t)),a>0&&this.line("/Prev "+this.makeRef(t.children[a-1])),a<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[a+1])),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1])));var s=this.count=this.count_r({count:0},r);if(s>0&&this.line("/Count "+s),r.options&&r.options.pageNumber){var i=e.internal.getPageInfo(r.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var n=0;n<t.children.length;n++)e.count++,this.count_r(e,t.children[n]);return e.count}}])}(Me.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,n,a,r,s,i){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=s||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(o=function(e){for(var n,a=256*e.charCodeAt(4)+e.charCodeAt(5),r=e.length,s={width:0,height:0,numcomponents:1},i=4;i<r;i+=2){if(i+=a,-1!==t.indexOf(e.charCodeAt(i+1))){n=256*e.charCodeAt(i+5)+e.charCodeAt(i+6),s={width:256*e.charCodeAt(i+7)+e.charCodeAt(i+8),height:n,numcomponents:e.charCodeAt(i+9)};break}a=256*e.charCodeAt(i+2)+e.charCodeAt(i+3)}return s}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:i=this.color_spaces.DEVICE_GRAY;break;case 4:i=this.color_spaces.DEVICE_CMYK;break;case 3:i=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:i,bitsPerComponent:8,filter:l,index:n,alias:a}}return c}}(Me.API);var qt,Ut,Wt,Ht,Vt,Yt=function(){var e,t,n;function a(e){var t,n,a,r,s,i,o,l,c,d,u,h,m,f;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},i=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":i&&this.animation.frames.push(i),this.pos+=4,i={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},s=this.readUInt16(),r=this.readUInt16()||100,i.delay=1e3*s/r,i.disposeOp=this.data[this.pos++],i.blendOp=this.data[this.pos++],i.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=i?i.data:void 0)||this.imgData,h=0;0<=t?h<t:h>t;0<=t?++h:--h)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(a=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>a)throw new Error("More transparent colors than palette size");if((d=a-this.transparency.indexed.length)>0)for(m=0;0<=d?m<d:m>d;0<=d?++m:--m)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":o=(u=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,u.slice(0,o)),this.text[l]=String.fromCharCode.apply(String,u.slice(o+1));break;case"IEND":return i&&this.animation.frames.push(i),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(f=this.colorType)||6===f,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)n.push(this.data[this.pos++]);return n},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*t),a=0,r=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function s(s,i,o,l){var c,d,u,h,m,f,p,g,x,b,v,y,w,j,N,_,S,k,C,A,P,L=Math.ceil((r.width-s)/o),E=Math.ceil((r.height-i)/l),D=r.width==L&&r.height==E;for(j=t*L,y=D?n:new Uint8Array(j*E),f=e.length,w=0,d=0;w<E&&a<f;){switch(e[a++]){case 0:for(h=S=0;S<j;h=S+=1)y[d++]=e[a++];break;case 1:for(h=k=0;k<j;h=k+=1)c=e[a++],m=h<t?0:y[d-t],y[d++]=(c+m)%256;break;case 2:for(h=C=0;C<j;h=C+=1)c=e[a++],u=(h-h%t)/t,N=w&&y[(w-1)*j+u*t+h%t],y[d++]=(N+c)%256;break;case 3:for(h=A=0;A<j;h=A+=1)c=e[a++],u=(h-h%t)/t,m=h<t?0:y[d-t],N=w&&y[(w-1)*j+u*t+h%t],y[d++]=(c+Math.floor((m+N)/2))%256;break;case 4:for(h=P=0;P<j;h=P+=1)c=e[a++],u=(h-h%t)/t,m=h<t?0:y[d-t],0===w?N=_=0:(N=y[(w-1)*j+u*t+h%t],_=u&&y[(w-1)*j+(u-1)*t+h%t]),p=m+N-_,g=Math.abs(p-m),b=Math.abs(p-N),v=Math.abs(p-_),x=g<=b&&g<=v?m:b<=v?N:_,y[d++]=(c+x)%256;break;default:throw new Error("Invalid filter algorithm: "+e[a-1])}if(!D){var M=((i+w*l)*r.width+s)*t,O=w*j;for(h=0;h<L;h+=1){for(var T=0;T<t;T+=1)n[M++]=y[O++];M+=(o-1)*t}}w++}}return e=Q(e),1==r.interlaceMethod?(s(0,0,8,8),s(4,0,8,8),s(0,4,4,8),s(2,0,4,4),s(0,2,2,4),s(1,0,2,2),s(0,1,1,2)):s(0,0,1,1),n},a.prototype.decodePalette=function(){var e,t,n,a,r,s,i,o,l;for(n=this.palette,s=this.transparency.indexed||[],r=new Uint8Array((s.length||0)+n.length),a=0,e=0,t=i=0,o=n.length;i<o;t=i+=3)r[a++]=n[t],r[a++]=n[t+1],r[a++]=n[t+2],r[a++]=null!=(l=s[e++])?l:255;return r},a.prototype.copyToImageData=function(e,t){var n,a,r,s,i,o,l,c,d,u,h;if(a=this.colors,d=null,n=this.hasAlphaChannel,this.palette.length&&(d=null!=(h=this._decodedPalette)?h:this._decodedPalette=this.decodePalette(),a=4,n=!0),c=(r=e.data||e).length,i=d||t,s=o=0,1===a)for(;s<c;)l=d?4*t[s/4]:o,u=i[l++],r[s++]=u,r[s++]=u,r[s++]=u,r[s++]=n?i[l++]:255,o=l;else for(;s<c;)l=d?4*t[s/4]:o,r[s++]=i[l++],r[s++]=i[l++],r[s++]=i[l++],r[s++]=n?i[l++]:255,o=l},a.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var r=function(){if("[object Window]"===Object.prototype.toString.call(ee)){try{t=ee.document.createElement("canvas"),n=t.getContext("2d")}catch(e){return!1}return!0}return!1};return r(),e=function(e){var a;if(!0===r())return n.width=e.width,n.height=e.height,n.clearRect(0,0,e.width,e.height),n.putImageData(e,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(t){var n,a,r,s,i,o,l,c;if(this.animation){for(c=[],a=i=0,o=(l=this.animation.frames).length;i<o;a=++i)n=l[a],r=t.createImageData(n.width,n.height),s=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(r,s),n.imageData=r,c.push(n.image=e(r));return c}},a.prototype.renderFrame=function(e,t){var n,a,r;return n=(a=this.animation.frames)[t],r=a[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=r?r.disposeOp:void 0)?e.clearRect(r.xOffset,r.yOffset,r.width,r.height):2===(null!=r?r.disposeOp:void 0)&&e.putImageData(r.imageData,r.xOffset,r.yOffset),0===n.blendOp&&e.clearRect(n.xOffset,n.yOffset,n.width,n.height),e.drawImage(n.image,n.xOffset,n.yOffset)},a.prototype.animate=function(e){var t,n,a,r,s,i,o=this;return n=0,i=this.animation,r=i.numFrames,a=i.frames,s=i.numPlays,(t=function(){var i,l;if(i=n++%r,l=a[i],o.renderFrame(e,i),r>1&&n/r<s)return o.animation._timeout=setTimeout(t,l.delay)})()},a.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},a.prototype.render=function(e){var t,n;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(n=t.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),t.putImageData(n,0,0))},a}();function Gt(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,r=e[t++],s=r>>7,i=1<<1+(7&r);e[t++],e[t++];var o=null,l=null;s&&(o=t,l=i,t+=3*i);var c=!0,d=[],u=0,h=null,m=0,f=null;for(this.width=n,this.height=a;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,f=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(0===C)break;t+=C}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var p=e[t++];u=e[t++]|e[t++]<<8,h=e[t++],0==(1&p)&&(h=null),m=p>>2&7,t++;break;case 254:for(;;){if(!((C=e[t++])>=0))throw Error("Invalid block size");if(0===C)break;t+=C}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,y=e[t++],w=y>>6&1,j=1<<1+(7&y),N=o,_=l,S=!1;y>>7&&(S=!0,N=t,_=j,t+=3*j);var k=t;for(t++;;){var C;if(!((C=e[t++])>=0))throw Error("Invalid block size");if(0===C)break;t+=C}d.push({x:g,y:x,width:b,height:v,has_local_palette:S,palette_offset:N,palette_size:_,data_offset:k,data_length:t-k,transparent_index:h,interlaced:!!w,delay:u,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return f},this.frameInfo=function(e){if(e<0||e>=d.length)throw new Error("Frame index out of range.");return d[e]},this.decodeAndBlitFrameBGRA=function(t,a){var r=this.frameInfo(t),s=r.width*r.height,i=new Uint8Array(s);$t(e,r.data_offset,i,s);var o=r.palette_offset,l=r.transparent_index;null===l&&(l=256);var c=r.width,d=n-c,u=c,h=4*(r.y*n+r.x),m=4*((r.y+r.height)*n+r.x),f=h,p=4*d;!0===r.interlaced&&(p+=4*n*7);for(var g=8,x=0,b=i.length;x<b;++x){var v=i[x];if(0===u&&(u=c,(f+=p)>=m&&(p=4*d+4*n*(g-1),f=h+(c+d)*(g<<1),g>>=1)),v===l)f+=4;else{var y=e[o+3*v],w=e[o+3*v+1],j=e[o+3*v+2];a[f++]=j,a[f++]=w,a[f++]=y,a[f++]=255}--u}},this.decodeAndBlitFrameRGBA=function(t,a){var r=this.frameInfo(t),s=r.width*r.height,i=new Uint8Array(s);$t(e,r.data_offset,i,s);var o=r.palette_offset,l=r.transparent_index;null===l&&(l=256);var c=r.width,d=n-c,u=c,h=4*(r.y*n+r.x),m=4*((r.y+r.height)*n+r.x),f=h,p=4*d;!0===r.interlaced&&(p+=4*n*7);for(var g=8,x=0,b=i.length;x<b;++x){var v=i[x];if(0===u&&(u=c,(f+=p)>=m&&(p=4*d+4*n*(g-1),f=h+(c+d)*(g<<1),g>>=1)),v===l)f+=4;else{var y=e[o+3*v],w=e[o+3*v+1],j=e[o+3*v+2];a[f++]=y,a[f++]=w,a[f++]=j,a[f++]=255}--u}}}function $t(e,t,n,a){for(var r=e[t++],s=1<<r,i=s+1,o=i+1,l=r+1,c=(1<<l)-1,d=0,u=0,h=0,m=e[t++],f=new Int32Array(4096),p=null;;){for(;d<16&&0!==m;)u|=e[t++]<<d,d+=8,1===m?m=e[t++]:--m;if(d<l)break;var g=u&c;if(u>>=l,d-=l,g!==s){if(g===i)break;for(var x=g<o?g:p,b=0,v=x;v>s;)v=f[v]>>8,++b;var y=v;if(h+b+(x!==g?1:0)>a)return void ne.log("Warning, gif stream longer than expected.");n[h++]=y;var w=h+=b;for(x!==g&&(n[h++]=y),v=x;b--;)v=f[v],n[--w]=255&v,v>>=8;null!==p&&o<4096&&(f[o++]=p<<8|y,o>=c+1&&l<12&&(++l,c=c<<1|1)),p=g}else o=i+1,c=(1<<(l=r+1))-1,p=null}return h!==a&&ne.log("Warning, gif stream shorter than expected."),n}function Xt(e){var t,n,a,r,s,i=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(65535),h=new Array(65535),m=new Array(64),f=new Array(64),p=[],g=0,x=7,b=new Array(64),v=new Array(64),y=new Array(64),w=new Array(256),j=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],k=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],E=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function D(e,t){for(var n=0,a=0,r=new Array,s=1;s<=16;s++){for(var i=1;i<=e[s];i++)r[t[a]]=[],r[t[a]][0]=n,r[t[a]][1]=s,a++,n++;n*=2}return r}function M(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(g|=1<<x),n--,--x<0&&(255==g?(O(255),O(0)):O(g),x=7,g=0)}function O(e){p.push(e)}function T(e){O(e>>8&255),O(255&e)}function R(e,t,n,a,r){for(var s,i=r[0],o=r[240],l=function(e,t){var n,a,r,s,i,o,l,c,d,u,h=0;for(d=0;d<8;++d){n=e[h],a=e[h+1],r=e[h+2],s=e[h+3],i=e[h+4],o=e[h+5],l=e[h+6];var f=n+(c=e[h+7]),p=n-c,g=a+l,x=a-l,b=r+o,v=r-o,y=s+i,w=s-i,j=f+y,N=f-y,_=g+b,S=g-b;e[h]=j+_,e[h+4]=j-_;var k=.707106781*(S+N);e[h+2]=N+k,e[h+6]=N-k;var C=.382683433*((j=w+v)-(S=x+p)),A=.5411961*j+C,P=1.306562965*S+C,L=.707106781*(_=v+x),E=p+L,D=p-L;e[h+5]=D+A,e[h+3]=D-A,e[h+1]=E+P,e[h+7]=E-P,h+=8}for(h=0,d=0;d<8;++d){n=e[h],a=e[h+8],r=e[h+16],s=e[h+24],i=e[h+32],o=e[h+40],l=e[h+48];var M=n+(c=e[h+56]),O=n-c,T=a+l,R=a-l,I=r+o,F=r-o,z=s+i,B=s-i,q=M+z,U=M-z,W=T+I,H=T-I;e[h]=q+W,e[h+32]=q-W;var V=.707106781*(H+U);e[h+16]=U+V,e[h+48]=U-V;var Y=.382683433*((q=B+F)-(H=R+O)),G=.5411961*q+Y,$=1.306562965*H+Y,X=.707106781*(W=F+R),K=O+X,J=O-X;e[h+40]=J+G,e[h+24]=J-G,e[h+8]=K+$,e[h+56]=K-$,h++}for(d=0;d<64;++d)u=e[d]*t[d],m[d]=u>0?u+.5|0:u-.5|0;return m}(e,t),c=0;c<64;++c)f[N[c]]=l[c];var d=f[0]-n;n=f[0],0==d?M(a[0]):(M(a[h[s=32767+d]]),M(u[s]));for(var p=63;p>0&&0==f[p];)p--;if(0==p)return M(i),n;for(var g,x=1;x<=p;){for(var b=x;0==f[x]&&x<=p;)++x;var v=x-b;if(v>=16){g=v>>4;for(var y=1;y<=g;++y)M(o);v&=15}s=32767+f[x],M(r[(v<<4)+h[s]]),M(u[s]),x++}return 63!=p&&M(i),n}function I(e){e=Math.min(Math.max(e,1),100),s!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var a=i((t[n]*e+50)/100);a=Math.min(Math.max(a,1),255),o[N[n]]=a}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var u=i((r[s]*e+50)/100);u=Math.min(Math.max(u,1),255),l[N[s]]=u}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],m=0,f=0;f<8;f++)for(var p=0;p<8;p++)c[m]=1/(o[N[m]]*h[f]*h[p]*8),d[m]=1/(l[N[m]]*h[f]*h[p]*8),m++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),s=e)}this.encode=function(e,s){s&&I(s),p=new Array,g=0,x=7,T(65496),T(65504),T(16),O(74),O(70),O(73),O(70),O(0),O(1),O(1),O(0),T(1),T(1),O(0),O(0),function(){T(65499),T(132),O(0);for(var e=0;e<64;e++)O(o[e]);O(1);for(var t=0;t<64;t++)O(l[t])}(),function(e,t){T(65472),T(17),O(8),T(t),T(e),O(3),O(1),O(17),O(0),O(2),O(17),O(1),O(3),O(17),O(1)}(e.width,e.height),function(){T(65476),T(418),O(0);for(var e=0;e<16;e++)O(_[e+1]);for(var t=0;t<=11;t++)O(S[t]);O(16);for(var n=0;n<16;n++)O(k[n+1]);for(var a=0;a<=161;a++)O(C[a]);O(1);for(var r=0;r<16;r++)O(A[r+1]);for(var s=0;s<=11;s++)O(P[s]);O(17);for(var i=0;i<16;i++)O(L[i+1]);for(var o=0;o<=161;o++)O(E[o])}(),T(65498),T(12),O(3),O(1),O(0),O(2),O(17),O(3),O(17),O(0),O(63),O(0);var i=0,u=0,h=0;g=0,x=7,this.encode.displayName="_encode_";for(var m,f,w,N,D,F,z,B,q,U=e.data,W=e.width,H=e.height,V=4*W,Y=0;Y<H;){for(m=0;m<V;){for(D=V*Y+m,z=-1,B=0,q=0;q<64;q++)F=D+(B=q>>3)*V+(z=4*(7&q)),Y+B>=H&&(F-=V*(Y+1+B-H)),m+z>=V&&(F-=m+z-V+4),f=U[F++],w=U[F++],N=U[F++],b[q]=(j[f]+j[w+256|0]+j[N+512|0]>>16)-128,v[q]=(j[f+768|0]+j[w+1024|0]+j[N+1280|0]>>16)-128,y[q]=(j[f+1280|0]+j[w+1536|0]+j[N+1792|0]>>16)-128;i=R(b,c,i,t,a),u=R(v,d,u,n,r),h=R(y,d,h,n,r),m+=32}Y+=8}if(x>=0){var G=[];G[1]=x+1,G[0]=(1<<x+1)-1,M(G)}return T(65497),new Uint8Array(p)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)w[t]=e(t)}(),t=D(_,S),n=D(A,P),a=D(k,C),r=D(L,E),function(){for(var e=1,t=2,n=1;n<=15;n++){for(var a=e;a<t;a++)h[32767+a]=n,u[32767+a]=[],u[32767+a][1]=n,u[32767+a][0]=a;for(var r=-(t-1);r<=-e;r++)h[32767+r]=n,u[32767+r]=[],u[32767+r][1]=n,u[32767+r][0]=t-1+r;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)j[e]=19595*e,j[e+256|0]=38470*e,j[e+512|0]=7471*e+32768,j[e+768|0]=-11059*e,j[e+1024|0]=-21709*e,j[e+1280|0]=32768*e+8421375,j[e+1536|0]=-27439*e,j[e+1792|0]=-5329*e}(),I(e)}function Kt(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Jt(e){function t(e){if(!e)throw Error("assert :P")}function n(e,t,n){for(var a=0;4>a;a++)if(e[t+a]!=n.charCodeAt(a))return!0;return!1}function a(e,t,n,a,r){for(var s=0;s<r;s++)e[t+s]=n[a+s]}function r(e,t,n,a){for(var r=0;r<a;r++)e[t+r]=n}function s(e){return new Int32Array(e)}function i(e,t){for(var n=[],a=0;a<e;a++)n.push(new t);return n}function o(e,t){var n=[];return function e(n,a,r){for(var s=r[a],i=0;i<s&&(n.push(r.length>a+1?[]:new t),!(r.length<a+1));i++)e(n[i],a+1,r)}(n,0,e),n}var l=function(){var e=this;function l(e,t){for(var n=1<<t-1>>>0;e&n;)n>>>=1;return n?(e&n-1)+n:e}function c(e,n,a,r,s){t(!(r%a));do{e[n+(r-=a)]=s}while(0<r)}function d(e,n,a,r,i){if(t(2328>=i),512>=i)var o=s(512);else if(null==(o=s(i)))return 0;return function(e,n,a,r,i,o){var d,h,m=n,f=1<<a,p=s(16),g=s(16);for(t(0!=i),t(null!=r),t(null!=e),t(0<a),h=0;h<i;++h){if(15<r[h])return 0;++p[r[h]]}if(p[0]==i)return 0;for(g[1]=0,d=1;15>d;++d){if(p[d]>1<<d)return 0;g[d+1]=g[d]+p[d]}for(h=0;h<i;++h)d=r[h],0<r[h]&&(o[g[d]++]=h);if(1==g[15])return(r=new u).g=0,r.value=o[0],c(e,m,1,f,r),f;var x,b=-1,v=f-1,y=0,w=1,j=1,N=1<<a;for(h=0,d=1,i=2;d<=a;++d,i<<=1){if(w+=j<<=1,0>(j-=p[d]))return 0;for(;0<p[d];--p[d])(r=new u).g=d,r.value=o[h++],c(e,m+y,i,N,r),y=l(y,d)}for(d=a+1,i=2;15>=d;++d,i<<=1){if(w+=j<<=1,0>(j-=p[d]))return 0;for(;0<p[d];--p[d]){if(r=new u,(y&v)!=b){for(m+=N,x=1<<(b=d)-a;15>b&&!(0>=(x-=p[b]));)++b,x<<=1;f+=N=1<<(x=b-a),e[n+(b=y&v)].g=x+a,e[n+b].value=m-n-b}r.g=d-a,r.value=o[h++],c(e,m+(y>>a),i,N,r),y=l(y,d)}}return w!=2*g[15]-1?0:f}(e,n,a,r,i,o)}function u(){this.value=this.g=0}function h(){this.value=this.g=0}function m(){this.G=i(5,u),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(zn,h)}function f(e,n,a,r){t(null!=e),t(null!=n),t(2147483648>r),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=n,e.pa=a,e.Jd=n,e.Yc=a+r,e.Zc=4<=r?a+r-4+1:a,k(e)}function p(e,t){for(var n=0;0<t--;)n|=A(e,128)<<t;return n}function g(e,t){var n=p(e,t);return C(e)?-n:n}function x(e,n,a,r){var s,i=0;for(t(null!=e),t(null!=n),t(4294967288>r),e.Sb=r,e.Ra=0,e.u=0,e.h=0,4<r&&(r=4),s=0;s<r;++s)i+=n[a+s]<<8*s;e.Ra=i,e.bb=r,e.oa=n,e.pa=a}function b(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<Un-8>>>0,++e.bb,e.u-=8;N(e)&&(e.h=1,e.u=0)}function v(e,n){if(t(0<=n),!e.h&&n<=qn){var a=j(e)&Bn[n];return e.u+=n,b(e),a}return e.h=1,e.u=0}function y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function w(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(e){return e.Ra>>>(e.u&Un-1)>>>0}function N(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>Un}function _(e,t){e.u=t,e.h=N(e)}function S(e){e.u>=Wn&&(t(e.u>=Wn),b(e))}function k(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function C(e){return p(e,1)}function A(e,t){var n=e.Ca;0>e.b&&k(e);var a=e.b,r=n*t>>>8,s=(e.I>>>a>r)+0;for(s?(n-=r,e.I-=r+1<<a>>>0):n=r+1,a=n,r=0;256<=a;)r+=8,a>>=8;return a=7^r+Hn[a],e.b-=a,e.Ca=(n<<a)-1,s}function P(e,t,n){e[t+0]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n}function L(e,t){return e[t+0]|e[t+1]<<8}function E(e,t){return L(e,t)|e[t+2]<<16}function D(e,t){return L(e,t)|L(e,t+2)<<16}function M(e,n){var a=1<<n;return t(null!=e),t(0<n),e.X=s(a),null==e.X?0:(e.Mb=32-n,e.Xa=n,1)}function O(e,n){t(null!=e),t(null!=n),t(e.Xa==n.Xa),a(n.X,0,e.X,0,1<<n.Xa)}function T(){this.X=[],this.Xa=this.Mb=0}function R(e,n,a,r){t(null!=a),t(null!=r);var s=a[0],i=r[0];return 0==s&&(s=(e*i+n/2)/n),0==i&&(i=(n*s+e/2)/e),0>=s||0>=i?0:(a[0]=s,r[0]=i,1)}function I(e,t){return e+(1<<t)-1>>>t}function F(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function z(t,n){e[n]=function(n,a,r,s,i,o,l){var c;for(c=0;c<i;++c){var d=e[t](o[l+c-1],r,s+c);o[l+c]=F(n[a+c],d)}}}function B(){this.ud=this.hd=this.jd=0}function q(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function U(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function W(e,t){return U(e+(e-t+.5>>1))}function H(e,t,n){return Math.abs(t-n)-Math.abs(e-n)}function V(e,t,n,a,r,s,i){for(a=s[i-1],n=0;n<r;++n)s[i+n]=a=F(e[t+n],a)}function Y(e,t,n,a,r){var s;for(s=0;s<n;++s){var i=e[t+s],o=i>>8&255,l=16711935&(l=(l=16711935&i)+((o<<16)+o));a[r+s]=(4278255360&i)+l>>>0}}function G(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function $(e,t,n,a,r,s){var i;for(i=0;i<a;++i){var o=t[n+i],l=o>>>8,c=o,d=255&(d=(d=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(d<<24>>24)>>>5)),r[s+i]=(4278255360&o)+(d<<16)+c}}function X(t,n,a,r,s){e[n]=function(e,t,n,a,i,o,l,c,d){for(a=l;a<c;++a)for(l=0;l<d;++l)i[o++]=s(n[r(e[t++])])},e[t]=function(t,n,i,o,l,c,d){var u=8>>t.b,h=t.Ea,m=t.K[0],f=t.w;if(8>u)for(t=(1<<t.b)-1,f=(1<<u)-1;n<i;++n){var p,g=0;for(p=0;p<h;++p)p&t||(g=r(o[l++])),c[d++]=s(m[g&f]),g>>=u}else e["VP8LMapColor"+a](o,l,m,f,c,d,n,i,h)}}function K(e,t,n,a,r){for(n=t+n;t<n;){var s=e[t++];a[r++]=s>>16&255,a[r++]=s>>8&255,a[r++]=255&s}}function J(e,t,n,a,r){for(n=t+n;t<n;){var s=e[t++];a[r++]=s>>16&255,a[r++]=s>>8&255,a[r++]=255&s,a[r++]=s>>24&255}}function Q(e,t,n,a,r){for(n=t+n;t<n;){var s=(i=e[t++])>>16&240|i>>12&15,i=240&i|i>>28&15;a[r++]=s,a[r++]=i}}function Z(e,t,n,a,r){for(n=t+n;t<n;){var s=(i=e[t++])>>16&248|i>>13&7,i=i>>5&224|i>>3&31;a[r++]=s,a[r++]=i}}function ee(e,t,n,a,r){for(n=t+n;t<n;){var s=e[t++];a[r++]=255&s,a[r++]=s>>8&255,a[r++]=s>>16&255}}function te(e,t,n,r,s,i){if(0==i)for(n=t+n;t<n;)P(r,((i=e[t++])[0]>>24|i[1]>>8&65280|i[2]<<8&16711680|i[3]<<24)>>>0),s+=32;else a(r,s,e,t,n)}function ne(t,n){e[n][0]=e[t+"0"],e[n][1]=e[t+"1"],e[n][2]=e[t+"2"],e[n][3]=e[t+"3"],e[n][4]=e[t+"4"],e[n][5]=e[t+"5"],e[n][6]=e[t+"6"],e[n][7]=e[t+"7"],e[n][8]=e[t+"8"],e[n][9]=e[t+"9"],e[n][10]=e[t+"10"],e[n][11]=e[t+"11"],e[n][12]=e[t+"12"],e[n][13]=e[t+"13"],e[n][14]=e[t+"0"],e[n][15]=e[t+"0"]}function ae(e){return e==Wa||e==Ha||e==Va||e==Ya}function re(){this.eb=[],this.size=this.A=this.fb=0}function se(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ie(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new re,this.f.kb=new se,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function de(e,t){var n=e.T,r=t.ba.f.RGBA,s=r.eb,i=r.fb+e.ka*r.A,o=xr[t.ba.S],l=e.y,c=e.O,d=e.f,u=e.N,h=e.ea,m=e.W,f=t.cc,p=t.dc,g=t.Mc,x=t.Nc,b=e.ka,v=e.ka+e.T,y=e.U,w=y+1>>1;for(0==b?o(l,c,null,null,d,u,h,m,d,u,h,m,s,i,null,null,y):(o(t.ec,t.fc,l,c,f,p,g,x,d,u,h,m,s,i-r.A,s,i,y),++n);b+2<v;b+=2)f=d,p=u,g=h,x=m,u+=e.Rc,m+=e.Rc,i+=2*r.A,o(l,(c+=2*e.fa)-e.fa,l,c,f,p,g,x,d,u,h,m,s,i-r.A,s,i,y);return c+=e.fa,e.j+v<e.o?(a(t.ec,t.fc,l,c,y),a(t.cc,t.dc,d,u,w),a(t.Mc,t.Nc,h,m,w),n--):1&v||o(l,c,null,null,d,u,h,m,d,u,h,m,s,i+r.A,null,null,y),n}function ue(e,n,a){var r=e.F,s=[e.J];if(null!=r){var i=e.U,o=n.ba.S,l=o==Ba||o==Va;n=n.ba.f.RGBA;var c=[0],d=e.ka;c[0]=e.T,e.Kb&&(0==d?--c[0]:(--d,s[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-d));var u=n.eb;d=n.fb+d*n.A,e=Sa(r,s[0],e.width,i,c,u,d+(l?0:3),n.A),t(a==c),e&&ae(o)&&Na(u,d,l,i,c,n.A)}return 0}function he(e){var t=e.ma,n=t.ba.S,a=11>n,r=n==Ia||n==za||n==Ba||n==qa||12==n||ae(n);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Rn(t.Oa,e,r?11:12))return 0;if(r&&ae(n)&&vn(),e.da)alert("todo:use_scaling");else{if(a){if(t.Ib=ce,e.Kb){if(n=e.U+1>>1,t.memory=s(e.U+2*n),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+n,t.Ib=de,vn()}}else alert("todo:EmitYUV");r&&(t.Jb=ue,a&&xn())}if(a&&!Er){for(e=0;256>e;++e)Dr[e]=89858*(e-128)+kr>>Sr,Tr[e]=-22014*(e-128)+kr,Or[e]=-45773*(e-128),Mr[e]=113618*(e-128)+kr>>Sr;for(e=Cr;e<Ar;++e)t=76283*(e-16)+kr>>Sr,Rr[e-Cr]=Ve(t,255),Ir[e-Cr]=Ve(t+8>>4,15);Er=1}return 1}function me(e){var n=e.ma,a=e.U,r=e.T;return t(!(1&e.ka)),0>=a||0>=r?0:(a=n.Ib(e,n),null!=n.Jb&&n.Jb(e,n,a),n.Dc+=a,1)}function fe(e){e.ma.memory=null}function pe(e,t,n,a){return 47!=v(e,8)?0:(t[0]=v(e,14)+1,n[0]=v(e,14)+1,a[0]=v(e,1),0!=v(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var n=e-2>>1;return(2+(1&e)<<n)+v(t,n)+1}function xe(e,t){return 120<t?t-120:1<=(n=((n=Qa[t-1])>>4)*e+(8-(15&n)))?n:1;var n}function be(e,t,n){var a=j(n),r=e[t+=255&a].g-8;return 0<r&&(_(n,n.u+8),a=j(n),t+=e[t].value,t+=a&(1<<r)-1),_(n,n.u+e[t].g),e[t].value}function ve(e,n,a){return a.g+=e.g,a.value+=e.value<<n>>>0,t(8>=a.g),e.g}function ye(e,n,a){var r=e.xc;return t((n=0==r?0:e.vc[e.md*(a>>r)+(n>>r)])<e.Wb),e.Ya[n]}function we(e,n,r,s){var i=e.ab,o=e.c*n,l=e.C;n=l+n;var c=r,d=s;for(s=e.Ta,r=e.Ua;0<i--;){var u=e.gc[i],h=l,m=n,f=c,p=d,g=(d=s,c=r,u.Ea);switch(t(h<m),t(m<=u.nc),u.hc){case 2:Gn(f,p,(m-h)*g,d,c);break;case 0:var x=h,b=m,v=d,y=c,w=(k=u).Ea;0==x&&(Vn(f,p,null,null,1,v,y),V(f,p+1,0,0,w-1,v,y+1),p+=w,y+=w,++x);for(var j=1<<k.b,N=j-1,_=I(w,k.b),S=k.K,k=k.w+(x>>k.b)*_;x<b;){var C=S,A=k,P=1;for(Yn(f,p,v,y-w,1,v,y);P<w;){var L=(P&~N)+j;L>w&&(L=w),(0,Qn[C[A++]>>8&15])(f,p+ +P,v,y+P-w,L-P,v,y+P),P=L}p+=w,y+=w,++x&N||(k+=_)}m!=u.nc&&a(d,c-g,d,c+(m-h-1)*g,g);break;case 1:for(g=f,b=p,w=(f=u.Ea)-(y=f&~(v=(p=1<<u.b)-1)),x=I(f,u.b),j=u.K,u=u.w+(h>>u.b)*x;h<m;){for(N=j,_=u,S=new B,k=b+y,C=b+f;b<k;)G(N[_++],S),Zn(S,g,b,p,d,c),b+=p,c+=p;b<C&&(G(N[_++],S),Zn(S,g,b,w,d,c),b+=w,c+=w),++h&v||(u+=x)}break;case 3:if(f==d&&p==c&&0<u.b){for(b=d,f=g=c+(m-h)*g-(y=(m-h)*I(u.Ea,u.b)),p=d,v=c,x=[],y=(w=y)-1;0<=y;--y)x[y]=p[v+y];for(y=w-1;0<=y;--y)b[f+y]=x[y];$n(u,h,m,d,g,d,c)}else $n(u,h,m,f,p,d,c)}c=s,d=r}d!=r&&a(s,r,c,d,o)}function je(e,n){var a=e.V,r=e.Ba+e.c*e.C,s=n-e.C;if(t(n<=e.l.o),t(16>=s),0<s){var i=e.l,o=e.Ta,l=e.Ua,c=i.width;if(we(e,s,a,r),s=l=[l],t((a=e.C)<(r=n)),t(i.v<i.va),r>i.o&&(r=i.o),a<i.j){var d=i.j-a;a=i.j,s[0]+=d*c}if(a>=r?a=0:(s[0]+=4*i.v,i.ka=a-i.j,i.U=i.va-i.v,i.T=r-a,a=1),a){if(l=l[0],11>(a=e.ca).S){var u=a.f.RGBA,h=(r=a.S,s=i.U,i=i.T,d=u.eb,u.A),m=i;for(u=u.fb+e.Ma*u.A;0<m--;){var f=o,p=l,g=s,x=d,b=u;switch(r){case Ra:ea(f,p,g,x,b);break;case Ia:ta(f,p,g,x,b);break;case Wa:ta(f,p,g,x,b),Na(x,b,0,g,1,0);break;case Fa:ra(f,p,g,x,b);break;case za:te(f,p,g,x,b,1);break;case Ha:te(f,p,g,x,b,1),Na(x,b,0,g,1,0);break;case Ba:te(f,p,g,x,b,0);break;case Va:te(f,p,g,x,b,0),Na(x,b,1,g,1,0);break;case qa:na(f,p,g,x,b);break;case Ya:na(f,p,g,x,b),_a(x,b,g,1,0);break;case Ua:aa(f,p,g,x,b);break;default:t(0)}l+=c,u+=h}e.Ma+=i}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=a.height)}}e.C=n,t(e.C<=e.i)}function Ne(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var n=e.Ya[t].G,a=e.Ya[t].H;if(0<n[1][a[1]+0].g||0<n[2][a[2]+0].g||0<n[3][a[3]+0].g)return 0}return 1}function _e(e,n,a,r,s,i){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=gr[e.Z]);n<a;++n)gr[e.Z](o,l,r,s,r,s,i),o=r,l=s,s+=i;e.qd=o,e.rd=l}}function Se(e,n){var a=e.l.ma,r=0==a.Z||1==a.Z?e.l.j:e.C;if(r=e.C<r?r:e.C,t(n<=e.l.o),n>r){var s=e.l.width,i=a.ca,o=a.tb+s*r,l=e.V,c=e.Ba+e.c*r,d=e.gc;t(1==e.ab),t(3==d[0].hc),Kn(d[0],r,n,l,c,i,o),_e(a,r,n,i,o,s)}e.C=e.Ma=n}function ke(e,n,a,r,s,i,o){var l=e.$/r,c=e.$%r,d=e.m,u=e.s,h=a+e.$,m=h;s=a+r*s;var f=a+r*i,p=280+u.ua,g=e.Pb?l:16777216,x=0<u.ua?u.Wa:null,b=u.wc,v=h<f?ye(u,c,l):null;t(e.C<i),t(f<=s);var y=!1;e:for(;;){for(;y||h<f;){var w=0;if(l>=g){var k=h-a;t((g=e).Pb),g.wd=g.m,g.xd=k,0<g.s.ua&&O(g.s.Wa,g.s.vb),g=l+er}if(c&b||(v=ye(u,c,l)),t(null!=v),v.Qb&&(n[h]=v.qb,y=!0),!y)if(S(d),v.jc){w=d,k=n;var C=h,A=v.pd[j(w)&zn-1];t(v.jc),256>A.g?(_(w,w.u+A.g),k[C]=A.value,w=0):(_(w,w.u+A.g-256),t(256<=A.value),w=A.value),0==w&&(y=!0)}else w=be(v.G[0],v.H[0],d);if(d.h)break;if(y||256>w){if(!y)if(v.nd)n[h]=(v.qb|w<<8)>>>0;else{if(S(d),y=be(v.G[1],v.H[1],d),S(d),k=be(v.G[2],v.H[2],d),C=be(v.G[3],v.H[3],d),d.h)break;n[h]=(C<<24|y<<16|w<<8|k)>>>0}if(y=!1,++h,++c>=r&&(c=0,++l,null!=o&&l<=i&&!(l%16)&&o(e,l),null!=x))for(;m<h;)w=n[m++],x.X[(506832829*w&4294967295)>>>x.Mb]=w}else if(280>w){if(w=ge(w-256,d),k=be(v.G[4],v.H[4],d),S(d),k=xe(r,k=ge(k,d)),d.h)break;if(h-a<k||s-h<w)break e;for(C=0;C<w;++C)n[h+C]=n[h+C-k];for(h+=w,c+=w;c>=r;)c-=r,++l,null!=o&&l<=i&&!(l%16)&&o(e,l);if(t(h<=s),c&b&&(v=ye(u,c,l)),null!=x)for(;m<h;)w=n[m++],x.X[(506832829*w&4294967295)>>>x.Mb]=w}else{if(!(w<p))break e;for(y=w-280,t(null!=x);m<h;)w=n[m++],x.X[(506832829*w&4294967295)>>>x.Mb]=w;w=h,t(!(y>>>(k=x).Xa)),n[w]=k.X[y],y=!0}y||t(d.h==N(d))}if(e.Pb&&d.h&&h<s)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&O(e.s.vb,e.s.Wa);else{if(d.h)break e;null!=o&&o(e,l>i?i:l),e.a=0,e.$=h-a}return 1}return e.a=3,0}function Ce(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var n=e.Wa;null!=n&&(n.X=null),e.vb=null,t(null!=e)}function Ae(){var t=new on;return null==t?null:(t.a=0,t.xb=pr,ne("Predictor","VP8LPredictors"),ne("Predictor","VP8LPredictors_C"),ne("PredictorAdd","VP8LPredictorsAdd"),ne("PredictorAdd","VP8LPredictorsAdd_C"),Gn=Y,Zn=$,ea=K,ta=J,na=Q,aa=Z,ra=ee,e.VP8LMapColor32b=Xn,e.VP8LMapColor8b=Jn,t)}function Pe(e,n,a,o,l){var c=1,h=[e],f=[n],p=o.m,g=o.s,x=null,b=0;e:for(;;){if(a)for(;c&&v(p,1);){var y=h,w=f,N=o,k=1,C=N.m,A=N.gc[N.ab],P=v(C,2);if(N.Oc&1<<P)c=0;else{switch(N.Oc|=1<<P,A.hc=P,A.Ea=y[0],A.nc=w[0],A.K=[null],++N.ab,t(4>=N.ab),P){case 0:case 1:A.b=v(C,3)+2,k=Pe(I(A.Ea,A.b),I(A.nc,A.b),0,N,A.K),A.K=A.K[0];break;case 3:var L,E=v(C,8)+1,D=16<E?0:4<E?1:2<E?2:3;if(y[0]=I(A.Ea,D),A.b=D,L=k=Pe(E,1,0,N,A.K)){var O,T=E,R=A,z=1<<(8>>R.b),B=s(z);if(null==B)L=0;else{var q=R.K[0],U=R.w;for(B[0]=R.K[0][0],O=1;O<1*T;++O)B[O]=F(q[U+O],B[O-1]);for(;O<4*z;++O)B[O]=0;R.K[0]=null,R.K[0]=B,L=1}}k=L;break;case 2:break;default:t(0)}c=k}}if(h=h[0],f=f[0],c&&v(p,1)&&!(c=1<=(b=v(p,4))&&11>=b)){o.a=3;break e}var W;if(W=c)t:{var H,V,Y,G=o,$=h,X=f,K=b,J=a,Q=G.m,Z=G.s,ee=[null],te=1,ne=0,ae=Za[K];n:for(;;){if(J&&v(Q,1)){var re=v(Q,3)+2,se=I($,re),ie=I(X,re),oe=se*ie;if(!Pe(se,ie,0,G,ee))break n;for(ee=ee[0],Z.xc=re,H=0;H<oe;++H){var le=ee[H]>>8&65535;ee[H]=le,le>=te&&(te=le+1)}}if(Q.h)break n;for(V=0;5>V;++V){var ce=Xa[V];!V&&0<K&&(ce+=1<<K),ne<ce&&(ne=ce)}var de=i(te*ae,u),ue=te,he=i(ue,m);if(null==he)var me=null;else t(65536>=ue),me=he;var fe=s(ne);if(null==me||null==fe||null==de){G.a=1;break n}var pe=de;for(H=Y=0;H<te;++H){var ge=me[H],xe=ge.G,be=ge.H,ye=0,we=1,je=0;for(V=0;5>V;++V){ce=Xa[V],xe[V]=pe,be[V]=Y,!V&&0<K&&(ce+=1<<K);a:{var Ne,_e=ce,Se=G,Ae=fe,Le=pe,Ee=Y,De=0,Me=Se.m,Oe=v(Me,1);if(r(Ae,0,0,_e),Oe){var Te=v(Me,1)+1,Re=v(Me,1),Ie=v(Me,0==Re?1:8);Ae[Ie]=1,2==Te&&(Ae[Ie=v(Me,8)]=1);var Fe=1}else{var ze=s(19),Be=v(Me,4)+4;if(19<Be){Se.a=3;var qe=0;break a}for(Ne=0;Ne<Be;++Ne)ze[Ja[Ne]]=v(Me,3);var Ue=void 0,We=void 0,He=Se,Ve=ze,Ye=_e,Ge=Ae,$e=0,Xe=He.m,Ke=8,Je=i(128,u);r:for(;d(Je,0,7,Ve,19);){if(v(Xe,1)){var Qe=2+2*v(Xe,3);if((Ue=2+v(Xe,Qe))>Ye)break r}else Ue=Ye;for(We=0;We<Ye&&Ue--;){S(Xe);var Ze=Je[0+(127&j(Xe))];_(Xe,Xe.u+Ze.g);var et=Ze.value;if(16>et)Ge[We++]=et,0!=et&&(Ke=et);else{var tt=16==et,nt=et-16,at=$a[nt],rt=v(Xe,Ga[nt])+at;if(We+rt>Ye)break r;for(var st=tt?Ke:0;0<rt--;)Ge[We++]=st}}$e=1;break r}$e||(He.a=3),Fe=$e}(Fe=Fe&&!Me.h)&&(De=d(Le,Ee,8,Ae,_e)),Fe&&0!=De?qe=De:(Se.a=3,qe=0)}if(0==qe)break n;if(we&&1==Ka[V]&&(we=0==pe[Y].g),ye+=pe[Y].g,Y+=qe,3>=V){var it,ot=fe[0];for(it=1;it<ce;++it)fe[it]>ot&&(ot=fe[it]);je+=ot}}if(ge.nd=we,ge.Qb=0,we&&(ge.qb=(xe[3][be[3]+0].value<<24|xe[1][be[1]+0].value<<16|xe[2][be[2]+0].value)>>>0,0==ye&&256>xe[0][be[0]+0].value&&(ge.Qb=1,ge.qb+=xe[0][be[0]+0].value<<8)),ge.jc=!ge.Qb&&6>je,ge.jc){var lt,ct=ge;for(lt=0;lt<zn;++lt){var dt=lt,ut=ct.pd[dt],ht=ct.G[0][ct.H[0]+dt];256<=ht.value?(ut.g=ht.g+256,ut.value=ht.value):(ut.g=0,ut.value=0,dt>>=ve(ht,8,ut),dt>>=ve(ct.G[1][ct.H[1]+dt],16,ut),dt>>=ve(ct.G[2][ct.H[2]+dt],0,ut),ve(ct.G[3][ct.H[3]+dt],24,ut))}}}Z.vc=ee,Z.Wb=te,Z.Ya=me,Z.yc=de,W=1;break t}W=0}if(!(c=W)){o.a=3;break e}if(0<b){if(g.ua=1<<b,!M(g.Wa,b)){o.a=1,c=0;break e}}else g.ua=0;var mt=o,ft=h,pt=f,gt=mt.s,xt=gt.xc;if(mt.c=ft,mt.i=pt,gt.md=I(ft,xt),gt.wc=0==xt?-1:(1<<xt)-1,a){o.xb=fr;break e}if(null==(x=s(h*f))){o.a=1,c=0;break e}c=(c=ke(o,x,0,h,f,f,null))&&!p.h;break e}return c?(null!=l?l[0]=x:(t(null==x),t(a)),o.$=0,a||Ce(g)):Ce(g),c}function Le(e,n){var a=e.c*e.i,r=a+n+16*n;return t(e.c<=n),e.V=s(r),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+a+n,1)}function Ee(e,n){var a=e.C,r=n-a,s=e.V,i=e.Ba+e.c*a;for(t(n<=e.l.o);0<r;){var o=16<r?16:r,l=e.l.ma,c=e.l.width,d=c*o,u=l.ca,h=l.tb+c*a,m=e.Ta,f=e.Ua;we(e,o,s,i),ka(m,f,u,h,d),_e(l,a,a+o,u,h,c),r-=o,s+=o*e.c,a+=o}t(a==n),e.C=e.Ma=n}function De(){this.ub=this.yd=this.td=this.Rb=0}function Me(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Oe(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Te(){this.Yb=function(){var e=[];return function e(t,n,a){for(var r=a[n],s=0;s<r&&(t.push(a.length>n+1?[]:0),!(a.length<n+1));s++)e(t[s],n+1,a)}(e,0,[3,11]),e}()}function Re(){this.jb=s(3),this.Wc=o([4,8],Te),this.Xc=o([4,17],Te)}function Ie(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Fe(){this.ld=this.La=this.dd=this.tc=0}function ze(){this.Na=this.la=0}function Be(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function qe(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ue(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fe),this.Y=0,this.ya=Array(new qe),this.aa=0,this.l=new Ye}function We(){this.y=s(16),this.f=s(8),this.ea=s(8)}function He(){this.cb=this.a=0,this.sc="",this.m=new y,this.Od=new De,this.Kc=new Me,this.ed=new Ie,this.Qa=new Oe,this.Ic=this.$c=this.Aa=0,this.D=new Ue,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,y),this.ia=0,this.pb=i(4,Be),this.Pa=new Re,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new We),this.Hd=0,this.rb=Array(new ze),this.sb=0,this.wa=Array(new Fe),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new qe),this.L=this.aa=0,this.gd=o([4,2],Fe),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ve(e,t){return 0>e?0:e>t?t:e}function Ye(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ge(){var e=new He;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,ar||(ar=Je)),e}function $e(e,t,n){return 0==e.a&&(e.a=t,e.sc=n,e.cb=0),0}function Xe(e,t,n){return 3<=n&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Ke(e,n){if(null==e)return 0;if(e.a=0,e.sc="OK",null==n)return $e(e,2,"null VP8Io passed to VP8GetHeaders()");var a=n.data,s=n.w,i=n.ha;if(4>i)return $e(e,7,"Truncated header.");var o=a[s+0]|a[s+1]<<8|a[s+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return $e(e,3,"Incorrect keyframe parameters.");if(!l.yd)return $e(e,4,"Frame not displayable.");s+=3,i-=3;var c=e.Kc;if(l.Rb){if(7>i)return $e(e,7,"cannot parse picture header");if(!Xe(a,s,i))return $e(e,3,"Bad code word");c.c=16383&(a[s+4]<<8|a[s+3]),c.Td=a[s+4]>>6,c.i=16383&(a[s+6]<<8|a[s+5]),c.Ud=a[s+6]>>6,s+=7,i-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,r((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,r(o.Zb,0,0,o.Zb.length),r(o.Lb,0,0,o.Lb)}if(l.ub>i)return $e(e,7,"bad partition length");f(o=e.m,a,s,l.ub),s+=l.ub,i-=l.ub,l.Rb&&(c.Ld=C(o),c.Kd=C(o)),c=e.Qa;var d,u=e.Pa;if(t(null!=o),t(null!=c),c.Cb=C(o),c.Cb){if(c.Bb=C(o),C(o)){for(c.Fb=C(o),d=0;4>d;++d)c.Zb[d]=C(o)?g(o,7):0;for(d=0;4>d;++d)c.Lb[d]=C(o)?g(o,6):0}if(c.Bb)for(d=0;3>d;++d)u.jb[d]=C(o)?p(o,8):255}else c.Bb=0;if(o.Ka)return $e(e,3,"cannot parse segment header");if((c=e.ed).zd=C(o),c.Tb=p(o,6),c.wb=p(o,3),c.Pc=C(o),c.Pc&&C(o)){for(u=0;4>u;++u)C(o)&&(c.vd[u]=g(o,6));for(u=0;4>u;++u)C(o)&&(c.od[u]=g(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return $e(e,3,"cannot parse filter header");var h=i;if(i=d=s,s=d+h,c=h,e.Xb=(1<<p(e.m,2))-1,h<3*(u=e.Xb))a=7;else{for(d+=3*u,c-=3*u,h=0;h<u;++h){var m=a[i+0]|a[i+1]<<8|a[i+2]<<16;m>c&&(m=c),f(e.Jc[+h],a,d,m),d+=m,c-=m,i+=3}f(e.Jc[+u],a,d,c),a=d<s?0:5}if(0!=a)return $e(e,a,"cannot parse partitions");for(a=p(d=e.m,7),i=C(d)?g(d,4):0,s=C(d)?g(d,4):0,c=C(d)?g(d,4):0,u=C(d)?g(d,4):0,d=C(d)?g(d,4):0,h=e.Qa,m=0;4>m;++m){if(h.Cb){var x=h.Zb[m];h.Fb||(x+=a)}else{if(0<m){e.pb[m]=e.pb[0];continue}x=a}var b=e.pb[m];b.Sc[0]=tr[Ve(x+i,127)],b.Sc[1]=nr[Ve(x+0,127)],b.Eb[0]=2*tr[Ve(x+s,127)],b.Eb[1]=101581*nr[Ve(x+c,127)]>>16,8>b.Eb[1]&&(b.Eb[1]=8),b.Qc[0]=tr[Ve(x+u,117)],b.Qc[1]=nr[Ve(x+d,127)],b.lc=x+d}if(!l.Rb)return $e(e,4,"Not a key frame.");for(C(o),l=e.Pa,a=0;4>a;++a){for(i=0;8>i;++i)for(s=0;3>s;++s)for(c=0;11>c;++c)u=A(o,cr[a][i][s][c])?p(o,8):or[a][i][s][c],l.Wc[a][i].Yb[s][c]=u;for(i=0;17>i;++i)l.Xc[a][i]=l.Wc[a][dr[i]]}return e.kc=C(o),e.kc&&(e.Bd=p(o,8)),e.cb=1}function Je(e,t,n,a,r,s,i){var o=t[r].Yb[n];for(n=0;16>r;++r){if(!A(e,o[n+0]))return r;for(;!A(e,o[n+1]);)if(o=t[++r].Yb[0],n=0,16==r)return 16;var l=t[r+1].Yb;if(A(e,o[n+2])){var c=e,d=0;if(A(c,(h=o)[(u=n)+3]))if(A(c,h[u+6])){for(o=0,u=2*(d=A(c,h[u+8]))+(h=A(c,h[u+9+d])),d=0,h=rr[u];h[o];++o)d+=d+A(c,h[o]);d+=3+(8<<u)}else A(c,h[u+7])?(d=7+2*A(c,165),d+=A(c,145)):d=5+A(c,159);else d=A(c,h[u+4])?3+A(c,h[u+5]):2;o=l[2]}else d=1,o=l[1];l=i+sr[r],0>(c=e).b&&k(c);var u,h=c.b,m=(u=c.Ca>>1)-(c.I>>h)>>31;--c.b,c.Ca+=m,c.Ca|=1,c.I-=(u+1&m)<<h,s[l]=((d^m)-m)*a[(0<r)+0]}return 16}function Qe(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,r(e.zc,0,0,e.zc.length),e.ja=0}function Ze(e,n){if(null==e)return 0;if(null==n)return $e(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Ke(e,n))return 0;if(t(e.cb),null==n.ac||n.ac(n)){n.ob&&(e.L=0);var o=zr[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=n.v-o>>4,e.zb=n.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=n.o+15+o>>4,e.Hb=n.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var d=e.Qa.Lb[o];e.Qa.Fb||(d+=l.Tb)}else d=l.Tb;for(c=0;1>=c;++c){var u=e.gd[o][c],h=d;if(l.Pc&&(h+=l.vd[0],c&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var m=h;0<l.wb&&(m=4<l.wb?m>>2:m>>1)>9-l.wb&&(m=9-l.wb),1>m&&(m=1),u.dd=m,u.tc=2*h+m,u.ld=40<=h?2:15<=h?1:0}else u.tc=0;u.La=c}}}o=0}else $e(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=qr);e:{o=e.Ic,l=4*(m=e.za);var f=32*m,p=m+1,g=0<e.L?m*(0<e.Aa?2:1):0,x=(2==e.Aa?2:1)*m;if((u=l+832+(c=3*(16*o+zr[e.L])/2*f)+(d=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=u)o=0;else{if(u>e.Vb){if(e.Vb=0,e.Ec=s(u),e.Fc=0,null==e.Ec){o=$e(e,1,"no memory during frame initialization.");break e}e.Vb=u}u=e.Ec,h=e.Fc,e.Ac=u,e.Bc=h,h+=l,e.Gd=i(f,We),e.Hd=0,e.rb=i(p+1,ze),e.sb=1,e.wa=g?i(g,Fe):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=m),t(!0),e.oc=u,e.pc=h,h+=832,e.ya=i(x,qe),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=m),e.R=16*m,e.B=8*m,m=(f=zr[e.L])*e.R,f=f/2*e.B,e.sa=u,e.ta=h+m,e.qa=e.sa,e.ra=e.ta+16*o*e.R+f,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+f,e.$c=0,h+=c,e.mb=d?u:null,e.nb=d?h:null,t(h+d<=e.Fc+e.Vb),Qe(e),r(e.Ac,e.Bc,0,l),o=1}}if(o){if(n.ka=0,n.y=e.sa,n.O=e.ta,n.f=e.qa,n.N=e.ra,n.ea=e.Ha,n.Vd=e.Ia,n.fa=e.R,n.Rc=e.B,n.F=null,n.J=0,!Ea){for(o=-255;255>=o;++o)Ca[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)Aa[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)Pa[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)La[255+o]=0>o?0:255<o?255:o;Ea=1}sa=ct,ia=st,la=it,ca=ot,da=lt,oa=rt,ua=$t,ha=Xt,ma=Qt,fa=Zt,pa=Kt,ga=Jt,xa=en,ba=tn,va=Ut,ya=Wt,wa=Ht,ja=Vt,hr[0]=_t,hr[1]=ut,hr[2]=jt,hr[3]=Nt,hr[4]=St,hr[5]=Ct,hr[6]=kt,hr[7]=At,hr[8]=Lt,hr[9]=Pt,ur[0]=xt,ur[1]=mt,ur[2]=ft,ur[3]=pt,ur[4]=bt,ur[5]=vt,ur[6]=yt,mr[0]=Ot,mr[1]=ht,mr[2]=Et,mr[3]=Dt,mr[4]=Rt,mr[5]=Tt,mr[6]=It,o=1}else o=0}o&&(o=function(e,n){for(e.M=0;e.M<e.Va;++e.M){var i,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(i=0;i<c.za;++i){var d=l,u=c,h=u.Ac,m=u.Bc+4*i,f=u.zc,p=u.ya[u.aa+i];if(u.Qa.Bb?p.$b=A(d,u.Pa.jb[0])?2+A(d,u.Pa.jb[2]):A(d,u.Pa.jb[1]):p.$b=0,u.kc&&(p.Ad=A(d,u.Bd)),p.Za=!A(d,145)+0,p.Za){var g=p.Ob,x=0;for(u=0;4>u;++u){var b,v=f[0+u];for(b=0;4>b;++b){v=lr[h[m+b]][v];for(var y=ir[A(d,v[0])];0<y;)y=ir[2*y+A(d,v[y])];v=-y,h[m+b]=v}a(g,x,h,m,4),x+=4,f[0+u]=v}}else v=A(d,156)?A(d,128)?1:3:A(d,163)?2:0,p.Ob[0]=v,r(h,m,v,4),r(f,0,v,4);p.Dd=A(d,142)?A(d,114)?A(d,183)?1:3:2:0}if(c.m.Ka)return $e(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,d=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],i=l.ya[l.aa+l.ja],m=l.kc?i.Ad:0)d.la=h.la=0,i.Za||(d.Na=h.Na=0),i.Hc=0,i.Gc=0,i.ia=0;else{var w,j;if(d=h,h=c,m=l.Pa.Xc,f=l.ya[l.aa+l.ja],p=l.pb[f.$b],u=f.ad,g=0,x=l.rb[l.sb-1],v=b=0,r(u,g,0,384),f.Za)var N=0,_=m[3];else{y=s(16);var S=d.Na+x.Na;if(S=ar(h,m[1],S,p.Eb,0,y,0),d.Na=x.Na=(0<S)+0,1<S)sa(y,0,u,g);else{var k=y[0]+3>>3;for(y=0;256>y;y+=16)u[g+y]=k}N=1,_=m[0]}var C=15&d.la,P=15&x.la;for(y=0;4>y;++y){var L=1&P;for(k=j=0;4>k;++k)C=C>>1|(L=(S=ar(h,_,S=L+(1&C),p.Sc,N,u,g))>N)<<7,j=j<<2|(3<S?3:1<S?2:0!=u[g+0]),g+=16;C>>=4,P=P>>1|L<<7,b=(b<<8|j)>>>0}for(_=C,N=P>>4,w=0;4>w;w+=2){for(j=0,C=d.la>>4+w,P=x.la>>4+w,y=0;2>y;++y){for(L=1&P,k=0;2>k;++k)S=L+(1&C),C=C>>1|(L=0<(S=ar(h,m[2],S,p.Qc,0,u,g)))<<3,j=j<<2|(3<S?3:1<S?2:0!=u[g+0]),g+=16;C>>=2,P=P>>1|L<<5}v|=j<<4*w,_|=C<<4<<w,N|=(240&P)<<w}d.la=_,x.la=N,f.Hc=b,f.Gc=v,f.ia=43690&v?0:p.ia,m=!(b|v)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[i.$b][i.Za],l.wa[l.Y+l.ja].La|=!m),c.Ka)return $e(e,7,"Premature end-of-file encountered.")}if(Qe(e),l=n,c=1,i=(o=e).D,d=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)e:{if(i.M=o.M,i.uc=d,On(o,i),c=1,i=(j=o.D).Nb,d=(v=zr[o.L])*o.R,h=v/2*o.B,y=16*i*o.R,k=8*i*o.B,m=o.sa,f=o.ta-d+y,p=o.qa,u=o.ra-h+k,g=o.Ha,x=o.Ia-h+k,P=0==(C=j.M),b=C>=o.Va-1,2==o.Aa&&On(o,j),j.uc)for(L=(S=o).D.M,t(S.D.uc),j=S.yb;j<S.Hb;++j){N=j,_=L;var E=(D=(q=S).D).Nb;w=q.R;var D=D.wa[D.Y+N],M=q.sa,O=q.ta+16*E*w+16*N,T=D.dd,R=D.tc;if(0!=R)if(t(3<=R),1==q.L)0<N&&ya(M,O,w,R+4),D.La&&ja(M,O,w,R),0<_&&va(M,O,w,R+4),D.La&&wa(M,O,w,R);else{var I=q.B,F=q.qa,z=q.ra+8*E*I+8*N,B=q.Ha,q=q.Ia+8*E*I+8*N;E=D.ld,0<N&&(ha(M,O,w,R+4,T,E),fa(F,z,B,q,I,R+4,T,E)),D.La&&(ga(M,O,w,R,T,E),ba(F,z,B,q,I,R,T,E)),0<_&&(ua(M,O,w,R+4,T,E),ma(F,z,B,q,I,R+4,T,E)),D.La&&(pa(M,O,w,R,T,E),xa(F,z,B,q,I,R,T,E))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(j=16*C,C=16*(C+1),P?(l.y=o.sa,l.O=o.ta+y,l.f=o.qa,l.N=o.ra+k,l.ea=o.Ha,l.W=o.Ia+k):(j-=v,l.y=m,l.O=f,l.f=p,l.N=u,l.ea=g,l.W=x),b||(C-=v),C>l.o&&(C=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&j<C&&(l.J=hn(o,l,j,C-j),l.F=o.mb,null==l.F&&0==l.F.length)){c=$e(o,3,"Could not decode alpha data.");break e}j<l.j&&(v=l.j-j,j=l.j,t(!(1&v)),l.O+=o.R*v,l.N+=o.B*(v>>1),l.W+=o.B*(v>>1),null!=l.F&&(l.J+=l.width*v)),j<C&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=j-l.j,l.U=l.va-l.v,l.T=C-j,c=l.put(l))}i+1!=o.Ic||b||(a(o.sa,o.ta-d,m,f+16*o.R,d),a(o.qa,o.ra-h,p,u+8*o.B,h),a(o.Ha,o.Ia-h,g,x+8*o.B,h))}if(!c)return $e(e,6,"Output aborted.")}return 1}(e,n)),null!=n.bc&&n.bc(n),o&=1}return o?(e.cb=0,o):0}function et(e,t,n,a,r){r=e[t+n+32*a]+(r>>3),e[t+n+32*a]=-256&r?0>r?0:255:r}function tt(e,t,n,a,r,s){et(e,t,0,n,a+r),et(e,t,1,n,a+s),et(e,t,2,n,a-s),et(e,t,3,n,a-r)}function nt(e){return(20091*e>>16)+e}function at(e,t,n,a){var r,i=0,o=s(16);for(r=0;4>r;++r){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],d=(35468*e[t+4]>>16)-nt(e[t+12]),u=nt(e[t+4])+(35468*e[t+12]>>16);o[i+0]=l+u,o[i+1]=c+d,o[i+2]=c-d,o[i+3]=l-u,i+=4,t++}for(r=i=0;4>r;++r)l=(e=o[i+0]+4)+o[i+8],c=e-o[i+8],d=(35468*o[i+4]>>16)-nt(o[i+12]),et(n,a,0,0,l+(u=nt(o[i+4])+(35468*o[i+12]>>16))),et(n,a,1,0,c+d),et(n,a,2,0,c-d),et(n,a,3,0,l-u),i++,a+=32}function rt(e,t,n,a){var r=e[t+0]+4,s=35468*e[t+4]>>16,i=nt(e[t+4]),o=35468*e[t+1]>>16;tt(n,a,0,r+i,e=nt(e[t+1]),o),tt(n,a,1,r+s,e,o),tt(n,a,2,r-s,e,o),tt(n,a,3,r-i,e,o)}function st(e,t,n,a,r){at(e,t,n,a),r&&at(e,t+16,n,a+4)}function it(e,t,n,a){ia(e,t+0,n,a,1),ia(e,t+32,n,a+128,1)}function ot(e,t,n,a){var r;for(e=e[t+0]+4,r=0;4>r;++r)for(t=0;4>t;++t)et(n,a,t,r,e)}function lt(e,t,n,a){e[t+0]&&ca(e,t+0,n,a),e[t+16]&&ca(e,t+16,n,a+4),e[t+32]&&ca(e,t+32,n,a+128),e[t+48]&&ca(e,t+48,n,a+128+4)}function ct(e,t,n,a){var r,i=s(16);for(r=0;4>r;++r){var o=e[t+0+r]+e[t+12+r],l=e[t+4+r]+e[t+8+r],c=e[t+4+r]-e[t+8+r],d=e[t+0+r]-e[t+12+r];i[0+r]=o+l,i[8+r]=o-l,i[4+r]=d+c,i[12+r]=d-c}for(r=0;4>r;++r)o=(e=i[0+4*r]+3)+i[3+4*r],l=i[1+4*r]+i[2+4*r],c=i[1+4*r]-i[2+4*r],d=e-i[3+4*r],n[a+0]=o+l>>3,n[a+16]=d+c>>3,n[a+32]=o-l>>3,n[a+48]=d-c>>3,a+=64}function dt(e,t,n){var a,r=t-32,s=Oa,i=255-e[r-1];for(a=0;a<n;++a){var o,l=s,c=i+e[t-1];for(o=0;o<n;++o)e[t+o]=l[c+e[r+o]];t+=32}}function ut(e,t){dt(e,t,4)}function ht(e,t){dt(e,t,8)}function mt(e,t){dt(e,t,16)}function ft(e,t){var n;for(n=0;16>n;++n)a(e,t+32*n,e,t-32,16)}function pt(e,t){var n;for(n=16;0<n;--n)r(e,t,e[t-1],16),t+=32}function gt(e,t,n){var a;for(a=0;16>a;++a)r(t,n+32*a,e,16)}function xt(e,t){var n,a=16;for(n=0;16>n;++n)a+=e[t-1+32*n]+e[t+n-32];gt(a>>5,e,t)}function bt(e,t){var n,a=8;for(n=0;16>n;++n)a+=e[t-1+32*n];gt(a>>4,e,t)}function vt(e,t){var n,a=8;for(n=0;16>n;++n)a+=e[t+n-32];gt(a>>4,e,t)}function yt(e,t){gt(128,e,t)}function wt(e,t,n){return e+2*t+n+2>>2}function jt(e,t){var n,r=t-32;for(r=new Uint8Array([wt(e[r-1],e[r+0],e[r+1]),wt(e[r+0],e[r+1],e[r+2]),wt(e[r+1],e[r+2],e[r+3]),wt(e[r+2],e[r+3],e[r+4])]),n=0;4>n;++n)a(e,t+32*n,r,0,r.length)}function Nt(e,t){var n=e[t-1],a=e[t-1+32],r=e[t-1+64],s=e[t-1+96];P(e,t+0,16843009*wt(e[t-1-32],n,a)),P(e,t+32,16843009*wt(n,a,r)),P(e,t+64,16843009*wt(a,r,s)),P(e,t+96,16843009*wt(r,s,s))}function _t(e,t){var n,a=4;for(n=0;4>n;++n)a+=e[t+n-32]+e[t-1+32*n];for(a>>=3,n=0;4>n;++n)r(e,t+32*n,a,4)}function St(e,t){var n=e[t-1+0],a=e[t-1+32],r=e[t-1+64],s=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=wt(a,r,e[t-1+96]),e[t+1+96]=e[t+0+64]=wt(n,a,r),e[t+2+96]=e[t+1+64]=e[t+0+32]=wt(s,n,a),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=wt(i,s,n),e[t+3+64]=e[t+2+32]=e[t+1+0]=wt(o,i,s),e[t+3+32]=e[t+2+0]=wt(l,o,i),e[t+3+0]=wt(c,l,o)}function kt(e,t){var n=e[t+1-32],a=e[t+2-32],r=e[t+3-32],s=e[t+4-32],i=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=wt(e[t+0-32],n,a),e[t+1+0]=e[t+0+32]=wt(n,a,r),e[t+2+0]=e[t+1+32]=e[t+0+64]=wt(a,r,s),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=wt(r,s,i),e[t+3+32]=e[t+2+64]=e[t+1+96]=wt(s,i,o),e[t+3+64]=e[t+2+96]=wt(i,o,l),e[t+3+96]=wt(o,l,l)}function Ct(e,t){var n=e[t-1+0],a=e[t-1+32],r=e[t-1+64],s=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=s+i+1>>1,e[t+1+0]=e[t+2+64]=i+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=wt(r,a,n),e[t+0+64]=wt(a,n,s),e[t+0+32]=e[t+1+96]=wt(n,s,i),e[t+1+32]=e[t+2+96]=wt(s,i,o),e[t+2+32]=e[t+3+96]=wt(i,o,l),e[t+3+32]=wt(o,l,c)}function At(e,t){var n=e[t+0-32],a=e[t+1-32],r=e[t+2-32],s=e[t+3-32],i=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=n+a+1>>1,e[t+1+0]=e[t+0+64]=a+r+1>>1,e[t+2+0]=e[t+1+64]=r+s+1>>1,e[t+3+0]=e[t+2+64]=s+i+1>>1,e[t+0+32]=wt(n,a,r),e[t+1+32]=e[t+0+96]=wt(a,r,s),e[t+2+32]=e[t+1+96]=wt(r,s,i),e[t+3+32]=e[t+2+96]=wt(s,i,o),e[t+3+64]=wt(i,o,l),e[t+3+96]=wt(o,l,c)}function Pt(e,t){var n=e[t-1+0],a=e[t-1+32],r=e[t-1+64],s=e[t-1+96];e[t+0+0]=n+a+1>>1,e[t+2+0]=e[t+0+32]=a+r+1>>1,e[t+2+32]=e[t+0+64]=r+s+1>>1,e[t+1+0]=wt(n,a,r),e[t+3+0]=e[t+1+32]=wt(a,r,s),e[t+3+32]=e[t+1+64]=wt(r,s,s),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=s}function Lt(e,t){var n=e[t-1+0],a=e[t-1+32],r=e[t-1+64],s=e[t-1+96],i=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=n+i+1>>1,e[t+0+32]=e[t+2+64]=a+n+1>>1,e[t+0+64]=e[t+2+96]=r+a+1>>1,e[t+0+96]=s+r+1>>1,e[t+3+0]=wt(o,l,c),e[t+2+0]=wt(i,o,l),e[t+1+0]=e[t+3+32]=wt(n,i,o),e[t+1+32]=e[t+3+64]=wt(a,n,i),e[t+1+64]=e[t+3+96]=wt(r,a,n),e[t+1+96]=wt(s,r,a)}function Et(e,t){var n;for(n=0;8>n;++n)a(e,t+32*n,e,t-32,8)}function Dt(e,t){var n;for(n=0;8>n;++n)r(e,t,e[t-1],8),t+=32}function Mt(e,t,n){var a;for(a=0;8>a;++a)r(t,n+32*a,e,8)}function Ot(e,t){var n,a=8;for(n=0;8>n;++n)a+=e[t+n-32]+e[t-1+32*n];Mt(a>>4,e,t)}function Tt(e,t){var n,a=4;for(n=0;8>n;++n)a+=e[t+n-32];Mt(a>>3,e,t)}function Rt(e,t){var n,a=4;for(n=0;8>n;++n)a+=e[t-1+32*n];Mt(a>>3,e,t)}function It(e,t){Mt(128,e,t)}function Ft(e,t,n){var a=e[t-n],r=e[t+0],s=3*(r-a)+Da[1020+e[t-2*n]-e[t+n]],i=Ma[112+(s+4>>3)];e[t-n]=Oa[255+a+Ma[112+(s+3>>3)]],e[t+0]=Oa[255+r-i]}function zt(e,t,n,a){var r=e[t+0],s=e[t+n];return Ta[255+e[t-2*n]-e[t-n]]>a||Ta[255+s-r]>a}function Bt(e,t,n,a){return 4*Ta[255+e[t-n]-e[t+0]]+Ta[255+e[t-2*n]-e[t+n]]<=a}function qt(e,t,n,a,r){var s=e[t-3*n],i=e[t-2*n],o=e[t-n],l=e[t+0],c=e[t+n],d=e[t+2*n],u=e[t+3*n];return 4*Ta[255+o-l]+Ta[255+i-c]>a?0:Ta[255+e[t-4*n]-s]<=r&&Ta[255+s-i]<=r&&Ta[255+i-o]<=r&&Ta[255+u-d]<=r&&Ta[255+d-c]<=r&&Ta[255+c-l]<=r}function Ut(e,t,n,a){var r=2*a+1;for(a=0;16>a;++a)Bt(e,t+a,n,r)&&Ft(e,t+a,n)}function Wt(e,t,n,a){var r=2*a+1;for(a=0;16>a;++a)Bt(e,t+a*n,1,r)&&Ft(e,t+a*n,1)}function Ht(e,t,n,a){var r;for(r=3;0<r;--r)Ut(e,t+=4*n,n,a)}function Vt(e,t,n,a){var r;for(r=3;0<r;--r)Wt(e,t+=4,n,a)}function Yt(e,t,n,a,r,s,i,o){for(s=2*s+1;0<r--;){if(qt(e,t,n,s,i))if(zt(e,t,n,o))Ft(e,t,n);else{var l=e,c=t,d=n,u=l[c-2*d],h=l[c-d],m=l[c+0],f=l[c+d],p=l[c+2*d],g=27*(b=Da[1020+3*(m-h)+Da[1020+u-f]])+63>>7,x=18*b+63>>7,b=9*b+63>>7;l[c-3*d]=Oa[255+l[c-3*d]+b],l[c-2*d]=Oa[255+u+x],l[c-d]=Oa[255+h+g],l[c+0]=Oa[255+m-g],l[c+d]=Oa[255+f-x],l[c+2*d]=Oa[255+p-b]}t+=a}}function Gt(e,t,n,a,r,s,i,o){for(s=2*s+1;0<r--;){if(qt(e,t,n,s,i))if(zt(e,t,n,o))Ft(e,t,n);else{var l=e,c=t,d=n,u=l[c-d],h=l[c+0],m=l[c+d],f=Ma[112+(4+(p=3*(h-u))>>3)],p=Ma[112+(p+3>>3)],g=f+1>>1;l[c-2*d]=Oa[255+l[c-2*d]+g],l[c-d]=Oa[255+u+p],l[c+0]=Oa[255+h-f],l[c+d]=Oa[255+m-g]}t+=a}}function $t(e,t,n,a,r,s){Yt(e,t,n,1,16,a,r,s)}function Xt(e,t,n,a,r,s){Yt(e,t,1,n,16,a,r,s)}function Kt(e,t,n,a,r,s){var i;for(i=3;0<i;--i)Gt(e,t+=4*n,n,1,16,a,r,s)}function Jt(e,t,n,a,r,s){var i;for(i=3;0<i;--i)Gt(e,t+=4,1,n,16,a,r,s)}function Qt(e,t,n,a,r,s,i,o){Yt(e,t,r,1,8,s,i,o),Yt(n,a,r,1,8,s,i,o)}function Zt(e,t,n,a,r,s,i,o){Yt(e,t,1,r,8,s,i,o),Yt(n,a,1,r,8,s,i,o)}function en(e,t,n,a,r,s,i,o){Gt(e,t+4*r,r,1,8,s,i,o),Gt(n,a+4*r,r,1,8,s,i,o)}function tn(e,t,n,a,r,s,i,o){Gt(e,t+4,1,r,8,s,i,o),Gt(n,a+4,1,r,8,s,i,o)}function nn(){this.ba=new ie,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function an(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function rn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function sn(){this.ua=0,this.Wa=new T,this.vb=new T,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new m,this.yc=new u}function on(){this.xb=this.a=0,this.l=new Ye,this.ca=new ie,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new w,this.Pb=0,this.wd=new w,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new sn,this.ab=0,this.gc=i(4,rn),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ye,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function cn(e,t,n,a,r,s,i){for(e=null==e?0:e[t+0],t=0;t<i;++t)r[s+t]=e+n[a+t]&255,e=r[s+t]}function dn(e,t,n,a,r,s,i){var o;if(null==e)cn(null,null,n,a,r,s,i);else for(o=0;o<i;++o)r[s+o]=e[t+o]+n[a+o]&255}function un(e,t,n,a,r,s,i){if(null==e)cn(null,null,n,a,r,s,i);else{var o,l=e[t+0],c=l,d=l;for(o=0;o<i;++o)c=d+(l=e[t+o])-c,d=n[a+o]+(-256&c?0>c?0:255:c)&255,c=l,r[s+o]=d}}function hn(e,n,r,i){var o=n.width,l=n.o;if(t(null!=e&&null!=n),0>r||0>=i||r+i>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new ln,(c=null==e.ga)||(c=n.width*n.o,t(0==e.Gb.length),e.Gb=s(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var d=e.Fa,u=e.P,h=e.qc,m=e.mb,f=e.nb,p=u+1,g=h-1,b=c.l;if(t(null!=d&&null!=m&&null!=n),gr[0]=null,gr[1]=cn,gr[2]=dn,gr[3]=un,c.ca=m,c.tb=f,c.c=n.width,c.i=n.height,t(0<c.c&&0<c.i),1>=h)n=0;else if(c.$a=3&d[u+0],c.Z=d[u+0]>>2&3,c.Lc=d[u+0]>>4&3,u=d[u+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||u)n=0;else if(b.put=me,b.ac=he,b.bc=fe,b.ma=c,b.width=n.width,b.height=n.height,b.Da=n.Da,b.v=n.v,b.va=n.va,b.j=n.j,b.o=n.o,c.$a)e:{t(1==c.$a),n=Ae();t:for(;;){if(null==n){n=0;break e}if(t(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,x(n.m,d,p,g),!Pe(c.c,c.i,1,n,null))break t;if(1==n.ab&&3==n.gc[0].hc&&Ne(n.s)?(c.ic=1,d=n.c*n.i,n.Ta=null,n.Ua=0,n.V=s(d),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Le(n,c.c)),!n)break t;n=1;break e}c.mc=null,n=0}else n=g>=c.c*c.i;c=!n}if(c)return null;1!=e.ga.Lc?e.Ga=0:i=l-r}t(null!=e.ga),t(r+i<=l);e:{if(n=(d=e.ga).c,l=d.l.o,0==d.$a){if(p=e.rc,g=e.Vc,b=e.Fa,u=e.P+1+r*n,h=e.mb,m=e.nb+r*n,t(u<=e.P+e.qc),0!=d.Z)for(t(null!=gr[d.Z]),c=0;c<i;++c)gr[d.Z](p,g,b,u,h,m,n),p=h,g=m,m+=n,u+=n;else for(c=0;c<i;++c)a(h,m,b,u,n),p=h,g=m,m+=n,u+=n;e.rc=p,e.Vc=g}else{if(t(null!=d.mc),n=r+i,t(null!=(c=d.mc)),t(n<=c.i),c.C>=n)n=1;else if(d.ic||xn(),d.ic){d=c.V,p=c.Ba,g=c.c;var v=c.i,y=(b=1,u=c.$/g,h=c.$%g,m=c.m,f=c.s,c.$),w=g*v,j=g*n,_=f.wc,k=y<j?ye(f,h,u):null;t(y<=w),t(n<=v),t(Ne(f));t:for(;;){for(;!m.h&&y<j;){if(h&_||(k=ye(f,h,u)),t(null!=k),S(m),256>(v=be(k.G[0],k.H[0],m)))d[p+y]=v,++y,++h>=g&&(h=0,++u<=n&&!(u%16)&&Se(c,u));else{if(!(280>v)){b=0;break t}v=ge(v-256,m);var C,A=be(k.G[4],k.H[4],m);if(S(m),!(y>=(A=xe(g,A=ge(A,m)))&&w-y>=v)){b=0;break t}for(C=0;C<v;++C)d[p+y+C]=d[p+y+C-A];for(y+=v,h+=v;h>=g;)h-=g,++u<=n&&!(u%16)&&Se(c,u);y<j&&h&_&&(k=ye(f,h,u))}t(m.h==N(m))}Se(c,u>n?n:u);break t}!b||m.h&&y<w?(b=0,c.a=m.h?5:3):c.$=y,n=b}else n=ke(c,c.V,c.Ba,c.c,c.i,n,Ee);if(!n){i=0;break e}}r+i>=l&&(e.Cc=1),i=1}if(!i)return null;if(e.Cc&&(null!=(i=e.ga)&&(i.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+r*o}function mn(e,t,n,a,r,s){for(;0<r--;){var i,o=e,l=t+(n?1:0),c=e,d=t+(n?0:3);for(i=0;i<a;++i){var u=c[d+4*i];255!=u&&(u*=32897,o[l+4*i+0]=o[l+4*i+0]*u>>23,o[l+4*i+1]=o[l+4*i+1]*u>>23,o[l+4*i+2]=o[l+4*i+2]*u>>23)}t+=s}}function fn(e,t,n,a,r){for(;0<a--;){var s;for(s=0;s<n;++s){var i=e[t+2*s+0],o=15&(c=e[t+2*s+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*s+0]=(240&i|i>>4)*l>>16&240|(15&i|i<<4)*l>>16>>4&15,e[t+2*s+1]=240&c|o}t+=r}}function pn(e,t,n,a,r,s,i,o){var l,c,d=255;for(c=0;c<r;++c){for(l=0;l<a;++l){var u=e[t+l];s[i+4*l]=u,d&=u}t+=n,i+=o}return 255!=d}function gn(e,t,n,a,r){var s;for(s=0;s<r;++s)n[a+s]=e[t+s]>>8}function xn(){Na=mn,_a=fn,Sa=pn,ka=gn}function bn(n,a,r){e[n]=function(e,n,s,i,o,l,c,d,u,h,m,f,p,g,x,b,v){var y,w=v-1>>1,j=o[l+0]|c[d+0]<<16,N=u[h+0]|m[f+0]<<16;t(null!=e);var _=3*j+N+131074>>2;for(a(e[n+0],255&_,_>>16,p,g),null!=s&&(_=3*N+j+131074>>2,a(s[i+0],255&_,_>>16,x,b)),y=1;y<=w;++y){var S=o[l+y]|c[d+y]<<16,k=u[h+y]|m[f+y]<<16,C=j+S+N+k+524296,A=C+2*(S+N)>>3;_=A+j>>1,j=(C=C+2*(j+k)>>3)+S>>1,a(e[n+2*y-1],255&_,_>>16,p,g+(2*y-1)*r),a(e[n+2*y-0],255&j,j>>16,p,g+(2*y-0)*r),null!=s&&(_=C+N>>1,j=A+k>>1,a(s[i+2*y-1],255&_,_>>16,x,b+(2*y-1)*r),a(s[i+2*y+0],255&j,j>>16,x,b+(2*y+0)*r)),j=S,N=k}1&v||(_=3*j+N+131074>>2,a(e[n+v-1],255&_,_>>16,p,g+(v-1)*r),null!=s&&(_=3*N+j+131074>>2,a(s[i+v-1],255&_,_>>16,x,b+(v-1)*r)))}}function vn(){xr[Ra]=br,xr[Ia]=yr,xr[Fa]=vr,xr[za]=wr,xr[Ba]=jr,xr[qa]=Nr,xr[Ua]=_r,xr[Wa]=yr,xr[Ha]=wr,xr[Va]=jr,xr[Ya]=Nr}function yn(e){return e&~Lr?0>e?0:255:e>>Pr}function wn(e,t){return yn((19077*e>>8)+(26149*t>>8)-14234)}function jn(e,t,n){return yn((19077*e>>8)-(6419*t>>8)-(13320*n>>8)+8708)}function Nn(e,t){return yn((19077*e>>8)+(33050*t>>8)-17685)}function _n(e,t,n,a,r){a[r+0]=wn(e,n),a[r+1]=jn(e,t,n),a[r+2]=Nn(e,t)}function Sn(e,t,n,a,r){a[r+0]=Nn(e,t),a[r+1]=jn(e,t,n),a[r+2]=wn(e,n)}function kn(e,t,n,a,r){var s=jn(e,t,n);t=s<<3&224|Nn(e,t)>>3,a[r+0]=248&wn(e,n)|s>>5,a[r+1]=t}function Cn(e,t,n,a,r){var s=240&Nn(e,t)|15;a[r+0]=240&wn(e,n)|jn(e,t,n)>>4,a[r+1]=s}function An(e,t,n,a,r){a[r+0]=255,_n(e,t,n,a,r+1)}function Pn(e,t,n,a,r){Sn(e,t,n,a,r),a[r+3]=255}function Ln(e,t,n,a,r){_n(e,t,n,a,r),a[r+3]=255}function Ve(e,t){return 0>e?0:e>t?t:e}function En(t,n,a){e[t]=function(e,t,r,s,i,o,l,c,d){for(var u=c+(-2&d)*a;c!=u;)n(e[t+0],r[s+0],i[o+0],l,c),n(e[t+1],r[s+0],i[o+0],l,c+a),t+=2,++s,++o,c+=2*a;1&d&&n(e[t+0],r[s+0],i[o+0],l,c)}}function Dn(e,t,n){return 0==n?0==e?0==t?6:5:0==t?4:0:n}function Mn(e,t,n,a,r){switch(e>>>30){case 3:ia(t,n,a,r,0);break;case 2:oa(t,n,a,r);break;case 1:ca(t,n,a,r)}}function On(e,t){var n,s,i=t.M,o=t.Nb,l=e.oc,c=e.pc+40,d=e.oc,u=e.pc+584,h=e.oc,m=e.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)d[u+32*n-1]=129,h[m+32*n-1]=129;for(0<i?l[c-1-32]=d[u-1-32]=h[m-1-32]=129:(r(l,c-32-1,127,21),r(d,u-32-1,127,9),r(h,m-32-1,127,9)),s=0;s<e.za;++s){var f=t.ya[t.aa+s];if(0<s){for(n=-1;16>n;++n)a(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)a(d,u+32*n-4,d,u+32*n+4,4),a(h,m+32*n-4,h,m+32*n+4,4)}var p=e.Gd,g=e.Hd+s,x=f.ad,b=f.Hc;if(0<i&&(a(l,c-32,p[g].y,0,16),a(d,u-32,p[g].f,0,8),a(h,m-32,p[g].ea,0,8)),f.Za){var v=l,y=c-32+16;for(0<i&&(s>=e.za-1?r(v,y,p[g].y[15],4):a(v,y,p[g+1].y,0,4)),n=0;4>n;n++)v[y+128+n]=v[y+256+n]=v[y+384+n]=v[y+0+n];for(n=0;16>n;++n,b<<=2)v=l,y=c+Fr[n],hr[f.Ob[n]](v,y),Mn(b,x,16*+n,v,y)}else if(v=Dn(s,i,f.Ob[0]),ur[v](l,c),0!=b)for(n=0;16>n;++n,b<<=2)Mn(b,x,16*+n,l,c+Fr[n]);for(n=f.Gc,v=Dn(s,i,f.Dd),mr[v](d,u),mr[v](h,m),b=x,v=d,y=u,255&(f=n|0)&&(170&f?la(b,256,v,y):da(b,256,v,y)),f=h,b=m,255&(n>>=8)&&(170&n?la(x,320,f,b):da(x,320,f,b)),i<e.Ub-1&&(a(p[g].y,0,l,c+480,16),a(p[g].f,0,d,u+224,8),a(p[g].ea,0,h,m+224,8)),n=8*o*e.B,p=e.sa,g=e.ta+16*s+16*o*e.R,x=e.qa,f=e.ra+8*s+n,b=e.Ha,v=e.Ia+8*s+n,n=0;16>n;++n)a(p,g+n*e.R,l,c+32*n,16);for(n=0;8>n;++n)a(x,f+n*e.B,d,u+32*n,8),a(b,v+n*e.B,h,m+32*n,8)}}function Tn(e,a,r,s,i,o,l,c,d){var u=[0],h=[0],m=0,f=null!=d?d.kd:0,p=null!=d?d:new an;if(null==e||12>r)return 7;p.data=e,p.w=a,p.ha=r,a=[a],r=[r],p.gb=[p.gb];e:{var g=a,b=r,v=p.gb;if(t(null!=e),t(null!=b),t(null!=v),v[0]=0,12<=b[0]&&!n(e,g[0],"RIFF")){if(n(e,g[0]+8,"WEBP")){v=3;break e}var y=D(e,g[0]+4);if(12>y||4294967286<y){v=3;break e}if(f&&y>b[0]-8){v=7;break e}v[0]=y,g[0]+=12,b[0]-=12}v=0}if(0!=v)return v;for(y=0<p.gb[0],r=r[0];;){e:{var j=e;b=a,v=r;var N=u,_=h,S=g=[0];if((A=m=[m])[0]=0,8>v[0])v=7;else{if(!n(j,b[0],"VP8X")){if(10!=D(j,b[0]+4)){v=3;break e}if(18>v[0]){v=7;break e}var k=D(j,b[0]+8),C=1+E(j,b[0]+12);if(2147483648<=C*(j=1+E(j,b[0]+15))){v=3;break e}null!=S&&(S[0]=k),null!=N&&(N[0]=C),null!=_&&(_[0]=j),b[0]+=18,v[0]-=18,A[0]=1}v=0}}if(m=m[0],g=g[0],0!=v)return v;if(b=!!(2&g),!y&&m)return 3;if(null!=o&&(o[0]=!!(16&g)),null!=l&&(l[0]=b),null!=c&&(c[0]=0),l=u[0],g=h[0],m&&b&&null==d){v=0;break}if(4>r){v=7;break}if(y&&m||!y&&!m&&!n(e,a[0],"ALPH")){r=[r],p.na=[p.na],p.P=[p.P],p.Sa=[p.Sa];e:{k=e,v=a,y=r;var A=p.gb;N=p.na,_=p.P,S=p.Sa,C=22,t(null!=k),t(null!=y),j=v[0];var P=y[0];for(t(null!=N),t(null!=S),N[0]=null,_[0]=null,S[0]=0;;){if(v[0]=j,y[0]=P,8>P){v=7;break e}var L=D(k,j+4);if(4294967286<L){v=3;break e}var M=8+L+1&-2;if(C+=M,0<A&&C>A){v=3;break e}if(!n(k,j,"VP8 ")||!n(k,j,"VP8L")){v=0;break e}if(P[0]<M){v=7;break e}n(k,j,"ALPH")||(N[0]=k,_[0]=j+8,S[0]=L),j+=M,P-=M}}if(r=r[0],p.na=p.na[0],p.P=p.P[0],p.Sa=p.Sa[0],0!=v)break}r=[r],p.Ja=[p.Ja],p.xa=[p.xa];e:if(A=e,v=a,y=r,N=p.gb[0],_=p.Ja,S=p.xa,k=v[0],j=!n(A,k,"VP8 "),C=!n(A,k,"VP8L"),t(null!=A),t(null!=y),t(null!=_),t(null!=S),8>y[0])v=7;else{if(j||C){if(A=D(A,k+4),12<=N&&A>N-12){v=3;break e}if(f&&A>y[0]-8){v=7;break e}_[0]=A,v[0]+=8,y[0]-=8,S[0]=C}else S[0]=5<=y[0]&&47==A[k+0]&&!(A[k+4]>>5),_[0]=y[0];v=0}if(r=r[0],p.Ja=p.Ja[0],p.xa=p.xa[0],a=a[0],0!=v)break;if(4294967286<p.Ja)return 3;if(null==c||b||(c[0]=p.xa?2:1),l=[l],g=[g],p.xa){if(5>r){v=7;break}c=l,f=g,b=o,null==e||5>r?e=0:5<=r&&47==e[a+0]&&!(e[a+4]>>5)?(y=[0],A=[0],N=[0],x(_=new w,e,a,r),pe(_,y,A,N)?(null!=c&&(c[0]=y[0]),null!=f&&(f[0]=A[0]),null!=b&&(b[0]=N[0]),e=1):e=0):e=0}else{if(10>r){v=7;break}c=g,null==e||10>r||!Xe(e,a+3,r-3)?e=0:(f=e[a+0]|e[a+1]<<8|e[a+2]<<16,b=16383&(e[a+7]<<8|e[a+6]),e=16383&(e[a+9]<<8|e[a+8]),1&f||3<(f>>1&7)||!(f>>4&1)||f>>5>=p.Ja||!b||!e?e=0:(l&&(l[0]=b),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],g=g[0],m&&(u[0]!=l||h[0]!=g))return 3;null!=d&&(d[0]=p,d.offset=a-d.w,t(4294967286>a-d.w),t(d.offset==d.ha-r));break}return 0==v||7==v&&m&&null==d?(null!=o&&(o[0]|=null!=p.na&&0<p.na.length),null!=s&&(s[0]=l),null!=i&&(i[0]=g),0):v}function Rn(e,t,n){var a=t.width,r=t.height,s=0,i=0,o=a,l=r;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,s=e.v,i=e.j,11>n||(s&=-2,i&=-2),0>s||0>i||0>=o||0>=l||s+o>a||i+l>r))return 0;if(t.v=s,t.j=i,t.va=s+o,t.o=i+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!R(o,l,n=[e.ib],s=[e.hb]))return 0;t.ib=n[0],t.hb=s[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*a/4&&t.hb<3*r/4,t.Kb=0),1}function In(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Fn(e,t,n,a){if(null==a||0>=e||0>=t)return 2;if(null!=n){if(n.Da){var r=n.cd,i=n.bd,o=-2&n.v,l=-2&n.j;if(0>o||0>l||0>=r||0>=i||o+r>e||l+i>t)return 2;e=r,t=i}if(n.da){if(!R(e,t,r=[n.ib],i=[n.hb]))return 2;e=r[0],t=i[0]}}a.width=e,a.height=t;e:{var c=a.width,d=a.height;if(e=a.S,0>=c||0>=d||!(e>=Ra&&13>e))e=2;else{if(0>=a.Rd&&null==a.sd){o=i=r=t=0;var u=(l=c*Ur[e])*d;if(11>e||(i=(d+1)/2*(t=(c+1)/2),12==e&&(o=(r=c)*d)),null==(d=s(u+2*i+o))){e=1;break e}a.sd=d,11>e?((c=a.f.RGBA).eb=d,c.fb=0,c.A=l,c.size=u):((c=a.f.kb).y=d,c.O=0,c.fa=l,c.Fd=u,c.f=d,c.N=0+u,c.Ab=t,c.Cd=i,c.ea=d,c.W=0+u+i,c.Db=t,c.Ed=i,12==e&&(c.F=d,c.J=0+u+2*i),c.Tc=o,c.lb=r)}if(t=1,r=a.S,i=a.width,o=a.height,r>=Ra&&13>r)if(11>r)e=a.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+i<=e.size,t&=l>=i*Ur[r],t&=null!=e.eb;else{e=a.f.kb,l=(i+1)/2,u=(o+1)/2,c=Math.abs(e.fa),d=Math.abs(e.Ab);var h=Math.abs(e.Db),m=Math.abs(e.lb),f=m*(o-1)+i;t&=c*(o-1)+i<=e.Fd,t&=d*(u-1)+l<=e.Cd,t=(t&=h*(u-1)+l<=e.Ed)&c>=i&d>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==r&&(t&=m>=i,t&=f<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=n&&n.fd&&(e=In(a)),e}var zn=64,Bn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],qn=24,Un=32,Wn=8,Hn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];z("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,n){return t[n+0]},e.Predictor3=function(e,t,n){return t[n+1]},e.Predictor4=function(e,t,n){return t[n-1]},e.Predictor5=function(e,t,n){return q(q(e,t[n+1]),t[n+0])},e.Predictor6=function(e,t,n){return q(e,t[n-1])},e.Predictor7=function(e,t,n){return q(e,t[n+0])},e.Predictor8=function(e,t,n){return q(t[n-1],t[n+0])},e.Predictor9=function(e,t,n){return q(t[n+0],t[n+1])},e.Predictor10=function(e,t,n){return q(q(e,t[n-1]),q(t[n+0],t[n+1]))},e.Predictor11=function(e,t,n){var a=t[n+0];return 0>=H(a>>24&255,e>>24&255,(t=t[n-1])>>24&255)+H(a>>16&255,e>>16&255,t>>16&255)+H(a>>8&255,e>>8&255,t>>8&255)+H(255&a,255&e,255&t)?a:e},e.Predictor12=function(e,t,n){var a=t[n+0];return(U((e>>24&255)+(a>>24&255)-((t=t[n-1])>>24&255))<<24|U((e>>16&255)+(a>>16&255)-(t>>16&255))<<16|U((e>>8&255)+(a>>8&255)-(t>>8&255))<<8|U((255&e)+(255&a)-(255&t)))>>>0},e.Predictor13=function(e,t,n){var a=t[n-1];return(W((e=q(e,t[n+0]))>>24&255,a>>24&255)<<24|W(e>>16&255,a>>16&255)<<16|W(e>>8&255,a>>8&255)<<8|W(255&e,255&a))>>>0};var Vn=e.PredictorAdd0;e.PredictorAdd1=V,z("Predictor2","PredictorAdd2"),z("Predictor3","PredictorAdd3"),z("Predictor4","PredictorAdd4"),z("Predictor5","PredictorAdd5"),z("Predictor6","PredictorAdd6"),z("Predictor7","PredictorAdd7"),z("Predictor8","PredictorAdd8"),z("Predictor9","PredictorAdd9"),z("Predictor10","PredictorAdd10"),z("Predictor11","PredictorAdd11"),z("Predictor12","PredictorAdd12"),z("Predictor13","PredictorAdd13");var Yn=e.PredictorAdd2;X("ColorIndexInverseTransform","MapARGB","32b",(function(e){return e>>8&255}),(function(e){return e})),X("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(e){return e}),(function(e){return e>>8&255}));var Gn,$n=e.ColorIndexInverseTransform,Xn=e.MapARGB,Kn=e.VP8LColorIndexInverseTransformAlpha,Jn=e.MapAlpha,Qn=e.VP8LPredictorsAdd=[];Qn.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Zn,ea,ta,na,aa,ra,sa,ia,oa,la,ca,da,ua,ha,ma,fa,pa,ga,xa,ba,va,ya,wa,ja,Na,_a,Sa,ka,Ca=s(511),Aa=s(2041),Pa=s(225),La=s(767),Ea=0,Da=Aa,Ma=Pa,Oa=La,Ta=Ca,Ra=0,Ia=1,Fa=2,za=3,Ba=4,qa=5,Ua=6,Wa=7,Ha=8,Va=9,Ya=10,Ga=[2,3,7],$a=[3,3,11],Xa=[280,256,256,256,40],Ka=[0,1,1,1,0],Ja=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Qa=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Za=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],er=8,tr=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],nr=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ar=null,rr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ir=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],or=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],lr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],cr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],dr=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ur=[],hr=[],mr=[],fr=1,pr=2,gr=[],xr=[];bn("UpsampleRgbLinePair",_n,3),bn("UpsampleBgrLinePair",Sn,3),bn("UpsampleRgbaLinePair",Ln,4),bn("UpsampleBgraLinePair",Pn,4),bn("UpsampleArgbLinePair",An,4),bn("UpsampleRgba4444LinePair",Cn,2),bn("UpsampleRgb565LinePair",kn,2);var br=e.UpsampleRgbLinePair,vr=e.UpsampleBgrLinePair,yr=e.UpsampleRgbaLinePair,wr=e.UpsampleBgraLinePair,jr=e.UpsampleArgbLinePair,Nr=e.UpsampleRgba4444LinePair,_r=e.UpsampleRgb565LinePair,Sr=16,kr=1<<Sr-1,Cr=-227,Ar=482,Pr=6,Lr=(256<<Pr)-1,Er=0,Dr=s(256),Mr=s(256),Or=s(256),Tr=s(256),Rr=s(Ar-Cr),Ir=s(Ar-Cr);En("YuvToRgbRow",_n,3),En("YuvToBgrRow",Sn,3),En("YuvToRgbaRow",Ln,4),En("YuvToBgraRow",Pn,4),En("YuvToArgbRow",An,4),En("YuvToRgba4444Row",Cn,2),En("YuvToRgb565Row",kn,2);var Fr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],zr=[0,2,8],Br=[8,7,6,4,4,2,2,2,1,1,1,1],qr=1;this.WebPDecodeRGBA=function(e,n,a,r,s){var i=Ia,o=new nn,l=new ie;o.ba=l,l.S=i,l.width=[l.width],l.height=[l.height];var c=l.width,d=l.height,u=new oe;if(null==u||null==e)var h=2;else t(null!=u),h=Tn(e,n,a,u.width,u.height,u.Pd,u.Qd,u.format,null);if(0!=h?c=0:(null!=c&&(c[0]=u.width[0]),null!=d&&(d[0]=u.height[0]),c=1),c){l.width=l.width[0],l.height=l.height[0],null!=r&&(r[0]=l.width),null!=s&&(s[0]=l.height);e:{if(r=new Ye,(s=new an).data=e,s.w=n,s.ha=a,s.kd=1,n=[0],t(null!=s),(0==(e=Tn(s.data,s.w,s.ha,null,null,null,n,null,s))||7==e)&&n[0]&&(e=4),0==(n=e)){if(t(null!=o),r.data=s.data,r.w=s.w+s.offset,r.ha=s.ha-s.offset,r.put=me,r.ac=he,r.bc=fe,r.ma=o,s.xa){if(null==(e=Ae())){o=1;break e}if(function(e,n){var a=[0],r=[0],s=[0];t:for(;;){if(null==e)return 0;if(null==n)return e.a=2,0;if(e.l=n,e.a=0,x(e.m,n.data,n.w,n.ha),!pe(e.m,a,r,s)){e.a=3;break t}if(e.xb=pr,n.width=a[0],n.height=r[0],!Pe(a[0],r[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,r)){if(r=0==(n=Fn(r.width,r.height,o.Oa,o.ba))){t:{r=e;n:for(;;){if(null==r){r=0;break t}if(t(null!=r.s.yc),t(null!=r.s.Ya),t(0<r.s.Wb),t(null!=(a=r.l)),t(null!=(s=a.ma)),0!=r.xb){if(r.ca=s.ba,r.tb=s.tb,t(null!=r.ca),!Rn(s.Oa,a,za)){r.a=2;break n}if(!Le(r,a.width))break n;if(a.da)break n;if((a.da||ae(r.ca.S))&&xn(),11>r.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=r.ca.f.kb.F&&xn()),r.Pb&&0<r.s.ua&&null==r.s.vb.X&&!M(r.s.vb,r.s.Wa.Xa)){r.a=1;break n}r.xb=0}if(!ke(r,r.V,r.Ba,r.c,r.i,a.o,je))break n;s.Dc=r.Ma,r=1;break t}t(0!=r.a),r=0}r=!r}r&&(n=e.a)}else n=e.a}else{if(null==(e=new Ge)){o=1;break e}if(e.Fa=s.na,e.P=s.P,e.qc=s.Sa,Ke(e,r)){if(0==(n=Fn(r.width,r.height,o.Oa,o.ba))){if(e.Aa=0,a=o.Oa,t(null!=(s=e)),null!=a){if(0<(c=0>(c=a.Md)?0:100<c?255:255*c/100)){for(d=u=0;4>d;++d)12>(h=s.pb[d]).lc&&(h.ia=c*Br[0>h.lc?0:h.lc]>>3),u|=h.ia;u&&(alert("todo:VP8InitRandom"),s.ia=1)}s.Ga=a.Id,100<s.Ga?s.Ga=100:0>s.Ga&&(s.Ga=0)}Ze(e,r)||(n=e.a)}}else n=e.a}0==n&&null!=o.Oa&&o.Oa.fd&&(n=In(o.ba))}o=n}i=0!=o?null:11>i?l.f.RGBA.eb:l.f.kb.y}else i=null;return i};var Ur=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var n="",a=0;a<4;a++)n+=String.fromCharCode(e[t++]);return n}function d(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var h=[0],m=[0],f=[],p=new l,g=e,x=function(e,t){var n={},a=0,r=!1,s=0,i=0;if(n.frames=[],!function(e,t){for(var n=0;n<4;n++)if(e[t+n]!="RIFF".charCodeAt(n))return!0;return!1}(e,t)){var o,l;for(u(e,t+=4),t+=8;t<e.length;){var h=c(e,t),m=u(e,t+=4);t+=4;var f=m+(1&m);switch(h){case"VP8 ":case"VP8L":void 0===n.frames[a]&&(n.frames[a]={}),(x=n.frames[a]).src_off=r?i:t-8,x.src_size=s+m+8,a++,r&&(r=!1,s=0,i=0);break;case"VP8X":(x=n.header={}).feature_flags=e[t];var p=t+4;x.canvas_width=1+d(e,p),p+=3,x.canvas_height=1+d(e,p),p+=3;break;case"ALPH":r=!0,s=f+8,i=t-8;break;case"ANIM":(x=n.header).bgcolor=u(e,t),p=t+4,x.loop_count=(o=e)[(l=p)+0]|o[l+1]<<8,p+=2;break;case"ANMF":var g,x;(x=n.frames[a]={}).offset_x=2*d(e,t),t+=3,x.offset_y=2*d(e,t),t+=3,x.width=1+d(e,t),t+=3,x.height=1+d(e,t),t+=3,x.duration=d(e,t),t+=3,g=e[t++],x.dispose=1&g,x.blend=g>>1&1}"ANMF"!=h&&(t+=f)}return n}}(g,0);x.response=g,x.rgbaoutput=!0,x.dataurl=!1;var b=x.header?x.header:null,v=x.frames?x.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],m=[b.canvas_width];for(var y=0;y<v.length&&0!=v[y].blend;y++);}var w=v[0],j=p.WebPDecodeRGBA(g,w.src_off,w.src_size,m,h);w.rgba=j,w.imgwidth=m[0],w.imgheight=h[0];for(var N=0;N<m[0]*h[0]*4;N++)f[N]=j[N];return this.width=m,this.height=h,this.data=f,this}!function(e){var t=function(t,a,l,c){var d=4,u=s;switch(c){case e.image_compression.FAST:d=1,u=r;break;case e.image_compression.MEDIUM:d=6,u=i;break;case e.image_compression.SLOW:d=9,u=o}var h=J(t=n(t,a,l,u),{level:d});return e.__addimage__.arrayBufferToBinaryString(h)},n=function(e,t,n,a){for(var r,s,i,o=e.length/t,l=new Uint8Array(e.length+o),u=c(),h=0;h<o;h+=1){if(i=h*t,r=e.subarray(i,i+t),a)l.set(a(r,n,s),i+h);else{for(var m,f=u.length,p=[];m<f;m+=1)p[m]=u[m](r,n,s);var g=d(p.concat());l.set(p[g],i+h)}s=r}return l},a=function(e){var t=Array.apply([],e);return t.unshift(0),t},r=function(e,t){var n,a=[],r=e.length;a[0]=1;for(var s=0;s<r;s+=1)n=e[s-t]||0,a[s+1]=e[s]-n+256&255;return a},s=function(e,t,n){var a,r=[],s=e.length;r[0]=2;for(var i=0;i<s;i+=1)a=n&&n[i]||0,r[i+1]=e[i]-a+256&255;return r},i=function(e,t,n){var a,r,s=[],i=e.length;s[0]=3;for(var o=0;o<i;o+=1)a=e[o-t]||0,r=n&&n[o]||0,s[o+1]=e[o]+256-(a+r>>>1)&255;return s},o=function(e,t,n){var a,r,s,i,o=[],c=e.length;o[0]=4;for(var d=0;d<c;d+=1)a=e[d-t]||0,r=n&&n[d]||0,s=n&&n[d-t]||0,i=l(a,r,s),o[d+1]=e[d]-i+256&255;return o},l=function(e,t,n){if(e===t&&t===n)return e;var a=Math.abs(t-n),r=Math.abs(e-n),s=Math.abs(e+t-n-n);return a<=r&&a<=s?e:r<=s?t:n},c=function(){return[a,r,s,i,o]},d=function(e){var t=e.map((function(e){return e.reduce((function(e,t){return e+Math.abs(t)}),0)}));return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(n,a,r,s){var i,o,l,c,d,u,h,m,f,p,g,x,b,v,y,w=this.decode.FLATE_DECODE,j="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(l=new Yt(n)).imgData,o=l.bits,i=l.colorSpace,d=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){f=(m=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,g=new Uint8Array(f*l.colors),p=new Uint8Array(f);var N,_=l.pixelBitlength-l.bits;for(v=0,y=0;v<f;v++){for(b=m[v],N=0;N<_;)g[y++]=b>>>N&255,N+=l.bits;p[v]=b>>>N&255}}if(16===l.bits){f=(m=new Uint32Array(l.decodePixels().buffer)).length,g=new Uint8Array(f*(32/l.pixelBitlength)*l.colors),p=new Uint8Array(f*(32/l.pixelBitlength)),x=l.colors>1,v=0,y=0;for(var S=0;v<f;)b=m[v++],g[y++]=b>>>0&255,x&&(g[y++]=b>>>16&255,b=m[v++],g[y++]=b>>>0&255),p[S++]=b>>>16&255;o=8}s!==e.image_compression.NONE?(n=t(g,l.width*l.colors,l.colors,s),h=t(p,l.width,1,s)):(n=g,h=p,w=void 0)}if(3===l.colorType&&(i=this.color_spaces.INDEXED,u=l.palette,l.transparency.indexed)){var k=l.transparency.indexed,C=0;for(v=0,f=k.length;v<f;++v)C+=k[v];if((C/=255)===f-1&&-1!==k.indexOf(0))c=[k.indexOf(0)];else if(C!==f){for(m=l.decodePixels(),p=new Uint8Array(m.length),v=0,f=m.length;v<f;v++)p[v]=k[m[v]];h=t(p,l.width,1)}}var A=function(t){var n;switch(t){case e.image_compression.FAST:n=11;break;case e.image_compression.MEDIUM:n=13;break;case e.image_compression.SLOW:n=14;break;default:n=12}return n}(s);return w===this.decode.FLATE_DECODE&&(j="/Predictor "+A+" "),j+="/Colors "+d+" /BitsPerComponent "+o+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:r,data:n,index:a,filter:w,decodeParameters:j,transparency:c,palette:u,sMask:h,predictor:A,width:l.width,height:l.height,bitsPerComponent:o,colorSpace:i}}}}(Me.API),function(e){e.processGIF89A=function(t,n,a,r){var s=new Gt(t),i=s.width,o=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:i,height:o},d=new Xt(100).encode(c,100);return e.processJPEG.call(this,d,n,a,r)},e.processGIF87A=e.processGIF89A}(Me.API),Kt.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:r,green:a,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Kt.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){ne.log("bit decode error:"+e)}},Kt.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,r=0;r<t;r++)for(var s=this.datav.getUint8(this.pos++,!0),i=a*this.width*4+8*r*4,o=0;o<8&&8*r+o<this.width;o++){var l=this.palette[s>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}0!==n&&(this.pos+=4-n)}},Kt.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,r=0;r<e;r++){var s=this.datav.getUint8(this.pos++,!0),i=a*this.width*4+2*r*4,o=s>>4,l=15&s,c=this.palette[o];if(this.data[i]=c.blue,this.data[i+1]=c.green,this.data[i+2]=c.red,this.data[i+3]=255,2*r+1>=this.width)break;c=this.palette[l],this.data[i+4]=c.blue,this.data[i+4+1]=c.green,this.data[i+4+2]=c.red,this.data[i+4+3]=255}0!==t&&(this.pos+=4-t)}},Kt.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var r=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*a;if(r<this.palette.length){var i=this.palette[r];this.data[s]=i.red,this.data[s+1]=i.green,this.data[s+2]=i.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==e&&(this.pos+=4-e)}},Kt.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(s&t)/t*255|0,o=(s>>5&t)/t*255|0,l=(s>>10&t)/t*255|0,c=s>>15?255:0,d=a*this.width*4+4*r;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=c}this.pos+=e}},Kt.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var r=this.bottom_up?a:this.height-1-a,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&n)/n*255|0,c=(i>>11)/t*255|0,d=r*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},Kt.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*n;this.data[i]=s,this.data[i+1]=r,this.data[i+2]=a,this.data[i+3]=255}this.pos+=this.width%4}},Kt.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*n;this.data[o]=s,this.data[o+1]=r,this.data[o+2]=a,this.data[o+3]=i}},Kt.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,a,r){var s=new Kt(t,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},c=new Xt(100).encode(l,100);return e.processJPEG.call(this,c,n,a,r)}}(Me.API),Jt.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,a,r){var s=new Jt(t,!1),i=s.width,o=s.height,l={data:s.getData(),width:i,height:o},c=new Xt(100).encode(l,100);return e.processJPEG.call(this,c,n,a,r)}}(Me.API),Me.API.processRGBA=function(e,t,n){for(var a=e.data,r=a.length,s=new Uint8Array(r/4*3),i=new Uint8Array(r/4),o=0,l=0,c=0;c<r;c+=4){var d=a[c],u=a[c+1],h=a[c+2],m=a[c+3];s[o++]=d,s[o++]=u,s[o++]=h,i[l++]=m}var f=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:f,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Me.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},qt=Me.API,Ut=qt.getCharWidthsArray=function(e,t){var n,r,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=!1!==t.doKerning,m=0,f=e.length,p=0,g=l[0]||c,x=[];for(n=0;n<f;n++)r=e.charCodeAt(n),"function"==typeof s.metadata.widthOfString?x.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+o*(1e3/i)||0)/1e3):(m=h&&"object"===(0,a.A)(d[r])&&!isNaN(parseInt(d[r][p],10))?d[r][p]/u:0,x.push((l[r]||g)/c+m)),p=r;return x},Wt=qt.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),r=t.charSpace||this.internal.getCharSpace();return qt.processArabic&&(e=qt.processArabic(e)),"function"==typeof a.metadata.widthOfString?a.metadata.widthOfString(e,n,r)/n:Ut.apply(this,arguments).reduce((function(e,t){return e+t}),0)},Ht=function(e,t,n,a){for(var r=[],s=0,i=e.length,o=0;s!==i&&o+t[s]<n;)o+=t[s],s++;r.push(e.slice(0,s));var l=s;for(o=0;s!==i;)o+t[s]>a&&(r.push(e.slice(l,s)),o=0,l=s),o+=t[s],s++;return l!==s&&r.push(e.slice(l,s)),r},Vt=function(e,t,n){n||(n={});var a,r,s,i,o,l,c,d=[],u=[d],h=n.textIndent||0,m=0,f=0,p=e.split(" "),g=Ut.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?p[0].length+2:n.lineIndent||0){var x=Array(l).join(" "),b=[];p.map((function(e){(e=e.split(/\s*\n/)).length>1?b=b.concat(e.map((function(e,t){return(t&&e.length?"\n":"")+e}))):b.push(e[0])})),p=b,l=Wt.apply(this,[x,n])}for(s=0,i=p.length;s<i;s++){var v=0;if(a=p[s],l&&"\n"==a[0]&&(a=a.substr(1),v=1),h+m+(f=(r=Ut.apply(this,[a,n])).reduce((function(e,t){return e+t}),0))>t||v){if(f>t){for(o=Ht.apply(this,[a,r,t-(h+m),t]),d.push(o.shift()),d=[o.pop()];o.length;)u.push([o.shift()]);f=r.slice(a.length-(d[0]?d[0].length:0)).reduce((function(e,t){return e+t}),0)}else d=[a];u.push(d),h=f+l,m=g}else d.push(a),h+=m+f,m=g}return c=l?function(e,t){return(t?x:"")+e.join(" ")}:function(e){return e.join(" ")},u.map(c)},qt.splitTextToSize=function(e,t,n){var a,r=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/r;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=n.lineIndent;var o,l,c=[];for(o=0,l=a.length;o<l;o++)c=c.concat(Vt.apply(this,[a[o],i,s]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},s=0;s<16;s++)n[t[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=t[s];var i=function(e){return"0x"+parseInt(e,10).toString(16)},o=e.__fontmetrics__.compress=function(e){var t,n,s,l,c=["{"];for(var d in e){if(t=e[d],isNaN(parseInt(d,10))?n="'"+d+"'":(d=parseInt(d,10),n=(n=i(d).slice(2)).slice(0,-1)+r[n.slice(-1)]),"number"==typeof t)t<0?(s=i(t).slice(3),l="-"):(s=i(t).slice(2),l=""),s=l+s.slice(0,-1)+r[s.slice(-1)];else{if("object"!==(0,a.A)(t))throw new Error("Don't know what to do with value type "+(0,a.A)(t)+".");s=o(t)}c.push(n+s)}return c.push("}"),c.join("")},l=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,a,r,s,i={},o=1,l=i,c=[],d="",u="",h=e.length-1,m=1;m<h;m+=1)"'"==(s=e[m])?t?(r=t.join(""),t=void 0):t=[]:t?t.push(s):"{"==s?(c.push([l,r]),l={},r=void 0):"}"==s?((a=c.pop())[0][a[1]]=l,r=void 0,l=a[0]):"-"==s?o=-1:void 0===r?n.hasOwnProperty(s)?(d+=n[s],r=parseInt(d,16)*o,o=1,d=""):d+=s:n.hasOwnProperty(s)?(u+=n[s],l[r]=parseInt(u,16)*o,o=1,r=void 0,u=""):u+=s;return i},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,n=u.Unicode[t.postScriptName];n&&(t.metadata.Unicode={},t.metadata.Unicode.widths=n.widths,t.metadata.Unicode.kerning=n.kerning);var a=d.Unicode[t.postScriptName];a&&(t.metadata.Unicode.encoding=a,t.encoding=a.codePages[0])}])}(Me.API),function(e){var t=function(e){for(var t=e.length,n=new Uint8Array(t),a=0;a<t;a++)n[a]=e.charCodeAt(a);return n};e.API.events.push(["addFont",function(n){var a=void 0,r=n.font,s=n.instance;if(!r.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if("string"!=typeof(a=!1===s.existsFileInVFS(r.postScriptName)?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");!function(n,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(ie(a)),n.metadata=e.API.TTFFont.open(a),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(r,a)}}])}(Me),function(){function e(){return(ee.canvg?Promise.resolve(ee.canvg):n.e(455).then(n.bind(n,8455))).catch((function(e){return Promise.reject(new Error("Could not load canvg: "+e))})).then((function(e){return e.default?e.default:e}))}Me.API.addSvgAsImage=function(t,n,a,r,s,i,o,l){if(isNaN(n)||isNaN(a))throw ne.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(s))throw ne.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=s;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return e().then((function(e){return e.fromString(d,t,u)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(e){return e.render(u)})).then((function(){h.addImage(c.toDataURL("image/jpeg",1),n,a,r,s,o,l)}))}}(),Me.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var r=0;r<this.internal.pages[a].length;r++)this.internal.pages[a][r]=this.internal.pages[a][r].replace(t,n);return this},Me.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function m(e,t){var n,a=!1;for(n=0;n<e.length;n+=1)e[n]===t&&(a=!0);return a}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var f=l.length;for(h=0;h<f;h+=1)n[l[h]].value=n[l[h]].defaultValue,n[l[h]].explicitSet=!1}if("object"===(0,a.A)(e))for(s in e)if(i=e[s],m(l,s)&&void 0!==i){if("boolean"===n[s].type&&"boolean"==typeof i)n[s].value=i;else if("name"===n[s].type&&m(n[s].valueSet,i))n[s].value=i;else if("integer"===n[s].type&&Number.isInteger(i))n[s].value=i;else if("array"===n[s].type){for(d=0;d<i.length;d+=1)if(r=!0,1===i[d].length&&"number"==typeof i[d][0])c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)"number"!=typeof i[d][u]&&(r=!1);!0===r&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}n[s].value="["+c.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var e,t=[];for(e in n)!0===n[e].explicitSet&&("name"===n[e].type?t.push("/"+e+" /"+n[e].value):t.push("/"+e+" "+n[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(e)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),r=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),s=unescape(encodeURIComponent("</x:xmpmeta>")),i=n.length+a.length+r.length+t.length+s.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+i+" >>"),this.internal.write("stream"),this.internal.write(t+n+a+r+s),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,a){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Me.API),function(e){var t=e.API,n=t.pdfEscape16=function(e,t){for(var n,a=t.metadata.Unicode.widths,r=["","0","00","000","0000"],s=[""],i=0,o=e.length;i<o;++i){if(n=t.metadata.characterToGlyph(e.charCodeAt(i)),t.metadata.glyIdsUsed.push(n),t.metadata.toUnicode[n]=e.charCodeAt(i),-1==a.indexOf(n)&&(a.push(n),a.push([parseInt(t.metadata.widthOfGlyph(n),10)])),"0"==n)return s.join("");n=n.toString(16),s.push(r[4-n.length],n)}return s.join("")},a=function(e){var t,n,a,r,s,i,o;for(s="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",a=[],i=0,o=(n=Object.keys(e).sort((function(e,t){return e-t}))).length;i<o;i++)t=n[i],a.length>=100&&(s+="\n"+a.length+" beginbfchar\n"+a.join("\n")+"\nendbfchar",a=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(r=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),a.push("<"+t+"><"+r+">"));return a.length&&(s+="\n"+a.length+" beginbfchar\n"+a.join("\n")+"\nendbfchar\n"),s+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var n=t.font,r=t.out,s=t.newObject,i=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"Identity-H"===n.encoding){for(var o=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",d=0;d<l.length;d++)c+=String.fromCharCode(l[d]);var u=s();i({data:c,addLength1:!0,objectId:u}),r("endobj");var h=s();i({data:a(n.metadata.toUnicode),addLength1:!0,objectId:h}),r("endobj");var m=s();r("<<"),r("/Type /FontDescriptor"),r("/FontName /"+Ce(n.fontName)),r("/FontFile2 "+u+" 0 R"),r("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),r("/Flags "+n.metadata.flags),r("/StemV "+n.metadata.stemV),r("/ItalicAngle "+n.metadata.italicAngle),r("/Ascent "+n.metadata.ascender),r("/Descent "+n.metadata.decender),r("/CapHeight "+n.metadata.capHeight),r(">>"),r("endobj");var f=s();r("<<"),r("/Type /Font"),r("/BaseFont /"+Ce(n.fontName)),r("/FontDescriptor "+m+" 0 R"),r("/W "+e.API.PDFObject.convert(o)),r("/CIDToGIDMap /Identity"),r("/DW 1000"),r("/Subtype /CIDFontType2"),r("/CIDSystemInfo"),r("<<"),r("/Supplement 0"),r("/Registry (Adobe)"),r("/Ordering ("+n.encoding+")"),r(">>"),r(">>"),r("endobj"),n.objectNumber=s(),r("<<"),r("/Type /Font"),r("/Subtype /Type0"),r("/ToUnicode "+h+" 0 R"),r("/BaseFont /"+Ce(n.fontName)),r("/Encoding /"+n.encoding),r("/DescendantFonts ["+f+" 0 R]"),r(">>"),r("endobj"),n.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var n=t.font,r=t.out,s=t.newObject,i=t.putStream;if(n.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var o=n.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var d=s();i({data:l,addLength1:!0,objectId:d}),r("endobj");var u=s();i({data:a(n.metadata.toUnicode),addLength1:!0,objectId:u}),r("endobj");var h=s();r("<<"),r("/Descent "+n.metadata.decender),r("/CapHeight "+n.metadata.capHeight),r("/StemV "+n.metadata.stemV),r("/Type /FontDescriptor"),r("/FontFile2 "+d+" 0 R"),r("/Flags 96"),r("/FontBBox "+e.API.PDFObject.convert(n.metadata.bbox)),r("/FontName /"+Ce(n.fontName)),r("/ItalicAngle "+n.metadata.italicAngle),r("/Ascent "+n.metadata.ascender),r(">>"),r("endobj"),n.objectNumber=s();for(var m=0;m<n.metadata.hmtx.widths.length;m++)n.metadata.hmtx.widths[m]=parseInt(n.metadata.hmtx.widths[m]*(1e3/n.metadata.head.unitsPerEm));r("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+Ce(n.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),r("endobj"),n.isAlreadyPutted=!0}}(t)}]);var r=function(e){var t,a=e.text||"",r=e.x,s=e.y,i=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,d=o.fonts,u=c,h="",m=0,f="",p=d[u].encoding;if("Identity-H"!==d[u].encoding)return{text:a,x:r,y:s,options:i,mutex:o};for(f=a,u=c,Array.isArray(a)&&(f=a[0]),m=0;m<f.length;m+=1)d[u].metadata.hasOwnProperty("cmap")&&(t=d[u].metadata.cmap.unicode.codeMap[f[m].charCodeAt(0)]),t||f[m].charCodeAt(0)<256&&d[u].metadata.hasOwnProperty("Unicode")?h+=f[m]:h+="";var g="";return parseInt(u.slice(1))<14||"WinAnsiEncoding"===p?g=l(h,u).split("").map((function(e){return e.charCodeAt(0).toString(16)})).join(""):"Identity-H"===p&&(g=n(h,d[u])),o.isHex=!0,{text:g,x:r,y:s,options:i,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",n=[],a={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var s=0;for(s=0;s<t.length;s+=1)Array.isArray(t[s])&&3===t[s].length?n.push([r(Object.assign({},a,{text:t[s][0]})).text,t[s][1],t[s][2]]):n.push(r(Object.assign({},a,{text:t[s]})).text);e.text=n}else e.text=r(Object.assign({},a,{text:t})).text}])}(Me),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,n){return t.call(this),this.internal.vFS[e]=n,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(Me.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var n,a,r,s,i,o,l,c=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},f=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],p=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,x=0;this.__bidiEngine__={};var b=function(e){var t=e.charCodeAt(),n=t>>8,a=m[n];return void 0!==a?c[256*a+(255&t)]:252===n||253===n?"AL":p.test(n)?"L":8===n?"R":"N"},v=function(e){for(var t,n=0;n<e.length;n++){if("L"===(t=b(e.charAt(n))))return!1;if("R"===t)return!0}return!1},y=function(e,t,i,o){var l,c,d,u,h=t[o];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(h="AN");break;case"AL":g=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=i[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?h="N":g&&(c="AN"),h=c===l?c:"N";break;case"ES":h="EN"===(l=o>0?i[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===i[o-1]){h="EN";break}if(g){h="N";break}for(d=o+1,u=t.length;d<u&&"ET"===t[d];)d++;h=d<u&&"EN"===t[d]?"EN":"N";break;case"NSM":if(r&&!s){for(u=t.length,d=o+1;d<u&&"NSM"===t[d];)d++;if(d<u){var m=e[o],f=m>=1425&&m<=2303||64286===m;if(l=t[d],f&&("R"===l||"AL"===l)){h="R";break}}}h=o<1||"B"===(l=t[o-1])?"N":i[o-1];break;case"B":g=!1,n=!0,h=x;break;case"S":a=!0,h="N"}return h},w=function(e,t,n){var a=e.split("");return n&&j(a,n,{hiLevel:x}),a.reverse(),t&&t.reverse(),a.join("")},j=function(e,t,r){var s,i,o,l,c,m=-1,f=e.length,p=0,v=[],w=x?u:d,j=[];for(g=!1,n=!1,a=!1,i=0;i<f;i++)j[i]=b(e[i]);for(o=0;o<f;o++){if(c=p,v[o]=y(e,j,v,o),s=240&(p=w[c][h[v[o]]]),p&=15,t[o]=l=w[p][5],s>0)if(16===s){for(i=m;i<o;i++)t[i]=1;m=-1}else m=-1;if(w[p][6])-1===m&&(m=o);else if(m>-1){for(i=m;i<o;i++)t[i]=l;m=-1}"B"===j[o]&&(t[o]=0),r.hiLevel|=l}a&&function(e,t,n){for(var a=0;a<n;a++)if("S"===e[a]){t[a]=x;for(var r=a-1;r>=0&&"WS"===e[r];r--)t[r]=x}}(j,t,f)},N=function(e,t,a,r,s){if(!(s.hiLevel<e)){if(1===e&&1===x&&!n)return t.reverse(),void(a&&a.reverse());for(var i,o,l,c,d=t.length,u=0;u<d;){if(r[u]>=e){for(l=u+1;l<d&&r[l]>=e;)l++;for(c=u,o=l-1;c<o;c++,o--)i=t[c],t[c]=t[o],t[o]=i,a&&(i=a[c],a[c]=a[o],a[o]=i);u=l}u++}}},_=function(e,t,n){var a=e.split(""),r={hiLevel:x};return n||(n=[]),j(a,n,r),function(e,t,n){if(0!==n.hiLevel&&l)for(var a,r=0;r<e.length;r++)1===t[r]&&(a=f.indexOf(e[r]))>=0&&(e[r]=f[a+1])}(a,n,r),N(2,a,t,n,r),N(1,a,t,n,r),a.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,n){if(function(e,t){if(t)for(var n=0;n<e.length;n++)t[n]=n;void 0===s&&(s=v(e)),void 0===o&&(o=v(e))}(e,t),r||!i||o)if(r&&i&&s^o)x=s?1:0,e=w(e,t,n);else if(!r&&i&&o)x=s?1:0,e=_(e,t,n),e=w(e,t);else if(!r||s||i||o){if(r&&!i&&s^o)e=w(e,t),s?(x=0,e=_(e,t,n)):(x=1,e=_(e,t,n),e=w(e,t));else if(r&&s&&!i&&o)x=1,e=_(e,t,n),e=w(e,t);else if(!r&&!i&&s^o){var a=l;s?(x=1,e=_(e,t,n),x=0,l=!1,e=_(e,t,n),l=a):(x=0,e=_(e,t,n),e=w(e,t),x=1,l=!1,e=_(e,t,n),l=a,e=w(e,t))}}else x=0,e=_(e,t,n);else x=s?1:0,e=_(e,t,n);return e},this.__bidiEngine__.setOptions=function(e){e&&(r=e.isInputVisual,i=e.isOutputVisual,s=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text,a=(e.x,e.y,e.options||{}),r=(e.mutex,a.lang,[]);if(a.isInputVisual="boolean"!=typeof a.isInputVisual||a.isInputVisual,n.setOptions(a),"[object Array]"===Object.prototype.toString.call(t)){var s=0;for(r=[],s=0;s<t.length;s+=1)"[object Array]"===Object.prototype.toString.call(t[s])?r.push([n.doBidiReorder(t[s][0]),t[s][1],t[s][2]]):r.push([n.doBidiReorder(t[s])]);e.text=r}else e.text=n.doBidiReorder(t);n.setOptions({isInputVisual:!0})}])}(Me),Me.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new Zt(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new vn(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new en(this.contents),this.head=new an(this),this.name=new un(this),this.cmap=new sn(this),this.toUnicode={},this.hhea=new on(this),this.maxp=new hn(this),this.hmtx=new mn(this),this.post=new cn(this),this.os2=new ln(this),this.loca=new bn(this),this.glyf=new pn(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,n,a,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,n,a,r;for(r=[],t=0,n=(a=this.bbox).length;t<n;t++)e=a[t],r.push(Math.round(e*this.scaleFactor));return r}.call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),0!=(32768&(t=a>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(r=this.familyClass)||2===r||3===r||4===r||5===r||7===r,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,n){var a,r,s,i;for(s=0,r=0,i=(e=""+e).length;0<=i?r<i:r>i;r=0<=i?++r:--r)a=e.charCodeAt(r),s+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/t)||0;return s*(t/1e3)},e.prototype.lineHeight=function(e,t){var n;return null==t&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},e}();var Qt,Zt=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(e){var t,n,a;for(a=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)a.push(this.writeByte(e.charCodeAt(t)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,n,a,r,s,i,o;return e=this.readByte(),t=this.readByte(),n=this.readByte(),a=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^r)+65536*(255^s)+256*(255^i)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*a+16777216*r+65536*s+256*i+o},e.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},e.prototype.write=function(e){var t,n,a,r;for(r=[],n=0,a=e.length;n<a;n++)t=e[n],r.push(this.writeByte(t));return r},e}(),en=function(){var e;function t(e){var t,n,a;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},n=0,a=this.tableCount;0<=a?n<a:n>a;n=0<=a?++n:--n)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var n,a,r,s,i,o,l,c,d,u,h,m,f;for(f in h=Object.keys(t).length,o=Math.log(2),d=16*Math.floor(Math.log(h)/o),s=Math.floor(d/o),c=16*h-d,(a=new Zt).writeInt(this.scalarType),a.writeShort(h),a.writeShort(d),a.writeShort(s),a.writeShort(c),r=16*h,l=a.pos+r,i=null,m=[],t)for(u=t[f],a.writeString(f),a.writeInt(e(u)),a.writeInt(l),a.writeInt(u.length),m=m.concat(u),"head"===f&&(i=l),l+=u.length;l%4;)m.push(0),l++;return a.write(m),n=2981146554-e(a.data),a.pos=i+8,a.writeUInt32(n),a.data},e=function(e){var t,n,a,r;for(e=fn.call(e);e.length%4;)e.push(0);for(a=new Zt(e),n=0,t=0,r=e.length;t<r;t=t+=4)n+=a.readUInt32();return 4294967295&n},t}(),tn={}.hasOwnProperty,nn=function(e,t){for(var n in t)tn.call(t,n)&&(e[n]=t[n]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};Qt=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var an=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Qt),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new Zt).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),rn=function(){function e(e,t){var n,a,r,s,i,o,l,c,d,u,h,m,f,p,g,x,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(h=e.readUInt16(),u=h/2,e.pos+=6,r=function(){var t,n;for(n=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)n.push(e.readUInt16());return n}(),e.pos+=2,f=function(){var t,n;for(n=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)n.push(e.readUInt16());return n}(),l=function(){var t,n;for(n=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)n.push(e.readUInt16());return n}(),c=function(){var t,n;for(n=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)n.push(e.readUInt16());return n}(),a=(this.length-e.pos+this.offset)/2,i=function(){var t,n;for(n=[],o=t=0;0<=a?t<a:t>a;o=0<=a?++t:--t)n.push(e.readUInt16());return n}(),o=g=0,b=r.length;g<b;o=++g)for(p=r[o],n=x=m=f[o];m<=p?x<=p:x>=p;n=m<=p?++x:--x)0===c[o]?s=n+l[o]:0!==(s=i[c[o]/2+(n-m)-(u-o)]||0)&&(s+=l[o]),this.codeMap[n]=65535&s}e.pos=d}return e.encode=function(e,t){var n,a,r,s,i,o,l,c,d,u,h,m,f,p,g,x,b,v,y,w,j,N,_,S,k,C,A,P,L,E,D,M,O,T,R,I,F,z,B,q,U,W,H,V,Y,G;switch(P=new Zt,s=Object.keys(e).sort((function(e,t){return e-t})),t){case"macroman":for(f=0,p=function(){var e=[];for(m=0;m<256;++m)e.push(0);return e}(),x={0:0},r={},L=0,O=s.length;L<O;L++)null==x[H=e[a=s[L]]]&&(x[H]=++f),r[a]={old:e[a],new:x[e[a]]},p[a]=x[e[a]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(p),{charMap:r,subtable:P.data,maxGlyphID:f+1};case"unicode":for(C=[],d=[],b=0,x={},n={},g=l=null,E=0,T=s.length;E<T;E++)null==x[y=e[a=s[E]]]&&(x[y]=++b),n[a]={old:y,new:x[y]},i=x[y]-a,null!=g&&i===l||(g&&d.push(g),C.push(a),l=i),g=a;for(g&&d.push(g),d.push(65535),C.push(65535),S=2*(_=C.length),N=2*Math.pow(Math.log(_)/Math.LN2,2),u=Math.log(N/2)/Math.LN2,j=2*_-N,o=[],w=[],h=[],m=D=0,R=C.length;D<R;m=++D){if(k=C[m],c=d[m],65535===k){o.push(0),w.push(0);break}if(k-(A=n[k].new)>=32768)for(o.push(0),w.push(2*(h.length+_-m)),a=M=k;k<=c?M<=c:M>=c;a=k<=c?++M:--M)h.push(n[a].new);else o.push(A-k),w.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*_+2*h.length),P.writeUInt16(0),P.writeUInt16(S),P.writeUInt16(N),P.writeUInt16(u),P.writeUInt16(j),U=0,I=d.length;U<I;U++)a=d[U],P.writeUInt16(a);for(P.writeUInt16(0),W=0,F=C.length;W<F;W++)a=C[W],P.writeUInt16(a);for(V=0,z=o.length;V<z;V++)i=o[V],P.writeUInt16(i);for(Y=0,B=w.length;Y<B;Y++)v=w[Y],P.writeUInt16(v);for(G=0,q=h.length;G<q;G++)f=h[G],P.writeUInt16(f);return{charMap:n,subtable:P.data,maxGlyphID:b+1}}},e}(),sn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Qt),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,n,a;for(e.pos=this.offset,this.version=e.readUInt16(),a=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)t=new rn(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var n,a;return null==t&&(t="macroman"),n=rn.encode(e,t),(a=new Zt).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e}(),on=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Qt),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),ln=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Qt),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,n;for(n=[],t=0;t<10;++t)n.push(e.readByte());return n}(),this.charRange=function(){var t,n;for(n=[],t=0;t<4;++t)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,n;for(n=[],t=0;t<2;t=++t)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),cn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Qt),e.prototype.tag="post",e.prototype.parse=function(e){var t,n,a;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var r;for(n=e.readUInt16(),this.glyphNameIndex=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],a=[];e.pos<this.offset+this.length;)t=e.readByte(),a.push(this.names.push(e.readString(t)));return a;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=function(){var t,n,a;for(a=[],r=t=0,n=this.file.maxp.numGlyphs;0<=n?t<n:t>n;r=0<=n?++t:--t)a.push(e.readUInt32());return a}.call(this)}},e}(),dn=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},un=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Qt),e.prototype.tag="name",e.prototype.parse=function(e){var t,n,a,r,s,i,o,l,c,d,u;for(e.pos=this.offset,e.readShort(),t=e.readShort(),i=e.readShort(),n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+i+e.readShort()});for(o={},r=c=0,d=n.length;c<d;r=++c)a=n[r],e.pos=a.offset,l=e.readString(a.length),s=new dn(l,a),null==o[u=a.nameID]&&(o[u]=[]),o[a.nameID].push(s);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),hn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Qt),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),mn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Qt),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,n,a,r,s,i,o;for(e.pos=this.offset,this.metrics=[],t=0,i=this.file.hhea.numberOfMetrics;0<=i?t<i:t>i;t=0<=i?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,r;for(r=[],t=n=0;0<=a?n<a:n>a;t=0<=a?++n:--n)r.push(e.readInt16());return r}(),this.widths=function(){var e,t,n,a;for(a=[],e=0,t=(n=this.metrics).length;e<t;e++)r=n[e],a.push(r.advance);return a}.call(this),n=this.widths[this.widths.length-1],o=[],t=s=0;0<=a?s<a:s>a;t=0<=a?++s:--s)o.push(this.widths.push(n));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),fn=[].slice,pn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Qt),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,n,a,r,s,i,o,l,c,d;return e in this.cache?this.cache[e]:(r=this.file.loca,t=this.file.contents,n=r.indexOf(e),0===(a=r.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+n,s=(i=new Zt(t.read(a))).readShort(),l=i.readShort(),d=i.readShort(),o=i.readShort(),c=i.readShort(),this.cache[e]=-1===s?new xn(i,l,d,o,c):new gn(i,s,l,d,o,c),this.cache[e]))},e.prototype.encode=function(e,t,n){var a,r,s,i,o;for(s=[],r=[],i=0,o=t.length;i<o;i++)a=e[t[i]],r.push(s.length),a&&(s=s.concat(a.encode(n)));return r.push(s.length),{table:s,offsets:r}},e}(),gn=function(){function e(e,t,n,a,r,s){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=a,this.xMax=r,this.yMax=s,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),xn=function(){function e(e,t,n,a,r){var s,i;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=a,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;i=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&i;)s.pos+=1&i?4:2,128&i?s.pos+=8:64&i?s.pos+=4:8&i&&(s.pos+=2)}return e.prototype.encode=function(){var e,t,n;for(t=new Zt(fn.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),bn=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return nn(e,Qt),e.prototype.tag="loca",e.prototype.parse=function(e){var t,n;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,a;for(a=[],n=0,t=this.length;n<t;n+=2)a.push(2*e.readUInt16());return a}.call(this):function(){var t,a;for(a=[],n=0,t=this.length;n<t;n+=4)a.push(e.readUInt32());return a}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var n=new Uint32Array(this.offsets.length),a=0,r=0,s=0;s<n.length;++s)if(n[s]=a,r<t.length&&t[r]==s){++r,n[s]=a;var i=this.offsets[s],o=this.offsets[s+1]-i;o>0&&(a+=o)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),vn=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,n,a,r;for(t in a=this.font.cmap.tables[0].codeMap,e={},r=this.subset)n=r[t],e[t]=a[n];return e},e.prototype.glyphsFor=function(e){var t,n,a,r,s,i,o;for(a={},s=0,i=e.length;s<i;s++)a[r=e[s]]=this.font.glyf.glyphFor(r);for(r in t=[],a)(null!=(n=a[r])?n.compound:void 0)&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(r in o=this.glyphsFor(t))n=o[r],a[r]=n;return a},e.prototype.encode=function(e,t){var n,a,r,s,i,o,l,c,d,u,h,m,f,p,g;for(a in n=sn.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),h={0:0},g=n.charMap)h[(o=g[a]).old]=o.new;for(m in u=n.maxGlyphID,s)m in h||(h[m]=u++);return c=function(e){var t,n;for(t in n={},e)n[e[t]]=t;return n}(h),d=Object.keys(c).sort((function(e,t){return e-t})),f=function(){var e,t,n;for(n=[],e=0,t=d.length;e<t;e++)i=d[e],n.push(c[i]);return n}(),r=this.font.glyf.encode(s,f,h),l=this.font.loca.encode(r.offsets,f),p={cmap:this.font.cmap.raw(),glyf:r.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},e}();Me.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(n){var a,r,s,i;if(Array.isArray(n))return"["+function(){var e,r,s;for(s=[],e=0,r=n.length;e<r;e++)a=n[e],s.push(t.convert(a));return s}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(r in s=["<<"],n)i=n[r],s.push("/"+r+" "+t.convert(i));return s.push(">>"),s.join("\n")}return""+n},t}();const yn=Me},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},9379:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(4980);function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){(0,a.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},9722:(e,t,n)=>{"use strict";n.d(t,{A:()=>Pt});var a={};function r(e,t){return function(){return e.apply(t,arguments)}}n.r(a),n.d(a,{hasBrowserEnv:()=>de,hasStandardBrowserEnv:()=>he,hasStandardBrowserWebWorkerEnv:()=>me,navigator:()=>ue,origin:()=>fe});const{toString:s}=Object.prototype,{getPrototypeOf:i}=Object,{iterator:o,toStringTag:l}=Symbol,c=(d=Object.create(null),e=>{const t=s.call(e);return d[t]||(d[t]=t.slice(8,-1).toLowerCase())});var d;const u=e=>(e=e.toLowerCase(),t=>c(t)===e),h=e=>t=>typeof t===e,{isArray:m}=Array,f=h("undefined");function p(e){return null!==e&&!f(e)&&null!==e.constructor&&!f(e.constructor)&&b(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const g=u("ArrayBuffer");const x=h("string"),b=h("function"),v=h("number"),y=e=>null!==e&&"object"===typeof e,w=e=>{if("object"!==c(e))return!1;const t=i(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(l in e)&&!(o in e)},j=u("Date"),N=u("File"),_=u("Blob"),S=u("FileList"),k=u("URLSearchParams"),[C,A,P,L]=["ReadableStream","Request","Response","Headers"].map(u);function E(e,t){let n,a,{allOwnKeys:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),m(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(p(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),s=a.length;let i;for(n=0;n<s;n++)i=a[n],t.call(null,e[i],i,e)}}function D(e,t){if(p(e))return null;t=t.toLowerCase();const n=Object.keys(e);let a,r=n.length;for(;r-- >0;)if(a=n[r],t===a.toLowerCase())return a;return null}const M="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,O=e=>!f(e)&&e!==M;const T=(R="undefined"!==typeof Uint8Array&&i(Uint8Array),e=>R&&e instanceof R);var R;const I=u("HTMLFormElement"),F=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),z=u("RegExp"),B=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};E(n,((n,r)=>{let s;!1!==(s=t(n,r,e))&&(a[r]=s||n)})),Object.defineProperties(e,a)};const q=u("AsyncFunction"),U=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),a=[],M.addEventListener("message",(e=>{let{source:t,data:r}=e;t===M&&r===n&&a.length&&a.shift()()}),!1),e=>{a.push(e),M.postMessage(n,"*")}):e=>setTimeout(e);var n,a})("function"===typeof setImmediate,b(M.postMessage)),W="undefined"!==typeof queueMicrotask?queueMicrotask.bind(M):"undefined"!==typeof process&&process.nextTick||U,H={isArray:m,isArrayBuffer:g,isBuffer:p,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||b(e.append)&&("formdata"===(t=c(e))||"object"===t&&b(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&g(e.buffer),t},isString:x,isNumber:v,isBoolean:e=>!0===e||!1===e,isObject:y,isPlainObject:w,isEmptyObject:e=>{if(!y(e)||p(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:C,isRequest:A,isResponse:P,isHeaders:L,isUndefined:f,isDate:j,isFile:N,isBlob:_,isRegExp:z,isFunction:b,isStream:e=>y(e)&&b(e.pipe),isURLSearchParams:k,isTypedArray:T,isFileList:S,forEach:E,merge:function e(){const{caseless:t}=O(this)&&this||{},n={},a=(a,r)=>{const s=t&&D(n,r)||r;w(n[s])&&w(a)?n[s]=e(n[s],a):w(a)?n[s]=e({},a):m(a)?n[s]=a.slice():n[s]=a};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&E(arguments[r],a);return n},extend:function(e,t,n){let{allOwnKeys:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return E(t,((t,a)=>{n&&b(t)?e[a]=r(t,n):e[a]=t}),{allOwnKeys:a}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,a)=>{let r,s,o;const l={};if(t=t||{},null==e)return t;do{for(r=Object.getOwnPropertyNames(e),s=r.length;s-- >0;)o=r[s],a&&!a(o,e,t)||l[o]||(t[o]=e[o],l[o]=!0);e=!1!==n&&i(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:u,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return-1!==a&&a===n},toArray:e=>{if(!e)return null;if(m(e))return e;let t=e.length;if(!v(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[o]).call(e);let a;for(;(a=n.next())&&!a.done;){const n=a.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const a=[];for(;null!==(n=e.exec(t));)a.push(n);return a},isHTMLForm:I,hasOwnProperty:F,hasOwnProp:F,reduceDescriptors:B,freezeMethods:e=>{B(e,((t,n)=>{if(b(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const a=e[n];b(a)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},a=e=>{e.forEach((e=>{n[e]=!0}))};return m(e)?a(e):a(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:D,global:M,isContextDefined:O,isSpecCompliantForm:function(e){return!!(e&&b(e.append)&&"FormData"===e[l]&&e[o])},toJSONObject:e=>{const t=new Array(10),n=(e,a)=>{if(y(e)){if(t.indexOf(e)>=0)return;if(p(e))return e;if(!("toJSON"in e)){t[a]=e;const r=m(e)?[]:{};return E(e,((e,t)=>{const s=n(e,a+1);!f(s)&&(r[t]=s)})),t[a]=void 0,r}}return e};return n(e,0)},isAsyncFn:q,isThenable:e=>e&&(y(e)||b(e))&&b(e.then)&&b(e.catch),setImmediate:U,asap:W,isIterable:e=>null!=e&&b(e[o])};function V(e,t,n,a,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),a&&(this.request=a),r&&(this.response=r,this.status=r.status?r.status:null)}H.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const Y=V.prototype,G={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{G[e]={value:e}})),Object.defineProperties(V,G),Object.defineProperty(Y,"isAxiosError",{value:!0}),V.from=(e,t,n,a,r,s)=>{const i=Object.create(Y);return H.toFlatObject(e,i,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),V.call(i,e.message,t,n,a,r),i.cause=e,i.name=e.name,s&&Object.assign(i,s),i};const $=V;function X(e){return H.isPlainObject(e)||H.isArray(e)}function K(e){return H.endsWith(e,"[]")?e.slice(0,-2):e}function J(e,t,n){return e?e.concat(t).map((function(e,t){return e=K(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Q=H.toFlatObject(H,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Z=function(e,t,n){if(!H.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const a=(n=H.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!H.isUndefined(t[e])}))).metaTokens,r=n.visitor||c,s=n.dots,i=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&H.isSpecCompliantForm(t);if(!H.isFunction(r))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(H.isDate(e))return e.toISOString();if(H.isBoolean(e))return e.toString();if(!o&&H.isBlob(e))throw new $("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(e)||H.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,r){let o=e;if(e&&!r&&"object"===typeof e)if(H.endsWith(n,"{}"))n=a?n:n.slice(0,-2),e=JSON.stringify(e);else if(H.isArray(e)&&function(e){return H.isArray(e)&&!e.some(X)}(e)||(H.isFileList(e)||H.endsWith(n,"[]"))&&(o=H.toArray(e)))return n=K(n),o.forEach((function(e,a){!H.isUndefined(e)&&null!==e&&t.append(!0===i?J([n],a,s):null===i?n:n+"[]",l(e))})),!1;return!!X(e)||(t.append(J(r,n,s),l(e)),!1)}const d=[],u=Object.assign(Q,{defaultVisitor:c,convertValue:l,isVisitable:X});if(!H.isObject(e))throw new TypeError("data must be an object");return function e(n,a){if(!H.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+a.join("."));d.push(n),H.forEach(n,(function(n,s){!0===(!(H.isUndefined(n)||null===n)&&r.call(t,n,H.isString(s)?s.trim():s,a,u))&&e(n,a?a.concat(s):[s])})),d.pop()}}(e),t};function ee(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function te(e,t){this._pairs=[],e&&Z(e,this,t)}const ne=te.prototype;ne.append=function(e,t){this._pairs.push([e,t])},ne.toString=function(e){const t=e?function(t){return e.call(this,t,ee)}:ee;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const ae=te;function re(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function se(e,t,n){if(!t)return e;const a=n&&n.encode||re;H.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let s;if(s=r?r(t,n):H.isURLSearchParams(t)?t.toString():new ae(t,n).toString(a),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const ie=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},oe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var le=n(9379);const ce={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ae,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},de="undefined"!==typeof window&&"undefined"!==typeof document,ue="object"===typeof navigator&&navigator||void 0,he=de&&(!ue||["ReactNative","NativeScript","NS"].indexOf(ue.product)<0),me="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,fe=de&&window.location.href||"http://localhost",pe=(0,le.A)((0,le.A)({},a),ce);const ge=function(e){function t(e,n,a,r){let s=e[r++];if("__proto__"===s)return!0;const i=Number.isFinite(+s),o=r>=e.length;if(s=!s&&H.isArray(a)?a.length:s,o)return H.hasOwnProp(a,s)?a[s]=[a[s],n]:a[s]=n,!i;a[s]&&H.isObject(a[s])||(a[s]=[]);return t(e,n,a[s],r)&&H.isArray(a[s])&&(a[s]=function(e){const t={},n=Object.keys(e);let a;const r=n.length;let s;for(a=0;a<r;a++)s=n[a],t[s]=e[s];return t}(a[s])),!i}if(H.isFormData(e)&&H.isFunction(e.entries)){const n={};return H.forEachEntry(e,((e,a)=>{t(function(e){return H.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),a,n,0)})),n}return null};const xe={transitional:oe,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",a=n.indexOf("application/json")>-1,r=H.isObject(e);r&&H.isHTMLForm(e)&&(e=new FormData(e));if(H.isFormData(e))return a?JSON.stringify(ge(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Z(e,new pe.classes.URLSearchParams,(0,le.A)({visitor:function(e,t,n,a){return pe.isNode&&H.isBuffer(e)?(this.append(t,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=H.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Z(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return r||a?(t.setContentType("application/json",!1),function(e,t,n){if(H.isString(e))try{return(t||JSON.parse)(e),H.trim(e)}catch(a){if("SyntaxError"!==a.name)throw a}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||xe.transitional,n=t&&t.forcedJSONParsing,a="json"===this.responseType;if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(n&&!this.responseType||a)){const n=!(t&&t.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(r){if(n){if("SyntaxError"===r.name)throw $.from(r,$.ERR_BAD_RESPONSE,this,null,this.response);throw r}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pe.classes.FormData,Blob:pe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],(e=>{xe.headers[e]={}}));const be=xe,ve=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ye=Symbol("internals");function we(e){return e&&String(e).trim().toLowerCase()}function je(e){return!1===e||null==e?e:H.isArray(e)?e.map(je):String(e)}function Ne(e,t,n,a,r){return H.isFunction(a)?a.call(this,t,n):(r&&(t=n),H.isString(t)?H.isString(a)?-1!==t.indexOf(a):H.isRegExp(a)?a.test(t):void 0:void 0)}class _e{constructor(e){e&&this.set(e)}set(e,t,n){const a=this;function r(e,t,n){const r=we(t);if(!r)throw new Error("header name must be a non-empty string");const s=H.findKey(a,r);(!s||void 0===a[s]||!0===n||void 0===n&&!1!==a[s])&&(a[s||t]=je(e))}const s=(e,t)=>H.forEach(e,((e,n)=>r(e,n,t)));if(H.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(H.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,a,r;return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),n=e.substring(0,r).trim().toLowerCase(),a=e.substring(r+1).trim(),!n||t[n]&&ve[n]||("set-cookie"===n?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)})),t})(e),t);else if(H.isObject(e)&&H.isIterable(e)){let n,a,r={};for(const t of e){if(!H.isArray(t))throw TypeError("Object iterator must return a key-value pair");r[a=t[0]]=(n=r[a])?H.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(r,t)}else null!=e&&r(t,e,n);return this}get(e,t){if(e=we(e)){const n=H.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}(e);if(H.isFunction(t))return t.call(this,e,n);if(H.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=we(e)){const n=H.findKey(this,e);return!(!n||void 0===this[n]||t&&!Ne(0,this[n],n,t))}return!1}delete(e,t){const n=this;let a=!1;function r(e){if(e=we(e)){const r=H.findKey(n,e);!r||t&&!Ne(0,n[r],r,t)||(delete n[r],a=!0)}}return H.isArray(e)?e.forEach(r):r(e),a}clear(e){const t=Object.keys(this);let n=t.length,a=!1;for(;n--;){const r=t[n];e&&!Ne(0,this[r],r,e,!0)||(delete this[r],a=!0)}return a}normalize(e){const t=this,n={};return H.forEach(this,((a,r)=>{const s=H.findKey(n,r);if(s)return t[s]=je(a),void delete t[r];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(r):String(r).trim();i!==r&&delete t[r],t[i]=je(a),n[i]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return H.forEach(this,((n,a)=>{null!=n&&!1!==n&&(t[a]=e&&H.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return a.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[ye]=this[ye]={accessors:{}}).accessors,n=this.prototype;function a(e){const a=we(e);t[a]||(!function(e,t){const n=H.toCamelCase(" "+t);["get","set","has"].forEach((a=>{Object.defineProperty(e,a+n,{value:function(e,n,r){return this[a].call(this,t,e,n,r)},configurable:!0})}))}(n,e),t[a]=!0)}return H.isArray(e)?e.forEach(a):a(e),this}}_e.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),H.reduceDescriptors(_e.prototype,((e,t)=>{let{value:n}=e,a=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[a]=e}}})),H.freezeMethods(_e);const Se=_e;function ke(e,t){const n=this||be,a=t||n,r=Se.from(a.headers);let s=a.data;return H.forEach(e,(function(e){s=e.call(n,s,r.normalize(),t?t.status:void 0)})),r.normalize(),s}function Ce(e){return!(!e||!e.__CANCEL__)}function Ae(e,t,n){$.call(this,null==e?"canceled":e,$.ERR_CANCELED,t,n),this.name="CanceledError"}H.inherits(Ae,$,{__CANCEL__:!0});const Pe=Ae;function Le(e,t,n){const a=n.config.validateStatus;n.status&&a&&!a(n.status)?t(new $("Request failed with status code "+n.status,[$.ERR_BAD_REQUEST,$.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Ee=function(e,t){e=e||10;const n=new Array(e),a=new Array(e);let r,s=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=a[i];r||(r=l),n[s]=o,a[s]=l;let d=i,u=0;for(;d!==s;)u+=n[d++],d%=e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),l-r<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const De=function(e,t){let n,a,r=0,s=1e3/t;const i=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();r=s,n=null,a&&(clearTimeout(a),a=null),e(...t)};return[function(){const e=Date.now(),t=e-r;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=s?i(l,e):(n=l,a||(a=setTimeout((()=>{a=null,i(n)}),s-t)))},()=>n&&i(n)]},Me=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=0;const r=Ee(50,250);return De((n=>{const s=n.loaded,i=n.lengthComputable?n.total:void 0,o=s-a,l=r(o);a=s;e({loaded:s,total:i,progress:i?s/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&s<=i?(i-s)/l:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})}),n)},Oe=(e,t)=>{const n=null!=e;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},Te=e=>function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return H.asap((()=>e(...n)))},Re=pe.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,pe.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(pe.origin),pe.navigator&&/(msie|trident)/i.test(pe.navigator.userAgent)):()=>!0,Ie=pe.hasStandardBrowserEnv?{write(e,t,n,a,r,s){const i=[e+"="+encodeURIComponent(t)];H.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),H.isString(a)&&i.push("path="+a),H.isString(r)&&i.push("domain="+r),!0===s&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Fe(e,t,n){let a=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(a||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ze=e=>e instanceof Se?(0,le.A)({},e):e;function Be(e,t){t=t||{};const n={};function a(e,t,n,a){return H.isPlainObject(e)&&H.isPlainObject(t)?H.merge.call({caseless:a},e,t):H.isPlainObject(t)?H.merge({},t):H.isArray(t)?t.slice():t}function r(e,t,n,r){return H.isUndefined(t)?H.isUndefined(e)?void 0:a(void 0,e,0,r):a(e,t,0,r)}function s(e,t){if(!H.isUndefined(t))return a(void 0,t)}function i(e,t){return H.isUndefined(t)?H.isUndefined(e)?void 0:a(void 0,e):a(void 0,t)}function o(n,r,s){return s in t?a(n,r):s in e?a(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,n)=>r(ze(e),ze(t),0,!0)};return H.forEach(Object.keys((0,le.A)((0,le.A)({},e),t)),(function(a){const s=l[a]||r,i=s(e[a],t[a],a);H.isUndefined(i)&&s!==o||(n[a]=i)})),n}const qe=e=>{const t=Be({},e);let n,{data:a,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=Se.from(o),t.url=se(Fe(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),H.isFormData(a))if(pe.hasStandardBrowserEnv||pe.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(pe.hasStandardBrowserEnv&&(r&&H.isFunction(r)&&(r=r(t)),r||!1!==r&&Re(t.url))){const e=s&&i&&Ie.read(i);e&&o.set(s,e)}return t},Ue="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const a=qe(e);let r=a.data;const s=Se.from(a.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=a;function f(){c&&c(),d&&d(),a.cancelToken&&a.cancelToken.unsubscribe(i),a.signal&&a.signal.removeEventListener("abort",i)}let p=new XMLHttpRequest;function g(){if(!p)return;const a=Se.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());Le((function(e){t(e),f()}),(function(e){n(e),f()}),{data:u&&"text"!==u&&"json"!==u?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:a,config:e,request:p}),p=null}p.open(a.method.toUpperCase(),a.url,!0),p.timeout=a.timeout,"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(g)},p.onabort=function(){p&&(n(new $("Request aborted",$.ECONNABORTED,e,p)),p=null)},p.onerror=function(){n(new $("Network Error",$.ERR_NETWORK,e,p)),p=null},p.ontimeout=function(){let t=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const r=a.transitional||oe;a.timeoutErrorMessage&&(t=a.timeoutErrorMessage),n(new $(t,r.clarifyTimeoutError?$.ETIMEDOUT:$.ECONNABORTED,e,p)),p=null},void 0===r&&s.setContentType(null),"setRequestHeader"in p&&H.forEach(s.toJSON(),(function(e,t){p.setRequestHeader(t,e)})),H.isUndefined(a.withCredentials)||(p.withCredentials=!!a.withCredentials),u&&"json"!==u&&(p.responseType=a.responseType),m&&([l,d]=Me(m,!0),p.addEventListener("progress",l)),h&&p.upload&&([o,c]=Me(h),p.upload.addEventListener("progress",o),p.upload.addEventListener("loadend",c)),(a.cancelToken||a.signal)&&(i=t=>{p&&(n(!t||t.type?new Pe(null,e,p):t),p.abort(),p=null)},a.cancelToken&&a.cancelToken.subscribe(i),a.signal&&(a.signal.aborted?i():a.signal.addEventListener("abort",i)));const x=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(a.url);x&&-1===pe.protocols.indexOf(x)?n(new $("Unsupported protocol "+x+":",$.ERR_BAD_REQUEST,e)):p.send(r||null)}))},We=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,a=new AbortController;const r=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;a.abort(t instanceof $?t:new Pe(t instanceof Error?t.message:t))}};let s=t&&setTimeout((()=>{s=null,r(new $("timeout ".concat(t," of ms exceeded"),$.ETIMEDOUT))}),t);const i=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(r):e.removeEventListener("abort",r)})),e=null)};e.forEach((e=>e.addEventListener("abort",r)));const{signal:o}=a;return o.unsubscribe=()=>H.asap(i),o}};function He(e,t){this.v=e,this.k=t}function Ve(e){return function(){return new Ye(e.apply(this,arguments))}}function Ye(e){var t,n;function a(t,n){try{var s=e[t](n),i=s.value,o=i instanceof He;Promise.resolve(o?i.v:i).then((function(n){if(o){var l="return"===t?"return":"next";if(!i.k||n.done)return a(l,n);n=e[l](n).value}r(s.done?"return":"normal",n)}),(function(e){a("throw",e)}))}catch(e){r("throw",e)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?a(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise((function(s,i){var o={key:e,arg:r,resolve:s,reject:i,next:null};n?n=n.next=o:(t=n=o,a(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}function Ge(e){return new He(e,0)}function $e(e){var t={},n=!1;function a(t,a){return n=!0,a=new Promise((function(n){n(e[t](a))})),{done:!1,value:new He(a,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):a("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return a("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):a("return",e)}),t}function Xe(e){var t,n,a,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,a=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(a&&null!=(t=e[a]))return new Ke(t.call(e));n="@@asyncIterator",a="@@iterator"}throw new TypeError("Object is not async iterable")}function Ke(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Ke=function(e){this.s=e,this.n=e.next},Ke.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Ke(e)}Ye.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ye.prototype.next=function(e){return this._invoke("next",e)},Ye.prototype.throw=function(e){return this._invoke("throw",e)},Ye.prototype.return=function(e){return this._invoke("return",e)};const Je=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let a,r=0;for(;r<n;)a=r+t,yield e.slice(r,a),r=a},Qe=function(){var e=Ve((function*(e,t){var n,a=!1,r=!1;try{for(var s,i=Xe(Ze(e));a=!(s=yield Ge(i.next())).done;a=!1){const e=s.value;yield*$e(Xe(Je(e,t)))}}catch(o){r=!0,n=o}finally{try{a&&null!=i.return&&(yield Ge(i.return()))}finally{if(r)throw n}}}));return function(t,n){return e.apply(this,arguments)}}(),Ze=function(){var e=Ve((function*(e){if(e[Symbol.asyncIterator])return void(yield*$e(Xe(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Ge(t.read());if(e)break;yield n}}finally{yield Ge(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),et=(e,t,n,a)=>{const r=Qe(e,t);let s,i=0,o=e=>{s||(s=!0,a&&a(e))};return new ReadableStream({async pull(e){try{const{done:t,value:a}=await r.next();if(t)return o(),void e.close();let s=a.byteLength;if(n){let e=i+=s;n(e)}e.enqueue(new Uint8Array(a))}catch(t){throw o(t),t}},cancel:e=>(o(e),r.return())},{highWaterMark:2})},tt="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,nt=tt&&"function"===typeof ReadableStream,at=tt&&("function"===typeof TextEncoder?(rt=new TextEncoder,e=>rt.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var rt;const st=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return!!e(...n)}catch(r){return!1}},it=nt&&st((()=>{let e=!1;const t=new Request(pe.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),ot=nt&&st((()=>H.isReadableStream(new Response("").body))),lt={stream:ot&&(e=>e.body)};var ct;tt&&(ct=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!lt[e]&&(lt[e]=H.isFunction(ct[e])?t=>t[e]():(t,n)=>{throw new $("Response type '".concat(e,"' is not supported"),$.ERR_NOT_SUPPORT,n)})})));const dt=async(e,t)=>{const n=H.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(H.isBlob(e))return e.size;if(H.isSpecCompliantForm(e)){const t=new Request(pe.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return H.isArrayBufferView(e)||H.isArrayBuffer(e)?e.byteLength:(H.isURLSearchParams(e)&&(e+=""),H.isString(e)?(await at(e)).byteLength:void 0)})(t):n},ut={http:null,xhr:Ue,fetch:tt&&(async e=>{let{url:t,method:n,data:a,signal:r,cancelToken:s,timeout:i,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=qe(e);c=c?(c+"").toLowerCase():"text";let m,f=We([r,s&&s.toAbortSignal()],i);const p=f&&f.unsubscribe&&(()=>{f.unsubscribe()});let g;try{if(l&&it&&"get"!==n&&"head"!==n&&0!==(g=await dt(d,a))){let e,n=new Request(t,{method:"POST",body:a,duplex:"half"});if(H.isFormData(a)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=Oe(g,Me(Te(l)));a=et(n.body,65536,e,t)}}H.isString(u)||(u=u?"include":"omit");const r="credentials"in Request.prototype;m=new Request(t,(0,le.A)((0,le.A)({},h),{},{signal:f,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:a,duplex:"half",credentials:r?u:void 0}));let s=await fetch(m,h);const i=ot&&("stream"===c||"response"===c);if(ot&&(o||i&&p)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=s[t]}));const t=H.toFiniteNumber(s.headers.get("content-length")),[n,a]=o&&Oe(t,Me(Te(o),!0))||[];s=new Response(et(s.body,65536,n,(()=>{a&&a(),p&&p()})),e)}c=c||"text";let x=await lt[H.findKey(lt,c)||"text"](s,e);return!i&&p&&p(),await new Promise(((t,n)=>{Le(t,n,{data:x,headers:Se.from(s.headers),status:s.status,statusText:s.statusText,config:e,request:m})}))}catch(x){if(p&&p(),x&&"TypeError"===x.name&&/Load failed|fetch/i.test(x.message))throw Object.assign(new $("Network Error",$.ERR_NETWORK,e,m),{cause:x.cause||x});throw $.from(x,x&&x.code,e,m)}})};H.forEach(ut,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}}));const ht=e=>"- ".concat(e),mt=e=>H.isFunction(e)||null===e||!1===e,ft=e=>{e=H.isArray(e)?e:[e];const{length:t}=e;let n,a;const r={};for(let s=0;s<t;s++){let t;if(n=e[s],a=n,!mt(n)&&(a=ut[(t=String(n)).toLowerCase()],void 0===a))throw new $("Unknown adapter '".concat(t,"'"));if(a)break;r[t||"#"+s]=a}if(!a){const e=Object.entries(r).map((e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(ht).join("\n"):" "+ht(e[0]):"as no adapter specified";throw new $("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return a};function pt(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pe(null,e)}function gt(e){pt(e),e.headers=Se.from(e.headers),e.data=ke.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ft(e.adapter||be.adapter)(e).then((function(t){return pt(e),t.data=ke.call(e,e.transformResponse,t),t.headers=Se.from(t.headers),t}),(function(t){return Ce(t)||(pt(e),t&&t.response&&(t.response.data=ke.call(e,e.transformResponse,t.response),t.response.headers=Se.from(t.response.headers))),Promise.reject(t)}))}const xt="1.11.0",bt={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{bt[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const vt={};bt.transitional=function(e,t,n){function a(e,t){return"[Axios v"+xt+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,r,s)=>{if(!1===e)throw new $(a(r," has been removed"+(t?" in "+t:"")),$.ERR_DEPRECATED);return t&&!vt[r]&&(vt[r]=!0,console.warn(a(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,s)}},bt.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const yt={assertOptions:function(e,t,n){if("object"!==typeof e)throw new $("options must be an object",$.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let r=a.length;for(;r-- >0;){const s=a[r],i=t[s];if(i){const t=e[s],n=void 0===t||i(t,s,e);if(!0!==n)throw new $("option "+s+" must be "+n,$.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new $("Unknown option "+s,$.ERR_BAD_OPTION)}},validators:bt},wt=yt.validators;class jt{constructor(e){this.defaults=e||{},this.interceptors={request:new ie,response:new ie}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(a){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Be(this.defaults,t);const{transitional:n,paramsSerializer:a,headers:r}=t;void 0!==n&&yt.assertOptions(n,{silentJSONParsing:wt.transitional(wt.boolean),forcedJSONParsing:wt.transitional(wt.boolean),clarifyTimeoutError:wt.transitional(wt.boolean)},!1),null!=a&&(H.isFunction(a)?t.paramsSerializer={serialize:a}:yt.assertOptions(a,{encode:wt.function,serialize:wt.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),yt.assertOptions(t,{baseUrl:wt.spelling("baseURL"),withXsrfToken:wt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=r&&H.merge(r.common,r[t.method]);r&&H.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete r[e]})),t.headers=Se.concat(s,r);const i=[];let o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let d,u=0;if(!o){const e=[gt.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(u=0;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=gt.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return se(Fe((e=Be(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}H.forEach(["delete","get","head","options"],(function(e){jt.prototype[e]=function(t,n){return this.request(Be(n||{},{method:e,url:t,data:(n||{}).data}))}})),H.forEach(["post","put","patch"],(function(e){function t(t){return function(n,a,r){return this.request(Be(r||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:a}))}}jt.prototype[e]=t(),jt.prototype[e+"Form"]=t(!0)}));const Nt=jt;class _t{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const a=new Promise((e=>{n.subscribe(e),t=e})).then(e);return a.cancel=function(){n.unsubscribe(t)},a},e((function(e,a,r){n.reason||(n.reason=new Pe(e,a,r),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new _t((function(t){e=t})),cancel:e}}}const St=_t;const kt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(kt).forEach((e=>{let[t,n]=e;kt[n]=t}));const Ct=kt;const At=function e(t){const n=new Nt(t),a=r(Nt.prototype.request,n);return H.extend(a,Nt.prototype,n,{allOwnKeys:!0}),H.extend(a,n,null,{allOwnKeys:!0}),a.create=function(n){return e(Be(t,n))},a}(be);At.Axios=Nt,At.CanceledError=Pe,At.CancelToken=St,At.isCancel=Ce,At.VERSION=xt,At.toFormData=Z,At.AxiosError=$,At.Cancel=At.CanceledError,At.all=function(e){return Promise.all(e)},At.spread=function(e){return function(t){return e.apply(null,t)}},At.isAxiosError=function(e){return H.isObject(e)&&!0===e.isAxiosError},At.mergeConfig=Be,At.AxiosHeaders=Se,At.formToJSON=e=>ge(H.isHTMLForm(e)?new FormData(e):e),At.getAdapter=ft,At.HttpStatusCode=Ct,At.default=At;const Pt=At}},t={};function n(a){var r=t[a];if(void 0!==r)return r.exports;var s=t[a]={exports:{}};return e[a].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(a,r){if(1&r&&(a=this(a)),8&r)return a;if("object"===typeof a&&a){if(4&r&&a.__esModule)return a;if(16&r&&"function"===typeof a.then)return a}var s=Object.create(null);n.r(s);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&a;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>i[e]=()=>a[e]));return i.default=()=>a,n.d(s,i),s}})(),n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,a)=>(n.f[a](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{55:"07ecb4e2",213:"042bb37f",239:"dfdb0d71",455:"d8fc79e9"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";n.l=(a,r,s,i)=>{if(e[a])e[a].push(r);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==a||u.getAttribute("data-webpack")==t+s){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=a),e[a]=[r];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(m);var r=e[a];if(delete e[a],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(n))),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,a)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)a.push(r[2]);else{var s=new Promise(((n,a)=>r=e[t]=[n,a]));a.push(r[2]=s);var i=n.p+n.u(t),o=new Error;n.l(i,(a=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+i+")",o.name="ChunkLoadError",o.type=s,o.request=i,r[1](o)}}),"chunk-"+t,t)}};var t=(t,a)=>{var r,s,i=a[0],o=a[1],l=a[2],c=0;if(i.some((t=>0!==e[t]))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)l(n)}for(t&&t(a);c<i.length;c++)s=i[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},a=self.webpackChunkfrontend=self.webpackChunkfrontend||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{Decoder:()=>qg,Encoder:()=>zg,PacketType:()=>Fg,protocol:()=>Ig});var t,a=n(5043),r=n.t(a,2),s=n(4391);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const o="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,a){return void 0===n&&(n=null),i({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||a||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:a=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substr(a),e=e.substr(0,a)),e&&(t.pathname=e)}return t}function f(e,n,a,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:c=!1}=r,m=s.history,f=t.Pop,p=null,g=x();function x(){return(m.state||{idx:null}).idx}function b(){f=t.Pop;let e=x(),n=null==e?null:e-g;g=e,p&&p({action:f,location:y.location,delta:n})}function v(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,m.replaceState(i({},m.state,{idx:g}),""));let y={get action(){return f},get location(){return e(s,m)},listen(e){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(o,b),p=e,()=>{s.removeEventListener(o,b),p=null}},createHref:e=>n(s,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;let r=u(y.location,e,n);a&&a(r,e),g=x()+1;let i=d(r,g),o=y.createHref(r);try{m.pushState(i,"",o)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;s.location.assign(o)}c&&p&&p({action:f,location:y.location,delta:1})},replace:function(e,n){f=t.Replace;let r=u(y.location,e,n);a&&a(r,e),g=x();let s=d(r,g),i=y.createHref(r);m.replaceState(s,"",i),c&&p&&p({action:f,location:y.location,delta:0})},go:e=>m.go(e)};return y}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n){return void 0===n&&(n="/"),x(e,t,n,!1)}function x(e,t,n,a){let r=E(("string"===typeof t?m(t):t).pathname||"/",n);if(null==r)return null;let s=b(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(s);let i=null;for(let o=0;null==i&&o<s.length;++o){let e=L(r);i=A(s[o],e,a)}return i}function b(e,t,n,a){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===a&&(a="");let r=(e,r,s)=>{let i={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};i.relativePath.startsWith("/")&&(l(i.relativePath.startsWith(a),'Absolute route path "'+i.relativePath+'" nested under path "'+a+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(a.length));let o=R([a,i.relativePath]),c=n.concat(i);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),b(e.children,t,c,o)),(null!=e.path||e.index)&&t.push({path:o,score:C(o,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let a of v(e.path))r(e,t,a);else r(e,t)})),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...a]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===a.length)return r?[s,""]:[s];let i=v(a.join("/")),o=[];return o.push(...i.map((e=>""===e?s:[s,e].join("/")))),r&&o.push(...i),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const y=/^:[\w-]+$/,w=3,j=2,N=1,_=10,S=-2,k=e=>"*"===e;function C(e,t){let n=e.split("/"),a=n.length;return n.some(k)&&(a+=S),t&&(a+=j),n.filter((e=>!k(e))).reduce(((e,t)=>e+(y.test(t)?w:""===t?N:_)),a)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:a}=e,r={},s="/",i=[];for(let o=0;o<a.length;++o){let e=a[o],l=o===a.length-1,c="/"===s?t:t.slice(s.length)||"/",d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!a[a.length-1].route.index&&(d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(r,d.params),i.push({params:r,pathname:R([s,d.pathname]),pathnameBase:I(R([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=R([s,d.pathnameBase]))}return i}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let a=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(a.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(a.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,t?void 0:"i");return[s,a]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],i=s.replace(/(.)\/+$/,"$1"),o=r.slice(1),l=a.reduce(((e,t,n)=>{let{paramName:a,isOptional:r}=t;if("*"===a){let e=o[n]||"";i=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[a]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:s,pathnameBase:i,pattern:e}}function L(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function E(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&"/"!==a?null:e.slice(n)||"/"}function D(e,t,n,a){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(a)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function O(e,t){let n=M(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function T(e,t,n,a){let r;void 0===a&&(a=!1),"string"===typeof e?r=m(e):(r=i({},e),l(!r.pathname||!r.pathname.includes("?"),D("?","pathname","search",r)),l(!r.pathname||!r.pathname.includes("#"),D("#","pathname","hash",r)),l(!r.search||!r.search.includes("#"),D("#","search","hash",r)));let s,o=""===e||""===r.pathname,c=o?"/":r.pathname;if(null==c)s=n;else{let e=t.length-1;if(!a&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:a="",hash:r=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:F(a),hash:z(r)}}(r,s),u=c&&"/"!==c&&c.endsWith("/"),h=(o||"."===c)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const R=e=>e.join("/").replace(/\/\/+/g,"/"),I=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],U=(new Set(q),["get",...q]);new Set(U),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},W.apply(this,arguments)}const H=a.createContext(null);const V=a.createContext(null);const Y=a.createContext(null);const G=a.createContext(null);const $=a.createContext({outlet:null,matches:[],isDataRoute:!1});const X=a.createContext(null);function K(){return null!=a.useContext(G)}function J(){return K()||l(!1),a.useContext(G).location}function Q(e){a.useContext(Y).static||a.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=a.useContext($);return e?function(){let{router:e}=de(le.UseNavigateStable),t=he(ce.UseNavigateStable),n=a.useRef(!1);Q((()=>{n.current=!0}));let r=a.useCallback((function(a,r){void 0===r&&(r={}),n.current&&("number"===typeof a?e.navigate(a):e.navigate(a,W({fromRouteId:t},r)))}),[e,t]);return r}():function(){K()||l(!1);let e=a.useContext(H),{basename:t,future:n,navigator:r}=a.useContext(Y),{matches:s}=a.useContext($),{pathname:i}=J(),o=JSON.stringify(O(s,n.v7_relativeSplatPath)),c=a.useRef(!1);Q((()=>{c.current=!0}));let d=a.useCallback((function(n,a){if(void 0===a&&(a={}),!c.current)return;if("number"===typeof n)return void r.go(n);let s=T(n,JSON.parse(o),i,"path"===a.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:R([t,s.pathname])),(a.replace?r.replace:r.push)(s,a.state,a)}),[t,r,o,i,e]);return d}()}const ee=a.createContext(null);function te(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=a.useContext(Y),{matches:s}=a.useContext($),{pathname:i}=J(),o=JSON.stringify(O(s,r.v7_relativeSplatPath));return a.useMemo((()=>T(e,JSON.parse(o),i,"path"===n)),[e,o,i,n])}function ne(e,n,r,s){K()||l(!1);let{navigator:i}=a.useContext(Y),{matches:o}=a.useContext($),c=o[o.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,f=J();if(n){var p;let e="string"===typeof n?m(n):n;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||l(!1),h=e}else h=f;let x=h.pathname||"/",b=x;if("/"!==u){let e=u.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=g(e,{pathname:b});let y=oe(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:R([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:R([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,r,s);return n&&y?a.createElement(G.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},y):y}function ae(){let e=function(){var e;let t=a.useContext(X),n=ue(ce.UseRouteError),r=he(ce.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),n?a.createElement("pre",{style:s},n):null,null)}const re=a.createElement(ae,null);class se extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?a.createElement($.Provider,{value:this.props.routeContext},a.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:t,match:n,children:r}=e,s=a.useContext(H);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),a.createElement($.Provider,{value:t},r)}function oe(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var i;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(i=r)&&i.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,c=null==(s=n)?void 0:s.errors;if(null!=c){let e=o.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||l(!1),o=o.slice(0,Math.min(o.length,e+1))}let d=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let a=0;a<o.length;a++){let e=o[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=a),e.route.id){let{loaderData:t,errors:a}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!a||void 0===a[e.route.id]);if(e.route.lazy||r){d=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight(((e,r,s)=>{let i,l=!1,h=null,m=null;var f;n&&(i=c&&r.route.id?c[r.route.id]:void 0,h=r.route.errorElement||re,d&&(u<0&&0===s?(f="route-fallback",!1||me[f]||(me[f]=!0),l=!0,m=null):u===s&&(l=!0,m=r.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=i?h:l?m:r.route.Component?a.createElement(r.route.Component,null):r.route.element?r.route.element:e,a.createElement(ie,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?a.createElement(se,{location:n.location,revalidation:n.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function de(e){let t=a.useContext(H);return t||l(!1),t}function ue(e){let t=a.useContext(V);return t||l(!1),t}function he(e){let t=function(){let e=a.useContext($);return e||l(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||l(!1),n.route.id}const me={};function fe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function pe(e){let{to:t,replace:n,state:r,relative:s}=e;K()||l(!1);let{future:i,static:o}=a.useContext(Y),{matches:c}=a.useContext($),{pathname:d}=J(),u=Z(),h=T(t,O(c,i.v7_relativeSplatPath),d,"path"===s),m=JSON.stringify(h);return a.useEffect((()=>u(JSON.parse(m),{replace:n,state:r,relative:s})),[u,m,s,n,r]),null}function ge(e){return function(e){let t=a.useContext($).outlet;return t?a.createElement(ee.Provider,{value:e},t):t}(e.context)}function xe(e){l(!1)}function be(e){let{basename:n="/",children:r=null,location:s,navigationType:i=t.Pop,navigator:o,static:c=!1,future:d}=e;K()&&l(!1);let u=n.replace(/^\/*/,"/"),h=a.useMemo((()=>({basename:u,navigator:o,static:c,future:W({v7_relativeSplatPath:!1},d)})),[u,d,o,c]);"string"===typeof s&&(s=m(s));let{pathname:f="/",search:p="",hash:g="",state:x=null,key:b="default"}=s,v=a.useMemo((()=>{let e=E(f,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:x,key:b},navigationType:i}}),[u,f,p,g,x,b,i]);return null==v?null:a.createElement(Y.Provider,{value:h},a.createElement(G.Provider,{children:r,value:v}))}function ve(e){let{children:t,location:n}=e;return ne(ye(t),n)}new Promise((()=>{}));a.Component;function ye(e,t){void 0===t&&(t=[]);let n=[];return a.Children.forEach(e,((e,r)=>{if(!a.isValidElement(e))return;let s=[...t,r];if(e.type===a.Fragment)return void n.push.apply(n,ye(e.props.children,s));e.type!==xe&&l(!1),e.props.index&&e.props.children&&l(!1);let i={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ye(e.props.children,s)),n.push(i)})),n}var we=n(7950),je=n.t(we,2);function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ne.apply(this,arguments)}function _e(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ke=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(vj){}const Ce=a.createContext({isTransitioning:!1});new Map;const Ae=r.startTransition;je.flushSync,r.useId;function Pe(e){let{basename:t,children:n,future:r,window:s}=e,i=a.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),f((function(e,t){let{pathname:n,search:a,hash:r}=e.location;return u("",{pathname:n,search:a,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:h(t)}),null,o)));let l=i.current,[c,d]=a.useState({action:l.action,location:l.location}),{v7_startTransition:m}=r||{},p=a.useCallback((e=>{m&&Ae?Ae((()=>d(e))):d(e)}),[d,m]);return a.useLayoutEffect((()=>l.listen(p)),[l,p]),a.useEffect((()=>fe(r)),[r]),a.createElement(be,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Le="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ee=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=a.forwardRef((function(e,t){let n,{onClick:r,relative:s,reloadDocument:i,replace:o,state:c,target:d,to:u,preventScrollReset:m,viewTransition:f}=e,p=_e(e,Se),{basename:g}=a.useContext(Y),x=!1;if("string"===typeof u&&Ee.test(u)&&(n=u,Le))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=E(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:x=!0}catch(vj){}let b=function(e,t){let{relative:n}=void 0===t?{}:t;K()||l(!1);let{basename:r,navigator:s}=a.useContext(Y),{hash:i,pathname:o,search:c}=te(e,{relative:n}),d=o;return"/"!==r&&(d="/"===o?r:R([r,o])),s.createHref({pathname:d,search:c,hash:i})}(u,{relative:s}),v=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=void 0===t?{}:t,c=Z(),d=J(),u=te(e,{relative:o});return a.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:h(d)===h(u);c(e,{replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:l})}}),[d,c,u,r,s,n,e,i,o,l])}(u,{replace:o,state:c,target:d,preventScrollReset:m,relative:s,viewTransition:f});return a.createElement("a",Ne({},p,{href:n||b,onClick:x||i?r:function(e){r&&r(e),e.defaultPrevented||v(e)},ref:t,target:d}))}));const Me=a.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:s="",end:i=!1,style:o,to:c,viewTransition:d,children:u}=e,h=_e(e,ke),m=te(c,{relative:h.relative}),f=J(),p=a.useContext(V),{navigator:g,basename:x}=a.useContext(Y),b=null!=p&&function(e,t){void 0===t&&(t={});let n=a.useContext(Ce);null==n&&l(!1);let{basename:r}=Re(Oe.useViewTransitionState),s=te(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=E(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=E(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=P(s.pathname,o)||null!=P(s.pathname,i)}(m)&&!0===d,v=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,y=f.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(y=y.toLowerCase(),w=w?w.toLowerCase():null,v=v.toLowerCase()),w&&x&&(w=E(w,x)||w);const j="/"!==v&&v.endsWith("/")?v.length-1:v.length;let N,_=y===v||!i&&y.startsWith(v)&&"/"===y.charAt(j),S=null!=w&&(w===v||!i&&w.startsWith(v)&&"/"===w.charAt(v.length)),k={isActive:_,isPending:S,isTransitioning:b},C=_?n:void 0;N="function"===typeof s?s(k):[s,_?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof o?o(k):o;return a.createElement(De,Ne({},h,{"aria-current":C,className:N,ref:t,style:A,to:c,viewTransition:d}),"function"===typeof u?u(k):u)}));var Oe,Te;function Re(e){let t=a.useContext(H);return t||l(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Oe||(Oe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Te||(Te={}));var Ie=n(9379);class Fe extends Error{}function ze(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(n){return atob(t)}}function Be(e,t){if("string"!==typeof e)throw new Fe("Invalid token specified: must be a string");t||(t={});const n=!0===t.header?0:1,a=e.split(".")[n];if("string"!==typeof a)throw new Fe("Invalid token specified: missing part #".concat(n+1));let r;try{r=ze(a)}catch(vj){throw new Fe("Invalid token specified: invalid base64 for part #".concat(n+1," (").concat(vj.message,")"))}try{return JSON.parse(r)}catch(vj){throw new Fe("Invalid token specified: invalid json for part #".concat(n+1," (").concat(vj.message,")"))}}Fe.prototype.name="InvalidTokenError";var qe=n(3488);const Ue=async e=>{const t=localStorage.getItem("token"),n=await fetch("".concat(qe.H,"/reports/professional-data"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok){const e=await n.json().catch((()=>({})));throw new Error(e.error||"Erro ao atualizar dados profissionais")}return n.json()},We=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=localStorage.getItem("token"),a=new URLSearchParams;t.startDate&&a.append("startDate",t.startDate),t.endDate&&a.append("endDate",t.endDate),t.programIds&&t.programIds.length>0&&a.append("programIds",t.programIds.join(","));const r=await fetch("".concat(qe.H,"/reports/automatic-analysis/").concat(e,"?").concat(a),{method:"GET",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});if(!r.ok){const e=await r.json().catch((()=>({})));throw new Error(e.error||"Erro ao gerar an\xe1lise autom\xe1tica")}return r.json()};var He=n(579);const Ve=(0,a.createContext)(null),Ye=e=>{let{children:t}=e;const[n,r]=(0,a.useState)(null),[s,i]=(0,a.useState)(null),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!0),u=(0,a.useCallback)((async e=>{try{const t=await(async()=>{const e=localStorage.getItem("token"),t=await fetch("".concat(qe.H,"/auth/profile"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok){const e=await t.json().catch((()=>({})));throw new Error(e.error||"Erro ao buscar perfil do usu\xe1rio")}return t.json()})();if(t.professional_id||t.qualifications||t.professional_signature){const e={professional_id:t.professional_id,qualifications:t.qualifications,professional_signature:t.professional_signature};localStorage.setItem("professionalData",JSON.stringify(e))}const n=Be(e),a=(0,Ie.A)((0,Ie.A)({},n),{},{professional_id:t.professional_id,qualifications:t.qualifications,professional_signature:t.professional_signature,clinic_name:t.clinic_name,full_name:t.full_name||n.full_name});return i(a),a}catch(t){const n=localStorage.getItem("professionalData"),a=Be(e);let r=a;if(n)try{const e=JSON.parse(n);r=(0,Ie.A)((0,Ie.A)({},a),e)}catch(t){localStorage.removeItem("professionalData")}return i(r),r}}),[]),h=(0,a.useCallback)((async()=>{const e=localStorage.getItem("token");if(e)try{if(!(1e3*Be(e).exp<Date.now()))return r(e),l(!0),void await u(e);localStorage.removeItem("token"),localStorage.removeItem("professionalData")}catch(t){localStorage.removeItem("token"),localStorage.removeItem("professionalData")}r(null),i(null),l(!1)}),[u]);(0,a.useEffect)((()=>{(async()=>{await h(),d(!1)})()}),[h]);const m=()=>{localStorage.removeItem("token"),localStorage.removeItem("professionalData"),r(null),i(null),l(!1)},f={token:n,user:s,isAuthenticated:o,isLoading:c,login:async e=>{try{localStorage.setItem("token",e),r(e),l(!0),await u(e)}catch(t){m()}},logout:m,updateUser:e=>{if(s&&e){const a=(0,Ie.A)((0,Ie.A)({},s),e);if(i(a),n&&(e.professional_id||e.qualifications||e.professional_signature))try{const t={professional_id:e.professional_id,qualifications:e.qualifications,professional_signature:e.professional_signature};localStorage.setItem("professionalData",JSON.stringify(t))}catch(t){}}}};return(0,He.jsx)(Ve.Provider,{value:f,children:!c&&t})},Ge=()=>{const e=(0,a.useContext)(Ve);if(null===e)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return e};var $e=n(9722);const Xe={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:3000/api",Ke=e=>({headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),Je=async e=>{try{return(await $e.A.get("".concat(Xe,"/admin/users"),Ke(e))).data.users||[]}catch(s){var t,n,a,r;throw new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"N\xe3o foi poss\xedvel carregar a lista de utilizadores.")}},Qe=async(e,t)=>{try{return(await $e.A.delete("".concat(Xe,"/admin/users/").concat(e),Ke(t))).data}catch(d){var n,a,r,s,i,o;if(null!==(n=d.response)&&void 0!==n&&null!==(a=n.data)&&void 0!==a&&a.requiresTransfer){var l,c;const e=new Error((null===(l=d.response.data.errors)||void 0===l||null===(c=l[0])||void 0===c?void 0:c.msg)||"Transfer\xeancia necess\xe1ria.");throw e.requiresTransfer=!0,e}throw new Error((null===(r=d.response)||void 0===r||null===(s=r.data)||void 0===s||null===(i=s.errors)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.msg)||"N\xe3o foi poss\xedvel apagar o utilizador.")}},Ze=async e=>{try{return(await $e.A.get("".concat(Xe,"/admin/patients"),Ke(e))).data.patients||[]}catch(s){var t,n,a,r;throw new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"N\xe3o foi poss\xedvel carregar a lista de pacientes.")}},et=async e=>{try{return(await $e.A.get("".concat(Xe,"/admin/assignments"),Ke(e))).data.assignments||[]}catch(s){var t,n,a,r;throw new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"N\xe3o foi poss\xedvel carregar a lista de atribui\xe7\xf5es.")}},tt={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:3000/api";var nt=n(1487);const at={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:3000/api",rt=e=>(e||console.error("[API-LOG] Tentativa de criar cabe\xe7alho de autentica\xe7\xe3o sem token."),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),st=async(e,t,n)=>{try{return(await $e.A.post("".concat(at,"/assignments"),{patientId:e,programId:t},rt(n))).data}catch(l){var a,r,s,i,o;throw console.error("Erro ao atribuir programa ".concat(t," ao paciente ").concat(e,":"),(null===(a=l.response)||void 0===a?void 0:a.data)||l.message),new Error((null===(r=l.response)||void 0===r||null===(s=r.data)||void 0===s||null===(i=s.errors)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.msg)||"N\xe3o foi poss\xedvel atribuir o programa.")}},it=async(e,t)=>{try{await $e.A.delete("".concat(at,"/assignments/").concat(e),rt(t))}catch(o){var n,a,r,s,i;console.error("Erro ao remover a atribui\xe7\xe3o ".concat(e,":"),(null===(n=o.response)||void 0===n?void 0:n.data)||o.message);const t=(null===(a=o.response)||void 0===a||null===(r=a.data)||void 0===r||null===(s=r.errors)||void 0===s||null===(i=s[0])||void 0===i?void 0:i.msg)||"N\xe3o foi poss\xedvel remover o programa.";throw new Error(t)}},ot=(0,a.createContext)(null),lt=e=>{let{children:t}=e;const[r,s]=(0,a.useState)([]),[i,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(""),{user:h,isAuthenticated:m,token:f}=Ge(),[p,g]=(0,a.useState)(!1),[x,b]=(0,a.useState)(!1),[v,y]=(0,a.useState)(null),w=a.useRef(new Set),j=(0,a.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!m||!h||!f)return s([]),o(null),void c(!1);c(!0),u("");try{let t=[];if("super_admin"===h.role)t=[];else if(h.is_admin)t=await Ze(f);else if("terapeuta"===h.role)t=await(async e=>{try{console.log("[API-LOG] fetchAllPatients: Iniciando busca de pacientes para terapeuta");const t=await $e.A.get("".concat(at,"/patients"),rt(e));return console.log("[API-LOG] fetchAllPatients: Sucesso -",t.data.length,"pacientes encontrados"),t.data}catch(d){var t,n,a,r,s;throw console.error("[API-LOG] fetchAllPatients: Erro -",(null===(t=d.response)||void 0===t?void 0:t.data)||d.message),new Error((null===(n=d.response)||void 0===n||null===(a=n.data)||void 0===a||null===(r=a.errors)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.msg)||"N\xe3o foi poss\xedvel carregar os pacientes.")}})(f);else if("pai"===h.role){const e=await(async e=>{try{const t=await $e.A.get("".concat(tt,"/parent/dashboard"),(e=>({headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}))(e));return t.data}catch(d){var t,n,a,r,s;throw console.error("Erro ao buscar dados do dashboard parental:",(null===(t=d.response)||void 0===t?void 0:t.data)||d.message),new Error((null===(n=d.response)||void 0===n||null===(a=n.data)||void 0===a||null===(r=a.errors)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.msg)||"N\xe3o foi poss\xedvel carregar os dados de acompanhamento.")}})(f);t=e.patient?[e.patient]:[],e.patient&&o(e.patient)}if(s(t),e){const n=t.find((t=>t.id===e));n&&o(n)}else"pai"!==h.role&&o(null)}catch(t){u(t.message||"Falha ao carregar dados.")}finally{c(!1)}}),[m,h,f]),N=(0,a.useCallback)((async e=>{o(e||null)}),[]);(0,a.useEffect)((()=>{j()}),[j]);const _=async e=>{if(!i)throw new Error("Nenhum cliente selecionado.");const t=i.id;try{await e(),await j(t)}catch(d){throw d}},S=(0,a.useCallback)((async(e,t)=>{try{console.log("[PROMPT-LEVEL-FETCH] Buscando n\xedvel para paciente ".concat(e,", programa ").concat(t));const{getPromptLevelByPatientAndProgram:a}=await n.e(55).then(n.bind(n,4055)),r=(await a(e,t)).currentPromptLevel,s=null!==r&&void 0!==r?r:5;return console.log("[PROMPT-LEVEL-FETCH] N\xedvel encontrado: ".concat(s," para paciente ").concat(e,", programa ").concat(t)),s}catch(d){return console.error("[PROMPT-LEVEL-ERROR] Erro ao buscar n\xedvel para paciente ".concat(e,", programa ").concat(t,":"),d),5}}),[]),k=(0,a.useCallback)((async function(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const s="".concat(e,"_").concat(t);if(w.current.has(s))console.log("[PROMPT-LEVEL-LOCK] Opera\xe7\xe3o em andamento para ".concat(s,", ignorando nova chamada"));else if(r){w.current.add(s);try{console.log("[PROMPT-LEVEL-SAVE] Salvando n\xedvel ".concat(a," para paciente ").concat(e,", programa ").concat(t,", assignment ").concat(r));const{updatePromptLevel:s}=await n.e(55).then(n.bind(n,4055));await s(r,a),console.log("[PROMPT-LEVEL-SAVE] N\xedvel ".concat(a," salvo com sucesso no banco para assignment ").concat(r))}catch(d){throw console.error("[PROMPT-LEVEL-ERROR] Erro ao salvar n\xedvel ".concat(a," para assignment ").concat(r,":"),d),d}finally{w.current.delete(s)}}else console.error("[PROMPT-LEVEL-ERROR] assignmentId n\xe3o fornecido para paciente ".concat(e,", programa ").concat(t))}),[]),C={patients:r,selectedPatient:i,isLoading:l,error:d,selectPatient:N,isPatientFormOpen:p,patientToEdit:v,openPatientForm:(0,a.useCallback)((function(){y(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),g(!0)}),[]),closePatientForm:(0,a.useCallback)((()=>{y(null),g(!1)}),[]),isReportModalOpen:x,openReportModal:(0,a.useCallback)((()=>b(!0)),[]),closeReportModal:(0,a.useCallback)((()=>b(!1)),[]),assignProgram:e=>_((()=>st(i.id,e,f))),removeProgram:e=>{var t;if(!i)return;const n=null===(t=i.assigned_programs)||void 0===t?void 0:t.find((t=>t.program_id===e));if(!n)return;const a=n.assignment_id;window.confirm("Tem a certeza que deseja remover este programa permanentemente? Esta a\xe7\xe3o n\xe3o pode ser desfeita.")&&_((()=>it(a,f)))},toggleProgramStatus:(e,t)=>{const n="archived"===t?"active":"archived";_((()=>(0,nt.xT)(e,n,f)))},addSession:e=>_((()=>(async(e,t,n)=>{try{console.log("[API-LOG] createSession: Criando sess\xe3o para paciente ".concat(e));const a=await $e.A.post("".concat(at,"/programs/evolution"),t,rt(n));return console.log("[API-LOG] createSession: Sucesso"),a.data}catch(d){var a,r,s,i,o;throw console.error("[API-LOG] createSession: Erro para paciente ".concat(e," -"),(null===(a=d.response)||void 0===a?void 0:a.data)||d.message),new Error((null===(r=d.response)||void 0===r||null===(s=r.data)||void 0===s||null===(i=s.errors)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.msg)||"N\xe3o foi poss\xedvel criar a sess\xe3o.")}})(i.id,e,f))),saveNotes:e=>_((()=>(async(e,t,n)=>{try{const a=await $e.A.patch("".concat(at,"/patients/").concat(e,"/notes"),{general_notes:t},rt(n));return console.log("[API-LOG] updatePatientNotes: Sucesso"),a.data}catch(d){var a,r,s,i,o;throw console.error("[API-LOG] updatePatientNotes: Erro para paciente ".concat(e," -"),(null===(a=d.response)||void 0===a?void 0:a.data)||d.message),new Error((null===(r=d.response)||void 0===r||null===(s=r.data)||void 0===s||null===(i=s.errors)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.msg)||"N\xe3o foi poss\xedvel atualizar as notas.")}})(i.id,e,f))),refreshPatientData:j,refreshAndReselectPatient:(0,a.useCallback)((e=>j(e)),[j]),getPromptLevelForProgram:S,setPromptLevelForProgram:k};return(0,He.jsx)(ot.Provider,{value:C,children:t})},ct=()=>{const e=(0,a.useContext)(ot);if(null===e)throw new Error("usePatients deve ser usado dentro de um PatientProvider");return e},dt=(0,a.createContext)(),ut=e=>{let{children:t}=e;const[r,s]=(0,a.useState)({}),[i,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),{isAuthenticated:h}=Ge(),m=(0,a.useCallback)((async()=>{if(h){c(!0),u(null);try{const e=await(0,nt.pF)();s(e||{})}catch(e){u("N\xe3o foi poss\xedvel carregar os programas.")}finally{c(!1)}}else s({})}),[h]),f=(0,a.useCallback)((e=>{if(!r||"object"!==typeof r)return null;for(const t in r){const n=r[t];if(n&&"object"===typeof n)for(const a in n){const r=n[a];if(r&&"object"===typeof r)for(const n in r){const s=r[n];if(Array.isArray(s)){const r=s.find((t=>t.id==e));if(r)return(0,Ie.A)((0,Ie.A)({},r),{},{area:a,discipline:t,sub_area:n})}}}}return null}),[r]);(0,a.useEffect)((()=>{m()}),[m]);const p=(0,a.useCallback)((async e=>{const t=f(e);if(t)o(t);else{c(!0),u(null);try{const{getProgramById:t}=await Promise.resolve().then(n.bind(n,1487)),a=await t(e);o(a)}catch(a){u("N\xe3o foi poss\xedvel carregar os detalhes do programa."),o(null)}finally{c(!1)}}}),[f]),g={disciplines:r,selectedProgram:i,isLoading:l,error:d,refreshPrograms:m,fetchProgramDetails:p,getProgramById:f,clearSelectedProgram:()=>o(null)};return(0,He.jsx)(dt.Provider,{value:g,children:t})},ht=()=>{const e=(0,a.useContext)(dt);if(null===e)throw new Error("usePrograms deve ser usado dentro de um ProgramProvider");return e};function mt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){mt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const gt=()=>{};let xt={},bt={},vt=null,yt={mark:gt,measure:gt};try{"undefined"!==typeof window&&(xt=window),"undefined"!==typeof document&&(bt=document),"undefined"!==typeof MutationObserver&&(vt=MutationObserver),"undefined"!==typeof performance&&(yt=performance)}catch(vj){}const{userAgent:wt=""}=xt.navigator||{},jt=xt,Nt=bt,_t=vt,St=yt,kt=(jt.document,!!Nt.documentElement&&!!Nt.head&&"function"===typeof Nt.addEventListener&&"function"===typeof Nt.createElement),Ct=~wt.indexOf("MSIE")||~wt.indexOf("Trident/");var At={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},Pt=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Lt="classic",Et="duotone",Dt=[Lt,Et,"sharp","sharp-duotone"],Mt=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),Ot=["fak","fa-kit","fakd","fa-kit-duotone"],Tt={fak:"kit","fa-kit":"kit"},Rt={fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"},It=["fak","fakd"],Ft={kit:"fak"},zt={"kit-duotone":"fakd"},Bt={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},qt=["fak","fa-kit","fakd","fa-kit-duotone"],Ut={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},Wt=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],Ht=[1,2,3,4,5,6,7,8,9,10],Vt=Ht.concat([11,12,13,14,15,16,17,18,19,20]),Yt=[...Object.keys({classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]}),"solid","regular","light","thin","duotone","brands","2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Bt.GROUP,Bt.SWAP_OPACITY,Bt.PRIMARY,Bt.SECONDARY].concat(Ht.map((e=>"".concat(e,"x")))).concat(Vt.map((e=>"w-".concat(e))));const Gt="___FONT_AWESOME___",$t=16,Xt="svg-inline--fa",Kt="data-fa-i2svg",Jt="data-fa-pseudo-element",Qt="data-prefix",Zt="data-icon",en="fontawesome-i2svg",tn=["HTML","HEAD","STYLE","SCRIPT"],nn=(()=>{try{return!0}catch(e){return!1}})();function an(e){return new Proxy(e,{get:(e,t)=>t in e?e[t]:e[Lt]})}const rn=pt({},At);rn[Lt]=pt(pt(pt(pt({},{"fa-duotone":"duotone"}),At[Lt]),Tt),Rt);const sn=an(rn),on=pt({},{classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}});on[Lt]=pt(pt(pt(pt({},{duotone:"fad"}),on[Lt]),Ft),zt);const ln=an(on),cn=pt({},Ut);cn[Lt]=pt(pt({},cn[Lt]),{fak:"fa-kit"});const dn=an(cn),un=pt({},{classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}});un[Lt]=pt(pt({},un[Lt]),{"fa-kit":"fak"});an(un);const hn=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,mn="fa-layers-text",fn=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,pn=(an(pt({},{classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}})),["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"]),gn={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},xn=["kit",...Yt],bn=jt.FontAwesomeConfig||{};if(Nt&&"function"===typeof Nt.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((e=>{let[t,n]=e;const a=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=Nt.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(t));void 0!==a&&null!==a&&(bn[n]=a)}))}const vn={styleDefault:"solid",familyDefault:Lt,cssPrefix:"fa",replacementClass:Xt,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};bn.familyPrefix&&(bn.cssPrefix=bn.familyPrefix);const yn=pt(pt({},vn),bn);yn.autoReplaceSvg||(yn.observeMutations=!1);const wn={};Object.keys(vn).forEach((e=>{Object.defineProperty(wn,e,{enumerable:!0,set:function(t){yn[e]=t,jn.forEach((e=>e(wn)))},get:function(){return yn[e]}})})),Object.defineProperty(wn,"familyPrefix",{enumerable:!0,set:function(e){yn.cssPrefix=e,jn.forEach((e=>e(wn)))},get:function(){return yn.cssPrefix}}),jt.FontAwesomeConfig=wn;const jn=[];const Nn=$t,_n={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Sn(){let e=12,t="";for(;e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function kn(e){const t=[];for(let n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function Cn(e){return e.classList?kn(e.classList):(e.getAttribute("class")||"").split(" ").filter((e=>e))}function An(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Pn(e){return Object.keys(e||{}).reduce(((t,n)=>t+"".concat(n,": ").concat(e[n].trim(),";")),"")}function Ln(e){return e.size!==_n.size||e.x!==_n.x||e.y!==_n.y||e.rotate!==_n.rotate||e.flipX||e.flipY}function En(){const e="fa",t=Xt,n=wn.cssPrefix,a=wn.replacementClass;let r=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-counter-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(-1 * var(--fa-li-width, 2em));\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  animation-name: fa-beat;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  animation-name: fa-bounce;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  animation-name: fa-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  animation-name: fa-beat-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  animation-name: fa-flip;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  animation-name: fa-shake;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  animation-name: fa-spin;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 2s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  animation-name: fa-spin;\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    animation-delay: -1ms;\n    animation-duration: 1ms;\n    animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    transform: scale(1);\n  }\n  45% {\n    transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-shake {\n  0% {\n    transform: rotate(-15deg);\n  }\n  4% {\n    transform: rotate(15deg);\n  }\n  8%, 24% {\n    transform: rotate(-18deg);\n  }\n  12%, 28% {\n    transform: rotate(18deg);\n  }\n  16% {\n    transform: rotate(-22deg);\n  }\n  20% {\n    transform: rotate(22deg);\n  }\n  32% {\n    transform: rotate(-12deg);\n  }\n  36% {\n    transform: rotate(12deg);\n  }\n  40%, 100% {\n    transform: rotate(0deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}';if(n!==e||a!==t){const s=new RegExp("\\.".concat(e,"\\-"),"g"),i=new RegExp("\\--".concat(e,"\\-"),"g"),o=new RegExp("\\.".concat(t),"g");r=r.replace(s,".".concat(n,"-")).replace(i,"--".concat(n,"-")).replace(o,".".concat(a))}return r}let Dn=!1;function Mn(){wn.autoAddCss&&!Dn&&(!function(e){if(!e||!kt)return;const t=Nt.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const n=Nt.head.childNodes;let a=null;for(let r=n.length-1;r>-1;r--){const e=n[r],t=(e.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(t)>-1&&(a=e)}Nt.head.insertBefore(t,a)}(En()),Dn=!0)}var On={mixout:()=>({dom:{css:En,insertCss:Mn}}),hooks:()=>({beforeDOMElementCreation(){Mn()},beforeI2svg(){Mn()}})};const Tn=jt||{};Tn[Gt]||(Tn[Gt]={}),Tn[Gt].styles||(Tn[Gt].styles={}),Tn[Gt].hooks||(Tn[Gt].hooks={}),Tn[Gt].shims||(Tn[Gt].shims=[]);var Rn=Tn[Gt];const In=[],Fn=function(){Nt.removeEventListener("DOMContentLoaded",Fn),zn=1,In.map((e=>e()))};let zn=!1;function Bn(e){const{tag:t,attributes:n={},children:a=[]}=e;return"string"===typeof e?An(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce(((t,n)=>t+"".concat(n,'="').concat(An(e[n]),'" ')),"").trim()}(n),">").concat(a.map(Bn).join(""),"</").concat(t,">")}function qn(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}kt&&(zn=(Nt.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Nt.readyState),zn||Nt.addEventListener("DOMContentLoaded",Fn));var Un=function(e,t,n,a){var r,s,i,o=Object.keys(e),l=o.length,c=void 0!==a?function(e,t){return function(n,a,r,s){return e.call(t,n,a,r,s)}}(t,a):t;for(void 0===n?(r=1,i=e[o[0]]):(r=0,i=n);r<l;r++)i=c(i,e[s=o[r]],s,e);return i};function Wn(e){const t=function(e){const t=[];let n=0;const a=e.length;for(;n<a;){const r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<a){const a=e.charCodeAt(n++);56320==(64512&a)?t.push(((1023&r)<<10)+(1023&a)+65536):(t.push(r),n--)}else t.push(r)}return t}(e);return 1===t.length?t[0].toString(16):null}function Hn(e){return Object.keys(e).reduce(((t,n)=>{const a=e[n];return!!a.icon?t[a.iconName]=a.icon:t[n]=a,t}),{})}function Vn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipHooks:a=!1}=n,r=Hn(t);"function"!==typeof Rn.hooks.addPack||a?Rn.styles[e]=pt(pt({},Rn.styles[e]||{}),r):Rn.hooks.addPack(e,Hn(t)),"fas"===e&&Vn("fa",t)}const{styles:Yn,shims:Gn}=Rn,$n=Object.keys(dn),Xn=$n.reduce(((e,t)=>(e[t]=Object.keys(dn[t]),e)),{});let Kn=null,Jn={},Qn={},Zn={},ea={},ta={};function na(e,t){const n=t.split("-"),a=n[0],r=n.slice(1).join("-");return a!==e||""===r||(s=r,~xn.indexOf(s))?null:r;var s}const aa=()=>{const e=e=>Un(Yn,((t,n,a)=>(t[a]=Un(n,e,{}),t)),{});Jn=e(((e,t,n)=>{if(t[3]&&(e[t[3]]=n),t[2]){t[2].filter((e=>"number"===typeof e)).forEach((t=>{e[t.toString(16)]=n}))}return e})),Qn=e(((e,t,n)=>{if(e[n]=n,t[2]){t[2].filter((e=>"string"===typeof e)).forEach((t=>{e[t]=n}))}return e})),ta=e(((e,t,n)=>{const a=t[2];return e[n]=n,a.forEach((t=>{e[t]=n})),e}));const t="far"in Yn||wn.autoFetchSvg,n=Un(Gn,((e,n)=>{const a=n[0];let r=n[1];const s=n[2];return"far"!==r||t||(r="fas"),"string"===typeof a&&(e.names[a]={prefix:r,iconName:s}),"number"===typeof a&&(e.unicodes[a.toString(16)]={prefix:r,iconName:s}),e}),{names:{},unicodes:{}});Zn=n.names,ea=n.unicodes,Kn=ca(wn.styleDefault,{family:wn.familyDefault})};var ra;function sa(e,t){return(Jn[e]||{})[t]}function ia(e,t){return(ta[e]||{})[t]}function oa(e){return Zn[e]||{prefix:null,iconName:null}}function la(){return Kn}ra=e=>{Kn=ca(e.styleDefault,{family:wn.familyDefault})},jn.push(ra),aa();function ca(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{family:n=Lt}=t,a=sn[n][e];if(n===Et&&!e)return"fad";const r=ln[n][e]||ln[n][a],s=e in Rn.styles?e:null;return r||s||null}function da(e){return e.sort().filter(((e,t,n)=>n.indexOf(e)===t))}function ua(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{skipLookups:n=!1}=t;let a=null;const r=Wt.concat(qt),s=da(e.filter((e=>r.includes(e)))),i=da(e.filter((e=>!Wt.includes(e)))),o=s.filter((e=>(a=e,!Pt.includes(e)))),[l=null]=o,c=function(e){let t=Lt;const n=$n.reduce(((e,t)=>(e[t]="".concat(wn.cssPrefix,"-").concat(t),e)),{});return Dt.forEach((a=>{(e.includes(n[a])||e.some((e=>Xn[a].includes(e))))&&(t=a)})),t}(s),d=pt(pt({},function(e){let t=[],n=null;return e.forEach((e=>{const a=na(wn.cssPrefix,e);a?n=a:e&&t.push(e)})),{iconName:n,rest:t}}(i)),{},{prefix:ca(l,{family:c})});return pt(pt(pt({},d),function(e){const{values:t,family:n,canonical:a,givenPrefix:r="",styles:s={},config:i={}}=e,o=n===Et,l=t.includes("fa-duotone")||t.includes("fad"),c="duotone"===i.familyDefault,d="fad"===a.prefix||"fa-duotone"===a.prefix;!o&&(l||c||d)&&(a.prefix="fad");(t.includes("fa-brands")||t.includes("fab"))&&(a.prefix="fab");if(!a.prefix&&ha.includes(n)){if(Object.keys(s).find((e=>ma.includes(e)))||i.autoFetchSvg){const e=Mt.get(n).defaultShortPrefixId;a.prefix=e,a.iconName=ia(a.prefix,a.iconName)||a.iconName}}"fa"!==a.prefix&&"fa"!==r||(a.prefix=la()||"fas");return a}({values:e,family:c,styles:Yn,config:wn,canonical:d,givenPrefix:a})),function(e,t,n){let{prefix:a,iconName:r}=n;if(e||!a||!r)return{prefix:a,iconName:r};const s="fa"===t?oa(r):{},i=ia(a,r);r=s.iconName||i||r,a=s.prefix||a,"far"!==a||Yn.far||!Yn.fas||wn.autoFetchSvg||(a="fas");return{prefix:a,iconName:r}}(n,a,d))}const ha=Dt.filter((e=>e!==Lt||e!==Et)),ma=Object.keys(Ut).filter((e=>e!==Lt)).map((e=>Object.keys(Ut[e]))).flat();let fa=[],pa={};const ga={},xa=Object.keys(ga);function ba(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];return(pa[e]||[]).forEach((e=>{t=e.apply(null,[t,...a])})),t}function va(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];(pa[e]||[]).forEach((e=>{e.apply(null,n)}))}function ya(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return ga[e]?ga[e].apply(null,t):void 0}function wa(e){"fa"===e.prefix&&(e.prefix="fas");let{iconName:t}=e;const n=e.prefix||la();if(t)return t=ia(n,t)||t,qn(ja.definitions,n,t)||qn(Rn.styles,n,t)}const ja=new class{constructor(){this.definitions={}}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const a=t.reduce(this._pullDefinitions,{});Object.keys(a).forEach((e=>{this.definitions[e]=pt(pt({},this.definitions[e]||{}),a[e]),Vn(e,a[e]);const t=dn[Lt][e];t&&Vn(t,a[e]),aa()}))}reset(){this.definitions={}}_pullDefinitions(e,t){const n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((t=>{const{prefix:a,iconName:r,icon:s}=n[t],i=s[2];e[a]||(e[a]={}),i.length>0&&i.forEach((t=>{"string"===typeof t&&(e[a][t]=s)})),e[a][r]=s})),e}},Na={i2svg:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kt?(va("beforeI2svg",e),ya("pseudoElements2svg",e),ya("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;var n;!1===wn.autoReplaceSvg&&(wn.autoReplaceSvg=!0),wn.observeMutations=!0,n=()=>{ka({autoReplaceSvgRoot:t}),va("watch",e)},kt&&(zn?setTimeout(n,0):In.push(n))}},_a={icon:e=>{if(null===e)return null;if("object"===typeof e&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:ia(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){const t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=ca(e[0]);return{prefix:n,iconName:ia(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(wn.cssPrefix,"-"))>-1||e.match(hn))){const t=ua(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||la(),iconName:ia(t.prefix,t.iconName)||t.iconName}}if("string"===typeof e){const t=la();return{prefix:t,iconName:ia(t,e)||e}}}},Sa={noAuto:()=>{wn.autoReplaceSvg=!1,wn.observeMutations=!1,va("noAuto")},config:wn,dom:Na,parse:_a,library:ja,findIconDefinition:wa,toHtml:Bn},ka=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t=Nt}=e;(Object.keys(Rn.styles).length>0||wn.autoFetchSvg)&&kt&&wn.autoReplaceSvg&&Sa.dom.i2svg({node:t})};function Ca(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((e=>Bn(e)))}}),Object.defineProperty(e,"node",{get:function(){if(!kt)return;const t=Nt.createElement("div");return t.innerHTML=e.html,t.children}}),e}function Aa(e){const{icons:{main:t,mask:n},prefix:a,iconName:r,transform:s,symbol:i,title:o,maskId:l,titleId:c,extra:d,watchable:u=!1}=e,{width:h,height:m}=n.found?n:t,f=It.includes(a),p=[wn.replacementClass,r?"".concat(wn.cssPrefix,"-").concat(r):""].filter((e=>-1===d.classes.indexOf(e))).filter((e=>""!==e||!!e)).concat(d.classes).join(" ");let g={children:[],attributes:pt(pt({},d.attributes),{},{"data-prefix":a,"data-icon":r,class:p,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h," ").concat(m)})};const x=f&&!~d.classes.indexOf("fa-fw")?{width:"".concat(h/m*16*.0625,"em")}:{};u&&(g.attributes[Kt]=""),o&&(g.children.push({tag:"title",attributes:{id:g.attributes["aria-labelledby"]||"title-".concat(c||Sn())},children:[o]}),delete g.attributes.title);const b=pt(pt({},g),{},{prefix:a,iconName:r,main:t,mask:n,maskId:l,transform:s,symbol:i,styles:pt(pt({},x),d.styles)}),{children:v,attributes:y}=n.found&&t.found?ya("generateAbstractMask",b)||{children:[],attributes:{}}:ya("generateAbstractIcon",b)||{children:[],attributes:{}};return b.children=v,b.attributes=y,i?function(e){let{prefix:t,iconName:n,children:a,attributes:r,symbol:s}=e;const i=!0===s?"".concat(t,"-").concat(wn.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:pt(pt({},r),{},{id:i}),children:a}]}]}(b):function(e){let{children:t,main:n,mask:a,attributes:r,styles:s,transform:i}=e;if(Ln(i)&&n.found&&!a.found){const{width:e,height:t}=n,a={x:e/t/2,y:.5};r.style=Pn(pt(pt({},s),{},{"transform-origin":"".concat(a.x+i.x/16,"em ").concat(a.y+i.y/16,"em")}))}return[{tag:"svg",attributes:r,children:t}]}(b)}function Pa(e){const{content:t,width:n,height:a,transform:r,title:s,extra:i,watchable:o=!1}=e,l=pt(pt(pt({},i.attributes),s?{title:s}:{}),{},{class:i.classes.join(" ")});o&&(l[Kt]="");const c=pt({},i.styles);Ln(r)&&(c.transform=function(e){let{transform:t,width:n=$t,height:a=$t,startCentered:r=!1}=e,s="";return s+=r&&Ct?"translate(".concat(t.x/Nn-n/2,"em, ").concat(t.y/Nn-a/2,"em) "):r?"translate(calc(-50% + ".concat(t.x/Nn,"em), calc(-50% + ").concat(t.y/Nn,"em)) "):"translate(".concat(t.x/Nn,"em, ").concat(t.y/Nn,"em) "),s+="scale(".concat(t.size/Nn*(t.flipX?-1:1),", ").concat(t.size/Nn*(t.flipY?-1:1),") "),s+="rotate(".concat(t.rotate,"deg) "),s}({transform:r,startCentered:!0,width:n,height:a}),c["-webkit-transform"]=c.transform);const d=Pn(c);d.length>0&&(l.style=d);const u=[];return u.push({tag:"span",attributes:l,children:[t]}),s&&u.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),u}const{styles:La}=Rn;function Ea(e){const t=e[0],n=e[1],[a]=e.slice(4);let r=null;return r=Array.isArray(a)?{tag:"g",attributes:{class:"".concat(wn.cssPrefix,"-").concat(gn.GROUP)},children:[{tag:"path",attributes:{class:"".concat(wn.cssPrefix,"-").concat(gn.SECONDARY),fill:"currentColor",d:a[0]}},{tag:"path",attributes:{class:"".concat(wn.cssPrefix,"-").concat(gn.PRIMARY),fill:"currentColor",d:a[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:a}},{found:!0,width:t,height:n,icon:r}}const Da={found:!1,width:512,height:512};function Ma(e,t){let n=t;return"fa"===t&&null!==wn.styleDefault&&(t=la()),new Promise(((a,r)=>{if("fa"===n){const n=oa(e)||{};e=n.iconName||e,t=n.prefix||t}if(e&&t&&La[t]&&La[t][e]){return a(Ea(La[t][e]))}!function(e,t){nn||wn.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),a(pt(pt({},Da),{},{icon:wn.showMissingIcons&&e&&ya("missingIconAbstract")||{}}))}))}const Oa=()=>{},Ta=wn.measurePerformance&&St&&St.mark&&St.measure?St:{mark:Oa,measure:Oa},Ra='FA "6.7.2"',Ia=e=>{Ta.mark("".concat(Ra," ").concat(e," ends")),Ta.measure("".concat(Ra," ").concat(e),"".concat(Ra," ").concat(e," begins"),"".concat(Ra," ").concat(e," ends"))};var Fa=e=>(Ta.mark("".concat(Ra," ").concat(e," begins")),()=>Ia(e));const za=()=>{};function Ba(e){return"string"===typeof(e.getAttribute?e.getAttribute(Kt):null)}function qa(e){return Nt.createElementNS("http://www.w3.org/2000/svg",e)}function Ua(e){return Nt.createElement(e)}function Wa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{ceFn:n=("svg"===e.tag?qa:Ua)}=t;if("string"===typeof e)return Nt.createTextNode(e);const a=n(e.tag);Object.keys(e.attributes||[]).forEach((function(t){a.setAttribute(t,e.attributes[t])}));return(e.children||[]).forEach((function(e){a.appendChild(Wa(e,{ceFn:n}))})),a}const Ha={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach((e=>{t.parentNode.insertBefore(Wa(e),t)})),null===t.getAttribute(Kt)&&wn.keepOriginalSource){let e=Nt.createComment(function(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}(t));t.parentNode.replaceChild(e,t)}else t.remove()},nest:function(e){const t=e[0],n=e[1];if(~Cn(t).indexOf(wn.replacementClass))return Ha.replace(e);const a=new RegExp("".concat(wn.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){const e=n[0].attributes.class.split(" ").reduce(((e,t)=>(t===wn.replacementClass||t.match(a)?e.toSvg.push(t):e.toNode.push(t),e)),{toNode:[],toSvg:[]});n[0].attributes.class=e.toSvg.join(" "),0===e.toNode.length?t.removeAttribute("class"):t.setAttribute("class",e.toNode.join(" "))}const r=n.map((e=>Bn(e))).join("\n");t.setAttribute(Kt,""),t.innerHTML=r}};function Va(e){e()}function Ya(e,t){const n="function"===typeof t?t:za;if(0===e.length)n();else{let t=Va;"async"===wn.mutateApproach&&(t=jt.requestAnimationFrame||Va),t((()=>{const t=!0===wn.autoReplaceSvg?Ha.replace:Ha[wn.autoReplaceSvg]||Ha.replace,a=Fa("mutate");e.map(t),a(),n()}))}}let Ga=!1;function $a(){Ga=!0}function Xa(){Ga=!1}let Ka=null;function Ja(e){if(!_t)return;if(!wn.observeMutations)return;const{treeCallback:t=za,nodeCallback:n=za,pseudoElementsCallback:a=za,observeMutationsRoot:r=Nt}=e;Ka=new _t((e=>{if(Ga)return;const r=la();kn(e).forEach((e=>{if("childList"===e.type&&e.addedNodes.length>0&&!Ba(e.addedNodes[0])&&(wn.searchPseudoElements&&a(e.target),t(e.target)),"attributes"===e.type&&e.target.parentNode&&wn.searchPseudoElements&&a(e.target.parentNode),"attributes"===e.type&&Ba(e.target)&&~pn.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){const t=e.getAttribute?e.getAttribute(Qt):null,n=e.getAttribute?e.getAttribute(Zt):null;return t&&n}(e.target)){const{prefix:t,iconName:n}=ua(Cn(e.target));e.target.setAttribute(Qt,t||r),n&&e.target.setAttribute(Zt,n)}else(s=e.target)&&s.classList&&s.classList.contains&&s.classList.contains(wn.replacementClass)&&n(e.target);var s}))})),kt&&Ka.observe(r,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function Qa(e){const t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),a=void 0!==e.innerText?e.innerText.trim():"";let r=ua(Cn(e));return r.prefix||(r.prefix=la()),t&&n&&(r.prefix=t,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&a.length>0&&(r.iconName=function(e,t){return(Qn[e]||{})[t]}(r.prefix,e.innerText)||sa(r.prefix,Wn(e.innerText))),!r.iconName&&wn.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=e.firstChild.data)),r}function Za(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0};const{iconName:n,prefix:a,rest:r}=Qa(e),s=function(e){const t=kn(e.attributes).reduce(((e,t)=>("class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e)),{}),n=e.getAttribute("title"),a=e.getAttribute("data-fa-title-id");return wn.autoA11y&&(n?t["aria-labelledby"]="".concat(wn.replacementClass,"-title-").concat(a||Sn()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),i=ba("parseNodeAttributes",{},e);let o=t.styleParser?function(e){const t=e.getAttribute("style");let n=[];return t&&(n=t.split(";").reduce(((e,t)=>{const n=t.split(":"),a=n[0],r=n.slice(1);return a&&r.length>0&&(e[a]=r.join(":").trim()),e}),{})),n}(e):[];return pt({iconName:n,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:a,transform:_n,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:r,styles:o,attributes:s}},i)}const{styles:er}=Rn;function tr(e){const t="nest"===wn.autoReplaceSvg?Za(e,{styleParser:!1}):Za(e);return~t.extra.classes.indexOf(mn)?ya("generateLayersText",e,t):ya("generateSvgReplacementMutation",e,t)}function nr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!kt)return Promise.resolve();const n=Nt.documentElement.classList,a=e=>n.add("".concat(en,"-").concat(e)),r=e=>n.remove("".concat(en,"-").concat(e)),s=wn.autoFetchSvg?[...Ot,...Wt]:Pt.concat(Object.keys(er));s.includes("fa")||s.push("fa");const i=[".".concat(mn,":not([").concat(Kt,"])")].concat(s.map((e=>".".concat(e,":not([").concat(Kt,"])")))).join(", ");if(0===i.length)return Promise.resolve();let o=[];try{o=kn(e.querySelectorAll(i))}catch(d){}if(!(o.length>0))return Promise.resolve();a("pending"),r("complete");const l=Fa("onTree"),c=o.reduce(((e,t)=>{try{const n=tr(t);n&&e.push(n)}catch(d){nn||"MissingIcon"===d.name&&console.error(d)}return e}),[]);return new Promise(((e,n)=>{Promise.all(c).then((n=>{Ya(n,(()=>{a("active"),a("complete"),r("pending"),"function"===typeof t&&t(),l(),e()}))})).catch((e=>{l(),n(e)}))}))}function ar(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;tr(e).then((e=>{e&&Ya([e],t)}))}const rr=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:n=_n,symbol:a=!1,mask:r=null,maskId:s=null,title:i=null,titleId:o=null,classes:l=[],attributes:c={},styles:d={}}=t;if(!e)return;const{prefix:u,iconName:h,icon:m}=e;return Ca(pt({type:"icon"},e),(()=>(va("beforeDOMElementCreation",{iconDefinition:e,params:t}),wn.autoA11y&&(i?c["aria-labelledby"]="".concat(wn.replacementClass,"-title-").concat(o||Sn()):(c["aria-hidden"]="true",c.focusable="false")),Aa({icons:{main:Ea(m),mask:r?Ea(r.icon):{found:!1,width:null,height:null,icon:{}}},prefix:u,iconName:h,transform:pt(pt({},_n),n),symbol:a,title:i,maskId:s,titleId:o,extra:{attributes:c,styles:d,classes:l}}))))};var sr={mixout(){return{icon:(e=rr,function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=(t||{}).icon?t:wa(t||{});let{mask:r}=n;return r&&(r=(r||{}).icon?r:wa(r||{})),e(a,pt(pt({},n),{},{mask:r}))})};var e},hooks:()=>({mutationObserverCallbacks:e=>(e.treeCallback=nr,e.nodeCallback=ar,e)}),provides(e){e.i2svg=function(e){const{node:t=Nt,callback:n=()=>{}}=e;return nr(t,n)},e.generateSvgReplacementMutation=function(e,t){const{iconName:n,title:a,titleId:r,prefix:s,transform:i,symbol:o,mask:l,maskId:c,extra:d}=t;return new Promise(((t,u)=>{Promise.all([Ma(n,s),l.iconName?Ma(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((l=>{let[u,h]=l;t([e,Aa({icons:{main:u,mask:h},prefix:s,iconName:n,transform:i,symbol:o,maskId:c,title:a,titleId:r,extra:d,watchable:!0})])})).catch(u)}))},e.generateAbstractIcon=function(e){let{children:t,attributes:n,main:a,transform:r,styles:s}=e;const i=Pn(s);let o;return i.length>0&&(n.style=i),Ln(r)&&(o=ya("generateAbstractTransformGrouping",{main:a,transform:r,containerWidth:a.width,iconWidth:a.width})),t.push(o||a.icon),{children:t,attributes:n}}}},ir={mixout:()=>({layer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{classes:n=[]}=t;return Ca({type:"layer"},(()=>{va("beforeDOMElementCreation",{assembler:e,params:t});let a=[];return e((e=>{Array.isArray(e)?e.map((e=>{a=a.concat(e.abstract)})):a=a.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(wn.cssPrefix,"-layers"),...n].join(" ")},children:a}]}))}})},or={mixout:()=>({counter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{title:n=null,classes:a=[],attributes:r={},styles:s={}}=t;return Ca({type:"counter",content:e},(()=>(va("beforeDOMElementCreation",{content:e,params:t}),function(e){const{content:t,title:n,extra:a}=e,r=pt(pt(pt({},a.attributes),n?{title:n}:{}),{},{class:a.classes.join(" ")}),s=Pn(a.styles);s.length>0&&(r.style=s);const i=[];return i.push({tag:"span",attributes:r,children:[t]}),n&&i.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),i}({content:e.toString(),title:n,extra:{attributes:r,styles:s,classes:["".concat(wn.cssPrefix,"-layers-counter"),...a]}}))))}})},lr={mixout:()=>({text(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:n=_n,title:a=null,classes:r=[],attributes:s={},styles:i={}}=t;return Ca({type:"text",content:e},(()=>(va("beforeDOMElementCreation",{content:e,params:t}),Pa({content:e,transform:pt(pt({},_n),n),title:a,extra:{attributes:s,styles:i,classes:["".concat(wn.cssPrefix,"-layers-text"),...r]}}))))}}),provides(e){e.generateLayersText=function(e,t){const{title:n,transform:a,extra:r}=t;let s=null,i=null;if(Ct){const t=parseInt(getComputedStyle(e).fontSize,10),n=e.getBoundingClientRect();s=n.width/t,i=n.height/t}return wn.autoA11y&&!n&&(r.attributes["aria-hidden"]="true"),Promise.resolve([e,Pa({content:e.innerHTML,width:s,height:i,transform:a,title:n,extra:r,watchable:!0})])}}};const cr=new RegExp('"',"ug"),dr=[1105920,1112319],ur=pt(pt(pt(pt({},{FontAwesome:{normal:"fas",400:"fas"}}),{"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}}),{"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}}),{"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}}),hr=Object.keys(ur).reduce(((e,t)=>(e[t.toLowerCase()]=ur[t],e)),{}),mr=Object.keys(hr).reduce(((e,t)=>{const n=hr[t];return e[t]=n[900]||[...Object.entries(n)][0][1],e}),{});function fr(e,t){const n="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise(((a,r)=>{if(null!==e.getAttribute(n))return a();const s=kn(e.children).filter((e=>e.getAttribute(Jt)===t))[0],i=jt.getComputedStyle(e,t),o=i.getPropertyValue("font-family"),l=o.match(fn),c=i.getPropertyValue("font-weight"),d=i.getPropertyValue("content");if(s&&!l)return e.removeChild(s),a();if(l&&"none"!==d&&""!==d){const d=i.getPropertyValue("content");let u=function(e,t){const n=e.replace(/^['"]|['"]$/g,"").toLowerCase(),a=parseInt(t),r=isNaN(a)?"normal":a;return(hr[n]||{})[r]||mr[n]}(o,c);const{value:h,isSecondary:m}=function(e){const t=e.replace(cr,""),n=function(e,t){const n=e.length;let a,r=e.charCodeAt(t);return r>=55296&&r<=56319&&n>t+1&&(a=e.charCodeAt(t+1),a>=56320&&a<=57343)?1024*(r-55296)+a-56320+65536:r}(t,0),a=n>=dr[0]&&n<=dr[1],r=2===t.length&&t[0]===t[1];return{value:Wn(r?t[0]:t),isSecondary:a||r}}(d),f=l[0].startsWith("FontAwesome");let p=sa(u,h),g=p;if(f){const e=function(e){const t=ea[e],n=sa("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(h);e.iconName&&e.prefix&&(p=e.iconName,u=e.prefix)}if(!p||m||s&&s.getAttribute(Qt)===u&&s.getAttribute(Zt)===g)a();else{e.setAttribute(n,g),s&&e.removeChild(s);const i={iconName:null,title:null,titleId:null,prefix:null,transform:_n,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},{extra:o}=i;o.attributes[Jt]=t,Ma(p,u).then((r=>{const s=Aa(pt(pt({},i),{},{icons:{main:r,mask:{prefix:null,iconName:null,rest:[]}},prefix:u,iconName:g,extra:o,watchable:!0})),l=Nt.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(l,e.firstChild):e.appendChild(l),l.outerHTML=s.map((e=>Bn(e))).join("\n"),e.removeAttribute(n),a()})).catch(r)}}else a()}))}function pr(e){return Promise.all([fr(e,"::before"),fr(e,"::after")])}function gr(e){return e.parentNode!==document.head&&!~tn.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Jt)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function xr(e){if(kt)return new Promise(((t,n)=>{const a=kn(e.querySelectorAll("*")).filter(gr).map(pr),r=Fa("searchPseudoElements");$a(),Promise.all(a).then((()=>{r(),Xa(),t()})).catch((()=>{r(),Xa(),n()}))}))}var br={hooks:()=>({mutationObserverCallbacks:e=>(e.pseudoElementsCallback=xr,e)}),provides(e){e.pseudoElements2svg=function(e){const{node:t=Nt}=e;wn.searchPseudoElements&&xr(t)}}};let vr=!1;var yr={mixout:()=>({dom:{unwatch(){$a(),vr=!0}}}),hooks:()=>({bootstrap(){Ja(ba("mutationObserverCallbacks",{}))},noAuto(){Ka&&Ka.disconnect()},watch(e){const{observeMutationsRoot:t}=e;vr?Xa():Ja(ba("mutationObserverCallbacks",{observeMutationsRoot:t}))}})};const wr=e=>e.toLowerCase().split(" ").reduce(((e,t)=>{const n=t.toLowerCase().split("-"),a=n[0];let r=n.slice(1).join("-");if(a&&"h"===r)return e.flipX=!0,e;if(a&&"v"===r)return e.flipY=!0,e;if(r=parseFloat(r),isNaN(r))return e;switch(a){case"grow":e.size=e.size+r;break;case"shrink":e.size=e.size-r;break;case"left":e.x=e.x-r;break;case"right":e.x=e.x+r;break;case"up":e.y=e.y-r;break;case"down":e.y=e.y+r;break;case"rotate":e.rotate=e.rotate+r}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0});var jr={mixout:()=>({parse:{transform:e=>wr(e)}}),hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-transform");return n&&(e.transform=wr(n)),e}}),provides(e){e.generateAbstractTransformGrouping=function(e){let{main:t,transform:n,containerWidth:a,iconWidth:r}=e;const s={transform:"translate(".concat(a/2," 256)")},i="translate(".concat(32*n.x,", ").concat(32*n.y,") "),o="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),l="rotate(".concat(n.rotate," 0 0)"),c={outer:s,inner:{transform:"".concat(i," ").concat(o," ").concat(l)},path:{transform:"translate(".concat(r/2*-1," -256)")}};return{tag:"g",attributes:pt({},c.outer),children:[{tag:"g",attributes:pt({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:pt(pt({},t.icon.attributes),c.path)}]}]}}}};const Nr={x:0,y:0,width:"100%",height:"100%"};function _r(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var Sr={hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-mask"),a=n?ua(n.split(" ").map((e=>e.trim()))):{prefix:null,iconName:null,rest:[]};return a.prefix||(a.prefix=la()),e.mask=a,e.maskId=t.getAttribute("data-fa-mask-id"),e}}),provides(e){e.generateAbstractMask=function(e){let{children:t,attributes:n,main:a,mask:r,maskId:s,transform:i}=e;const{width:o,icon:l}=a,{width:c,icon:d}=r,u=function(e){let{transform:t,containerWidth:n,iconWidth:a}=e;const r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(32*t.x,", ").concat(32*t.y,") "),i="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),o="rotate(".concat(t.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(s," ").concat(i," ").concat(o)},path:{transform:"translate(".concat(a/2*-1," -256)")}}}({transform:i,containerWidth:c,iconWidth:o}),h={tag:"rect",attributes:pt(pt({},Nr),{},{fill:"white"})},m=l.children?{children:l.children.map(_r)}:{},f={tag:"g",attributes:pt({},u.inner),children:[_r(pt({tag:l.tag,attributes:pt(pt({},l.attributes),u.path)},m))]},p={tag:"g",attributes:pt({},u.outer),children:[f]},g="mask-".concat(s||Sn()),x="clip-".concat(s||Sn()),b={tag:"mask",attributes:pt(pt({},Nr),{},{id:g,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,p]},v={tag:"defs",children:[{tag:"clipPath",attributes:{id:x},children:(y=d,"g"===y.tag?y.children:[y])},b]};var y;return t.push(v,{tag:"rect",attributes:pt({fill:"currentColor","clip-path":"url(#".concat(x,")"),mask:"url(#".concat(g,")")},Nr)}),{children:t,attributes:n}}}},kr={provides(e){let t=!1;jt.matchMedia&&(t=jt.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const e=[],n={fill:"currentColor"},a={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:pt(pt({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const r=pt(pt({},a),{},{attributeName:"opacity"}),s={tag:"circle",attributes:pt(pt({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||s.children.push({tag:"animate",attributes:pt(pt({},a),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:pt(pt({},r),{},{values:"1;0;1;1;0;1;"})}),e.push(s),e.push({tag:"path",attributes:pt(pt({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:pt(pt({},r),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:pt(pt({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:pt(pt({},r),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){let{mixoutsTo:n}=t;fa=e,pa={},Object.keys(ga).forEach((e=>{-1===xa.indexOf(e)&&delete ga[e]})),fa.forEach((e=>{const t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((e=>{"function"===typeof t[e]&&(n[e]=t[e]),"object"===typeof t[e]&&Object.keys(t[e]).forEach((a=>{n[e]||(n[e]={}),n[e][a]=t[e][a]}))})),e.hooks){const t=e.hooks();Object.keys(t).forEach((e=>{pa[e]||(pa[e]=[]),pa[e].push(t[e])}))}e.provides&&e.provides(ga)}))}([On,sr,ir,or,lr,br,yr,jr,Sr,kr,{hooks:()=>({parseNodeAttributes(e,t){const n=t.getAttribute("data-fa-symbol"),a=null!==n&&(""===n||n);return e.symbol=a,e}})}],{mixoutsTo:Sa});const Cr=Sa.parse,Ar=Sa.icon;var Pr=n(5173),Lr=n.n(Pr);function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Er(Object(n),!0).forEach((function(t){Or(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mr(e){return Mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mr(e)}function Or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tr(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Rr(e){return function(e){if(Array.isArray(e))return Ir(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Ir(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ir(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Fr(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var zr=["style"];var Br=!1;try{Br=!0}catch(vj){}function qr(e){return e&&"object"===Mr(e)&&e.prefix&&e.iconName&&e.icon?e:Cr.icon?Cr.icon(e):null===e?null:e&&"object"===Mr(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function Ur(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Or({},e,t):{}}var Wr={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Hr=a.forwardRef((function(e,t){var n=Dr(Dr({},Wr),e),a=n.icon,r=n.mask,s=n.symbol,i=n.className,o=n.title,l=n.titleId,c=n.maskId,d=qr(a),u=Ur("classes",[].concat(Rr(function(e){var t,n=e.beat,a=e.fade,r=e.beatFade,s=e.bounce,i=e.shake,o=e.flash,l=e.spin,c=e.spinPulse,d=e.spinReverse,u=e.pulse,h=e.fixedWidth,m=e.inverse,f=e.border,p=e.listItem,g=e.flip,x=e.size,b=e.rotation,v=e.pull,y=(Or(t={"fa-beat":n,"fa-fade":a,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":i,"fa-flash":o,"fa-spin":l,"fa-spin-reverse":d,"fa-spin-pulse":c,"fa-pulse":u,"fa-fw":h,"fa-inverse":m,"fa-border":f,"fa-li":p,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(x),"undefined"!==typeof x&&null!==x),Or(t,"fa-rotate-".concat(b),"undefined"!==typeof b&&null!==b&&0!==b),Or(t,"fa-pull-".concat(v),"undefined"!==typeof v&&null!==v),Or(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(y).map((function(e){return y[e]?e:null})).filter((function(e){return e}))}(n)),Rr((i||"").split(" ")))),h=Ur("transform","string"===typeof n.transform?Cr.transform(n.transform):n.transform),m=Ur("mask",qr(r)),f=Ar(d,Dr(Dr(Dr(Dr({},u),h),m),{},{symbol:s,title:o,titleId:l,maskId:c}));if(!f)return function(){var e;!Br&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",d),null;var p=f.abstract,g={ref:t};return Object.keys(n).forEach((function(e){Wr.hasOwnProperty(e)||(g[e]=n[e])})),Vr(p[0],g)}));Hr.displayName="FontAwesomeIcon",Hr.propTypes={beat:Lr().bool,border:Lr().bool,beatFade:Lr().bool,bounce:Lr().bool,className:Lr().string,fade:Lr().bool,flash:Lr().bool,mask:Lr().oneOfType([Lr().object,Lr().array,Lr().string]),maskId:Lr().string,fixedWidth:Lr().bool,inverse:Lr().bool,flip:Lr().oneOf([!0,!1,"horizontal","vertical","both"]),icon:Lr().oneOfType([Lr().object,Lr().array,Lr().string]),listItem:Lr().bool,pull:Lr().oneOf(["right","left"]),pulse:Lr().bool,rotation:Lr().oneOf([0,90,180,270]),shake:Lr().bool,size:Lr().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Lr().bool,spinPulse:Lr().bool,spinReverse:Lr().bool,symbol:Lr().oneOfType([Lr().bool,Lr().string]),title:Lr().string,titleId:Lr().string,transform:Lr().oneOfType([Lr().string,Lr().object]),swapOpacity:Lr().bool};var Vr=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var r=(n.children||[]).map((function(n){return e(t,n)})),s=Object.keys(n.attributes||{}).reduce((function(e,t){var a=n.attributes[t];switch(t){case"class":e.attrs.className=a,delete n.attributes.class;break;case"style":e.attrs.style=function(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,a=t.indexOf(":"),r=Fr(t.slice(0,a)),s=t.slice(a+1).trim();return r.startsWith("webkit")?e[(n=r,n.charAt(0).toUpperCase()+n.slice(1))]=s:e[r]=s,e}),{})}(a);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=a:e.attrs[Fr(t)]=a}return e}),{attrs:{}}),i=a.style,o=void 0===i?{}:i,l=Tr(a,zr);return s.attrs.style=Dr(Dr({},s.attrs.style),o),t.apply(void 0,[n.tag,Dr(Dr({},s.attrs),l)].concat(Rr(r)))}.bind(null,a.createElement);const Yr={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3zM32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"]},Gr=Yr,$r={prefix:"fas",iconName:"stethoscope",icon:[576,512,[129658],"f0f1","M142.4 21.9c5.6 16.8-3.5 34.9-20.2 40.5L96 71.1 96 192c0 53 43 96 96 96s96-43 96-96l0-120.9-26.1-8.7c-16.8-5.6-25.8-23.7-20.2-40.5s23.7-25.8 40.5-20.2l26.1 8.7C334.4 19.1 352 43.5 352 71.1L352 192c0 77.2-54.6 141.6-127.3 156.7C231 404.6 278.4 448 336 448c61.9 0 112-50.1 112-112l0-70.7c-28.3-12.3-48-40.5-48-73.3c0-44.2 35.8-80 80-80s80 35.8 80 80c0 32.8-19.7 61-48 73.3l0 70.7c0 97.2-78.8 176-176 176c-92.9 0-168.9-71.9-175.5-163.1C87.2 334.2 32 269.6 32 192L32 71.1c0-27.5 17.6-52 43.8-60.7l26.1-8.7c16.8-5.6 34.9 3.5 40.5 20.2zM480 224a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},Xr={prefix:"fas",iconName:"info",icon:[192,512,[],"f129","M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"]},Kr={prefix:"fas",iconName:"file-lines",icon:[384,512,[128441,128462,61686,"file-alt","file-text"],"f15c","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM112 256l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},Jr=Kr,Qr={prefix:"fas",iconName:"calendar-days",icon:[448,512,["calendar-alt"],"f073","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm64 80l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm128 0l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM64 400l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zm112 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16z"]},Zr=Qr,es={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},ts=es,ns={prefix:"fas",iconName:"pencil",icon:[512,512,[9999,61504,"pencil-alt"],"f303","M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1 0 32c0 8.8 7.2 16 16 16l32 0zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"]},as=ns,rs={prefix:"fas",iconName:"comments",icon:[640,512,[128490,61670],"f086","M208 352c114.9 0 208-78.8 208-176S322.9 0 208 0S0 78.8 0 176c0 38.6 14.7 74.3 39.6 103.4c-3.5 9.4-8.7 17.7-14.2 24.7c-4.8 6.2-9.7 11-13.3 14.3c-1.8 1.6-3.3 2.9-4.3 3.7c-.5 .4-.9 .7-1.1 .8l-.2 .2s0 0 0 0s0 0 0 0C1 327.2-1.4 334.4 .8 340.9S9.1 352 16 352c21.8 0 43.8-5.6 62.1-12.5c9.2-3.5 17.8-7.4 25.2-11.4C134.1 343.3 169.8 352 208 352zM448 176c0 112.3-99.1 196.9-216.5 207C255.8 457.4 336.4 512 432 512c38.2 0 73.9-8.7 104.7-23.9c7.5 4 16 7.9 25.2 11.4c18.3 6.9 40.3 12.5 62.1 12.5c6.9 0 13.1-4.5 15.2-11.1c2.1-6.6-.2-13.8-5.8-17.9c0 0 0 0 0 0s0 0 0 0l-.2-.2c-.2-.2-.6-.4-1.1-.8c-1-.8-2.5-2-4.3-3.7c-3.6-3.3-8.5-8.1-13.3-14.3c-5.5-7-10.7-15.4-14.2-24.7c24.9-29 39.6-64.7 39.6-103.4c0-92.8-84.9-168.9-192.6-175.5c.4 5.1 .6 10.3 .6 15.5z"]},ss={prefix:"fas",iconName:"clipboard-list",icon:[384,512,[],"f46d","M192 0c-41.8 0-77.4 26.7-90.5 64L64 64C28.7 64 0 92.7 0 128L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64l-37.5 0C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM72 272a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm104-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zM72 368a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm88 0c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16z"]},is={prefix:"fas",iconName:"box-archive",icon:[512,512,["archive"],"f187","M32 32l448 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96L0 64C0 46.3 14.3 32 32 32zm0 128l448 0 0 256c0 35.3-28.7 64-64 64L96 480c-35.3 0-64-28.7-64-64l0-256zm128 80c0 8.8 7.2 16 16 16l160 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-160 0c-8.8 0-16 7.2-16 16z"]},os=is,ls={prefix:"fas",iconName:"gavel",icon:[512,512,["legal"],"f0e3","M318.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-120 120c-12.5 12.5-12.5 32.8 0 45.3l16 16c12.5 12.5 32.8 12.5 45.3 0l4-4L325.4 293.4l-4 4c-12.5 12.5-12.5 32.8 0 45.3l16 16c12.5 12.5 32.8 12.5 45.3 0l120-120c12.5-12.5 12.5-32.8 0-45.3l-16-16c-12.5-12.5-32.8-12.5-45.3 0l-4 4L330.6 74.6l4-4c12.5-12.5 12.5-32.8 0-45.3l-16-16zm-152 288c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l48 48c12.5 12.5 32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-1.4-1.4L272 285.3 226.7 240 168 298.7l-1.4-1.4z"]},cs={prefix:"fas",iconName:"table",icon:[512,512,[],"f0ce","M64 256l0-96 160 0 0 96L64 256zm0 64l160 0 0 96L64 416l0-96zm224 96l0-96 160 0 0 96-160 0zM448 256l-160 0 0-96 160 0 0 96zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32z"]},ds={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},us={prefix:"fas",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"]},hs={prefix:"fas",iconName:"circle-exclamation",icon:[512,512,["exclamation-circle"],"f06a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24l0 112c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-112c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},ms=hs,fs={prefix:"fas",iconName:"list",icon:[512,512,["list-squares"],"f03a","M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"]},ps={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"]},gs=ps,xs={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M144 0a80 80 0 1 1 0 160A80 80 0 1 1 144 0zM512 0a80 80 0 1 1 0 160A80 80 0 1 1 512 0zM0 298.7C0 239.8 47.8 192 106.7 192l42.7 0c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0L21.3 320C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7l42.7 0C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3l-213.3 0zM224 224a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zM128 485.3C128 411.7 187.7 352 261.3 352l117.3 0C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7l-330.7 0c-14.7 0-26.7-11.9-26.7-26.7z"]},bs={prefix:"fas",iconName:"eye-slash",icon:[640,512,[],"f070","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"]},vs={prefix:"fas",iconName:"chevron-up",icon:[512,512,[],"f077","M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]},ys={prefix:"fas",iconName:"notes-medical",icon:[512,512,[],"f481","M96 352L96 96c0-35.3 28.7-64 64-64l256 0c35.3 0 64 28.7 64 64l0 197.5c0 17-6.7 33.3-18.7 45.3l-58.5 58.5c-12 12-28.3 18.7-45.3 18.7L160 416c-35.3 0-64-28.7-64-64zM272 128c-8.8 0-16 7.2-16 16l0 48-48 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l48 0 0 48c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-48 48 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-48 0 0-48c0-8.8-7.2-16-16-16l-32 0zm24 336c13.3 0 24 10.7 24 24s-10.7 24-24 24l-160 0C60.9 512 0 451.1 0 376L0 152c0-13.3 10.7-24 24-24s24 10.7 24 24l0 224c0 48.6 39.4 88 88 88l160 0z"]},ws={prefix:"fas",iconName:"bullseye",icon:[512,512,[],"f140","M448 256A192 192 0 1 0 64 256a192 192 0 1 0 384 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 80a80 80 0 1 0 0-160 80 80 0 1 0 0 160zm0-224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zM224 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},js={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},Ns={prefix:"fas",iconName:"key",icon:[512,512,[128273],"f084","M336 352c97.2 0 176-78.8 176-176S433.2 0 336 0S160 78.8 160 176c0 18.7 2.9 36.8 8.3 53.7L7 391c-4.5 4.5-7 10.6-7 17l0 80c0 13.3 10.7 24 24 24l80 0c13.3 0 24-10.7 24-24l0-40 40 0c13.3 0 24-10.7 24-24l0-40 40 0c6.4 0 12.5-2.5 17-7l33.3-33.3c16.9 5.4 35 8.3 53.7 8.3zM376 96a40 40 0 1 1 0 80 40 40 0 1 1 0-80z"]},_s={prefix:"fas",iconName:"globe",icon:[512,512,[127760],"f0ac","M352 256c0 22.2-1.2 43.6-3.3 64l-185.3 0c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64l185.3 0c2.2 20.4 3.3 41.8 3.3 64zm28.8-64l123.1 0c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64l-123.1 0c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32l-116.7 0c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0l-176.6 0c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 20.9 58.2 27 94.7zm-209 0L18.6 160C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192l123.1 0c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64L8.1 320C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6l176.6 0c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352l116.7 0zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6l116.7 0z"]},Ss={prefix:"fas",iconName:"money-bill-wave",icon:[576,512,[],"f53a","M0 112.5L0 422.3c0 18 10.1 35 27 41.3c87 32.5 174 10.3 261-11.9c79.8-20.3 159.6-40.7 239.3-18.9c23 6.3 48.7-9.5 48.7-33.4l0-309.9c0-18-10.1-35-27-41.3C462 15.9 375 38.1 288 60.3C208.2 80.6 128.4 100.9 48.7 79.1C25.6 72.8 0 88.6 0 112.5zM288 352c-44.2 0-80-43-80-96s35.8-96 80-96s80 43 80 96s-35.8 96-80 96zM64 352c35.3 0 64 28.7 64 64l-64 0 0-64zm64-208c0 35.3-28.7 64-64 64l0-64 64 0zM512 304l0 64-64 0c0-35.3 28.7-64 64-64zM448 96l64 0 0 64c-35.3 0-64-28.7-64-64z"]},ks={prefix:"fas",iconName:"ban",icon:[512,512,[128683,"cancel"],"f05e","M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5L412.5 367.2zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"]},Cs={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},As={prefix:"fas",iconName:"heart-pulse",icon:[512,512,["heartbeat"],"f21e","M228.3 469.1L47.6 300.4c-4.2-3.9-8.2-8.1-11.9-12.4l87 0c22.6 0 43-13.6 51.7-34.5l10.5-25.2 49.3 109.5c3.8 8.5 12.1 14 21.4 14.1s17.8-5 22-13.3L320 253.7l1.7 3.4c9.5 19 28.9 31 50.1 31l104.5 0c-3.7 4.3-7.7 8.5-11.9 12.4L283.7 469.1c-7.5 7-17.4 10.9-27.7 10.9s-20.2-3.9-27.7-10.9zM503.7 240l-132 0c-3 0-5.8-1.7-7.2-4.4l-23.2-46.3c-4.1-8.1-12.4-13.3-21.5-13.3s-17.4 5.1-21.5 13.3l-41.4 82.8L205.9 158.2c-3.9-8.7-12.7-14.3-22.2-14.1s-18.1 5.9-21.8 14.8l-31.8 76.3c-1.2 3-4.2 4.9-7.4 4.9L16 240c-2.6 0-5 .4-7.3 1.1C3 225.2 0 208.2 0 190.9l0-5.8c0-69.9 50.5-129.5 119.4-141C165 36.5 211.4 51.4 244 84l12 12 12-12c32.6-32.6 79-47.5 124.6-39.9C461.5 55.6 512 115.2 512 185.1l0 5.8c0 16.9-2.8 33.5-8.3 49.1z"]},Ps=As,Ls={prefix:"fas",iconName:"user-group",icon:[640,512,[128101,"user-friends"],"f500","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3zM609.3 512l-137.8 0c5.4-9.4 8.6-20.3 8.6-32l0-8c0-60.7-27.1-115.2-69.8-151.8c2.4-.1 4.7-.2 7.1-.2l61.4 0C567.8 320 640 392.2 640 481.3c0 17-13.8 30.7-30.7 30.7zM432 256c-31 0-59-12.6-79.3-32.9C372.4 196.5 384 163.6 384 128c0-26.8-6.6-52.1-18.3-74.3C384.3 40.1 407.2 32 432 32c61.9 0 112 50.1 112 112s-50.1 112-112 112z"]},Es=Ls,Ds={prefix:"fas",iconName:"folder-open",icon:[576,512,[128194,128449,61717],"f07c","M88.7 223.8L0 375.8 0 96C0 60.7 28.7 32 64 32l117.5 0c17 0 33.3 6.7 45.3 18.7l26.5 26.5c12 12 28.3 18.7 45.3 18.7L416 96c35.3 0 64 28.7 64 64l0 32-336 0c-22.8 0-43.8 12.1-55.3 31.8zm27.6 16.1C122.1 230 132.6 224 144 224l400 0c11.5 0 22 6.1 27.7 16.1s5.7 22.2-.1 32.1l-112 192C453.9 474 443.4 480 432 480L32 480c-11.5 0-22-6.1-27.7-16.1s-5.7-22.2 .1-32.1l112-192z"]},Ms={prefix:"fas",iconName:"signature",icon:[640,512,[],"f5b7","M192 128c0-17.7 14.3-32 32-32s32 14.3 32 32l0 7.8c0 27.7-2.4 55.3-7.1 82.5l-84.4 25.3c-40.6 12.2-68.4 49.6-68.4 92l0 71.9c0 40 32.5 72.5 72.5 72.5c26 0 50-13.9 62.9-36.5l13.9-24.3c26.8-47 46.5-97.7 58.4-150.5l94.4-28.3-12.5 37.5c-3.3 9.8-1.6 20.5 4.4 28.8s15.7 13.3 26 13.3l128 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-83.6 0 18-53.9c3.8-11.3 .9-23.8-7.4-32.4s-20.7-11.8-32.2-8.4L316.4 198.1c2.4-20.7 3.6-41.4 3.6-62.3l0-7.8c0-53-43-96-96-96s-96 43-96 96l0 32c0 17.7 14.3 32 32 32s32-14.3 32-32l0-32zm-9.2 177l49-14.7c-10.4 33.8-24.5 66.4-42.1 97.2l-13.9 24.3c-1.5 2.6-4.3 4.3-7.4 4.3c-4.7 0-8.5-3.8-8.5-8.5l0-71.9c0-14.1 9.3-26.6 22.8-30.7zM24 368c-13.3 0-24 10.7-24 24s10.7 24 24 24l40.3 0c-.2-2.8-.3-5.6-.3-8.5L64 368l-40 0zm592 48c13.3 0 24-10.7 24-24s-10.7-24-24-24l-310.1 0c-6.7 16.3-14.2 32.3-22.3 48L616 416z"]},Os={prefix:"fas",iconName:"bold",icon:[384,512,[],"f032","M0 64C0 46.3 14.3 32 32 32l48 0 16 0 128 0c70.7 0 128 57.3 128 128c0 31.3-11.3 60.1-30 82.3c37.1 22.4 62 63.1 62 109.7c0 70.7-57.3 128-128 128L96 480l-16 0-48 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l16 0 0-160L48 96 32 96C14.3 96 0 81.7 0 64zM224 224c35.3 0 64-28.7 64-64s-28.7-64-64-64L112 96l0 128 112 0zM112 288l0 128 144 0c35.3 0 64-28.7 64-64s-28.7-64-64-64l-32 0-112 0z"]},Ts={prefix:"fas",iconName:"chart-bar",icon:[512,512,["bar-chart"],"f080","M32 32c17.7 0 32 14.3 32 32l0 336c0 8.8 7.2 16 16 16l400 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L80 480c-44.2 0-80-35.8-80-80L0 64C0 46.3 14.3 32 32 32zm96 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32zm32 64l128 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 96l256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},Rs={prefix:"fas",iconName:"handshake",icon:[640,512,[],"f2b5","M323.4 85.2l-96.8 78.4c-16.1 13-19.2 36.4-7 53.1c12.9 17.8 38 21.3 55.3 7.8l99.3-77.2c7-5.4 17-4.2 22.5 2.8s4.2 17-2.8 22.5l-20.9 16.2L512 316.8 512 128l-.7 0-3.9-2.5L434.8 79c-15.3-9.8-33.2-15-51.4-15c-21.8 0-43 7.5-60 21.2zm22.8 124.4l-51.7 40.2C263 274.4 217.3 268 193.7 235.6c-22.2-30.5-16.6-73.1 12.7-96.8l83.2-67.3c-11.6-4.9-24.1-7.4-36.8-7.4C234 64 215.7 69.6 200 80l-72 48 0 224 28.2 0 91.4 83.4c19.6 17.9 49.9 16.5 67.8-3.1c5.5-6.1 9.2-13.2 11.1-20.6l17 15.6c19.5 17.9 49.9 16.6 67.8-2.9c4.5-4.9 7.8-10.6 9.9-16.5c19.4 13 45.8 10.3 62.1-7.5c17.9-19.5 16.6-49.9-2.9-67.8l-134.2-123zM16 128c-8.8 0-16 7.2-16 16L0 352c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-224-80 0zM48 320a16 16 0 1 1 0 32 16 16 0 1 1 0-32zM544 128l0 224c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-208c0-8.8-7.2-16-16-16l-80 0zm32 208a16 16 0 1 1 32 0 16 16 0 1 1 -32 0z"]},Is={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},Fs=Is,zs={prefix:"fas",iconName:"user-tie",icon:[448,512,[],"f508","M96 128a128 128 0 1 0 256 0A128 128 0 1 0 96 128zm94.5 200.2l18.6 31L175.8 483.1l-36-146.9c-2-8.1-9.8-13.4-17.9-11.3C51.9 342.4 0 405.8 0 481.3c0 17 13.8 30.7 30.7 30.7l131.7 0c0 0 0 0 .1 0l5.5 0 112 0 5.5 0c0 0 0 0 .1 0l131.7 0c17 0 30.7-13.8 30.7-30.7c0-75.5-51.9-138.9-121.9-156.4c-8.1-2-15.9 3.3-17.9 11.3l-36 146.9L238.9 359.2l18.6-31c6.4-10.7-1.3-24.2-13.7-24.2L224 304l-19.7 0c-12.4 0-20.1 13.6-13.7 24.2z"]},Bs={prefix:"fas",iconName:"scroll",icon:[576,512,[128220],"f70e","M0 80l0 48c0 17.7 14.3 32 32 32l16 0 48 0 0-80c0-26.5-21.5-48-48-48S0 53.5 0 80zM112 32c10 13.4 16 30 16 48l0 304c0 35.3 28.7 64 64 64s64-28.7 64-64l0-5.3c0-32.4 26.3-58.7 58.7-58.7L480 320l0-192c0-53-43-96-96-96L112 32zM464 480c61.9 0 112-50.1 112-112c0-8.8-7.2-16-16-16l-245.3 0c-14.7 0-26.7 11.9-26.7 26.7l0 5.3c0 53-43 96-96 96l176 0 96 0z"]},qs={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},Us={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},Ws=Us,Hs={prefix:"fas",iconName:"shield-halved",icon:[512,512,["shield-alt"],"f3ed","M256 0c4.6 0 9.2 1 13.4 2.9L457.7 82.8c22 9.3 38.4 31 38.3 57.2c-.5 99.2-41.3 280.7-213.6 363.2c-16.7 8-36.1 8-52.8 0C57.3 420.7 16.5 239.2 16 140c-.1-26.2 16.3-47.9 38.3-57.2L242.7 2.9C246.8 1 251.4 0 256 0zm0 66.8l0 378.1C394 378 431.1 230.1 432 141.4L256 66.8s0 0 0 0z"]},Vs=Hs,Ys={prefix:"fas",iconName:"layer-group",icon:[576,512,[],"f5fd","M264.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 149.8C37.4 145.8 32 137.3 32 128s5.4-17.9 13.9-21.8L264.5 5.2zM476.9 209.6l53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 277.8C37.4 273.8 32 265.3 32 256s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0l152-70.2zm-152 198.2l152-70.2 53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 405.8C37.4 401.8 32 393.3 32 384s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0z"]},Gs={prefix:"fas",iconName:"italic",icon:[384,512,[],"f033","M128 64c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-58.7 0L160 416l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 480c-17.7 0-32-14.3-32-32s14.3-32 32-32l58.7 0L224 96l-64 0c-17.7 0-32-14.3-32-32z"]},$s={prefix:"fas",iconName:"list-ol",icon:[512,512,["list-1-2","list-numeric"],"f0cb","M24 56c0-13.3 10.7-24 24-24l32 0c13.3 0 24 10.7 24 24l0 120 16 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l16 0 0-96-8 0C34.7 80 24 69.3 24 56zM86.7 341.2c-6.5-7.4-18.3-6.9-24 1.2L51.5 357.9c-7.7 10.8-22.7 13.3-33.5 5.6s-13.3-22.7-5.6-33.5l11.1-15.6c23.7-33.2 72.3-35.6 99.2-4.9c21.3 24.4 20.8 60.9-1.1 84.7L86.8 432l33.2 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-88 0c-9.5 0-18.2-5.6-22-14.4s-2.1-18.9 4.3-25.9l72-78c5.3-5.8 5.4-14.6 .3-20.5zM224 64l256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 160l256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 160l256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},Xs={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]},Ks={prefix:"fas",iconName:"chart-pie",icon:[576,512,["pie-chart"],"f200","M304 240l0-223.4c0-9 7-16.6 16-16.6C443.7 0 544 100.3 544 224c0 9-7.6 16-16.6 16L304 240zM32 272C32 150.7 122.1 50.3 239 34.3c9.2-1.3 17 6.1 17 15.4L256 288 412.5 444.5c6.7 6.7 6.2 17.7-1.5 23.1C371.8 495.6 323.8 512 272 512C139.5 512 32 404.6 32 272zm526.4 16c9.3 0 16.6 7.8 15.4 17c-7.7 55.9-34.6 105.6-73.9 142.3c-6 5.6-15.4 5.2-21.2-.7L320 288l238.4 0z"]},Js={prefix:"fas",iconName:"file-contract",icon:[384,512,[],"f56c","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM80 64l64 0c8.8 0 16 7.2 16 16s-7.2 16-16 16L80 96c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l64 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-64 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm54.2 253.8c-6.1 20.3-24.8 34.2-46 34.2L80 416c-8.8 0-16-7.2-16-16s7.2-16 16-16l8.2 0c7.1 0 13.3-4.6 15.3-11.4l14.9-49.5c3.4-11.3 13.8-19.1 25.6-19.1s22.2 7.7 25.6 19.1l11.6 38.6c7.4-6.2 16.8-9.7 26.8-9.7c15.9 0 30.4 9 37.5 23.2l4.4 8.8 54.1 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-64 0c-6.1 0-11.6-3.4-14.3-8.8l-8.8-17.7c-1.7-3.4-5.1-5.5-8.8-5.5s-7.2 2.1-8.8 5.5l-8.8 17.7c-2.9 5.9-9.2 9.4-15.7 8.8s-12.1-5.1-13.9-11.3L144 349l-9.8 32.8z"]},Qs={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},Zs={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},ei={prefix:"fas",iconName:"heart",icon:[512,512,[128153,128154,128155,128156,128420,129293,129294,129505,9829,10084,61578],"f004","M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"]},ti={prefix:"fas",iconName:"circle",icon:[512,512,[128308,128309,128992,128993,128994,128995,128996,9679,9898,9899,11044,61708,61915],"f111","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"]},ni={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},ai={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128190,128426,"save"],"f0c7","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-242.7c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32L64 32zm0 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32L96 224c-17.7 0-32-14.3-32-32l0-64zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},ri=ai,si={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},ii=si,oi={prefix:"fas",iconName:"phone",icon:[512,512,[128222,128379],"f095","M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"]},li={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"]},ci={prefix:"fas",iconName:"arrow-left",icon:[448,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},di={prefix:"fas",iconName:"file-pdf",icon:[512,512,[],"f1c1","M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 144-208 0c-35.3 0-64 28.7-64 64l0 144-48 0c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128zM176 352l32 0c30.9 0 56 25.1 56 56s-25.1 56-56 56l-16 0 0 32c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-48 0-80c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24l-16 0 0 48 16 0zm96-80l32 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-32 0c-8.8 0-16-7.2-16-16l0-128c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16l0-64c0-8.8-7.2-16-16-16l-16 0 0 96 16 0zm80-112c0-8.8 7.2-16 16-16l48 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-32 0 0 32 32 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-32 0 0 48c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-64 0-64z"]},ui={prefix:"fas",iconName:"tag",icon:[448,512,[127991],"f02b","M0 80L0 229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7L48 32C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},hi={prefix:"fas",iconName:"envelope",icon:[512,512,[128386,9993,61443],"f0e0","M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"]},mi={prefix:"fas",iconName:"user-doctor",icon:[448,512,["user-md"],"f0f0","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-96 55.2C54 332.9 0 401.3 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7c0-81-54-149.4-128-171.1l0 50.8c27.6 7.1 48 32.2 48 62l0 40c0 8.8-7.2 16-16 16l-16 0c-8.8 0-16-7.2-16-16s7.2-16 16-16l0-24c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 24c8.8 0 16 7.2 16 16s-7.2 16-16 16l-16 0c-8.8 0-16-7.2-16-16l0-40c0-29.8 20.4-54.9 48-62l0-57.1c-6-.6-12.1-.9-18.3-.9l-91.4 0c-6.2 0-12.3 .3-18.3 .9l0 65.4c23.1 6.9 40 28.3 40 53.7c0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.4 16.9-46.8 40-53.7l0-59.1zM144 448a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"]},fi=mi,pi={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},gi=pi,xi={prefix:"fas",iconName:"calendar-check",icon:[448,512,[],"f274","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zM329 305c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-95 95-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L329 305z"]},bi={prefix:"fas",iconName:"arrow-rotate-left",icon:[512,512,[8634,"arrow-left-rotate","arrow-rotate-back","arrow-rotate-backward","undo"],"f0e2","M125.7 160l50.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L48 224c-17.7 0-32-14.3-32-32L16 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"]},vi=bi,yi={prefix:"fas",iconName:"calendar-plus",icon:[448,512,[],"f271","M96 32l0 32L48 64C21.5 64 0 85.5 0 112l0 48 448 0 0-48c0-26.5-21.5-48-48-48l-48 0 0-32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 32L160 64l0-32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192L0 192 0 464c0 26.5 21.5 48 48 48l352 0c26.5 0 48-21.5 48-48l0-272zM224 248c13.3 0 24 10.7 24 24l0 56 56 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-56 0 0 56c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-56-56 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l56 0 0-56c0-13.3 10.7-24 24-24z"]},wi={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},ji=wi,Ni={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},_i={prefix:"fas",iconName:"calculator",icon:[384,512,[128425],"f1ec","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM96 64l192 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L96 160c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32zm32 160a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM96 352a32 32 0 1 1 0-64 32 32 0 1 1 0 64zM64 416c0-17.7 14.3-32 32-32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0c-17.7 0-32-14.3-32-32zM192 256a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zm64-64a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM288 448a32 32 0 1 1 0-64 32 32 0 1 1 0 64z"]},Si={prefix:"fas",iconName:"id-card",icon:[576,512,[62147,"drivers-license"],"f2c2","M0 96l576 0c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96zm0 32L0 416c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-288L0 128zM64 405.3c0-29.5 23.9-53.3 53.3-53.3l117.3 0c29.5 0 53.3 23.9 53.3 53.3c0 5.9-4.8 10.7-10.7 10.7L74.7 416c-5.9 0-10.7-4.8-10.7-10.7zM176 192a64 64 0 1 1 0 128 64 64 0 1 1 0-128zm176 16c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16zm0 64c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16zm0 64c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16z"]},ki={prefix:"fas",iconName:"calendar-week",icon:[448,512,[],"f784","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm80 64c-8.8 0-16 7.2-16 16l0 64c0 8.8 7.2 16 16 16l288 0c8.8 0 16-7.2 16-16l0-64c0-8.8-7.2-16-16-16L80 256z"]},Ci={prefix:"fas",iconName:"credit-card",icon:[576,512,[128179,62083,"credit-card-alt"],"f09d","M64 32C28.7 32 0 60.7 0 96l0 32 576 0 0-32c0-35.3-28.7-64-64-64L64 32zM576 224L0 224 0 416c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-192zM112 352l64 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-64 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm112 16c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16z"]},Ai={prefix:"fas",iconName:"medal",icon:[512,512,[127941],"f5a2","M4.1 38.2C1.4 34.2 0 29.4 0 24.6C0 11 11 0 24.6 0L133.9 0c11.2 0 21.7 5.9 27.4 15.5l68.5 114.1c-48.2 6.1-91.3 28.6-123.4 61.9L4.1 38.2zm503.7 0L405.6 191.5c-32.1-33.3-75.2-55.8-123.4-61.9L350.7 15.5C356.5 5.9 366.9 0 378.1 0L487.4 0C501 0 512 11 512 24.6c0 4.8-1.4 9.6-4.1 13.6zM80 336a176 176 0 1 1 352 0A176 176 0 1 1 80 336zm184.4-94.9c-3.4-7-13.3-7-16.8 0l-22.4 45.4c-1.4 2.8-4 4.7-7 5.1L168 298.9c-7.7 1.1-10.7 10.5-5.2 16l36.3 35.4c2.2 2.2 3.2 5.2 2.7 8.3l-8.6 49.9c-1.3 7.6 6.7 13.5 13.6 9.9l44.8-23.6c2.7-1.4 6-1.4 8.7 0l44.8 23.6c6.9 3.6 14.9-2.2 13.6-9.9l-8.6-49.9c-.5-3 .5-6.1 2.7-8.3l36.3-35.4c5.6-5.4 2.5-14.8-5.2-16l-50.1-7.3c-3-.4-5.7-2.4-7-5.1l-22.4-45.4z"]},Pi={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},Li={prefix:"fas",iconName:"gauge-high",icon:[512,512,[62461,"tachometer-alt","tachometer-alt-fast"],"f625","M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM256 416c35.3 0 64-28.7 64-64c0-17.4-6.9-33.1-18.1-44.6L366 161.7c5.3-12.1-.2-26.3-12.3-31.6s-26.3 .2-31.6 12.3L257.9 288c-.6 0-1.3 0-1.9 0c-35.3 0-64 28.7-64 64s28.7 64 64 64zM176 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM96 288a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm352-32a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},Ei=Li,Di={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},Mi={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},Oi=Mi,Ti={prefix:"fas",iconName:"chevron-down",icon:[512,512,[],"f078","M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]},Ri={prefix:"fas",iconName:"list-ul",icon:[512,512,["list-dots"],"f0ca","M64 144a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM64 464a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm48-208a48 48 0 1 0 -96 0 48 48 0 1 0 96 0z"]},Ii={prefix:"fas",iconName:"list-check",icon:[512,512,["tasks"],"f0ae","M152.1 38.2c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 113C-2.3 103.6-2.3 88.4 7 79s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zm0 160c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 273c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zM224 96c0-17.7 14.3-32 32-32l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32zM160 416c0-17.7 14.3-32 32-32l288 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-288 0c-17.7 0-32-14.3-32-32zM48 368a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},Fi=Ii,zi={prefix:"fas",iconName:"circle-user",icon:[512,512,[62142,"user-circle"],"f2bd","M399 384.2C376.9 345.8 335.4 320 288 320l-64 0c-47.4 0-88.9 25.8-111 64.2c35.2 39.2 86.2 63.8 143 63.8s107.8-24.7 143-63.8zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 16a72 72 0 1 0 0-144 72 72 0 1 0 0 144z"]},Bi=zi,qi={prefix:"fas",iconName:"user-shield",icon:[640,512,[],"f505","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c1.8 0 3.5-.2 5.3-.5c-76.3-55.1-99.8-141-103.1-200.2c-16.1-4.8-33.1-7.3-50.7-7.3l-91.4 0zm308.8-78.3l-120 48C358 277.4 352 286.2 352 296c0 63.3 25.9 168.8 134.8 214.2c5.9 2.5 12.6 2.5 18.5 0C614.1 464.8 640 359.3 640 296c0-9.8-6-18.6-15.1-22.3l-120-48c-5.7-2.3-12.1-2.3-17.8 0zM591.4 312c-3.9 50.7-27.2 116.7-95.4 149.7l0-187.8L591.4 312z"]},Ui={prefix:"fas",iconName:"user-graduate",icon:[448,512,[],"f501","M219.3 .5c3.1-.6 6.3-.6 9.4 0l200 40C439.9 42.7 448 52.6 448 64s-8.1 21.3-19.3 23.5L352 102.9l0 57.1c0 70.7-57.3 128-128 128s-128-57.3-128-128l0-57.1L48 93.3l0 65.1 15.7 78.4c.9 4.7-.3 9.6-3.3 13.3s-7.6 5.9-12.4 5.9l-32 0c-4.8 0-9.3-2.1-12.4-5.9s-4.3-8.6-3.3-13.3L16 158.4l0-71.8C6.5 83.3 0 74.3 0 64C0 52.6 8.1 42.7 19.3 40.5l200-40zM111.9 327.7c10.5-3.4 21.8 .4 29.4 8.5l71 75.5c6.3 6.7 17 6.7 23.3 0l71-75.5c7.6-8.1 18.9-11.9 29.4-8.5C401 348.6 448 409.4 448 481.3c0 17-13.8 30.7-30.7 30.7L30.7 512C13.8 512 0 498.2 0 481.3c0-71.9 47-132.7 111.9-153.6z"]},Wi={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},Hi={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},Vi=Hi,Yi={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},Gi={prefix:"fas",iconName:"arrow-trend-up",icon:[576,512,[],"e098","M384 160c-17.7 0-32-14.3-32-32s14.3-32 32-32l160 0c17.7 0 32 14.3 32 32l0 160c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-82.7L342.6 374.6c-12.5 12.5-32.8 12.5-45.3 0L192 269.3 54.6 406.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160c12.5-12.5 32.8-12.5 45.3 0L320 306.7 466.7 160 384 160z"]},$i={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},Xi={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},Ki={prefix:"fas",iconName:"percent",icon:[384,512,[62101,62785,"percentage"],"25","M374.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-320 320c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l320-320zM128 128A64 64 0 1 0 0 128a64 64 0 1 0 128 0zM384 384a64 64 0 1 0 -128 0 64 64 0 1 0 128 0z"]},Ji=Ki,Qi={prefix:"fas",iconName:"trophy",icon:[576,512,[127942],"f091","M400 0L176 0c-26.5 0-48.1 21.8-47.1 48.2c.2 5.3 .4 10.6 .7 15.8L24 64C10.7 64 0 74.7 0 88c0 92.6 33.5 157 78.5 200.7c44.3 43.1 98.3 64.8 138.1 75.8c23.4 6.5 39.4 26 39.4 45.6c0 20.9-17 37.9-37.9 37.9L192 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-26.1 0C337 448 320 431 320 410.1c0-19.6 15.9-39.2 39.4-45.6c39.9-11 93.9-32.7 138.2-75.8C542.5 245 576 180.6 576 88c0-13.3-10.7-24-24-24L446.4 64c.3-5.2 .5-10.4 .7-15.8C448.1 21.8 426.5 0 400 0zM48.9 112l84.4 0c9.1 90.1 29.2 150.3 51.9 190.6c-24.9-11-50.8-26.5-73.2-48.3c-32-31.1-58-76-63-142.3zM464.1 254.3c-22.4 21.8-48.3 37.3-73.2 48.3c22.7-40.3 42.8-100.5 51.9-190.6l84.4 0c-5.1 66.3-31.1 111.2-63 142.3z"]},Zi={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},eo={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},to=eo,no={prefix:"fas",iconName:"award",icon:[384,512,[],"f559","M173.8 5.5c11-7.3 25.4-7.3 36.4 0L228 17.2c6 3.9 13 5.8 20.1 5.4l21.3-1.3c13.2-.8 25.6 6.4 31.5 18.2l9.6 19.1c3.2 6.4 8.4 11.5 14.7 14.7L344.5 83c11.8 5.9 19 18.3 18.2 31.5l-1.3 21.3c-.4 7.1 1.5 14.2 5.4 20.1l11.8 17.8c7.3 11 7.3 25.4 0 36.4L366.8 228c-3.9 6-5.8 13-5.4 20.1l1.3 21.3c.8 13.2-6.4 25.6-18.2 31.5l-19.1 9.6c-6.4 3.2-11.5 8.4-14.7 14.7L301 344.5c-5.9 11.8-18.3 19-31.5 18.2l-21.3-1.3c-7.1-.4-14.2 1.5-20.1 5.4l-17.8 11.8c-11 7.3-25.4 7.3-36.4 0L156 366.8c-6-3.9-13-5.8-20.1-5.4l-21.3 1.3c-13.2 .8-25.6-6.4-31.5-18.2l-9.6-19.1c-3.2-6.4-8.4-11.5-14.7-14.7L39.5 301c-11.8-5.9-19-18.3-18.2-31.5l1.3-21.3c.4-7.1-1.5-14.2-5.4-20.1L5.5 210.2c-7.3-11-7.3-25.4 0-36.4L17.2 156c3.9-6 5.8-13 5.4-20.1l-1.3-21.3c-.8-13.2 6.4-25.6 18.2-31.5l19.1-9.6C65 70.2 70.2 65 73.4 58.6L83 39.5c5.9-11.8 18.3-19 31.5-18.2l21.3 1.3c7.1 .4 14.2-1.5 20.1-5.4L173.8 5.5zM272 192a80 80 0 1 0 -160 0 80 80 0 1 0 160 0zM1.3 441.8L44.4 339.3c.2 .1 .3 .2 .4 .4l9.6 19.1c11.7 23.2 36 37.3 62 35.8l21.3-1.3c.2 0 .5 0 .7 .2l17.8 11.8c5.1 3.3 10.5 5.9 16.1 7.7l-37.6 89.3c-2.3 5.5-7.4 9.2-13.3 9.7s-11.6-2.2-14.8-7.2L74.4 455.5l-56.1 8.3c-5.7 .8-11.4-1.5-15-6s-4.3-10.7-2.1-16zm248 60.4L211.7 413c5.6-1.8 11-4.3 16.1-7.7l17.8-11.8c.2-.1 .4-.2 .7-.2l21.3 1.3c26 1.5 50.3-12.6 62-35.8l9.6-19.1c.1-.2 .2-.3 .4-.4l43.2 102.5c2.2 5.3 1.4 11.4-2.1 16s-9.3 6.9-15 6l-56.1-8.3-32.2 49.2c-3.2 5-8.9 7.7-14.8 7.2s-11-4.3-13.3-9.7z"]},ao={prefix:"fas",iconName:"building",icon:[384,512,[127970,61687],"f1ad","M48 0C21.5 0 0 21.5 0 48L0 464c0 26.5 21.5 48 48 48l96 0 0-80c0-26.5 21.5-48 48-48s48 21.5 48 48l0 80 96 0c26.5 0 48-21.5 48-48l0-416c0-26.5-21.5-48-48-48L48 0zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm112-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM80 96l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM272 96l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"]},ro={prefix:"fas",iconName:"clock-rotate-left",icon:[512,512,["history"],"f1da","M75 75L41 41C25.9 25.9 0 36.6 0 57.9L0 168c0 13.3 10.7 24 24 24l110.1 0c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24l0 104c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65 0-94.1c0-13.3-10.7-24-24-24z"]},so=ro,io={prefix:"fas",iconName:"wand-magic",icon:[512,512,["magic"],"f0d0","M14.1 463.3c-18.7-18.7-18.7-49.1 0-67.9L395.4 14.1c18.7-18.7 49.1-18.7 67.9 0l34.6 34.6c18.7 18.7 18.7 49.1 0 67.9L116.5 497.9c-18.7 18.7-49.1 18.7-67.9 0L14.1 463.3zM347.6 187.6l105-105L429.4 59.3l-105 105 23.3 23.3z"]},oo=io,lo={prefix:"fas",iconName:"hashtag",icon:[448,512,[62098],"23","M181.3 32.4c17.4 2.9 29.2 19.4 26.3 36.8L197.8 128l95.1 0 11.5-69.3c2.9-17.4 19.4-29.2 36.8-26.3s29.2 19.4 26.3 36.8L357.8 128l58.2 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-68.9 0L325.8 320l58.2 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-68.9 0-11.5 69.3c-2.9 17.4-19.4 29.2-36.8 26.3s-29.2-19.4-26.3-36.8l9.8-58.7-95.1 0-11.5 69.3c-2.9 17.4-19.4 29.2-36.8 26.3s-29.2-19.4-26.3-36.8L90.2 384 32 384c-17.7 0-32-14.3-32-32s14.3-32 32-32l68.9 0 21.3-128L64 192c-17.7 0-32-14.3-32-32s14.3-32 32-32l68.9 0 11.5-69.3c2.9-17.4 19.4-29.2 36.8-26.3zM187.1 192L165.8 320l95.1 0 21.3-128-95.1 0z"]},co={prefix:"fas",iconName:"scale-balanced",icon:[640,512,[9878,"balance-scale"],"f24e","M384 32l128 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L398.4 96c-5.2 25.8-22.9 47.1-46.4 57.3L352 448l160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-192 0-192 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l160 0 0-294.7c-23.5-10.3-41.2-31.6-46.4-57.3L128 96c-17.7 0-32-14.3-32-32s14.3-32 32-32l128 0c14.6-19.4 37.8-32 64-32s49.4 12.6 64 32zm55.6 288l144.9 0L512 195.8 439.6 320zM512 416c-62.9 0-115.2-34-126-78.9c-2.6-11 1-22.3 6.7-32.1l95.2-163.2c5-8.6 14.2-13.8 24.1-13.8s19.1 5.3 24.1 13.8l95.2 163.2c5.7 9.8 9.3 21.1 6.7 32.1C627.2 382 574.9 416 512 416zM126.8 195.8L54.4 320l144.9 0L126.8 195.8zM.9 337.1c-2.6-11 1-22.3 6.7-32.1l95.2-163.2c5-8.6 14.2-13.8 24.1-13.8s19.1 5.3 24.1 13.8l95.2 163.2c5.7 9.8 9.3 21.1 6.7 32.1C242 382 189.7 416 126.8 416S11.7 382 .9 337.1z"]},uo=co,ho={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},mo={prefix:"fas",iconName:"user-plus",icon:[640,512,[],"f234","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3zM504 312l0-64-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l64 0 0-64c0-13.3 10.7-24 24-24s24 10.7 24 24l0 64 64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0 0 64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},fo={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},po={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},go=po,xo=po,bo={prefix:"fas",iconName:"brain",icon:[512,512,[129504],"f5dc","M184 0c30.9 0 56 25.1 56 56l0 400c0 30.9-25.1 56-56 56c-28.9 0-52.7-21.9-55.7-50.1c-5.2 1.4-10.7 2.1-16.3 2.1c-35.3 0-64-28.7-64-64c0-7.4 1.3-14.6 3.6-21.2C21.4 367.4 0 338.2 0 304c0-31.9 18.7-59.5 45.8-72.3C37.1 220.8 32 207 32 192c0-30.7 21.6-56.3 50.4-62.6C80.8 123.9 80 118 80 112c0-29.9 20.6-55.1 48.3-62.1C131.3 21.9 155.1 0 184 0zM328 0c28.9 0 52.6 21.9 55.7 49.9c27.8 7 48.3 32.1 48.3 62.1c0 6-.8 11.9-2.4 17.4c28.8 6.2 50.4 31.9 50.4 62.6c0 15-5.1 28.8-13.8 39.7C493.3 244.5 512 272.1 512 304c0 34.2-21.4 63.4-51.6 74.8c2.3 6.6 3.6 13.8 3.6 21.2c0 35.3-28.7 64-64 64c-5.6 0-11.1-.7-16.3-2.1c-3 28.2-26.8 50.1-55.7 50.1c-30.9 0-56-25.1-56-56l0-400c0-30.9 25.1-56 56-56z"]},vo={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},yo=vo,wo={prefix:"fas",iconName:"note-sticky",icon:[448,512,[62026,"sticky-note"],"f249","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l224 0 0-112c0-26.5 21.5-48 48-48l112 0 0-224c0-35.3-28.7-64-64-64L64 32zM448 352l-45.3 0L336 352c-8.8 0-16 7.2-16 16l0 66.7 0 45.3 32-32 64-64 32-32z"]},jo=wo,No={prefix:"fas",iconName:"dollar-sign",icon:[320,512,[128178,61781,"dollar","usd"],"24","M160 0c17.7 0 32 14.3 32 32l0 35.7c1.6 .2 3.1 .4 4.7 .7c.4 .1 .7 .1 1.1 .2l48 8.8c17.4 3.2 28.9 19.9 25.7 37.2s-19.9 28.9-37.2 25.7l-47.5-8.7c-31.3-4.6-58.9-1.5-78.3 6.2s-27.2 18.3-29 28.1c-2 10.7-.5 16.7 1.2 20.4c1.8 3.9 5.5 8.3 12.8 13.2c16.3 10.7 41.3 17.7 73.7 26.3l2.9 .8c28.6 7.6 63.6 16.8 89.6 33.8c14.2 9.3 27.6 21.9 35.9 39.5c8.5 17.9 10.3 37.9 6.4 59.2c-6.9 38-33.1 63.4-65.6 76.7c-13.7 5.6-28.6 9.2-44.4 11l0 33.4c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-34.9c-.4-.1-.9-.1-1.3-.2l-.2 0s0 0 0 0c-24.4-3.8-64.5-14.3-91.5-26.3c-16.1-7.2-23.4-26.1-16.2-42.2s26.1-23.4 42.2-16.2c20.9 9.3 55.3 18.5 75.2 21.6c31.9 4.7 58.2 2 76-5.3c16.9-6.9 24.6-16.9 26.8-28.9c1.9-10.6 .4-16.7-1.3-20.4c-1.9-4-5.6-8.4-13-13.3c-16.4-10.7-41.5-17.7-74-26.3l-2.8-.7s0 0 0 0C119.4 279.3 84.4 270 58.4 253c-14.2-9.3-27.5-22-35.8-39.6c-8.4-17.9-10.1-37.9-6.1-59.2C23.7 116 52.3 91.2 84.8 78.3c13.3-5.3 27.9-8.9 43.2-11L128 32c0-17.7 14.3-32 32-32z"]},_o={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]};const So=e=>{let{isOpen:t,onAccept:n,onDecline:r,isLoading:s=!1,userInfo:i=null}=e;const[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1);(0,a.useEffect)((()=>{t&&(l(!1),d(!1))}),[t]);return t?(0,He.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,He.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col border border-gray-200",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-t-3xl",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,He.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:Js,className:"text-white text-xl"})}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Termos de Servi\xe7o"}),(0,He.jsx)("p",{className:"text-gray-600",children:"AbaPlay - Plataforma de Gest\xe3o Terap\xeautica"})]})]}),(0,He.jsx)("button",{onClick:r,className:"w-10 h-10 rounded-full bg-gray-100 hover:bg-red-100 flex items-center justify-center transition-colors",disabled:s,children:(0,He.jsx)(Hr,{icon:Vi,className:"text-gray-500 hover:text-red-600"})})]}),i&&(0,He.jsx)("div",{className:"p-6 bg-green-50 border-b border-green-100",children:(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)(Hr,{icon:Rs,className:"text-green-600 text-xl"}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("p",{className:"text-green-800 font-semibold",children:["Bem-vindo(a), ",i.fullName||i.username,"!"]}),(0,He.jsx)("p",{className:"text-green-700 text-sm",children:"Para continuar, \xe9 necess\xe1rio aceitar nossos Termos de Servi\xe7o."})]})]})}),(0,He.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col",children:[!o&&(0,He.jsx)("div",{className:"bg-yellow-50 border-b border-yellow-200 px-6 py-3",children:(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)(Hr,{icon:Bs,className:"text-yellow-600"}),(0,He.jsx)("p",{className:"text-yellow-800 text-sm font-medium",children:"Por favor, role at\xe9 o final para ler todos os termos"})]})}),(0,He.jsx)("div",{className:"flex-1 overflow-y-auto p-6 text-gray-700 leading-relaxed",onScroll:e=>{const{scrollTop:t,scrollHeight:n,clientHeight:a}=e.target;l(t+a>=n-10)},children:(0,He.jsxs)("div",{className:"prose max-w-none",children:[(0,He.jsxs)("div",{className:"text-center mb-8 pb-6 border-b border-gray-200",children:[(0,He.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Termos de Servi\xe7o da Plataforma AbaPlay"}),(0,He.jsx)("p",{className:"text-gray-600",children:"\xdaltima atualiza\xe7\xe3o: 27 de agosto de 2025"})]}),(0,He.jsx)("div",{className:"bg-blue-50 rounded-2xl p-6 mb-8 border border-blue-100",children:(0,He.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,He.jsx)(Hr,{icon:Vs,className:"text-blue-600 text-2xl mt-1"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"Importante"}),(0,He.jsx)("p",{className:"text-blue-700",children:"Bem-vindo \xe0 AbaPlay! Ao criar uma conta ou utilizar nossa Plataforma, voc\xea concorda com estes Termos de Servi\xe7o. Leia-os com aten\xe7\xe3o."}),(0,He.jsx)("p",{className:"text-blue-700 mt-2",children:"Estes Termos representam os pontos essenciais do nosso acordo. Para consultar o Contrato de Presta\xe7\xe3o de Servi\xe7os na vers\xe3o integral, por favor, solicite atrav\xe9s do nosso e-mail de suporte."})]})]})}),(0,He.jsxs)("div",{className:"space-y-8",children:[(0,He.jsxs)("section",{children:[(0,He.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-sm",children:"1"}),(0,He.jsx)("span",{children:"Nossos Servi\xe7os"})]}),(0,He.jsx)("p",{children:'A AbaPlay concede a voc\xea uma licen\xe7a limitada, n\xe3o exclusiva e intransfer\xedvel para usar nosso software de gest\xe3o de pacientes e terapias ("Plataforma"), em regime de Software como Servi\xe7o (SaaS). O objetivo da Plataforma \xe9 auxiliar no gerenciamento dos tratamentos de seus pacientes.'})]}),(0,He.jsxs)("section",{children:[(0,He.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-sm",children:"2"}),(0,He.jsx)("span",{children:"Acesso e Seguran\xe7a da Conta"})]}),(0,He.jsx)("p",{children:"Seu acesso ser\xe1 liberado ap\xf3s a confirma\xe7\xe3o do primeiro pagamento. Voc\xea \xe9 o \xfanico respons\xe1vel por todas as atividades em sua conta e pela seguran\xe7a de suas senhas. A senha do usu\xe1rio Administrador s\xf3 poder\xe1 ser redefinida mediante solicita\xe7\xe3o formal ao nosso suporte oficial."})]}),(0,He.jsxs)("section",{children:[(0,He.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-bold text-sm",children:"3"}),(0,He.jsx)("span",{children:"Pagamento e Reajuste"})]}),(0,He.jsx)("p",{children:"O valor mensal do servi\xe7o \xe9 de R$ 34,90 por paciente contratado. O pagamento deve ser feito na data de vencimento acordada. O atraso implicar\xe1 em multa de 2% e juros de 1% ao m\xeas. O valor ser\xe1 reajustado anualmente pelo \xedndice IPCA/IBGE."})]}),(0,He.jsxs)("section",{children:[(0,He.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center text-red-600 font-bold text-sm",children:"4"}),(0,He.jsx)("span",{children:"Inadimpl\xeancia"})]}),(0,He.jsx)("p",{children:"O acesso \xe0 Plataforma ser\xe1 suspenso ap\xf3s 10 dias corridos de atraso no pagamento. Se o atraso persistir por 30 dias corridos, o contrato ser\xe1 rescindido e o acesso cancelado, sem preju\xedzo da cobran\xe7a dos valores devidos."})]}),(0,He.jsxs)("section",{children:[(0,He.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center text-yellow-600 font-bold text-sm",children:"5"}),(0,He.jsx)("span",{children:"Cancelamento"})]}),(0,He.jsx)("p",{children:"N\xe3o h\xe1 fidelidade. Voc\xea pode cancelar sua assinatura a qualquer momento, bastando nos notificar por e-mail com 30 dias de anteced\xeancia. Os servi\xe7os continuar\xe3o ativos e ser\xe3o cobrados normalmente durante este per\xedodo de aviso pr\xe9vio."})]}),(0,He.jsxs)("section",{children:[(0,He.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm",children:"6"}),(0,He.jsx)("span",{children:"Disponibilidade do Servi\xe7o (SLA)"})]}),(0,He.jsx)("p",{children:"Nosso objetivo \xe9 manter a Plataforma dispon\xedvel (uptime) em 99% do tempo. Manuten\xe7\xf5es programadas ser\xe3o avisadas com anteced\xeancia. A medi\xe7\xe3o do uptime \xe9 feita por nossos servidores e exclui fatores externos (como a sua conex\xe3o com a internet)."})]}),(0,He.jsxs)("section",{children:[(0,He.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-bold text-sm",children:"7"}),(0,He.jsx)("span",{children:"Prote\xe7\xe3o de Dados (LGPD)"})]}),(0,He.jsx)("p",{children:"Voc\xea, ao utilizar a Plataforma, \xe9 o Controlador dos dados de seus pacientes e usu\xe1rios. A AbaPlay atua como Operadora, processando os dados apenas para o funcionamento do servi\xe7o. Voc\xea garante que possui a base legal necess\xe1ria (como o consentimento) para inserir e tratar quaisquer dados pessoais na Plataforma, isentando a AbaPlay de responsabilidade por uso indevido."})]}),(0,He.jsxs)("section",{children:[(0,He.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"w-8 h-8 bg-teal-100 rounded-full flex items-center justify-center text-teal-600 font-bold text-sm",children:"8"}),(0,He.jsx)("span",{children:"Propriedade Intelectual"})]}),(0,He.jsx)("p",{children:"A Plataforma, seu conte\xfado e a marca AbaPlay s\xe3o de nossa propriedade exclusiva. Voc\xea n\xe3o pode copiar, modificar ou tentar recriar nossa tecnologia."})]}),(0,He.jsxs)("section",{children:[(0,He.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center text-orange-600 font-bold text-sm",children:"9"}),(0,He.jsx)("span",{children:"Limita\xe7\xe3o de Responsabilidade"})]}),(0,He.jsx)("p",{children:"Nossa responsabilidade total por quaisquer danos ou preju\xedzos decorrentes do uso da Plataforma est\xe1 limitada ao valor pago por voc\xea nos \xfaltimos 3 meses."})]}),(0,He.jsxs)("section",{children:[(0,He.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"w-8 h-8 bg-cyan-100 rounded-full flex items-center justify-center text-cyan-600 font-bold text-sm",children:"10"}),(0,He.jsx)("span",{children:"Portabilidade e Exclus\xe3o de Dados"})]}),(0,He.jsx)("p",{children:"Ap\xf3s o cancelamento, voc\xea pode solicitar uma c\xf3pia de seus dados em formato CSV, que ser\xe1 fornecida em at\xe9 15 dias \xfateis. Seus dados ser\xe3o mantidos por 60 dias ap\xf3s o t\xe9rmino do contrato e depois ser\xe3o exclu\xeddos permanentemente."})]}),(0,He.jsxs)("section",{children:[(0,He.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"w-8 h-8 bg-pink-100 rounded-full flex items-center justify-center text-pink-600 font-bold text-sm",children:"11"}),(0,He.jsx)("span",{children:"Encerramento da Plataforma"})]}),(0,He.jsx)("p",{children:"Caso a AbaPlay seja descontinuada, notificaremos todos os usu\xe1rios com no m\xednimo 60 dias de anteced\xeancia, garantindo tempo para a transi\xe7\xe3o e exporta\xe7\xe3o de dados."})]}),(0,He.jsxs)("section",{children:[(0,He.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 font-bold text-sm",children:"12"}),(0,He.jsx)("span",{children:"Contato e Foro"})]}),(0,He.jsxs)("p",{children:["O canal oficial para comunica\xe7\xf5es \xe9 o e-mail ",(0,He.jsx)("strong",{children:"ABAPLAYOFICIAL@GMAIL.COM"}),". Fica eleito o foro da Comarca de S\xe3o Paulo, SP, para resolver quaisquer disputas."]})]})]}),(0,He.jsx)("div",{className:"mt-12 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200",children:(0,He.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,He.jsx)(Hr,{icon:ls,className:"text-blue-600 text-2xl mt-1"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"Concord\xe2ncia"}),(0,He.jsx)("p",{className:"text-blue-700",children:'Ao clicar em "Aceitar" ou ao continuar usando a Plataforma, voc\xea confirma que leu, entendeu e concorda em cumprir estes Termos de Servi\xe7o.'})]})]})})]})})]}),(0,He.jsxs)("div",{className:"border-t border-gray-200 p-6 bg-gray-50 rounded-b-3xl",children:[!o&&(0,He.jsx)("div",{className:"mb-4 p-3 bg-yellow-100 border border-yellow-200 rounded-xl",children:(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)(Hr,{icon:go,className:"text-yellow-600"}),(0,He.jsx)("p",{className:"text-yellow-800 text-sm font-medium",children:"Voc\xea precisa ler todos os termos antes de prosseguir"})]})}),(0,He.jsxs)("div",{className:"flex space-x-4",children:[(0,He.jsx)("button",{onClick:r,disabled:s,className:"flex-1 py-3 px-6 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold rounded-xl transition-colors disabled:opacity-50",children:"N\xe3o Aceito"}),(0,He.jsx)("button",{onClick:async()=>{d(!0);try{await n()}catch(e){console.error("Erro ao aceitar termos:",e)}finally{d(!1)}},disabled:!o||s||c,className:"flex-1 py-3 px-6 font-semibold rounded-xl transition-all flex items-center justify-center space-x-2 ".concat(!o||s||c?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white shadow-lg hover:shadow-xl"),children:c?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin"}),(0,He.jsx)("span",{children:"Processando..."})]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Fs}),(0,He.jsx)("span",{children:"Aceito os Termos"})]})})]})]})]})}):null},ko=()=>(0,He.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,He.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600 via-indigo-700 to-purple-800",children:(0,He.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})}),(0,He.jsxs)("div",{className:"absolute inset-0",children:[(0,He.jsx)("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-white/5 rounded-full blur-xl animate-pulse"}),(0,He.jsx)("div",{className:"absolute top-3/4 right-1/4 w-24 h-24 bg-blue-400/10 rounded-full blur-lg animate-bounce",style:{animationDuration:"3s"}}),(0,He.jsx)("div",{className:"absolute top-1/2 left-1/3 w-16 h-16 bg-purple-400/10 rounded-full blur-md animate-ping",style:{animationDuration:"2s"}}),(0,He.jsx)("div",{className:"absolute top-20 right-20 w-20 h-20 border border-white/10 rotate-45 animate-spin",style:{animationDuration:"20s"}}),(0,He.jsx)("div",{className:"absolute bottom-20 left-20 w-16 h-16 bg-gradient-to-r from-cyan-400/20 to-blue-400/20 transform rotate-12 animate-pulse"})]}),(0,He.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-32",children:(0,He.jsx)("svg",{className:"absolute bottom-0 w-full h-full",viewBox:"0 0 1200 120",preserveAspectRatio:"none",children:(0,He.jsx)("path",{d:"M0,60 C300,100 900,20 1200,60 L1200,120 L0,120 Z",fill:"rgba(255,255,255,0.05)",className:"animate-pulse",children:(0,He.jsx)("animate",{attributeName:"d",dur:"10s",repeatCount:"indefinite",values:"M0,60 C300,100 900,20 1200,60 L1200,120 L0,120 Z; M0,80 C300,40 900,80 1200,40 L1200,120 L0,120 Z; M0,60 C300,100 900,20 1200,60 L1200,120 L0,120 Z"})})})})]}),Co=()=>{const[e,t]=(0,a.useState)(0),n=[{icon:Qs,title:"Progresso Vis\xedvel em Tempo Real",description:"Gr\xe1ficos interativos que mostram a evolu\xe7\xe3o de cada crian\xe7a",visual:(0,He.jsxs)("div",{className:"flex space-x-2 items-end justify-center h-16",children:[(0,He.jsx)("div",{className:"w-3 bg-cyan-400 rounded-t animate-pulse",style:{height:"20%",animationDelay:"0s"}}),(0,He.jsx)("div",{className:"w-3 bg-blue-400 rounded-t animate-pulse",style:{height:"40%",animationDelay:"0.2s"}}),(0,He.jsx)("div",{className:"w-3 bg-indigo-400 rounded-t animate-pulse",style:{height:"60%",animationDelay:"0.4s"}}),(0,He.jsx)("div",{className:"w-3 bg-purple-400 rounded-t animate-pulse",style:{height:"80%",animationDelay:"0.6s"}}),(0,He.jsx)("div",{className:"w-3 bg-pink-400 rounded-t animate-pulse",style:{height:"100%",animationDelay:"0.8s"}})]})},{icon:rs,title:"Equipe e Pais Conectados",description:"Comunica\xe7\xe3o instant\xe2nea com sistema de men\xe7\xf5es inteligente",visual:(0,He.jsxs)("div",{className:"flex justify-center items-center space-x-4",children:[(0,He.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-cyan-400 to-blue-400 rounded-full animate-ping"}),(0,He.jsxs)("div",{className:"flex space-x-1",children:[(0,He.jsx)("div",{className:"w-1 h-1 bg-white rounded-full animate-bounce",style:{animationDelay:"0s"}}),(0,He.jsx)("div",{className:"w-1 h-1 bg-white rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,He.jsx)("div",{className:"w-1 h-1 bg-white rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,He.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full animate-ping",style:{animationDelay:"1s"}})]})},{icon:us,title:"Decis\xf5es Baseadas em Dados",description:"Insights precisos para otimizar as interven\xe7\xf5es terap\xeauticas",visual:(0,He.jsxs)("div",{className:"relative flex justify-center items-center",children:[(0,He.jsx)("div",{className:"w-12 h-12 border-4 border-yellow-400/30 rounded-full animate-spin",style:{animationDuration:"3s"},children:(0,He.jsx)("div",{className:"absolute inset-2 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full animate-pulse"})}),(0,He.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:us,className:"text-yellow-300 text-xl animate-pulse"})})]})}];return(0,a.useEffect)((()=>{const e=setInterval((()=>{t((e=>(e+1)%n.length))}),4e3);return()=>clearInterval(e)}),[]),(0,He.jsxs)("div",{className:"relative h-48 flex flex-col items-center justify-center text-center",children:[(0,He.jsx)("div",{className:"mb-6",children:n[e].visual}),(0,He.jsxs)("div",{className:"space-y-3",children:[(0,He.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,He.jsx)(Hr,{icon:n[e].icon,className:"text-cyan-400 text-xl"}),(0,He.jsx)("h3",{className:"text-xl font-bold text-white",children:n[e].title})]}),(0,He.jsx)("p",{className:"text-blue-100 text-sm max-w-xs leading-relaxed",children:n[e].description})]}),(0,He.jsx)("div",{className:"flex space-x-2 mt-6",children:n.map(((n,a)=>(0,He.jsx)("button",{className:"w-2 h-2 rounded-full transition-all duration-300 ".concat(a===e?"bg-cyan-400 w-6":"bg-white/30 hover:bg-white/50"),onClick:()=>t(a)},a)))})]})},Ao=()=>{const[e,t]=(0,a.useState)({sessions:0,therapists:0,improvement:0}),n=15247,r=284,s=87;return(0,a.useEffect)((()=>{const e=setInterval((()=>{t((e=>({sessions:Math.min(e.sessions+Math.ceil(n/60),n),therapists:Math.min(e.therapists+Math.ceil(r/60),r),improvement:Math.min(e.improvement+Math.ceil(s/60),s)})))}),2e3/60);return setTimeout((()=>clearInterval(e)),2e3),()=>clearInterval(e)}),[]),(0,He.jsxs)("div",{className:"space-y-4",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,He.jsxs)("span",{className:"text-blue-100 text-sm",children:[(0,He.jsxs)("span",{className:"font-bold text-white",children:["+",e.sessions.toLocaleString()]})," sess\xf5es registradas este m\xeas"]})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),(0,He.jsxs)("span",{className:"text-blue-100 text-sm",children:[(0,He.jsxs)("span",{className:"font-bold text-white",children:["+",e.therapists]})," terapeutas ativos hoje"]})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse",style:{animationDelay:"1s"}}),(0,He.jsxs)("span",{className:"text-blue-100 text-sm",children:[(0,He.jsxs)("span",{className:"font-bold text-white",children:[e.improvement,"%"]})," das crian\xe7as mostram melhoria em 30 dias"]})]})]})},Po=()=>{var e,t;const[n,r]=(0,a.useState)(""),[s,i]=(0,a.useState)(""),[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),{login:u}=Ge(),h=Z(),m=J(),[f,p]=(0,a.useState)("enter_username"),[g,x]=(0,a.useState)(null),[b,v]=(0,a.useState)(""),[y,w]=(0,a.useState)(""),[j,N]=(0,a.useState)(!1),[_,S]=(0,a.useState)(!1),[k,C]=(0,a.useState)(null),A=(null===(e=m.state)||void 0===e||null===(t=e.from)||void 0===t||t.pathname,async e=>{e.preventDefault(),d(!0),l("");try{const e=await(async e=>{const t=await fetch("".concat(qe.H,"/auth/check-user"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})});if(!t.ok){var n,a;const e=await t.json().catch((()=>({})));throw new Error((null===e||void 0===e||null===(n=e.errors)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.msg)||"Erro ao verificar utilizador.")}return t.json()})(n);"SET_PASSWORD"===e.action?(x(e.user),p("set_password")):"REQUIRE_PASSWORD"===e.action&&p("enter_password")}catch(t){console.error("Erro em handleUsernameSubmit:",t.message),l(t.message)}finally{d(!1)}}),P=async e=>{e.preventDefault(),d(!0),l("");try{const e=await(async e=>{const t=await fetch("".concat(qe.H,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){var n,a;const e=await t.json().catch((()=>({})));throw new Error((null===e||void 0===e||null===(n=e.errors)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.msg)||"Erro ao tentar fazer login.")}return t.json()})({username:n,password:s});if(e.user&&e.user.is_admin&&!e.user.terms_accepted_at)return C(e),S(!0),void d(!1);await u(e.token);let t="/";if(e.user&&e.user.role){switch(e.user.role.toLowerCase()){case"admin":case"therapist":t="/dashboard";break;case"pai":t="/parent-dashboard";break;default:t="/"}}h(t,{replace:!0})}catch(t){console.error("Erro em handleLoginSubmit:",t.message),l(t.message)}finally{d(!1)}},L=async e=>{if(e.preventDefault(),b===y)if(b.length<6)l("A senha deve ter pelo menos 6 caracteres.");else{d(!0),l("");try{const e=await(async(e,t)=>{const n=await fetch("".concat(qe.H,"/auth/set-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,password:t})});if(!n.ok){var a,r;const e=await n.json().catch((()=>({})));throw new Error((null===e||void 0===e||null===(a=e.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"N\xe3o foi poss\xedvel definir a senha.")}return n.json()})(g.userId,b);if(e&&e.token){if(e.user&&e.user.is_admin&&!e.user.terms_accepted_at)return C(e),S(!0),void d(!1);await u(e.token);let t="/";if(e.user&&e.user.role){switch(e.user.role.toLowerCase()){case"admin":case"therapist":t="/dashboard";break;case"pai":t="/parent-dashboard";break;default:t="/"}}h(t,{replace:!0})}else l("N\xe3o foi poss\xedvel fazer o login autom\xe1tico. Por favor, tente novamente."),p("enter_username")}catch(t){l((null===t||void 0===t?void 0:t.message)||"Ocorreu um erro desconhecido ao definir a senha.")}finally{d(!1)}}else l("As senhas n\xe3o coincidem.")};return(0,He.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100 flex items-center justify-center p-4",children:[(0,He.jsx)("div",{className:"w-full max-w-7xl mx-auto",children:(0,He.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden lg:grid lg:grid-cols-5 border border-gray-100",children:[(0,He.jsxs)("div",{className:"relative hidden lg:block lg:col-span-3",children:[(0,He.jsx)(ko,{}),(0,He.jsxs)("div",{className:"relative z-10 p-12 flex flex-col justify-between h-full min-h-[700px]",children:[(0,He.jsx)("div",{className:"text-center",children:(0,He.jsxs)("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[(0,He.jsx)("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:bo,className:"text-2xl text-white"})}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h1",{className:"text-3xl font-bold text-white tracking-wide",children:"ABAplay"}),(0,He.jsx)("p",{className:"text-blue-200 text-sm",children:"Transformando Vidas atrav\xe9s da Ci\xeancia"})]})]})}),(0,He.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,He.jsx)(Co,{})}),(0,He.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20 mb-8",children:[(0,He.jsx)("h3",{className:"text-white font-semibold mb-4 text-center",children:"Atividade em Tempo Real"}),(0,He.jsx)(Ao,{})]}),(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("p",{className:"text-blue-200 text-sm mb-3",children:"Usado por cl\xednicas l\xedderes em interven\xe7\xe3o infantil"}),(0,He.jsxs)("div",{className:"flex items-center justify-center space-x-6 opacity-60",children:[(0,He.jsx)("div",{className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:no,className:"text-white text-sm"})}),(0,He.jsx)("div",{className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:ei,className:"text-white text-sm"})}),(0,He.jsx)("div",{className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:Vs,className:"text-white text-sm"})})]}),(0,He.jsxs)("p",{className:"text-blue-300 text-xs mt-4",children:["\xa9 ",(new Date).getFullYear()," ABAplay. Todos os direitos reservados."]})]})]})]}),(0,He.jsx)("div",{className:"lg:col-span-2 p-8 lg:p-12 flex flex-col justify-center",children:(0,He.jsxs)("div",{className:"w-full max-w-md mx-auto",children:[(0,He.jsxs)("div",{className:"text-center mb-10 lg:hidden",children:[(0,He.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,He.jsx)(Hr,{icon:bo,className:"text-2xl text-white"})}),(0,He.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Bem-vindo \xe0 ABAplay"}),(0,He.jsx)("p",{className:"text-gray-600",children:"Sua plataforma de interven\xe7\xe3o infantil"})]}),(0,He.jsxs)("div",{className:"hidden lg:block text-center mb-10",children:[(0,He.jsxs)("h2",{className:"text-3xl font-bold text-gray-800 mb-3",children:["enter_username"===f&&"Bem-vindo de volta","enter_password"===f&&"Quase l\xe1!","set_password"===f&&"Primeiro Acesso"]}),(0,He.jsxs)("p",{className:"text-gray-600 leading-relaxed",children:["enter_username"===f&&"Acesse sua conta e continue transformando vidas","enter_password"===f&&"Digite sua senha para acessar a plataforma","set_password"===f&&"Configure sua conta para come\xe7ar"]})]}),o&&(0,He.jsx)("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-2xl",children:(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full flex-shrink-0"}),(0,He.jsx)("p",{className:"text-red-700 text-sm font-medium",children:o})]})}),(0,He.jsx)("div",{className:"space-y-6",children:(()=>{const e="w-full pl-12 pr-4 py-4 bg-gray-50 border border-gray-200 rounded-2xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:bg-white transition-all duration-300 font-medium",t="w-full flex items-center justify-center py-4 px-6 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-2xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5";switch(f){case"enter_password":return(0,He.jsxs)("form",{onSubmit:P,className:"space-y-8",children:[(0,He.jsx)("div",{className:"text-left",children:(0,He.jsxs)("button",{type:"button",onClick:()=>{p("enter_username"),l("")},className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium text-sm transition-colors",children:[(0,He.jsx)(Hr,{icon:Zs,className:"rotate-180"}),(0,He.jsx)("span",{children:"Voltar para utilizador"})]})}),(0,He.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100",children:(0,He.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,He.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:js,className:"text-white"})}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Utilizador"}),(0,He.jsx)("p",{className:"font-bold text-xl text-gray-800",children:n})]})]})}),(0,He.jsxs)("div",{className:"space-y-2",children:[(0,He.jsx)("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700",children:"Senha de Acesso"}),(0,He.jsxs)("div",{className:"relative",children:[(0,He.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,He.jsx)(Hr,{icon:Ns,className:"text-gray-400"})}),(0,He.jsx)("input",{id:"password",name:"password",type:j?"text":"password",required:!0,autoFocus:!0,value:s,onChange:e=>i(e.target.value),className:e,placeholder:"Digite sua senha"}),(0,He.jsx)("button",{type:"button",onClick:()=>N(!j),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-blue-600 transition-colors",children:(0,He.jsx)(Hr,{icon:j?bs:ni})})]})]}),(0,He.jsx)("button",{type:"submit",disabled:c,className:t,children:c?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin mr-3"}),(0,He.jsx)("span",{children:"Entrando..."})]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)("span",{children:"Entrar na Plataforma"}),(0,He.jsx)(Hr,{icon:Zs,className:"ml-3"})]})})]});case"set_password":return(0,He.jsxs)("form",{onSubmit:L,className:"space-y-8",children:[(0,He.jsxs)("div",{className:"text-center bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100",children:[(0,He.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,He.jsx)(Hr,{icon:_o,className:"text-white text-xl"})}),(0,He.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:["Bem-vindo(a), ",(null===g||void 0===g?void 0:g.fullName)||(null===g||void 0===g?void 0:g.username),"!"]}),(0,He.jsx)("p",{className:"text-gray-600",children:"Este \xe9 o seu primeiro acesso. Vamos criar uma senha segura para proteger sua conta."})]}),(0,He.jsxs)("div",{className:"space-y-6",children:[(0,He.jsxs)("div",{className:"space-y-2",children:[(0,He.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-semibold text-gray-700",children:"Nova Senha"}),(0,He.jsxs)("div",{className:"relative",children:[(0,He.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,He.jsx)(Hr,{icon:Ns,className:"text-gray-400"})}),(0,He.jsx)("input",{id:"newPassword",type:j?"text":"password",required:!0,autoFocus:!0,value:b,onChange:e=>v(e.target.value),className:e,placeholder:"Crie uma senha segura"}),(0,He.jsx)("button",{type:"button",onClick:()=>N(!j),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-blue-600 transition-colors",children:(0,He.jsx)(Hr,{icon:j?bs:ni})})]})]}),(0,He.jsxs)("div",{className:"space-y-2",children:[(0,He.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700",children:"Confirmar Senha"}),(0,He.jsxs)("div",{className:"relative",children:[(0,He.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,He.jsx)(Hr,{icon:Vs,className:"text-gray-400"})}),(0,He.jsx)("input",{id:"confirmPassword",type:"password",required:!0,value:y,onChange:e=>w(e.target.value),className:e,placeholder:"Confirme sua senha"})]})]})]}),(0,He.jsx)("button",{type:"submit",disabled:c,className:t,children:c?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin mr-3"}),(0,He.jsx)("span",{children:"Configurando..."})]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)("span",{children:"Definir Senha e Entrar"}),(0,He.jsx)(Hr,{icon:Yi,className:"ml-3"})]})})]});default:return(0,He.jsxs)("form",{onSubmit:A,className:"space-y-8",children:[(0,He.jsxs)("div",{className:"space-y-2",children:[(0,He.jsx)("label",{htmlFor:"username",className:"block text-sm font-semibold text-gray-700",children:"Utilizador ou Email"}),(0,He.jsxs)("div",{className:"relative",children:[(0,He.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,He.jsx)(Hr,{icon:js,className:"text-gray-400"})}),(0,He.jsx)("input",{id:"username",name:"username",type:"text",required:!0,autoFocus:!0,value:n,onChange:e=>r(e.target.value),className:e,placeholder:"Digite seu utilizador ou email"})]})]}),(0,He.jsx)("button",{type:"submit",disabled:c,className:t,children:c?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin mr-3"}),(0,He.jsx)("span",{children:"Verificando..."})]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)("span",{children:"Continuar"}),(0,He.jsx)(Hr,{icon:Zs,className:"ml-3"})]})})]})}})()}),(0,He.jsxs)("div",{className:"mt-8 text-center space-y-4",children:[(0,He.jsxs)("p",{className:"text-sm text-gray-500",children:["Primeira vez na plataforma?"," ",(0,He.jsx)("a",{href:"mailto:abaplayoficial@gmail.com?subject=Solicitar Acesso - ABAplay",className:"font-semibold text-blue-600 hover:text-blue-700 transition-colors",children:"Solicite seu acesso"})]}),(0,He.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-4 border border-gray-100",children:[(0,He.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Problemas com o acesso?"}),(0,He.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,He.jsxs)("a",{href:"mailto:abaplayoficial@gmail.com?subject=Suporte - Problema de Acesso",className:"flex items-center justify-center space-x-2 px-4 py-2 bg-white border border-gray-200 rounded-xl hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 text-gray-700 hover:text-blue-700 group",children:[(0,He.jsx)(Hr,{icon:hi,className:"text-gray-500 group-hover:text-blue-600 transition-colors"}),(0,He.jsx)("span",{className:"text-sm font-medium",children:"Email Suporte"})]}),(0,He.jsxs)("a",{href:"https://wa.me/5511988543437?text=Ol\xe1! Preciso de ajuda com o acesso \xe0 plataforma ABAplay.",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl transition-all duration-200 shadow-sm hover:shadow-md group",children:[(0,He.jsx)(Hr,{icon:oi,className:"text-green-100 group-hover:text-white transition-colors"}),(0,He.jsx)("span",{className:"text-sm font-medium",children:"WhatsApp"})]})]}),(0,He.jsxs)("p",{className:"text-xs text-gray-500 mt-3",children:[(0,He.jsx)(Hr,{icon:hi,className:"mr-1"}),"abaplayoficial@gmail.com"]})]})]})]})})]})}),(0,He.jsx)(So,{isOpen:_,onAccept:async()=>{if(k)try{await(async e=>{const t=await fetch("".concat(qe.H,"/auth/accept-terms"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});if(!t.ok){var n,a;const e=await t.json().catch((()=>({})));throw new Error((null===e||void 0===e||null===(n=e.errors)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.msg)||"N\xe3o foi poss\xedvel aceitar os termos.")}return t.json()})(k.user.id),await u(k.token);let e="/";if(k.user&&k.user.role){switch(k.user.role.toLowerCase()){case"admin":case"therapist":e="/dashboard";break;case"pai":e="/parent-dashboard";break;default:e="/"}}S(!1),C(null),h(e,{replace:!0})}catch(o){console.error("Erro ao aceitar termos:",o),l("Erro ao processar aceita\xe7\xe3o dos termos. Tente novamente."),S(!1),C(null)}},onDecline:()=>{S(!1),C(null),l("\xc9 necess\xe1rio aceitar os termos para continuar.")},isLoading:c,userInfo:null===k||void 0===k?void 0:k.user})]})},Lo="".concat(qe.H,"/notifications"),Eo=async e=>{try{console.log("[NOTIFICATION-LOG] getNotifications: Buscando para userId:",e);const t=localStorage.getItem("token"),n=await $e.A.get(Lo,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});return console.log("[NOTIFICATION-LOG] getNotifications: Sucesso"),n.data}catch(n){var t;throw console.error("[NOTIFICATION-LOG] getNotifications: Erro -",(null===(t=n.response)||void 0===t?void 0:t.data)||n.message),n}},Do=a.forwardRef(((e,t)=>{let{className:n=""}=e;const[r,s]=(0,a.useState)(0),[i,o]=(0,a.useState)(!0),{user:l}=Ge(),c=async()=>{if(null!==l&&void 0!==l&&l.id)try{const e=(await Eo(l.id)).filter((e=>e.unreadCount>0)).length;s(e||0)}catch(e){console.error("Erro ao buscar total de n\xe3o lidas:",e),s(0)}finally{o(!1)}};(0,a.useEffect)((()=>{if(null!==l&&void 0!==l&&l.id){c();const e=setInterval(c,3e4);return window.addEventListener("messageSentOrReceived",c),()=>{clearInterval(e),window.removeEventListener("messageSentOrReceived",c)}}}),[l,c]);const d=()=>{c()};return a.useImperativeHandle(t,(()=>({updateCount:d}))),i?(0,He.jsx)("div",{className:"relative ".concat(n),children:(0,He.jsx)(Hr,{icon:Pi,className:"text-gray-400"})}):(0,He.jsxs)("div",{className:"relative ".concat(n),children:[(0,He.jsx)(Hr,{icon:Pi,className:"transition-colors duration-200 ".concat(r>0?"text-indigo-600":"text-gray-500 hover:text-indigo-600")}),r>0&&(0,He.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center min-w-[20px] px-1",children:r>99?"99+":r})]})})),Mo=e=>{let{onClose:t,onProgramCompleted:n}=e;const[r,s]=(0,a.useState)([]),[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(null),h=()=>{c(!1),setTimeout((()=>{t&&t()}),300)};(0,a.useEffect)((()=>{m(),c(!0);const e=e=>{"Escape"===e.key&&h()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[]);const m=async()=>{try{o(!0),u(null);const e=localStorage.getItem("token");if(!e)return void u("Token de autentica\xe7\xe3o n\xe3o encontrado");const t=await $e.A.get("".concat(qe.H,"/notifications/progress-alerts"),{headers:{Authorization:"Bearer ".concat(e)}});s(t.data||[])}catch(d){var e,t,n,a;u((null===(e=d.response)||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.errors)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.msg)||d.message||"Erro desconhecido"),s([])}finally{o(!1)}};return l?(0,He.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black bg-opacity-50 pt-20",onClick:h,children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] transform transition-all duration-300 ".concat(l?"scale-100 opacity-100":"scale-95 opacity-0"),onClick:e=>e.stopPropagation(),children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:ws,className:"text-amber-600 text-lg"})}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Alertas de Progresso"}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:"Programas com 80%+ de progresso que podem estar dominados"})]})]}),(0,He.jsx)("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsx)("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(80vh - 200px)"},children:i?(0,He.jsxs)("div",{className:"text-center py-8",children:[(0,He.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,He.jsx)("p",{className:"mt-2 text-gray-600",children:"Carregando alertas..."})]}):d?(0,He.jsxs)("div",{className:"text-center py-8 text-red-600",children:[(0,He.jsx)(Hr,{icon:Vi,className:"mx-auto text-4xl text-red-500 mb-4"}),(0,He.jsxs)("div",{className:"space-y-2",children:[(0,He.jsx)("p",{className:"font-semibold",children:"Erro ao carregar alertas"}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:d}),(0,He.jsx)("button",{onClick:m,className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors",children:"Tentar Novamente"})]})]}):0===r.length?(0,He.jsxs)("div",{className:"text-center py-8 text-gray-600",children:[(0,He.jsx)(Hr,{icon:Fs,className:"mx-auto text-4xl text-green-500 mb-4"}),(0,He.jsxs)("div",{className:"space-y-2",children:[(0,He.jsx)("p",{className:"font-semibold text-gray-700",children:"Nenhum programa precisa de verifica\xe7\xe3o no momento!"}),(0,He.jsxs)("div",{className:"text-sm text-gray-500 space-y-1",children:[(0,He.jsx)("p",{children:"\u2022 Programas precisam ter \u22655 sess\xf5es registradas"}),(0,He.jsx)("p",{children:"\u2022 Progresso deve estar \u226580% nas \xfaltimas sess\xf5es"}),(0,He.jsx)("p",{children:"\u2022 Continue registrando sess\xf5es para acompanhar o progresso"})]})]})]}):(0,He.jsx)("div",{className:"space-y-4",children:r.map((e=>(0,He.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[(0,He.jsxs)("div",{className:"flex items-start justify-between",children:[(0,He.jsxs)("div",{className:"flex-1",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,He.jsx)(Hr,{icon:js,className:"text-blue-600 text-sm"}),(0,He.jsx)("span",{className:"font-medium text-gray-800",children:e.patient_name})]}),(0,He.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:e.program_name}),(0,He.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("span",{children:"Progresso:"}),(0,He.jsxs)("span",{className:"font-semibold text-amber-600",children:[Math.round(e.progress_average),"%"]})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("span",{children:"Sess\xf5es:"}),(0,He.jsx)("span",{className:"font-semibold",children:e.sessions_count})]})]})]}),(0,He.jsx)("div",{className:"flex items-center space-x-2 ml-4",children:(0,He.jsxs)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token");await $e.A.post("".concat(qe.H,"/notifications/mark-completed"),{assignmentId:e.assignment_id,patientId:e.patient_id},{headers:{Authorization:"Bearer ".concat(t)}}),s((t=>t.filter((t=>t.assignment_id!==e.assignment_id)))),n&&n()}catch(d){}})(e),className:"bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors flex items-center space-x-1",children:[(0,He.jsx)(Hr,{icon:Fs}),(0,He.jsx)("span",{children:"Dominado"})]})})]}),(0,He.jsx)("div",{className:"mt-3",children:(0,He.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,He.jsx)("div",{className:"bg-amber-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(e.progress_average,100),"%")}})})})]},e.assignment_id)))})}),!i&&!d&&r.length>0&&(0,He.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:(0,He.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Revise se estes programas j\xe1 foram aprendidos e marque como dominados se necess\xe1rio"})})]})}):null},Oo=e=>{let{isOpen:t,onClose:n,onNotificationClick:r}=e;const{selectedPatient:s,refreshPatientData:i}=ct(),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[u,h]=(0,a.useState)(!1),m=async()=>{try{d(!0);const e=await Eo();l(e||[])}catch(e){console.error("Erro ao buscar notifica\xe7\xf5es:",e),l([])}finally{d(!1)}};(0,a.useEffect)((()=>(t&&m(),window.addEventListener("messageSentOrReceived",m),()=>{window.removeEventListener("messageSentOrReceived",m)})),[t]);const f=async e=>{try{if("progress_alert"===e.chatType)return void h(!0);await(async(e,t)=>{try{console.log("[NOTIFICATION-LOG] markAsRead: Marcando como lida - patientId:",e,"chatType:",t);const n=localStorage.getItem("token"),a=await $e.A.post("".concat(Lo,"/mark-read"),{patientId:e,chatType:t},{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});return console.log("[NOTIFICATION-LOG] markAsRead: Sucesso"),a.data}catch(a){var n;throw console.error("[NOTIFICATION-LOG] markAsRead: Erro -",(null===(n=a.response)||void 0===n?void 0:n.data)||a.message),a}})(e.patientId,e.chatType),l((t=>t.map((t=>t.userId===e.userId&&t.patientId===e.patientId&&t.chatType===e.chatType?(0,Ie.A)((0,Ie.A)({},t),{},{unreadCount:0}):t)))),r&&r(e)}catch(t){console.error("Erro ao marcar como lida:",t)}},p=e=>{switch(e){case"case_discussion":return"Discuss\xe3o de Caso";case"parent_chat":return"Chat com Pais";case"progress_alert":return"Alerta de Progresso";default:return"Notifica\xe7\xe3o"}},g=e=>{switch(e){case"case_discussion":return xs;case"parent_chat":default:return rs;case"progress_alert":return ws}},x=e=>{if(!e)return"Nunca lida";const t=new Date(e),n=new Date,a=Math.floor((n-t)/36e5);if(a<1)return"H\xe1 poucos minutos";if(a<24)return"H\xe1 ".concat(a," hora").concat(a>1?"s":"");const r=Math.floor(a/24);return"H\xe1 ".concat(r," dia").concat(r>1?"s":"")},b=()=>{h(!1),m()};return t?(0,He.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center pt-16",children:[(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 max-h-[80vh] overflow-hidden",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifica\xe7\xf5es"}),(0,He.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsx)("div",{className:"overflow-y-auto max-h-96",children:c?(0,He.jsx)("div",{className:"p-4 text-center text-gray-500",children:"Carregando notifica\xe7\xf5es..."}):0===o.length?(0,He.jsx)("div",{className:"p-4 text-center text-gray-500",children:"Nenhuma notifica\xe7\xe3o encontrada"}):(0,He.jsx)("div",{className:"divide-y divide-gray-200",children:o.map((e=>(0,He.jsxs)("div",{className:"p-4 hover:bg-gray-50 transition-colors cursor-pointer ".concat(e.unreadCount>0?"bg-blue-50":""),onClick:()=>f(e),children:[(0,He.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,He.jsx)("div",{className:"p-2 rounded-full ".concat(e.unreadCount>0?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-600"),children:(0,He.jsx)(Hr,{icon:g(e.chatType)})}),(0,He.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.patient_name}),e.unreadCount>0&&(0,He.jsx)("span",{className:"bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:e.unreadCount>99?"99+":e.unreadCount})]}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:p(e.chatType)}),(0,He.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["\xdaltima leitura: ",x(e.lastReadTimestamp)]})]})]}),e.unreadCount>0&&(0,He.jsxs)("div",{className:"mt-2 flex items-center text-xs text-indigo-600",children:[(0,He.jsx)(Hr,{icon:ni,className:"mr-1"}),"Clique para marcar como lida"]})]},"".concat(e.userId,"-").concat(e.patientId,"-").concat(e.chatType))))})}),(0,He.jsx)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:(0,He.jsx)("button",{onClick:n,className:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Fechar"})})]}),u&&(0,He.jsx)(Mo,{onClose:b,onProgramCompleted:async()=>{null!==s&&void 0!==s&&s.id&&await i(),b()}})]}):null},To=e=>{let{toggleSidebar:t}=e;const{user:n,logout:r}=Ge(),{selectedPatient:s,refreshPatientData:i}=ct(),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),m=(0,a.useRef)(null),f=(0,a.useRef)(null),p=(0,a.useRef)(null),g=()=>{var e;h(!1),null!==(e=p.current)&&void 0!==e&&e.updateCount&&p.current.updateCount()};(0,a.useEffect)((()=>{const e=e=>{m.current&&!m.current.contains(e.target)&&f.current&&!f.current.contains(e.target)&&l(!1)},t=()=>{h(!0)};return document.addEventListener("mousedown",e),window.addEventListener("checkProgressAlerts",t),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("checkProgressAlerts",t)}}),[]);const x="pai"!==(null===n||void 0===n?void 0:n.role),b=e=>{let{isMobile:t=!1,onLinkClick:a=()=>{}}=e;const r=J(),s="flex items-center font-medium transition-colors duration-200",i=e=>{const n=r.pathname.startsWith(e);return t?"".concat(s," ").concat("px-4 py-3 rounded-lg text-base"," ").concat(n?"bg-gradient-to-r from-indigo-600 to-purple-700 text-white shadow-lg transform scale-105":"text-gray-600 hover:bg-gradient-to-r hover:from-indigo-50 hover:to-purple-50 hover:text-indigo-700 transition-all"):"".concat(s," ").concat("px-3 py-2 rounded-md text-sm"," ").concat(n?"bg-gradient-to-r from-indigo-600 to-purple-700 text-white shadow-lg":"text-gray-600 hover:bg-gradient-to-r hover:from-indigo-50 hover:to-purple-50 hover:text-indigo-700")};return"pai"===(null===n||void 0===n?void 0:n.role)?(0,He.jsxs)(Me,{to:"/",className:()=>i("/"),onClick:a,children:[(0,He.jsx)(Hr,{icon:Ei,className:"fa-fw mr-2"})," Acompanhamento"]}):(0,He.jsxs)(He.Fragment,{children:[(null===n||void 0===n?void 0:n.is_admin)&&(0,He.jsxs)(Me,{to:"/admin",className:()=>i("/admin"),onClick:a,children:[(0,He.jsx)(Hr,{icon:qi,className:"fa-fw mr-2"})," Admin"]}),(0,He.jsxs)(Me,{to:"/dashboard",className:()=>i("/dashboard"),onClick:a,children:[(0,He.jsx)(Hr,{icon:Ei,className:"fa-fw mr-2"})," Dashboard"]}),!(null!==n&&void 0!==n&&n.is_admin)&&(0,He.jsxs)(Me,{to:"/clients",className:()=>i("/clients"),onClick:a,children:[(0,He.jsx)(Hr,{icon:xs,className:"fa-fw mr-2"})," Clientes"]}),(0,He.jsxs)(Me,{to:"/programs",className:()=>i("/programs"),onClick:a,children:[(0,He.jsx)(Hr,{icon:Ds,className:"fa-fw mr-2"})," Programas"]}),(null===n||void 0===n?void 0:n.is_admin)&&(0,He.jsxs)(Me,{to:"/scheduling",className:()=>i("/scheduling"),onClick:a,children:[(0,He.jsx)(Hr,{icon:Zr,className:"fa-fw mr-2"})," Agendamentos"]}),"terapeuta"===(null===n||void 0===n?void 0:n.role)&&!(null!==n&&void 0!==n&&n.is_admin)&&(0,He.jsxs)(Me,{to:"/my-schedule",className:()=>i("/my-schedule"),onClick:a,children:[(0,He.jsx)(Hr,{icon:xi,className:"fa-fw mr-2"})," Minha Agenda"]}),(0,He.jsxs)(Me,{to:"/notes",className:()=>i("/notes"),onClick:a,children:[(0,He.jsx)(Hr,{icon:as,className:"fa-fw mr-2"})," Anota\xe7\xf5es"]})]})};return(0,He.jsxs)("header",{className:"bg-gradient-to-r from-white via-indigo-50/30 to-purple-50/30 backdrop-blur-md sticky top-0 z-10 w-full flex-shrink-0 border-b border-indigo-200/50 shadow-sm",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between px-4 sm:px-6 h-16",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[x&&(0,He.jsx)("button",{onClick:t,className:"lg:hidden mr-3 p-2 rounded-md text-gray-600 hover:text-white hover:bg-gradient-to-r hover:from-indigo-500 hover:to-purple-600 transition-all transform hover:scale-105","aria-label":"Abrir menu de clientes",children:(0,He.jsx)(Hr,{icon:ds,className:"h-6 w-6"})}),(0,He.jsxs)(Me,{to:"/",className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-700 bg-clip-text text-transparent flex items-center mr-2 hover:from-indigo-700 hover:to-purple-800 transition-all",children:[(0,He.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 p-2 rounded-lg mr-3 shadow-sm",children:(0,He.jsx)(Hr,{icon:bo,className:"text-white"})}),(0,He.jsx)("span",{children:"ABAplay"})]}),(0,He.jsx)("div",{className:"hidden lg:flex items-center space-x-1 ml-4",children:(0,He.jsx)(b,{})})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,He.jsxs)("div",{className:"hidden md:block text-sm",children:[s?(0,He.jsx)("div",{className:"bg-gradient-to-r from-indigo-100 to-purple-100 border border-indigo-200 px-3 py-1 rounded-full",children:(0,He.jsxs)("span",{className:"font-medium bg-gradient-to-r from-indigo-700 to-purple-700 bg-clip-text text-transparent",children:["Cliente: ",s.name]})}):"terapeuta"===(null===n||void 0===n?void 0:n.role)&&(0,He.jsx)("div",{className:"bg-gradient-to-r from-gray-100 to-slate-100 border border-gray-200 px-3 py-1 rounded-full",children:(0,He.jsx)("span",{className:"italic text-gray-500",children:"Nenhum cliente selecionado"})}),"pai"===(null===n||void 0===n?void 0:n.role)&&(0,He.jsx)("div",{className:"bg-gradient-to-r from-indigo-100 to-purple-100 border border-indigo-200 px-3 py-1 rounded-full",children:(0,He.jsx)("span",{className:"font-medium bg-gradient-to-r from-indigo-700 to-purple-700 bg-clip-text text-transparent",children:"Acompanhamento"})})]}),(0,He.jsxs)("div",{className:"relative flex items-center space-x-3",children:[n&&"pai"!==n.role&&(0,He.jsx)("button",{onClick:()=>d(!c),className:"p-2 rounded-full hover:bg-gradient-to-r hover:from-indigo-100 hover:to-purple-100 transition-all duration-200 transform hover:scale-110",title:"Notifica\xe7\xf5es",children:(0,He.jsx)(Do,{ref:p})}),(0,He.jsx)("div",{className:"w-9 h-9 rounded-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white flex items-center justify-center font-bold text-sm border-2 border-white shadow-md hover:shadow-lg transition-all transform hover:scale-110",title:(null===n||void 0===n?void 0:n.full_name)||(null===n||void 0===n?void 0:n.username),children:(v=(null===n||void 0===n?void 0:n.full_name)||(null===n||void 0===n?void 0:n.username),v?v.split(" ").map((e=>e[0])).slice(0,2).join("").toUpperCase():"--")}),(0,He.jsx)("button",{onClick:r,title:"Sair",className:"text-gray-500 hover:text-red-600 transition-all duration-150 p-2 rounded-full hover:bg-gradient-to-r hover:from-red-50 hover:to-pink-50 transform hover:scale-110",children:(0,He.jsx)(Hr,{icon:ts,className:"fa-fw"})})]}),(0,He.jsx)("div",{className:"lg:hidden flex items-center",children:(0,He.jsxs)("button",{ref:f,onClick:()=>l(!o),type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-600 hover:text-white hover:bg-gradient-to-r hover:from-indigo-500 hover:to-purple-600 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 transition-all transform hover:scale-105","aria-controls":"mobile-menu","aria-expanded":o,children:[(0,He.jsx)("span",{className:"sr-only",children:"Abrir menu"}),(0,He.jsx)(Hr,{icon:o?Vi:ds,className:"h-6 w-6"})]})})]})]}),(0,He.jsxs)("div",{ref:m,className:"lg:hidden absolute top-full left-0 right-0 bg-gradient-to-r from-white via-indigo-50/50 to-purple-50/50 backdrop-blur-md shadow-xl border-t border-indigo-200/50 transition-transform duration-300 ease-in-out ".concat(o?"transform translate-y-0":"transform -translate-y-full"),style:{visibility:o?"visible":"hidden"},id:"mobile-menu",children:[(0,He.jsx)("div",{className:"px-3 pt-3 pb-4 space-y-2",children:(0,He.jsx)(b,{isMobile:!0,onLinkClick:()=>l(!1)})}),(0,He.jsx)("div",{className:"pt-4 pb-4 border-t border-gray-200",children:(0,He.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"text-base font-medium leading-none text-gray-800",children:(null===n||void 0===n?void 0:n.full_name)||(null===n||void 0===n?void 0:n.username)}),(0,He.jsx)("div",{className:"text-sm font-medium leading-none text-gray-500",children:null===n||void 0===n?void 0:n.role})]}),(0,He.jsxs)("button",{onClick:r,className:"ml-auto flex-shrink-0 bg-gradient-to-r from-gray-100 to-slate-100 p-2 rounded-full text-gray-500 hover:text-red-600 hover:bg-gradient-to-r hover:from-red-50 hover:to-pink-50 focus:outline-none transition-all transform hover:scale-110",children:[(0,He.jsx)("span",{className:"sr-only",children:"Sair"}),(0,He.jsx)(Hr,{icon:ts})]})]})})]}),(0,He.jsx)(Oo,{isOpen:c,onClose:()=>d(!1),onNotificationClick:e=>{var t;null!==(t=p.current)&&void 0!==t&&t.updateCount&&p.current.updateCount(),d(!1),console.log("Notifica\xe7\xe3o clicada:",e)}}),u&&(0,He.jsx)(Mo,{onClose:g,onProgramCompleted:async()=>{null!==s&&void 0!==s&&s.id&&await i(),g()}})]});var v},Ro=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[t,n]=(0,a.useState)({}),[r,s]=(0,a.useState)(!1),[i,o]=(0,a.useState)(null),l=(0,a.useCallback)((async()=>{if(e.length)try{s(!0),o(null);const t=localStorage.getItem("token"),a=e.map((async e=>{try{var n,a;const r=await $e.A.get("".concat(qe.H,"/notifications/patient/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),s=(null===(n=r.data.find((e=>"parent_chat"===e.chatType)))||void 0===n?void 0:n.unreadCount)||0,i=(null===(a=r.data.find((e=>"case_discussion"===e.chatType)))||void 0===a?void 0:a.unreadCount)||0;return{patientId:e,notifications:{parentChat:s,caseDiscussion:i,total:s+i}}}catch(i){return{patientId:e,notifications:{parentChat:0,caseDiscussion:0,total:0}}}})),r=await Promise.all(a),l={};r.forEach((e=>{let{patientId:t,notifications:n}=e;l[t]=n})),n(l)}catch(i){o(i.message)}finally{s(!1)}}),[]),c=(0,a.useCallback)((async e=>{try{var t,a;const r=localStorage.getItem("token"),s=await $e.A.get("".concat(qe.H,"/notifications/patient/").concat(e),{headers:{Authorization:"Bearer ".concat(r)}}),i=(null===(t=s.data.find((e=>"parent_chat"===e.chatType)))||void 0===t?void 0:t.unreadCount)||0,o=(null===(a=s.data.find((e=>"case_discussion"===e.chatType)))||void 0===a?void 0:a.unreadCount)||0,l={parentChat:i,caseDiscussion:o,total:i+o};return n((t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:l}))),l}catch(i){return{parentChat:0,caseDiscussion:0,total:0}}}),[]),d=(0,a.useCallback)((async(e,t)=>{try{const a=localStorage.getItem("token");await $e.A.post("".concat(qe.H,"/notifications/mark-read"),{patientId:e,chatType:t},{headers:{Authorization:"Bearer ".concat(a)}}),n((n=>{const a=n[e]||{parentChat:0,caseDiscussion:0,total:0},r=(0,Ie.A)({},a);return"parent_chat"===t?r.parentChat=0:"case_discussion"===t&&(r.caseDiscussion=0),r.total=r.parentChat+r.caseDiscussion,(0,Ie.A)((0,Ie.A)({},n),{},{[e]:r})})),window.dispatchEvent(new CustomEvent("notificationUpdate"))}catch(i){}}),[]),u=(0,a.useCallback)((e=>[...e].sort(((e,n)=>{var a,r;const s=(null===(a=t[e.id])||void 0===a?void 0:a.total)||0,i=(null===(r=t[n.id])||void 0===r?void 0:r.total)||0;return s!==i?i-s:e.name.localeCompare(n.name)}))),[t]),h=(0,a.useCallback)((e=>{const n=[],a=[],r=[];return e.forEach((e=>{var s;const i=(null===(s=t[e.id])||void 0===s?void 0:s.total)||0;i>=3?n.push(e):i>0?a.push(e):r.push(e)})),n.sort(((e,t)=>t.name.localeCompare(e.name))),a.sort(((e,t)=>e.name.localeCompare(t.name))),r.sort(((e,t)=>e.name.localeCompare(t.name))),{urgent:n,withNotifications:a,normal:r}}),[t]),m=(0,a.useCallback)((async()=>{if(0!==e.length)try{s(!0),o(null);const t=localStorage.getItem("token"),a=e.map((async e=>{try{var n,a;const r=await $e.A.get("".concat(qe.H,"/notifications/patient/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),s=(null===(n=r.data.find((e=>"parent_chat"===e.chatType)))||void 0===n?void 0:n.unreadCount)||0,i=(null===(a=r.data.find((e=>"case_discussion"===e.chatType)))||void 0===a?void 0:a.unreadCount)||0;return{patientId:e,notifications:{parentChat:s,caseDiscussion:i,total:s+i}}}catch(i){return{patientId:e,notifications:{parentChat:0,caseDiscussion:0,total:0}}}})),r=await Promise.all(a),l={};r.forEach((e=>{let{patientId:t,notifications:n}=e;l[t]=n})),n(l)}catch(i){o(i.message)}finally{s(!1)}else n({})}),[e]);return(0,a.useEffect)((()=>{m()}),[m]),(0,a.useEffect)((()=>{const e=()=>{m()};return window.addEventListener("notificationUpdate",e),()=>{window.removeEventListener("notificationUpdate",e)}}),[m]),{patientNotifications:t,loading:r,error:i,fetchPatientNotifications:c,fetchAllPatientNotifications:l,markAsRead:d,sortPatientsByPriority:u,categorizePatients:h}},Io=e=>{let{patientId:t,patientName:n,onNavigateToChat:r,notifications:s={parentChat:0,caseDiscussion:0,total:0},className:i=""}=e;const[o,l]=(0,a.useState)(!1),c=e=>{e.preventDefault(),e.stopPropagation(),l(!0)},d=e=>{l(!1),r&&r(t,e)};return 0===s.total?null:(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)("div",{onClick:c,className:"\n          absolute -top-2 -right-2 min-w-[20px] h-5 px-1.5 rounded-full text-xs font-bold cursor-pointer\n          flex items-center justify-center transition-all duration-200 hover:scale-110\n          ".concat(s.total>=3?"bg-red-500 text-white animate-pulse":s.total>0?"bg-blue-500 text-white":"hidden"," ").concat(i,"\n        "),title:"".concat(s.total," notifica\xe7\xe3o").concat(1!==s.total?"\xf5es":""),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||c(e)},children:s.total>99?"99+":s.total}),o&&(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,He.jsxs)("div",{className:"\n              ".concat(window.innerWidth<768?"fixed inset-x-0 bottom-0 bg-white rounded-t-xl shadow-xl transform transition-transform duration-300":"bg-white rounded-xl shadow-xl max-w-sm w-full mx-4 transform transition-all duration-300","\n            "),onClick:e=>e.stopPropagation(),children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("h3",{className:"font-semibold text-gray-800",children:n}),(0,He.jsxs)("p",{className:"text-sm text-gray-600",children:[s.total," notifica\xe7\xe3o",1!==s.total?"\xf5es":""," pendente",1!==s.total?"s":""]})]}),(0,He.jsx)("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsxs)("div",{className:"p-4 space-y-3",children:[s.parentChat>0&&(0,He.jsxs)("button",{onClick:()=>d("parent_chat"),className:"w-full flex items-center justify-between p-3 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:rs,className:"text-white"})}),(0,He.jsxs)("div",{className:"text-left",children:[(0,He.jsx)("p",{className:"font-medium text-gray-800",children:"Chat dos Pais"}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:"Mensagens da fam\xedlia"})]})]}),(0,He.jsx)("div",{className:"bg-blue-500 text-white rounded-full min-w-[24px] h-6 flex items-center justify-center text-xs font-bold",children:s.parentChat})]}),s.caseDiscussion>0&&(0,He.jsxs)("button",{onClick:()=>d("case_discussion"),className:"w-full flex items-center justify-between p-3 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:xs,className:"text-white"})}),(0,He.jsxs)("div",{className:"text-left",children:[(0,He.jsx)("p",{className:"font-medium text-gray-800",children:"Discuss\xe3o de Caso"}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:"Chat da equipe t\xe9cnica"})]})]}),(0,He.jsx)("div",{className:"bg-green-500 text-white rounded-full min-w-[24px] h-6 flex items-center justify-center text-xs font-bold",children:s.caseDiscussion})]})]}),window.innerWidth<768&&(0,He.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,He.jsx)("button",{onClick:()=>l(!1),className:"w-full py-3 text-gray-600 font-medium",children:"Fechar"})})]})})]})},Fo=()=>{const e=Z(),{patients:t,selectedPatient:n,selectPatient:r,isLoading:s}=ct(),{user:i}=Ge(),[o,l]=(0,a.useState)(""),c=(0,a.useMemo)((()=>(t||[]).map((e=>e.id))),[t]),{patientNotifications:d,sortPatientsByPriority:u,markAsRead:h}=Ro(c),m=(n,a)=>{const s=t.find((e=>e.id===n));s&&(r(s),h(n,a),"parent_chat"===a?"parent"===(null===i||void 0===i?void 0:i.role)?e("/parent-dashboard"):e("/notes"):"case_discussion"===a&&e("/notes"))},f=(0,a.useMemo)((()=>{const e=t||[];let n=e;return o&&(n=e.filter((e=>e.name.toLowerCase().includes(o.toLowerCase())))),u(n)}),[t,o,u]);return"super_admin"===(null===i||void 0===i?void 0:i.role)?null:s?(0,He.jsx)("div",{className:"h-full bg-gradient-to-b from-indigo-50 to-purple-50 border-r border-indigo-200 flex justify-center items-center",children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("div",{className:"bg-gradient-to-r from-indigo-100 to-purple-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-indigo-600 text-2xl"})}),(0,He.jsx)("p",{className:"text-indigo-600 text-sm font-medium",children:"Carregando clientes..."})]})}):(0,He.jsxs)("div",{className:"h-full flex flex-col bg-gradient-to-b from-white to-indigo-50/30 border-r border-indigo-200 shadow-sm",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-700 p-6",children:[(0,He.jsxs)("div",{className:"flex items-center mb-4",children:[(0,He.jsx)("div",{className:"bg-white bg-opacity-20 p-2 rounded-full mr-3",children:(0,He.jsx)(Hr,{icon:Es,className:"text-white"})}),(0,He.jsx)("h2",{className:"text-xl font-bold text-white",children:"Clientes"})]}),(0,He.jsx)("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 mb-4",children:(0,He.jsxs)("div",{className:"text-white text-sm",children:[(null===i||void 0===i?void 0:i.is_admin)&&(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsx)("span",{children:"Total de clientes:"}),(0,He.jsxs)("span",{className:"font-bold",children:[(null===t||void 0===t?void 0:t.length)||0," / ",(null===i||void 0===i?void 0:i.max_patients)||0]})]}),"terapeuta"===(null===i||void 0===i?void 0:i.role)&&(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsx)("span",{children:"Clientes atribu\xeddos:"}),(0,He.jsx)("span",{className:"font-bold",children:(null===t||void 0===t?void 0:t.length)||0})]})]})}),(0,He.jsxs)("div",{className:"relative",children:[(0,He.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:(0,He.jsx)(Hr,{icon:Oi,className:"text-indigo-300"})}),(0,He.jsx)("input",{type:"text",placeholder:"Buscar cliente...",value:o,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-white bg-opacity-90 border-2 border-white border-opacity-30 rounded-lg placeholder-indigo-400 text-gray-800 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 focus:border-white focus:border-opacity-50 text-sm transition-all"})]})]}),(0,He.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:f&&f.length>0?(0,He.jsx)("div",{className:"space-y-2",children:f.map(((e,t)=>{var a;const s=(null===n||void 0===n?void 0:n.id)===e.id;return(0,He.jsx)("div",{className:"relative",children:(0,He.jsxs)("button",{onClick:()=>(e=>{r(e)})(e),className:"\n                      w-full text-left p-4 rounded-lg flex items-center transition-all duration-200 transform\n                      ".concat(s?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg scale-105 border-2 border-white":"bg-white text-gray-700 hover:bg-gradient-to-r hover:from-indigo-50 hover:to-purple-50 hover:text-indigo-700 hover:shadow-md hover:scale-102 border-2 border-gray-200 hover:border-indigo-300","\n                    "),children:[(0,He.jsxs)("div",{className:"\n                      p-2 rounded-full mr-3 flex-shrink-0 relative\n                      ".concat(s?"bg-white bg-opacity-20":"bg-gradient-to-r from-indigo-100 to-purple-100","\n                    "),children:[(0,He.jsx)(Hr,{icon:Bi,className:"\n                          ".concat(s?"text-white":"text-indigo-600","\n                        ")}),(0,He.jsx)(Io,{patientId:e.id,patientName:e.name,notifications:d[e.id],onNavigateToChat:m,className:"z-10"})]}),(0,He.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,He.jsx)("p",{className:"\n                        font-medium truncate\n                        ".concat(s?"text-white":"text-gray-800","\n                      "),children:e.name}),s&&(0,He.jsx)("p",{className:"text-indigo-100 text-xs mt-1",children:"\u2705 Cliente selecionado"}),(null===(a=d[e.id])||void 0===a?void 0:a.total)>0&&!s&&(0,He.jsxs)("p",{className:"text-blue-600 text-xs mt-1 font-medium",children:["\ud83d\udd14 ",d[e.id].total," nova",1!==d[e.id].total?"s":""," mensagem",1!==d[e.id].total?"ns":""]})]}),s&&(0,He.jsx)("div",{className:"absolute top-2 right-2",children:(0,He.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]})},e.id)}))}):(0,He.jsxs)("div",{className:"flex flex-col items-center justify-center text-center py-8",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 p-6 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:o?Oi:Es,className:"text-2xl text-indigo-600"})}),(0,He.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:o?"Nenhum resultado":"Nenhum cliente"}),(0,He.jsx)("p",{className:"text-sm text-gray-500 leading-relaxed",children:o?"Tente ajustar os termos da busca":"Nenhum cliente foi atribu\xeddo ainda"}),o&&(0,He.jsx)("button",{onClick:()=>l(""),className:"mt-4 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-sm rounded-lg hover:from-indigo-600 hover:to-purple-700 transition-all transform hover:scale-105",children:"Limpar busca"})]})}),f&&f.length>0&&(0,He.jsx)("div",{className:"border-t border-indigo-200 bg-gradient-to-r from-indigo-50 to-purple-50 px-4 py-3",children:(0,He.jsxs)("div",{className:"flex items-center justify-between text-xs text-indigo-600",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)(Hr,{icon:gi,className:"text-indigo-500"}),(0,He.jsxs)("span",{children:["Total: ",f.length," cliente",1!==f.length?"s":""]})]}),o&&(0,He.jsxs)("span",{className:"text-indigo-500",children:['Filtrado por: "',o,'"']})]})})]})},zo=()=>{const e=J(),{user:t,isAuthenticated:n,isLoading:r}=Ge(),[s,i]=(0,a.useState)(!1),o=e.pathname.startsWith("/admin"),l="pai"!==(null===t||void 0===t?void 0:t.role);return(0,a.useEffect)((()=>{i(!1)}),[e]),"super_admin"===(null===t||void 0===t?void 0:t.role)?(0,He.jsx)(pe,{to:"/super-admin",replace:!0}):r?(0,He.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-4xl text-indigo-500"})}):n?(0,He.jsxs)("div",{className:"relative h-screen flex flex-col bg-gray-50",children:[(0,He.jsx)(To,{toggleSidebar:()=>i(!s)}),(0,He.jsxs)("div",{className:"flex-1 flex overflow-hidden lg:grid ".concat(o||!l?"lg:grid-cols-1":"lg:grid-cols-[280px_1fr]"),children:[l&&(0,He.jsxs)(He.Fragment,{children:[s&&(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:()=>i(!1),"aria-hidden":"true"}),(0,He.jsx)("aside",{className:"\n                                fixed inset-y-0 left-0 z-30 w-72 bg-white border-r border-gray-200 transform transition-transform duration-300 ease-in-out\n                                ".concat(o?"lg:hidden":"lg:static lg:translate-x-0","\n                                ").concat(s?"translate-x-0":"-translate-x-full","\n                            "),children:(0,He.jsx)(Fo,{})})]}),(0,He.jsx)("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:(0,He.jsx)(ge,{})})]})]}):(0,He.jsx)(pe,{to:"/login",state:{from:e},replace:!0})},Bo=()=>{const{user:e,isLoading:t}=Ge();return t?(0,He.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-3xl text-indigo-500"})}):e?"super_admin"===e.role?(0,He.jsx)(pe,{to:"/super-admin",replace:!0}):e.is_admin?(0,He.jsx)(pe,{to:"/admin",replace:!0}):"pai"===e.role?(0,He.jsx)(pe,{to:"/parent-dashboard",replace:!0}):(0,He.jsx)(pe,{to:"/clients",replace:!0}):(0,He.jsx)(pe,{to:"/login",replace:!0})};var qo=n(7762),Uo=n(557),Wo=n.n(Uo),Ho=n(4980);function Vo(e){return e+.5|0}const Yo=(e,t,n)=>Math.max(Math.min(e,n),t);function Go(e){return Yo(Vo(2.55*e),0,255)}function $o(e){return Yo(Vo(255*e),0,255)}function Xo(e){return Yo(Vo(e/2.55)/100,0,1)}function Ko(e){return Yo(Vo(100*e),0,100)}const Jo={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Qo=[..."0123456789ABCDEF"],Zo=e=>Qo[15&e],el=e=>Qo[(240&e)>>4]+Qo[15&e],tl=e=>(240&e)>>4===(15&e);function nl(e){var t=(e=>tl(e.r)&&tl(e.g)&&tl(e.b)&&tl(e.a))(e)?Zo:el;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const al=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function rl(e,t,n){const a=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-a*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function sl(e,t,n){const a=function(a){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(a+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[a(5),a(3),a(1)]}function il(e,t,n){const a=rl(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)a[r]*=1-t-n,a[r]+=t;return a}function ol(e){const t=e.r/255,n=e.g/255,a=e.b/255,r=Math.max(t,n,a),s=Math.min(t,n,a),i=(r+s)/2;let o,l,c;return r!==s&&(c=r-s,l=i>.5?c/(2-r-s):c/(r+s),o=function(e,t,n,a,r){return e===r?(t-n)/a+(t<n?6:0):t===r?(n-e)/a+2:(e-t)/a+4}(t,n,a,c,r),o=60*o+.5),[0|o,l||0,i]}function ll(e,t,n,a){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,a)).map($o)}function cl(e,t,n){return ll(rl,e,t,n)}function dl(e){return(e%360+360)%360}function ul(e){const t=al.exec(e);let n,a=255;if(!t)return;t[5]!==n&&(a=t[6]?Go(+t[5]):$o(+t[5]));const r=dl(+t[2]),s=+t[3]/100,i=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return ll(il,e,t,n)}(r,s,i):"hsv"===t[1]?function(e,t,n){return ll(sl,e,t,n)}(r,s,i):cl(r,s,i),{r:n[0],g:n[1],b:n[2],a:a}}const hl={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ml={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let fl;function pl(e){fl||(fl=function(){const e={},t=Object.keys(ml),n=Object.keys(hl);let a,r,s,i,o;for(a=0;a<t.length;a++){for(i=o=t[a],r=0;r<n.length;r++)s=n[r],o=o.replace(s,hl[s]);s=parseInt(ml[i],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),fl.transparent=[0,0,0,0]);const t=fl[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const gl=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const xl=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,bl=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function vl(e,t,n){if(e){let a=ol(e);a[t]=Math.max(0,Math.min(a[t]+a[t]*n,0===t?360:1)),a=cl(a),e.r=a[0],e.g=a[1],e.b=a[2]}}function yl(e,t){return e?Object.assign(t||{},e):e}function wl(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=$o(e[3]))):(t=yl(e,{r:0,g:0,b:0,a:1})).a=$o(t.a),t}function jl(e){return"r"===e.charAt(0)?function(e){const t=gl.exec(e);let n,a,r,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?Go(e):Yo(255*e,0,255)}return n=+t[1],a=+t[3],r=+t[5],n=255&(t[2]?Go(n):Yo(n,0,255)),a=255&(t[4]?Go(a):Yo(a,0,255)),r=255&(t[6]?Go(r):Yo(r,0,255)),{r:n,g:a,b:r,a:s}}}(e):ul(e)}class Nl{constructor(e){if(e instanceof Nl)return e;const t=typeof e;let n;"object"===t?n=wl(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Jo[e[1]],g:255&17*Jo[e[2]],b:255&17*Jo[e[3]],a:5===n?17*Jo[e[4]]:255}:7!==n&&9!==n||(t={r:Jo[e[1]]<<4|Jo[e[2]],g:Jo[e[3]]<<4|Jo[e[4]],b:Jo[e[5]]<<4|Jo[e[6]],a:9===n?Jo[e[7]]<<4|Jo[e[8]]:255})),t}(e)||pl(e)||jl(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=yl(this._rgb);return e&&(e.a=Xo(e.a)),e}set rgb(e){this._rgb=wl(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(Xo(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?nl(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=ol(e),n=t[0],a=Ko(t[1]),r=Ko(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(a,"%, ").concat(r,"%, ").concat(Xo(e.a),")"):"hsl(".concat(n,", ").concat(a,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,a=e.rgb;let r;const s=t===r?.5:t,i=2*s-1,o=n.a-a.a,l=((i*o===-1?i:(i+o)/(1+i*o))+1)/2;r=1-l,n.r=255&l*n.r+r*a.r+.5,n.g=255&l*n.g+r*a.g+.5,n.b=255&l*n.b+r*a.b+.5,n.a=s*n.a+(1-s)*a.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const a=bl(Xo(e.r)),r=bl(Xo(e.g)),s=bl(Xo(e.b));return{r:$o(xl(a+n*(bl(Xo(t.r))-a))),g:$o(xl(r+n*(bl(Xo(t.g))-r))),b:$o(xl(s+n*(bl(Xo(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Nl(this.rgb)}alpha(e){return this._rgb.a=$o(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Vo(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return vl(this._rgb,2,e),this}darken(e){return vl(this._rgb,2,-e),this}saturate(e){return vl(this._rgb,1,e),this}desaturate(e){return vl(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=ol(e);n[0]=dl(n[0]+t),n=cl(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function _l(){}const Sl=(()=>{let e=0;return()=>e++})();function kl(e){return null===e||void 0===e}function Cl(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Al(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Pl(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Ll(e,t){return Pl(e)?e:t}function El(e,t){return"undefined"===typeof e?t:e}const Dl=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ml(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Ol(e,t,n,a){let r,s,i;if(Cl(e))if(s=e.length,a)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(Al(e))for(i=Object.keys(e),s=i.length,r=0;r<s;r++)t.call(n,e[i[r]],i[r])}function Tl(e,t){let n,a,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,a=e.length;n<a;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Rl(e){if(Cl(e))return e.map(Rl);if(Al(e)){const t=Object.create(null),n=Object.keys(e),a=n.length;let r=0;for(;r<a;++r)t[n[r]]=Rl(e[n[r]]);return t}return e}function Il(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Fl(e,t,n,a){if(!Il(e))return;const r=t[e],s=n[e];Al(r)&&Al(s)?zl(r,s,a):t[e]=Rl(s)}function zl(e,t,n){const a=Cl(t)?t:[t],r=a.length;if(!Al(e))return e;const s=(n=n||{}).merger||Fl;let i;for(let o=0;o<r;++o){if(i=a[o],!Al(i))continue;const t=Object.keys(i);for(let a=0,r=t.length;a<r;++a)s(t[a],e,i,n)}return e}function Bl(e,t){return zl(e,t,{merger:ql})}function ql(e,t,n){if(!Il(e))return;const a=t[e],r=n[e];Al(a)&&Al(r)?Bl(a,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Rl(r))}const Ul={"":e=>e,x:e=>e.x,y:e=>e.y};function Wl(e,t){const n=Ul[t]||(Ul[t]=function(e){const t=function(e){const t=e.split("."),n=[];let a="";for(const r of t)a+=r,a.endsWith("\\")?a=a.slice(0,-1)+".":(n.push(a),a="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Hl(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Vl=e=>"undefined"!==typeof e,Yl=e=>"function"===typeof e,Gl=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const $l=Math.PI,Xl=2*$l,Kl=Xl+$l,Jl=Number.POSITIVE_INFINITY,Ql=$l/180,Zl=$l/2,ec=$l/4,tc=2*$l/3,nc=Math.log10,ac=Math.sign;function rc(e,t,n){return Math.abs(e-t)<n}function sc(e){const t=Math.round(e);e=rc(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(nc(e))),a=e/n;return(a<=1?1:a<=2?2:a<=5?5:10)*n}function ic(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function oc(e,t,n){let a,r,s;for(a=0,r=e.length;a<r;a++)s=e[a][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function lc(e){return e*($l/180)}function cc(e){return e*(180/$l)}function dc(e){if(!Pl(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function uc(e,t){const n=t.x-e.x,a=t.y-e.y,r=Math.sqrt(n*n+a*a);let s=Math.atan2(a,n);return s<-.5*$l&&(s+=Xl),{angle:s,distance:r}}function hc(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function mc(e,t){return(e-t+Kl)%Xl-$l}function fc(e){return(e%Xl+Xl)%Xl}function pc(e,t,n,a){const r=fc(e),s=fc(t),i=fc(n),o=fc(s-r),l=fc(i-r),c=fc(r-s),d=fc(r-i);return r===s||r===i||a&&s===i||o>l&&c<d}function gc(e,t,n){return Math.max(t,Math.min(n,e))}function xc(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-a&&e<=Math.max(t,n)+a}function bc(e,t,n){n=n||(n=>e[n]<t);let a,r=e.length-1,s=0;for(;r-s>1;)a=s+r>>1,n(a)?s=a:r=a;return{lo:s,hi:r}}const vc=(e,t,n,a)=>bc(e,n,a?a=>{const r=e[a][t];return r<n||r===n&&e[a+1][t]===n}:a=>e[a][t]<n),yc=(e,t,n)=>bc(e,n,(a=>e[a][t]>=n));const wc=["push","pop","shift","splice","unshift"];function jc(e,t){const n=e._chartjs;if(!n)return;const a=n.listeners,r=a.indexOf(t);-1!==r&&a.splice(r,1),a.length>0||(wc.forEach((t=>{delete e[t]})),delete e._chartjs)}function Nc(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const _c="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Sc(e,t){let n=[],a=!1;return function(){for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];n=s,a||(a=!0,_c.call(window,(()=>{a=!1,e.apply(t,n)})))}}const kc=e=>"start"===e?"left":"end"===e?"right":"center",Cc=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function Ac(e,t,n){const a=t.length;let r=0,s=a;if(e._sorted){const{iScale:i,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=i.axis,{min:u,max:h,minDefined:m,maxDefined:f}=i.getUserBounds();if(m){if(r=Math.min(vc(l,d,u).lo,n?a:vc(t,d,i.getPixelForValue(u)).lo),c){const e=l.slice(0,r+1).reverse().findIndex((e=>!kl(e[o.axis])));r-=Math.max(0,e)}r=gc(r,0,a-1)}if(f){let e=Math.max(vc(l,i.axis,h,!0).hi+1,n?0:vc(t,d,i.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex((e=>!kl(e[o.axis])));e+=Math.max(0,t)}s=gc(e,r,a)-r}else s=a-r}return{start:r,count:s}}function Pc(e){const{xScale:t,yScale:n,_scaleRanges:a}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!a)return e._scaleRanges=r,!0;const s=a.xmin!==t.min||a.xmax!==t.max||a.ymin!==n.min||a.ymax!==n.max;return Object.assign(a,r),s}const Lc=e=>0===e||1===e,Ec=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*Xl/n),Dc=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*Xl/n)+1,Mc={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*Zl),easeOutSine:e=>Math.sin(e*Zl),easeInOutSine:e=>-.5*(Math.cos($l*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Lc(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Lc(e)?e:Ec(e,.075,.3),easeOutElastic:e=>Lc(e)?e:Dc(e,.075,.3),easeInOutElastic(e){const t=.1125;return Lc(e)?e:e<.5?.5*Ec(2*e,t,.45):.5+.5*Dc(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Mc.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*Mc.easeInBounce(2*e):.5*Mc.easeOutBounce(2*e-1)+.5};function Oc(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Tc(e){return Oc(e)?e:new Nl(e)}function Rc(e){return Oc(e)?e:new Nl(e).saturate(.5).darken(.1).hexString()}const Ic=["x","y","borderWidth","radius","tension"],Fc=["color","borderColor","backgroundColor"];const zc=new Map;function Bc(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let a=zc.get(n);return a||(a=new Intl.NumberFormat(e,t),zc.set(n,a)),a}(t,n).format(e)}const qc={values:e=>Cl(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const a=this.chart.options.locale;let r,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const i=nc(Math.abs(s)),o=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Bc(e,a,l)},logarithmic(e,t,n){if(0===e)return"0";const a=n[t].significand||e/Math.pow(10,Math.floor(nc(e)));return[1,2,3,5,10,15].includes(a)||t>.8*n.length?qc.numeric.call(this,e,t,n):""}};var Uc={formatters:qc};const Wc=Object.create(null),Hc=Object.create(null);function Vc(e,t){if(!t)return e;const n=t.split(".");for(let a=0,r=n.length;a<r;++a){const t=n[a];e=e[t]||(e[t]=Object.create(null))}return e}function Yc(e,t,n){return"string"===typeof t?zl(Vc(e,t),n):zl(Vc(e,""),t)}class Gc{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Rc(t.backgroundColor),this.hoverBorderColor=(e,t)=>Rc(t.borderColor),this.hoverColor=(e,t)=>Rc(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Yc(this,e,t)}get(e){return Vc(this,e)}describe(e,t){return Yc(Hc,e,t)}override(e,t){return Yc(Wc,e,t)}route(e,t,n,a){const r=Vc(this,e),s=Vc(this,n),i="_"+t;Object.defineProperties(r,{[i]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[i],t=s[a];return Al(e)?Object.assign({},t,e):El(e,t)},set(e){this[i]=e}}})}apply(e){e.forEach((e=>e(this)))}}var $c=new Gc({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Fc},numbers:{type:"number",properties:Ic}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Uc.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function Xc(e,t,n,a,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>a&&(a=s),a}function Kc(e,t,n,a){let r=(a=a||{}).data=a.data||{},s=a.garbageCollect=a.garbageCollect||[];a.font!==t&&(r=a.data={},s=a.garbageCollect=[],a.font=t),e.save(),e.font=t;let i=0;const o=n.length;let l,c,d,u,h;for(l=0;l<o;l++)if(u=n[l],void 0===u||null===u||Cl(u)){if(Cl(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||Cl(h)||(i=Xc(e,r,s,i,h))}else i=Xc(e,r,s,i,u);e.restore();const m=s.length/2;if(m>n.length){for(l=0;l<m;l++)delete r[s[l]];s.splice(0,m)}return i}function Jc(e,t,n){const a=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*a)/a+r}function Qc(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function Zc(e,t,n,a){ed(e,t,n,a,null)}function ed(e,t,n,a,r){let s,i,o,l,c,d,u,h;const m=t.pointStyle,f=t.rotation,p=t.radius;let g=(f||0)*Ql;if(m&&"object"===typeof m&&(s=m.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,a),e.rotate(g),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),void e.restore();if(!(isNaN(p)||p<=0)){switch(e.beginPath(),m){default:r?e.ellipse(n,a,r/2,p,0,0,Xl):e.arc(n,a,p,0,Xl),e.closePath();break;case"triangle":d=r?r/2:p,e.moveTo(n+Math.sin(g)*d,a-Math.cos(g)*p),g+=tc,e.lineTo(n+Math.sin(g)*d,a-Math.cos(g)*p),g+=tc,e.lineTo(n+Math.sin(g)*d,a-Math.cos(g)*p),e.closePath();break;case"rectRounded":c=.516*p,l=p-c,i=Math.cos(g+ec)*l,u=Math.cos(g+ec)*(r?r/2-c:l),o=Math.sin(g+ec)*l,h=Math.sin(g+ec)*(r?r/2-c:l),e.arc(n-u,a-o,c,g-$l,g-Zl),e.arc(n+h,a-i,c,g-Zl,g),e.arc(n+u,a+o,c,g,g+Zl),e.arc(n-h,a+i,c,g+Zl,g+$l),e.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*p,d=r?r/2:l,e.rect(n-d,a-l,2*d,2*l);break}g+=ec;case"rectRot":u=Math.cos(g)*(r?r/2:p),i=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(r?r/2:p),e.moveTo(n-u,a-o),e.lineTo(n+h,a-i),e.lineTo(n+u,a+o),e.lineTo(n-h,a+i),e.closePath();break;case"crossRot":g+=ec;case"cross":u=Math.cos(g)*(r?r/2:p),i=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(r?r/2:p),e.moveTo(n-u,a-o),e.lineTo(n+u,a+o),e.moveTo(n+h,a-i),e.lineTo(n-h,a+i);break;case"star":u=Math.cos(g)*(r?r/2:p),i=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(r?r/2:p),e.moveTo(n-u,a-o),e.lineTo(n+u,a+o),e.moveTo(n+h,a-i),e.lineTo(n-h,a+i),g+=ec,u=Math.cos(g)*(r?r/2:p),i=Math.cos(g)*p,o=Math.sin(g)*p,h=Math.sin(g)*(r?r/2:p),e.moveTo(n-u,a-o),e.lineTo(n+u,a+o),e.moveTo(n+h,a-i),e.lineTo(n-h,a+i);break;case"line":i=r?r/2:Math.cos(g)*p,o=Math.sin(g)*p,e.moveTo(n-i,a-o),e.lineTo(n+i,a+o);break;case"dash":e.moveTo(n,a),e.lineTo(n+Math.cos(g)*(r?r/2:p),a+Math.sin(g)*p);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function td(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function nd(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function ad(e){e.restore()}function rd(e,t,n,a,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const a=(t.x+n.x)/2;e.lineTo(a,t.y),e.lineTo(a,n.y)}else"after"===r!==!!a?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function sd(e,t,n,a){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(a?t.cp1x:t.cp2x,a?t.cp1y:t.cp2y,a?n.cp2x:n.cp1x,a?n.cp2y:n.cp1y,n.x,n.y)}function id(e,t,n,a,r){if(r.strikethrough||r.underline){const s=e.measureText(a),i=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,d=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(i,d),e.lineTo(o,d),e.stroke()}}function od(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function ld(e,t,n,a,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=Cl(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),kl(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<i.length;++l)c=i[l],s.backdrop&&od(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),kl(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,a,s.maxWidth)),e.fillText(c,n,a,s.maxWidth),id(e,n,a,c,s),a+=Number(r.lineHeight);e.restore()}function cd(e,t){const{x:n,y:a,w:r,h:s,radius:i}=t;e.arc(n+i.topLeft,a+i.topLeft,i.topLeft,1.5*$l,$l,!0),e.lineTo(n,a+s-i.bottomLeft),e.arc(n+i.bottomLeft,a+s-i.bottomLeft,i.bottomLeft,$l,Zl,!0),e.lineTo(n+r-i.bottomRight,a+s),e.arc(n+r-i.bottomRight,a+s-i.bottomRight,i.bottomRight,Zl,0,!0),e.lineTo(n+r,a+i.topRight),e.arc(n+r-i.topRight,a+i.topRight,i.topRight,0,-Zl,!0),e.lineTo(n+i.topLeft,a)}const dd=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ud=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function hd(e,t){const n=(""+e).match(dd);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}function md(e,t){const n={},a=Al(t),r=a?Object.keys(t):t,s=Al(e)?a?n=>El(e[n],e[t[n]]):t=>e[t]:()=>e;for(const i of r)n[i]=+s(i)||0;return n}function fd(e){return md(e,{top:"y",right:"x",bottom:"y",left:"x"})}function pd(e){return md(e,["topLeft","topRight","bottomLeft","bottomRight"])}function gd(e){const t=fd(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function xd(e,t){e=e||{},t=t||$c.font;let n=El(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let a=El(e.style,t.style);a&&!(""+a).match(ud)&&(console.warn('Invalid font style specified: "'+a+'"'),a=void 0);const r={family:El(e.family,t.family),lineHeight:hd(El(e.lineHeight,t.lineHeight),n),size:n,style:a,weight:El(e.weight,t.weight),string:""};return r.string=function(e){return!e||kl(e.size)||kl(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function bd(e,t,n,a){let r,s,i,o=!0;for(r=0,s=e.length;r<s;++r)if(i=e[r],void 0!==i&&(void 0!==t&&"function"===typeof i&&(i=i(t),o=!1),void 0!==n&&Cl(i)&&(i=i[n%i.length],o=!1),void 0!==i))return a&&!o&&(a.cacheable=!1),i}function vd(e,t){return Object.assign(Object.create(e),t)}function yd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Ed("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:a,override:a=>yd([a,...e],t,r,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,a)=>Sd(n,a,(()=>function(e,t,n,a){let r;for(const s of t)if(r=Ed(Nd(s,e),n),"undefined"!==typeof r)return _d(e,r)?Pd(n,a,e,r):r}(a,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Dd(e).includes(t),ownKeys:e=>Dd(e),set(e,t,n){const r=e._storage||(e._storage=a());return e[t]=r[t]=n,delete e._keys,!0}})}function wd(e,t,n,a){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:jd(e,a),setContext:t=>wd(e,t,n,a),override:r=>wd(e.override(r),t,n,a)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>Sd(e,t,(()=>function(e,t,n){const{_proxy:a,_context:r,_subProxy:s,_descriptors:i}=e;let o=a[t];Yl(o)&&i.isScriptable(t)&&(o=function(e,t,n,a){const{_proxy:r,_context:s,_subProxy:i,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,i||a);o.delete(e),_d(e,l)&&(l=Pd(r._scopes,r,e,l));return l}(t,o,e,n));Cl(o)&&o.length&&(o=function(e,t,n,a){const{_proxy:r,_context:s,_subProxy:i,_descriptors:o}=n;if("undefined"!==typeof s.index&&a(e))return t[s.index%t.length];if(Al(t[0])){const n=t,a=r._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=Pd(a,r,e,l);t.push(wd(n,s,i&&i[e],o))}}return t}(t,o,e,i.isIndexable));_d(t,o)&&(o=wd(o,r,s&&s[t],i));return o}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,a)=>(e[n]=a,delete t[n],!0)})}function jd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:a=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:a,isScriptable:Yl(n)?n:()=>n,isIndexable:Yl(a)?a:()=>a}}const Nd=(e,t)=>e?e+Hl(t):t,_d=(e,t)=>Al(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Sd(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const a=n();return e[t]=a,a}function kd(e,t,n){return Yl(e)?e(t,n):e}const Cd=(e,t)=>!0===e?t:"string"===typeof e?Wl(t,e):void 0;function Ad(e,t,n,a,r){for(const s of t){const t=Cd(n,s);if(t){e.add(t);const s=kd(t._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==a)return s}else if(!1===t&&"undefined"!==typeof a&&n!==a)return null}return!1}function Pd(e,t,n,a){const r=t._rootScopes,s=kd(t._fallback,n,a),i=[...e,...r],o=new Set;o.add(a);let l=Ld(o,i,n,s||n,a);return null!==l&&(("undefined"===typeof s||s===n||(l=Ld(o,i,s,l,a),null!==l))&&yd(Array.from(o),[""],r,s,(()=>function(e,t,n){const a=e._getTarget();t in a||(a[t]={});const r=a[t];if(Cl(r)&&Al(n))return n;return r||{}}(t,n,a))))}function Ld(e,t,n,a,r){for(;n;)n=Ad(e,t,n,a,r);return n}function Ed(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Dd(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function Md(e,t,n,a){const{iScale:r}=e,{key:s="r"}=this._parsing,i=new Array(a);let o,l,c,d;for(o=0,l=a;o<l;++o)c=o+n,d=t[c],i[o]={r:r.parse(Wl(d,s),c)};return i}const Od=Number.EPSILON||1e-14,Td=(e,t)=>t<e.length&&!e[t].skip&&e[t],Rd=e=>"x"===e?"y":"x";function Id(e,t,n,a){const r=e.skip?t:e,s=t,i=n.skip?t:n,o=hc(s,r),l=hc(i,s);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=a*c,h=a*d;return{previous:{x:s.x-u*(i.x-r.x),y:s.y-u*(i.y-r.y)},next:{x:s.x+h*(i.x-r.x),y:s.y+h*(i.y-r.y)}}}function Fd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Rd(t),a=e.length,r=Array(a).fill(0),s=Array(a);let i,o,l,c=Td(e,0);for(i=0;i<a;++i)if(o=l,l=c,c=Td(e,i+1),l){if(c){const e=c[t]-l[t];r[i]=0!==e?(c[n]-l[n])/e:0}s[i]=o?c?ac(r[i-1])!==ac(r[i])?0:(r[i-1]+r[i])/2:r[i-1]:r[i]}!function(e,t,n){const a=e.length;let r,s,i,o,l,c=Td(e,0);for(let d=0;d<a-1;++d)l=c,c=Td(e,d+1),l&&c&&(rc(t[d],0,Od)?n[d]=n[d+1]=0:(r=n[d]/t[d],s=n[d+1]/t[d],o=Math.pow(r,2)+Math.pow(s,2),o<=9||(i=3/Math.sqrt(o),n[d]=r*i*t[d],n[d+1]=s*i*t[d])))}(e,r,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const a=Rd(n),r=e.length;let s,i,o,l=Td(e,0);for(let c=0;c<r;++c){if(i=o,o=l,l=Td(e,c+1),!o)continue;const r=o[n],d=o[a];i&&(s=(r-i[n])/3,o["cp1".concat(n)]=r-s,o["cp1".concat(a)]=d-s*t[c]),l&&(s=(l[n]-r)/3,o["cp2".concat(n)]=r+s,o["cp2".concat(a)]=d+s*t[c])}}(e,s,t)}function zd(e,t,n){return Math.max(Math.min(e,n),t)}function Bd(e,t,n,a,r){let s,i,o,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)Fd(e,r);else{let n=a?e[e.length-1]:e[0];for(s=0,i=e.length;s<i;++s)o=e[s],l=Id(n,o,e[Math.min(s+1,i-(a?0:1))%i],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,a,r,s,i,o=td(e[0],t);for(n=0,a=e.length;n<a;++n)i=s,s=o,o=n<a-1&&td(e[n+1],t),s&&(r=e[n],i&&(r.cp1x=zd(r.cp1x,t.left,t.right),r.cp1y=zd(r.cp1y,t.top,t.bottom)),o&&(r.cp2x=zd(r.cp2x,t.left,t.right),r.cp2y=zd(r.cp2y,t.top,t.bottom)))}(e,n)}function qd(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Ud(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Wd(e,t,n){let a;return"string"===typeof e?(a=parseInt(e,10),-1!==e.indexOf("%")&&(a=a/100*t.parentNode[n])):a=e,a}const Hd=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Vd=["top","right","bottom","left"];function Yd(e,t,n){const a={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Vd[r];a[s]=parseFloat(e[t+"-"+s+n])||0}return a.width=a.left+a.right,a.height=a.top+a.bottom,a}function Gd(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:a}=t,r=Hd(n),s="border-box"===r.boxSizing,i=Yd(r,"padding"),o=Yd(r,"border","width"),{x:l,y:c,box:d}=function(e,t){const n=e.touches,a=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=a;let i,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,s,e.target))i=r,o=s;else{const e=t.getBoundingClientRect();i=a.clientX-e.left,o=a.clientY-e.top,l=!0}return{x:i,y:o,box:l}}(e,n),u=i.left+(d&&o.left),h=i.top+(d&&o.top);let{width:m,height:f}=t;return s&&(m-=i.width+o.width,f-=i.height+o.height),{x:Math.round((l-u)/m*n.width/a),y:Math.round((c-h)/f*n.height/a)}}const $d=e=>Math.round(10*e)/10;function Xd(e,t,n,a){const r=Hd(e),s=Yd(r,"margin"),i=Wd(r.maxWidth,e,"clientWidth")||Jl,o=Wd(r.maxHeight,e,"clientHeight")||Jl,l=function(e,t,n){let a,r;if(void 0===t||void 0===n){const s=e&&Ud(e);if(s){const e=s.getBoundingClientRect(),i=Hd(s),o=Yd(i,"border","width"),l=Yd(i,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,a=Wd(i.maxWidth,s,"clientWidth"),r=Wd(i.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:a||Jl,maxHeight:r||Jl}}(e,t,n);let{width:c,height:d}=l;if("content-box"===r.boxSizing){const e=Yd(r,"border","width"),t=Yd(r,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-s.width),d=Math.max(0,a?c/a:d-s.height),c=$d(Math.min(c,i,l.maxWidth)),d=$d(Math.min(d,o,l.maxHeight)),c&&!d&&(d=$d(c/2));return(void 0!==t||void 0!==n)&&a&&l.height&&d>l.height&&(d=l.height,c=$d(Math.floor(d*a))),{width:c,height:d}}function Kd(e,t,n){const a=t||1,r=Math.floor(e.height*a),s=Math.floor(e.width*a);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const i=e.canvas;return i.style&&(n||!i.style.height&&!i.style.width)&&(i.style.height="".concat(e.height,"px"),i.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==a||i.height!==r||i.width!==s)&&(e.currentDevicePixelRatio=a,i.height=r,i.width=s,e.ctx.setTransform(a,0,0,a,0,0),!0)}const Jd=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};qd()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(vj){}return e}();function Qd(e,t){const n=function(e,t){return Hd(e).getPropertyValue(t)}(e,t),a=n&&n.match(/^(\d+)(\.\d+)?px$/);return a?+a[1]:void 0}function Zd(e,t,n,a){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function eu(e,t,n,a){return{x:e.x+n*(t.x-e.x),y:"middle"===a?n<.5?e.y:t.y:"after"===a?n<1?e.y:t.y:n>0?t.y:e.y}}function tu(e,t,n,a){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},i=Zd(e,r,n),o=Zd(r,s,n),l=Zd(s,t,n),c=Zd(i,o,n),d=Zd(o,l,n);return Zd(c,d,n)}function nu(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function au(e,t){let n,a;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,a=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=a)}function ru(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function su(e){return"angle"===e?{between:pc,compare:mc,normalize:fc}:{between:xc,compare:(e,t)=>e-t,normalize:e=>e}}function iu(e){let{start:t,end:n,count:a,loop:r,style:s}=e;return{start:t%a,end:n%a,loop:r&&(n-t+1)%a===0,style:s}}function ou(e,t,n){if(!n)return[e];const{property:a,start:r,end:s}=n,i=t.length,{compare:o,between:l,normalize:c}=su(a),{start:d,end:u,loop:h,style:m}=function(e,t,n){const{property:a,start:r,end:s}=n,{between:i,normalize:o}=su(a),l=t.length;let c,d,{start:u,end:h,loop:m}=e;if(m){for(u+=l,h+=l,c=0,d=l;c<d&&i(o(t[u%l][a]),r,s);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:m,style:e.style}}(e,t,n),f=[];let p,g,x,b=!1,v=null;const y=()=>b||l(r,x,p)&&0!==o(r,x),w=()=>!b||0===o(s,p)||l(s,x,p);for(let j=d,N=d;j<=u;++j)g=t[j%i],g.skip||(p=c(g[a]),p!==x&&(b=l(p,r,s),null===v&&y()&&(v=0===o(p,r)?j:N),null!==v&&w()&&(f.push(iu({start:v,end:j,loop:h,count:i,style:m})),v=null),N=j,x=p));return null!==v&&f.push(iu({start:v,end:u,loop:h,count:i,style:m})),f}function lu(e,t){const n=[],a=e.segments;for(let r=0;r<a.length;r++){const s=ou(a[r],e.points,t);s.length&&n.push(...s)}return n}function cu(e,t,n,a){return a&&a.setContext&&n?function(e,t,n,a){const r=e._chart.getContext(),s=du(e.options),{_datasetIndex:i,options:{spanGaps:o}}=e,l=n.length,c=[];let d=s,u=t[0].start,h=u;function m(e,t,a,r){const s=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:a,style:r}),d=r,u=t%l)}}for(const f of t){u=o?u:f.start;let e,t=n[u%l];for(h=u+1;h<=f.end;h++){const s=n[h%l];e=du(a.setContext(vd(r,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:i}))),uu(e,d)&&m(u,h-1,f.loop,d),t=s,d=e}u<h-1&&m(u,h-1,f.loop,d)}return c}(e,t,n,a):t}function du(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function uu(e,t){if(!t)return!1;const n=[],a=function(e,t){return Oc(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,a)!==JSON.stringify(t,a)}function hu(e,t,n){return e.options.clip?e[n]:t[n]}function mu(e,t){const n=t._clip;if(n.disabled)return!1;const a=function(e,t){const{xScale:n,yScale:a}=e;return n&&a?{left:hu(n,t,"left"),right:hu(n,t,"right"),top:hu(a,t,"top"),bottom:hu(a,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:a.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:a.right+(!0===n.right?0:n.right),top:!1===n.top?0:a.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:a.bottom+(!0===n.bottom?0:n.bottom)}}class fu{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,a){const r=t.listeners[a],s=t.duration;r.forEach((a=>a({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=_c.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,a)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,i=r.length-1,o=!1;for(;i>=0;--i)s=r[i],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),o=!0):(r[i]=r[r.length-1],r.pop());o&&(a.draw(),this._notify(a,n,e,"progress")),r.length||(n.running=!1,this._notify(a,n,e,"complete"),n.initial=!1),t+=r.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let a=n.length-1;for(;a>=0;--a)n[a].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var pu=new fu;const gu="transparent",xu={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const a=Tc(e||gu),r=a.valid&&Tc(t||gu);return r&&r.valid?r.mix(a,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class bu{constructor(e,t,n,a){const r=t[n];a=bd([e.to,a,r,e.from]);const s=bd([e.from,r,a]);this._active=!0,this._fn=e.fn||xu[e.type||typeof s],this._easing=Mc[e.easing]||Mc.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=a,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const a=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=bd([e.to,t,a,e.from]),this._from=bd([e.from,a,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,a=this._prop,r=this._from,s=this._loop,i=this._to;let o;if(this._active=r!==i&&(s||t<n),!this._active)return this._target[a]=i,void this._notify(!0);t<0?this._target[a]=r:(o=t/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[a]=this._fn(r,i,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let a=0;a<n.length;a++)n[a][t]()}}class vu{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Al(e))return;const t=Object.keys($c.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((a=>{const r=e[a];if(!Al(r))return;const s={};for(const e of t)s[e]=r[e];(Cl(r.properties)&&r.properties||[a]).forEach((e=>{e!==a&&n.has(e)||n.set(e,s)}))}))}_animateOptions(e,t){const n=t.options,a=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!a)return[];const r=this._createAnimations(a,n);return n.$shared&&function(e,t){const n=[],a=Object.keys(t);for(let r=0;r<a.length;r++){const t=e[a[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),r}_createAnimations(e,t){const n=this._properties,a=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),i=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){a.push(...this._animateOptions(e,t));continue}const c=t[l];let d=r[l];const u=n.get(l);if(d){if(u&&d.active()){d.update(u,c,i);continue}d.cancel()}u&&u.duration?(r[l]=d=new bu(u,e,l,c),a.push(d)):e[l]=c}return a}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(pu.add(this._chart,n),!0):void 0}}function yu(e,t){const n=e&&e.options||{},a=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:a?s:r,end:a?r:s}}function wu(e,t){const n=[],a=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=a.length;r<s;++r)n.push(a[r].index);return n}function ju(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,s="single"===a.mode;let i,o,l,c;if(null===t)return;let d=!1;for(i=0,o=r.length;i<o;++i){if(l=+r[i],l===n){if(d=!0,a.all)continue;break}c=e.values[l],Pl(c)&&(s||0===t||ac(t)===ac(c))&&(t+=c)}return d||a.all?t:0}function Nu(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function _u(e,t,n){const a=e[t]||(e[t]={});return a[n]||(a[n]={})}function Su(e,t,n,a){for(const r of t.getMatchingVisibleMetas(a).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function ku(e,t){const{chart:n,_cachedMeta:a}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:i,index:o}=a,l=s.axis,c=i.axis,d=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,i,a),u=t.length;let h;for(let m=0;m<u;++m){const e=t[m],{[l]:n,[c]:s}=e;h=(e._stacks||(e._stacks={}))[c]=_u(r,d,n),h[o]=s,h._top=Su(h,i,!0,a.type),h._bottom=Su(h,i,!1,a.type);(h._visualValues||(h._visualValues={}))[o]=s}}function Cu(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function Au(e,t){const n=e.controller.index,a=e.vScale&&e.vScale.axis;if(a){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[a]||void 0===t[a][n])return;delete t[a][n],void 0!==t[a]._visualValues&&void 0!==t[a]._visualValues[n]&&delete t[a]._visualValues[n]}}}const Pu=e=>"reset"===e||"none"===e,Lu=(e,t)=>t?e:Object.assign({},e);class Eu{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Nu(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Au(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),a=(e,t,n,a)=>"x"===e?t:"r"===e?a:n,r=t.xAxisID=El(n.xAxisID,Cu(e,"x")),s=t.yAxisID=El(n.yAxisID,Cu(e,"y")),i=t.rAxisID=El(n.rAxisID,Cu(e,"r")),o=t.indexAxis,l=t.iAxisID=a(o,r,s,i),c=t.vAxisID=a(o,s,r,i);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(i),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&jc(this._data,this),e._stacked&&Au(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Al(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:a}=t,r="x"===n.axis?"x":"y",s="x"===a.axis?"x":"y",i=Object.keys(e),o=new Array(i.length);let l,c,d;for(l=0,c=i.length;l<c;++l)d=i[l],o[l]={[r]:d,[s]:e[d]};return o}(t,e)}else if(n!==t){if(n){jc(n,this);const e=this._cachedMeta;Au(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),wc.forEach((t=>{const n="_onData"+Hl(t),a=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];const i=a.apply(this,r);return e._chartjs.listeners.forEach((e=>{"function"===typeof e[n]&&e[n](...r)})),i}})})))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let a=!1;this._dataCheck();const r=t._stacked;t._stacked=Nu(t.vScale,t),t.stack!==n.stack&&(a=!0,Au(t),t.stack=n.stack),this._resyncElements(e),(a||r!==t._stacked)&&(ku(this,t._parsed),t._stacked=Nu(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:a}=this,{iScale:r,_stacked:s}=n,i=r.axis;let o,l,c,d=0===e&&t===a.length||n._sorted,u=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=a,n._sorted=!0,c=a;else{c=Cl(a[e])?this.parseArrayData(n,a,e,t):Al(a[e])?this.parseObjectData(n,a,e,t):this.parsePrimitiveData(n,a,e,t);const r=()=>null===l[i]||u&&l[i]<u[i];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],d&&(r()&&(d=!1),u=l);n._sorted=d}s&&ku(this,c)}parsePrimitiveData(e,t,n,a){const{iScale:r,vScale:s}=e,i=r.axis,o=s.axis,l=r.getLabels(),c=r===s,d=new Array(a);let u,h,m;for(u=0,h=a;u<h;++u)m=u+n,d[u]={[i]:c||r.parse(l[m],m),[o]:s.parse(t[m],m)};return d}parseArrayData(e,t,n,a){const{xScale:r,yScale:s}=e,i=new Array(a);let o,l,c,d;for(o=0,l=a;o<l;++o)c=o+n,d=t[c],i[o]={x:r.parse(d[0],c),y:s.parse(d[1],c)};return i}parseObjectData(e,t,n,a){const{xScale:r,yScale:s}=e,{xAxisKey:i="x",yAxisKey:o="y"}=this._parsing,l=new Array(a);let c,d,u,h;for(c=0,d=a;c<d;++c)u=c+n,h=t[u],l[c]={x:r.parse(Wl(h,i),u),y:s.parse(Wl(h,o),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const a=this.chart,r=this._cachedMeta,s=t[e.axis];return ju({keys:wu(a,!0),values:t._stacks[e.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(e,t,n,a){const r=n[t.axis];let s=null===r?NaN:r;const i=a&&n._stacks[t.axis];a&&i&&(a.values=i,s=ju(a,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,a=n._parsed,r=n._sorted&&e===n.iScale,s=a.length,i=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:wu(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:n,minDefined:a,maxDefined:r}=e.getUserBounds();return{min:a?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(i);let u,h;function m(){h=a[u];const t=h[i.axis];return!Pl(h[e.axis])||c>t||d<t}for(u=0;u<s&&(m()||(this.updateRangeFromParsed(l,e,h,o),!r));++u);if(r)for(u=s-1;u>=0;--u)if(!m()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let a,r,s;for(a=0,r=t.length;a<r;++a)s=t[a][e.axis],Pl(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,a=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:a?""+a.getLabelForValue(r[a.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,a,r;return Al(e)?(t=e.top,n=e.right,a=e.bottom,r=e.left):t=n=a=r=e,{top:t,right:n,bottom:a,left:r,disabled:!1===e}}(El(this.options.clip,function(e,t,n){if(!1===n)return!1;const a=yu(e,n),r=yu(t,n);return{top:r.end,right:a.end,bottom:r.start,left:a.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,a=n.data||[],r=t.chartArea,s=[],i=this._drawStart||0,o=this._drawCount||a.length-i,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,i,o),c=i;c<i+o;++c){const t=a[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,r))}for(c=0;c<s.length;++c)s[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const a=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return vd(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=a.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return vd(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=a,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const a="active"===t,r=this._cachedDataOpts,s=e+"-"+t,i=r[s],o=this.enableOptionSharing&&Vl(n);if(i)return Lu(i,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=a?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys($c.elements[e]),m=l.resolveNamedOptions(u,h,(()=>this.getContext(n,a,t)),d);return m.$shared&&(m.$shared=o,r[s]=Object.freeze(Lu(m,o))),m}_resolveAnimations(e,t,n){const a=this.chart,r=this._cachedDataOpts,s="animation-".concat(t),i=r[s];if(i)return i;let o;if(!1!==a.options.animation){const a=this.chart.config,r=a.datasetAnimationScopeKeys(this._type,t),s=a.getOptionScopes(this.getDataset(),r);o=a.createResolver(s,this.getContext(e,n,t))}const l=new vu(a,o&&o.animations);return o&&o._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||Pu(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),a=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(t,r)||r!==a;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:s}}updateElement(e,t,n,a){Pu(a)?Object.assign(e,n):this._resolveAnimations(t,a).update(e,n)}updateSharedOptions(e,t,n){e&&!Pu(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,a){e.active=a;const r=this.getStyle(t,a);this._resolveAnimations(t,n,a).update(e,{options:!a&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[i,o,l]of this._syncList)this[i](o,l);this._syncList=[];const a=n.length,r=t.length,s=Math.min(r,a);s&&this.parse(0,s),r>a?this._insertElements(a,r-a,e):r<a&&this._removeElements(r,a-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=this._cachedMeta,r=a.data,s=e+t;let i;const o=e=>{for(e.length+=t,i=e.length-1;i>=s;i--)e[i]=e[i-t]};for(o(r),i=e;i<s;++i)r[i]=new this.dataElementType;this._parsing&&o(a._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,a){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const a=n._parsed.splice(e,t);n._stacked&&Au(n,a)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,a]=e;this[t](n,a)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Du(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let a=[];for(let t=0,r=n.length;t<r;t++)a=a.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=Nc(a.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let a,r,s,i,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(Vl(i)&&(o=Math.min(o,Math.abs(s-i)||o)),i=s)};for(a=0,r=n.length;a<r;++a)s=t.getPixelForValue(n[a]),l();for(i=void 0,a=0,r=t.ticks.length;a<r;++a)s=t.getPixelForTick(a),l();return o}function Mu(e,t,n,a){return Cl(e)?function(e,t,n,a){const r=n.parse(e[0],a),s=n.parse(e[1],a),i=Math.min(r,s),o=Math.max(r,s);let l=i,c=o;Math.abs(i)>Math.abs(o)&&(l=o,c=i),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:i,max:o}}(e,t,n,a):t[n.axis]=n.parse(e,a),t}function Ou(e,t,n,a){const r=e.iScale,s=e.vScale,i=r.getLabels(),o=r===s,l=[];let c,d,u,h;for(c=n,d=n+a;c<d;++c)h=t[c],u={},u[r.axis]=o||r.parse(i[c],c),l.push(Mu(h,u,s,c));return l}function Tu(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Ru(e,t,n,a){let r=t.borderSkipped;const s={};if(!r)return void(e.borderSkipped=s);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:i,end:o,reverse:l,top:c,bottom:d}=function(e){let t,n,a,r,s;return e.horizontal?(t=e.base>e.x,n="left",a="right"):(t=e.base<e.y,n="bottom",a="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:a,reverse:t,top:r,bottom:s}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===a?r=c:(n._bottom||0)===a?r=d:(s[Iu(d,i,o,l)]=!0,r=c)),s[Iu(r,i,o,l)]=!0,e.borderSkipped=s}function Iu(e,t,n,a){var r,s,i;return a?(i=n,e=Fu(e=(r=e)===(s=t)?i:r===i?s:r,n,t)):e=Fu(e,t,n),e}function Fu(e,t,n){return"start"===e?t:"end"===e?n:e}function zu(e,t,n){let{inflateAmount:a}=t;e.inflateAmount="auto"===a?1===n?.33:0:a}(0,Ho.A)(Eu,"defaults",{}),(0,Ho.A)(Eu,"datasetElementType",null),(0,Ho.A)(Eu,"dataElementType",null);class Bu extends Eu{parsePrimitiveData(e,t,n,a){return Ou(e,t,n,a)}parseArrayData(e,t,n,a){return Ou(e,t,n,a)}parseObjectData(e,t,n,a){const{iScale:r,vScale:s}=e,{xAxisKey:i="x",yAxisKey:o="y"}=this._parsing,l="x"===r.axis?i:o,c="x"===s.axis?i:o,d=[];let u,h,m,f;for(u=n,h=n+a;u<h;++u)f=t[u],m={},m[r.axis]=r.parse(Wl(f,l),u),d.push(Mu(Wl(f,c),m,s,u));return d}updateRangeFromParsed(e,t,n,a){super.updateRangeFromParsed(e,t,n,a);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:a}=t,r=this.getParsed(e),s=r._custom,i=Tu(s)?"["+s.start+", "+s.end+"]":""+a.getLabelForValue(r[a.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:i}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,a){const r="reset"===a,{index:s,_cachedMeta:{vScale:i}}=this,o=i.getBasePixel(),l=i.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,a);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=r||kl(t[i.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),m=this._calculateBarIndexPixels(h,c),f=(t._stacks||{})[i.axis],p={horizontal:l,base:n.base,enableBorderRadius:!f||Tu(t._custom)||s===f._top||s===f._bottom,x:l?n.head:m.center,y:l?m.center:n.head,height:l?m.size:Math.abs(n.size),width:l?Math.abs(n.size):m.size};u&&(p.options=d||this.resolveDataElementOptions(h,e[h].active?"active":a));const g=p.options||e[h].options;Ru(p,g,f,s),zu(p,g,c.ratio),this.updateElement(e[h],h,p,a)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,a=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),r=n.options.stacked,s=[],i=this._cachedMeta.controller.getParsed(t),o=i&&i[n.axis],l=e=>{const t=e._parsed.find((e=>e[n.axis]===o)),a=t&&t[e.vScale.axis];if(kl(a)||isNaN(a))return!0};for(const c of a)if((void 0===t||!l(c))&&((!1===r||-1===s.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const a=this._getStacks(e,n),r=void 0!==t?a.indexOf(t):-1;return-1===r?a.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,a=[];let r,s;for(r=0,s=t.data.length;r<s;++r)a.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const i=e.barThickness;return{min:i||Du(t),pixels:a,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:i?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:a},options:{base:r,minBarLength:s}}=this,i=r||0,o=this.getParsed(e),l=o._custom,c=Tu(l);let d,u,h=o[t.axis],m=0,f=n?this.applyStack(t,o,n):h;f!==h&&(m=f-h,f=h),c&&(h=l.barStart,f=l.barEnd-l.barStart,0!==h&&ac(h)!==ac(l.barEnd)&&(m=0),m+=h);const p=kl(r)||c?m:r;let g=t.getPixelForValue(p);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(m+f):g,u=d-g,Math.abs(u)<s){u=function(e,t,n){return 0!==e?ac(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(u,t,i)*s,h===i&&(g-=u/2);const e=t.getPixelForDecimal(0),r=t.getPixelForDecimal(1),l=Math.min(e,r),m=Math.max(e,r);g=Math.max(Math.min(g,m),l),d=g+u,n&&!c&&(o._stacks[t.axis]._visualValues[a]=t.getValueForPixel(d)-t.getValueForPixel(g))}if(g===t.getPixelForValue(i)){const e=ac(u)*t.getLineWidthForValue(i)/2;g+=e,u-=e}return{size:u,base:g,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const n=t.scale,a=this.options,r=a.skipNull,s=El(a.maxBarThickness,1/0);let i,o;if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,l="flex"===a.barThickness?function(e,t,n,a){const r=t.pixels,s=r[e];let i=e>0?r[e-1]:null,o=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===i&&(i=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-i);const c=s-(s-Math.min(i,o))/2*l;return{chunk:Math.abs(o-i)/2*l/a,ratio:n.barPercentage,start:c}}(e,t,a,n):function(e,t,n,a){const r=n.barThickness;let s,i;return kl(r)?(s=t.min*n.categoryPercentage,i=n.barPercentage):(s=r*a,i=1),{chunk:s/a,ratio:i,start:t.pixels[e]-s/2}}(e,t,a,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);i=l.start+l.chunk*c+l.chunk/2,o=Math.min(s,l.chunk*l.ratio)}else i=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(s,t.min*t.ratio);return{base:i-o/2,head:i+o/2,center:i,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,a=n.length;let r=0;for(;r<a;++r)null===this.getParsed(r)[t.axis]||n[r].hidden||n[r].draw(this._ctx)}}(0,Ho.A)(Bu,"id","bar"),(0,Ho.A)(Bu,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,Ho.A)(Bu,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class qu extends Eu{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,a){const r=super.parsePrimitiveData(e,t,n,a);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(e,t,n,a){const r=super.parseArrayData(e,t,n,a);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=El(e[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(e,t,n,a){const r=super.parseObjectData(e,t,n,a);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=El(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:a,yScale:r}=t,s=this.getParsed(e),i=a.getLabelForValue(s.x),o=r.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+i+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,a){const r="reset"===a,{iScale:s,vScale:i}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,a),c=s.axis,d=i.axis;for(let u=t;u<t+n;u++){const t=e[u],n=!r&&this.getParsed(u),h={},m=h[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),f=h[d]=r?i.getBasePixel():i.getPixelForValue(n[d]);h.skip=isNaN(m)||isNaN(f),l&&(h.options=o||this.resolveDataElementOptions(u,t.active?"active":a),r&&(h.options.radius=0)),this.updateElement(t,u,h,a)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let a=super.resolveDataElementOptions(e,t);a.$shared&&(a=Object.assign({},a,{$shared:!1}));const r=a.radius;return"active"!==t&&(a.radius=0),a.radius+=El(n&&n._custom,r),a}}(0,Ho.A)(qu,"id","bubble"),(0,Ho.A)(qu,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,Ho.A)(qu,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class Uu extends Eu{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,a=this._cachedMeta;if(!1===this._parsing)a._parsed=n;else{let r,s,i=e=>+n[e];if(Al(n[e])){const{key:e="value"}=this._parsing;i=t=>+Wl(n[t],e)}for(r=e,s=e+t;r<s;++r)a._parsed[r]=i(r)}}_getRotation(){return lc(this.options.rotation-90)}_getCircumference(){return lc(this.options.circumference)}_getRotationExtents(){let e=Xl,t=-Xl;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const a=this.chart.getDatasetMeta(n).controller,r=a._getRotation(),s=a._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,a=this._cachedMeta,r=a.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,i=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min(((e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t)(this.options.cutout,i),1),l=this._getRingWeight(this.index),{circumference:c,rotation:d}=this._getRotationExtents(),{ratioX:u,ratioY:h,offsetX:m,offsetY:f}=function(e,t,n){let a=1,r=1,s=0,i=0;if(t<Xl){const o=e,l=o+t,c=Math.cos(o),d=Math.sin(o),u=Math.cos(l),h=Math.sin(l),m=(e,t,a)=>pc(e,o,l,!0)?1:Math.max(t,t*n,a,a*n),f=(e,t,a)=>pc(e,o,l,!0)?-1:Math.min(t,t*n,a,a*n),p=m(0,c,u),g=m(Zl,d,h),x=f($l,c,u),b=f($l+Zl,d,h);a=(p-x)/2,r=(g-b)/2,s=-(p+x)/2,i=-(g+b)/2}return{ratioX:a,ratioY:r,offsetX:s,offsetY:i}}(d,c,o),p=(n.width-s)/u,g=(n.height-s)/h,x=Math.max(Math.min(p,g)/2,0),b=Dl(this.options.radius,x),v=(b-Math.max(b*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*b,this.offsetY=f*b,a.total=this.calculateTotal(),this.outerRadius=b-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*l,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,a=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===a._parsed[e]||a.data[e].hidden?0:this.calculateCircumference(a._parsed[e]*r/Xl)}updateElements(e,t,n,a){const r="reset"===a,s=this.chart,i=s.chartArea,o=s.options.animation,l=(i.left+i.right)/2,c=(i.top+i.bottom)/2,d=r&&o.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:m,includeOptions:f}=this._getSharedOptions(t,a);let p,g=this._getRotation();for(p=0;p<t;++p)g+=this._circumference(p,r);for(p=t;p<t+n;++p){const t=this._circumference(p,r),n=e[p],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};f&&(s.options=m||this.resolveDataElementOptions(p,n.active?"active":a)),g+=t,this.updateElement(n,p,s,a)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,a=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(a+=Math.abs(r))}return a}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?Xl*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,a=n.data.labels||[],r=Bc(t._parsed[e],n.options.locale);return{label:a[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let a,r,s,i,o;if(!e)for(a=0,r=n.data.datasets.length;a<r;++a)if(n.isDatasetVisible(a)){s=n.getDatasetMeta(a),e=s.data,i=s.controller;break}if(!e)return 0;for(a=0,r=e.length;a<r;++a)o=i.resolveDataElementOptions(a),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,a=e.length;n<a;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(El(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,Ho.A)(Uu,"id","doughnut"),(0,Ho.A)(Uu,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,Ho.A)(Uu,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,Ho.A)(Uu,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:a}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:a,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class Wu extends Eu{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:a=[],_dataset:r}=t,s=this.chart._animationsDisabled;let{start:i,count:o}=Ac(t,a,s);this._drawStart=i,this._drawCount=o,Pc(t)&&(i=0,o=a.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=a;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(a,i,o,e)}updateElements(e,t,n,a){const r="reset"===a,{iScale:s,vScale:i,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,a),u=s.axis,h=i.axis,{spanGaps:m,segment:f}=this.options,p=ic(m)?m:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||"none"===a,x=t+n,b=e.length;let v=t>0&&this.getParsed(t-1);for(let y=0;y<b;++y){const n=e[y],m=g?n:{};if(y<t||y>=x){m.skip=!0;continue}const b=this.getParsed(y),w=kl(b[h]),j=m[u]=s.getPixelForValue(b[u],y),N=m[h]=r||w?i.getBasePixel():i.getPixelForValue(o?this.applyStack(i,b,o):b[h],y);m.skip=isNaN(j)||isNaN(N)||w,m.stop=y>0&&Math.abs(b[u]-v[u])>p,f&&(m.parsed=b,m.raw=l.data[y]),d&&(m.options=c||this.resolveDataElementOptions(y,n.active?"active":a)),g||this.updateElement(n,y,m,a),v=b}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,a=e.data||[];if(!a.length)return n;const r=a[0].size(this.resolveDataElementOptions(0)),s=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(n,r,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,Ho.A)(Wu,"id","line"),(0,Ho.A)(Wu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,Ho.A)(Wu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Hu extends Eu{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,a=n.data.labels||[],r=Bc(t._parsed[e].r,n.options.locale);return{label:a[e]||"",value:r}}parseObjectData(e,t,n,a){return Md.bind(this)(e,t,n,a)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const a=this.getParsed(n).r;!isNaN(a)&&this.chart.getDataVisibility(n)&&(a<t.min&&(t.min=a),a>t.max&&(t.max=a))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,a=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(a/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,a){const r="reset"===a,s=this.chart,i=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,d=o.getIndexAngle(0)-.5*$l;let u,h=d;const m=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,a,m);for(u=t;u<t+n;u++){const t=e[u];let n=h,f=h+this._computeAngle(u,a,m),p=s.getDataVisibility(u)?o.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=f,r&&(i.animateScale&&(p=0),i.animateRotate&&(n=f=d));const g={x:l,y:c,innerRadius:0,outerRadius:p,startAngle:n,endAngle:f,options:this.resolveDataElementOptions(u,t.active?"active":a)};this.updateElement(t,u,g,a)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?lc(this.resolveDataElementOptions(e,t).angle||n):0}}(0,Ho.A)(Hu,"id","polarArea"),(0,Ho.A)(Hu,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,Ho.A)(Hu,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:a}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:a,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Vu extends Uu{}(0,Ho.A)(Vu,"id","pie"),(0,Ho.A)(Vu,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Yu extends Eu{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,a){return Md.bind(this)(e,t,n,a)}update(e){const t=this._cachedMeta,n=t.dataset,a=t.data||[],r=t.iScale.getLabels();if(n.points=a,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===a.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(a,0,a.length,e)}updateElements(e,t,n,a){const r=this._cachedMeta.rScale,s="reset"===a;for(let i=t;i<t+n;i++){const t=e[i],n=this.resolveDataElementOptions(i,t.active?"active":a),o=r.getPointPositionForValue(i,this.getParsed(i).r),l=s?r.xCenter:o.x,c=s?r.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,i,d,a)}}}(0,Ho.A)(Yu,"id","radar"),(0,Ho.A)(Yu,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,Ho.A)(Yu,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class Gu extends Eu{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:a,yScale:r}=t,s=this.getParsed(e),i=a.getLabelForValue(s.x),o=r.getLabelForValue(s.y);return{label:n[e]||"",value:"("+i+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,a=this.chart._animationsDisabled;let{start:r,count:s}=Ac(t,n,a);if(this._drawStart=r,this._drawCount=s,Pc(t)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const i=this.resolveDatasetElementOptions(e);i.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:i},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,a){const r="reset"===a,{iScale:s,vScale:i,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,a),d=this.getSharedOptions(c),u=this.includeOptions(a,d),h=s.axis,m=i.axis,{spanGaps:f,segment:p}=this.options,g=ic(f)?f:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||r||"none"===a;let b=t>0&&this.getParsed(t-1);for(let v=t;v<t+n;++v){const t=e[v],n=this.getParsed(v),c=x?t:{},f=kl(n[m]),y=c[h]=s.getPixelForValue(n[h],v),w=c[m]=r||f?i.getBasePixel():i.getPixelForValue(o?this.applyStack(i,n,o):n[m],v);c.skip=isNaN(y)||isNaN(w)||f,c.stop=v>0&&Math.abs(n[h]-b[h])>g,p&&(c.parsed=n,c.raw=l.data[v]),u&&(c.options=d||this.resolveDataElementOptions(v,t.active?"active":a)),x||this.updateElement(t,v,c,a),b=n}this.updateSharedOptions(d,a,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,a=n.options&&n.options.borderWidth||0;if(!t.length)return a;const r=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(a,r,s)/2}}(0,Ho.A)(Gu,"id","scatter"),(0,Ho.A)(Gu,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,Ho.A)(Gu,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var $u=Object.freeze({__proto__:null,BarController:Bu,BubbleController:qu,DoughnutController:Uu,LineController:Wu,PieController:Vu,PolarAreaController:Hu,RadarController:Yu,ScatterController:Gu});function Xu(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Ku{static override(e){Object.assign(Ku.prototype,e)}constructor(e){(0,Ho.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return Xu()}parse(){return Xu()}format(){return Xu()}add(){return Xu()}diff(){return Xu()}startOf(){return Xu()}endOf(){return Xu()}}var Ju=Ku;function Qu(e,t,n,a){const{controller:r,data:s,_sorted:i}=e,o=r._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&i&&s.length){const i=o._reversePixels?yc:vc;if(!a){const a=i(s,t,n);if(l){const{vScale:t}=r._cachedMeta,{_parsed:n}=e,s=n.slice(0,a.lo+1).reverse().findIndex((e=>!kl(e[t.axis])));a.lo-=Math.max(0,s);const i=n.slice(a.hi).findIndex((e=>!kl(e[t.axis])));a.hi+=Math.max(0,i)}return a}if(r._sharedOptions){const e=s[0],a="function"===typeof e.getRange&&e.getRange(t);if(a){const e=i(s,t,n-a),r=i(s,t,n+a);return{lo:e.lo,hi:r.hi}}}}return{lo:0,hi:s.length-1}}function Zu(e,t,n,a,r){const s=e.getSortedVisibleDatasetMetas(),i=n[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:n}=s[o],{lo:l,hi:c}=Qu(s[o],t,i,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||a(r,e,t)}}}function eh(e,t,n,a,r){const s=[];if(!r&&!e.isPointInArea(t))return s;return Zu(e,n,t,(function(n,i,o){(r||td(n,e.chartArea,0))&&n.inRange(t.x,t.y,a)&&s.push({element:n,datasetIndex:i,index:o})}),!0),s}function th(e,t,n,a,r,s){let i=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,a){const r=t?Math.abs(e.x-a.x):0,s=n?Math.abs(e.y-a.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return Zu(e,n,t,(function(n,c,d){const u=n.inRange(t.x,t.y,r);if(a&&!u)return;const h=n.getCenterPoint(r);if(!(!!s||e.isPointInArea(h))&&!u)return;const m=o(t,h);m<l?(i=[{element:n,datasetIndex:c,index:d}],l=m):m===l&&i.push({element:n,datasetIndex:c,index:d})})),i}function nh(e,t,n,a,r,s){return s||e.isPointInArea(t)?"r"!==n||a?th(e,t,n,a,r,s):function(e,t,n,a){let r=[];return Zu(e,n,t,(function(e,n,s){const{startAngle:i,endAngle:o}=e.getProps(["startAngle","endAngle"],a),{angle:l}=uc(e,{x:t.x,y:t.y});pc(l,i,o)&&r.push({element:e,datasetIndex:n,index:s})})),r}(e,t,n,r):[]}function ah(e,t,n,a,r){const s=[],i="x"===n?"inXRange":"inYRange";let o=!1;return Zu(e,n,t,((e,a,l)=>{e[i]&&e[i](t[n],r)&&(s.push({element:e,datasetIndex:a,index:l}),o=o||e.inRange(t.x,t.y,r))})),a&&!o?[]:s}var rh={evaluateInteractionItems:Zu,modes:{index(e,t,n,a){const r=Gd(t,e),s=n.axis||"x",i=n.includeInvisible||!1,o=n.intersect?eh(e,r,s,a,i):nh(e,r,s,!1,a,i),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,a){const r=Gd(t,e),s=n.axis||"xy",i=n.includeInvisible||!1;let o=n.intersect?eh(e,r,s,a,i):nh(e,r,s,!1,a,i);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,a)=>eh(e,Gd(t,e),n.axis||"xy",a,n.includeInvisible||!1),nearest(e,t,n,a){const r=Gd(t,e),s=n.axis||"xy",i=n.includeInvisible||!1;return nh(e,r,s,n.intersect,a,i)},x:(e,t,n,a)=>ah(e,Gd(t,e),"x",n.intersect,a),y:(e,t,n,a)=>ah(e,Gd(t,e),"y",n.intersect,a)}};const sh=["left","top","right","bottom"];function ih(e,t){return e.filter((e=>e.pos===t))}function oh(e,t){return e.filter((e=>-1===sh.indexOf(e.pos)&&e.box.axis===t))}function lh(e,t){return e.sort(((e,n)=>{const a=t?n:e,r=t?e:n;return a.weight===r.weight?a.index-r.index:a.weight-r.weight}))}function ch(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:a,stackWeight:r}=n;if(!e||!sh.includes(a))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}(e),{vBoxMaxWidth:a,hBoxMaxHeight:r}=t;let s,i,o;for(s=0,i=e.length;s<i;++s){o=e[s];const{fullSize:i}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*a:i&&t.availableWidth,o.height=r):(o.width=a,o.height=c?c*r:i&&t.availableHeight)}return n}function dh(e,t,n,a){return Math.max(e[n],t[n])+Math.max(e[a],t[a])}function uh(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function hh(e,t,n,a){const{pos:r,box:s}=n,i=e.maxPadding;if(!Al(r)){n.size&&(e[r]-=n.size);const t=a[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[r]+=n.size}s.getPadding&&uh(i,s.getPadding());const o=Math.max(0,t.outerWidth-dh(i,e,"left","right")),l=Math.max(0,t.outerHeight-dh(i,e,"top","bottom")),c=o!==e.w,d=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function mh(e,t){const n=t.maxPadding;function a(e){const a={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{a[e]=Math.max(t[e],n[e])})),a}return a(e?["left","right"]:["top","bottom"])}function fh(e,t,n,a){const r=[];let s,i,o,l,c,d;for(s=0,i=e.length,c=0;s<i;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,mh(o.horizontal,t));const{same:i,other:u}=hh(t,n,o,a);c|=i&&r.length,d=d||u,l.fullSize||r.push(o)}return c&&fh(r,t,n,a)||d}function ph(e,t,n,a,r){e.top=n,e.left=t,e.right=t+a,e.bottom=n+r,e.width=a,e.height=r}function gh(e,t,n,a){const r=n.padding;let{x:s,y:i}=t;for(const o of e){const e=o.box,l=a[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const a=t.w*c,s=l.size||e.height;Vl(l.start)&&(i=l.start),e.fullSize?ph(e,r.left,i,n.outerWidth-r.right-r.left,s):ph(e,t.left+l.placed,i,a,s),l.start=i,l.placed+=a,i=e.bottom}else{const a=t.h*c,i=l.size||e.width;Vl(l.start)&&(s=l.start),e.fullSize?ph(e,s,r.top,i,n.outerHeight-r.bottom-r.top):ph(e,s,t.top+l.placed,i,a),l.start=s,l.placed+=a,s=e.right}}t.x=s,t.y=i}var xh={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,a){if(!e)return;const r=gd(e.options.layout.padding),s=Math.max(t-r.width,0),i=Math.max(n-r.height,0),o=function(e){const t=function(e){const t=[];let n,a,r,s,i,o;for(n=0,a=(e||[]).length;n<a;++n)r=e[n],({position:s,options:{stack:i,stackWeight:o=1}}=r),t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:i&&s+i,stackWeight:o});return t}(e),n=lh(t.filter((e=>e.box.fullSize)),!0),a=lh(ih(t,"left"),!0),r=lh(ih(t,"right")),s=lh(ih(t,"top"),!0),i=lh(ih(t,"bottom")),o=oh(t,"x"),l=oh(t,"y");return{fullSize:n,leftAndTop:a.concat(s),rightAndBottom:r.concat(l).concat(i).concat(o),chartArea:ih(t,"chartArea"),vertical:a.concat(r).concat(l),horizontal:s.concat(i).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;Ol(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const d=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:i,vBoxMaxWidth:s/2/d,hBoxMaxHeight:i/2}),h=Object.assign({},r);uh(h,gd(a));const m=Object.assign({maxPadding:h,w:s,h:i,x:r.left,y:r.top},r),f=ch(l.concat(c),u);fh(o.fullSize,m,u,f),fh(l,m,u,f),fh(c,m,u,f)&&fh(l,m,u,f),function(e){const t=e.maxPadding;function n(n){const a=Math.max(t[n]-e[n],0);return e[n]+=a,a}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(m),gh(o.leftAndTop,m,u,f),m.x+=m.w,m.y+=m.h,gh(o.rightAndBottom,m,u,f),e.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ol(o.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})}))}};class bh{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,a){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,a?Math.floor(t/a):n)}}isAttached(e){return!0}updateConfig(e){}}class vh extends bh{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const yh="$chartjs",wh={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},jh=e=>null===e||""===e;const Nh=!!Jd&&{passive:!0};function _h(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,Nh)}function Sh(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function kh(e,t,n){const a=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Sh(n.addedNodes,a),t=t&&!Sh(n.removedNodes,a);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function Ch(e,t,n){const a=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||Sh(n.removedNodes,a),t=t&&!Sh(n.addedNodes,a);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const Ah=new Map;let Ph=0;function Lh(){const e=window.devicePixelRatio;e!==Ph&&(Ph=e,Ah.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function Eh(e,t,n){const a=e.canvas,r=a&&Ud(a);if(!r)return;const s=Sc(((e,t)=>{const a=r.clientWidth;n(e,t),a<r.clientWidth&&n()}),window),i=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,a=t.contentRect.height;0===n&&0===a||s(n,a)}));return i.observe(r),function(e,t){Ah.size||window.addEventListener("resize",Lh),Ah.set(e,t)}(e,s),i}function Dh(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){Ah.delete(e),Ah.size||window.removeEventListener("resize",Lh)}(e)}function Mh(e,t,n){const a=e.canvas,r=Sc((t=>{null!==e.ctx&&n(function(e,t){const n=wh[e.type]||e.type,{x:a,y:r}=Gd(e,t);return{type:n,chart:t,native:e,x:void 0!==a?a:null,y:void 0!==r?r:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,Nh)}(a,t,r),r}class Oh extends bh{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,a=e.getAttribute("height"),r=e.getAttribute("width");if(e[yh]={initial:{height:a,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",jh(r)){const t=Qd(e,"width");void 0!==t&&(e.width=t)}if(jh(a))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Qd(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[yh])return!1;const n=t[yh].initial;["height","width"].forEach((e=>{const a=n[e];kl(a)?t.removeAttribute(e):t.setAttribute(e,a)}));const a=n.style||{};return Object.keys(a).forEach((e=>{t.style[e]=a[e]})),t.width=t.width,delete t[yh],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const a=e.$proxies||(e.$proxies={}),r={attach:kh,detach:Ch,resize:Eh}[t]||Mh;a[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),a=n[t];if(!a)return;({attach:Dh,detach:Dh,resize:Dh}[t]||_h)(e,t,a),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,a){return Xd(e,t,n,a)}isAttached(e){const t=e&&Ud(e);return!(!t||!t.isConnected)}}class Th{constructor(){(0,Ho.A)(this,"x",void 0),(0,Ho.A)(this,"y",void 0),(0,Ho.A)(this,"active",!1),(0,Ho.A)(this,"options",void 0),(0,Ho.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return ic(this.x)&&ic(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const a={};return e.forEach((e=>{a[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),a}}function Rh(e,t){const n=e.options.ticks,a=function(e){const t=e.options.offset,n=e._tickSize(),a=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(a,r))}(e),r=Math.min(n.maxTicksLimit||a,a),s=n.major.enabled?function(e){const t=[];let n,a;for(n=0,a=e.length;n<a;n++)e[n].major&&t.push(n);return t}(t):[],i=s.length,o=s[0],l=s[i-1],c=[];if(i>r)return function(e,t,n,a){let r,s=0,i=n[0];for(a=Math.ceil(a),r=0;r<e.length;r++)r===i&&(t.push(e[r]),s++,i=n[s*a])}(t,c,s,i/r),c;const d=function(e,t,n){const a=function(e){const t=e.length;let n,a;if(t<2)return!1;for(a=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==a)return!1;return a}(e),r=t.length/n;if(!a)return Math.max(r,1);const s=function(e){const t=[],n=Math.sqrt(e);let a;for(a=1;a<n;a++)e%a===0&&(t.push(a),t.push(e/a));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(a);for(let i=0,o=s.length-1;i<o;i++){const e=s[i];if(e>r)return e}return Math.max(r,1)}(s,t,r);if(i>0){let e,n;const a=i>1?Math.round((l-o)/(i-1)):null;for(Ih(t,c,d,kl(a)?0:o-a,o),e=0,n=i-1;e<n;e++)Ih(t,c,d,s[e],s[e+1]);return Ih(t,c,d,l,kl(a)?t.length:l+a),c}return Ih(t,c,d),c}function Ih(e,t,n,a,r){const s=El(a,0),i=Math.min(El(r,e.length),e.length);let o,l,c,d=0;for(n=Math.ceil(n),r&&(o=r-a,n=o/Math.floor(o/n)),c=s;c<0;)d++,c=Math.round(s+d*n);for(l=Math.max(s,0);l<i;l++)l===c&&(t.push(e[l]),d++,c=Math.round(s+d*n))}(0,Ho.A)(Th,"defaults",{}),(0,Ho.A)(Th,"defaultRoutes",void 0);const Fh=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,zh=(e,t)=>Math.min(t||e,e);function Bh(e,t){const n=[],a=e.length/t,r=e.length;let s=0;for(;s<r;s+=a)n.push(e[Math.floor(s)]);return n}function qh(e,t,n){const a=e.ticks.length,r=Math.min(t,a-1),s=e._startPixel,i=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===a?Math.max(c-s,i-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<s-o||c>i+o)))return c}function Uh(e){return e.drawTicks?e.tickLength:0}function Wh(e,t){if(!e.display)return 0;const n=xd(e.font,t),a=gd(e.padding);return(Cl(e.text)?e.text.length:1)*n.lineHeight+a.height}function Hh(e,t,n){let a=kc(e);return(n&&"right"!==t||!n&&"right"===t)&&(a=(e=>"left"===e?"right":"right"===e?"left":e)(a)),a}class Vh extends Th{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:a}=this;return e=Ll(e,Number.POSITIVE_INFINITY),t=Ll(t,Number.NEGATIVE_INFINITY),n=Ll(n,Number.POSITIVE_INFINITY),a=Ll(a,Number.NEGATIVE_INFINITY),{min:Ll(e,n),max:Ll(t,a),minDefined:Pl(e),maxDefined:Pl(t)}}getMinMax(e){let t,{min:n,max:a,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:a};const i=this.getMatchingVisibleMetas();for(let o=0,l=i.length;o<l;++o)t=i[o].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(a=Math.max(a,t.max));return n=s&&n>a?a:n,a=r&&n>a?n:a,{min:Ll(n,Ll(a,n)),max:Ll(a,Ll(n,a))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ml(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:a,grace:r,ticks:s}=this.options,i=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:a,max:r}=e,s=Dl(t,(r-a)/2),i=(e,t)=>n&&0===e?0:e+t;return{min:i(a,-Math.abs(s)),max:i(r,s)}}(this,r,a),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=i<this.ticks.length;this._convertTicksToLabels(o?Bh(this.ticks,i):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Rh(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ml(this.options.afterUpdate,[this])}beforeSetDimensions(){Ml(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ml(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ml(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ml(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,a,r;for(n=0,a=e.length;n<a;n++)r=e[n],r.label=Ml(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){Ml(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ml(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=zh(this.ticks.length,e.ticks.maxTicksLimit),a=t.minRotation||0,r=t.maxRotation;let s,i,o,l=a;if(!this._isVisible()||!t.display||a>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=a);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=gc(this.chart.width-d,0,this.maxWidth);s=e.offset?this.maxWidth/n:h/(n-1),d+6>s&&(s=h/(n-(e.offset?.5:1)),i=this.maxHeight-Uh(e.grid)-t.padding-Wh(e.title,this.chart.options.font),o=Math.sqrt(d*d+u*u),l=cc(Math.min(Math.asin(gc((c.highest.height+6)/s,-1,1)),Math.asin(gc(i/o,-1,1))-Math.asin(gc(u/o,-1,1)))),l=Math.max(a,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){Ml(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ml(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:a,grid:r}}=this,s=this._isVisible(),i=this.isHorizontal();if(s){const s=Wh(a,t.options.font);if(i?(e.width=this.maxWidth,e.height=Uh(r)+s):(e.height=this.maxHeight,e.width=Uh(r)+s),n.display&&this.ticks.length){const{first:t,last:a,widest:r,highest:s}=this._getLabelSizes(),o=2*n.padding,l=lc(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(i){const t=n.mirror?0:d*r.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*r.width+d*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,a,d,c)}}this._handleMargins(),i?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,a){const{ticks:{align:r,padding:s},position:i}=this.options,o=0!==this.labelRotation,l="top"!==i&&"x"===this.axis;if(this.isHorizontal()){const i=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;o?l?(d=a*e.width,u=n*t.height):(d=n*e.height,u=a*t.width):"start"===r?u=t.width:"end"===r?d=e.width:"inner"!==r&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-i+s)*this.width/(this.width-i),0),this.paddingRight=Math.max((u-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,a=e.height/2;"start"===r?(n=0,a=e.height):"end"===r&&(n=t.height,a=0),this.paddingTop=n+s,this.paddingBottom=a+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ml(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)kl(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=Bh(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:a,_longestTextCache:r}=this,s=[],i=[],o=Math.floor(t/zh(t,n));let l,c,d,u,h,m,f,p,g,x,b,v=0,y=0;for(l=0;l<t;l+=o){if(u=e[l].label,h=this._resolveTickFontOptions(l),a.font=m=h.string,f=r[m]=r[m]||{data:{},gc:[]},p=h.lineHeight,g=x=0,kl(u)||Cl(u)){if(Cl(u))for(c=0,d=u.length;c<d;++c)b=u[c],kl(b)||Cl(b)||(g=Xc(a,f.data,f.gc,g,b),x+=p)}else g=Xc(a,f.data,f.gc,g,u),x=p;s.push(g),i.push(x),v=Math.max(g,v),y=Math.max(x,y)}!function(e,t){Ol(e,(e=>{const n=e.gc,a=n.length/2;let r;if(a>t){for(r=0;r<a;++r)delete e.data[n[r]];n.splice(0,a)}}))}(r,t);const w=s.indexOf(v),j=i.indexOf(y),N=e=>({width:s[e]||0,height:i[e]||0});return{first:N(0),last:N(t-1),widest:N(w),highest:N(j),widths:s,heights:i}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function(e){return gc(e,-32768,32767)}(this._alignToPixels?Jc(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return vd(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=vd(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=lc(this.labelRotation),n=Math.abs(Math.cos(t)),a=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,i=r?r.widest.width+s:0,o=r?r.highest.height+s:0;return this.isHorizontal()?o*n>i*a?i/n:o/a:o*a<i*n?o/n:i/a}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,a=this.options,{grid:r,position:s,border:i}=a,o=r.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),d=Uh(r),u=[],h=i.setContext(this.getContext()),m=h.display?h.width:0,f=m/2,p=function(e){return Jc(n,e,m)};let g,x,b,v,y,w,j,N,_,S,k,C;if("top"===s)g=p(this.bottom),w=this.bottom-d,N=g-f,S=p(e.top)+f,C=e.bottom;else if("bottom"===s)g=p(this.top),S=e.top,C=p(e.bottom)-f,w=g+f,N=this.top+d;else if("left"===s)g=p(this.right),y=this.right-d,j=g-f,_=p(e.left)+f,k=e.right;else if("right"===s)g=p(this.left),_=e.left,k=p(e.right)-f,y=g+f,j=this.left+d;else if("x"===t){if("center"===s)g=p((e.top+e.bottom)/2+.5);else if(Al(s)){const e=Object.keys(s)[0],t=s[e];g=p(this.chart.scales[e].getPixelForValue(t))}S=e.top,C=e.bottom,w=g+f,N=w+d}else if("y"===t){if("center"===s)g=p((e.left+e.right)/2);else if(Al(s)){const e=Object.keys(s)[0],t=s[e];g=p(this.chart.scales[e].getPixelForValue(t))}y=g-f,j=y-d,_=e.left,k=e.right}const A=El(a.ticks.maxTicksLimit,c),P=Math.max(1,Math.ceil(c/A));for(x=0;x<c;x+=P){const e=this.getContext(x),t=r.setContext(e),a=i.setContext(e),s=t.lineWidth,c=t.color,d=a.dash||[],h=a.dashOffset,m=t.tickWidth,f=t.tickColor,p=t.tickBorderDash||[],g=t.tickBorderDashOffset;b=qh(this,x,o),void 0!==b&&(v=Jc(n,b,s),l?y=j=_=k=v:w=N=S=C=v,u.push({tx1:y,ty1:w,tx2:j,ty2:N,x1:_,y1:S,x2:k,y2:C,width:s,color:c,borderDash:d,borderDashOffset:h,tickWidth:m,tickColor:f,tickBorderDash:p,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,u}_computeLabelItems(e){const t=this.axis,n=this.options,{position:a,ticks:r}=n,s=this.isHorizontal(),i=this.ticks,{align:o,crossAlign:l,padding:c,mirror:d}=r,u=Uh(n.grid),h=u+c,m=d?-c:h,f=-lc(this.labelRotation),p=[];let g,x,b,v,y,w,j,N,_,S,k,C,A="middle";if("top"===a)w=this.bottom-m,j=this._getXAxisLabelAlignment();else if("bottom"===a)w=this.top+m,j=this._getXAxisLabelAlignment();else if("left"===a){const e=this._getYAxisLabelAlignment(u);j=e.textAlign,y=e.x}else if("right"===a){const e=this._getYAxisLabelAlignment(u);j=e.textAlign,y=e.x}else if("x"===t){if("center"===a)w=(e.top+e.bottom)/2+h;else if(Al(a)){const e=Object.keys(a)[0],t=a[e];w=this.chart.scales[e].getPixelForValue(t)+h}j=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===a)y=(e.left+e.right)/2-h;else if(Al(a)){const e=Object.keys(a)[0],t=a[e];y=this.chart.scales[e].getPixelForValue(t)}j=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===o?A="top":"end"===o&&(A="bottom"));const P=this._getLabelSizes();for(g=0,x=i.length;g<x;++g){b=i[g],v=b.label;const e=r.setContext(this.getContext(g));N=this.getPixelForTick(g)+r.labelOffset,_=this._resolveTickFontOptions(g),S=_.lineHeight,k=Cl(v)?v.length:1;const t=k/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let u,h=j;if(s?(y=N,"inner"===j&&(h=g===x-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),C="top"===a?"near"===l||0!==f?-k*S+S/2:"center"===l?-P.highest.height/2-t*S+S:-P.highest.height+S/2:"near"===l||0!==f?S/2:"center"===l?P.highest.height/2-t*S:P.highest.height-k*S,d&&(C*=-1),0===f||e.showLabelBackdrop||(y+=S/2*Math.sin(f))):(w=N,C=(1-k)*S/2),e.showLabelBackdrop){const t=gd(e.backdropPadding),n=P.heights[g],a=P.widths[g];let r=C-t.top,s=0-t.left;switch(A){case"middle":r-=n/2;break;case"bottom":r-=n}switch(j){case"center":s-=a/2;break;case"right":s-=a;break;case"inner":g===x-1?s-=a:g>0&&(s-=a/2)}u={left:s,top:r,width:a+t.width,height:n+t.height,color:e.backdropColor}}p.push({label:v,font:_,textOffset:C,options:{rotation:f,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:A,translation:[y,w],backdrop:u}})}return p}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-lc(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:a,padding:r}}=this.options,s=e+r,i=this._getLabelSizes().widest.width;let o,l;return"left"===t?a?(l=this.right+r,"near"===n?o="left":"center"===n?(o="center",l+=i/2):(o="right",l+=i)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=i/2):(o="left",l=this.left)):"right"===t?a?(l=this.left+r,"near"===n?o="right":"center"===n?(o="center",l-=i/2):(o="left",l-=i)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=i/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:a,width:r,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,a,r,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,a=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const i=(e,t,a)=>{a.width&&a.color&&(n.save(),n.lineWidth=a.width,n.strokeStyle=a.color,n.setLineDash(a.borderDash||[]),n.lineDashOffset=a.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,s=a.length;r<s;++r){const e=a[r];t.drawOnChartArea&&i({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&i({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:a}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const i=a.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=Jc(e,this.left,s)-s/2,c=Jc(e,this.right,i)+i/2,d=u=o):(d=Jc(e,this.top,s)-s/2,u=Jc(e,this.bottom,i)+i/2,l=c=o),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&nd(t,n);const a=this.getLabelItems(e);for(const r of a){const e=r.options,n=r.font;ld(t,r.label,0,r.textOffset,n,e)}n&&ad(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:a}}=this;if(!n.display)return;const r=xd(n.font),s=gd(n.padding),i=n.align;let o=r.lineHeight/2;"bottom"===t||"center"===t||Al(t)?(o+=s.bottom,Cl(n.text)&&(o+=r.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,n,a){const{top:r,left:s,bottom:i,right:o,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,m,f=0;const p=i-r,g=o-s;if(e.isHorizontal()){if(h=Cc(a,s,o),Al(n)){const e=Object.keys(n)[0],a=n[e];m=d[e].getPixelForValue(a)+p-t}else m="center"===n?(c.bottom+c.top)/2+p-t:Fh(e,n,t);u=o-s}else{if(Al(n)){const e=Object.keys(n)[0],a=n[e];h=d[e].getPixelForValue(a)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:Fh(e,n,t);m=Cc(a,i,r),f="left"===n?-Zl:Zl}return{titleX:h,titleY:m,maxWidth:u,rotation:f}}(this,o,t,i);ld(e,n.text,0,0,r,{color:n.color,maxWidth:d,rotation:u,textAlign:Hh(i,t,a),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=El(e.grid&&e.grid.z,-1),a=El(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Vh.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:a,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",a=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];s[n]!==this.id||e&&s.type!==e||a.push(s)}return a}_resolveTickFontOptions(e){return xd(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Yh{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const a=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in a||(a[r]=e,function(e,t,n){const a=zl(Object.create(null),[n?$c.get(n):{},$c.get(t),e.defaults]);$c.set(t,a),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const a=n.split("."),r=a.pop(),s=[e].concat(a).join("."),i=t[n].split("."),o=i.pop(),l=i.join(".");$c.route(s,r,l,o)}))}(t,e.defaultRoutes);e.descriptors&&$c.describe(t,e.descriptors)}(e,s,n),this.override&&$c.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,a=this.scope;n in t&&delete t[n],a&&n in $c[a]&&(delete $c[a][n],this.override&&delete Wc[n])}}class Gh{constructor(){this.controllers=new Yh(Eu,"datasets",!0),this.elements=new Yh(Th,"elements"),this.plugins=new Yh(Object,"plugins"),this.scales=new Yh(Vh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const a=n||this._getRegistryForType(t);n||a.isForType(t)||a===this.plugins&&t.id?this._exec(e,a,t):Ol(t,(t=>{const a=n||this._getRegistryForType(t);this._exec(e,a,t)}))}))}_exec(e,t,n){const a=Hl(e);Ml(n["before"+a],[],n),t[e](n),Ml(n["after"+a],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const a=t.get(e);if(void 0===a)throw new Error('"'+e+'" is not a registered '+n+".");return a}}var $h=new Gh;class Xh{constructor(){this._init=[]}notify(e,t,n,a){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=a?this._descriptors(e).filter(a):this._descriptors(e),s=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,a){a=a||{};for(const r of e){const e=r.plugin;if(!1===Ml(e[n],[t,a,r.options],e)&&a.cancelable)return!1}return!0}invalidate(){kl(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,a=El(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],a=Object.keys($h.plugins.items);for(let s=0;s<a.length;s++)n.push($h.getPlugin(a[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const e=r[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==a||t?function(e,t,n,a){let{plugins:r,localIds:s}=t;const i=[],o=e.getContext();for(const l of r){const t=l.id,r=Kh(n[t],a);null!==r&&i.push({plugin:l,options:Jh(e.config,{plugin:l,local:s[t]},r,o)})}return i}(e,r,a,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,a=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(a(t,n),e,"stop"),this._notify(a(n,t),e,"start")}}function Kh(e,t){return t||!1!==e?!0===e?{}:e:null}function Jh(e,t,n,a){let{plugin:r,local:s}=t;const i=e.pluginScopeKeys(r),o=e.getOptionScopes(n,i);return s&&r.defaults&&o.push(r.defaults),e.createResolver(o,a,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Qh(e,t){const n=$c.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Zh(e){if("x"===e||"y"===e||"r"===e)return e}function em(e){if(Zh(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];for(const s of n){const t=s.axis||("top"===(r=s.position)||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0)||e.length>1&&Zh(e[0].toLowerCase());if(t)return t}var r;throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function tm(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function nm(e,t){const n=Wc[e.type]||{scales:{}},a=t.scales||{},r=Qh(e.type,t),s=Object.create(null);return Object.keys(a).forEach((t=>{const i=a[t];if(!Al(i))return console.error("Invalid scale configuration for scale: ".concat(t));if(i._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=em(t,i,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return tm(e,"x",n[0])||tm(e,"y",n[0])}return{}}(t,e),$c.scales[i.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,r),c=n.scales||{};s[t]=Bl(Object.create(null),[{axis:o},i,c[o],c[l]])})),e.data.datasets.forEach((n=>{const r=n.type||e.type,i=n.indexAxis||Qh(r,t),o=(Wc[r]||{}).scales||{};Object.keys(o).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,i),r=n[t+"AxisID"]||t;s[r]=s[r]||Object.create(null),Bl(s[r],[{axis:t},a[r],o[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];Bl(t,[$c.scales[t.type],$c.scale])})),s}function am(e){const t=e.options||(e.options={});t.plugins=El(t.plugins,{}),t.scales=nm(e,t)}function rm(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const sm=new Map,im=new Set;function om(e,t){let n=sm.get(e);return n||(n=t(),sm.set(e,n),im.add(n)),n}const lm=(e,t,n)=>{const a=Wl(t,n);void 0!==a&&e.add(a)};class cm{constructor(e){this._config=function(e){return(e=e||{}).data=rm(e.data),am(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=rm(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),am(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return om(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return om("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return om("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return om("".concat(n,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let a=n.get(e);return a&&!t||(a=new Map,n.set(e,a)),a}getOptionScopes(e,t,n){const{options:a,type:r}=this,s=this._cachedScopes(e,n),i=s.get(t);if(i)return i;const o=new Set;t.forEach((t=>{e&&(o.add(e),t.forEach((t=>lm(o,e,t)))),t.forEach((e=>lm(o,a,e))),t.forEach((e=>lm(o,Wc[r]||{},e))),t.forEach((e=>lm(o,$c,e))),t.forEach((e=>lm(o,Hc,e)))}));const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),im.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Wc[t]||{},$c.datasets[t]||{},{type:t},$c,Hc]}resolveNamedOptions(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:i}=dm(this._resolverCache,e,a);let o=s;if(function(e,t){const{isScriptable:n,isIndexable:a}=jd(e);for(const r of t){const t=n(r),s=a(r),i=(s||t)&&e[r];if(t&&(Yl(i)||um(i))||s&&Cl(i))return!0}return!1}(s,t)){r.$shared=!1;o=wd(s,n=Yl(n)?n():n,this.createResolver(e,n,i))}for(const l of t)r[l]=o[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],a=arguments.length>3?arguments[3]:void 0;const{resolver:r}=dm(this._resolverCache,e,n);return Al(t)?wd(r,t,void 0,a):r}}function dm(e,t,n){let a=e.get(t);a||(a=new Map,e.set(t,a));const r=n.join();let s=a.get(r);if(!s){s={resolver:yd(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},a.set(r,s)}return s}const um=e=>Al(e)&&Object.getOwnPropertyNames(e).some((t=>Yl(e[t])));const hm=["top","bottom","left","right","chartArea"];function mm(e,t){return"top"===e||"bottom"===e||-1===hm.indexOf(e)&&"x"===t}function fm(e,t){return function(n,a){return n[e]===a[e]?n[t]-a[t]:n[e]-a[e]}}function pm(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Ml(n&&n.onComplete,[e],t)}function gm(e){const t=e.chart,n=t.options.animation;Ml(n&&n.onProgress,[e],t)}function xm(e){return qd()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const bm={},vm=e=>{const t=xm(e);return Object.values(bm).filter((e=>e.canvas===t)).pop()};function ym(e,t,n){const a=Object.keys(e);for(const r of a){const a=+r;if(a>=t){const s=e[r];delete e[r],(n>0||a>t)&&(e[a+n]=s)}}}class wm{static register(){$h.add(...arguments),jm()}static unregister(){$h.remove(...arguments),jm()}constructor(e,t){const n=this.config=new cm(t),a=xm(e),r=vm(a);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!qd()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?vh:Oh}(a)),this.platform.updateConfig(n);const i=this.platform.acquireContext(a,s.aspectRatio),o=i&&i.canvas,l=o&&o.height,c=o&&o.width;this.id=Sl(),this.ctx=i,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Xh,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],bm[this.id]=this,i&&o?(pu.listen(this,"complete",pm),pu.listen(this,"progress",gm),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:a,_aspectRatio:r}=this;return kl(e)?t&&r?r:a?n/a:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return $h}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Kd(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Qc(this.canvas,this.ctx),this}stop(){return pu.stop(this),this}resize(e,t){pu.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,a=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(a,e,t,r),i=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Kd(this,i,!0)&&(this.notifyPlugins("resize",{size:s}),Ml(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){Ol(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,a=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let r=[];t&&(r=r.concat(Object.keys(t).map((e=>{const n=t[e],a=em(e,n),r="r"===a,s="x"===a;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}})))),Ol(r,(t=>{const r=t.options,s=r.id,i=em(s,r),o=El(r.type,t.dtype);void 0!==r.position&&mm(r.position,i)===mm(t.dposition)||(r.position=t.dposition),a[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new($h.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)})),Ol(a,((e,t)=>{e||delete n[t]})),Ol(n,(e=>{xh.configure(this,e,e.options),xh.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(fm("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,a;for(this._removeUnreferencedMetasets(),n=0,a=t.length;n<a;n++){const a=t[n];let r=this.getDatasetMeta(n);const s=a.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=a.indexAxis||Qh(s,this.options),r.order=a.order||0,r.index=n,r.label=""+a.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=$h.getController(s),{datasetElementType:a,dataElementType:i}=$c.datasets[s];Object.assign(t,{dataElementType:$h.getElement(i),datasetElementType:a&&$h.getElement(a)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Ol(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!a&&-1===r.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),a||Ol(r,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(fm("z","_idx"));const{_active:i,_lastEvent:o}=this;o?this._eventHandler(o,!0):i.length&&this._updateHoverStyles(i,i,!0),this.render()}_updateScales(){Ol(this.scales,(e=>{xh.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Gl(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:a,count:r}of t){ym(e,a,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),a=n(0);for(let r=1;r<t;r++)if(!Gl(a,n(r)))return;return Array.from(a).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;xh.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Ol(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Yl(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),a={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",a)&&(n.controller._update(t),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(pu.has(this)?this.attached&&!pu.running(this)&&pu.start(this):(this.draw(),pm({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let a,r;for(a=0,r=t.length;a<r;++a){const r=t[a];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},a=mu(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(a&&nd(t,a),e.controller.draw(),a&&ad(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return td(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,a){const r=rh.modes[t];return"function"===typeof r?r(this,e,n,a):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let a=n.filter((e=>e&&e._dataset===t)).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(a)),a}getContext(){return this.$context||(this.$context=vd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const a=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,a);Vl(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update((t=>t.datasetIndex===e?a:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),pu.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Qc(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete bm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,a)=>{t.addEventListener(this,n,a),e[n]=a},a=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Ol(this.options.events,(e=>n(e,a)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,a)=>{t.addEventListener(this,n,a),e[n]=a},a=(n,a)=>{e[n]&&(t.removeEventListener(this,n,a),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const i=()=>{a("attach",i),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,a("resize",r),this._stop(),this._resize(0,0),n("attach",i)},t.isAttached(this.canvas)?i():s()}unbindEvents(){Ol(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},Ol(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const a=n?"set":"remove";let r,s,i,o;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+a+"DatasetHoverStyle"]()),i=0,o=e.length;i<o;++i){s=e[i];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[a+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const a=this.getDatasetMeta(t);if(!a)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:a.data[n],index:n}}));!Tl(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const a=this.options.hover,r=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=r(t,e),i=n?e:r(e,t);s.length&&this.updateHoverStyle(s,a.mode,!1),i.length&&a.mode&&this.updateHoverStyle(i,a.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},a=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,a))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,a),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:a=[],options:r}=this,s=t,i=this._getActiveElements(e,a,n,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,a){return n&&"mouseout"!==e.type?a?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,Ml(r.onHover,[e,i,this],this),o&&Ml(r.onClick,[e,i,this],this));const c=!Tl(i,a);return(c||t)&&(this._active=i,this._updateHoverStyles(i,a,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,a){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,a)}}function jm(){return Ol(wm.instances,(e=>e._plugins.invalidate()))}function Nm(e,t,n,a){const r=function(e){return md(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),s=(n-t)/2,i=Math.min(s,a*t/2),o=e=>{const t=(n-Math.min(s,e))*a/2;return gc(e,0,Math.min(s,t))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:gc(r.innerStart,0,i),innerEnd:gc(r.innerEnd,0,i)}}function _m(e,t,n,a){return{x:n+e*Math.cos(t),y:a+e*Math.sin(t)}}function Sm(e,t,n,a,r,s){const{x:i,y:o,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+a+n-c,0),h=d>0?d+a+n+c:0;let m=0;const f=r-l;if(a){const e=((d>0?d-a:0)+(u>0?u-a:0))/2;m=(f-(0!==e?f*e/(e+a):f))/2}const p=(f-Math.max(.001,f*u-n/$l)/u)/2,g=l+p+m,x=r-p-m,{outerStart:b,outerEnd:v,innerStart:y,innerEnd:w}=Nm(t,h,u,x-g),j=u-b,N=u-v,_=g+b/j,S=x-v/N,k=h+y,C=h+w,A=g+y/k,P=x-w/C;if(e.beginPath(),s){const t=(_+S)/2;if(e.arc(i,o,u,_,t),e.arc(i,o,u,t,S),v>0){const t=_m(N,S,i,o);e.arc(t.x,t.y,v,S,x+Zl)}const n=_m(C,x,i,o);if(e.lineTo(n.x,n.y),w>0){const t=_m(C,P,i,o);e.arc(t.x,t.y,w,x+Zl,P+Math.PI)}const a=(x-w/h+(g+y/h))/2;if(e.arc(i,o,h,x-w/h,a,!0),e.arc(i,o,h,a,g+y/h,!0),y>0){const t=_m(k,A,i,o);e.arc(t.x,t.y,y,A+Math.PI,g-Zl)}const r=_m(j,g,i,o);if(e.lineTo(r.x,r.y),b>0){const t=_m(j,_,i,o);e.arc(t.x,t.y,b,g-Zl,_)}}else{e.moveTo(i,o);const t=Math.cos(_)*u+i,n=Math.sin(_)*u+o;e.lineTo(t,n);const a=Math.cos(S)*u+i,r=Math.sin(S)*u+o;e.lineTo(a,r)}e.closePath()}function km(e,t,n,a,r){const{fullCircles:s,startAngle:i,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h}=l,m="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,m?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let f=t.endAngle;if(s){Sm(e,t,n,a,f,r);for(let t=0;t<s;++t)e.stroke();isNaN(o)||(f=i+(o%Xl||Xl))}m&&function(e,t,n){const{startAngle:a,pixelMargin:r,x:s,y:i,outerRadius:o,innerRadius:l}=t;let c=r/o;e.beginPath(),e.arc(s,i,o,a-c,n+c),l>r?(c=r/l,e.arc(s,i,l,n+c,a-c,!0)):e.arc(s,i,r,n+Zl,a-Zl),e.closePath(),e.clip()}(e,t,f),s||(Sm(e,t,n,a,f,r),e.stroke())}(0,Ho.A)(wm,"defaults",$c),(0,Ho.A)(wm,"instances",bm),(0,Ho.A)(wm,"overrides",Wc),(0,Ho.A)(wm,"registry",$h),(0,Ho.A)(wm,"version","4.4.9"),(0,Ho.A)(wm,"getChart",vm);class Cm extends Th{constructor(e){super(),(0,Ho.A)(this,"circumference",void 0),(0,Ho.A)(this,"endAngle",void 0),(0,Ho.A)(this,"fullCircles",void 0),(0,Ho.A)(this,"innerRadius",void 0),(0,Ho.A)(this,"outerRadius",void 0),(0,Ho.A)(this,"pixelMargin",void 0),(0,Ho.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const a=this.getProps(["x","y"],n),{angle:r,distance:s}=uc(a,{x:e,y:t}),{startAngle:i,endAngle:o,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,h=El(d,o-i),m=pc(r,i,o)&&i!==o,f=h>=Xl||m,p=xc(s,l+u,c+u);return f&&p}getCenterPoint(e){const{x:t,y:n,startAngle:a,endAngle:r,innerRadius:s,outerRadius:i}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(a+r)/2,d=(s+i+l+o)/2;return{x:t+Math.cos(c)*d,y:n+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,a=(t.offset||0)/4,r=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>Xl?Math.floor(n/Xl):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const i=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(i)*a,Math.sin(i)*a);const o=a*(1-Math.sin(Math.min($l,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,a,r){const{fullCircles:s,startAngle:i,circumference:o}=t;let l=t.endAngle;if(s){Sm(e,t,n,a,l,r);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=i+(o%Xl||Xl))}Sm(e,t,n,a,l,r),e.fill()}(e,this,o,r,s),km(e,this,o,r,s),e.restore()}}function Am(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=El(n.borderCapStyle,t.borderCapStyle),e.setLineDash(El(n.borderDash,t.borderDash)),e.lineDashOffset=El(n.borderDashOffset,t.borderDashOffset),e.lineJoin=El(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=El(n.borderWidth,t.borderWidth),e.strokeStyle=El(n.borderColor,t.borderColor)}function Pm(e,t,n){e.lineTo(n.x,n.y)}function Lm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.length,{start:r=0,end:s=a-1}=n,{start:i,end:o}=t,l=Math.max(r,i),c=Math.min(s,o),d=r<i&&s<i||r>o&&s>o;return{count:a,start:l,loop:t.loop,ilen:c<l&&!d?a+c-l:c-l}}function Em(e,t,n,a){const{points:r,options:s}=t,{count:i,start:o,loop:l,ilen:c}=Lm(r,n,a),d=function(e){return e.stepped?rd:e.tension||"monotone"===e.cubicInterpolationMode?sd:Pm}(s);let u,h,m,{move:f=!0,reverse:p}=a||{};for(u=0;u<=c;++u)h=r[(o+(p?c-u:u))%i],h.skip||(f?(e.moveTo(h.x,h.y),f=!1):d(e,m,h,p,s.stepped),m=h);return l&&(h=r[(o+(p?c:0))%i],d(e,m,h,p,s.stepped)),!!l}function Dm(e,t,n,a){const r=t.points,{count:s,start:i,ilen:o}=Lm(r,n,a),{move:l=!0,reverse:c}=a||{};let d,u,h,m,f,p,g=0,x=0;const b=e=>(i+(c?o-e:e))%s,v=()=>{m!==f&&(e.lineTo(g,f),e.lineTo(g,m),e.lineTo(g,p))};for(l&&(u=r[b(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=r[b(d)],u.skip)continue;const t=u.x,n=u.y,a=0|t;a===h?(n<m?m=n:n>f&&(f=n),g=(x*g+t)/++x):(v(),e.lineTo(t,n),h=a,x=0,m=f=n),p=n}v()}function Mm(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Dm:Em}(0,Ho.A)(Cm,"id","arc"),(0,Ho.A)(Cm,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),(0,Ho.A)(Cm,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,Ho.A)(Cm,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const Om="function"===typeof Path2D;function Tm(e,t,n,a){Om&&!t.options.segment?function(e,t,n,a){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,a)&&r.closePath()),Am(e,t.options),e.stroke(r)}(e,t,n,a):function(e,t,n,a){const{segments:r,options:s}=t,i=Mm(t);for(const o of r)Am(e,s,o.style),e.beginPath(),i(e,t,o,{start:n,end:n+a-1})&&e.closePath(),e.stroke()}(e,t,n,a)}class Rm extends Th{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const a=n.spanGaps?this._loop:this._fullLoop;Bd(this._points,n,e,a,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,a=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:i,end:o}=function(e,t,n,a){let r=0,s=t-1;if(n&&!a)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}(n,r,s,a);return cu(e,!0===a?[{start:i,end:o,loop:s}]:function(e,t,n,a){const r=e.length,s=[];let i,o=t,l=e[t];for(i=t+1;i<=n;++i){const n=e[i%r];n.skip||n.stop?l.skip||(a=!1,s.push({start:t%r,end:(i-1)%r,loop:a}),t=o=n.stop?i:null):(o=i,l.skip&&(t=i)),l=n}return null!==o&&s.push({start:t%r,end:o%r,loop:a}),s}(n,i,o<i?o+r:o,!!e._fullLoop&&0===i&&o===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,a=e[t],r=this.points,s=lu(this,{property:t,start:a,end:a});if(!s.length)return;const i=[],o=function(e){return e.stepped?eu:e.tension||"monotone"===e.cubicInterpolationMode?tu:Zd}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:d}=s[l],u=r[c],h=r[d];if(u===h){i.push(u);continue}const m=o(u,h,Math.abs((a-u[t])/(h[t]-u[t])),n.stepped);m[t]=e[t],i.push(m)}return 1===i.length?i[0]:i}pathSegment(e,t,n){return Mm(this)(e,this,t,n)}path(e,t,n){const a=this.segments,r=Mm(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const i of a)s&=r(e,this,i,{start:t,end:t+n-1});return!!s}draw(e,t,n,a){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),Tm(e,this,n,a),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Im(e,t,n,a){const r=e.options,{[n]:s}=e.getProps([n],a);return Math.abs(t-s)<r.radius+r.hitRadius}(0,Ho.A)(Rm,"id","line"),(0,Ho.A)(Rm,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,Ho.A)(Rm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,Ho.A)(Rm,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Fm extends Th{constructor(e){super(),(0,Ho.A)(this,"parsed",void 0),(0,Ho.A)(this,"skip",void 0),(0,Ho.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const a=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-s,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(e,t){return Im(this,e,"x",t)}inYRange(e,t){return Im(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!td(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,Zc(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function zm(e,t){const{x:n,y:a,base:r,width:s,height:i}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=i/2,o=Math.min(n,r),l=Math.max(n,r),c=a-u,d=a+u):(u=s/2,o=n-u,l=n+u,c=Math.min(a,r),d=Math.max(a,r)),{left:o,top:c,right:l,bottom:d}}function Bm(e,t,n,a){return e?0:gc(t,n,a)}function qm(e){const t=zm(e),n=t.right-t.left,a=t.bottom-t.top,r=function(e,t,n){const a=e.options.borderWidth,r=e.borderSkipped,s=fd(a);return{t:Bm(r.top,s.top,0,n),r:Bm(r.right,s.right,0,t),b:Bm(r.bottom,s.bottom,0,n),l:Bm(r.left,s.left,0,t)}}(e,n/2,a/2),s=function(e,t,n){const{enableBorderRadius:a}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=pd(r),i=Math.min(t,n),o=e.borderSkipped,l=a||Al(r);return{topLeft:Bm(!l||o.top||o.left,s.topLeft,0,i),topRight:Bm(!l||o.top||o.right,s.topRight,0,i),bottomLeft:Bm(!l||o.bottom||o.left,s.bottomLeft,0,i),bottomRight:Bm(!l||o.bottom||o.right,s.bottomRight,0,i)}}(e,n/2,a/2);return{outer:{x:t.left,y:t.top,w:n,h:a,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:a-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Um(e,t,n,a){const r=null===t,s=null===n,i=e&&!(r&&s)&&zm(e,a);return i&&(r||xc(t,i.left,i.right))&&(s||xc(n,i.top,i.bottom))}function Wm(e,t){e.rect(t.x,t.y,t.w,t.h)}function Hm(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-a,i=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+a,y:e.y+r,w:e.w+s,h:e.h+i,radius:e.radius}}(0,Ho.A)(Fm,"id","point"),(0,Ho.A)(Fm,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,Ho.A)(Fm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Vm extends Th{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:a}}=this,{inner:r,outer:s}=qm(this),i=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?cd:Wm;var o;e.save(),s.w===r.w&&s.h===r.h||(e.beginPath(),i(e,Hm(s,t,r)),e.clip(),i(e,Hm(r,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),i(e,Hm(r,t)),e.fillStyle=a,e.fill(),e.restore()}inRange(e,t,n){return Um(this,e,t,n)}inXRange(e,t){return Um(this,e,null,t)}inYRange(e,t){return Um(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:a,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+a)/2:t,y:r?n:(n+a)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,Ho.A)(Vm,"id","bar"),(0,Ho.A)(Vm,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,Ho.A)(Vm,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Ym=Object.freeze({__proto__:null,ArcElement:Cm,BarElement:Vm,LineElement:Rm,PointElement:Fm});const Gm=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],$m=Gm.map((e=>e.replace("rgb(","rgba(").replace(")",", 0.5)")));function Xm(e){return Gm[e%Gm.length]}function Km(e){return $m[e%$m.length]}function Jm(e){let t=0;return(n,a)=>{const r=e.getDatasetMeta(a).controller;r instanceof Uu?t=function(e,t){return e.backgroundColor=e.data.map((()=>Xm(t++))),t}(n,t):r instanceof Hu?t=function(e,t){return e.backgroundColor=e.data.map((()=>Km(t++))),t}(n,t):r&&(t=function(e,t){return e.borderColor=Xm(t),e.backgroundColor=Km(t),++t}(n,t))}}function Qm(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var Zm={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:a},options:r}=e.config,{elements:s}=r,i=Qm(a)||(o=r)&&(o.borderColor||o.backgroundColor)||s&&Qm(s)||"rgba(0,0,0,0.1)"!==$c.borderColor||"rgba(0,0,0,0.1)"!==$c.backgroundColor;var o;if(!n.forceOverride&&i)return;const l=Jm(e);a.forEach(l)}};function ef(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function tf(e){e.data.datasets.forEach((e=>{ef(e)}))}var nf={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled)return void tf(e);const a=e.width;e.data.datasets.forEach(((t,r)=>{const{_data:s,indexAxis:i}=t,o=e.getDatasetMeta(r),l=s||t.data;if("y"===bd([i,e.options.indexAxis]))return;if(!o.controller.supportsDecimation)return;const c=e.scales[o.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(e.options.parsing)return;let{start:d,count:u}=function(e,t){const n=t.length;let a,r=0;const{iScale:s}=e,{min:i,max:o,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=gc(vc(t,s.axis,i).lo,0,n-1)),a=c?gc(vc(t,s.axis,o).hi+1,r,n)-r:n-r,{start:r,count:a}}(o,l);if(u<=(n.threshold||4*a))return void ef(t);let h;switch(kl(s)&&(t._data=l,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":h=function(e,t,n,a,r){const s=r.samples||a;if(s>=n)return e.slice(t,t+n);const i=[],o=(n-2)/(s-2);let l=0;const c=t+n-1;let d,u,h,m,f,p=t;for(i[l++]=e[p],d=0;d<s-2;d++){let a,r=0,s=0;const c=Math.floor((d+1)*o)+1+t,g=Math.min(Math.floor((d+2)*o)+1,n)+t,x=g-c;for(a=c;a<g;a++)r+=e[a].x,s+=e[a].y;r/=x,s/=x;const b=Math.floor(d*o)+1+t,v=Math.min(Math.floor((d+1)*o)+1,n)+t,{x:y,y:w}=e[p];for(h=m=-1,a=b;a<v;a++)m=.5*Math.abs((y-r)*(e[a].y-w)-(y-e[a].x)*(s-w)),m>h&&(h=m,u=e[a],f=a);i[l++]=u,p=f}return i[l++]=e[c],i}(l,d,u,a,n);break;case"min-max":h=function(e,t,n,a){let r,s,i,o,l,c,d,u,h,m,f=0,p=0;const g=[],x=t+n-1,b=e[t].x,v=e[x].x-b;for(r=t;r<t+n;++r){s=e[r],i=(s.x-b)/v*a,o=s.y;const t=0|i;if(t===l)o<h?(h=o,c=r):o>m&&(m=o,d=r),f=(p*f+s.x)/++p;else{const n=r-1;if(!kl(c)&&!kl(d)){const t=Math.min(c,d),a=Math.max(c,d);t!==u&&t!==n&&g.push((0,Ie.A)((0,Ie.A)({},e[t]),{},{x:f})),a!==u&&a!==n&&g.push((0,Ie.A)((0,Ie.A)({},e[a]),{},{x:f}))}r>0&&n!==u&&g.push(e[n]),g.push(s),l=t,p=0,h=m=o,c=d=u=r}}return g}(l,d,u,a);break;default:throw new Error("Unsupported decimation algorithm '".concat(n.algorithm,"'"))}t._decimated=h}))},destroy(e){tf(e)}};function af(e,t,n,a){if(a)return;let r=t[e],s=n[e];return"angle"===e&&(r=fc(r),s=fc(s)),{property:e,start:r,end:s}}function rf(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function sf(e,t,n,a){return e&&t?a(e[n],t[n]):e?e[n]:t?t[n]:0}function of(e,t){let n=[],a=!1;return Cl(e)?(a=!0,n=e):n=function(e,t){const{x:n=null,y:a=null}=e||{},r=t.points,s=[];return t.segments.forEach((e=>{let{start:t,end:i}=e;i=rf(t,i,r);const o=r[t],l=r[i];null!==a?(s.push({x:o.x,y:a}),s.push({x:l.x,y:a})):null!==n&&(s.push({x:n,y:o.y}),s.push({x:n,y:l.y}))})),s}(e,t),n.length?new Rm({points:n,options:{tension:0},_loop:a,_fullLoop:a}):null}function lf(e){return e&&!1!==e.fill}function cf(e,t,n){let a=e[t].fill;const r=[t];let s;if(!n)return a;for(;!1!==a&&-1===r.indexOf(a);){if(!Pl(a))return a;if(s=e[a],!s)return!1;if(s.visible)return a;r.push(a),a=s.fill}return!1}function df(e,t,n){const a=function(e){const t=e.options,n=t.fill;let a=El(n&&n.target,n);void 0===a&&(a=!!t.backgroundColor);if(!1===a||null===a)return!1;if(!0===a)return"origin";return a}(e);if(Al(a))return!isNaN(a.value)&&a;let r=parseFloat(a);return Pl(r)&&Math.floor(r)===r?function(e,t,n,a){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=a)return!1;return n}(a[0],t,r,n):["origin","start","end","stack","shape"].indexOf(a)>=0&&a}function uf(e,t,n){const a=[];for(let r=0;r<n.length;r++){const s=n[r],{first:i,last:o,point:l}=hf(s,t,"x");if(!(!l||i&&o))if(i)a.unshift(l);else if(e.push(l),!o)break}e.push(...a)}function hf(e,t,n){const a=e.interpolate(t,n);if(!a)return{};const r=a[n],s=e.segments,i=e.points;let o=!1,l=!1;for(let c=0;c<s.length;c++){const e=s[c],t=i[e.start][n],a=i[e.end][n];if(xc(r,t,a)){o=r===t,l=r===a;break}}return{first:o,last:l,point:a}}class mf{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:a,y:r,radius:s}=this;return t=t||{start:0,end:Xl},e.arc(a,r,s,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:a}=this,r=e.angle;return{x:t+Math.cos(r)*a,y:n+Math.sin(r)*a,angle:r}}}function ff(e){const{chart:t,fill:n,line:a}=e;if(Pl(n))return function(e,t){const n=e.getDatasetMeta(t),a=n&&e.isDatasetVisible(t);return a?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:a}=e,r=[],s=a.segments,i=a.points,o=function(e,t){const n=[],a=e.getMatchingVisibleMetas("line");for(let r=0;r<a.length;r++){const e=a[r];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);o.push(of({x:null,y:t.bottom},a));for(let l=0;l<s.length;l++){const e=s[l];for(let t=e.start;t<=e.end;t++)uf(r,i[t],o)}return new Rm({points:r,options:{}})}(e);if("shape"===n)return!0;const r=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,a=t.options,r=t.getLabels().length,s=a.reverse?t.max:t.min,i=function(e,t,n){let a;return a="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:Al(e)?e.value:t.getBaseValue(),a}(n,t,s),o=[];if(a.grid.circular){const e=t.getPointPositionForValue(0,s);return new mf({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(i)})}for(let l=0;l<r;++l)o.push(t.getPointPositionForValue(l,i));return o}(e);return function(e){const{scale:t={},fill:n}=e,a=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:Al(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(Pl(a)){const e=t.isHorizontal();return{x:e?a:null,y:e?null:a}}return null}(e)}(e);return r instanceof mf?r:of(r,a)}function pf(e,t,n){const a=ff(t),{chart:r,index:s,line:i,scale:o,axis:l}=t,c=i.options,d=c.fill,u=c.backgroundColor,{above:h=u,below:m=u}=d||{},f=r.getDatasetMeta(s),p=mu(r,f);a&&i.points.length&&(nd(e,n),function(e,t){const{line:n,target:a,above:r,below:s,area:i,scale:o,clip:l}=t,c=n._loop?"angle":t.axis;e.save(),"x"===c&&s!==r&&(gf(e,a,i.top),xf(e,{line:n,target:a,color:r,scale:o,property:c,clip:l}),e.restore(),e.save(),gf(e,a,i.bottom));xf(e,{line:n,target:a,color:s,scale:o,property:c,clip:l}),e.restore()}(e,{line:i,target:a,above:h,below:m,area:n,scale:o,axis:l,clip:p}),ad(e))}function gf(e,t,n){const{segments:a,points:r}=t;let s=!0,i=!1;e.beginPath();for(const o of a){const{start:a,end:l}=o,c=r[a],d=r[rf(a,l,r)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,o,{move:i}),i?e.closePath():e.lineTo(d.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function xf(e,t){const{line:n,target:a,property:r,color:s,scale:i,clip:o}=t,l=function(e,t,n){const a=e.segments,r=e.points,s=t.points,i=[];for(const o of a){let{start:e,end:a}=o;a=rf(e,a,r);const l=af(n,r[e],r[a],o.loop);if(!t.segments){i.push({source:o,target:l,start:r[e],end:r[a]});continue}const c=lu(t,l);for(const t of c){const e=af(n,s[t.start],s[t.end],t.loop),a=ou(o,r,e);for(const r of a)i.push({source:r,target:t,start:{[n]:sf(l,e,"start",Math.max)},end:{[n]:sf(l,e,"end",Math.min)}})}}return i}(n,a,r);for(const{source:c,target:d,start:u,end:h}of l){const{style:{backgroundColor:t=s}={}}=c,l=!0!==a;e.save(),e.fillStyle=t,bf(e,i,o,l&&af(r,u,h)),e.beginPath();const m=!!n.pathSegment(e,c);let f;if(l){m?e.closePath():vf(e,a,h,r);const t=!!a.pathSegment(e,d,{move:m,reverse:!0});f=m&&t,f||vf(e,a,u,r)}e.closePath(),e.fill(f?"evenodd":"nonzero"),e.restore()}}function bf(e,t,n,a){const r=t.chart.chartArea,{property:s,start:i,end:o}=a||{};if("x"===s||"y"===s){let t,a,l,c;"x"===s?(t=i,a=r.top,l=o,c=r.bottom):(t=r.left,a=i,l=r.right,c=o),e.beginPath(),n&&(t=Math.max(t,n.left),l=Math.min(l,n.right),a=Math.max(a,n.top),c=Math.min(c,n.bottom)),e.rect(t,a,l-t,c-a),e.clip()}}function vf(e,t,n,a){const r=t.interpolate(n,a);r&&e.lineTo(r.x,r.y)}var yf={id:"filler",afterDatasetsUpdate(e,t,n){const a=(e.data.datasets||[]).length,r=[];let s,i,o,l;for(i=0;i<a;++i)s=e.getDatasetMeta(i),o=s.dataset,l=null,o&&o.options&&o instanceof Rm&&(l={visible:e.isDatasetVisible(i),index:i,fill:df(o,i,a),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=l,r.push(l);for(i=0;i<a;++i)l=r[i],l&&!1!==l.fill&&(l.fill=cf(r,i,n.propagate))},beforeDraw(e,t,n){const a="beforeDraw"===n.drawTime,r=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let i=r.length-1;i>=0;--i){const t=r[i].$filler;t&&(t.line.updateControlPoints(s,t.axis),a&&t.fill&&pf(e.ctx,t,s))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const a=e.getSortedVisibleDatasetMetas();for(let r=a.length-1;r>=0;--r){const t=a[r].$filler;lf(t)&&pf(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const a=t.meta.$filler;lf(a)&&"beforeDatasetDraw"===n.drawTime&&pf(e.ctx,a,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const wf=(e,t)=>{let{boxHeight:n=t,boxWidth:a=t}=e;return e.usePointStyle&&(n=Math.min(n,t),a=e.pointStyleWidth||Math.min(a,t)),{boxWidth:a,boxHeight:n,itemHeight:Math.max(t,n)}};class jf extends Th{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Ml(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,a=xd(n.font),r=a.size,s=this._computeTitleHeight(),{boxWidth:i,itemHeight:o}=wf(n,r);let l,c;t.font=a.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,i,o)+10):(c=this.maxHeight,l=this._fitCols(s,a,i,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,a){const{ctx:r,maxWidth:s,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=a+i;let d=e;r.textAlign="left",r.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach(((e,m)=>{const f=n+t/2+r.measureText(e.text).width;(0===m||l[l.length-1]+f+2*i>s)&&(d+=c,l[l.length-(m>0?0:1)]=0,h+=c,u++),o[m]={left:0,top:h,row:u,width:f,height:a},l[l.length-1]+=f+i})),d}_fitCols(e,t,n,a){const{ctx:r,maxHeight:s,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let d=i,u=0,h=0,m=0,f=0;return this.legendItems.forEach(((e,s)=>{const{itemWidth:p,itemHeight:g}=function(e,t,n,a,r){const s=function(e,t,n,a){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+a.measureText(r).width}(a,e,t,n),i=function(e,t,n){let a=e;"string"!==typeof t.text&&(a=Nf(t,n));return a}(r,a,t.lineHeight);return{itemWidth:s,itemHeight:i}}(n,t,r,e,a);s>0&&h+g+2*i>c&&(d+=u+i,l.push({width:u,height:h}),m+=u+i,f++,u=h=0),o[s]={left:m,top:h,col:f,width:p,height:g},u=Math.max(u,p),h+=g+i})),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:a},rtl:r}}=this,s=nu(r,this.left,this.width);if(this.isHorizontal()){let r=0,i=Cc(n,this.left+a,this.right-this.lineWidths[r]);for(const o of t)r!==o.row&&(r=o.row,i=Cc(n,this.left+a,this.right-this.lineWidths[r])),o.top+=this.top+e+a,o.left=s.leftForLtr(s.x(i),o.width),i+=o.width+a}else{let r=0,i=Cc(n,this.top+e+a,this.bottom-this.columnSizes[r].height);for(const o of t)o.col!==r&&(r=o.col,i=Cc(n,this.top+e+a,this.bottom-this.columnSizes[r].height)),o.top=i,o.left+=this.left+a,o.left=s.leftForLtr(s.x(o.left),o.width),i+=o.height+a}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;nd(e,this),this._draw(),ad(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:a}=this,{align:r,labels:s}=e,i=$c.color,o=nu(e.rtl,this.left,this.width),l=xd(s.font),{padding:c}=s,d=l.size,u=d/2;let h;this.drawTitle(),a.textAlign=o.textAlign("left"),a.textBaseline="middle",a.lineWidth=.5,a.font=l.string;const{boxWidth:m,boxHeight:f,itemHeight:p}=wf(s,d),g=this.isHorizontal(),x=this._computeTitleHeight();h=g?{x:Cc(r,this.left+c,this.right-n[0]),y:this.top+c+x,line:0}:{x:this.left+c,y:Cc(r,this.top+x+c,this.bottom-t[0].height),line:0},au(this.ctx,e.textDirection);const b=p+c;this.legendItems.forEach(((v,y)=>{a.strokeStyle=v.fontColor,a.fillStyle=v.fontColor;const w=a.measureText(v.text).width,j=o.textAlign(v.textAlign||(v.textAlign=s.textAlign)),N=m+u+w;let _=h.x,S=h.y;o.setWidth(this.width),g?y>0&&_+N+c>this.right&&(S=h.y+=b,h.line++,_=h.x=Cc(r,this.left+c,this.right-n[h.line])):y>0&&S+b>this.bottom&&(_=h.x=_+t[h.line].width+c,h.line++,S=h.y=Cc(r,this.top+x+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(m)||m<=0||isNaN(f)||f<0)return;a.save();const r=El(n.lineWidth,1);if(a.fillStyle=El(n.fillStyle,i),a.lineCap=El(n.lineCap,"butt"),a.lineDashOffset=El(n.lineDashOffset,0),a.lineJoin=El(n.lineJoin,"miter"),a.lineWidth=r,a.strokeStyle=El(n.strokeStyle,i),a.setLineDash(El(n.lineDash,[])),s.usePointStyle){const i={radius:f*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=o.xPlus(e,m/2);ed(a,i,l,t+u,s.pointStyleWidth&&m)}else{const s=t+Math.max((d-f)/2,0),i=o.leftForLtr(e,m),l=pd(n.borderRadius);a.beginPath(),Object.values(l).some((e=>0!==e))?cd(a,{x:i,y:s,w:m,h:f,radius:l}):a.rect(i,s,m,f),a.fill(),0!==r&&a.stroke()}a.restore()}(o.x(_),S,v),_=((e,t,n,a)=>e===(a?"left":"right")?n:"center"===e?(t+n)/2:t)(j,_+m+u,g?_+N:this.right,e.rtl),function(e,t,n){ld(a,n.text,e,t+p/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(_),S,v),g)h.x+=N+c;else if("string"!==typeof v.text){const e=l.lineHeight;h.y+=Nf(v,e)+c}else h.y+=b})),ru(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=xd(t.font),a=gd(t.padding);if(!t.display)return;const r=nu(e.rtl,this.left,this.width),s=this.ctx,i=t.position,o=n.size/2,l=a.top+o;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=Cc(e.align,d,this.right-u);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+Cc(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=Cc(i,d,d+u);s.textAlign=r.textAlign(kc(i)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,ld(s,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=xd(e.font),n=gd(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,a,r;if(xc(e,this.left,this.right)&&xc(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(a=r[n],xc(e,a.left,a.left+a.width)&&xc(t,a.top,a.top+a.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,i=(r=n,null!==(a=s)&&null!==r&&a.datasetIndex===r.datasetIndex&&a.index===r.index);s&&!i&&Ml(t.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!i&&Ml(t.onHover,[e,n,this],this)}else n&&Ml(t.onClick,[e,n,this],this);var a,r}}function Nf(e,t){return t*(e.text?e.text.length:0)}var _f={id:"legend",_element:jf,start(e,t,n){const a=e.legend=new jf({ctx:e.ctx,options:n,chart:e});xh.configure(e,a,n),xh.addBox(e,a)},stop(e){xh.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const a=e.legend;xh.configure(e,a,n),a.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const a=t.datasetIndex,r=n.chart;r.isDatasetVisible(a)?(r.hide(a),t.hidden=!0):(r.show(a),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:a,textAlign:r,color:s,useBorderRadius:i,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=gd(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:a||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:i&&(o||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Sf extends Th{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const a=Cl(n.text)?n.text.length:1;this._padding=gd(n.padding);const r=a*xd(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:a,right:r,options:s}=this,i=s.align;let o,l,c,d=0;return this.isHorizontal()?(l=Cc(i,n,r),c=t+e,o=r-n):("left"===s.position?(l=n+e,c=Cc(i,a,t),d=-.5*$l):(l=r-e,c=Cc(i,t,a),d=.5*$l),o=a-t),{titleX:l,titleY:c,maxWidth:o,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=xd(t.font),a=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:i,rotation:o}=this._drawArgs(a);ld(e,t.text,0,0,n,{color:t.color,maxWidth:i,rotation:o,textAlign:kc(t.align),textBaseline:"middle",translation:[r,s]})}}var kf={id:"title",_element:Sf,start(e,t,n){!function(e,t){const n=new Sf({ctx:e.ctx,options:t,chart:e});xh.configure(e,n,t),xh.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;xh.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const a=e.titleBlock;xh.configure(e,a,n),a.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Cf=new WeakMap;var Af={id:"subtitle",start(e,t,n){const a=new Sf({ctx:e.ctx,options:n,chart:e});xh.configure(e,a,n),xh.addBox(e,a),Cf.set(e,a)},stop(e){xh.removeBox(e,Cf.get(e)),Cf.delete(e)},beforeUpdate(e,t,n){const a=Cf.get(e);xh.configure(e,a,n),a.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Pf={average(e){if(!e.length)return!1;let t,n,a=new Set,r=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();a.add(e.x),r+=e.y,++s}}if(0===s||0===a.size)return!1;return{x:[...a].reduce(((e,t)=>e+t))/a.size,y:r/s}},nearest(e,t){if(!e.length)return!1;let n,a,r,s=t.x,i=t.y,o=Number.POSITIVE_INFINITY;for(n=0,a=e.length;n<a;++n){const a=e[n].element;if(a&&a.hasValue()){const e=hc(t,a.getCenterPoint());e<o&&(o=e,r=a)}}if(r){const e=r.tooltipPosition();s=e.x,i=e.y}return{x:s,y:i}}};function Lf(e,t){return t&&(Cl(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Ef(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Df(e,t){const{element:n,datasetIndex:a,index:r}=t,s=e.getDatasetMeta(a).controller,{label:i,value:o}=s.getLabelAndValue(r);return{chart:e,label:i,parsed:s.getParsed(r),raw:e.data.datasets[a].data[r],formattedValue:o,dataset:s.getDataset(),dataIndex:r,datasetIndex:a,element:n}}function Mf(e,t){const n=e.chart.ctx,{body:a,footer:r,title:s}=e,{boxWidth:i,boxHeight:o}=t,l=xd(t.bodyFont),c=xd(t.titleFont),d=xd(t.footerFont),u=s.length,h=r.length,m=a.length,f=gd(t.padding);let p=f.height,g=0,x=a.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(x+=e.beforeBody.length+e.afterBody.length,u&&(p+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),x){p+=m*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(x-m)*l.lineHeight+(x-1)*t.bodySpacing}h&&(p+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let b=0;const v=function(e){g=Math.max(g,n.measureText(e).width+b)};return n.save(),n.font=c.string,Ol(e.title,v),n.font=l.string,Ol(e.beforeBody.concat(e.afterBody),v),b=t.displayColors?i+2+t.boxPadding:0,Ol(a,(e=>{Ol(e.before,v),Ol(e.lines,v),Ol(e.after,v)})),b=0,n.font=d.string,Ol(e.footer,v),n.restore(),g+=f.width,{width:g,height:p}}function Of(e,t,n,a){const{x:r,width:s}=n,{width:i,chartArea:{left:o,right:l}}=e;let c="center";return"center"===a?c=r<=(o+l)/2?"left":"right":r<=s/2?c="left":r>=i-s/2&&(c="right"),function(e,t,n,a){const{x:r,width:s}=a,i=n.caretSize+n.caretPadding;return"left"===e&&r+s+i>t.width||"right"===e&&r-s-i<0||void 0}(c,e,t,n)&&(c="center"),c}function Tf(e,t,n){const a=n.yAlign||t.yAlign||function(e,t){const{y:n,height:a}=t;return n<a/2?"top":n>e.height-a/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||Of(e,t,n,a),yAlign:a}}function Rf(e,t,n,a){const{caretSize:r,caretPadding:s,cornerRadius:i}=e,{xAlign:o,yAlign:l}=n,c=r+s,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=pd(i);let f=function(e,t){let{x:n,width:a}=e;return"right"===t?n-=a:"center"===t&&(n-=a/2),n}(t,o);const p=function(e,t,n){let{y:a,height:r}=e;return"top"===t?a+=n:a-="bottom"===t?r+n:r/2,a}(t,l,c);return"center"===l?"left"===o?f+=c:"right"===o&&(f-=c):"left"===o?f-=Math.max(d,h)+r:"right"===o&&(f+=Math.max(u,m)+r),{x:gc(f,0,a.width-t.width),y:gc(p,0,a.height-t.height)}}function If(e,t,n){const a=gd(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-a.right:e.x+a.left}function Ff(e){return Lf([],Ef(e))}function zf(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const Bf={beforeTitle:_l,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,a=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(a>0&&t.dataIndex<a)return n[t.dataIndex]}return""},afterTitle:_l,beforeBody:_l,beforeLabel:_l,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return kl(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:_l,afterBody:_l,beforeFooter:_l,footer:_l,afterFooter:_l};function qf(e,t,n,a){const r=e[t].call(n,a);return"undefined"===typeof r?Bf[t].call(n,a):r}class Uf extends Th{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),a=n.enabled&&t.options.animation&&n.animations,r=new vu(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,vd(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,a=qf(n,"beforeTitle",this,e),r=qf(n,"title",this,e),s=qf(n,"afterTitle",this,e);let i=[];return i=Lf(i,Ef(a)),i=Lf(i,Ef(r)),i=Lf(i,Ef(s)),i}getBeforeBody(e,t){return Ff(qf(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,a=[];return Ol(e,(e=>{const t={before:[],lines:[],after:[]},r=zf(n,e);Lf(t.before,Ef(qf(r,"beforeLabel",this,e))),Lf(t.lines,qf(r,"label",this,e)),Lf(t.after,Ef(qf(r,"afterLabel",this,e))),a.push(t)})),a}getAfterBody(e,t){return Ff(qf(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,a=qf(n,"beforeFooter",this,e),r=qf(n,"footer",this,e),s=qf(n,"afterFooter",this,e);let i=[];return i=Lf(i,Ef(a)),i=Lf(i,Ef(r)),i=Lf(i,Ef(s)),i}_createItems(e){const t=this._active,n=this.chart.data,a=[],r=[],s=[];let i,o,l=[];for(i=0,o=t.length;i<o;++i)l.push(Df(this.chart,t[i]));return e.filter&&(l=l.filter(((t,a,r)=>e.filter(t,a,r,n)))),e.itemSort&&(l=l.sort(((t,a)=>e.itemSort(t,a,n)))),Ol(l,(t=>{const n=zf(e.callbacks,t);a.push(qf(n,"labelColor",this,t)),r.push(qf(n,"labelPointStyle",this,t)),s.push(qf(n,"labelTextColor",this,t))})),this.labelColors=a,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),a=this._active;let r,s=[];if(a.length){const e=Pf[n.position].call(this,a,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=Mf(this,n),i=Object.assign({},e,t),o=Tf(this.chart,n,i),l=Rf(n,i,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,a){const r=this.getCaretPosition(e,n,a);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:a,yAlign:r}=this,{caretSize:s,cornerRadius:i}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:d}=pd(i),{x:u,y:h}=e,{width:m,height:f}=t;let p,g,x,b,v,y;return"center"===r?(v=h+f/2,"left"===a?(p=u,g=p-s,b=v+s,y=v-s):(p=u+m,g=p+s,b=v-s,y=v+s),x=p):(g="left"===a?u+Math.max(o,c)+s:"right"===a?u+m-Math.max(l,d)-s:this.caretX,"top"===r?(b=h,v=b-s,p=g-s,x=g+s):(b=h+f,v=b+s,p=g+s,x=g-s),y=b),{x1:p,x2:g,x3:x,y1:b,y2:v,y3:y}}drawTitle(e,t,n){const a=this.title,r=a.length;let s,i,o;if(r){const l=nu(n.rtl,this.x,this.width);for(e.x=If(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=xd(n.titleFont),i=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,o=0;o<r;++o)t.fillText(a[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+i,o+1===r&&(e.y+=n.titleMarginBottom-i)}}_drawColorBox(e,t,n,a,r){const s=this.labelColors[n],i=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=r,c=xd(r.bodyFont),d=If(this,"left",r),u=a.x(d),h=o<c.lineHeight?(c.lineHeight-o)/2:0,m=t.y+h;if(r.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:1},n=a.leftForLtr(u,l)+l/2,c=m+o/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,Zc(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,Zc(e,t,n,c)}else{e.lineWidth=Al(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=a.leftForLtr(u,l),n=a.leftForLtr(a.xPlus(u,1),l-2),i=pd(s.borderRadius);Object.values(i).some((e=>0!==e))?(e.beginPath(),e.fillStyle=r.multiKeyBackground,cd(e,{x:t,y:m,w:l,h:o,radius:i}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),cd(e,{x:n,y:m+1,w:l-2,h:o-2,radius:i}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,m,l,o),e.strokeRect(t,m,l,o),e.fillStyle=s.backgroundColor,e.fillRect(n,m+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:a}=this,{bodySpacing:r,bodyAlign:s,displayColors:i,boxHeight:o,boxWidth:l,boxPadding:c}=n,d=xd(n.bodyFont);let u=d.lineHeight,h=0;const m=nu(n.rtl,this.x,this.width),f=function(n){t.fillText(n,m.x(e.x+h),e.y+u/2),e.y+=u+r},p=m.textAlign(s);let g,x,b,v,y,w,j;for(t.textAlign=s,t.textBaseline="middle",t.font=d.string,e.x=If(this,p,n),t.fillStyle=n.bodyColor,Ol(this.beforeBody,f),h=i&&"right"!==p?"center"===s?l/2+c:l+2+c:0,v=0,w=a.length;v<w;++v){for(g=a[v],x=this.labelTextColors[v],t.fillStyle=x,Ol(g.before,f),b=g.lines,i&&b.length&&(this._drawColorBox(t,e,v,m,n),u=Math.max(d.lineHeight,o)),y=0,j=b.length;y<j;++y)f(b[y]),u=d.lineHeight;Ol(g.after,f)}h=0,u=d.lineHeight,Ol(this.afterBody,f),e.y-=r}drawFooter(e,t,n){const a=this.footer,r=a.length;let s,i;if(r){const o=nu(n.rtl,this.x,this.width);for(e.x=If(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",s=xd(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,i=0;i<r;++i)t.fillText(a[i],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,a){const{xAlign:r,yAlign:s}=this,{x:i,y:o}=e,{width:l,height:c}=n,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=pd(a.cornerRadius);t.fillStyle=a.backgroundColor,t.strokeStyle=a.borderColor,t.lineWidth=a.borderWidth,t.beginPath(),t.moveTo(i+d,o),"top"===s&&this.drawCaret(e,t,n,a),t.lineTo(i+l-u,o),t.quadraticCurveTo(i+l,o,i+l,o+u),"center"===s&&"right"===r&&this.drawCaret(e,t,n,a),t.lineTo(i+l,o+c-m),t.quadraticCurveTo(i+l,o+c,i+l-m,o+c),"bottom"===s&&this.drawCaret(e,t,n,a),t.lineTo(i+h,o+c),t.quadraticCurveTo(i,o+c,i,o+c-h),"center"===s&&"left"===r&&this.drawCaret(e,t,n,a),t.lineTo(i,o+d),t.quadraticCurveTo(i,o,i+d,o),t.closePath(),t.fill(),a.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,a=n&&n.x,r=n&&n.y;if(a||r){const n=Pf[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=Mf(this,e),i=Object.assign({},n,this._size),o=Tf(t,e,i),l=Rf(e,i,o,t);a._to===l.x&&r._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const a={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=gd(t.padding),i=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&i&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,a,t),au(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),ru(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,a=e.map((e=>{let{datasetIndex:t,index:n}=e;const a=this.chart.getDatasetMeta(t);if(!a)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:a.data[n],index:n}})),r=!Tl(n,a),s=this._positionChanged(a,t);(r||s)&&(this._active=a,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const a=this.options,r=this._active||[],s=this._getActiveElements(e,r,t,n),i=this._positionChanged(s,e),o=t||!Tl(s,r)||i;return o&&(this._active=s,(a.enabled||a.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,a){const r=this.options;if("mouseout"===e.type)return[];if(!a)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const s=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:a,options:r}=this,s=Pf[r.position].call(this,e,t);return!1!==s&&(n!==s.x||a!==s.y)}}(0,Ho.A)(Uf,"positioners",Pf);var Wf={id:"tooltip",_element:Uf,positioners:Pf,afterInit(e,t,n){n&&(e.tooltip=new Uf({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",(0,Ie.A)((0,Ie.A)({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Bf},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Hf=Object.freeze({__proto__:null,Colors:Zm,Decimation:nf,Filler:yf,Legend:_f,SubTitle:Af,Title:kf,Tooltip:Wf});function Vf(e,t,n,a){const r=e.indexOf(t);if(-1===r)return((e,t,n,a)=>("string"===typeof t?(n=e.push(t)-1,a.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,a);return r!==e.lastIndexOf(t)?n:r}function Yf(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Gf extends Vh{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:a}of t)e[n]===a&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(kl(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:gc(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:Vf(n,e,El(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:a}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(a=this.getLabels().length-1)),this.min=n,this.max=a}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,a=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)a.push({value:s});return a}getLabelForValue(e){return Yf.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function $f(e,t){const n=[],{bounds:a,step:r,min:s,max:i,precision:o,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=r||1,m=c-1,{min:f,max:p}=t,g=!kl(s),x=!kl(i),b=!kl(l),v=(p-f)/(d+1);let y,w,j,N,_=sc((p-f)/m/h)*h;if(_<1e-14&&!g&&!x)return[{value:f},{value:p}];N=Math.ceil(p/_)-Math.floor(f/_),N>m&&(_=sc(N*_/m/h)*h),kl(o)||(y=Math.pow(10,o),_=Math.ceil(_*y)/y),"ticks"===a?(w=Math.floor(f/_)*_,j=Math.ceil(p/_)*_):(w=f,j=p),g&&x&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((i-s)/r,_/1e3)?(N=Math.round(Math.min((i-s)/_,c)),_=(i-s)/N,w=s,j=i):b?(w=g?s:w,j=x?i:j,N=l-1,_=(j-w)/N):(N=(j-w)/_,N=rc(N,Math.round(N),_/1e3)?Math.round(N):Math.ceil(N));const S=Math.max(dc(_),dc(w));y=Math.pow(10,kl(o)?S:o),w=Math.round(w*y)/y,j=Math.round(j*y)/y;let k=0;for(g&&(u&&w!==s?(n.push({value:s}),w<s&&k++,rc(Math.round((w+k*_)*y)/y,s,Xf(s,v,e))&&k++):w<s&&k++);k<N;++k){const e=Math.round((w+k*_)*y)/y;if(x&&e>i)break;n.push({value:e})}return x&&u&&j!==i?n.length&&rc(n[n.length-1].value,i,Xf(i,v,e))?n[n.length-1].value=i:n.push({value:i}):x&&j!==i||n.push({value:j}),n}function Xf(e,t,n){let{horizontal:a,minRotation:r}=n;const s=lc(r),i=(a?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/i,o)}(0,Ho.A)(Gf,"id","category"),(0,Ho.A)(Gf,"defaults",{ticks:{callback:Yf}});class Kf extends Vh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return kl(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:a,max:r}=this;const s=e=>a=t?a:e,i=e=>r=n?r:e;if(e){const e=ac(a),t=ac(r);e<0&&t<0?i(0):e>0&&t>0&&s(0)}if(a===r){let t=0===r?1:Math.abs(.05*r);i(r+t),e||s(a-t)}this.min=a,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:a}=e;return a?(t=Math.ceil(this.max/a)-Math.floor(this.min/a)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(a," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const a=$f({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&oc(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const a=(n-t)/Math.max(e.length-1,1)/2;t-=a,n+=a}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Bc(e,this.chart.options.locale,this.options.ticks.format)}}class Jf extends Kf{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Pl(e)?e:0,this.max=Pl(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=lc(this.options.ticks.minRotation),a=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/a))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,Ho.A)(Jf,"id","linear"),(0,Ho.A)(Jf,"defaults",{ticks:{callback:Uc.formatters.numeric}});const Qf=e=>Math.floor(nc(e)),Zf=(e,t)=>Math.pow(10,Qf(e)+t);function ep(e){return 1===e/Math.pow(10,Qf(e))}function tp(e,t,n){const a=Math.pow(10,n),r=Math.floor(e/a);return Math.ceil(t/a)-r}function np(e,t){let{min:n,max:a}=t;n=Ll(e.min,n);const r=[],s=Qf(n);let i=function(e,t){let n=Qf(t-e);for(;tp(e,t,n)>10;)n++;for(;tp(e,t,n)<10;)n--;return Math.min(n,Qf(e))}(n,a),o=i<0?Math.pow(10,Math.abs(i)):1;const l=Math.pow(10,i),c=s>i?Math.pow(10,s):0,d=Math.round((n-c)*o)/o,u=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,i)),m=Ll(e.min,Math.round((c+u+h*Math.pow(10,i))*o)/o);for(;m<a;)r.push({value:m,major:ep(m),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(i++,h=2,o=i>=0?1:o),m=Math.round((c+u+h*Math.pow(10,i))*o)/o;const f=Ll(e.max,m);return r.push({value:f,major:ep(f),significand:h}),r}class ap extends Vh{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=Kf.prototype.parse.apply(this,[e,t]);if(0!==n)return Pl(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Pl(e)?Math.max(0,e):null,this.max=Pl(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Pl(this._userMin)&&(this.min=e===Zf(this.min,0)?Zf(this.min,-1):Zf(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,a=this.max;const r=t=>n=e?n:t,s=e=>a=t?a:e;n===a&&(n<=0?(r(1),s(10)):(r(Zf(n,-1)),s(Zf(a,1)))),n<=0&&r(Zf(a,-1)),a<=0&&s(Zf(n,1)),this.min=n,this.max=a}buildTicks(){const e=this.options,t=np({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&oc(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Bc(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=nc(e),this._valueRange=nc(this.max)-nc(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(nc(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function rp(e){const t=e.ticks;if(t.display&&e.display){const e=gd(t.backdropPadding);return El(t.font&&t.font.size,$c.font.size)+e.height}return 0}function sp(e,t,n,a,r){return e===a||e===r?{start:t-n/2,end:t+n/2}:e<a||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function ip(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),a=[],r=[],s=e._pointLabels.length,i=e.options.pointLabels,o=i.centerPointLabels?$l/s:0;for(let u=0;u<s;u++){const s=i.setContext(e.getPointLabelContext(u));r[u]=s.padding;const h=e.getPointPosition(u,e.drawingArea+r[u],o),m=xd(s.font),f=(l=e.ctx,c=m,d=Cl(d=e._pointLabels[u])?d:[d],{w:Kc(l,c.string,d),h:d.length*c.lineHeight});a[u]=f;const p=fc(e.getIndexAngle(u)+o),g=Math.round(cc(p));op(n,t,p,sp(g,h.x,f.w,0,180),sp(g,h.y,f.h,90,270))}var l,c,d;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const a=[],r=e._pointLabels.length,s=e.options,{centerPointLabels:i,display:o}=s.pointLabels,l={extra:rp(s)/2,additionalAngle:i?$l/r:0};let c;for(let d=0;d<r;d++){l.padding=n[d],l.size=t[d];const r=lp(e,d,l);a.push(r),"auto"===o&&(r.visible=cp(r,c),r.visible&&(c=r))}return a}(e,a,r)}function op(e,t,n,a,r){const s=Math.abs(Math.sin(n)),i=Math.abs(Math.cos(n));let o=0,l=0;a.start<t.l?(o=(t.l-a.start)/s,e.l=Math.min(e.l,t.l-o)):a.end>t.r&&(o=(a.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),r.start<t.t?(l=(t.t-r.start)/i,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/i,e.b=Math.max(e.b,t.b+l))}function lp(e,t,n){const a=e.drawingArea,{extra:r,additionalAngle:s,padding:i,size:o}=n,l=e.getPointPosition(t,a+r+i,s),c=Math.round(cc(fc(l.angle+Zl))),d=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+o.w,bottom:d+o.h}}function cp(e,t){if(!t)return!0;const{left:n,top:a,right:r,bottom:s}=e;return!(td({x:n,y:a},t)||td({x:n,y:s},t)||td({x:r,y:a},t)||td({x:r,y:s},t))}function dp(e,t,n){const{left:a,top:r,right:s,bottom:i}=n,{backdropColor:o}=t;if(!kl(o)){const n=pd(t.borderRadius),l=gd(t.backdropPadding);e.fillStyle=o;const c=a-l.left,d=r-l.top,u=s-a+l.width,h=i-r+l.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),cd(e,{x:c,y:d,w:u,h:h,radius:n}),e.fill()):e.fillRect(c,d,u,h)}}function up(e,t,n,a){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,Xl);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let s=1;s<a;s++)n=e.getPointPosition(s,t),r.lineTo(n.x,n.y)}}(0,Ho.A)(ap,"id","logarithmic"),(0,Ho.A)(ap,"defaults",{ticks:{callback:Uc.formatters.logarithmic,major:{enabled:!0}}});class hp extends Kf{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=gd(rp(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Pl(e)&&!isNaN(e)?e:0,this.max=Pl(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/rp(this.options))}generateTickLabels(e){Kf.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=Ml(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?ip(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,a){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-a)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,a))}getIndexAngle(e){return fc(e*(Xl/(this._pointLabels.length||1))+lc(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(kl(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(kl(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return vd(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=this.getIndexAngle(e)-Zl+n;return{x:Math.cos(a)*t+this.xCenter,y:Math.sin(a)*t+this.yCenter,angle:a}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:a,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:a,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),up(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:a,border:r}=t,s=this._pointLabels.length;let i,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:a}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const s=a.setContext(e.getPointLabelContext(r));dp(n,s,t);const i=xd(s.font),{x:o,y:l,textAlign:c}=t;ld(n,e._pointLabels[r],o,l+i.lineHeight/2,i,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),a.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),i=a.setContext(n),l=r.setContext(n);!function(e,t,n,a,r){const s=e.ctx,i=t.circular,{color:o,lineWidth:l}=t;!i&&!a||!o||!l||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),up(e,n,i,a),s.closePath(),s.stroke(),s.restore())}(this,i,o,s,l)}})),n.display){for(e.save(),i=s-1;i>=0;i--){const a=n.setContext(this.getPointLabelContext(i)),{color:r,lineWidth:s}=a;s&&r&&(e.lineWidth=s,e.strokeStyle=r,e.setLineDash(a.borderDash),e.lineDashOffset=a.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(i,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const a=this.getIndexAngle(0);let r,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(a),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((a,i)=>{if(0===i&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(i)),l=xd(o.font);if(r=this.getDistanceFromCenterForValue(this.ticks[i].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(a.label).width,e.fillStyle=o.backdropColor;const t=gd(o.backdropPadding);e.fillRect(-s/2-t.left,-r-l.size/2-t.top,s+t.width,l.size+t.height)}ld(e,a.label,0,-r,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})})),e.restore()}drawTitle(){}}(0,Ho.A)(hp,"id","radialLinear"),(0,Ho.A)(hp,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Uc.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,Ho.A)(hp,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,Ho.A)(hp,"descriptors",{angleLines:{_fallback:"grid"}});const mp={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},fp=Object.keys(mp);function pp(e,t){return e-t}function gp(e,t){if(kl(t))return null;const n=e._adapter,{parser:a,round:r,isoWeekday:s}=e._parseOpts;let i=t;return"function"===typeof a&&(i=a(i)),Pl(i)||(i="string"===typeof a?n.parse(i,a):n.parse(i)),null===i?null:(r&&(i="week"!==r||!ic(s)&&!0!==s?n.startOf(i,r):n.startOf(i,"isoWeek",s)),+i)}function xp(e,t,n,a){const r=fp.length;for(let s=fp.indexOf(e);s<r-1;++s){const e=mp[fp[s]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=a)return fp[s]}return fp[r-1]}function bp(e,t,n){if(n){if(n.length){const{lo:a,hi:r}=bc(n,t);e[n[a]>=t?n[a]:n[r]]=!0}}else e[t]=!0}function vp(e,t,n){const a=[],r={},s=t.length;let i,o;for(i=0;i<s;++i)o=t[i],r[o]=i,a.push({value:o,major:!1});return 0!==s&&n?function(e,t,n,a){const r=e._adapter,s=+r.startOf(t[0].value,a),i=t[t.length-1].value;let o,l;for(o=s;o<=i;o=+r.add(o,1,a))l=n[o],l>=0&&(t[l].major=!0);return t}(e,a,r,n):a}class yp extends Vh{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),a=this._adapter=new Ju(e.adapters.date);a.init(t),Bl(n.displayFormats,a.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:gp(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:a,max:r,minDefined:s,maxDefined:i}=this.getUserBounds();function o(e){s||isNaN(e.min)||(a=Math.min(a,e.min)),i||isNaN(e.max)||(r=Math.max(r,e.max))}s&&i||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),a=Pl(a)&&!isNaN(a)?a:+t.startOf(Date.now(),n),r=Pl(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(a,r-1),this.max=Math.max(a+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,a="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);const r=this.min,s=function(e,t,n){let a=0,r=e.length;for(;a<r&&e[a]<t;)a++;for(;r>a&&e[r-1]>n;)r--;return a>0||r<e.length?e.slice(a,r):e}(a,r,this.max);return this._unit=t.unit||(n.autoSkip?xp(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,a,r){for(let s=fp.length-1;s>=fp.indexOf(n);s--){const n=fp[s];if(mp[n].common&&e._adapter.diff(r,a,n)>=t-1)return n}return fp[n?fp.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=fp.indexOf(e)+1,n=fp.length;t<n;++t)if(mp[fp[t]].common)return fp[t]}(this._unit):void 0,this.initOffsets(a),e.reverse&&s.reverse(),vp(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),a=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;a=gc(a,0,s),r=gc(r,0,s),this._offsets={start:a,end:r,factor:1/(a+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,a=this.options,r=a.time,s=r.unit||xp(r.minUnit,t,n,this._getLabelCapacity(t)),i=El(a.ticks.stepSize,1),o="week"===s&&r.isoWeekday,l=ic(o)||!0===o,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":s),e.diff(n,t,s)>1e5*i)throw new Error(t+" and "+n+" are too far apart with stepSize of "+i+" "+s);const m="data"===a.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<n;d=+e.add(d,i,s),u++)bp(c,d,m);return d!==n&&"ticks"!==a.bounds&&1!==u||bp(c,d,m),Object.keys(c).sort(pp).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,a=this._unit,r=t||n[a];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,a){const r=this.options,s=r.ticks.callback;if(s)return Ml(s,[e,t,n],this);const i=r.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&i[o],d=l&&i[l],u=n[t],h=l&&d&&u&&u.major;return this._adapter.format(e,a||(h?d:c))}generateTickLabels(e){let t,n,a;for(t=0,n=e.length;t<n;++t)a=e[t],a.label=this._tickFormatFunction(a.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,a=lc(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(a),s=Math.sin(a),i=this._resolveTickFontOptions(0).size;return{w:n*r+i*s,h:n*s+i*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,a=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,vp(this,[e],this._majorUnit),a),s=this._getLabelSize(r),i=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return i>0?i:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(e=0,t=a.length;e<t;++e)n=n.concat(a[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const a=this.getLabels();for(t=0,n=a.length;t<n;++t)e.push(gp(this,a[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Nc(e.sort(pp))}}function wp(e,t,n){let a,r,s,i,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=vc(e,"pos",t)),({pos:a,time:s}=e[o]),({pos:r,time:i}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=vc(e,"time",t)),({time:a,pos:s}=e[o]),({time:r,pos:i}=e[l]));const c=r-a;return c?s+(i-s)*(t-a)/c:s}(0,Ho.A)(yp,"id","time"),(0,Ho.A)(yp,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class jp extends yp{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=wp(t,this.min),this._tableRange=wp(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,a=[],r=[];let s,i,o,l,c;for(s=0,i=e.length;s<i;++s)l=e[s],l>=t&&l<=n&&a.push(l);if(a.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,i=a.length;s<i;++s)c=a[s+1],o=a[s-1],l=a[s],Math.round((c+o)/2)!==l&&r.push({time:l,pos:s/(i-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(wp(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return wp(this._table,n*this._tableRange+this._minPos,!0)}}(0,Ho.A)(jp,"id","timeseries"),(0,Ho.A)(jp,"defaults",yp.defaults);const Np=[$u,Ym,Hf,Object.freeze({__proto__:null,CategoryScale:Gf,LinearScale:Jf,LogarithmicScale:ap,RadialLinearScale:hp,TimeScale:yp,TimeSeriesScale:jp})];wm.register(...Np);const _p=wm,Sp={5:{name:"Independente",hex:"#10b981",rgb:[16,185,129]},4:{name:"Dica Verbal",hex:"#8b5cf6",rgb:[139,92,246]},3:{name:"Dica Gestual",hex:"#3b82f6",rgb:[59,130,246]},2:{name:"Ajuda F\xedsica Parcial",hex:"#eab308",rgb:[234,179,8]},1:{name:"Ajuda F\xedsica Total",hex:"#f97316",rgb:[249,115,22]},0:{name:"N\xe3o realizou",hex:"#ef4444",rgb:[239,68,68]}},kp=()=>[5,4,3,2,1].map((e=>({id:e,name:Sp[e].name,hex:Sp[e].hex,rgb:Sp[e].rgb}))),Cp=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long";if(!e)return"N\xe3o informado";try{const n=new Date(e),a=6e4*n.getTimezoneOffset(),r=new Date(n.getTime()+a);return"short"===t?r.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}):r.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(n){return e.split("T")[0]||"Data inv\xe1lida"}},Ap=Object.create(null);Ap.open="0",Ap.close="1",Ap.ping="2",Ap.pong="3",Ap.message="4",Ap.upgrade="5",Ap.noop="6";const Pp=Object.create(null);Object.keys(Ap).forEach((e=>{Pp[Ap[e]]=e}));const Lp={type:"error",data:"parser error"},Ep="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Dp="function"===typeof ArrayBuffer,Mp=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Op=(e,t,n)=>{let{type:a,data:r}=e;return Ep&&r instanceof Blob?t?n(r):Tp(r,n):Dp&&(r instanceof ArrayBuffer||Mp(r))?t?n(r):Tp(new Blob([r]),n):n(Ap[a]+(r||""))},Tp=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function Rp(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Ip;const Fp="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",zp="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let n=0;n<64;n++)zp[Fp.charCodeAt(n)]=n;const Bp="function"===typeof ArrayBuffer,qp=(e,t)=>{if("string"!==typeof e)return{type:"message",data:Wp(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:Up(e.substring(1),t)};return Pp[n]?e.length>1?{type:Pp[n],data:e.substring(1)}:{type:Pp[n]}:Lp},Up=(e,t)=>{if(Bp){const n=(e=>{let t,n,a,r,s,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const c=new ArrayBuffer(i),d=new Uint8Array(c);for(t=0;t<o;t+=4)n=zp[e.charCodeAt(t)],a=zp[e.charCodeAt(t+1)],r=zp[e.charCodeAt(t+2)],s=zp[e.charCodeAt(t+3)],d[l++]=n<<2|a>>4,d[l++]=(15&a)<<4|r>>2,d[l++]=(3&r)<<6|63&s;return c})(e);return Wp(n,t)}return{base64:!0,data:e}},Wp=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Hp=String.fromCharCode(30);function Vp(){return new TransformStream({transform(e,t){!function(e,t){Ep&&e.data instanceof Blob?e.data.arrayBuffer().then(Rp).then(t):Dp&&(e.data instanceof ArrayBuffer||Mp(e.data))?t(Rp(e.data)):Op(e,!1,(e=>{Ip||(Ip=new TextEncoder),t(Ip.encode(e))}))}(e,(n=>{const a=n.length;let r;if(a<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,a);else if(a<65536){r=new Uint8Array(3);const e=new DataView(r.buffer);e.setUint8(0,126),e.setUint16(1,a)}else{r=new Uint8Array(9);const e=new DataView(r.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(a))}e.data&&"string"!==typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)}))}})}let Yp;function Gp(e){return e.reduce(((e,t)=>e+t.length),0)}function $p(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let a=0;for(let r=0;r<t;r++)n[r]=e[0][a++],a===e[0].length&&(e.shift(),a=0);return e.length&&a<e[0].length&&(e[0]=e[0].slice(a)),n}function Xp(e){if(e)return function(e){for(var t in Xp.prototype)e[t]=Xp.prototype[t];return e}(e)}Xp.prototype.on=Xp.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Xp.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},Xp.prototype.off=Xp.prototype.removeListener=Xp.prototype.removeAllListeners=Xp.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,a=this._callbacks["$"+e];if(!a)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<a.length;r++)if((n=a[r])===t||n.fn===t){a.splice(r,1);break}return 0===a.length&&delete this._callbacks["$"+e],this},Xp.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(n){a=0;for(var r=(n=n.slice(0)).length;a<r;++a)n[a].apply(this,t)}return this},Xp.prototype.emitReserved=Xp.prototype.emit,Xp.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Xp.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Kp="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Jp="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function Qp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return n.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const Zp=Jp.setTimeout,eg=Jp.clearTimeout;function tg(e,t){t.useNativeTimers?(e.setTimeoutFn=Zp.bind(Jp),e.clearTimeoutFn=eg.bind(Jp)):(e.setTimeoutFn=Jp.setTimeout.bind(Jp),e.clearTimeoutFn=Jp.clearTimeout.bind(Jp))}function ng(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class ag extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class rg extends Xp{constructor(e){super(),this.writable=!1,tg(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new ag(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=qp(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class sg extends rg{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(Hp),a=[];for(let r=0;r<n.length;r++){const e=qp(n[r],t);if(a.push(e),"error"===e.type)break}return a})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,a=new Array(n);let r=0;e.forEach(((e,s)=>{Op(e,!1,(e=>{a[s]=e,++r===n&&t(a.join(Hp))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=ng()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let ig=!1;try{ig="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(yj){}const og=ig;function lg(){}class cg extends sg{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class dg extends Xp{constructor(e,t,n){super(),this.createRequest=e,tg(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=Qp(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(vj){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(vj){}try{n.setRequestHeader("Accept","*/*")}catch(vj){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"===typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(vj){return void this.setTimeoutFn((()=>{this._onError(vj)}),0)}"undefined"!==typeof document&&(this._index=dg.requestsCount++,dg.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=lg,e)try{this._xhr.abort()}catch(vj){}"undefined"!==typeof document&&delete dg.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(dg.requestsCount=0,dg.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",ug);else if("function"===typeof addEventListener){addEventListener("onpagehide"in Jp?"pagehide":"unload",ug,!1)}function ug(){for(let e in dg.requests)dg.requests.hasOwnProperty(e)&&dg.requests[e].abort()}const hg=function(){const e=mg({xdomain:!1});return e&&null!==e.responseType}();function mg(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||og))return new XMLHttpRequest}catch(vj){}if(!t)try{return new(Jp[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(vj){}}const fg="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class pg extends rg{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=fg?{}:Qp(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(yj){return this.emitReserved("error",yj)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],a=t===e.length-1;Op(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(vj){}a&&Kp((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=ng()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const gg=Jp.WebSocket||Jp.MozWebSocket;const xg={websocket:class extends pg{createSocket(e,t,n){return fg?new gg(e,t,n):t?new gg(e,t):new gg(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends rg{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(yj){return this.emitReserved("error",yj)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){Yp||(Yp=new TextDecoder);const n=[];let a=0,r=-1,s=!1;return new TransformStream({transform(i,o){for(n.push(i);;){if(0===a){if(Gp(n)<1)break;const e=$p(n,1);s=128===(128&e[0]),r=127&e[0],a=r<126?3:126===r?1:2}else if(1===a){if(Gp(n)<2)break;const e=$p(n,2);r=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),a=3}else if(2===a){if(Gp(n)<8)break;const e=$p(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),s=t.getUint32(0);if(s>Math.pow(2,21)-1){o.enqueue(Lp);break}r=s*Math.pow(2,32)+t.getUint32(4),a=3}else{if(Gp(n)<r)break;const e=$p(n,r);o.enqueue(qp(s?e:Yp.decode(e),t)),a=0}if(0===r||r>e){o.enqueue(Lp);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),a=Vp();a.readable.pipeTo(e.writable),this._writer=a.writable.getWriter();const r=()=>{n.read().then((e=>{let{done:t,value:n}=e;t||(this.onPacket(n),r())})).catch((e=>{}))};r();const s={type:"open"};this.query.sid&&(s.data='{"sid":"'.concat(this.query.sid,'"}')),this._writer.write(s).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],a=t===e.length-1;this._writer.write(n).then((()=>{a&&Kp((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends cg{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=hg&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new dg(mg,this.uri(),e)}}},bg=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,vg=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function yg(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),a=e.indexOf("]");-1!=n&&-1!=a&&(e=e.substring(0,n)+e.substring(n,a).replace(/:/g,";")+e.substring(a,e.length));let r=bg.exec(e||""),s={},i=14;for(;i--;)s[vg[i]]=r[i]||"";return-1!=n&&-1!=a&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){const n=/\/{2,9}/g,a=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||a.splice(0,1);"/"==t.slice(-1)&&a.splice(a.length-1,1);return a}(0,s.path),s.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,a){t&&(n[t]=a)})),n}(0,s.query),s}const wg="function"===typeof addEventListener&&"function"===typeof removeEventListener,jg=[];wg&&addEventListener("offline",(()=>{jg.forEach((e=>e()))}),!1);class Ng extends Xp{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const n=yg(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=yg(t.host).host);tg(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let a=0,r=n.length;a<r;a++){let e=n[a].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),wg&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},jg.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&Ng.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",Ng.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const a=this.writeBuffer[n].data;if(a&&(e+="string"===typeof(t=a)?function(e){let t=0,n=0;for(let a=0,r=e.length;a<r;a++)t=e.charCodeAt(a),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(a++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Kp((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,a){if("function"===typeof t&&(a=t,t=void 0),"function"===typeof n&&(a=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),a&&this.once("flush",a),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(Ng.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),wg&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=jg.indexOf(this._offlineEventListener);-1!==e&&jg.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Ng.protocol=4;class _g extends Ng{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;Ng.priorWebsocketSuccess=!1;const a=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Ng.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function r(){n||(n=!0,c(),t.close(),t=null)}const s=e=>{const n=new Error("probe error: "+e);n.transport=t.name,r(),this.emitReserved("upgradeError",n)};function i(){s("transport closed")}function o(){s("socket closed")}function l(e){t&&e.name!==t.name&&r()}const c=()=>{t.removeListener("open",a),t.removeListener("error",s),t.removeListener("close",i),this.off("close",o),this.off("upgrading",l)};t.once("open",a),t.once("error",s),t.once("close",i),this.once("close",o),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class Sg extends _g{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map((e=>xg[e])).filter((e=>!!e))),super(e,t)}}const kg="function"===typeof ArrayBuffer,Cg=Object.prototype.toString,Ag="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Cg.call(Blob),Pg="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Cg.call(File);function Lg(e){return kg&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||Ag&&e instanceof Blob||Pg&&e instanceof File}function Eg(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Eg(e[t]))return!0;return!1}if(Lg(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Eg(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Eg(e[n]))return!0;return!1}function Dg(e){const t=[],n=e.data,a=e;return a.data=Mg(n,t),a.attachments=t.length,{packet:a,buffers:t}}function Mg(e,t){if(!e)return e;if(Lg(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let a=0;a<e.length;a++)n[a]=Mg(e[a],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=Mg(e[a],t));return n}return e}function Og(e,t){return e.data=Tg(e.data,t),delete e.attachments,e}function Tg(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Tg(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Tg(e[n],t));return e}const Rg=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Ig=5;var Fg;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Fg||(Fg={}));class zg{constructor(e){this.replacer=e}encode(e){return e.type!==Fg.EVENT&&e.type!==Fg.ACK||!Eg(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Fg.EVENT?Fg.BINARY_EVENT:Fg.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Fg.BINARY_EVENT&&e.type!==Fg.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Dg(e),n=this.encodeAsString(t.packet),a=t.buffers;return a.unshift(n),a}}function Bg(e){return"[object Object]"===Object.prototype.toString.call(e)}class qg extends Xp{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Fg.BINARY_EVENT;n||t.type===Fg.BINARY_ACK?(t.type=n?Fg.EVENT:Fg.ACK,this.reconstructor=new Ug(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Lg(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Fg[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Fg.BINARY_EVENT||n.type===Fg.BINARY_ACK){const a=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const r=e.substring(a,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1)){const a=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(a,t)}else n.nsp="/";const a=e.charAt(t+1);if(""!==a&&Number(a)==a){const a=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(a,t+1))}if(e.charAt(++t)){const a=this.tryParse(e.substr(t));if(!qg.isPayloadValid(n.type,a))throw new Error("invalid payload");n.data=a}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(vj){return!1}}static isPayloadValid(e,t){switch(e){case Fg.CONNECT:return Bg(t);case Fg.DISCONNECT:return void 0===t;case Fg.CONNECT_ERROR:return"string"===typeof t||Bg(t);case Fg.EVENT:case Fg.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===Rg.indexOf(t[0]));case Fg.ACK:case Fg.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Ug{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=Og(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Wg(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const Hg=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Vg extends Xp{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Wg(e,"open",this.onopen.bind(this)),Wg(e,"packet",this.onpacket.bind(this)),Wg(e,"error",this.onerror.bind(this)),Wg(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,n,a;if(Hg.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];if(s.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const o={type:Fg.EVENT,data:s,options:{}};if(o.options.compress=!1!==this.flags.compress,"function"===typeof s[s.length-1]){const e=this.ids++,t=s.pop();this._registerAckCallback(e,t),o.id=e}const l=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,c=this.connected&&!(null===(a=this.io.engine)||void 0===a?void 0:a._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var n,a=this;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const s=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),r),i=function(){a.io.clearTimeoutFn(s);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(a,n)};i.withError=!0,this.acks[e]=i}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return new Promise(((t,a)=>{const r=(e,n)=>e?a(e):t(n);r.withError=!0,n.push(r),this.emit(e,...n)}))}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(a!==t._queue[0])return;if(null!==e)a.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var r=arguments.length,s=new Array(r>1?r-1:0),i=1;i<r;i++)s[i-1]=arguments[i];n(null,...s)}return a.pending=!1,t._drainQueue()})),this._queue.push(a),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Fg.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Fg.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Fg.EVENT:case Fg.BINARY_EVENT:this.onevent(e);break;case Fg.ACK:case Fg.BINARY_ACK:this.onack(e);break;case Fg.DISCONNECT:this.ondisconnect();break;case Fg.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];t.packet({type:Fg.ACK,id:e,data:r})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Fg.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Yg(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Yg.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Yg.prototype.reset=function(){this.attempts=0},Yg.prototype.setMin=function(e){this.ms=e},Yg.prototype.setMax=function(e){this.max=e},Yg.prototype.setJitter=function(e){this.jitter=e};class Gg extends Xp{constructor(t,n){var a;super(),this.nsps={},this.subs=[],t&&"object"===typeof t&&(n=t,t=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,tg(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(a=n.randomizationFactor)&&void 0!==a?a:.5),this.backoff=new Yg({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=t;const r=n.parser||e;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Sg(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const a=Wg(t,"open",(function(){n.onopen(),e&&e()})),r=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},s=Wg(t,"error",r);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{a(),r(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(a),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Wg(e,"ping",this.onping.bind(this)),Wg(e,"data",this.ondata.bind(this)),Wg(e,"error",this.onerror.bind(this)),Wg(e,"close",this.onclose.bind(this)),Wg(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(vj){this.onclose("parse error",vj)}}ondecoded(e){Kp((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Vg(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const $g={};function Xg(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),a=yg(e)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const r=-1!==a.host.indexOf(":")?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+r+":"+a.port+t,a.href=a.protocol+"://"+r+(n&&n.port===a.port?"":":"+a.port),a}(e,(t=t||{}).path||"/socket.io"),a=n.source,r=n.id,s=n.path,i=$g[r]&&s in $g[r].nsps;let o;return t.forceNew||t["force new connection"]||!1===t.multiplex||i?o=new Gg(a,t):($g[r]||($g[r]=new Gg(a,t)),o=$g[r]),n.query&&!t.query&&(t.query=n.queryKey),o.socket(n.path,t)}Object.assign(Xg,{Manager:Gg,Socket:Vg,io:Xg,connect:Xg});const Kg="".concat(qe.H,"/parent-chat"),Jg="".concat(qe.H,"/contacts"),Qg=async e=>{try{var t;console.log("[CONTACT-API] getTherapistContacts: Buscando para patientId:",e);const n=localStorage.getItem("token"),a=await $e.A.get("".concat(Jg,"/therapists/").concat(e),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});return console.log("[CONTACT-API] getTherapistContacts: Sucesso - terapeutas encontrados:",(null===(t=a.data.therapists)||void 0===t?void 0:t.length)||0),a.data}catch(a){var n;throw console.error("[CONTACT-API] getTherapistContacts: Erro -",(null===(n=a.response)||void 0===n?void 0:n.data)||a.message),a}},Zg=async e=>{try{var t;console.log("[CONTACT-API] getColleagueContacts: Buscando para patientId:",e);const n=localStorage.getItem("token"),a=await $e.A.get("".concat(Jg,"/colleagues/").concat(e),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});return console.log("[CONTACT-API] getColleagueContacts: Sucesso - colegas encontrados:",(null===(t=a.data.colleagues)||void 0===t?void 0:t.length)||0),a.data}catch(a){var n;throw console.error("[CONTACT-API] getColleagueContacts: Erro -",(null===(n=a.response)||void 0===n?void 0:n.data)||a.message),a}},ex=()=>(0,He.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,He.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),tx=e=>{let{double:t=!1,read:n=!1,onDarkBackground:a=!1}=e;const r=()=>a?n?"#00ff88":"#ffffff":n?"#00c851":"#666666";return(0,He.jsxs)("svg",{width:"18",height:"12",viewBox:"0 0 18 12",fill:"none",style:{display:"inline-block",filter:a&&n?"drop-shadow(0 0 2px rgba(0, 255, 136, 0.5))":"none"},children:[(0,He.jsx)("path",{d:"M3.5 6L6 8.5L14.5 0",stroke:r(),strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),t&&(0,He.jsx)("path",{d:"M6.5 6L9 8.5L17.5 0",stroke:r(),strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})]})},nx=(e,t)=>{const n={fono:{badge:"\ud83d\udde3\ufe0f Fono",color:"#3498db",avatar:"FO"},fonoaudiologia:{badge:"\ud83d\udde3\ufe0f Fono",color:"#3498db",avatar:"FO"},psico:{badge:"\ud83e\udde0 Psico",color:"#e74c3c",avatar:"PS"},psicologia:{badge:"\ud83e\udde0 Psico",color:"#e74c3c",avatar:"PS"},music:{badge:"\ud83c\udfb5 Music",color:"#9b59b6",avatar:"MU"},musicoterapia:{badge:"\ud83c\udfb5 Music",color:"#9b59b6",avatar:"MU"},to:{badge:"\ud83c\udfe5 TO",color:"#f39c12",avatar:"TO"},terapiaocupacional:{badge:"\ud83c\udfe5 TO",color:"#f39c12",avatar:"TO"},fisio:{badge:"\ud83e\udd38 Fisio",color:"#27ae60",avatar:"FI"},fisioterapia:{badge:"\ud83e\udd38 Fisio",color:"#27ae60",avatar:"FI"},psicomotricidade:{badge:"\ud83e\udd38 Psico",color:"#27ae60",avatar:"PM"},psicopedagogia:{badge:"\ud83d\udcda Psicoped",color:"#e67e22",avatar:"PP"}};if("pai"===t||"parent"===t)return{badge:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 Fam\xedlia",color:"#2ecc71",avatar:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"};if("admin"===t||"administrador"===t)return{badge:"\u2699\ufe0f Admin",color:"#34495e",avatar:"AD"};if(e){const t=e.toLowerCase();for(const[e,a]of Object.entries(n))if(t.includes(e))return a}return{badge:"\ud83d\udc68\u200d\u2695\ufe0f Terapeuta",color:"#3498db",avatar:e?e.split(" ").map((e=>e[0])).join("").substring(0,2).toUpperCase():"TR"}},ax=(e,t,n)=>{if(e===t)return"current";const a=(n||"").toLowerCase();return a.includes("fono")?"fono":a.includes("psico")&&!a.includes("psicomotricidade")?"psico":a.includes("music")?"music":a.includes("to")||a.includes("terapiaocupacional")?"to":a.includes("fisio")||a.includes("psicomotricidade")?"fisio":a.includes("psicopedagogia")?"psicoped":a.includes("pai")||a.includes("m\xe3e")||a.includes("mae")||a.includes("familia")||a.includes("responsavel")?"parent":a.includes("admin")?"admin":"therapist"},rx=e=>{let{patientId:t,patientName:n}=e;const[r,s]=(0,a.useState)([]),[i,o]=(0,a.useState)(""),[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(null),[h,m]=(0,a.useState)([]),[f,p]=(0,a.useState)(!1),[g,x]=(0,a.useState)(""),[b,v]=(0,a.useState)(0),{user:y}=Ge(),w=(0,a.useRef)(null),j=(0,a.useRef)(null),[,N]=(0,a.useState)(0);(0,a.useEffect)((()=>{var e;null===(e=w.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),r.length>0&&window.dispatchEvent(new CustomEvent("notificationUpdate"))}),[r]),(0,a.useEffect)((()=>{const e=setInterval((()=>{N((e=>e+1))}),1e3);return()=>clearInterval(e)}),[]),(0,a.useEffect)((()=>{t?(console.log("[PARENT-CHAT] Iniciando carregamento de terapeutas"),(async()=>{try{console.log("[PARENT-CHAT] Carregando terapeutas para men\xe7\xf5es:",{patientId:t,userRole:null===y||void 0===y?void 0:y.role});const e=await Qg(t);console.log("[PARENT-CHAT] Terapeutas carregados:",e.therapists),m(e.therapists||[])}catch(d){console.error("[PARENT-CHAT] Erro ao carregar terapeutas:",d),m([])}})()):console.log("[PARENT-CHAT] N\xe3o carregando terapeutas - patientId:",t)}),[t,y]),(0,a.useEffect)((()=>{if(!t)return;const e=Xg(qe.G),n="patient-".concat(t);e.emit("joinRoom",n),e.on("newMessage",(e=>{console.log("Mensagem recebida via Socket.IO:",e),s((t=>e.clientId?t.map((t=>t.id===e.clientId?(0,Ie.A)((0,Ie.A)({},e),{},{isOptimistic:!1}):t)):t.some((t=>t.id===e.id))?t:[...t,e]))}));return(async()=>{try{c(!0);const e=await(async e=>{try{const t=localStorage.getItem("token");return(await $e.A.get("".concat(Kg,"/").concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).data}catch(d){throw d}})(t);s(e),u(null)}catch(yj){u("N\xe3o foi poss\xedvel carregar as mensagens."),console.error(yj)}finally{c(!1)}})(),()=>{e.disconnect()}}),[t]);const _=e=>{var t;const n=i.lastIndexOf("@");if(-1!==n){const t=i.substring(0,n),a="@".concat(e.full_name," ");o(t+a)}p(!1),null===(t=j.current)||void 0===t||t.focus()},S=h.filter((e=>{if(!g)return!0;const t=g.toLowerCase(),n=e.full_name.toLowerCase(),a=n.split(" "),r=a.map((e=>e[0])).join("");return n.includes(t)||r.includes(t)||a.some((e=>e.startsWith(t)))}));return(0,He.jsxs)("div",{className:"chat-container",children:[(0,He.jsx)("header",{className:"chat-header",children:(0,He.jsxs)("h3",{children:["Conversa sobre ",n]})}),(0,He.jsxs)("main",{className:"chat-messages",children:[l&&(0,He.jsx)("p",{className:"chat-info",children:"Carregando mensagens..."}),d&&(0,He.jsx)("p",{className:"chat-info error",children:d}),!l&&0===r.length&&(0,He.jsx)("p",{className:"chat-info",children:"Nenhuma mensagem ainda. Seja o primeiro a come\xe7ar!"}),y&&r.map((e=>{const t=e.sender_id===y.id,n=ax(e.sender_id,y.id,e.sender_name),a=nx(e.sender_name,n),r=((e,t)=>{if(!t)return null;if(e.isOptimistic)return{type:"sending",icon:(0,He.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"2px",fontSize:"0.7rem",opacity:.8},children:(0,He.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,He.jsx)("circle",{cx:"6",cy:"6",r:"1.5",fill:"#ffffff",opacity:"0.7",children:(0,He.jsx)("animate",{attributeName:"opacity",values:"0.3;1;0.3",dur:"1.5s",repeatCount:"indefinite"})})})}),text:"Enviando..."};if(e.id&&!e.isOptimistic)return Date.now()-new Date(e.created_at).getTime()>5e3?{type:"read",icon:(0,He.jsx)(tx,{double:!0,read:!0,onDarkBackground:!0}),text:"Lido"}:{type:"delivered",icon:(0,He.jsx)(tx,{double:!0,read:!1,onDarkBackground:!0}),text:"Entregue"};return{type:"sent",icon:(0,He.jsx)(tx,{double:!1,read:!1,onDarkBackground:!0}),text:"Enviado"}})(e,t);return(0,He.jsxs)("div",{className:"message-wrapper ".concat(t?"sent":"received"),children:[!t&&(0,He.jsx)("div",{className:"message-avatar received",style:{backgroundColor:a.color},children:a.avatar}),(0,He.jsxs)("div",{className:"message-bubble ".concat(t?"sent":"received"," ").concat(n),children:[(0,He.jsx)("div",{className:"message-sender",children:t?"Voc\xea":(0,He.jsxs)("span",{children:[e.sender_name,(0,He.jsx)("span",{className:"specialty-badge",style:{backgroundColor:a.color,color:"white",fontSize:"0.7rem",padding:"2px 6px",borderRadius:"10px",marginLeft:"8px",fontWeight:"500"},children:a.badge})]})}),(0,He.jsx)("div",{className:"message-content",children:(i=e.message,i.split(/@(\w+(?:\s+\w+)*)/g).map(((e,t)=>{if(t%2===1){var n;const a=y&&e.toLowerCase().includes(null===(n=y.full_name)||void 0===n?void 0:n.toLowerCase());return(0,He.jsxs)("span",{className:"px-2 py-1 rounded-md font-semibold ".concat(a?"bg-blue-100 text-blue-800 border border-blue-200":"bg-gray-100 text-gray-800 border border-gray-200"),children:["@",e]},t)}return e})))}),(0,He.jsxs)("div",{className:"message-timestamp",children:[(s=e.created_at,new Date(s).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})),r&&(0,He.jsx)("span",{className:"message-status",style:{marginLeft:"8px",opacity:.7},children:r.icon})]})]}),t&&(0,He.jsx)("div",{className:"message-avatar sent",style:{backgroundColor:"#007bff"},children:"EU"})]},e.id);var s,i})),(0,He.jsx)("div",{ref:w})]}),(0,He.jsxs)("footer",{className:"chat-input-area",children:[(0,He.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),""===i.trim()||!y)return;let n;try{n=Date.now().toString();const e={id:n,sender_id:y.id,sender_name:y.full_name,message:i,created_at:(new Date).toISOString(),patient_id:t,isOptimistic:!0};s((t=>[...t,e])),o("");await(async e=>{try{const t=localStorage.getItem("token");return(await $e.A.post("".concat(Kg,"/").concat(e.patient_id),e,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).data}catch(d){throw d}})({patient_id:t,message:i,sender_id:y.id,clientId:n});window.dispatchEvent(new CustomEvent("messageSentOrReceived"))}catch(yj){u("Falha ao enviar mensagem."),n&&s((e=>e.filter((e=>e.id!==n))))}},className:"chat-form",children:[(0,He.jsxs)("div",{className:"relative flex-grow",children:[(0,He.jsx)("input",{ref:j,type:"text",value:i,onChange:e=>{const t=e.target.value;o(t),console.log("[PARENT-CHAT] Input mudou:",t),console.log("[PARENT-CHAT] Terapeutas dispon\xedveis:",h.length);const n=t.lastIndexOf("@");if(-1!==n){const e=t.substring(n+1),a=e.indexOf(" ");console.log("[PARENT-CHAT] Detectou @:",{lastAtIndex:n,textAfterAt:e,spaceIndex:a}),-1===a?(x(e.toLowerCase()),p(!0),v(0),console.log("[PARENT-CHAT] Mostrando dropdown - busca:",e.toLowerCase())):(p(!1),console.log("[PARENT-CHAT] Escondendo dropdown - espa\xe7o encontrado"))}else p(!1),console.log("[PARENT-CHAT] Escondendo dropdown - sem @")},onKeyDown:e=>{if(f&&0!==S.length)switch(e.key){case"ArrowDown":e.preventDefault(),v((e=>e<S.length-1?e+1:0));break;case"ArrowUp":e.preventDefault(),v((e=>e>0?e-1:S.length-1));break;case"Enter":f&&S[b]&&(e.preventDefault(),_(S[b]));break;case"Escape":p(!1)}},placeholder:"Digite sua mensagem... (use @nome para mencionar um terapeuta)",className:"chat-input",disabled:l}),f&&S.length>0&&(0,He.jsxs)("div",{className:"absolute bottom-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto z-10 mb-2",children:[(0,He.jsxs)("div",{className:"p-2 bg-gray-50 border-b border-gray-200 text-xs font-medium text-gray-600",children:["\ud83d\udcac Mencionar terapeuta (",S.length," ",1===S.length?"encontrado":"encontrados",")"]}),S.map(((e,t)=>{const n=nx(e.full_name,ax(e.id,y.id,e.full_name)),a=t===b;return(0,He.jsxs)("div",{onClick:()=>_(e),className:"flex items-center p-3 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors ".concat(a?"bg-blue-50 border-blue-200":"hover:bg-gray-50"),children:[(0,He.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-xs mr-3 shadow-sm",style:{backgroundColor:n.color},children:n.avatar}),(0,He.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,He.jsx)("p",{className:"text-sm font-medium truncate ".concat(a?"text-blue-900":"text-gray-900"),children:e.full_name}),(0,He.jsxs)("div",{className:"flex items-center mt-1",children:[(0,He.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full text-white mr-2",style:{backgroundColor:n.color},children:n.badge}),a&&(0,He.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:"\u21b5 Enter para mencionar"})]})]})]},e.id)})),(0,He.jsx)("div",{className:"p-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-500",children:"\ud83d\udca1 Use \u2191\u2193 para navegar, Enter para selecionar, Esc para fechar"})]})]}),(0,He.jsx)("button",{type:"submit",className:"send-button",disabled:!i.trim(),children:(0,He.jsx)(ex,{})})]}),h.length>0&&(0,He.jsxs)("div",{className:"text-xs text-gray-500 mt-1 px-3 flex items-center justify-between",children:[(0,He.jsxs)("span",{children:["\ud83d\udca1 Digite @",h.length>3?"nome":h.map((e=>e.full_name.split(" ")[0].toLowerCase())).join(", @")," para mencionar um terapeuta espec\xedfico"]}),(0,He.jsxs)("span",{className:"text-gray-400",children:[h.length," terapeuta",1!==h.length?"s":""," dispon\xedvel",1!==h.length?"is":""]})]})]})]})},sx="".concat(qe.H,"/discussions"),ix=()=>(0,He.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,He.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),ox=e=>{let{double:t=!1,read:n=!1,onDarkBackground:a=!1}=e;const r=()=>a?n?"#00ff88":"#ffffff":n?"#00c851":"#666666";return(0,He.jsxs)("svg",{width:"18",height:"12",viewBox:"0 0 18 12",fill:"none",style:{display:"inline-block",filter:a&&n?"drop-shadow(0 0 2px rgba(0, 255, 136, 0.5))":"none"},children:[(0,He.jsx)("path",{d:"M3.5 6L6 8.5L14.5 0",stroke:r(),strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),t&&(0,He.jsx)("path",{d:"M6.5 6L9 8.5L17.5 0",stroke:r(),strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})]})},lx=(e,t)=>{const n={fono:{badge:"\ud83d\udde3\ufe0f Fono",color:"#3498db",avatar:"FO"},fonoaudiologia:{badge:"\ud83d\udde3\ufe0f Fono",color:"#3498db",avatar:"FO"},psico:{badge:"\ud83e\udde0 Psico",color:"#e74c3c",avatar:"PS"},psicologia:{badge:"\ud83e\udde0 Psico",color:"#e74c3c",avatar:"PS"},music:{badge:"\ud83c\udfb5 Music",color:"#9b59b6",avatar:"MU"},musicoterapia:{badge:"\ud83c\udfb5 Music",color:"#9b59b6",avatar:"MU"},to:{badge:"\ud83c\udfe5 TO",color:"#f39c12",avatar:"TO"},terapiaocupacional:{badge:"\ud83c\udfe5 TO",color:"#f39c12",avatar:"TO"},fisio:{badge:"\ud83e\udd38 Fisio",color:"#27ae60",avatar:"FI"},fisioterapia:{badge:"\ud83e\udd38 Fisio",color:"#27ae60",avatar:"FI"},psicomotricidade:{badge:"\ud83e\udd38 Psico",color:"#27ae60",avatar:"PM"},psicopedagogia:{badge:"\ud83d\udcda Psicoped",color:"#e67e22",avatar:"PP"}};if("pai"===t||"parent"===t)return{badge:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 Fam\xedlia",color:"#2ecc71",avatar:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"};if("admin"===t||"administrador"===t)return{badge:"\u2699\ufe0f Admin",color:"#34495e",avatar:"AD"};if(e){const t=e.toLowerCase();for(const[e,a]of Object.entries(n))if(t.includes(e))return a}return{badge:"\ud83d\udc68\u200d\u2695\ufe0f Terapeuta",color:"#3498db",avatar:e?e.split(" ").map((e=>e[0])).join("").substring(0,2).toUpperCase():"TR"}},cx=(e,t,n)=>{if(e===t)return"current";const a=(n||"").toLowerCase();return a.includes("fono")?"fono":a.includes("psico")&&!a.includes("psicomotricidade")?"psico":a.includes("music")?"music":a.includes("to")||a.includes("terapiaocupacional")?"to":a.includes("fisio")||a.includes("psicomotricidade")?"fisio":a.includes("psicopedagogia")?"psicoped":a.includes("pai")||a.includes("m\xe3e")||a.includes("mae")||a.includes("familia")||a.includes("responsavel")?"parent":a.includes("admin")?"admin":"therapist"},dx=e=>{let{patientId:t,patientName:n}=e;const[r,s]=(0,a.useState)([]),[i,o]=(0,a.useState)(""),[l,c]=(0,a.useState)(!0),[d,u]=(0,a.useState)(null),[h,m]=(0,a.useState)([]),[f,p]=(0,a.useState)(!1),[g,x]=(0,a.useState)(""),[b,v]=(0,a.useState)(0),{user:y}=Ge(),w=(0,a.useRef)(null),j=(0,a.useRef)(null),[,N]=(0,a.useState)(0);(0,a.useEffect)((()=>{var e;null===(e=w.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),r.length>0&&window.dispatchEvent(new CustomEvent("notificationUpdate"))}),[r]),(0,a.useEffect)((()=>{const e=setInterval((()=>{N((e=>e+1))}),1e3);return()=>clearInterval(e)}),[]),(0,a.useEffect)((()=>{!t||"therapist"!==(null===y||void 0===y?void 0:y.role)&&"terapeuta"!==(null===y||void 0===y?void 0:y.role)?console.log("[CASE-DISCUSSION] N\xe3o carregando colegas - patientId:",t,"userRole:",null===y||void 0===y?void 0:y.role):(console.log("[CASE-DISCUSSION] Iniciando carregamento de colegas para terapeuta"),(async()=>{try{console.log("[CASE-DISCUSSION] Carregando colegas para men\xe7\xf5es:",{patientId:t,userRole:null===y||void 0===y?void 0:y.role});const e=await Zg(t);console.log("[CASE-DISCUSSION] Colegas carregados:",e.colleagues),m(e.colleagues||[])}catch(d){console.error("[CASE-DISCUSSION] Erro ao carregar colegas:",d),m([])}})())}),[t,y]),(0,a.useEffect)((()=>{if(!t)return;const e=Xg(qe.G),n="discussion-".concat(t);e.emit("joinRoom",n),e.on("newDiscussionMessage",(e=>{s((t=>[...t,e]))}));return(async()=>{try{c(!0);const e=await(async e=>{try{const t=localStorage.getItem("token");return(await $e.A.get("".concat(sx,"/patient/").concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).data}catch(d){throw d}})(t);s(e),u(null)}catch(yj){u("N\xe3o foi poss\xedvel carregar as mensagens da discuss\xe3o."),console.error(yj)}finally{c(!1)}})(),()=>{e.disconnect()}}),[t]);const _=e=>{var t;const n=i.lastIndexOf("@");if(-1!==n){const t=i.substring(0,n),a="@".concat(e.full_name," ");o(t+a)}p(!1),null===(t=j.current)||void 0===t||t.focus()},S=h.filter((e=>{if(!g)return!0;const t=g.toLowerCase(),n=e.full_name.toLowerCase(),a=n.split(" "),r=a.map((e=>e[0])).join("");return n.includes(t)||r.includes(t)||a.some((e=>e.startsWith(t)))}));return(0,He.jsxs)("div",{className:"chat-container",children:[(0,He.jsx)("header",{className:"chat-header",children:(0,He.jsxs)("h3",{children:["Discuss\xe3o de Caso sobre ",n]})}),(0,He.jsxs)("main",{className:"chat-messages",children:[l&&(0,He.jsx)("p",{className:"chat-info",children:"Carregando mensagens..."}),d&&(0,He.jsx)("p",{className:"chat-info error",children:d}),!l&&0===r.length&&(0,He.jsx)("p",{className:"chat-info",children:"Nenhuma mensagem ainda. Seja o primeiro a come\xe7ar!"}),y&&r.map((e=>{const t=e.user_id===y.id,n=cx(e.user_id,y.id,e.user_name),a=lx(e.user_name,n),r=((e,t)=>{if(!t)return null;const n=Date.now()-new Date(e.created_at).getTime();return n>5e3?{type:"read",icon:(0,He.jsx)(ox,{double:!0,read:!0,onDarkBackground:!0}),text:"Lido"}:n>1e3?{type:"delivered",icon:(0,He.jsx)(ox,{double:!0,read:!1,onDarkBackground:!0}),text:"Entregue"}:{type:"sent",icon:(0,He.jsx)(ox,{double:!1,read:!1,onDarkBackground:!0}),text:"Enviado"}})(e,t);return(0,He.jsxs)("div",{className:"message-wrapper ".concat(t?"sent":"received"),children:[!t&&(0,He.jsx)("div",{className:"message-avatar received",style:{backgroundColor:a.color},children:a.avatar}),(0,He.jsxs)("div",{className:"message-bubble ".concat(t?"sent":"received"," ").concat(n),children:[(0,He.jsx)("div",{className:"message-sender",children:t?"Voc\xea":(0,He.jsxs)("span",{children:[e.user_name,(0,He.jsx)("span",{className:"specialty-badge",style:{backgroundColor:a.color,color:"white",fontSize:"0.7rem",padding:"2px 6px",borderRadius:"10px",marginLeft:"8px",fontWeight:"500"},children:a.badge})]})}),(0,He.jsx)("div",{className:"message-content",children:(i=e.content,i.split(/@(\w+(?:\s+\w+)*)/g).map(((e,t)=>{if(t%2===1){var n;const a=y&&e.toLowerCase().includes(null===(n=y.full_name)||void 0===n?void 0:n.toLowerCase());return(0,He.jsxs)("span",{className:"px-2 py-1 rounded-md font-semibold ".concat(a?"bg-blue-100 text-blue-800 border border-blue-200":"bg-gray-100 text-gray-800 border border-gray-200"),children:["@",e]},t)}return e})))}),(0,He.jsxs)("div",{className:"message-timestamp",children:[(s=e.created_at,new Date(s).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})),r&&(0,He.jsx)("span",{className:"message-status",style:{marginLeft:"8px",opacity:.7},children:r.icon})]})]}),t&&(0,He.jsx)("div",{className:"message-avatar sent",style:{backgroundColor:"#007bff"},children:"EU"})]},e.id);var s,i})),(0,He.jsx)("div",{ref:w})]}),(0,He.jsxs)("footer",{className:"chat-input-area",children:[(0,He.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),""!==i.trim()&&y)try{await(async(e,t)=>{try{const n=localStorage.getItem("token");return(await $e.A.post("".concat(sx,"/patient/").concat(e),{content:t},{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}})).data}catch(d){throw d}})(t,i),o("")}catch(yj){u("Falha ao enviar mensagem.")}},className:"chat-form",children:[(0,He.jsxs)("div",{className:"relative flex-grow",children:[(0,He.jsx)("input",{ref:j,type:"text",value:i,onChange:e=>{const t=e.target.value;o(t),console.log("[CASE-DISCUSSION] Input mudou:",t),console.log("[CASE-DISCUSSION] Colegas dispon\xedveis:",h.length);const n=t.lastIndexOf("@");if(-1!==n){const e=t.substring(n+1),a=e.indexOf(" ");console.log("[CASE-DISCUSSION] Detectou @:",{lastAtIndex:n,textAfterAt:e,spaceIndex:a}),-1===a?(x(e.toLowerCase()),p(!0),v(0),console.log("[CASE-DISCUSSION] Mostrando dropdown - busca:",e.toLowerCase())):(p(!1),console.log("[CASE-DISCUSSION] Escondendo dropdown - espa\xe7o encontrado"))}else p(!1),console.log("[CASE-DISCUSSION] Escondendo dropdown - sem @")},onKeyDown:e=>{if(f&&0!==S.length)switch(e.key){case"ArrowDown":e.preventDefault(),v((e=>e<S.length-1?e+1:0));break;case"ArrowUp":e.preventDefault(),v((e=>e>0?e-1:S.length-1));break;case"Enter":f&&S[b]&&(e.preventDefault(),_(S[b]));break;case"Escape":p(!1)}},placeholder:"Digite sua mensagem... (use @nome para mencionar um colega)",className:"chat-input",disabled:l}),f&&S.length>0&&(0,He.jsxs)("div",{className:"absolute bottom-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto z-10 mb-2",children:[(0,He.jsxs)("div",{className:"p-2 bg-gray-50 border-b border-gray-200 text-xs font-medium text-gray-600",children:["\ud83d\udcac Mencionar colega (",S.length," ",1===S.length?"encontrado":"encontrados",")"]}),S.map(((e,t)=>{const n=lx(e.full_name,cx(e.id,y.id,e.full_name)),a=t===b;return(0,He.jsxs)("div",{onClick:()=>_(e),className:"flex items-center p-3 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors ".concat(a?"bg-blue-50 border-blue-200":"hover:bg-gray-50"),children:[(0,He.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-xs mr-3 shadow-sm",style:{backgroundColor:n.color},children:n.avatar}),(0,He.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,He.jsx)("p",{className:"text-sm font-medium truncate ".concat(a?"text-blue-900":"text-gray-900"),children:e.full_name}),(0,He.jsxs)("div",{className:"flex items-center mt-1",children:[(0,He.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full text-white mr-2",style:{backgroundColor:n.color},children:n.badge}),a&&(0,He.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:"\u21b5 Enter para mencionar"})]})]})]},e.id)})),(0,He.jsx)("div",{className:"p-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-500",children:"\ud83d\udca1 Use \u2191\u2193 para navegar, Enter para selecionar, Esc para fechar"})]})]}),(0,He.jsx)("button",{type:"submit",className:"send-button",disabled:!i.trim(),children:(0,He.jsx)(ix,{})})]}),h.length>0&&(0,He.jsxs)("div",{className:"text-xs text-gray-500 mt-1 px-3 flex items-center justify-between",children:[(0,He.jsxs)("span",{children:["\ud83d\udca1 Digite @",h.length>3?"nome":h.map((e=>e.full_name.split(" ")[0].toLowerCase())).join(", @")," para mencionar um colega espec\xedfico"]}),(0,He.jsxs)("span",{className:"text-gray-400",children:[h.length," colega",1!==h.length?"s":""," dispon\xedvel",1!==h.length?"is":""]})]})]})]})},ux=e=>{if(!e)return"N\xe3o informado";try{return new Date(e).toLocaleDateString("pt-BR")}catch(t){return"Data inv\xe1lida"}},hx=e=>{var t,n,r,s,i,o,l,c,d,u,h;let{isOpen:m,onClose:f,reportData:p,analysisData:g,patientData:x,professionalData:b,onEditSection:v,customizations:y={},onUpdateCustomizations:w}=e;const[j,N]=(0,a.useState)(null),[_,S]=(0,a.useState)({}),[k,C]=(0,a.useState)(!1);if((0,a.useEffect)((()=>{S(y)}),[y]),!m)return null;const A=e=>{N(e)},P=e=>{w((0,Ie.A)((0,Ie.A)({},y),{},{[e]:_[e]})),N(null)},L=()=>{S(y),N(null)},E=async()=>{C(!0);try{await(async e=>{const{reportData:t,analysisData:n,patientData:a,professionalData:r,customizations:s={}}=e;if(t&&n)try{var i,o,l,c,d;const e=new qo.default({orientation:"portrait",unit:"mm",format:"a4"}),y=15,w=e.internal.pageSize.getWidth(),j=w-2*y;let N=y+10,_=1;const S=t=>{e.setFontSize(8),e.setTextColor(100);const n="P\xe1gina ".concat(t);e.text(n,w/2,e.internal.pageSize.getHeight()-y/2,{align:"center"}),e.text("Gerado em: ".concat(Cp((new Date).toISOString())),y,e.internal.pageSize.getHeight()-y/2),e.text("Relat\xf3rio Profissional Detalhado",w-y,e.internal.pageSize.getHeight()-y/2,{align:"right"}),e.setTextColor(0)},k=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t>e.internal.pageSize.getHeight()-y-n-10){const t=e.internal.getFontSize(),n=e.internal.getFont(),r=e.internal.getTextColor();return S(_),e.addPage(),_++,a&&(e.setFontSize(t),e.setFont(n.fontName,n.fontStyle),e.setTextColor(r)),y+10}return t},C=function(t,n,a,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;if(!t)return a;const i=e.splitTextToSize(t,r);let o=a;for(let l=0;l<i.length;l++)o=k(o,s+5,!0),e.text(i[l],n,o),o+=s;return o};e.setFontSize(18),e.setFont("helvetica","bold"),e.text("RELAT\xd3RIO DE EVOLU\xc7\xc3O TERAP\xcaUTICA",w/2,N,{align:"center"}),N+=6,e.setFontSize(14),e.text("AN\xc1LISE COMPORTAMENTAL",w/2,N,{align:"center"}),N+=10,(t.clinic_name||r.professional_name)&&(e.setFontSize(10),e.setFont("helvetica","normal"),t.clinic_name&&(e.text("Cl\xednica: ".concat(t.clinic_name),w/2,N,{align:"center"}),N+=5),r.professional_name&&(e.text("Profissional: ".concat(r.professional_name),w/2,N,{align:"center"}),N+=5,r.professional_id&&(e.text("".concat(r.professional_id),w/2,N,{align:"center"}),N+=6))),N+=5,e.setLineWidth(.5),e.line(y,N,w-y,N),N+=10,N=k(N,25),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("1. IDENTIFICA\xc7\xc3O DO USU\xc1RIO",y,N),N+=8,e.setFontSize(10),e.setFont("helvetica","normal"),e.text("Nome: ".concat(t.name),y,N),N+=5,e.text("Data de Nascimento: ".concat(Cp(t.dob)),y,N),N+=5,e.text("Idade: ".concat(t.dob?Math.floor((new Date-new Date(t.dob))/315576e5):"N/A"," anos"),y,N),N+=5;const A="Diagn\xf3stico: ".concat(t.diagnosis||"N\xe3o informado");if(N=C(A,y,N,j),N+=5,a.guardian_name){const e="Respons\xe1vel: ".concat(a.guardian_name," (").concat(a.guardian_relationship,")");N=C(e,y,N,j),N+=5}a.patient_occupation&&(e.text("Ocupa\xe7\xe3o: ".concat(a.patient_occupation),y,N),N+=5),N+=5,N=k(N,20),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("2. DESCRI\xc7\xc3O DA DEMANDA",y,N),N+=8,e.setFontSize(10),e.setFont("helvetica","normal"),e.setFont("helvetica","bold"),e.text("Queixa Principal:",y,N),N+=5,e.setFont("helvetica","normal");const P=(null===(i=s.demand)||void 0===i?void 0:i.main_complaint)||a.main_complaint||"N\xe3o informado";N=C(P,y,N,j),N+=5,e.setFont("helvetica","bold"),e.text("Objetivos do Tratamento:",y,N),N+=5,e.setFont("helvetica","normal");const L=(null===(o=s.demand)||void 0===o?void 0:o.treatment_objectives)||a.treatment_objectives||"A serem definidos com base na avalia\xe7\xe3o inicial";if(N=C(L,y,N,j),N+=8,N=k(N,20),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("3. OBJETIVOS ESPEC\xcdFICOS DOS PROGRAMAS",y,N),N+=8,t.active_programs&&t.active_programs.length>0){e.setFontSize(10),e.setFont("helvetica","normal");const n=t.active_programs.reduce(((e,t)=>(e[t.discipline_name]||(e[t.discipline_name]=[]),e[t.discipline_name].push(t),e)),{});Object.keys(n).sort().forEach((t=>{N=k(N,15),e.setFont("helvetica","bold"),e.text("".concat(t,":"),y,N),N+=5,n[t].forEach((t=>{N=k(N,10),e.setFont("helvetica","normal"),e.text("\u2022 ".concat(t.program_name),y+5,N),N+=4,t.objective&&(e.setFont("helvetica","italic"),N=C("Objetivo: ".concat(t.objective),y+10,N,j-10,4),N+=2)})),N+=3}))}else e.setFont("helvetica","italic"),e.text("Nenhum programa ativo no per\xedodo analisado.",y,N),N+=5;if(N+=5,N=k(N,20),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("4. REGISTRO DA EVOLU\xc7\xc3O DAS SESS\xd5ES",y,N),N+=8,e.setFontSize(10),e.setFont("helvetica","normal"),n.period&&(e.text("Per\xedodo analisado: ".concat(Cp(n.period.start_date)," a ").concat(Cp(n.period.end_date)),y,N),N+=5),n.statistics){const t=n.statistics;e.setFont("helvetica","normal"),e.text("\u2022 Total de sess\xf5es realizadas: ".concat(t.total_sessions),y+3,N),N+=5,e.text("\u2022 Programas trabalhados: ".concat(t.programs_worked),y+3,N),N+=5,e.text("\u2022 M\xe9dia geral de acertos: ".concat(t.avg_score.toFixed(1),"%"),y+3,N),N+=5,e.text("\u2022 N\xedvel de independ\xeancia: ".concat(t.independence_percentage.toFixed(1),"%"),y+3,N),N+=5;let a="\u2022 Tend\xeancia: ";switch(t.improvement_trend){case"significant_improvement":a+="Melhoria significativa observada";break;case"moderate_improvement":a+="Melhoria gradual observada";break;case"stable":a+="Desempenho est\xe1vel mantido";break;case"moderate_decline":a+="Decl\xednio moderado observado";break;case"significant_decline":a+="Decl\xednio significativo observado";break;default:a+="Dados insuficientes para an\xe1lise de tend\xeancia"}e.text(a,y+3,N),N+=7}if(n.frequent_observations&&n.frequent_observations.length>0&&(N=k(N,15),e.setFont("helvetica","bold"),e.text("Observa\xe7\xf5es Registradas nas Sess\xf5es:",y,N),N+=5,e.setFont("helvetica","normal"),n.frequent_observations.slice(0,8).forEach((e=>{N=k(N,15);const t='\u2022 "'.concat(e.note,'" (observado em ').concat(e.frequency," sess\xe3o").concat(e.frequency>1?"\xf5es":"",")");N=C(t,y+3,N,j-3),N+=3})),N+=3),n.area_performance&&n.area_performance.length>0&&(N=k(N,15),e.setFont("helvetica","bold"),e.text("Desempenho por \xc1rea de Interven\xe7\xe3o:",y,N),N+=5,e.setFont("helvetica","normal"),n.area_performance.forEach((t=>{N=k(N,8),e.text("\u2022 ".concat(t.area_name,": ").concat(t.avg_score.toFixed(1),"% (").concat(t.session_count," sess\xf5es)"),y+3,N),N+=5})),N+=6),N=k(N,20),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("5. AN\xc1LISE E INTERPRETA\xc7\xc3O",y,N),N+=8,e.setFontSize(10),e.setFont("helvetica","normal"),null!==(l=s.analysis)&&void 0!==l&&l.clinical_interpretation?N=C(s.analysis.clinical_interpretation,y,N,j):n.insights&&n.insights.length>0?(N=C("Com base nos dados coletados e na an\xe1lise comportamental, observa-se:",y,N,j),N+=6,n.insights.forEach((e=>{N=k(N,15);const t="\u2022 ".concat(e.text);N=C(t,y+3,N,j-3),N+=3}))):(N=C("An\xe1lise em desenvolvimento com base nos dados coletados.",y,N,j),N+=5),N+=8,N=k(N,20),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("6. CONCLUS\xc3O E ENCAMINHAMENTOS",y,N),N+=8,e.setFontSize(10),e.setFont("helvetica","normal"),e.setFont("helvetica","bold"),e.text("S\xedntese do Per\xedodo:",y,N),N+=5,e.setFont("helvetica","normal"),null!==(c=s.conclusions)&&void 0!==c&&c.summary)N=C(s.conclusions.summary,y,N,j);else{var u,h,m,f,p,g;const e="Durante o per\xedodo analisado, foram realizadas ".concat((null===(u=n.statistics)||void 0===u?void 0:u.total_sessions)||0," sess\xf5es terap\xeauticas abrangendo ").concat((null===(h=n.statistics)||void 0===h?void 0:h.programs_worked)||0," programa(s) de interven\xe7\xe3o. O desempenho m\xe9dio apresentado foi de ").concat((null===(m=n.statistics)||void 0===m||null===(f=m.avg_score)||void 0===f?void 0:f.toFixed(1))||0,"% de acertos, com ").concat((null===(p=n.statistics)||void 0===p||null===(g=p.independence_percentage)||void 0===g?void 0:g.toFixed(1))||0,"% das respostas em n\xedvel independente.");N=C(e,y,N,j)}if(N+=6,e.setFont("helvetica","bold"),e.text("Recomenda\xe7\xf5es:",y,N),N+=5,e.setFont("helvetica","normal"),null!==(d=s.conclusions)&&void 0!==d&&d.recommendations)N=C(s.conclusions.recommendations,y,N,j);else{var x,b,v;let e="Recomenda-se continuidade do programa de interven\xe7\xe3o com ";"significant_improvement"===(null===(x=n.statistics)||void 0===x?void 0:x.improvement_trend)||"moderate_improvement"===(null===(b=n.statistics)||void 0===b?void 0:b.improvement_trend)?e+="manuten\xe7\xe3o das estrat\xe9gias atuais e considera\xe7\xe3o de aumento da complexidade dos objetivos trabalhados.":"stable"===(null===(v=n.statistics)||void 0===v?void 0:v.improvement_trend)?e+="revis\xe3o das estrat\xe9gias para promover maior avan\xe7o no desenvolvimento das habilidades.":e+="revis\xe3o criteriosa dos procedimentos e estrat\xe9gias utilizadas, bem como investiga\xe7\xe3o de poss\xedveis vari\xe1veis interferentes.",N=C(e,y,N,j)}N+=10,N=k(N,25),e.setLineWidth(.3),e.line(w-y-60,N,w-y,N),N+=5,e.setFontSize(9),e.setFont("helvetica","normal"),e.text(r.professional_name||"Profissional Respons\xe1vel",w-y-30,N,{align:"center"}),N+=3,e.text(r.professional_id||"Registro Profissional",w-y-30,N,{align:"center"}),r.qualifications&&(N+=3,e.splitTextToSize(r.qualifications,60).forEach((t=>{e.text(t,w-y-30,N,{align:"center"}),N+=3}))),S(_);const E="Relatorio_Evolucao_Terapeutica_".concat(t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".pdf");e.save(E)}catch(y){console.error("Erro ao gerar Relat\xf3rio de Evolu\xe7\xe3o Terap\xeautica:",y),alert("Erro ao gerar o Relat\xf3rio de Evolu\xe7\xe3o Terap\xeautica. Tente novamente.")}else alert("Dados insuficientes para gerar o relat\xf3rio.")})({reportData:p,analysisData:g,patientData:x,professionalData:b,customizations:y})}catch(e){console.error("Erro ao gerar PDF:",e),alert("Erro ao gerar PDF. Tente novamente.")}finally{C(!1)}},D=e=>{switch(e){case"positive":return{icon:Fs,color:"text-green-600"};case"attention":return{icon:go,color:"text-yellow-600"};default:return{icon:gi,color:"text-blue-600"}}};return(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,He.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 flex justify-between items-center",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("h2",{className:"text-xl font-bold text-white",children:"Preview - Relat\xf3rio de Evolu\xe7\xe3o Terap\xeautica"}),(0,He.jsxs)("p",{className:"text-indigo-100 text-sm",children:[null===p||void 0===p?void 0:p.name," \u2022 Revise e personalize antes de gerar o PDF"]})]}),(0,He.jsxs)("div",{className:"flex space-x-3",children:[(0,He.jsx)("button",{onClick:E,disabled:k,className:"bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg transition-all disabled:opacity-50 flex items-center space-x-2",children:k?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin"}),(0,He.jsx)("span",{children:"Gerando..."})]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:di}),(0,He.jsx)("span",{children:"Gerar PDF"})]})}),(0,He.jsx)("button",{onClick:f,className:"text-white hover:text-indigo-200 transition-colors text-xl",children:(0,He.jsx)(Hr,{icon:Vi})})]})]}),(0,He.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,He.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)(Hr,{icon:js,className:"text-indigo-600 text-lg"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"1. Identifica\xe7\xe3o do Usu\xe1rio"})]}),(0,He.jsx)("button",{onClick:()=>A("identification"),className:"text-indigo-600 hover:text-indigo-800 transition-colors",children:(0,He.jsx)(Hr,{icon:gs})})]}),(0,He.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-600",children:"Nome:"}),(0,He.jsx)("p",{className:"text-gray-800",children:null===p||void 0===p?void 0:p.name})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-600",children:"Data de Nascimento:"}),(0,He.jsx)("p",{className:"text-gray-800",children:ux(null===p||void 0===p?void 0:p.dob)})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-600",children:"Diagn\xf3stico:"}),(0,He.jsx)("p",{className:"text-gray-800",children:(null===p||void 0===p?void 0:p.diagnosis)||"N\xe3o informado"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-600",children:"Ocupa\xe7\xe3o:"}),(0,He.jsx)("p",{className:"text-gray-800",children:(null===x||void 0===x?void 0:x.patient_occupation)||"N\xe3o informado"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-600",children:"Respons\xe1vel:"}),(0,He.jsxs)("p",{className:"text-gray-800",children:[null===x||void 0===x?void 0:x.guardian_name," (",null===x||void 0===x?void 0:x.guardian_relationship,")"]})]})]})]}),(0,He.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)(Hr,{icon:ys,className:"text-blue-600 text-lg"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"2. Descri\xe7\xe3o da Demanda"})]}),(0,He.jsx)("button",{onClick:()=>A("demand"),className:"text-blue-600 hover:text-blue-800 transition-colors",children:(0,He.jsx)(Hr,{icon:gs})})]}),"demand"===j?(0,He.jsxs)("div",{className:"space-y-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Queixa Principal:"}),(0,He.jsx)("textarea",{value:(null===(t=_.demand)||void 0===t?void 0:t.main_complaint)||(null===x||void 0===x?void 0:x.main_complaint)||"",onChange:e=>S((t=>(0,Ie.A)((0,Ie.A)({},t),{},{demand:(0,Ie.A)((0,Ie.A)({},t.demand),{},{main_complaint:e.target.value})}))),className:"w-full p-3 border border-gray-300 rounded-lg resize-none",rows:"3"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Objetivos do Tratamento:"}),(0,He.jsx)("textarea",{value:(null===(n=_.demand)||void 0===n?void 0:n.treatment_objectives)||(null===x||void 0===x?void 0:x.treatment_objectives)||"",onChange:e=>S((t=>(0,Ie.A)((0,Ie.A)({},t),{},{demand:(0,Ie.A)((0,Ie.A)({},t.demand),{},{treatment_objectives:e.target.value})}))),className:"w-full p-3 border border-gray-300 rounded-lg resize-none",rows:"3"})]}),(0,He.jsxs)("div",{className:"flex space-x-3",children:[(0,He.jsxs)("button",{onClick:()=>P("demand"),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,He.jsx)(Hr,{icon:fo}),(0,He.jsx)("span",{children:"Salvar"})]}),(0,He.jsx)("button",{onClick:L,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]}):(0,He.jsxs)("div",{className:"space-y-3",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-600",children:"Queixa Principal:"}),(0,He.jsx)("p",{className:"text-gray-800 mt-1",children:(null===(r=y.demand)||void 0===r?void 0:r.main_complaint)||(null===x||void 0===x?void 0:x.main_complaint)||"N\xe3o informado"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-600",children:"Objetivos do Tratamento:"}),(0,He.jsx)("p",{className:"text-gray-800 mt-1",children:(null===(s=y.demand)||void 0===s?void 0:s.treatment_objectives)||(null===x||void 0===x?void 0:x.treatment_objectives)||"N\xe3o informado"})]})]})]}),(0,He.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)(Hr,{icon:Qs,className:"text-purple-600 text-lg"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"3. Registro da Evolu\xe7\xe3o das Sess\xf5es"})]}),(0,He.jsx)("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded",children:"Dados objetivos - N\xe3o edit\xe1vel"})]}),(null===g||void 0===g?void 0:g.statistics)&&(0,He.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:g.statistics.total_sessions}),(0,He.jsx)("div",{className:"text-gray-600",children:"Sess\xf5es Realizadas"})]}),(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[g.statistics.avg_score.toFixed(1),"%"]}),(0,He.jsx)("div",{className:"text-gray-600",children:"M\xe9dia de Acertos"})]}),(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[g.statistics.independence_percentage.toFixed(1),"%"]}),(0,He.jsx)("div",{className:"text-gray-600",children:"Independ\xeancia"})]})]}),(null===g||void 0===g?void 0:g.frequent_observations)&&g.frequent_observations.length>0&&(0,He.jsxs)("div",{className:"mt-4",children:[(0,He.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Observa\xe7\xf5es Mais Frequentes:"}),(0,He.jsx)("ul",{className:"space-y-1 text-sm",children:g.frequent_observations.slice(0,5).map(((e,t)=>(0,He.jsxs)("li",{className:"flex justify-between",children:[(0,He.jsxs)("span",{className:"text-gray-800",children:['"',e.note,'"']}),(0,He.jsxs)("span",{className:"text-gray-500",children:["(",e.frequency,"x)"]})]},t)))})]})]}),(0,He.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)(Hr,{icon:us,className:"text-yellow-600 text-lg"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"4. An\xe1lise"})]}),(0,He.jsx)("button",{onClick:()=>A("analysis"),className:"text-yellow-600 hover:text-yellow-800 transition-colors",children:(0,He.jsx)(Hr,{icon:gs})})]}),"analysis"===j?(0,He.jsxs)("div",{className:"space-y-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"An\xe1lise Comportamental:"}),(0,He.jsx)("textarea",{value:(null===(i=_.analysis)||void 0===i?void 0:i.clinical_interpretation)||"",onChange:e=>S((t=>(0,Ie.A)((0,Ie.A)({},t),{},{analysis:(0,Ie.A)((0,Ie.A)({},t.analysis),{},{clinical_interpretation:e.target.value})}))),placeholder:"Interpreta\xe7\xe3o dos dados baseada nos princ\xedpios da An\xe1lise do Comportamento...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none",rows:"5"})]}),(null===g||void 0===g?void 0:g.insights)&&(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3 mb-4",children:(0,He.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,He.jsx)("span",{className:"text-amber-600 mt-0.5 flex-shrink-0",children:"\u26a0\ufe0f"}),(0,He.jsxs)("div",{className:"text-xs text-amber-800",children:[(0,He.jsx)("p",{className:"font-medium mb-1",children:"Responsabilidade Profissional:"}),(0,He.jsxs)("p",{children:["Os insights abaixo s\xe3o ",(0,He.jsx)("strong",{children:"sugest\xf5es autom\xe1ticas baseadas apenas em dados quantitativos"}),". \xc9 ",(0,He.jsx)("strong",{children:"imprescind\xedvel"})," que voc\xea analise, adapte e complemente com sua expertise cl\xednica, considerando aspectos comportamentais e contextuais espec\xedficos do caso."]})]})]})}),(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Insights Sugeridos (clique para adicionar):"}),(0,He.jsx)("div",{className:"space-y-2",children:g.insights.map(((e,t)=>{const{icon:n,color:a}=D(e.type);return(0,He.jsx)("button",{onClick:()=>{var t;const n=(null===(t=_.analysis)||void 0===t?void 0:t.clinical_interpretation)||"",a=n?"".concat(n,"\n\n\u2022 ").concat(e.text):"\u2022 ".concat(e.text);S((e=>(0,Ie.A)((0,Ie.A)({},e),{},{analysis:(0,Ie.A)((0,Ie.A)({},e.analysis),{},{clinical_interpretation:a})})))},className:"w-full text-left p-3 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:(0,He.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,He.jsx)(Hr,{icon:n,className:"".concat(a," mt-1")}),(0,He.jsx)("span",{className:"text-sm text-gray-800",children:e.text})]})},t)}))})]}),(0,He.jsxs)("div",{className:"flex space-x-3",children:[(0,He.jsxs)("button",{onClick:()=>P("analysis"),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,He.jsx)(Hr,{icon:fo}),(0,He.jsx)("span",{children:"Salvar"})]}),(0,He.jsx)("button",{onClick:L,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]}):(0,He.jsxs)("div",{className:"space-y-4",children:[null!==(o=y.analysis)&&void 0!==o&&o.clinical_interpretation?(0,He.jsx)("div",{children:(0,He.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:y.analysis.clinical_interpretation})}):(0,He.jsx)("div",{className:"text-gray-500 italic",children:'Clique em "Editar" para adicionar sua interpreta\xe7\xe3o cl\xednica baseada nos dados apresentados.'}),(null===g||void 0===g?void 0:g.insights)&&!(null!==(l=y.analysis)&&void 0!==l&&l.clinical_interpretation)&&(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3 mb-4",children:(0,He.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,He.jsx)("span",{className:"text-amber-600 mt-0.5 flex-shrink-0",children:"\u26a0\ufe0f"}),(0,He.jsxs)("div",{className:"text-xs text-amber-800",children:[(0,He.jsx)("p",{className:"font-medium mb-1",children:"Insights Autom\xe1ticos Dispon\xedveis:"}),(0,He.jsxs)("p",{children:["Estes insights s\xe3o baseados ",(0,He.jsx)("strong",{children:"apenas em m\xe9tricas quantitativas"}),'. Clique em "Editar" para adicionar sua interpreta\xe7\xe3o cl\xednica profissional.']})]})]})}),(0,He.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Sugest\xf5es Baseadas em Dados:"}),(0,He.jsx)("div",{className:"space-y-2",children:g.insights.map(((e,t)=>{const{icon:n,color:a}=D(e.type);return(0,He.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-white rounded-lg border border-gray-200",children:[(0,He.jsx)(Hr,{icon:n,className:"".concat(a," mt-1")}),(0,He.jsx)("span",{className:"text-sm text-gray-800",children:e.text})]},t)}))})]})]})]}),(0,He.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)(Hr,{icon:ss,className:"text-green-600 text-lg"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"5. Conclus\xe3o e Encaminhamentos"})]}),(0,He.jsx)("button",{onClick:()=>A("conclusions"),className:"text-green-600 hover:text-green-800 transition-colors",children:(0,He.jsx)(Hr,{icon:gs})})]}),"conclusions"===j?(0,He.jsxs)("div",{className:"space-y-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S\xedntese e Conclus\xf5es:"}),(0,He.jsx)("textarea",{value:(null===(c=_.conclusions)||void 0===c?void 0:c.summary)||"",onChange:e=>S((t=>(0,Ie.A)((0,Ie.A)({},t),{},{conclusions:(0,Ie.A)((0,Ie.A)({},t.conclusions),{},{summary:e.target.value})}))),placeholder:"S\xedntese do trabalho realizado e resultados alcan\xe7ados...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none",rows:"4"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recomenda\xe7\xf5es e Encaminhamentos:"}),(0,He.jsx)("textarea",{value:(null===(d=_.conclusions)||void 0===d?void 0:d.recommendations)||"",onChange:e=>S((t=>(0,Ie.A)((0,Ie.A)({},t),{},{conclusions:(0,Ie.A)((0,Ie.A)({},t.conclusions),{},{recommendations:e.target.value})}))),placeholder:"Recomenda\xe7\xf5es para continuidade do tratamento e pr\xf3ximos passos...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none",rows:"4"})]}),(0,He.jsxs)("div",{className:"flex space-x-3",children:[(0,He.jsxs)("button",{onClick:()=>P("conclusions"),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,He.jsx)(Hr,{icon:fo}),(0,He.jsx)("span",{children:"Salvar"})]}),(0,He.jsx)("button",{onClick:L,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]}):(0,He.jsxs)("div",{className:"space-y-3",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-600",children:"S\xedntese:"}),(0,He.jsx)("p",{className:"text-gray-800 mt-1",children:(null===(u=y.conclusions)||void 0===u?void 0:u.summary)||'Clique em "Editar" para adicionar s\xedntese do per\xedodo.'})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-600",children:"Recomenda\xe7\xf5es:"}),(0,He.jsx)("p",{className:"text-gray-800 mt-1",children:(null===(h=y.conclusions)||void 0===h?void 0:h.recommendations)||'Clique em "Editar" para adicionar recomenda\xe7\xf5es.'})]})]})]}),(0,He.jsxs)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,He.jsx)(Hr,{icon:fi,className:"text-indigo-600"}),(0,He.jsx)("h4",{className:"font-medium text-indigo-800",children:"Dados Profissionais"})]}),(0,He.jsxs)("div",{className:"text-sm text-indigo-700",children:[(0,He.jsxs)("p",{children:[(0,He.jsx)("strong",{children:"Profissional:"})," ",null===b||void 0===b?void 0:b.professional_name]}),(0,He.jsxs)("p",{children:[(0,He.jsx)("strong",{children:"Registro:"})," ",null===b||void 0===b?void 0:b.professional_id]}),(0,He.jsxs)("p",{children:[(0,He.jsx)("strong",{children:"Qualifica\xe7\xf5es:"})," ",null===b||void 0===b?void 0:b.qualifications]})]})]})]}),(0,He.jsxs)("div",{className:"border-t border-gray-200 px-6 py-4 flex justify-between items-center",children:[(0,He.jsx)("div",{className:"text-sm text-gray-600",children:"Preview do relat\xf3rio \u2022 Todas as edi\xe7\xf5es ser\xe3o inclu\xeddas no PDF final"}),(0,He.jsxs)("div",{className:"flex space-x-3",children:[(0,He.jsx)("button",{onClick:f,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Fechar Preview"}),(0,He.jsx)("button",{onClick:E,disabled:k,className:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 flex items-center space-x-2",children:k?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin"}),(0,He.jsx)("span",{children:"Gerando PDF..."})]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:di}),(0,He.jsx)("span",{children:"Gerar PDF Final"})]})})]})]})]})})},mx=e=>{let{isOpen:t,onClose:n,patient:r}=e;const{user:s,updateUser:i}=Ge(),{refreshAndReselectPatient:o}=ct(),[l,c]=(0,a.useState)({professional_id:"",qualifications:"",professional_signature:""}),[d,u]=(0,a.useState)({guardian_name:"",guardian_relationship:"",patient_occupation:"",main_complaint:"",treatment_objectives:""}),[h,m]=(0,a.useState)(1),[f,p]=(0,a.useState)(!1),[g,x]=(0,a.useState)({}),[b,v]=(0,a.useState)(!1),[y,w]=(0,a.useState)(""),[j,N]=(0,a.useState)(!1),[_,S]=(0,a.useState)(null),[k,C]=(0,a.useState)(null),[A,P]=(0,a.useState)(null),[L,E]=(0,a.useState)(null),[D,M]=(0,a.useState)({}),[O,T]=(0,a.useState)({period_type:"last_30_days",start_date:"",end_date:"",program_filter:"all"});(0,a.useEffect)((()=>{if(t){if(w(""),x({}),v(!1),N(!1),S(null),C(null),P(null),E(null),M({}),T({period_type:"last_30_days",start_date:"",end_date:"",program_filter:"all"}),s){const t=s.professional_id&&s.professional_id.trim().length>0,r=s.qualifications&&s.qualifications.trim().length>0,o=!t||!r;var e,n,a,i;if(p(o),o)m(1),c({professional_id:(null===(e=s.professional_id)||void 0===e?void 0:e.trim())||"",qualifications:(null===(n=s.qualifications)||void 0===n?void 0:n.trim())||"",professional_signature:(null===(a=s.professional_signature)||void 0===a?void 0:a.trim())||""});else c({professional_id:s.professional_id.trim(),qualifications:s.qualifications.trim(),professional_signature:(null===(i=s.professional_signature)||void 0===i?void 0:i.trim())||""}),m(2)}r&&u({guardian_name:r.guardian_name||"",guardian_relationship:r.guardian_relationship||"",patient_occupation:r.patient_occupation||"",main_complaint:r.main_complaint||"",treatment_objectives:r.treatment_objectives||""})}}),[t,s,r]);const R=async()=>{if(!b){v(!0),w("");try{if(f&&l&&(await Ue(l),i({professional_id:l.professional_id,qualifications:l.qualifications,professional_signature:l.professional_signature}),o))try{await o(r.id)}catch(e){}E({professional_name:(null===s||void 0===s?void 0:s.name)||(null===s||void 0===s?void 0:s.full_name),professional_id:(null===s||void 0===s?void 0:s.professional_id)||(null===l||void 0===l?void 0:l.professional_id),qualifications:(null===s||void 0===s?void 0:s.qualifications)||(null===l||void 0===l?void 0:l.qualifications),professional_signature:(null===s||void 0===s?void 0:s.professional_signature)||(null===l||void 0===l?void 0:l.professional_signature)}),await(async(e,t)=>{const n=localStorage.getItem("token"),a=await fetch("".concat(qe.H,"/reports/patient-data/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){const e=await a.json().catch((()=>({})));throw new Error(e.error||"Erro ao atualizar dados do paciente")}return a.json()})(r.id,d),P(d);const t=await(async e=>{const t=localStorage.getItem("token"),n=await fetch("".concat(qe.H,"/reports/evolution-data/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!n.ok){const e=await n.json().catch((()=>({})));throw new Error(e.error||"Erro ao buscar dados do relat\xf3rio")}return n.json()})(r.id);S(t);const n=(e=>{const t=new Date;let n,a;switch(e.period_type){case"last_30_days":default:n=new Date(t),n.setDate(t.getDate()-30),a=t;break;case"last_60_days":n=new Date(t),n.setDate(t.getDate()-60),a=t;break;case"last_90_days":n=new Date(t),n.setDate(t.getDate()-90),a=t;break;case"custom":n=e.start_date?new Date(e.start_date):null,a=e.end_date?new Date(e.end_date):null}return{startDate:n?n.toISOString().split("T")[0]:null,endDate:a?a.toISOString().split("T")[0]:null}})(O),a=await We(r.id,n);C(a),N(!0)}catch(y){console.error("\u274c Erro ao processar configura\xe7\xe3o:",y),w("Erro ao processar dados: ".concat(y.message||"Erro desconhecido",". Verifique os dados e tente novamente."))}finally{v(!1)}}},I=()=>{N(!1),n()};return t&&r?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,He.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,He.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 rounded-t-2xl",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("h2",{className:"text-xl font-bold text-white",children:"Relat\xf3rio de Evolu\xe7\xe3o Terap\xeautica"}),(0,He.jsx)("p",{className:"text-indigo-100 text-sm",children:1===h?"Configura\xe7\xe3o Profissional":"Dados Complementares - ".concat(null===r||void 0===r?void 0:r.name)})]}),(0,He.jsx)("button",{onClick:I,className:"text-white hover:text-indigo-200 transition-colors",children:(0,He.jsx)(Hr,{icon:Vi,className:"text-xl"})})]})}),(0,He.jsx)("div",{className:"px-6 py-3 border-b border-gray-200",children:(0,He.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2 ".concat(h>=1?"text-indigo-600":"text-gray-400"),children:[(0,He.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(h>=1?"bg-indigo-600 text-white":"bg-gray-200"),children:f?(0,He.jsx)(Hr,{icon:fi,className:"text-sm"}):(0,He.jsx)(Hr,{icon:fo,className:"text-sm"})}),(0,He.jsx)("span",{className:"font-medium",children:"Dados Profissionais"})]}),(0,He.jsx)("div",{className:"flex-1 h-1 ".concat(h>=2?"bg-indigo-600":"bg-gray-200"," rounded")}),(0,He.jsxs)("div",{className:"flex items-center space-x-2 ".concat(h>=2?"text-indigo-600":"text-gray-400"),children:[(0,He.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(h>=2?"bg-indigo-600 text-white":"bg-gray-200"),children:(0,He.jsx)(Hr,{icon:js,className:"text-sm"})}),(0,He.jsx)("span",{className:"font-medium",children:"Dados do Paciente"})]})]})}),(0,He.jsxs)("div",{className:"p-6",children:[y&&(0,He.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:Vi,className:"text-red-500 mr-2"}),(0,He.jsx)("span",{className:"text-red-700 text-sm font-medium",children:"Erro ao processar relat\xf3rio"})]}),(0,He.jsx)("p",{className:"text-red-600 text-sm mt-2",children:y})]}),1===h&&f&&(0,He.jsxs)("div",{className:"space-y-6",children:[(0,He.jsxs)("div",{className:"text-center mb-6",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,He.jsx)(Hr,{icon:fi,className:"text-2xl text-indigo-600"})}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Configura\xe7\xe3o Profissional"}),(0,He.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:"Para gerar relat\xf3rios profissionais completos, precisamos dos seus dados profissionais. Estes dados ser\xe3o reutilizados automaticamente."}),(0,He.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3 text-center",children:(0,He.jsxs)("div",{className:"text-xs text-amber-800",children:[(0,He.jsx)("p",{className:"font-medium mb-1",children:"\u26a0\ufe0f Sobre os Relat\xf3rios de Evolu\xe7\xe3o"}),(0,He.jsxs)("p",{children:["Este sistema gera ",(0,He.jsx)("strong",{children:"an\xe1lises autom\xe1ticas baseadas em dados quantitativos"})," como suporte ao seu trabalho. \xc9 ",(0,He.jsx)("strong",{children:"imprescind\xedvel"})," que voc\xea revise, adapte e complemente com sua expertise cl\xednica profissional."]})]})})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:Si,className:"mr-2 text-indigo-500"}),"Registro Profissional *"]}),(0,He.jsx)("input",{type:"text",value:l.professional_id,onChange:e=>c((t=>(0,Ie.A)((0,Ie.A)({},t),{},{professional_id:e.target.value}))),placeholder:"Ex: CRP 06/12345-6",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ".concat(g.professional_id?"border-red-500":"border-gray-300")}),g.professional_id&&(0,He.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.professional_id})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:_o,className:"mr-2 text-indigo-500"}),"Qualifica\xe7\xf5es e Forma\xe7\xe3o *"]}),(0,He.jsx)("textarea",{value:l.qualifications,onChange:e=>c((t=>(0,Ie.A)((0,Ie.A)({},t),{},{qualifications:e.target.value}))),placeholder:"Ex: Psic\xf3logo, Especialista em ABA (BACB-BCaBA), Mestre em An\xe1lise do Comportamento",rows:"3",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none ".concat(g.qualifications?"border-red-500":"border-gray-300")}),g.qualifications&&(0,He.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.qualifications})]})]}),(0,He.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,He.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,He.jsx)(Hr,{icon:fo,className:"text-blue-600 mt-1"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h4",{className:"font-medium text-blue-800",children:"Configura\xe7\xe3o \xdanica"}),(0,He.jsx)("p",{className:"text-blue-700 text-sm",children:"Estes dados ser\xe3o salvos no seu perfil e reutilizados automaticamente em todos os futuros relat\xf3rios, sem necessidade de reconfigura\xe7\xe3o."})]})]})})]}),2===h&&(0,He.jsxs)("div",{className:"space-y-6",children:[!f&&l&&(0,He.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4 mb-6",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,He.jsxs)("h4",{className:"text-sm font-semibold text-green-800 flex items-center",children:[(0,He.jsx)(Hr,{icon:fi,className:"mr-2"}),"Dados Profissionais Configurados"]}),(0,He.jsxs)("button",{type:"button",onClick:()=>{p(!0),m(1)},className:"text-xs text-green-600 hover:text-green-800 flex items-center transition-colors bg-green-100 hover:bg-green-200 px-2 py-1 rounded",children:[(0,He.jsx)(Hr,{icon:gs,className:"mr-1"}),"Editar"]})]}),(0,He.jsxs)("div",{className:"text-sm text-green-700 space-y-1",children:[(0,He.jsxs)("p",{children:[(0,He.jsx)("strong",{children:"Nome:"})," ",(null===s||void 0===s?void 0:s.full_name)||(null===s||void 0===s?void 0:s.name)]}),(0,He.jsxs)("p",{children:[(0,He.jsx)("strong",{children:"Registro:"})," ",l.professional_id]}),(0,He.jsxs)("p",{children:[(0,He.jsx)("strong",{children:"Qualifica\xe7\xf5es:"})," ",l.qualifications]})]})]}),(0,He.jsxs)("div",{className:"text-center mb-6",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-blue-100 to-cyan-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,He.jsx)(Hr,{icon:js,className:"text-2xl text-blue-600"})}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Dados Complementares do Paciente"}),(0,He.jsx)("p",{className:"text-gray-600 text-sm",children:"Informa\xe7\xf5es complementares necess\xe1rias para relat\xf3rio profissional completo"})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:xs,className:"mr-2 text-blue-500"}),"Nome do Respons\xe1vel *"]}),(0,He.jsx)("input",{type:"text",value:d.guardian_name,onChange:e=>u((t=>(0,Ie.A)((0,Ie.A)({},t),{},{guardian_name:e.target.value}))),placeholder:"Nome completo",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.guardian_name?"border-red-500":"border-gray-300")}),g.guardian_name&&(0,He.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.guardian_name})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Rela\xe7\xe3o com o Paciente *"}),(0,He.jsxs)("select",{value:d.guardian_relationship,onChange:e=>u((t=>(0,Ie.A)((0,Ie.A)({},t),{},{guardian_relationship:e.target.value}))),className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.guardian_relationship?"border-red-500":"border-gray-300"),children:[(0,He.jsx)("option",{value:"",children:"Selecionar rela\xe7\xe3o"}),(0,He.jsx)("option",{value:"m\xe3e",children:"M\xe3e"}),(0,He.jsx)("option",{value:"pai",children:"Pai"}),(0,He.jsx)("option",{value:"av\xf3",children:"Av\xf3"}),(0,He.jsx)("option",{value:"av\xf4",children:"Av\xf4"}),(0,He.jsx)("option",{value:"tia",children:"Tia"}),(0,He.jsx)("option",{value:"tio",children:"Tio"}),(0,He.jsx)("option",{value:"respons\xe1vel legal",children:"Respons\xe1vel Legal"}),(0,He.jsx)("option",{value:"outro",children:"Outro"})]}),g.guardian_relationship&&(0,He.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.guardian_relationship})]})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ocupa\xe7\xe3o do Paciente"}),(0,He.jsx)("input",{type:"text",value:d.patient_occupation,onChange:e=>u((t=>(0,Ie.A)((0,Ie.A)({},t),{},{patient_occupation:e.target.value}))),placeholder:"Ex: Estudante, Pr\xe9-escolar, etc.",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ys,className:"mr-2 text-blue-500"}),"Queixa Principal *"]}),(0,He.jsx)("textarea",{value:d.main_complaint,onChange:e=>u((t=>(0,Ie.A)((0,Ie.A)({},t),{},{main_complaint:e.target.value}))),placeholder:"Descreva a queixa principal que motivou o atendimento",rows:"3",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none ".concat(g.main_complaint?"border-red-500":"border-gray-300")}),g.main_complaint&&(0,He.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.main_complaint})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Objetivos Gerais do Tratamento"}),(0,He.jsx)("textarea",{value:d.treatment_objectives,onChange:e=>u((t=>(0,Ie.A)((0,Ie.A)({},t),{},{treatment_objectives:e.target.value}))),placeholder:"Descreva os objetivos gerais e metas do tratamento",rows:"3",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]}),(0,He.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,He.jsxs)("div",{className:"mb-4",children:[(0,He.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2 text-blue-500"}),"Per\xedodo para An\xe1lise"]}),(0,He.jsxs)("select",{value:O.period_type,onChange:e=>T((t=>(0,Ie.A)((0,Ie.A)({},t),{},{period_type:e.target.value,start_date:"",end_date:""}))),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,He.jsx)("option",{value:"last_30_days",children:"\xdaltimos 30 dias"}),(0,He.jsx)("option",{value:"last_60_days",children:"\xdaltimos 60 dias"}),(0,He.jsx)("option",{value:"last_90_days",children:"\xdaltimos 90 dias"}),(0,He.jsx)("option",{value:"custom",children:"Per\xedodo personalizado"})]})]}),"custom"===O.period_type&&(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de In\xedcio"}),(0,He.jsx)("input",{type:"date",value:O.start_date,onChange:e=>T((t=>(0,Ie.A)((0,Ie.A)({},t),{},{start_date:e.target.value}))),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Fim"}),(0,He.jsx)("input",{type:"date",value:O.end_date,onChange:e=>T((t=>(0,Ie.A)((0,Ie.A)({},t),{},{end_date:e.target.value}))),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,He.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,He.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,He.jsx)(Hr,{icon:Zr,className:"text-blue-600 mt-1"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h4",{className:"font-medium text-blue-800",children:"An\xe1lise Baseada em Per\xedodo"}),(0,He.jsx)("p",{className:"text-blue-700 text-sm",children:"O relat\xf3rio incluir\xe1 apenas sess\xf5es realizadas no per\xedodo selecionado. Per\xedodos maiores fornecem an\xe1lises mais abrangentes."})]})]})})]}),(0,He.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,He.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,He.jsx)(Hr,{icon:fo,className:"text-green-600 mt-1"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h4",{className:"font-medium text-green-800",children:"Dados Reutiliz\xe1veis"}),(0,He.jsx)("p",{className:"text-green-700 text-sm",children:"Essas informa\xe7\xf5es ser\xe3o salvas e reutilizadas automaticamente nos pr\xf3ximos relat\xf3rios deste paciente."})]})]})})]})]}),(0,He.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-between",children:[(0,He.jsx)("div",{children:2===h&&f&&(0,He.jsx)("button",{onClick:()=>{2===h&&f&&m(1)},className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Voltar"})}),(0,He.jsxs)("div",{className:"flex space-x-3",children:[(0,He.jsx)("button",{onClick:I,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,He.jsx)("button",{onClick:async()=>{1===h?(()=>{const e={};return l.professional_id.trim()||(e.professional_id="Registro profissional \xe9 obrigat\xf3rio"),l.qualifications.trim()||(e.qualifications="Qualifica\xe7\xf5es s\xe3o obrigat\xf3rias"),x(e),0===Object.keys(e).length})()&&m(2):(()=>{const e={};return d.guardian_name.trim()||(e.guardian_name="Nome do respons\xe1vel \xe9 obrigat\xf3rio"),d.guardian_relationship.trim()||(e.guardian_relationship="Rela\xe7\xe3o \xe9 obrigat\xf3ria"),d.main_complaint.trim()||(e.main_complaint="Queixa principal \xe9 obrigat\xf3ria"),x(e),0===Object.keys(e).length})()&&await R()},disabled:b,className:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 flex items-center space-x-2",children:b?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin"}),(0,He.jsx)("span",{children:"Processando..."})]}):(0,He.jsx)("span",{children:2===h?"Gerar Relat\xf3rio":"Continuar"})})]})]})]})}),j&&(0,He.jsx)(hx,{isOpen:j,onClose:()=>{N(!1)},reportData:_,analysisData:k,patientData:A,professionalData:L,customizations:D,onUpdateCustomizations:e=>{M(e)}})]}):null},fx=e=>{if(!e)return"N\xe3o informado";try{const t=new Date(e),n=6e4*t.getTimezoneOffset();return new Date(t.getTime()+n).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(t){return e.split("T")[0]||"Data inv\xe1lida"}},px=e=>{let{icon:t,label:n,value:a,colorClass:r="indigo"}=e;const s={indigo:{bg:"bg-indigo-100",border:"border-indigo-200",icon:"text-indigo-600",text:"text-indigo-800"},purple:{bg:"bg-purple-100",border:"border-purple-200",icon:"text-purple-600",text:"text-purple-800"},blue:{bg:"bg-blue-100",border:"border-blue-200",icon:"text-blue-600",text:"text-blue-800"}},i=s[r]||s.indigo;return(0,He.jsxs)("div",{className:"".concat(i.bg," ").concat(i.border," border-l-4 p-4 rounded-r-lg"),children:[(0,He.jsxs)("div",{className:"flex items-center mb-2",children:[(0,He.jsx)(Hr,{icon:t,className:"mr-3 ".concat(i.icon)}),(0,He.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:n})]}),(0,He.jsx)("p",{className:"text-sm ".concat(i.text," font-medium"),children:a||"N\xe3o informado"})]})},gx=e=>{let{icon:t,title:n,description:a,onClick:r,disabled:s,colorClass:i="gray"}=e;const o={red:{bg:"bg-gradient-to-br from-red-50 to-red-100",hover:"hover:from-red-100 hover:to-red-200",border:"border-red-200",icon:"text-red-600"},blue:{bg:"bg-gradient-to-br from-blue-50 to-blue-100",hover:"hover:from-blue-100 hover:to-blue-200",border:"border-blue-200",icon:"text-blue-600"},green:{bg:"bg-gradient-to-br from-green-50 to-green-100",hover:"hover:from-green-100 hover:to-green-200",border:"border-green-200",icon:"text-green-600"},purple:{bg:"bg-gradient-to-br from-purple-50 to-purple-100",hover:"hover:from-purple-100 hover:to-purple-200",border:"border-purple-200",icon:"text-purple-600"},gray:{bg:"bg-gradient-to-br from-gray-50 to-gray-100",hover:"hover:from-gray-100 hover:to-gray-200",border:"border-gray-200",icon:"text-gray-600"}},l=o[i]||o.gray;return(0,He.jsxs)("button",{onClick:r,disabled:s,className:"text-left p-4 flex items-start space-x-4 ".concat(l.bg," ").concat(l.hover," rounded-lg border-2 ").concat(l.border," w-full transition-all duration-200 disabled:opacity-50 disabled:cursor-wait transform hover:scale-105 shadow-sm hover:shadow-md"),children:[(0,He.jsx)("div",{className:"bg-white p-3 rounded-full shadow-sm",children:(0,He.jsx)(Hr,{icon:t,className:"text-lg ".concat(l.icon)})}),(0,He.jsxs)("div",{className:"flex-1",children:[(0,He.jsx)("h5",{className:"font-semibold text-sm text-gray-800 mb-1",children:n}),(0,He.jsx)("p",{className:"text-xs text-gray-600 leading-relaxed",children:a})]})]})},xx=()=>{const{selectedPatient:e,openPatientForm:t,removePatient:r,openReportModal:s}=ct(),[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1);if(!e)return(0,He.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200 text-center",children:[(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Nenhum Cliente Selecionado"}),(0,He.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Por favor, selecione um cliente na lista \xe0 esquerda para ver os detalhes."})]});return(0,He.jsxs)(He.Fragment,{children:[(0,He.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden flex flex-col",children:[(0,He.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-6",children:(0,He.jsxs)("div",{className:"flex justify-between items-start",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:e.name}),(0,He.jsx)("div",{className:"flex items-center space-x-4",children:(0,He.jsxs)("span",{className:"text-indigo-100 text-sm font-mono bg-white bg-opacity-20 px-3 py-1 rounded-full",children:["ID: ",e.id]})})]}),(0,He.jsxs)("div",{className:"flex space-x-3",children:[(0,He.jsx)("button",{onClick:()=>t(e),className:"p-3 rounded-full bg-white bg-opacity-20 hover:bg-opacity-30 transition-all text-white transform hover:scale-105",title:"Editar Cliente",children:(0,He.jsx)(Hr,{icon:gs})}),(0,He.jsx)("button",{onClick:()=>r(e.id),className:"p-3 rounded-full bg-red-500 bg-opacity-80 hover:bg-opacity-100 transition-all text-white transform hover:scale-105",title:"Excluir Cliente",children:(0,He.jsx)(Hr,{icon:Gr})})]})]})}),(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsxs)("div",{className:"mb-6",children:[(0,He.jsxs)("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mr-3"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udccb Informa\xe7\xf5es B\xe1sicas"})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,He.jsx)(px,{icon:Zr,label:"Data de Nascimento",value:fx(e.dob),colorClass:"indigo"}),(0,He.jsx)(px,{icon:ys,label:"Diagn\xf3stico",value:e.diagnosis,colorClass:"purple"})]})]}),e.general_notes&&(0,He.jsxs)("div",{className:"mb-6",children:[(0,He.jsxs)("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udcdd Anota\xe7\xf5es Gerais"})]}),(0,He.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-l-4 border-blue-400 p-4 rounded-r-lg",children:(0,He.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:e.general_notes})})]}),(0,He.jsxs)("div",{className:"mb-6",children:[(0,He.jsxs)("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udcac Comunica\xe7\xe3o"})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border-2 border-indigo-200 p-4 rounded-lg",children:[(0,He.jsxs)("button",{onClick:()=>{o(!1),c((e=>!e))},className:"w-full flex items-center justify-center px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg shadow-sm hover:from-indigo-700 hover:to-purple-700 transition-all transform hover:scale-105",children:[(0,He.jsx)(Hr,{icon:xs,className:"mr-2"}),(0,He.jsx)("span",{className:"font-medium text-sm",children:"Discuss\xe3o de Caso"})]}),(0,He.jsx)("p",{className:"text-xs text-gray-600 mt-2 text-center leading-relaxed",children:l?"\u2705 Chat da equipe aberto":"Chat interno entre terapeutas"})]}),(0,He.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 border-2 border-blue-200 p-4 rounded-lg",children:[(0,He.jsxs)("button",{onClick:()=>{c(!1),o((e=>!e))},className:"w-full flex items-center justify-center px-4 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg shadow-sm hover:from-blue-700 hover:to-cyan-700 transition-all transform hover:scale-105",children:[(0,He.jsx)(Hr,{icon:rs,className:"mr-2"}),(0,He.jsx)("span",{className:"font-medium text-sm",children:"Comunica\xe7\xe3o com os Pais"})]}),(0,He.jsx)("p",{className:"text-xs text-gray-600 mt-2 text-center leading-relaxed",children:i?"\u2705 Chat com pais aberto":"Comunica\xe7\xe3o com respons\xe1veis"})]})]})]}),l&&(0,He.jsx)("div",{className:"my-5 animate-fade-in max-w-4xl mx-auto w-full",children:(0,He.jsx)(dx,{patientId:e.id,patientName:e.name})}),i&&(0,He.jsx)("div",{className:"my-5 animate-fade-in max-w-4xl mx-auto w-full",children:(0,He.jsx)(rx,{patientId:e.id,patientName:e.name})}),(0,He.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,He.jsxs)("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-3"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udcc4 Documentos e Relat\xf3rios"})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,He.jsx)(gx,{icon:di,title:"Grade de Programas",description:"Gera um PDF detalhado com a lista dos programas atribu\xeddos ao cliente.",onClick:()=>(async e=>{if(e)try{const{getPatientProgramsGrade:t}=await Promise.resolve().then(n.bind(n,1487)),a=await t(e.id);if(0===Object.keys(a).length)return void alert("Nenhum programa ativo para gerar a Grade.");const r=new qo.default({orientation:"portrait",unit:"mm",format:"a4"}),s=15,i=r.internal.pageSize.getWidth(),o=i-2*s;let l=s+10,c=1;const d=e=>{r.setFontSize(8),r.setTextColor(100);const t="P\xe1gina ".concat(e);r.text(t,i/2,r.internal.pageSize.getHeight()-s/2,{align:"center"}),r.text("Gerado em: ".concat(Cp((new Date).toISOString())),s,r.internal.pageSize.getHeight()-s/2),r.setTextColor(0)},u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return e>r.internal.pageSize.getHeight()-s-t?(d(c),r.addPage(),c++,s+10):e};r.setFontSize(16),r.setFont("helvetica","bold"),r.text("Grade de Programas Ativos - ".concat(e.name),i/2,l,{align:"center"}),l+=8,r.setFontSize(10),r.setFont("helvetica","normal"),r.text("ID: ".concat(e.id),s,l),r.text("Nasc: ".concat(Cp(e.dob)),i-s,l,{align:"right"}),l+=6,r.text("Diagn\xf3stico: ".concat(e.diagnosis||"N\xe3o informado"),s,l),l+=10,r.setLineWidth(.2),r.line(s,l,i-s,l),l+=8;const h=Object.keys(a).sort();for(const e of h){l=u(l,15),r.setFontSize(12),r.setFont("helvetica","bold"),r.setFillColor(240,240,240),r.rect(s,l-4,o,7,"F"),r.text(e,s+2,l),l+=8;for(const t of a[e]){l=u(l),r.setFontSize(10),r.setFont("helvetica","bold"),r.text("\u2022 ".concat(t.title," (Tag: ").concat(t.tag||"N/A",")"),s+4,l),l+=5,l=u(l),r.setFontSize(9),r.setFont("helvetica","normal");let e=r.splitTextToSize("Objetivo: ".concat(t.objective||"N\xe3o definido"),o-8);if(r.text(e,s+8,l),l+=4*e.length+2,t.criteria_for_advancement){l=u(l),r.setFont("helvetica","italic");let e=r.splitTextToSize("Crit\xe9rio de Avan\xe7o: ".concat(t.criteria_for_advancement),o-8);r.text(e,s+8,l),l+=4*e.length+2,r.setFont("helvetica","normal")}l+=5}}d(c);const m="Grade_Programas_Ativos_".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".pdf");r.save(m)}catch(t){console.error("Erro ao gerar PDF da grade de programas:",t),alert("Erro ao gerar o PDF da grade de programas. Tente novamente.")}else alert("Nenhum cliente selecionado.")})(e),colorClass:"red"}),(0,He.jsx)(gx,{icon:ss,title:"Folha de Registro",description:"Cria uma folha de registro em branco para anota\xe7\xf5es manuais durante as sess\xf5es.",onClick:()=>(async e=>{if(e)try{const{getPatientProgramsGrade:t}=await Promise.resolve().then(n.bind(n,1487)),a=await t(e.id);if(0===Object.keys(a).length)return void alert("Nenhum programa ativo para gerar a Folha de Registro.");const r=new qo.default({orientation:"landscape",unit:"mm",format:"a4"}),s=10,i=r.internal.pageSize.getWidth();let o=s;r.setFontSize(14),r.setFont("helvetica","bold"),r.text("Folha de Registro Semanal - ".concat(e.name),i/2,o+5,{align:"center"}),r.setFontSize(10),r.setFont("helvetica","normal"),r.text("ID: ".concat(e.id),s,o+12),r.text("Semana de: ______ / ______ / ________",i-s,o+12,{align:"right"}),o+=20;const l=Object.keys(a).sort(),c=[];l.forEach((e=>{a[e].length>0&&(c.push([{content:e,colSpan:8,styles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0],halign:"left"}}]),a[e].forEach((e=>{const t=e.trials||"N/A",n="(".concat(t," tentativas)"),a=null!==e.custom_trials&&void 0!==e.custom_trials?" *":"",r="".concat(e.title,"\n").concat(n).concat(a);c.push([r,"","","","","","",""])})))})),Wo()(r,{startY:o,head:[["Programa","Seg","Ter","Qua","Qui","Sex","S\xe1b","Dom"]],body:c,theme:"grid",headStyles:{fillColor:[79,70,229],textColor:[255,255,255],fontStyle:"bold",halign:"center"},columnStyles:{0:{cellWidth:80,fontStyle:"bold"},1:{cellWidth:"auto",halign:"center"},2:{cellWidth:"auto",halign:"center"},3:{cellWidth:"auto",halign:"center"},4:{cellWidth:"auto",halign:"center"},5:{cellWidth:"auto",halign:"center"},6:{cellWidth:"auto",halign:"center"},7:{cellWidth:"auto",halign:"center"}},didParseCell:function(e){8===e.cell.raw.colSpan?(e.cell.styles.fontSize=9,e.cell.styles.cellPadding=2):(e.cell.styles.fontSize=8,e.cell.styles.valign="middle")}});const d="Folha_Registro_".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".pdf");r.save(d)}catch(t){console.error("Erro ao gerar Folha de Registro:",t),alert("Erro ao gerar a Folha de Registro. Tente novamente.")}else alert("Nenhum cliente selecionado.")})(e),colorClass:"blue"}),(0,He.jsx)(gx,{icon:$r,title:"Evolu\xe7\xe3o Terap\xeautica",description:"Gera relat\xf3rio de evolu\xe7\xe3o profissional detalhado com an\xe1lise do progresso do paciente.",onClick:()=>u(!0),colorClass:"green"}),(0,He.jsx)(gx,{icon:Ks,title:"Relat\xf3rio Consolidado",description:"Gera um relat\xf3rio completo com an\xe1lise do progresso e gr\xe1ficos.",onClick:s,colorClass:"purple"})]})]})]})]}),(0,He.jsx)(mx,{patient:e,isOpen:d,onClose:()=>u(!1)})]})},bx=document.createElement("style");bx.textContent="\n  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n  .fade-in { animation: fadeIn 0.3s ease-out forwards; }\n  @keyframes fadeInUp { from { opacity: 0; transform: scale(0.95) translateY(10px); } to { opacity: 1; transform: scale(1) translateY(0); } }\n  .animate-fade-in-up { animation: fadeInUp 0.3s ease-out forwards; }\n",document.head.appendChild(bx);const vx=e=>{let{isOpen:t,onClose:n,onSave:r,patientToEdit:s}=e;const[i,o]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),[f,p]=(0,a.useState)(!1),[g,x]=(0,a.useState)(""),b=Boolean(s);(0,a.useEffect)((()=>{b&&s?(o(s.name||""),c((e=>{if(!e)return"";try{const t=new Date(e),n=t.getUTCFullYear(),a=(t.getUTCMonth()+1).toString().padStart(2,"0"),r=t.getUTCDate().toString().padStart(2,"0");return"".concat(n,"-").concat(a,"-").concat(r)}catch(t){return""}})(s.dob)),u(s.diagnosis||""),m(s.general_notes||"")):(o(""),c(""),u(""),m(""))}),[s,b,t]);const v=async e=>{e.preventDefault(),p(!0),x("");const t={name:i,dob:l,diagnosis:d,general_notes:h};l||(t.dob=null);try{await r(t),n()}catch(yj){x(yj.message||"Ocorreu um erro ao salvar.")}finally{p(!1)}};return t?(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 fade-in",children:(0,He.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col transform transition-all duration-300 scale-95 opacity-0 animate-fade-in-up",children:[(0,He.jsxs)("div",{className:"flex justify-between items-center p-5 border-b border-gray-200",children:[(0,He.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:b?"Editar Cliente":"Adicionar Novo Cliente"}),(0,He.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,He.jsx)(Hr,{icon:Vi,className:"text-lg"})})]}),(0,He.jsxs)("form",{onSubmit:v,className:"p-6 space-y-6 overflow-y-auto",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{htmlFor:"patient-name",className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Nome Completo ",(0,He.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,He.jsx)("input",{type:"text",id:"patient-name",required:!0,value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-shadow text-sm"})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{htmlFor:"patient-dob",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Data de Nascimento"}),(0,He.jsx)("input",{type:"date",id:"patient-dob",value:l,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-shadow text-sm"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{htmlFor:"patient-diagnosis",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Diagn\xf3stico"}),(0,He.jsx)("input",{type:"text",id:"patient-diagnosis",placeholder:"Ex: TEA N\xedvel 1",value:d,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-shadow text-sm"})]})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{htmlFor:"patient-notes",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Anota\xe7\xf5es Gerais"}),(0,He.jsx)("textarea",{id:"patient-notes",rows:"4",placeholder:"Informa\xe7\xf5es relevantes sobre o cliente...",value:h,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-shadow text-sm resize-vertical"})]}),g&&(0,He.jsx)("p",{className:"text-red-600 text-sm text-center",children:g})]}),(0,He.jsx)("div",{className:"p-4 bg-gray-50 border-t border-gray-200 mt-auto text-right",children:(0,He.jsxs)("button",{type:"submit",onClick:v,disabled:f,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2.5 px-6 rounded-lg text-sm transition-all duration-200 shadow hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-60 active:scale-95",children:[(0,He.jsx)(Hr,{icon:f?Zi:ri,className:"mr-2 ".concat(f&&"fa-spin")}),f?"A Guardar...":b?"Guardar Altera\xe7\xf5es":"Criar Cliente"]})})]})}):null},yx=e=>{let{program:t,onUpdate:n,isLoading:r=!1,disabled:s=!1}=e;const[i,o]=(0,a.useState)(!1),[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),h=t.trials||t.default_trials||"N/A",m=null!==t.custom_trials&&void 0!==t.custom_trials,f=async()=>{try{u("");const e=""===l.trim()?null:parseInt(l);if(null!==e&&(isNaN(e)||e<1||e>999))return void u("Digite um n\xfamero entre 1 e 999, ou deixe vazio para usar o padr\xe3o.");await n(t.assignment_id,e),o(!1)}catch(d){u("Erro ao salvar tentativas. Tente novamente."),console.error("Erro ao atualizar tentativas:",d)}},p=()=>{o(!1),c(""),u("")},g=e=>{"Enter"===e.key?f():"Escape"===e.key&&p()};return i?(0,He.jsxs)("div",{className:"flex flex-col",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("input",{type:"number",value:l,onChange:e=>c(e.target.value),onKeyPress:g,className:"w-20 px-2 py-1 text-sm border rounded focus:outline-none focus:ring-2 ".concat(d?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),placeholder:"Auto",min:"1",max:"999",autoFocus:!0,disabled:r}),(0,He.jsx)("button",{onClick:f,disabled:r,className:"p-1 text-green-600 hover:text-green-800 disabled:opacity-50",title:"Salvar",children:r?(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin"}):(0,He.jsx)(Hr,{icon:ri})}),(0,He.jsx)("button",{onClick:p,disabled:r,className:"p-1 text-gray-600 hover:text-gray-800 disabled:opacity-50",title:"Cancelar",children:(0,He.jsx)(Hr,{icon:Vi})})]}),d&&(0,He.jsx)("span",{className:"text-xs text-red-500 mt-1",children:d}),(0,He.jsxs)("span",{className:"text-xs text-gray-500 mt-1",children:["Padr\xe3o: ",t.default_trials," \u2022 Enter: Salvar \u2022 Esc: Cancelar"]})]}):(0,He.jsx)("div",{className:"flex items-center space-x-2",children:(0,He.jsxs)("div",{className:"flex flex-col",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsxs)("span",{className:"text-sm font-medium ".concat(m?"text-blue-600":"text-gray-700"),children:[h," tentativas"]}),!s&&(0,He.jsx)("button",{onClick:()=>{c(h.toString()),o(!0),u("")},disabled:r,className:"p-1 text-gray-400 hover:text-blue-600 disabled:opacity-50 transition-colors",title:"Editar tentativas",children:(0,He.jsx)(Hr,{icon:gs,className:"text-xs"})})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[m&&(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)("span",{className:"text-xs text-blue-500",children:"Customizado"}),!s&&(0,He.jsx)("button",{onClick:async()=>{try{u(""),await n(t.assignment_id,null)}catch(d){u("Erro ao restaurar padr\xe3o. Tente novamente."),console.error("Erro ao restaurar tentativas padr\xe3o:",d)}},disabled:r,className:"text-xs text-gray-400 hover:text-orange-600 disabled:opacity-50",title:"Restaurar padr\xe3o (".concat(t.default_trials,")"),children:(0,He.jsx)(Hr,{icon:vi})})]}),!m&&t.default_trials&&(0,He.jsx)("span",{className:"text-xs text-gray-400",children:"Padr\xe3o"})]})]})})},wx=async(e,t)=>{const n=await fetch("".concat(qe.H).concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(t)});if(!n.ok){const e=await n.json().catch((()=>({message:"Erro desconhecido"})));throw new Error(e.message||"Erro na requisi\xe7\xe3o")}return n.json()},jx=e=>{let{onProgramSelect:t,selectedProgramId:n}=e;const{selectedPatient:r,toggleProgramStatus:s,removeProgram:i,isLoading:o}=ct(),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),[h,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)(null),g=async(e,t)=>{p(e);try{await(async(e,t)=>{try{return await wx("/assignments/".concat(e,"/custom-trials"),{customTrials:t})}catch(n){throw console.error("Erro ao atualizar tentativas customizadas (Assignment ".concat(e,"):"),n.message),n}})(e,t),null!==r&&void 0!==r&&r.id&&window.location.reload()}catch(n){throw console.error("Falha ao atualizar tentativas:",n),n}finally{p(null)}},x=(0,a.useMemo)((()=>(null===r||void 0===r?void 0:r.assigned_programs)||[]),[r]),b=(0,a.useMemo)((()=>h?x:x.filter((e=>"archived"!==e.status))),[x,h]),v=(0,a.useMemo)((()=>b.reduce(((e,t)=>{const n=t.discipline_name||"Geral";return e[n]||(e[n]=[]),e[n].push(t),e}),{})),[b]),y=Object.keys(v).sort(),w=b.length,j=(0,a.useMemo)((()=>w<=3?"max-h-[50vh]":w<=6?"max-h-[65vh]":"max-h-[80vh]"),[w]);return o?(0,He.jsx)("div",{className:"text-center py-4",children:(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-indigo-500"})}):(0,He.jsxs)("div",{className:"md:col-span-1 lg:col-span-1 bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden flex flex-col ".concat(j),children:[(0,He.jsx)("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 px-6 py-4",children:(0,He.jsx)("div",{className:"flex justify-between items-center",children:(0,He.jsxs)("div",{children:[(0,He.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center",children:[(0,He.jsx)(Hr,{icon:os,className:"mr-3"}),"Programas Atribu\xeddos",(0,He.jsxs)("span",{className:"ml-auto bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm",children:[w," programa",1!==w?"s":""]})]}),(0,He.jsxs)("p",{className:"text-emerald-100 text-sm mt-1",children:["Lista de programas de interven\xe7\xe3o do cliente",w>6&&(0,He.jsx)("span",{className:"ml-2 text-emerald-200",children:"\u2022 Painel expandido automaticamente"})]})]})})}),(0,He.jsx)("div",{className:"px-6 py-4 bg-gradient-to-r from-emerald-50 to-teal-50 border-b border-emerald-200",children:(0,He.jsx)("div",{className:"flex items-center justify-center",children:(0,He.jsxs)("div",{className:"bg-white border-2 border-emerald-200 rounded-lg p-3 flex items-center space-x-3",children:[(0,He.jsx)("input",{type:"checkbox",id:"show-archived",checked:h,onChange:()=>m(!h),className:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"}),(0,He.jsxs)("label",{htmlFor:"show-archived",className:"text-sm font-medium text-gray-700 flex items-center",children:[(0,He.jsx)(Hr,{icon:bs,className:"mr-2 text-gray-500"}),"Mostrar Programas Arquivados"]})]})})}),(0,He.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:b.length>0?(0,He.jsx)("div",{className:"space-y-6",children:y.map((e=>{const a={Fonoaudiologia:{bg:"from-blue-500 to-indigo-600",light:"from-blue-50 to-indigo-50",border:"border-blue-200"},Psicologia:{bg:"from-red-500 to-pink-600",light:"from-red-50 to-pink-50",border:"border-red-200"},Musicoterapia:{bg:"from-purple-500 to-violet-600",light:"from-purple-50 to-violet-50",border:"border-purple-200"},TerapiaOcupacional:{bg:"from-orange-500 to-amber-600",light:"from-orange-50 to-amber-50",border:"border-orange-200"},Psicomotricidade:{bg:"from-green-500 to-emerald-600",light:"from-green-50 to-emerald-50",border:"border-green-200"},Psicopedagogia:{bg:"from-yellow-500 to-orange-600",light:"from-yellow-50 to-orange-50",border:"border-yellow-200"}}[e]||{bg:"from-gray-500 to-slate-600",light:"from-gray-50 to-slate-50",border:"border-gray-200"};return(0,He.jsxs)("div",{className:"bg-gradient-to-r ".concat(a.light," border-2 ").concat(a.border," rounded-lg overflow-hidden"),children:[(0,He.jsx)("div",{className:"bg-gradient-to-r ".concat(a.bg," px-4 py-3"),children:(0,He.jsxs)("h4",{className:"text-white font-bold flex items-center",children:[(0,He.jsx)(Hr,{icon:Ys,className:"mr-2"}),e,(0,He.jsxs)("span",{className:"ml-auto bg-white bg-opacity-20 px-2 py-1 rounded-full text-xs",children:[v[e].length," programa",1!==v[e].length?"s":""]})]})}),(0,He.jsx)("div",{className:"p-4 space-y-3",children:v[e].map((e=>{const a="archived"===e.status,r=e.assignment_id===n;return(0,He.jsx)("div",{onClick:()=>!a&&t(e),className:"\n                              p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer transform\n                              ".concat(r?"bg-white border-emerald-400 shadow-lg scale-105":"bg-white border-gray-200 hover:border-emerald-300 hover:shadow-md hover:scale-102"," \n                              ").concat(a?"opacity-60 cursor-not-allowed bg-gray-50":"","\n                            "),children:(0,He.jsxs)("div",{className:"flex justify-between items-center",children:[(0,He.jsxs)("div",{className:"flex-1 mr-4 ".concat(a?"italic text-gray-500":""),children:[(0,He.jsx)("p",{className:"text-sm font-semibold text-gray-800 mb-1",title:e.program_name,children:e.program_name}),(0,He.jsx)("div",{className:"flex items-center justify-between mt-2",children:(0,He.jsx)(yx,{program:e,onUpdate:g,isLoading:f===e.assignment_id,disabled:a})}),r&&(0,He.jsxs)("div",{className:"flex items-center text-xs text-emerald-600 mt-1",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-emerald-500 rounded-full mr-2 animate-pulse"}),"Programa selecionado"]})]}),(0,He.jsxs)("div",{className:"flex space-x-2 flex-shrink-0",children:[(0,He.jsx)(De,{to:"/session/".concat(e.assignment_id),title:"Iniciar Sess\xe3o",onClick:e=>e.stopPropagation(),className:"\n                                  p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all transform hover:scale-110\n                                  ".concat(a?"text-gray-400 bg-gray-100 cursor-not-allowed pointer-events-none":"text-indigo-600 bg-indigo-100 hover:bg-indigo-200","\n                                "),children:(0,He.jsx)(Hr,{icon:Qs,className:"fa-fw"})}),(0,He.jsx)("button",{title:a?"Reativar Programa":"Arquivar Programa",onClick:t=>{t.stopPropagation(),(async(e,t)=>{c(e);try{await s(e,t)}catch(n){console.error("Falha ao mudar status do programa:",n)}finally{c(null)}})(e.assignment_id,e.status)},disabled:l===e.assignment_id,className:"p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all text-yellow-600 bg-yellow-100 hover:bg-yellow-200 disabled:opacity-50 transform hover:scale-110",children:l===e.assignment_id?(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin fa-fw"}):(0,He.jsx)(Hr,{icon:a?ni:bs,className:"fa-fw"})}),(0,He.jsx)("button",{title:"Remover Programa Permanentemente",onClick:t=>{t.stopPropagation(),(async e=>{u(e);try{await i(e)}catch(t){console.error("Falha ao remover programa:",t)}finally{u(null)}})(e.program_id)},disabled:d===e.program_id,className:"p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all text-red-500 bg-red-100 hover:bg-red-200 disabled:opacity-50 transform hover:scale-110",children:d===e.program_id?(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin fa-fw"}):(0,He.jsx)(Hr,{icon:Gr,className:"fa-fw"})})]})]})},e.assignment_id)}))})]},e)}))}):(0,He.jsx)("div",{className:"text-center py-8",children:(0,He.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-6",children:[(0,He.jsx)(Hr,{icon:os,className:"text-4xl text-gray-300 mb-3"}),(0,He.jsx)("p",{className:"text-gray-500 font-medium",children:0===x.length?"Nenhum programa atribu\xeddo":"Nenhum programa ativo para exibir"}),(0,He.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:0===x.length?"Adicione programas na p\xe1gina de Programas":'Ative a op\xe7\xe3o "Mostrar Arquivados" para ver todos'})]})})})]})};const Nx=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],_x="label";function Sx(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function kx(e,t){e.labels=t}function Cx(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_x;const a=[];e.datasets=t.map((t=>{const r=e.datasets.find((e=>e[n]===t[n]));return r&&t.data&&!a.includes(r)?(a.push(r),Object.assign(r,t),r):(0,Ie.A)({},t)}))}function Ax(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_x;const n={labels:[],datasets:[]};return kx(n,e.labels),Cx(n,e.datasets,t),n}function Px(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h}=e,m=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,Nx),f=(0,a.useRef)(null),p=(0,a.useRef)(null),g=()=>{f.current&&(p.current=new wm(f.current,{type:o,data:Ax(l,i),options:c&&(0,Ie.A)({},c),plugins:d}),Sx(t,p.current))},x=()=>{Sx(t,null),p.current&&(p.current.destroy(),p.current=null)};return(0,a.useEffect)((()=>{!s&&p.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(p.current,c)}),[s,c]),(0,a.useEffect)((()=>{!s&&p.current&&kx(p.current.config.data,l.labels)}),[s,l.labels]),(0,a.useEffect)((()=>{!s&&p.current&&l.datasets&&Cx(p.current.config.data,l.datasets,i)}),[s,l.datasets]),(0,a.useEffect)((()=>{p.current&&(s?(x(),setTimeout(g)):p.current.update(h))}),[s,c,l.labels,l.datasets,h]),(0,a.useEffect)((()=>{p.current&&(x(),setTimeout(g))}),[o]),(0,a.useEffect)((()=>(g(),()=>x())),[]),a.createElement("canvas",(0,Ie.A)({ref:f,role:"img",height:n,width:r},m),u)}const Lx=(0,a.forwardRef)(Px);function Ex(e,t){return wm.register(t),(0,a.forwardRef)(((t,n)=>a.createElement(Lx,(0,Ie.A)((0,Ie.A)({},t),{},{ref:n,type:e}))))}const Dx=Ex("line",Wu),Mx=Ex("bar",Bu),Ox=Ex("doughnut",Uu),Tx={modes:{point:(e,t)=>Ix(e,t,{intersect:!0}),nearest:(e,t,n)=>function(e,t,n){let a=Number.POSITIVE_INFINITY;return Ix(e,t,n).reduce(((e,r)=>{const s=r.getCenterPoint(),i=function(e,t,n){if("x"===n)return{x:e.x,y:t.y};if("y"===n)return{x:t.x,y:e.y};return t}(t,s,n.axis),o=hc(t,i);return o<a?(e=[r],a=o):o===a&&e.push(r),e}),[]).sort(((e,t)=>e._index-t._index)).slice(0,1)}(e,t,n),x:(e,t,n)=>Ix(e,t,{intersect:n.intersect,axis:"x"}),y:(e,t,n)=>Ix(e,t,{intersect:n.intersect,axis:"y"})}};function Rx(e,t,n){return(Tx.modes[n.mode]||Tx.modes.nearest)(e,t,n)}function Ix(e,t,n){return e.filter((e=>n.intersect?e.inRange(t.x,t.y):function(e,t,n){return"x"!==n&&"y"!==n?e.inRange(t.x,t.y,"x",!0)||e.inRange(t.x,t.y,"y",!0):e.inRange(t.x,t.y,n,!0)}(e,t,n.axis)))}function Fx(e,t,n){const a=Math.cos(n),r=Math.sin(n),s=t.x,i=t.y;return{x:s+a*(e.x-s)-r*(e.y-i),y:i+r*(e.x-s)+a*(e.y-i)}}const zx=(e,t)=>t>e||e.length>t.length&&e.slice(0,t.length)===t,Bx=.001,qx=(e,t,n)=>Math.min(n,Math.max(t,e)),Ux=(e,t)=>e.value>=e.start-t&&e.value<=e.end+t;function Wx(e,t,n){for(const a of Object.keys(e))e[a]=qx(e[a],t,n);return e}function Hx(e,t,n,a){let{x:r,y:s,x2:i,y2:o}=t,{borderWidth:l,hitTolerance:c}=a;const d=(l+c)/2,u=e.x>=r-d-Bx&&e.x<=i+d+Bx,h=e.y>=s-d-Bx&&e.y<=o+d+Bx;return"x"===n?u:("y"===n||u)&&h}function Vx(e,t,n,a){let{rect:r,center:s}=t,{rotation:i,borderWidth:o,hitTolerance:l}=a;return Hx(Fx(e,s,lc(-i)),r,n,{borderWidth:o,hitTolerance:l})}function Yx(e,t){const{centerX:n,centerY:a}=e.getProps(["centerX","centerY"],t);return{x:n,y:a}}const Gx=e=>"string"===typeof e&&e.endsWith("%"),$x=e=>parseFloat(e)/100,Xx=e=>qx($x(e),0,1),Kx=(e,t)=>({x:e,y:t,x2:e,y2:t,width:0,height:0}),Jx={box:e=>Kx(e.centerX,e.centerY),doughnutLabel:e=>Kx(e.centerX,e.centerY),ellipse:e=>({centerX:e.centerX,centerY:e.centerX,radius:0,width:0,height:0}),label:e=>Kx(e.centerX,e.centerY),line:e=>Kx(e.x,e.y),point:e=>({centerX:e.centerX,centerY:e.centerY,radius:0,width:0,height:0}),polygon:e=>Kx(e.centerX,e.centerY)};function Qx(e,t){return"start"===t?0:"end"===t?e:Gx(t)?Xx(t)*e:e/2}function Zx(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return"number"===typeof t?t:Gx(t)?(n?Xx(t):$x(t))*e:e}function eb(e,t,n,a){let{borderWidth:r,position:s,xAdjust:i,yAdjust:o}=n;const l=Al(a),c=t.width+(l?a.width:0)+r,d=t.height+(l?a.height:0)+r,u=tb(s),h=sb(e.x,c,i,u.x),m=sb(e.y,d,o,u.y);return{x:h,y:m,x2:h+c,y2:m+d,width:c,height:d,centerX:h+c/2,centerY:m+d/2}}function tb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";return Al(e)?{x:El(e.x,t),y:El(e.y,t)}:{x:e=El(e,t),y:e}}const nb=(e,t)=>e&&e.autoFit&&t<1;function ab(e,t){const n=e.font,a=Cl(n)?n:[n];return nb(e,t)?a.map((function(e){const n=xd(e);return n.size=Math.floor(e.size*t),n.lineHeight=e.lineHeight,xd(n)})):a.map((e=>xd(e)))}function rb(e){return e&&(Vl(e.xValue)||Vl(e.yValue))}function sb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e-Qx(t,arguments.length>3?arguments[3]:void 0)+n}function ib(e,t,n){const a=n.init;if(a)return!0===a?lb(t,n):function(e,t,n){const a=Ml(n.init,[{chart:e,properties:t,options:n}]);if(!0===a)return lb(t,n);if(Al(a))return a}(e,t,n)}function ob(e,t,n){let a=!1;return t.forEach((t=>{Yl(e[t])?(a=!0,n[t]=e[t]):Vl(n[t])&&delete n[t]})),a}function lb(e,t){const n=t.type||"line";return Jx[n](e)}const cb=new Map;function db(e){if(e&&"object"===typeof e){const t=e.toString();return"[object HTMLImageElement]"===t||"[object HTMLCanvasElement]"===t}}function ub(e,t,n){let{x:a,y:r}=t;n&&(e.translate(a,r),e.rotate(lc(n)),e.translate(-a,-r))}function hb(e,t){if(t&&t.borderWidth)return e.lineCap=t.borderCapStyle||"butt",e.setLineDash(t.borderDash),e.lineDashOffset=t.borderDashOffset,e.lineJoin=t.borderJoinStyle||"miter",e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,!0}function mb(e,t){e.shadowColor=t.backgroundShadowColor,e.shadowBlur=t.shadowBlur,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY}function fb(e,t){const n=t.content;if(db(n)){return{width:Zx(n.width,t.width),height:Zx(n.height,t.height)}}const a=ab(t),r=t.textStrokeWidth,s=Cl(n)?n:[n],i=s.join()+(e=>e.reduce((function(e,t){return e+t.string}),""))(a)+r+(e._measureText?"-spriting":"");return cb.has(i)||cb.set(i,function(e,t,n,a){e.save();const r=t.length;let s=0,i=a;for(let o=0;o<r;o++){const r=n[Math.min(o,n.length-1)];e.font=r.string;const l=t[o];s=Math.max(s,e.measureText(l).width+a),i+=r.lineHeight}return e.restore(),{width:s,height:i}}(e,s,a,r)),cb.get(i)}function pb(e,t,n){const{x:a,y:r,width:s,height:i}=t;e.save(),mb(e,n);const o=hb(e,n);e.fillStyle=n.backgroundColor,e.beginPath(),cd(e,{x:a,y:r,w:s,h:i,radius:Wx(pd(n.borderRadius),0,Math.min(s,i)/2)}),e.closePath(),e.fill(),o&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore()}function gb(e,t,n,a){const r=n.content;if(db(r))return e.save(),e.globalAlpha=function(e,t){const n=ic(e)?e:t;return ic(n)?qx(n,0,1):1}(n.opacity,r.style.opacity),e.drawImage(r,t.x,t.y,t.width,t.height),void e.restore();const s=Cl(r)?r:[r],i=ab(n,a),o=n.color,l=Cl(o)?o:[o],c=function(e,t){const{x:n,width:a}=e,r=t.textAlign;return"center"===r?n+a/2:"end"===r||"right"===r?n+a:n}(t,n),d=t.y+n.textStrokeWidth/2;e.save(),e.textBaseline="middle",e.textAlign=n.textAlign,function(e,t){if(t.textStrokeWidth>0)return e.lineJoin="round",e.miterLimit=2,e.lineWidth=t.textStrokeWidth,e.strokeStyle=t.textStrokeColor,!0}(e,n)&&function(e,t,n,a){let{x:r,y:s}=t;e.beginPath();let i=0;n.forEach((function(t,n){const o=a[Math.min(n,a.length-1)],l=o.lineHeight;e.font=o.string,e.strokeText(t,r,s+l/2+i),i+=l})),e.stroke()}(e,{x:c,y:d},s,i),function(e,t,n,a){let{x:r,y:s}=t,{fonts:i,colors:o}=a,l=0;n.forEach((function(t,n){const a=o[Math.min(n,o.length-1)],c=i[Math.min(n,i.length-1)],d=c.lineHeight;e.beginPath(),e.font=c.string,e.fillStyle=a,e.fillText(t,r,s+d/2+l),l+=d,e.fill()}))}(e,{x:c,y:d},s,{fonts:i,colors:l}),e.restore()}function xb(e,t,n,a){const{radius:r,options:s}=t,i=s.pointStyle,o=s.rotation;let l=(o||0)*Ql;if(db(i))return e.save(),e.translate(n,a),e.rotate(l),e.drawImage(i,-i.width/2,-i.height/2,i.width,i.height),void e.restore();(e=>isNaN(e)||e<=0)(r)||function(e,t){let n,a,r,s,{x:i,y:o,radius:l,rotation:c,style:d,rad:u}=t;switch(e.beginPath(),d){default:e.arc(i,o,l,0,Xl),e.closePath();break;case"triangle":e.moveTo(i+Math.sin(u)*l,o-Math.cos(u)*l),u+=tc,e.lineTo(i+Math.sin(u)*l,o-Math.cos(u)*l),u+=tc,e.lineTo(i+Math.sin(u)*l,o-Math.cos(u)*l),e.closePath();break;case"rectRounded":s=.516*l,r=l-s,n=Math.cos(u+ec)*r,a=Math.sin(u+ec)*r,e.arc(i-n,o-a,s,u-$l,u-Zl),e.arc(i+a,o-n,s,u-Zl,u),e.arc(i+n,o+a,s,u,u+Zl),e.arc(i-a,o+n,s,u+Zl,u+$l),e.closePath();break;case"rect":if(!c){r=Math.SQRT1_2*l,e.rect(i-r,o-r,2*r,2*r);break}u+=ec;case"rectRot":n=Math.cos(u)*l,a=Math.sin(u)*l,e.moveTo(i-n,o-a),e.lineTo(i+a,o-n),e.lineTo(i+n,o+a),e.lineTo(i-a,o+n),e.closePath();break;case"crossRot":u+=ec;case"cross":n=Math.cos(u)*l,a=Math.sin(u)*l,e.moveTo(i-n,o-a),e.lineTo(i+n,o+a),e.moveTo(i+a,o-n),e.lineTo(i-a,o+n);break;case"star":n=Math.cos(u)*l,a=Math.sin(u)*l,e.moveTo(i-n,o-a),e.lineTo(i+n,o+a),e.moveTo(i+a,o-n),e.lineTo(i-a,o+n),u+=ec,n=Math.cos(u)*l,a=Math.sin(u)*l,e.moveTo(i-n,o-a),e.lineTo(i+n,o+a),e.moveTo(i+a,o-n),e.lineTo(i-a,o+n);break;case"line":n=Math.cos(u)*l,a=Math.sin(u)*l,e.moveTo(i-n,o-a),e.lineTo(i+n,o+a);break;case"dash":e.moveTo(i,o),e.lineTo(i+Math.cos(u)*l,o+Math.sin(u)*l)}e.fill()}(e,{x:n,y:a,radius:r,rotation:o,style:i,rad:l})}const bb=["left","bottom","top","right"];function vb(e,t){const{pointX:n,pointY:a,options:r}=t,s=r.callout,i=s&&s.display&&function(e,t){const n=t.position;if(bb.includes(n))return n;return function(e,t){const{x:n,y:a,x2:r,y2:s,width:i,height:o,pointX:l,pointY:c,centerX:d,centerY:u,rotation:h}=e,m={x:d,y:u},f=t.start,p=Zx(i,f),g=Zx(o,f),x=[n,n+p,n+p,r],b=[a+g,s,a,s],v=[];for(let y=0;y<4;y++){const e=Fx({x:x[y],y:b[y]},m,lc(h));v.push({position:bb[y],distance:hc(e,{x:l,y:c})})}return v.sort(((e,t)=>e.distance-t.distance))[0].position}(e,t)}(t,s);if(!i||function(e,t,n){const{pointX:a,pointY:r}=e,s=t.margin;let i=a,o=r;"left"===n?i+=s:"right"===n?i-=s:"top"===n?o+=s:"bottom"===n&&(o-=s);return e.inRange(i,o)}(t,s,i))return;e.save(),e.beginPath();if(!hb(e,s))return e.restore();const{separatorStart:o,separatorEnd:l}=function(e,t){const{x:n,y:a,x2:r,y2:s}=e,i=function(e,t){const{width:n,height:a,options:r}=e,s=r.callout.margin+r.borderWidth/2;if("right"===t)return n+s;if("bottom"===t)return a+s;return-s}(e,t);let o,l;"left"===t||"right"===t?(o={x:n+i,y:a},l={x:o.x,y:s}):(o={x:n,y:a+i},l={x:r,y:o.y});return{separatorStart:o,separatorEnd:l}}(t,i),{sideStart:c,sideEnd:d}=function(e,t,n){const{y:a,width:r,height:s,options:i}=e,o=i.callout.start,l=function(e,t){const n=t.side;if("left"===e||"top"===e)return-n;return n}(t,i.callout);let c,d;"left"===t||"right"===t?(c={x:n.x,y:a+Zx(s,o)},d={x:c.x+l,y:c.y}):(c={x:n.x+Zx(r,o),y:n.y},d={x:c.x,y:c.y+l});return{sideStart:c,sideEnd:d}}(t,i,o);(s.margin>0||0===r.borderWidth)&&(e.moveTo(o.x,o.y),e.lineTo(l.x,l.y)),e.moveTo(c.x,c.y),e.lineTo(d.x,d.y);const u=Fx({x:n,y:a},t.getCenterPoint(),lc(-t.rotation));e.lineTo(u.x,u.y),e.stroke(),e.restore()}const yb={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function wb(e,t,n){return Pl(t="number"===typeof t?t:e.parse(t))?e.getPixelForValue(t):n}function jb(e,t,n){const a=t[n];if(a||"scaleID"===n)return a;const r=n.charAt(0),s=Object.values(e).filter((e=>e.axis&&e.axis===r));return s.length?s[0].id:r}function Nb(e,t){if(e){const n=e.options.reverse;return{start:wb(e,t.min,n?t.end:t.start),end:wb(e,t.max,n?t.start:t.end)}}}function _b(e,t){const{chartArea:n,scales:a}=e,r=a[jb(a,t,"xScaleID")],s=a[jb(a,t,"yScaleID")];let i=n.width/2,o=n.height/2;return r&&(i=wb(r,t.xValue,r.left+r.width/2)),s&&(o=wb(s,t.yValue,s.top+s.height/2)),{x:i,y:o}}function Sb(e,t){const n=e.scales,a=n[jb(n,t,"xScaleID")],r=n[jb(n,t,"yScaleID")];if(!a&&!r)return{};let{left:s,right:i}=a||e.chartArea,{top:o,bottom:l}=r||e.chartArea;const c=Pb(a,{min:t.xMin,max:t.xMax,start:s,end:i});s=c.start,i=c.end;const d=Pb(r,{min:t.yMin,max:t.yMax,start:l,end:o});return o=d.start,l=d.end,{x:s,y:o,x2:i,y2:l,width:i-s,height:l-o,centerX:s+(i-s)/2,centerY:o+(l-o)/2}}function kb(e,t){if(!rb(t)){const n=Sb(e,t);let a=t.radius;a&&!isNaN(a)||(a=Math.min(n.width,n.height)/2,t.radius=a);const r=2*a,s=n.centerX+t.xAdjust,i=n.centerY+t.yAdjust;return{x:s-a,y:i-a,x2:s+a,y2:i+a,centerX:s,centerY:i,width:r,height:r,radius:a}}return function(e,t){const n=_b(e,t),a=2*t.radius;return{x:n.x-t.radius+t.xAdjust,y:n.y-t.radius+t.yAdjust,x2:n.x+t.radius+t.xAdjust,y2:n.y+t.radius+t.yAdjust,centerX:n.x+t.xAdjust,centerY:n.y+t.yAdjust,radius:t.radius,width:a,height:a}}(e,t)}function Cb(e,t){const{scales:n,chartArea:a}=e,r=n[t.scaleID],s={x:a.left,y:a.top,x2:a.right,y2:a.bottom};return r?function(e,t,n){const a=wb(e,n.value,NaN),r=wb(e,n.endValue,a);e.isHorizontal()?(t.x=a,t.x2=r):(t.y=a,t.y2=r)}(r,s,t):function(e,t,n){for(const a of Object.keys(yb)){const r=e[jb(e,n,a)];if(r){const{min:e,max:s,start:i,end:o,startProp:l,endProp:c}=yb[a],d=Nb(r,{min:n[e],max:n[s],start:r[i],end:r[o]});t[l]=d.start,t[c]=d.end}}}(n,s,t),s}function Ab(e,t){const n=Sb(e,t);return n.initProperties=ib(e,n,t),n.elements=[{type:"label",optionScope:"label",properties:Eb(e,n,t),initProperties:n.initProperties}],n}function Pb(e,t){const n=Nb(e,t)||t;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function Lb(e,t){const{start:n,end:a,borderWidth:r}=e,{position:s,padding:{start:i,end:o},adjust:l}=t;return n+r/2+l+Qx(a-r-n-i-o-t.size,s)}function Eb(e,t,n){const a=n.label;a.backgroundColor="transparent",a.callout.display=!1;const r=tb(a.position),s=gd(a.padding),i=fb(e.ctx,a),o=function(e,t,n,a){let{properties:r,options:s}=e;const{x:i,x2:o,width:l}=r;return Lb({start:i,end:o,size:l,borderWidth:s.borderWidth},{position:n.x,padding:{start:a.left,end:a.right},adjust:s.label.xAdjust,size:t.width})}({properties:t,options:n},i,r,s),l=function(e,t,n,a){let{properties:r,options:s}=e;const{y:i,y2:o,height:l}=r;return Lb({start:i,end:o,size:l,borderWidth:s.borderWidth},{position:n.y,padding:{start:a.top,end:a.bottom},adjust:s.label.yAdjust,size:t.height})}({properties:t,options:n},i,r,s),c=i.width+s.width,d=i.height+s.height;return{x:o,y:l,x2:o+c,y2:l+d,width:c,height:d,centerX:o+c/2,centerY:l+d/2,rotation:a.rotation}}const Db=["enter","leave"],Mb=Db.concat("click");function Ob(e,t,n){if(e.listened)switch(t.type){case"mousemove":case"mouseout":return function(e,t,n){if(!e.moveListened)return;let a;a="mousemove"===t.type?Rx(e.visibleElements,t,n.interaction):[];const r=e.hovered;e.hovered=a;const s={state:e,event:t};let i=Tb(s,"leave",r,a);return Tb(s,"enter",a,r)||i}(e,t,n);case"click":return function(e,t,n){const a=e.listeners,r=Rx(e.visibleElements,t,n.interaction);let s;for(const i of r)s=Rb(i.options.click||a.click,i,t)||s;return s}(e,t,n)}}function Tb(e,t,n,a){let r,{state:s,event:i}=e;for(const o of n)a.indexOf(o)<0&&(r=Rb(o.options[t]||s.listeners[t],o,i)||r);return r}function Rb(e,t,n){return!0===Ml(e,[t.$context,n])}const Ib=["afterDraw","beforeDraw"];function Fb(e,t,n){if(e.hooked){return Ml(t.options[n]||e.hooks[n],[t.$context])}}function zb(e,t,n){const a=function(e,t,n){const a=t.axis,r=t.id,s=a+"ScaleID",i={min:El(t.min,Number.NEGATIVE_INFINITY),max:El(t.max,Number.POSITIVE_INFINITY)};for(const o of n)o.scaleID===r?Wb(o,t,["value","endValue"],i):jb(e,o,s)===r&&Wb(o,t,[a+"Min",a+"Max",a+"Value"],i);return i}(e.scales,t,n);let r=Bb(t,a,"min","suggestedMin");r=Bb(t,a,"max","suggestedMax")||r,r&&Yl(t.handleTickRangeOptions)&&t.handleTickRangeOptions()}function Bb(e,t,n,a){if(Pl(t[n])&&!function(e,t,n){return Vl(e[t])||Vl(e[n])}(e.options,n,a)){const a=e[n]!==t[n];return e[n]=t[n],a}}function qb(e,t){for(const n of["scaleID","xScaleID","yScaleID"]){const a=jb(t,e,n);a&&!t[a]&&Ub(e,n)&&console.warn("No scale found with id '".concat(a,"' for annotation '").concat(e.id,"'"))}}function Ub(e,t){if("scaleID"===t)return!0;const n=t.charAt(0);for(const a of["Min","Max","Value"])if(Vl(e[n+a]))return!0;return!1}function Wb(e,t,n,a){for(const r of n){const n=e[r];if(Vl(n)){const e=t.parse(n);a.min=Math.min(a.min,e),a.max=Math.max(a.max,e)}}}class Hb extends Th{inRange(e,t,n,a){const{x:r,y:s}=Fx({x:e,y:t},this.getCenterPoint(a),lc(-this.options.rotation));return Hx({x:r,y:s},this.getProps(["x","y","x2","y2"],a),n,this.options)}getCenterPoint(e){return Yx(this,e)}draw(e){e.save(),ub(e,this.getCenterPoint(),this.options.rotation),pb(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,t){return Ab(e,t)}}Hb.id="boxAnnotation",Hb.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},Hb.defaultRoutes={borderColor:"color",backgroundColor:"color"},Hb.descriptors={label:{_fallback:!0}};class Vb extends Th{inRange(e,t,n,a){return Vx({x:e,y:t},{rect:this.getProps(["x","y","x2","y2"],a),center:this.getCenterPoint(a)},n,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Yx(this,e)}draw(e){const t=this.options;t.display&&t.content&&(!function(e,t){const{_centerX:n,_centerY:a,_radius:r,_startAngle:s,_endAngle:i,_counterclockwise:o,options:l}=t;e.save();const c=hb(e,l);e.fillStyle=l.backgroundColor,e.beginPath(),e.arc(n,a,r,s,i,o),e.closePath(),e.fill(),c&&e.stroke();e.restore()}(e,this),e.save(),ub(e,this.getCenterPoint(),this.rotation),gb(e,this,t,this._fitRatio),e.restore())}resolveElementProperties(e,t){const n=function(e,t){return e.getSortedVisibleDatasetMetas().reduce((function(n,a){const r=a.controller;return r instanceof Uu&&function(e,t,n){if(!t.autoHide)return!0;for(let a=0;a<n.length;a++)if(!n[a].hidden&&e.getDataVisibility(a))return!0}(e,t,a.data)&&(!n||r.innerRadius<n.controller.innerRadius)&&r.options.circumference>=90?a:n}),void 0)}(e,t);if(!n)return{};const{controllerMeta:a,point:r,radius:s}=function(e,t,n){let{chartArea:a}=e;const{left:r,top:s,right:i,bottom:o}=a,{innerRadius:l,offsetX:c,offsetY:d}=n.controller,u=(r+i)/2+c,h=(s+o)/2+d,m={left:Math.max(u-l,r),right:Math.min(u+l,i),top:Math.max(h-l,s),bottom:Math.min(h+l,o)},f={x:(m.left+m.right)/2,y:(m.top+m.bottom)/2},p=t.spacing+t.borderWidth/2,g=l-p,x=f.y>h,b=function(e,t,n,a){const r=Math.pow(n-e,2),s=Math.pow(a,2),i=-2*t,o=Math.pow(t,2)+r-s,l=Math.pow(i,2)-4*o;if(l<=0)return{_startAngle:0,_endAngle:Xl};const c=(-i-Math.sqrt(l))/2,d=(-i+Math.sqrt(l))/2;return{_startAngle:uc({x:t,y:n},{x:c,y:e}).angle,_endAngle:uc({x:t,y:n},{x:d,y:e}).angle}}(x?s+p:o-p,u,h,g),v=(0,Ie.A)({_centerX:u,_centerY:h,_radius:g,_counterclockwise:x},b);return{controllerMeta:v,point:f,radius:Math.min(l,Math.min(m.right-m.left,m.bottom-m.top)/2)}}(e,t,n);let i=fb(e.ctx,t);const o=function(e,t){let{width:n,height:a}=e;const r=Math.sqrt(Math.pow(n,2)+Math.pow(a,2));return 2*t/r}(i,s);nb(t,o)&&(i={width:i.width*o,height:i.height*o});const{position:l,xAdjust:c,yAdjust:d}=t,u=eb(r,i,{borderWidth:0,position:l,xAdjust:c,yAdjust:d});return(0,Ie.A)((0,Ie.A)((0,Ie.A)({initProperties:ib(e,u,t)},u),a),{},{rotation:t.rotation,_fitRatio:o})}}Vb.id="doughnutLabelAnnotation",Vb.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0},Vb.defaultRoutes={};class Yb extends Th{inRange(e,t,n,a){return Vx({x:e,y:t},{rect:this.getProps(["x","y","x2","y2"],a),center:this.getCenterPoint(a)},n,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Yx(this,e)}draw(e){const t=this.options,n=!Vl(this._visible)||this._visible;t.display&&t.content&&n&&(e.save(),ub(e,this.getCenterPoint(),this.rotation),vb(e,this),pb(e,this,t),gb(e,function(e){let{x:t,y:n,width:a,height:r,options:s}=e;const i=s.borderWidth/2,o=gd(s.padding);return{x:t+o.left+i,y:n+o.top+i,width:a-o.left-o.right-s.borderWidth,height:r-o.top-o.bottom-s.borderWidth}}(this),t),e.restore())}resolveElementProperties(e,t){let n;if(rb(t))n=_b(e,t);else{const{centerX:a,centerY:r}=Sb(e,t);n={x:a,y:r}}const a=gd(t.padding),r=eb(n,fb(e.ctx,t),t,a);return(0,Ie.A)((0,Ie.A)({initProperties:ib(e,r,t),pointX:n.x,pointY:n.y},r),{},{rotation:t.rotation})}}Yb.id="labelAnnotation",Yb.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},Yb.defaultRoutes={borderColor:"color"};const Gb=(e,t,n)=>({x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}),$b=(e,t,n)=>Gb(t,n,Math.abs((e-t.y)/(n.y-t.y))).x,Xb=(e,t,n)=>Gb(t,n,Math.abs((e-t.x)/(n.x-t.x))).y,Kb=e=>e*e,Jb=(e,t,n,a)=>(1-a)*(1-a)*e+2*(1-a)*a*t+a*a*n,Qb=(e,t,n,a)=>({x:Jb(e.x,t.x,n.x,a),y:Jb(e.y,t.y,n.y,a)}),Zb=(e,t,n,a)=>2*(1-a)*(t-e)+2*a*(n-t),ev=(e,t,n,a)=>-Math.atan2(Zb(e.x,t.x,n.x,a),Zb(e.y,t.y,n.y,a))+.5*$l;class tv extends Th{inRange(e,t,n,a){const r=(this.options.borderWidth+this.options.hitTolerance)/2;if("x"!==n&&"y"!==n){const n={mouseX:e,mouseY:t},{path:s,ctx:i}=this;if(s){hb(i,this.options),i.lineWidth+=this.options.hitTolerance;const{chart:r}=this.$context,o=e*r.currentDevicePixelRatio,l=t*r.currentDevicePixelRatio,c=i.isPointInStroke(s,o,l)||rv(this,n,a);return i.restore(),c}return function(e,t){let{mouseX:n,mouseY:a}=t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Bx,s=arguments.length>3?arguments[3]:void 0;const{x:i,y:o,x2:l,y2:c}=e.getProps(["x","y","x2","y2"],s),d=l-i,u=c-o,h=Kb(d)+Kb(u),m=0===h?-1:((n-i)*d+(a-o)*u)/h;let f,p;m<0?(f=i,p=o):m>1?(f=l,p=c):(f=i+m*d,p=o+m*u);return Kb(n-f)+Kb(a-p)<=r}(this,n,Kb(r),a)||rv(this,n,a)}return function(e,t,n,a){let{mouseX:r,mouseY:s}=t,{hitSize:i,useFinalPosition:o}=a;const l=((e,t,n,a)=>{let{x:r,y:s,x2:i,y2:o}=n;return"y"===a?{start:Math.min(s,o),end:Math.max(s,o),value:t}:{start:Math.min(r,i),end:Math.max(r,i),value:e}})(r,s,e.getProps(["x","y","x2","y2"],o),n);return Ux(l,i)||rv(e,{mouseX:r,mouseY:s},o,n)}(this,{mouseX:e,mouseY:t},n,{hitSize:r,useFinalPosition:a})}getCenterPoint(e){return Yx(this,e)}draw(e){const{x:t,y:n,x2:a,y2:r,cp:s,options:i}=this;if(e.save(),!hb(e,i))return e.restore();mb(e,i);const o=Math.sqrt(Math.pow(a-t,2)+Math.pow(r-n,2));if(i.curve&&s)return function(e,t,n,a){const{x:r,y:s,x2:i,y2:o,options:l}=t,{startOpts:c,endOpts:d,startAdjust:u,endAdjust:h}=ov(t),m={x:r,y:s},f={x:i,y:o},p=ev(m,n,f,0),g=ev(m,n,f,1)-$l,x=Qb(m,n,f,u/a),b=Qb(m,n,f,1-h/a),v=new Path2D;e.beginPath(),v.moveTo(x.x,x.y),v.quadraticCurveTo(n.x,n.y,b.x,b.y),e.shadowColor=l.borderShadowColor,e.stroke(v),t.path=v,t.ctx=e,dv(e,x,{angle:p,adjust:u},c),dv(e,b,{angle:g,adjust:h},d)}(e,this,s,o),e.restore();const{startOpts:l,endOpts:c,startAdjust:d,endAdjust:u}=ov(this),h=Math.atan2(r-n,a-t);e.translate(t,n),e.rotate(h),e.beginPath(),e.moveTo(0+d,0),e.lineTo(o-u,0),e.shadowColor=i.borderShadowColor,e.stroke(),cv(e,0,d,l),cv(e,o,-u,c),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,t){const n=Cb(e,t),{x:a,y:r,x2:s,y2:i}=n,o=function(e,t){let{x:n,y:a,x2:r,y2:s}=e,{top:i,right:o,bottom:l,left:c}=t;return!(n<c&&r<c||n>o&&r>o||a<i&&s<i||a>l&&s>l)}(n,e.chartArea),l=o?function(e,t,n){const{x:a,y:r}=av(e,t,n),{x:s,y:i}=av(t,e,n);return{x:a,y:r,x2:s,y2:i,width:Math.abs(s-a),height:Math.abs(i-r)}}({x:a,y:r},{x:s,y:i},e.chartArea):{x:a,y:r,x2:s,y2:i,width:Math.abs(s-a),height:Math.abs(i-r)};if(l.centerX=(s+a)/2,l.centerY=(i+r)/2,l.initProperties=ib(e,l,t),t.curve){const e={x:l.x,y:l.y},n={x:l.x2,y:l.y2};l.cp=function(e,t,n){const{x:a,y:r,x2:s,y2:i,centerX:o,centerY:l}=e,c=Math.atan2(i-r,s-a),d=tb(t.controlPoint,0);return Fx({x:o+Zx(n,d.x,!1),y:l+Zx(n,d.y,!1)},{x:o,y:l},c)}(l,t,hc(e,n))}const c=function(e,t,n){const a=n.borderWidth,r=gd(n.padding),s=fb(e.ctx,n),i=s.width+r.width+a,o=s.height+r.height+a;return function(e,t,n,a){const{width:r,height:s,padding:i}=n,{xAdjust:o,yAdjust:l}=t,c={x:e.x,y:e.y},d={x:e.x2,y:e.y2},u="auto"===t.rotation?function(e){const{x:t,y:n,x2:a,y2:r}=e,s=Math.atan2(r-n,a-t);return s>$l/2?s-$l:s<$l/-2?s+$l:s}(e):lc(t.rotation),h=function(e,t,n){const a=Math.cos(n),r=Math.sin(n);return{w:Math.abs(e*a)+Math.abs(t*r),h:Math.abs(e*r)+Math.abs(t*a)}}(r,s,u),m=function(e,t,n,a){let r;const s=function(e,t){const{x:n,x2:a,y:r,y2:s}=e,i=Math.min(r,s)-t.top,o=Math.min(n,a)-t.left,l=t.bottom-Math.max(r,s),c=t.right-Math.max(n,a);return{x:Math.min(o,c),y:Math.min(i,l),dx:o<=c?1:-1,dy:i<=l?1:-1}}(e,a);r="start"===t.position?sv({w:e.x2-e.x,h:e.y2-e.y},n,t,s):"end"===t.position?1-sv({w:e.x-e.x2,h:e.y-e.y2},n,t,s):Qx(1,t.position);return r}(e,t,{labelSize:h,padding:i},a),f=e.cp?Qb(c,e.cp,d,m):Gb(c,d,m),p={size:h.w,min:a.left,max:a.right,padding:i.left},g={size:h.h,min:a.top,max:a.bottom,padding:i.top},x=iv(f.x,p)+o,b=iv(f.y,g)+l;return{x:x-r/2,y:b-s/2,x2:x+r/2,y2:b+s/2,centerX:x,centerY:b,pointX:f.x,pointY:f.y,width:r,height:s,rotation:cc(u)}}(t,n,{width:i,height:o,padding:r},e.chartArea)}(e,l,t.label);return c._visible=o,l.elements=[{type:"label",optionScope:"label",properties:c,initProperties:l.initProperties}],l}}tv.id="lineAnnotation";const nv={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};function av(e,t,n){let{x:a,y:r}=e,{top:s,right:i,bottom:o,left:l}=n;return a<l&&(r=Xb(l,{x:a,y:r},t),a=l),a>i&&(r=Xb(i,{x:a,y:r},t),a=i),r<s&&(a=$b(s,{x:a,y:r},t),r=s),r>o&&(a=$b(o,{x:a,y:r},t),r=o),{x:a,y:r}}function rv(e,t,n,a){let{mouseX:r,mouseY:s}=t;const i=e.label;return i.options.display&&i.inRange(r,s,a,n)}function sv(e,t,n,a){const{labelSize:r,padding:s}=t,i=e.w*a.dx,o=e.h*a.dy,l=i>0&&(r.w/2+s.left-a.x)/i,c=o>0&&(r.h/2+s.top-a.y)/o;return qx(Math.max(l,c),0,.25)}function iv(e,t){const{size:n,min:a,max:r,padding:s}=t,i=n/2;return n>r-a?(r+a)/2:(a>=e-s-i&&(e=a+s+i),r<=e+s+i&&(e=r-s-i),e)}function ov(e){const t=e.options,n=t.arrowHeads&&t.arrowHeads.start,a=t.arrowHeads&&t.arrowHeads.end;return{startOpts:n,endOpts:a,startAdjust:lv(e,n),endAdjust:lv(e,a)}}function lv(e,t){if(!t||!t.display)return 0;const{length:n,width:a}=t,r=e.options.borderWidth/2,s={x:n,y:a+r},i={x:0,y:r};return Math.abs($b(0,s,i))}function cv(e,t,n,a){if(!a||!a.display)return;const{length:r,width:s,fill:i,backgroundColor:o,borderColor:l}=a,c=Math.abs(t-r)+n;e.beginPath(),mb(e,a),hb(e,a),e.moveTo(c,-s),e.lineTo(t+n,0),e.lineTo(c,s),!0===i?(e.fillStyle=o||l,e.closePath(),e.fill(),e.shadowColor="transparent"):e.shadowColor=a.borderShadowColor,e.stroke()}function dv(e,t,n,a){let{x:r,y:s}=t,{angle:i,adjust:o}=n;a&&a.display&&(e.save(),e.translate(r,s),e.rotate(i),cv(e,0,-o,a),e.restore())}tv.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},nv),fill:!1,length:12,start:Object.assign({},nv),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Yb.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},tv.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}},tv.defaultRoutes={borderColor:"color"};class uv extends Th{inRange(e,t,n,a){const r=this.options.rotation,s=(this.options.borderWidth+this.options.hitTolerance)/2;if("x"!==n&&"y"!==n)return function(e,t,n,a){const{width:r,height:s,centerX:i,centerY:o}=t,l=r/2,c=s/2;if(l<=0||c<=0)return!1;const d=lc(n||0),u=Math.cos(d),h=Math.sin(d),m=Math.pow(u*(e.x-i)+h*(e.y-o),2),f=Math.pow(h*(e.x-i)-u*(e.y-o),2);return m/Math.pow(l+a,2)+f/Math.pow(c+a,2)<=1.0001}({x:e,y:t},this.getProps(["width","height","centerX","centerY"],a),r,s);const{x:i,y:o,x2:l,y2:c}=this.getProps(["x","y","x2","y2"],a),d="y"===n?{start:o,end:c}:{start:i,end:l},u=Fx({x:e,y:t},this.getCenterPoint(a),lc(-r));return u[n]>=d.start-s-Bx&&u[n]<=d.end+s+Bx}getCenterPoint(e){return Yx(this,e)}draw(e){const{width:t,height:n,centerX:a,centerY:r,options:s}=this;e.save(),ub(e,this.getCenterPoint(),s.rotation),mb(e,this.options),e.beginPath(),e.fillStyle=s.backgroundColor;const i=hb(e,s);e.ellipse(a,r,n/2,t/2,$l/2,0,2*$l),e.fill(),i&&(e.shadowColor=s.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,t){return Ab(e,t)}}uv.id="ellipseAnnotation",uv.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Hb.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},uv.defaultRoutes={borderColor:"color",backgroundColor:"color"},uv.descriptors={label:{_fallback:!0}};class hv extends Th{inRange(e,t,n,a){const{x:r,y:s,x2:i,y2:o,width:l}=this.getProps(["x","y","x2","y2","width"],a),c=(this.options.borderWidth+this.options.hitTolerance)/2;if("x"!==n&&"y"!==n)return function(e,t,n,a){return!(!e||!t||n<=0)&&Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(n+a,2)}({x:e,y:t},this.getCenterPoint(a),l/2,c);return Ux("y"===n?{start:s,end:o,value:t}:{start:r,end:i,value:e},c)}getCenterPoint(e){return Yx(this,e)}draw(e){const t=this.options,n=t.borderWidth;if(t.radius<.1)return;e.save(),e.fillStyle=t.backgroundColor,mb(e,t);const a=hb(e,t);xb(e,this,this.centerX,this.centerY),a&&!db(t.pointStyle)&&(e.shadowColor=t.borderShadowColor,e.stroke()),e.restore(),t.borderWidth=n}resolveElementProperties(e,t){const n=kb(e,t);return n.initProperties=ib(e,n,t),n}}hv.id="pointAnnotation",hv.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},hv.defaultRoutes={borderColor:"color",backgroundColor:"color"};class mv extends Th{inRange(e,t,n,a){if("x"!==n&&"y"!==n)return this.options.radius>=.1&&this.elements.length>1&&function(e,t,n,a){let r=!1,s=e[e.length-1].getProps(["bX","bY"],a);for(const i of e){const e=i.getProps(["bX","bY"],a);e.bY>n!==s.bY>n&&t<(s.bX-e.bX)*(n-e.bY)/(s.bY-e.bY)+e.bX&&(r=!r),s=e}return r}(this.elements,e,t,a);const r=Fx({x:e,y:t},this.getCenterPoint(a),lc(-this.options.rotation)),s=this.elements.map((e=>"y"===n?e.bY:e.bX)),i=Math.min(...s),o=Math.max(...s);return r[n]>=i&&r[n]<=o}getCenterPoint(e){return Yx(this,e)}draw(e){const{elements:t,options:n}=this;e.save(),e.beginPath(),e.fillStyle=n.backgroundColor,mb(e,n);const a=hb(e,n);let r=!0;for(const s of t)r?(e.moveTo(s.x,s.y),r=!1):e.lineTo(s.x,s.y);e.closePath(),e.fill(),a&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,t){const n=kb(e,t),{sides:a,rotation:r}=t,s=[],i=2*$l/a;let o=r*Ql;for(let l=0;l<a;l++,o+=i){const a=fv(n,t,o);a.initProperties=ib(e,n,t),s.push(a)}return n.elements=s,n}}function fv(e,t,n){let{centerX:a,centerY:r}=e,{radius:s,borderWidth:i,hitTolerance:o}=t;const l=(i+o)/2,c=Math.sin(n),d=Math.cos(n),u={x:a+c*s,y:r-d*s};return{type:"point",optionScope:"point",properties:{x:u.x,y:u.y,centerX:u.x,centerY:u.y,bX:a+c*(s+l),bY:r-d*(s+l)}}}mv.id="polygonAnnotation",mv.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},mv.defaultRoutes={borderColor:"color",backgroundColor:"color"};const pv={box:Hb,doughnutLabel:Vb,ellipse:uv,label:Yb,line:tv,point:hv,polygon:mv};Object.keys(pv).forEach((e=>{$c.describe("elements.".concat(pv[e].id),{_fallback:"plugins.annotation.common"})}));const gv={update:Object.assign},xv=Mb.concat(Ib),bv=(e,t)=>Al(t)?kv(e,t):e,vv=e=>"color"===e||"font"===e;function yv(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"line";return pv[e]?e:(console.warn("Unknown annotation type: '".concat(e,"', defaulting to 'line'")),"line")}function wv(e,t,n,a){const r=function(e,t,n){if("reset"===n||"none"===n||"resize"===n)return gv;return new vu(e,t)}(e,n.animations,a),s=t.annotations,i=function(e,t){const n=t.length,a=e.length;if(a<n){const t=n-a;e.splice(a,0,...new Array(t))}else a>n&&e.splice(n,a-n);return e}(t.elements,s);for(let o=0;o<s.length;o++){const t=s[o],n=_v(i,o,t.type),a=t.setContext(Cv(e,n,i,t)),l=n.resolveElementProperties(e,a);l.skip=jv(l),"elements"in l&&(Nv(n,l.elements,a,r),delete l.elements),Vl(n.x)||Object.assign(n,l),Object.assign(n,l.initProperties),l.options=Sv(a),r.update(n,l)}}function jv(e){return isNaN(e.x)||isNaN(e.y)}function Nv(e,t,n,a){const r=e.elements||(e.elements=[]);r.length=t.length;for(let s=0;s<t.length;s++){const e=t[s],i=e.properties,o=_v(r,s,e.type,e.initProperties),l=n[e.optionScope].override(e);i.options=Sv(l),a.update(o,i)}}function _v(e,t,n,a){const r=pv[yv(n)];let s=e[t];return s&&s instanceof r||(s=e[t]=new r,Object.assign(s,a)),s}function Sv(e){const t=pv[yv(e.type)],n={};n.id=e.id,n.type=e.type,n.drawTime=e.drawTime,Object.assign(n,kv(e,t.defaults),kv(e,t.defaultRoutes));for(const a of xv)n[a]=e[a];return n}function kv(e,t){const n={};for(const a of Object.keys(t)){const r=t[a],s=e[a];vv(a)&&Cl(s)?n[a]=s.map((e=>bv(e,r))):n[a]=bv(s,r)}return n}function Cv(e,t,n,a){return t.$context||(t.$context=Object.assign(Object.create(e.getContext()),{element:t,get elements(){return n.filter((e=>e&&e.options))},id:a.id,type:"annotation"}))}const Av=new Map,Pv=e=>"doughnutLabel"!==e.type,Lv=Mb.concat(Ib);var Ev={id:"annotation",version:"3.1.0",beforeRegister(){!function(e,t,n){let a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const r=n.split(".");let s=0;for(const i of t.split(".")){const o=r[s++];if(parseInt(i,10)<parseInt(o,10))break;if(zx(o,i)){if(a)throw new Error("".concat(e," v").concat(n," is not supported. v").concat(t," or newer is required."));return!1}}}("chart.js","4.0",wm.version)},afterRegister(){wm.register(pv)},afterUnregister(){wm.unregister(pv)},beforeInit(e){Av.set(e,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(e,t,n){const a=Av.get(e).annotations=[];let r=n.annotations;Al(r)?Object.keys(r).forEach((e=>{const t=r[e];Al(t)&&(t.id=e,a.push(t))})):Cl(r)&&a.push(...r),function(e,t){for(const n of e)qb(n,t)}(a.filter(Pv),e.scales)},afterDataLimits(e,t){const n=Av.get(e);zb(e,t.scale,n.annotations.filter(Pv).filter((e=>e.display&&e.adjustScaleRange)))},afterUpdate(e,t,n){const a=Av.get(e);!function(e,t,n){t.listened=ob(n,Mb,t.listeners),t.moveListened=!1,Db.forEach((e=>{Yl(n[e])&&(t.moveListened=!0)})),t.listened&&t.moveListened||t.annotations.forEach((e=>{!t.listened&&Yl(e.click)&&(t.listened=!0),t.moveListened||Db.forEach((n=>{Yl(e[n])&&(t.listened=!0,t.moveListened=!0)}))}))}(0,a,n),wv(e,a,n,t.mode),a.visibleElements=a.elements.filter((e=>!e.skip&&e.options.display)),function(e,t,n){const a=t.visibleElements;t.hooked=ob(n,Ib,t.hooks),t.hooked||a.forEach((e=>{t.hooked||Ib.forEach((n=>{Yl(e.options[n])&&(t.hooked=!0)}))}))}(0,a,n)},beforeDatasetsDraw(e,t,n){Dv(e,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(e,t,n){Dv(e,"afterDatasetsDraw",n.clip)},beforeDatasetDraw(e,t,n){Dv(e,t.index,n.clip)},beforeDraw(e,t,n){Dv(e,"beforeDraw",n.clip)},afterDraw(e,t,n){Dv(e,"afterDraw",n.clip)},beforeEvent(e,t,n){Ob(Av.get(e),t.event,n)&&(t.changed=!0)},afterDestroy(e){Av.delete(e)},getAnnotations(e){const t=Av.get(e);return t?t.elements:[]},_getAnnotationElementsAtEventForMode:(e,t,n)=>Rx(e,t,n),defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:e=>!Lv.includes(e)&&"init"!==e,annotations:{_allKeys:!1,_fallback:(e,t)=>"elements.".concat(pv[yv(t.type)].id)},interaction:{_fallback:!0},common:{label:{_indexable:vv,_fallback:!0},_indexable:vv}},additionalOptionScopes:[""]};function Dv(e,t,n){const{ctx:a,chartArea:r}=e,s=Av.get(e);n&&nd(a,r);const i=function(e,t){const n=[];for(const a of e)if(a.options.drawTime===t&&n.push({element:a,main:!0}),a.elements&&a.elements.length)for(const e of a.elements)e.options.display&&e.options.drawTime===t&&n.push({element:e});return n}(s.visibleElements,t).sort(((e,t)=>e.element.options.z-t.element.options.z));for(const o of i)Mv(a,r,s,o);n&&ad(a)}function Mv(e,t,n,a){const r=a.element;a.main?(Fb(n,r,"beforeDraw"),r.draw(e,t),Fb(n,r,"afterDraw")):r.draw(e,t)}const Ov=e=>{let{selectedLevel:t,onLevelChange:n,disabled:r=!1}=e;const[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(!0),[u,h]=(0,a.useState)(null);(0,a.useEffect)((()=>{m()}),[]);const m=async()=>{try{d(!0);const e=await(0,nt.O9)();i(e)}catch(yj){console.error("Erro ao carregar n\xedveis de prompting:",yj),h("Erro ao carregar n\xedveis de prompting")}finally{d(!1)}};if(c)return(0,He.jsxs)("div",{className:"space-y-2",children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xedvel de Prompting"}),(0,He.jsx)("div",{className:"animate-pulse bg-gray-200 h-10 rounded-lg"})]});if(u)return(0,He.jsxs)("div",{className:"space-y-2",children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xedvel de Prompting"}),(0,He.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-red-700 text-sm",children:u})]});const f=s.find((e=>e.id===t));return(0,He.jsxs)("div",{className:"space-y-2",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xedvel de Prompting Atual"}),(0,He.jsxs)("div",{className:"group relative",children:[(0,He.jsx)(Hr,{icon:gi,className:"text-blue-500 text-xs cursor-help"}),(0,He.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none w-48 z-10",children:"Define o n\xedvel de ajuda necess\xe1rio para a crian\xe7a realizar a tarefa"})]})]}),(0,He.jsxs)("div",{className:"relative",children:[(0,He.jsxs)("button",{type:"button",onClick:()=>!r&&l(!o),disabled:r,className:"w-full px-3 py-2 border rounded-lg shadow-sm text-left flex items-center justify-between transition-colors ".concat(r?"bg-gray-100 border-gray-300 text-gray-500 cursor-not-allowed":"bg-white border-gray-300 hover:border-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"),children:[(0,He.jsx)("div",{className:"flex items-center space-x-3",children:f&&(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.color}}),(0,He.jsx)("span",{className:"font-medium",children:f.name}),(0,He.jsxs)("span",{className:"text-gray-500 text-sm",children:["(N\xedvel ",f.id,")"]})]})}),(0,He.jsx)(Hr,{icon:Ti,className:"text-gray-400 transition-transform ".concat(o?"rotate-180":"")})]}),o&&!r&&(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>l(!1)}),(0,He.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-20 max-h-64 overflow-y-auto",children:s.map((e=>(0,He.jsx)("button",{type:"button",onClick:()=>{return t=e.id,n(t),void l(!1);var t},className:"w-full px-3 py-3 text-left hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0 ".concat(t===e.id?"bg-indigo-50 text-indigo-700":""),children:(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,He.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"font-medium",children:e.name}),(0,He.jsxs)("span",{className:"text-gray-500 text-sm",children:["(N\xedvel ",e.id,")"]}),5===e.id&&(0,He.jsx)("span",{className:"text-yellow-500",children:"\u2b50"})]}),(0,He.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:e.description})]})]})},e.id)))})]})]}),f&&(0,He.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,He.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,He.jsx)("strong",{children:"Descri\xe7\xe3o:"})," ",f.description]}),5===f.id&&(0,He.jsxs)("div",{className:"text-xs text-amber-600 mt-1 flex items-center space-x-1",children:[(0,He.jsx)("span",{children:"\u2b50"}),(0,He.jsx)("span",{children:"Apenas este n\xedvel conta para crit\xe9rio de dom\xednio (80%+)"})]})]})]})},Tv=[{value:"dtt",label:"DTT (Discrete Trial Training)",description:"Tentativas Discretas"},{value:"net",label:"NET (Natural Environment Teaching)",description:"Ensino no Ambiente Natural"},{value:"incidental",label:"Incidental Teaching",description:"Ensino Incidental"},{value:"structured_play",label:"Structured Play",description:"Brincadeira Estruturada"},{value:"group_instruction",label:"Group Instruction",description:"Instru\xe7\xe3o em Grupo"}];wm.register(Gf,Jf,Fm,Rm,kf,Wf,_f,yf,Ev);const Rv=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long";if(!e)return"N/A";const n=new Date(e);if(isNaN(n.getTime()))return"Data inv\xe1lida";const a=6e4*n.getTimezoneOffset(),r="short"===t?{day:"2-digit",month:"2-digit"}:{day:"2-digit",month:"2-digit",year:"numeric"};return new Date(n.getTime()+a).toLocaleDateString("pt-BR",r)},Iv=e=>{let{program:t,assignment:n}=e;const{user:r}=Ge(),{selectedPatient:s,getPromptLevelForProgram:i,setPromptLevelForProgram:o}=ct(),[l,c]=(0,a.useState)((new Date).toISOString().split("T")[0]),[d,u]=(0,a.useState)((null===t||void 0===t?void 0:t.trials)||(null===t||void 0===t?void 0:t.default_trials)||""),[h,m]=(0,a.useState)(""),[f,p]=(0,a.useState)(""),[g,x]=(0,a.useState)(!1),[b,v]=(0,a.useState)(""),[y,w]=(0,a.useState)(null),[j,N]=(0,a.useState)(!0);(0,a.useEffect)((()=>{(async()=>{if(s&&t){const e=t.program_id||t.id;if(e){N(!0);try{console.log("[SESSION-PROGRESS] Carregando prompt level para paciente ".concat(s.id,", programa ").concat(e));const t=await i(s.id,e);w(t),console.log("[SESSION-PROGRESS] Prompt level carregado: ".concat(t))}catch(A){console.error("[SESSION-PROGRESS] Erro ao carregar prompt level:",A),w(5)}finally{N(!1)}}}})()}),[s,t,i]);const[_,S]=(0,a.useState)(!1),[k,C]=(0,a.useState)(!1),[A,P]=(0,a.useState)(""),[L,E]=(0,a.useState)([]),[D,M]=(0,a.useState)(!0),O=(0,a.useMemo)((()=>{if(null===t||void 0===t||!t.procedure)return[];try{return"string"===typeof t.procedure?JSON.parse(t.procedure):t.procedure}catch(vj){return[]}}),[t]),T=(0,a.useCallback)((async()=>{if(null!==n&&void 0!==n&&n.assignment_id){M(!0);try{const e=await(0,nt.v2)(n.assignment_id),t=Array.isArray(e)?e:[];E(t)}catch(yj){P("N\xe3o foi poss\xedvel carregar o hist\xf3rico de progresso.")}finally{M(!1)}}}),[n]),R=(0,a.useCallback)((async e=>{const a=(null===t||void 0===t?void 0:t.program_id)||(null===t||void 0===t?void 0:t.id),r=(null===n||void 0===n?void 0:n.assignment_id)||(null===n||void 0===n?void 0:n.id);if(s&&t&&a&&r){w(e);try{console.log("[SESSION-PROGRESS] Atualizando prompt level para ".concat(e)),await o(s.id,a,e,r),console.log("[SESSION-PROGRESS] Prompt level ".concat(e," salvo com sucesso"))}catch(A){console.error("[SESSION-PROGRESS] Erro ao salvar prompt level:",A);try{const e=await i(s.id,a);w(e),console.log("[SESSION-PROGRESS] Prompt level revertido para valor do banco: ".concat(e))}catch(l){console.error("[SESSION-PROGRESS] Erro ao recarregar prompt level:",l),w(5)}}}else console.error("[SESSION-PROGRESS] Dados insuficientes para atualizar prompt level")}),[s,t,n,o,i]);(0,a.useEffect)((()=>{if(!t||!n)return E([]),void M(!1);T(),u(t.trials||t.default_trials||"")}),[t,n,T,O,s,i]);const I={labels:L.map((e=>e.session_date)),datasets:[{label:"Pontua\xe7\xe3o (%)",data:L.map((e=>{const t=parseFloat(e.score);return isNaN(t)?0:t})),borderColor:"#4f46e5",backgroundColor:e=>{const t=e.chart,{ctx:n,chartArea:a}=t;if(!a)return"rgba(79, 70, 229, 0.1)";const r=n.createLinearGradient(0,a.top,0,a.bottom);return r.addColorStop(0,"rgba(99, 102, 241, 0.3)"),r.addColorStop(.5,"rgba(79, 70, 229, 0.2)"),r.addColorStop(1,"rgba(67, 56, 202, 0.1)"),r},borderWidth:3,pointRadius:L.map((e=>{var t;return null!==(t=e.details)&&void 0!==t&&t.isBaseline?8:6})),pointBackgroundColor:L.map((e=>{var t,n;return null!==(t=e.details)&&void 0!==t&&t.isBaseline?"#f59e0b":null!==(n=e.details)&&void 0!==n&&n.promptLevelColor?e.details.promptLevelColor:"#4f46e5"})),pointBorderColor:L.map((e=>{var t;return null!==(t=e.details)&&void 0!==t&&t.isBaseline?"#f59e0b":"#ffffff"})),pointBorderWidth:L.map((e=>{var t;return null!==(t=e.details)&&void 0!==t&&t.isBaseline?4:2})),pointHoverRadius:L.map((e=>{var t;return null!==(t=e.details)&&void 0!==t&&t.isBaseline?10:8})),pointHoverBorderWidth:3,pointStyle:L.map((e=>{var t;return null!==(t=e.details)&&void 0!==t&&t.isBaseline?"star":"circle"})),fill:!0,tension:.4,shadowColor:"rgba(79, 70, 229, 0.3)",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:4}]},F={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#e5e7eb",borderColor:"#4f46e5",borderWidth:2,padding:16,cornerRadius:12,displayColors:!1,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{title:e=>{var t;const n=e[0].dataIndex,a=L[n],r=null===a||void 0===a||null===(t=a.details)||void 0===t?void 0:t.isBaseline,s=Rv(e[0].label);let i="Sess\xe3o de ".concat(s);return i=r?"\ud83d\udccb [LINHA DE BASE] ".concat(i):"\ud83d\udcc8 ".concat(i),i},label:e=>{const t=e.parsed.y.toFixed(1);return"\ud83c\udfaf Pontua\xe7\xe3o: ".concat(t,"%")},afterLabel:e=>{var t;if(!e||void 0===e.dataIndex)return"";const n=e.dataIndex,a=L[n],r=(null===a||void 0===a?void 0:a.attempts)||0,s=(null===a||void 0===a?void 0:a.successes)||0;let i=["\ud83d\udcca Acertos: ".concat(s,"/").concat(r)];return null!==a&&void 0!==a&&null!==(t=a.details)&&void 0!==t&&t.promptLevelName&&i.push("\ud83c\udfaf N\xedvel: ".concat(a.details.promptLevelName)),a&&a.therapist_name&&""!==a.therapist_name.trim()?i.push("\ud83d\udc68\u200d\u2695\ufe0f Terapeuta: ".concat(a.therapist_name)):a&&a.therapist_id&&null!==a.therapist_id&&i.push("\ud83d\udc68\u200d\u2695\ufe0f Terapeuta ID: ".concat(a.therapist_id)),i},afterBody:e=>{var t;if(!e||!e[0]||void 0===e[0].dataIndex)return"";const n=e[0].dataIndex,a=L[n],s=null===a||void 0===a||null===(t=a.details)||void 0===t?void 0:t.notes;let i=[];if(s&&(i.push("\n\ud83d\udcdd Observa\xe7\xf5es:"),i.push("".concat(s))),r&&("therapist"===r.role||"terapeuta"===r.role||"admin"===r.role||"administrador"===r.role)&&null!==a&&void 0!==a&&a.created_at){const e=new Date(a.created_at).toLocaleString("pt-BR");i.push("\n\ud83d\udcc5 Registrado: ".concat(e))}return i.length>0?i:""}}},annotation:{annotations:{goalLine:{type:"line",yMin:80,yMax:80,borderColor:"#10b981",borderWidth:3,borderDash:[8,4],label:{content:"\ud83c\udfaf Meta (80%)",position:"end",backgroundColor:"rgba(16, 185, 129, 0.9)",font:{size:12,weight:"bold"},color:"white",padding:8,borderRadius:6,yAdjust:-10}}}}},scales:{x:{display:!0,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:11,weight:500},maxTicksLimit:8,callback:function(e){const t=this.getLabelForValue(e);return Rv(t,"short")}},border:{display:!1}},y:{display:!0,beginAtZero:!0,max:105,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:11,weight:500},stepSize:20,callback:e=>e>=0&&e<=100?"".concat(e,"%"):""},border:{display:!1}}}};return t&&n?(0,He.jsxs)("div",{children:[(null===t||void 0===t?void 0:t.objective)&&(0,He.jsxs)("div",{className:"mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 p-6 rounded-r-lg",children:[(0,He.jsxs)("h5",{className:"font-semibold text-blue-800 mb-3 flex items-center",children:[(0,He.jsx)("div",{className:"bg-blue-100 p-2 rounded-full mr-3",children:(0,He.jsx)(Hr,{icon:ws,className:"text-blue-600"})}),"Objetivo do Programa"]}),(0,He.jsx)("p",{className:"text-blue-700 leading-relaxed text-base",children:t.objective})]}),(0,He.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden mb-8",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-indigo-200 px-6 py-4",children:[(0,He.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,He.jsx)("div",{className:"bg-indigo-100 p-2 rounded-full mr-3",children:(0,He.jsx)(Hr,{icon:ri,className:"text-indigo-600"})}),"Registrar Nova Sess\xe3o"]}),(0,He.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Insira os dados da sess\xe3o para acompanhar o progresso"})]}),(0,He.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=parseInt(d,10),a=parseInt(h,10);if(isNaN(t)||t<=0)return void P("O n\xfamero de tentativas \xe9 inv\xe1lido.");if(isNaN(a)||a<0||a>t)return void P("O n\xfamero de acertos deve ser entre 0 e ".concat(t,"."));if(!b)return void P("Por favor, selecione uma modalidade de ensino.");P(""),S(!0),C(!1);const r=t>0?a/t*100:0,s={assignment_id:n.assignment_id,step_id:null,session_date:l,attempts:t,successes:a,score:parseFloat(r.toFixed(2)),details:{notes:f,isBaseline:g,promptLevel:y,teachingModality:b}};try{await(0,nt.lF)(s),m(""),p(""),x(!1),v(""),C(!0),T(),setTimeout((()=>C(!1)),2e3)}catch(yj){var i,o;P((null===(i=yj.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||"Ocorreu um erro ao salvar a sess\xe3o.")}finally{S(!1)}},className:"p-6 space-y-6",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6",children:[(0,He.jsxs)("h4",{className:"text-sm font-semibold text-blue-700 mb-4 flex items-center",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mr-2"}),"Informa\xe7\xf5es da Sess\xe3o"]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{htmlFor:"session-date",className:"block text-sm font-medium text-blue-700 mb-2",children:"Data da Sess\xe3o"}),(0,He.jsx)("input",{type:"date",id:"session-date",required:!0,value:l,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 border border-blue-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{htmlFor:"teaching-modality",className:"block text-sm font-medium text-blue-700 mb-2",children:"Modalidade de Ensino"}),(0,He.jsxs)("select",{id:"teaching-modality",value:b,onChange:e=>v(e.target.value),required:!0,className:"w-full px-4 py-3 border border-blue-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white",children:[(0,He.jsx)("option",{value:"",disabled:!0,children:"Selecione a modalidade"}),Tv.map((e=>(0,He.jsx)("option",{value:e.value,title:e.description,children:e.label},e.value)))]})]})]})]}),(0,He.jsxs)("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl p-6",children:[(0,He.jsxs)("h4",{className:"text-sm font-semibold text-emerald-700 mb-4 flex items-center",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full mr-2"}),"Dados da Sess\xe3o"]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{htmlFor:"session-attempts",className:"block text-sm font-medium text-emerald-700 mb-2",children:"Tentativas"}),(0,He.jsx)("input",{type:"number",id:"session-attempts",value:d,readOnly:!0,className:"w-full px-4 py-3 border border-emerald-200 rounded-xl shadow-sm bg-emerald-100/50 cursor-not-allowed text-emerald-800 font-medium"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{htmlFor:"session-successes",className:"block text-sm font-medium text-emerald-700 mb-2",children:"Acertos"}),(0,He.jsx)("input",{type:"number",id:"session-successes",value:h,onChange:e=>m(e.target.value),min:"0",step:"1",required:!0,placeholder:"Ex: 8",className:"w-full px-4 py-3 border border-emerald-300 rounded-xl shadow-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all bg-white"})]})]})]}),(0,He.jsxs)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-6",children:[(0,He.jsxs)("label",{htmlFor:"session-notes",className:"block text-sm font-medium text-amber-700 mb-3 flex items-center",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-amber-500 to-orange-600 rounded-full mr-2"}),"Observa\xe7\xf5es da Sess\xe3o"]}),(0,He.jsx)("textarea",{id:"session-notes",value:f,onChange:e=>p(e.target.value),rows:"4",placeholder:"Registre observa\xe7\xf5es importantes sobre a sess\xe3o: comportamento, estrat\xe9gias utilizadas, contexto, etc...",className:"w-full px-4 py-3 border border-amber-300 rounded-xl shadow-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all bg-white resize-none"})]}),(0,He.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-xl p-6",children:[(0,He.jsxs)("h4",{className:"text-sm font-semibold text-purple-700 mb-4 flex items-center",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full mr-2"}),"N\xedvel de Suporte e Configura\xe7\xf5es"]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,He.jsx)("div",{children:j?(0,He.jsxs)("div",{className:"space-y-2",children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xedvel de Prompting"}),(0,He.jsx)("div",{className:"animate-pulse bg-gray-200 h-10 rounded-lg flex items-center justify-center",children:(0,He.jsx)("span",{className:"text-gray-500 text-sm",children:"Carregando..."})})]}):(0,He.jsx)(Ov,{selectedLevel:y,onLevelChange:R,disabled:_})}),(0,He.jsx)("div",{className:"flex items-center justify-start lg:justify-center pt-2 lg:pt-8",children:(0,He.jsxs)("div",{className:"flex items-center space-x-3 bg-white border border-purple-200 rounded-xl px-4 py-3 shadow-sm",children:[(0,He.jsx)("input",{type:"checkbox",id:"is-baseline",checked:g,onChange:e=>x(e.target.checked),className:"h-4 w-4 text-purple-600 border-purple-300 rounded focus:ring-purple-500 transition-all"}),(0,He.jsx)("label",{htmlFor:"is-baseline",className:"block text-sm font-medium text-purple-700 cursor-pointer",children:"Marcar como Linha de Base"})]})})]})]}),(0,He.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border border-gray-200 rounded-xl p-6",children:(0,He.jsx)("div",{className:"flex items-center justify-end",children:(0,He.jsxs)("button",{type:"submit",disabled:_,className:"\n                  font-semibold py-4 px-8 rounded-xl text-sm transition-all duration-300 flex items-center justify-center min-w-[200px] shadow-lg transform hover:scale-105 disabled:hover:scale-100 border-2\n                  ".concat(k?"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white shadow-green-200 border-green-300":"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white shadow-indigo-200 border-indigo-300 disabled:from-gray-300 disabled:to-gray-400 disabled:border-gray-300","\n                "),children:[(0,He.jsx)("div",{className:"bg-white bg-opacity-20 p-2 rounded-full mr-3",children:(0,He.jsx)(Hr,{icon:_?Zi:k?fo:ri,className:"text-base ".concat(_&&"fa-spin")})}),(0,He.jsx)("span",{className:"text-base",children:_?"Salvando...":k?"Salvo com Sucesso!":"Salvar Sess\xe3o"})]})})}),A&&(0,He.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-500 p-4 rounded-r-lg",children:(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)(Hr,{icon:ws,className:"text-red-600 mt-1 mr-3"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{className:"text-red-800 font-medium mb-1",children:"Erro na Sess\xe3o"}),(0,He.jsx)("p",{className:"text-red-700 text-sm",children:A})]})]})})]})]}),(0,He.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[(0,He.jsx)("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-b border-emerald-200 px-6 py-4",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,He.jsx)("div",{className:"bg-emerald-100 p-2 rounded-full mr-3",children:(0,He.jsx)(Hr,{icon:Qs,className:"text-emerald-600"})}),"Gr\xe1fico de Evolu\xe7\xe3o"]}),(0,He.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Hist\xf3rico de desempenho ao longo das sess\xf5es"})]}),L.length>0&&(0,He.jsxs)("div",{className:"text-right",children:[(0,He.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,He.jsx)("span",{className:"font-medium",children:L.length})," sess\xf5es registradas"]}),(0,He.jsx)("div",{className:"text-xs text-emerald-600 mt-1",children:(()=>{const e=L.filter((e=>null!==e.score&&void 0!==e.score&&!isNaN(e.score))),t=e.length<L.length;if(0===e.length)return"M\xe9dia: N/A";const n=e.reduce(((e,t)=>e+parseFloat(t.score)),0)/e.length,a="M\xe9dia: ".concat(n.toFixed(1),"%");return t&&L.length>0?(0,He.jsxs)(He.Fragment,{children:[a,(0,He.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(",e.length," de ",L.length," com pontua\xe7\xe3o)"]})]}):a})()})]})]})}),(0,He.jsx)("div",{className:"p-6",children:(0,He.jsx)("div",{className:"relative h-80 md:h-96",children:D?(0,He.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("div",{className:"bg-gradient-to-r from-indigo-100 to-purple-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-2xl text-indigo-600"})}),(0,He.jsx)("p",{className:"text-gray-600 font-medium",children:"Carregando hist\xf3rico..."})]})}):L.length>0?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)("div",{className:"h-full bg-gradient-to-br from-gray-50 to-indigo-50 rounded-lg p-4",children:(0,He.jsx)(Dx,{options:F,data:I})}),(0,He.jsxs)("div",{className:"mt-4 bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,He.jsxs)("div",{className:"mb-3",children:[(0,He.jsx)("h6",{className:"text-xs font-medium text-gray-700 mb-2",children:"Legenda dos N\xedveis de Prompting:"}),(0,He.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#10b981"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"Independente"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#8b5cf6"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"Dica Verbal"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#f59e0b"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"Dica Gestual"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#ef4444"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"Ajuda F\xedsica Parcial"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#dc2626"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"Ajuda F\xedsica Total"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#6b7280"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"N\xe3o Executado"})]})]})]}),(0,He.jsxs)("div",{className:"border-t border-gray-200 pt-2",children:[(0,He.jsx)("h6",{className:"text-xs font-medium text-gray-700 mb-2",children:"Formas dos Pontos:"}),(0,He.jsxs)("div",{className:"flex flex-wrap gap-4 text-xs",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("div",{className:"relative",children:(0,He.jsx)("span",{className:"text-amber-500 text-sm",children:"\u2b50"})}),(0,He.jsx)("span",{className:"text-gray-600",children:"Linha de Base"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full bg-indigo-500"}),(0,He.jsx)("span",{className:"text-gray-600",children:"Sess\xe3o Regular"})]})]})]}),(0,He.jsxs)("div",{className:"mt-2 text-xs text-amber-700 flex items-center space-x-1",children:[(0,He.jsx)("span",{children:"\ud83d\udca1"}),(0,He.jsx)("span",{children:'Apenas sess\xf5es "Independente" contam para crit\xe9rio de dom\xednio (80%+)'})]})]})]}):(0,He.jsx)("div",{className:"flex items-center justify-center h-full text-center bg-gradient-to-br from-gray-50 to-slate-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-gray-100 to-slate-100 p-6 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:Qs,className:"text-3xl text-gray-400"})}),(0,He.jsx)("h5",{className:"font-semibold text-gray-600 mb-2",children:"Nenhum Hist\xf3rico"}),(0,He.jsx)("p",{className:"text-gray-500 text-sm leading-relaxed max-w-sm",children:"Registre a primeira sess\xe3o para come\xe7ar a visualizar o progresso no gr\xe1fico."})]})})})})]})]}):(0,He.jsxs)("div",{className:"flex flex-col items-center justify-center text-center p-12 h-full",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 p-8 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:Qs,className:"text-4xl text-indigo-600"})}),(0,He.jsx)("h4",{className:"font-semibold text-xl text-gray-700 mb-3",children:"Nenhum Programa Selecionado"}),(0,He.jsx)("p",{className:"text-gray-500 leading-relaxed max-w-md",children:"Selecione um programa na lista ao lado para visualizar gr\xe1ficos de progresso e registrar sess\xf5es."}),(0,He.jsx)("div",{className:"mt-6 bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-dashed border-indigo-300 rounded-lg p-4",children:(0,He.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-indigo-600",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"}),(0,He.jsx)("span",{className:"text-sm font-medium",children:"Aguardando sele\xe7\xe3o"})]})})]})},Fv=e=>{let{startDate:t,endDate:n,onStartDateChange:r,onEndDateChange:s,onClear:i,showPresets:o=!0,showInfo:l=!0}=e;const[c,d]=(0,a.useState)(!1);(0,a.useEffect)((()=>{if(!t&&!n){const e=(()=>{const e=new Date,t=new Date;return t.setMonth(t.getMonth()-1),{startDate:t.toISOString().split("T")[0],endDate:e.toISOString().split("T")[0]}})();r(e.startDate),s(e.endDate)}}),[t,n,r,s]);const u=[{label:"7 dias",icon:ki,color:"text-blue-600",bgColor:"bg-blue-50 hover:bg-blue-100",borderColor:"border-blue-200",days:7,description:"\xdaltima semana"},{label:"1 m\xeas",icon:Zr,color:"text-green-600",bgColor:"bg-green-50 hover:bg-green-100",borderColor:"border-green-200",days:30,description:"\xdaltimo m\xeas (padr\xe3o)",isDefault:!0},{label:"3 meses",icon:Qs,color:"text-purple-600",bgColor:"bg-purple-50 hover:bg-purple-100",borderColor:"border-purple-200",days:90,description:"\xdaltimos 3 meses"},{label:"6 meses",icon:Ni,color:"text-orange-600",bgColor:"bg-orange-50 hover:bg-orange-100",borderColor:"border-orange-200",days:180,description:"\xdaltimos 6 meses"}],h=(()=>{if(!t||!n)return null;const e=new Date(t),a=new Date(n),r=new Date;if(Math.abs(a-r)<864e5){const t=Math.abs(a-e),n=Math.ceil(t/864e5),r=u.find((e=>Math.abs(e.days-n)<=1));return r}return null})();return(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)(Hr,{icon:Zr,className:"text-indigo-600"}),(0,He.jsx)("h3",{className:"text-sm font-medium text-gray-800",children:"Per\xedodo dos Gr\xe1ficos"}),l&&(0,He.jsxs)("div",{className:"relative",children:[(0,He.jsx)("button",{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,He.jsx)(Hr,{icon:gi,className:"text-xs"})}),c&&(0,He.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-gray-800 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap z-10",children:["Selecione o per\xedodo para visualizar os dados dos gr\xe1ficos",(0,He.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-800"})]})]})]}),(t||n)&&(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[h&&(0,He.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(h.bgColor," ").concat(h.color," border ").concat(h.borderColor),children:h.label}),(0,He.jsx)("span",{className:"text-xs text-gray-500",children:(()=>{if(!t||!n)return"";const e=new Date(t),a=new Date(n),r=Math.abs(a-e),s=Math.ceil(r/864e5)+1;return"".concat(s," dia").concat(1!==s?"s":""," selecionado").concat(1!==s?"s":"")})()})]})]}),o&&(0,He.jsxs)("div",{className:"mb-4",children:[(0,He.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Sele\xe7\xf5es r\xe1pidas:"}),(0,He.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:u.map(((e,t)=>(0,He.jsxs)("button",{onClick:()=>(e=>{const t=new Date,n=new Date;n.setDate(n.getDate()-e);const a=n.toISOString().split("T")[0],i=t.toISOString().split("T")[0];r(a),s(i)})(e.days),className:"\n                  flex flex-col items-center p-3 rounded-lg border transition-all duration-200\n                  ".concat((null===h||void 0===h?void 0:h.days)===e.days?"".concat(e.bgColor," ").concat(e.borderColor," border-2"):"bg-gray-50 hover:bg-gray-100 border-gray-200 hover:border-gray-300","\n                "),title:e.description,children:[(0,He.jsx)(Hr,{icon:e.icon,className:"text-lg mb-1 ".concat((null===h||void 0===h?void 0:h.days)===e.days?e.color:"text-gray-600")}),(0,He.jsx)("span",{className:"text-xs font-medium ".concat((null===h||void 0===h?void 0:h.days)===e.days?e.color:"text-gray-700"),children:e.label}),e.isDefault&&(0,He.jsx)("span",{className:"text-[10px] text-gray-500 mt-1",children:"padr\xe3o"})]},t)))})]}),(0,He.jsxs)("div",{className:"border-t border-gray-100 pt-4",children:[(0,He.jsx)("p",{className:"text-xs text-gray-600 mb-3",children:"Ou selecione um per\xedodo personalizado:"}),(0,He.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("label",{className:"text-sm text-gray-600",children:"De:"}),(0,He.jsx)("input",{type:"date",value:t,onChange:e=>r(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("label",{className:"text-sm text-gray-600",children:"At\xe9:"}),(0,He.jsx)("input",{type:"date",value:n,onChange:e=>s(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(t||n)&&(0,He.jsxs)("button",{onClick:()=>{r(""),s(""),i&&i()},className:"flex items-center space-x-1 px-3 py-2 text-sm text-red-600 hover:text-red-800 hover:bg-red-50 rounded-md transition-colors",title:"Limpar filtros",children:[(0,He.jsx)(Hr,{icon:yo}),(0,He.jsx)("span",{children:"Limpar"})]})]})]})]})},zv=e=>{var t;let{isOpen:n,onClose:r,suggestedText:s,currentText:i,onUseSuggestion:o,onAppendSuggestion:l,isGenerating:c=!1}=e;const[d,u]=(0,a.useState)(s),[h,m]=(0,a.useState)(!1);a.useEffect((()=>{u(s),m(!1)}),[s]);return n?(0,He.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col transform transition-all",children:[(0,He.jsxs)("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:oo,className:"text-indigo-600 mr-3"}),(0,He.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Sugest\xe3o de Texto Autom\xe1tica"})]}),(0,He.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:c,children:(0,He.jsx)(Hr,{icon:Vi,className:"text-lg"})})]}),(0,He.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col",children:[(0,He.jsx)("div",{className:"p-4 bg-blue-50 border-b border-blue-200",children:(0,He.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,He.jsx)(Hr,{icon:ni,className:"text-blue-600 mt-1 flex-shrink-0"}),(0,He.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,He.jsx)("p",{className:"font-medium mb-1",children:"Como usar esta sugest\xe3o:"}),(0,He.jsxs)("ul",{className:"text-xs space-y-1",children:[(0,He.jsxs)("li",{children:["\u2022 ",(0,He.jsx)("strong",{children:"Substituir:"})," Remove o texto atual e usa apenas a sugest\xe3o"]}),(0,He.jsxs)("li",{children:["\u2022 ",(0,He.jsx)("strong",{children:"Adicionar:"})," Mant\xe9m o texto atual e adiciona a sugest\xe3o ao final"]}),(0,He.jsxs)("li",{children:["\u2022 ",(0,He.jsx)("strong",{children:"Editar:"})," Permite modificar a sugest\xe3o antes de usar"]})]})]})]})}),(0,He.jsx)("div",{className:"p-4 bg-amber-50 border-b border-amber-200",children:(0,He.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,He.jsx)("span",{className:"text-amber-600 mt-1 flex-shrink-0",children:"\u26a0\ufe0f"}),(0,He.jsxs)("div",{className:"text-sm text-amber-800",children:[(0,He.jsx)("p",{className:"font-medium mb-1",children:"Importante - Responsabilidade Profissional:"}),(0,He.jsxs)("p",{className:"text-xs",children:["Esta sugest\xe3o \xe9 gerada automaticamente baseada ",(0,He.jsx)("strong",{children:"apenas em dados quantitativos"})," (pontua\xe7\xf5es, sess\xf5es, etc.). \xc9 ",(0,He.jsx)("strong",{children:"imprescind\xedvel"})," que voc\xea, como profissional respons\xe1vel, revise, adapte e complemente este texto com:"]}),(0,He.jsxs)("ul",{className:"text-xs mt-2 space-y-1",children:[(0,He.jsx)("li",{children:"\u2022 An\xe1lise comportamental qualitativa"}),(0,He.jsx)("li",{children:"\u2022 Observa\xe7\xf5es cl\xednicas espec\xedficas"}),(0,He.jsx)("li",{children:"\u2022 Contexto individual do paciente"}),(0,He.jsx)("li",{children:"\u2022 Aspectos n\xe3o capturados pelos dados num\xe9ricos"})]}),(0,He.jsx)("p",{className:"text-xs mt-2 font-medium",children:"A ferramenta \xe9 um suporte para agilizar seu trabalho, n\xe3o um substituto para sua expertise profissional."})]})]})}),(0,He.jsx)("div",{className:"flex-1 p-5 overflow-y-auto",children:c?(0,He.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,He.jsx)("p",{className:"text-gray-600",children:"Gerando sugest\xe3o baseada nos dados do paciente..."})]})}):(0,He.jsxs)("div",{className:"space-y-4",children:[(0,He.jsxs)("div",{className:"flex justify-between items-center",children:[(0,He.jsx)("h3",{className:"text-lg font-medium text-gray-700",children:h?"Editando Sugest\xe3o":"Texto Sugerido"}),(0,He.jsxs)("button",{onClick:()=>{m(!h)},className:"flex items-center px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:[(0,He.jsx)(Hr,{icon:h?fo:gs,className:"mr-2"}),h?"Salvar Edi\xe7\xf5es":"Editar Texto"]})]}),h?(0,He.jsx)("textarea",{value:d,onChange:e=>u(e.target.value),rows:"20",className:"w-full px-3 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm font-mono resize-none",placeholder:"Edite o texto sugerido..."}):(0,He.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 max-h-96 overflow-y-auto",children:(0,He.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 font-sans leading-relaxed",children:s||"Nenhuma sugest\xe3o dispon\xedvel"})}),(0,He.jsxs)("div",{className:"text-xs text-gray-500 text-right",children:[(null===(t=h?d:s)||void 0===t?void 0:t.length)||0," caracteres"]})]})})]}),(0,He.jsxs)("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[(0,He.jsx)("button",{onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",disabled:c,children:"Cancelar"}),(0,He.jsxs)("div",{className:"flex space-x-3",children:[(0,He.jsxs)("button",{onClick:()=>{const e=h?d:s,t=i.trim()?"\n\n":"";l(i+t+e),r()},disabled:c||!s,className:"flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-md text-sm transition duration-150 ease-in-out shadow hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,He.jsx)(Hr,{icon:Wi,className:"mr-2"}),"Adicionar ao Texto"]}),(0,He.jsxs)("button",{onClick:()=>{o(h?d:s),r()},disabled:c||!s,className:"flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-md text-sm transition duration-150 ease-in-out shadow hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,He.jsx)(Hr,{icon:fo,className:"mr-2"}),"Substituir Texto"]})]})]})]})}):null},Bv=e=>{let{isOpen:t,onClose:n,onSave:r,currentUser:s,title:i="Dados Profissionais"}=e;const[o,l]=(0,a.useState)({professional_id:"",qualifications:"",professional_signature:""}),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)({});(0,a.useEffect)((()=>{t&&s&&(l({professional_id:s.professional_id||"",qualifications:s.qualifications||"",professional_signature:s.professional_signature||""}),h({}))}),[t,s]);const m=(e,t)=>{l((n=>(0,Ie.A)((0,Ie.A)({},n),{},{[e]:t}))),u[e]&&h((t=>{const n=(0,Ie.A)({},t);return delete n[e],n}))};return t?(0,He.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md transform transition-all",children:[(0,He.jsxs)("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:fi,className:"text-indigo-600 mr-3"}),(0,He.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:i})]}),(0,He.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:c,children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsxs)("div",{className:"p-5",children:[(0,He.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,He.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,He.jsx)(Hr,{icon:Xr,className:"text-blue-600 mt-0.5 flex-shrink-0"}),(0,He.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,He.jsx)("p",{className:"font-medium mb-1",children:"Configura\xe7\xe3o \xfanica"}),(0,He.jsx)("p",{className:"text-xs",children:"Estes dados ser\xe3o salvos uma vez e reutilizados em todos os relat\xf3rios futuros. Voc\xea pode edit\xe1-los a qualquer momento."})]})]})}),u.general&&(0,He.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,He.jsx)("p",{className:"text-sm text-red-600",children:u.general})}),(0,He.jsxs)("div",{className:"space-y-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,He.jsx)(Hr,{icon:Si,className:"mr-2 text-indigo-500"}),"Registro Profissional *"]}),(0,He.jsx)("input",{type:"text",value:o.professional_id,onChange:e=>m("professional_id",e.target.value),placeholder:"Ex: CRP 12345, CRO 67890, CREFITO 11111",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm ".concat(u.professional_id?"border-red-300":"border-gray-300"),disabled:c}),u.professional_id&&(0,He.jsx)("p",{className:"mt-1 text-xs text-red-600",children:u.professional_id})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,He.jsx)(Hr,{icon:_o,className:"mr-2 text-indigo-500"}),"Qualifica\xe7\xf5es e Forma\xe7\xe3o *"]}),(0,He.jsx)("textarea",{value:o.qualifications,onChange:e=>m("qualifications",e.target.value),placeholder:"Ex: Psic\xf3logo Cl\xednico, Especialista em ABA, Mestre em Psicologia do Desenvolvimento",rows:"3",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm resize-vertical ".concat(u.qualifications?"border-red-300":"border-gray-300"),disabled:c}),u.qualifications&&(0,He.jsx)("p",{className:"mt-1 text-xs text-red-600",children:u.qualifications})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,He.jsx)(Hr,{icon:Ms,className:"mr-2 text-indigo-500"}),"Assinatura Digital (Opcional)"]}),(0,He.jsx)("input",{type:"text",value:o.professional_signature,onChange:e=>m("professional_signature",e.target.value),placeholder:"URL da assinatura digitalizada ou texto personalizado",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",disabled:c}),(0,He.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Deixe em branco se n\xe3o possuir assinatura digital"})]})]})]}),(0,He.jsxs)("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3",children:[(0,He.jsx)("button",{onClick:n,disabled:c,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors disabled:opacity-50",children:"Cancelar"}),(0,He.jsxs)("button",{onClick:async()=>{if((()=>{const e={};return o.professional_id.trim()||(e.professional_id="Registro profissional \xe9 obrigat\xf3rio"),o.qualifications.trim()||(e.qualifications="Qualifica\xe7\xf5es s\xe3o obrigat\xf3rias"),h(e),0===Object.keys(e).length})()){d(!0);try{const e=await Ue(o);r(e.user||o),n()}catch(e){console.error("Erro ao salvar dados profissionais:",e);let t="Erro ao salvar dados. Tente novamente.";e.message&&(t=e.message),h({general:t}),r&&"function"===typeof r&&r(null,e)}finally{d(!1)}}},disabled:c,className:"flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-md text-sm transition duration-150 ease-in-out shadow hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,He.jsx)(Hr,{icon:c?Zi:fo,className:"mr-2 ".concat(c?"fa-spin":"")}),c?"Salvando...":"Salvar Dados"]})]})]})}):null},qv=e=>{let{value:t,onChange:n,placeholder:r="Digite sua an\xe1lise...",rows:s=6,disabled:i=!1}=e;const o=(0,a.useRef)(null),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)([t||""]),[h,m]=(0,a.useState)(0);(0,a.useEffect)((()=>{if(t!==d[h]){const e=d.slice(0,h+1);e.push(t||""),u(e),m(e.length-1)}}),[t]);const f=function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=o.current;if(!r)return;const s=r.selectionStart,i=r.selectionEnd,l=t.substring(s,i);let c,d;a&&l?(c=t.substring(0,s)+e+l+e+t.substring(i),d=i+2*e.length):(c=t.substring(0,s)+e+t.substring(i),d=s+e.length),n(c),setTimeout((()=>{r.focus(),r.setSelectionRange(d,d)}),0)},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bullet";const a=o.current;if(!a)return;const r=a.selectionStart,s=t.split("\n");let i=0,l=0;for(let t=0;t<s.length;t++){if(l+s[t].length>=r){i=t;break}l+=s[t].length+1}const c=s[i],d="bullet"===e?"\u2022 ":"1. ",u=c.trim().startsWith("\u2022 "),h=/^\d+\.\s/.test(c.trim());if(u||h)s[i]=c.replace(/^(\s*)(\u2022\s|\d+\.\s)/,"$1");else{const e=c.match(/^\s*/)[0];s[i]=e+d+c.trim()}const m=s.join("\n");n(m),setTimeout((()=>{a.focus()}),0)},g=()=>f("**",!0),x=()=>f("*",!0),b=()=>{if(h>0){const e=h-1;m(e),n(d[e])}},v=()=>{if(h<d.length-1){const e=h+1;m(e),n(d[e])}},y=[{icon:Os,onClick:g,title:"Negrito (Ctrl+B)",active:!1},{icon:Gs,onClick:x,title:"It\xe1lico (Ctrl+I)",active:!1},{divider:!0},{icon:Ri,onClick:()=>p("bullet"),title:"Lista com marcadores",active:!1},{icon:$s,onClick:()=>p("numbered"),title:"Lista numerada",active:!1},{divider:!0},{icon:vi,onClick:b,title:"Desfazer (Ctrl+Z)",disabled:h<=0},{icon:ii,onClick:v,title:"Refazer (Ctrl+Y)",disabled:h>=d.length-1},{divider:!0},{icon:l?bs:ni,onClick:()=>c(!l),title:l?"Ocultar preview":"Mostrar preview",active:l}];return(0,He.jsxs)("div",{className:"border border-gray-300 rounded-lg shadow-sm overflow-hidden bg-white",children:[(0,He.jsx)("div",{className:"border-b border-gray-200 bg-gray-50 px-3 py-2",children:(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[y.map(((e,t)=>e.divider?(0,He.jsx)("div",{className:"w-px h-4 bg-gray-300 mx-1"},t):(0,He.jsx)("button",{onClick:e.onClick,disabled:i||e.disabled,title:e.title,className:"\n                  p-1.5 rounded text-sm transition-all duration-200 hover:bg-gray-200\n                  ".concat(e.active?"bg-indigo-100 text-indigo-700":"text-gray-600 hover:text-gray-800","\n                  ").concat(e.disabled?"opacity-40 cursor-not-allowed":"cursor-pointer","\n                  ").concat(i?"opacity-50 cursor-not-allowed":"","\n                "),children:(0,He.jsx)(Hr,{icon:e.icon,className:"w-3 h-3"})},t))),(0,He.jsxs)("div",{className:"ml-auto text-xs text-gray-500",children:[t.length," caracteres"]})]})}),(0,He.jsx)("div",{className:"relative",children:l?(0,He.jsx)("div",{className:"p-3 min-h-[150px] max-h-64 overflow-y-auto bg-gray-50 border-2 border-dashed border-gray-200",style:{minHeight:"".concat(1.5*s,"rem")},children:(0,He.jsx)("div",{className:"text-sm text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:t?(w=t,w.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/^\u2022 (.*$)/gim,"<li>$1</li>").replace(/^(\d+)\. (.*$)/gim,"<li>$1. $2</li>").replace(/\n/g,"<br/>")):'<span class="text-gray-400">Nada para mostrar</span>'}})}):(0,He.jsx)("textarea",{ref:o,value:t,onChange:e=>n(e.target.value),onKeyDown:e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"b":e.preventDefault(),g();break;case"i":e.preventDefault(),x();break;case"z":e.shiftKey||(e.preventDefault(),b());break;case"y":e.preventDefault(),v()}},placeholder:r,rows:s,disabled:i,className:"w-full px-3 py-3 border-0 resize-none focus:outline-none focus:ring-0 text-sm leading-relaxed",style:{minHeight:"".concat(1.5*s,"rem")}})}),(0,He.jsx)("div",{className:"border-t border-gray-200 bg-gray-50 px-3 py-2",children:(0,He.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,He.jsxs)("span",{children:["**texto** = ",(0,He.jsx)("strong",{children:"negrito"})]}),(0,He.jsxs)("span",{children:["*texto* = ",(0,He.jsx)("em",{children:"it\xe1lico"})]}),(0,He.jsx)("span",{children:"\u2022 = lista"})]}),(0,He.jsx)("div",{children:l?"Modo Preview":"Modo Edi\xe7\xe3o"})]})})]});var w},Uv=e=>{let{sessionData:t,startDate:n,endDate:r,assignedPrograms:s,className:i="",collapsible:o=!0}=e;const[l,c]=a.useState(!1),d=a.useMemo((()=>{if(!t||0===t.length)return{totalSessions:0,avgScore:0,programsCount:0,periodText:"Per\xedodo n\xe3o definido",hasData:!1};const e=t.length,a=t.reduce(((e,t)=>e+(t.score||0)),0)/e,i=s?s.length:0;let o="Per\xedodo completo";if(n&&r){const e=new Date(n),t=new Date(r);o="".concat(e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})," - ").concat(t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}))}else if(n||r){const e=new Date(n||r);o="A partir de ".concat(e.toLocaleDateString("pt-BR"))}return{totalSessions:e,avgScore:Math.round(10*a)/10,programsCount:i,periodText:o,hasData:!0}}),[t,n,r,s]),u=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":"text-red-500",h=[{icon:Zr,label:"Per\xedodo",value:d.periodText,color:"text-indigo-600",bgColor:"bg-indigo-50"},{icon:Fi,label:"Sess\xf5es",value:d.totalSessions,color:"text-blue-600",bgColor:"bg-blue-50"},{icon:Qs,label:"M\xe9dia",value:d.hasData?"".concat(d.avgScore,"%"):"-",color:d.hasData?u(d.avgScore):"text-gray-500",bgColor:"bg-gray-50"},{icon:Ki,label:"Programas",value:d.programsCount,color:"text-purple-600",bgColor:"bg-purple-50"}];return(0,He.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm ".concat(i),children:[(0,He.jsx)("div",{className:"p-3 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-indigo-50",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"\ud83d\udcca M\xe9tricas do Per\xedodo"}),o&&(0,He.jsx)("button",{onClick:()=>c(!l),className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:(0,He.jsx)(Hr,{icon:l?Ti:vs,className:"w-3 h-3"})})]})}),(0,He.jsxs)("div",{className:"transition-all duration-300 ".concat(l?"hidden":"block"),children:[d.hasData?(0,He.jsx)("div",{className:"p-3 space-y-3",children:h.map(((e,t)=>(0,He.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)("div",{className:"p-1.5 rounded-full ".concat(e.bgColor),children:(0,He.jsx)(Hr,{icon:e.icon,className:"w-3 h-3 ".concat(e.color)})}),(0,He.jsx)("span",{className:"text-sm text-gray-600",children:e.label})]}),(0,He.jsx)("span",{className:"text-sm font-medium ".concat(e.color),children:e.value})]},t)))}):(0,He.jsx)("div",{className:"p-4 text-center",children:(0,He.jsx)("p",{className:"text-sm text-gray-500",children:"Nenhum dado dispon\xedvel para o per\xedodo selecionado"})}),d.hasData&&d.avgScore>0&&(0,He.jsx)("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:(0,He.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,He.jsx)("span",{className:"text-gray-500",children:"Indicador de Performance:"}),(0,He.jsx)("span",{className:"font-medium ".concat(u(d.avgScore)),children:d.avgScore>=80?"Excelente":d.avgScore>=60?"Satisfat\xf3rio":"Requer Aten\xe7\xe3o"})]})})]})]})},Wv=e=>{if(!e)return"N\xe3o informado";try{return new Date(e).toLocaleDateString("pt-BR")}catch(t){return"Data inv\xe1lida"}},Hv=e=>{let{isOpen:t,onClose:r,patientData:s,reportText:i,professionalData:o,sessionData:l,assignedPrograms:c,onUpdateReportText:d}=e;const[u,h]=(0,a.useState)(!1),[m,f]=(0,a.useState)(""),[p,g]=(0,a.useState)(!1);if((0,a.useEffect)((()=>{f(i)}),[i]),!t)return null;const x=async()=>{g(!0);try{const e=(0,Ie.A)((0,Ie.A)({},s),{},{sessionData:l}),t=o?(0,Ie.A)((0,Ie.A)({},o),{},{professional_name:o.professional_name||"Profissional"}):null;await async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e)try{let r={};if(e.sessionData&&e.sessionData.length>0&&e.assigned_programs)console.log("PDF: Usando dados completos do paciente:",e.assigned_programs.length,"programas"),e.assigned_programs.filter((t=>e.sessionData.some((e=>e.program_id===t.program_id||e.program_id===t.id)))).forEach((e=>{const t=e.discipline_name||e.area_name||"\xc1rea n\xe3o especificada";r[t]||(r[t]=[]),r[t].push((0,Ie.A)((0,Ie.A)({},e),{},{area:t,title:e.program_name||e.title||"Programa ".concat(e.program_id||e.id)}))}));else{console.log("PDF: Buscando dados via API - sem sessionData dispon\xedvel");const{getPatientProgramsGrade:t}=await Promise.resolve().then(n.bind(n,1487));r=await t(e.id)}const s=new qo.default({orientation:"portrait",unit:"mm",format:"a4"}),i=15,o=s.internal.pageSize.getWidth(),l=o-2*i;let c=i+10,d=1;const u=e=>{s.setFontSize(8),s.setTextColor(100),s.text("P\xe1gina ".concat(e),o/2,s.internal.pageSize.getHeight()-i/2,{align:"center"}),s.text("Gerado em: ".concat(Cp((new Date).toISOString())),i,s.internal.pageSize.getHeight()-i/2),s.setTextColor(0)},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||e>s.internal.pageSize.getHeight()-i-t){const e=s.internal.getFontSize(),t=s.internal.getFont(),a=s.internal.getTextColor();return u(d),s.addPage(),d++,n&&(s.setFontSize(e),s.setFont(t.fontName,t.fontStyle),s.setTextColor(a)),i+10}return e},m=function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;if(!e)return n;const i=s.splitTextToSize(e,a);let o=n;for(let l=0;l<i.length;l++)o=h(o,r+5,!1,!0),s.text(i[l],t,o),o+=r;return o},f=function(e,t,n,a){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;if(!e)return n;let i=n;const o=e.split("\n");for(const l of o){if(""===l.trim()){i+=.7*r;continue}if(l.trim().startsWith("\u2022 ")){const e=l.trim().substring(2);i=h(i,r+5,!1,!0),s.setFont("helvetica","normal"),s.text("\u2022",t,i);const n=s.splitTextToSize(e,a-10);for(let a=0;a<n.length;a++)a>0&&(i+=r,i=h(i,r+5,!1,!0)),s.text(n[a],t+5,i);i+=r;continue}const e=l.match(/^(\d+)\.\s(.+)/);if(e){const[,n,o]=e;i=h(i,r+5,!1,!0),s.setFont("helvetica","normal"),s.text("".concat(n,"."),t,i);const l=s.splitTextToSize(o,a-15);for(let e=0;e<l.length;e++)e>0&&(i+=r,i=h(i,r+5,!1,!0)),s.text(l[e],t+10,i);i+=r}else i=p(l,t,i,a,r).newY}return i},p=(e,t,n,a,r)=>{let i=e.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1");const o=s.splitTextToSize(i,a);let l=n;for(let c=0;c<o.length;c++)l=h(l,r+5),s.text(o[c],t,l),l+=r;return{newY:l}};if(s.setFontSize(18),s.setFont("helvetica","bold"),s.text("RELAT\xd3RIO CONSOLIDADO",o/2,c,{align:"center"}),c+=6,s.setFontSize(14),s.text("AN\xc1LISE COMPORTAMENTAL",o/2,c,{align:"center"}),c+=10,a){if(s.setFontSize(10),s.setFont("helvetica","normal"),e.clinic_name){const t="Cl\xednica: ".concat(e.clinic_name),n=s.splitTextToSize(t,l);for(const e of n)s.text(e,o/2,c,{align:"center"}),c+=5}if(a.professional_name){const e="Profissional: ".concat(a.professional_name),t=s.splitTextToSize(e,l);for(const n of t)s.text(n,o/2,c,{align:"center"}),c+=5;if(a.professional_id){const e=s.splitTextToSize(a.professional_id,l);for(const t of e)s.text(t,o/2,c,{align:"center"}),c+=5;c+=1}}}c+=5,s.setLineWidth(.5),s.line(i,c,o-i,c),c+=8,s.setFontSize(12),s.setFont("helvetica","bold"),s.text("1. IDENTIFICA\xc7\xc3O DO USU\xc1RIO",i,c),c+=8,s.setFontSize(10),s.setFont("helvetica","normal");const g="Nome: ".concat(e.name);if(c=m(g,i,c,l),c+=5,e.dob){const t=new Date(e.dob),n=Math.floor((new Date-t)/315576e5),a="Data de Nascimento: ".concat(Cp(e.dob)," (").concat(n," anos)");c=m(a,i,c,l),c+=5}if(e.diagnosis){const t="Diagn\xf3stico: ".concat(e.diagnosis);c=m(t,i,c,l),c+=5}if(s.text("Data do Relat\xf3rio: ".concat(Cp((new Date).toISOString())),i,c),c+=6,e.sessionData&&e.sessionData.length>0){const t=e.sessionData[0],n=e.sessionData[e.sessionData.length-1];if(t&&n){s.setFontSize(9),s.setFont("helvetica","italic");const e="Per\xedodo dos dados: de ".concat(Cp(t.session_date)," a ").concat(Cp(n.session_date));c=m(e,i,c,l,4),c+=2}}c+=4,s.setLineWidth(.2),s.line(i,c,o-i,c),c+=8,c=h(c,20),s.setFontSize(12),s.setFont("helvetica","bold"),s.text("2. AN\xc1LISE E INTERPRETA\xc7\xc3O",i,c),c+=8,s.setFontSize(10),s.setFont("helvetica","normal"),c=f(t||"Nenhuma observa\xe7\xe3o fornecida.",i,c,l,5),c+=10,c=c>i+100?h(c,0,!0):h(c,15),s.setFontSize(12),s.setFont("helvetica","bold"),s.text("3. REGISTRO DA EVOLU\xc7\xc3O DAS SESS\xd5ES",i,c),c+=8;const x=[];Object.keys(r).forEach((e=>{r[e].forEach((t=>{x.push((0,Ie.A)((0,Ie.A)({},t),{},{area:e,title:t.program_name||t.title||"Programa ".concat(t.program_id||t.id)}))}))}));const b=x.map((t=>{const n=(e.sessionData||[]).filter((e=>e.program_id===t.program_id||e.program_id===t.id));if(0===n.length)return Promise.resolve(null);const a=document.createElement("canvas");a.width=600,a.height=300;const r={labels:n.map((e=>Cp(e.session_date,"short"))),datasets:[{label:"Pontua\xe7\xe3o (%)",data:n.map((e=>e.score)),borderColor:"#4f46e5",backgroundColor:"rgba(79, 70, 229, 0.1)",borderWidth:3,pointRadius:n.map((e=>e.is_baseline?6:5)),pointBackgroundColor:n.map((e=>e.is_baseline?"#f59e0b":e.details&&e.details.promptLevelColor?e.details.promptLevelColor:"#4f46e5")),pointBorderColor:n.map((e=>e.is_baseline?"#f59e0b":"#ffffff")),pointBorderWidth:n.map((e=>e.is_baseline?3:2)),pointStyle:n.map((e=>e.is_baseline?"star":"circle")),fill:!0,tension:.3}]},s={animation:!1,responsive:!1,devicePixelRatio:2,scales:{y:{beginAtZero:!0,max:105,grid:{display:!0,color:"rgba(156, 163, 175, 0.3)",drawBorder:!1},ticks:{padding:8,font:{size:12,weight:500},color:"#4b5563",callback:function(e){return e+"%"}},border:{display:!1}},x:{grid:{display:!0,color:"rgba(156, 163, 175, 0.3)",drawBorder:!1},ticks:{padding:8,font:{size:12,weight:500},color:"#4b5563"},border:{display:!1}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}};return new Promise((e=>{new _p(a.getContext("2d"),{type:"line",data:r,options:s,plugins:[{id:"customCanvasBackgroundColor",beforeDraw:e=>{const{ctx:t}=e;t.save(),t.globalCompositeOperation="destination-over",t.fillStyle="white",t.fillRect(0,0,e.width,e.height),t.restore()}}]}),setTimeout((()=>{e({title:t.title||t.program_name||"Programa ".concat(t.program_id||t.id),area:t.area||t.area_name||t.discipline_name||"\xc1rea",imageData:a.toDataURL("image/png",.95)})}),100)}))}));Promise.all(b).then((t=>{const n=t.filter((e=>e));if(0===n.length)c=h(c),s.setFont("helvetica","italic"),s.text("Nenhum dado de progresso para os programas ativos no per\xedodo selecionado.",i,c),c+=10;else{const e=n.reduce(((e,t)=>(e[t.area]||(e[t.area]=[]),e[t.area].push(t),e)),{});Object.keys(e).sort().forEach((t=>{c=h(c,15),s.setFontSize(12),s.setFont("helvetica","bold"),s.setFillColor(240,240,240),s.rect(i,c-4,l,7,"F"),s.text(t,i+2,c),c+=10;const n=e[t];let a=0;for(let e=0;e<n.length;e++){const r=n[e],o=60,h=l,m=8;(a>=2||c+(m+o+20+15)>s.internal.pageSize.getHeight()-i-20)&&(u(d),s.addPage(),d++,c=i+10,a=0,s.setFontSize(12),s.setFont("helvetica","bold"),s.setFillColor(240,240,240),s.rect(i,c-4,l,7,"F"),s.text(t+" (continua\xe7\xe3o)",i+2,c),c+=10),s.setFontSize(12),s.setFont("helvetica","bold"),s.setTextColor(79,70,229),s.text(r.title,i,c),s.setTextColor(0),c+=m,s.addImage(r.imageData,"PNG",i,c,h,o),c+=o+8,s.setFontSize(8),s.setFont("helvetica","bold"),s.text("N\xedveis de Prompting:",i,c),c+=4,s.setFont("helvetica","normal");const f=kp().map((e=>({color:e.rgb,text:e.name}))),p=3;for(let e=0;e<f.length;e+=p){let t=i;const n=f.slice(e,e+p),a=c;n.forEach((e=>{s.setFillColor(e.color[0],e.color[1],e.color[2]),s.circle(t+1,a-.5,1,"F"),s.setTextColor(0),s.text(e.text,t+4,a),t+=60})),c+=4}s.setFontSize(8),s.setFont("helvetica","bold"),s.setTextColor(0),s.text("S\xedmbolos:",i,c),c+=4,s.setFont("helvetica","normal");const g=i+2,x=c-1,b=1.5;s.setDrawColor(245,158,11),s.setLineWidth(1.5),s.line(g-b,x-b,g+b,x+b),s.line(g+b,x-b,g-b,x+b),s.line(g,x-b,g,x+b),s.line(g-b,x,g+b,x),s.setTextColor(0),s.text("Linha de Base",g+8,c);const v=i+80;s.setFillColor(79,70,229),s.circle(v,c-1,1.5,"F"),s.text("Sess\xe3o Regular",v+6,c),c+=12,a++}c+=5}))}u(d);const a="Relatorio_".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".pdf");s.save(a)}))}catch(r){console.error("Erro ao gerar Relat\xf3rio Consolidado:",r),alert("Erro ao gerar o Relat\xf3rio Consolidado. Tente novamente.")}else alert("Nenhum cliente selecionado.")}(e,i,t)}catch(e){console.error("Erro ao gerar PDF:",e),alert("Erro ao gerar PDF. Tente novamente.")}finally{g(!1)}},b=(null===l||void 0===l?void 0:l.length)||0,v=b>0?(l.reduce(((e,t)=>e+(t.score||0)),0)/b).toFixed(1):0,y=(null===l||void 0===l?void 0:l.reduce(((e,t)=>{const n=t.program_id;if(!n)return e;const a=null===c||void 0===c?void 0:c.find((e=>e.program_id===n)),r=e.find((e=>e.id===n));if(!r){const t=l.filter((e=>e.program_id===n)).length;e.push({id:n,name:(null===a||void 0===a?void 0:a.program_name)||"Programa ".concat(n),discipline:(null===a||void 0===a?void 0:a.discipline_name)||"\xc1rea n\xe3o informada",sessionsCount:t})}return e}),[]))||[];return y.sort(((e,t)=>e.name.localeCompare(t.name))),(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,He.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 flex justify-between items-center",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("h2",{className:"text-xl font-bold text-white",children:"Preview - Relat\xf3rio Consolidado"}),(0,He.jsxs)("p",{className:"text-indigo-100 text-sm",children:[null===s||void 0===s?void 0:s.name," \u2022 Revise e personalize antes de gerar o PDF"]})]}),(0,He.jsxs)("div",{className:"flex space-x-3",children:[(0,He.jsx)("button",{onClick:x,disabled:p,className:"bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg transition-all disabled:opacity-50 flex items-center space-x-2",children:p?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin"}),(0,He.jsx)("span",{children:"Gerando..."})]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:di}),(0,He.jsx)("span",{children:"Gerar PDF"})]})}),(0,He.jsx)("button",{onClick:r,className:"text-white hover:text-indigo-200 transition-colors text-xl",children:(0,He.jsx)(Hr,{icon:Vi})})]})]}),(0,He.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,He.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,He.jsx)(Hr,{icon:js,className:"text-indigo-600 text-lg"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Identifica\xe7\xe3o do Usu\xe1rio"})]}),(0,He.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-600",children:"Nome:"}),(0,He.jsx)("p",{className:"text-gray-800",children:null===s||void 0===s?void 0:s.name})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-600",children:"Cl\xednica:"}),(0,He.jsx)("p",{className:"text-gray-800",children:(null===s||void 0===s?void 0:s.clinic_name)||"N\xe3o informado"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-600",children:"Data de Nascimento:"}),(0,He.jsx)("p",{className:"text-gray-800",children:Wv(null===s||void 0===s?void 0:s.dob)})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-600",children:"Diagn\xf3stico:"}),(0,He.jsx)("p",{className:"text-gray-800",children:(null===s||void 0===s?void 0:s.diagnosis)||"N\xe3o informado"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-600",children:"Respons\xe1vel:"}),(0,He.jsx)("p",{className:"text-gray-800",children:null!==s&&void 0!==s&&s.guardian_name?"".concat(s.guardian_name," (").concat(s.guardian_relationship,")"):"N\xe3o informado"})]})]})]}),(0,He.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,He.jsx)(Hr,{icon:Qs,className:"text-blue-600 text-lg"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Resumo do Per\xedodo"})]}),(0,He.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:b}),(0,He.jsx)("div",{className:"text-gray-600 text-sm",children:"Sess\xf5es Realizadas"})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[v,"%"]}),(0,He.jsx)("div",{className:"text-gray-600 text-sm",children:"M\xe9dia Geral"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:y.length}),(0,He.jsx)("div",{className:"text-gray-600 text-sm",children:"Programas Trabalhados"})]})]}),(0,He.jsxs)("div",{className:"mt-4",children:[(0,He.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Programas Trabalhados:"}),y.length>0?(0,He.jsx)("div",{className:"space-y-2",children:y.map(((e,t)=>(0,He.jsxs)("div",{className:"flex justify-between items-center p-2 bg-white border border-gray-200 rounded-md",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-gray-800 text-sm",children:e.name}),(0,He.jsx)("div",{className:"text-xs text-gray-500",children:e.discipline})]}),(0,He.jsxs)("div",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded",children:[e.sessionsCount," ",1===e.sessionsCount?"sess\xe3o":"sess\xf5es"]})]},t)))}):(0,He.jsx)("div",{className:"text-sm text-gray-500 italic p-2 bg-gray-100 rounded-md",children:"Nenhum programa encontrado para o per\xedodo selecionado"})]})]}),(0,He.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)(Hr,{icon:ys,className:"text-green-600 text-lg"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"An\xe1lise e Observa\xe7\xf5es"})]}),(0,He.jsx)("button",{onClick:()=>{h(!0)},className:"text-green-600 hover:text-green-800 transition-colors",children:(0,He.jsx)(Hr,{icon:gs})})]}),u?(0,He.jsxs)("div",{className:"space-y-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"An\xe1lise Qualitativa:"}),(0,He.jsx)("textarea",{value:m,onChange:e=>f(e.target.value),placeholder:"Digite sua an\xe1lise qualitativa sobre o per\xedodo...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none",rows:"8"})]}),(0,He.jsxs)("div",{className:"flex space-x-3",children:[(0,He.jsxs)("button",{onClick:()=>{d(m),h(!1)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,He.jsx)(Hr,{icon:fo}),(0,He.jsx)("span",{children:"Salvar"})]}),(0,He.jsx)("button",{onClick:()=>{f(i),h(!1)},className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]}):(0,He.jsx)("div",{children:i?(0,He.jsx)("div",{className:"text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:(w=i,w?w.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/^\u2022 (.*$)/gim,"&bull; $1").replace(/^(\d+)\. (.*$)/gim,"$1. $2").replace(/\n/g,"<br/>"):"")}}):(0,He.jsx)("div",{className:"text-gray-500 italic",children:'Clique em "Editar" para adicionar sua an\xe1lise qualitativa sobre o per\xedodo.'})})]}),(0,He.jsxs)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,He.jsx)(Hr,{icon:fi,className:"text-indigo-600"}),(0,He.jsx)("h4",{className:"font-medium text-indigo-800",children:"Dados Profissionais"})]}),(0,He.jsxs)("div",{className:"text-sm text-indigo-700",children:[(0,He.jsxs)("p",{children:[(0,He.jsx)("strong",{children:"Profissional:"})," ",null===o||void 0===o?void 0:o.professional_name]}),(0,He.jsxs)("p",{children:[(0,He.jsx)("strong",{children:"Registro:"})," ",null===o||void 0===o?void 0:o.professional_id]}),(0,He.jsxs)("p",{children:[(0,He.jsx)("strong",{children:"Qualifica\xe7\xf5es:"})," ",null===o||void 0===o?void 0:o.qualifications]})]})]}),(0,He.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,He.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,He.jsx)(Hr,{icon:gi,className:"text-blue-600 mt-1"}),(0,He.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,He.jsx)("p",{className:"font-medium mb-1",children:"Gr\xe1ficos de Progresso"}),(0,He.jsx)("p",{children:"Os gr\xe1ficos detalhados de cada programa ser\xe3o inclu\xeddos automaticamente no PDF final, organizados por \xe1rea de interven\xe7\xe3o conforme visualizado na pr\xe9-visualiza\xe7\xe3o do modal."})]})]})}),(0,He.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,He.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,He.jsx)("span",{className:"text-amber-600 mt-1 flex-shrink-0",children:"\u26a0\ufe0f"}),(0,He.jsxs)("div",{className:"text-sm text-amber-800",children:[(0,He.jsx)("p",{className:"font-medium mb-1",children:"Responsabilidade Profissional"}),(0,He.jsx)("p",{children:"Este relat\xf3rio cont\xe9m dados quantitativos e an\xe1lises autom\xe1ticas baseadas em m\xe9tricas de sess\xf5es. Como profissional respons\xe1vel, voc\xea deve assegurar que:"}),(0,He.jsxs)("ul",{className:"text-xs mt-2 space-y-1",children:[(0,He.jsx)("li",{children:"\u2022 O texto reflita adequadamente a condi\xe7\xe3o e progresso individual do paciente"}),(0,He.jsx)("li",{children:"\u2022 Aspectos comportamentais e contextuais relevantes estejam inclu\xeddos"}),(0,He.jsx)("li",{children:"\u2022 As interpreta\xe7\xf5es estejam alinhadas com sua avalia\xe7\xe3o cl\xednica"}),(0,He.jsx)("li",{children:"\u2022 O conte\xfado esteja adequado ao p\xfablico-alvo (escola, fam\xedlia, outros profissionais)"})]}),(0,He.jsx)("p",{className:"text-xs mt-2 font-medium",children:"A responsabilidade t\xe9cnica e \xe9tica pelo conte\xfado final \xe9 sempre do profissional emissor."})]})]})})]}),(0,He.jsxs)("div",{className:"border-t border-gray-200 px-6 py-4 flex justify-between items-center",children:[(0,He.jsx)("div",{className:"text-sm text-gray-600",children:"Preview do relat\xf3rio \u2022 Edite o texto se necess\xe1rio antes de gerar o PDF final"}),(0,He.jsxs)("div",{className:"flex space-x-3",children:[(0,He.jsx)("button",{onClick:r,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Fechar Preview"}),(0,He.jsx)("button",{onClick:x,disabled:p,className:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 flex items-center space-x-2",children:p?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin"}),(0,He.jsx)("span",{children:"Gerando PDF..."})]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:di}),(0,He.jsx)("span",{children:"Gerar PDF Final"})]})})]})]})]})});var w},Vv={async generateConventionalReportSuggestion(e,t,n){try{const a=await We(e,n);return this.generateSuggestedText(a,t,n)}catch(a){throw console.error("Erro ao gerar sugest\xe3o de relat\xf3rio:",a),new Error("N\xe3o foi poss\xedvel gerar a sugest\xe3o de texto. Tente novamente.")}},generateSuggestedText(e,t,n){const{statistics:a,insights:r,area_performance:s}=e;let i=this.generateDisclaimer();return i+=this.generatePeriodSummary(a,n),i+=this.generateAreaAnalysis(s),i+=this.generateIndependenceAnalysis(a),i+=this.generateInsightsSection(r),i+=this.generateRecommendations(a,r),i},generateDisclaimer:()=>"**[IMPORTANTE: Esta an\xe1lise \xe9 baseada em dados quantitativos. Como profissional respons\xe1vel, revise, adapte e complemente com suas observa\xe7\xf5es cl\xednicas qualitativas antes de utilizar.]**\n\n",generatePeriodSummary(e,t){const n=this.formatPeriodText(t);let a="RESUMO DO PER\xcdODO ANALISADO\n\n";return a+="".concat(n," foram realizadas ").concat(e.total_sessions," sess\xf5es terap\xeauticas, "),e.total_sessions>0?(a+="com m\xe9dia de desempenho de ".concat(e.avg_score.toFixed(1),"%. "),null!==e.independence_percentage&&(a+="O n\xedvel de independ\xeancia alcan\xe7ado foi de ".concat(e.independence_percentage.toFixed(1),"%, "),a+="indicando ".concat(this.getIndependenceDescription(e.independence_percentage),". ")),a+="O paciente trabalhou em ".concat(e.programs_worked," programa(s) diferentes "),a+="durante este per\xedodo.\n\n"):a+="por\xe9m n\xe3o h\xe1 dados de desempenho dispon\xedveis para an\xe1lise.\n\n",a},generateAreaAnalysis(e){if(!e||0===e.length)return"AN\xc1LISE POR \xc1REA DE INTERVEN\xc7\xc3O\n\nN\xe3o h\xe1 dados suficientes para an\xe1lise por \xe1rea de interven\xe7\xe3o.\n\n";let t="AN\xc1LISE POR \xc1REA DE INTERVEN\xc7\xc3O\n\n";const n=[...e].sort(((e,t)=>t.avg_score-e.avg_score));return n.forEach(((e,a)=>{const r=this.getPerformanceDescription(e.avg_score);t+="".concat(e.area_name,": M\xe9dia de ").concat(e.avg_score.toFixed(1),"% em ").concat(e.session_count," sess\xe3o(\xf5es), "),t+="demonstrando ".concat(r),0===a&&n.length>1?t+=" (\xe1rea de melhor desempenho)":a===n.length-1&&n.length>1&&(t+=" (\xe1rea que requer maior aten\xe7\xe3o)"),t+=".\n"})),t+="\n",t},generateIndependenceAnalysis(e){if(null===e.independence_percentage)return"N\xcdVEIS DE INDEPEND\xcaNCIA\n\nDados de prompt level n\xe3o dispon\xedveis para an\xe1lise.\n\n";let t="N\xcdVEIS DE INDEPEND\xcaNCIA\n\n";const n=e.independence_percentage,a=this.getDetailedIndependenceAnalysis(n);return t+="Durante o per\xedodo analisado, o paciente apresentou ".concat(n.toFixed(1),"% de "),t+="respostas independentes. ".concat(a,"\n\n"),t},generateInsightsSection(e){if(!e||0===e.length)return"OBSERVA\xc7\xd5ES RELEVANTES\n\nN\xe3o h\xe1 insights espec\xedficos gerados para este per\xedodo.\n\n";let t="OBSERVA\xc7\xd5ES RELEVANTES\n\n";const n=e.filter((e=>"positive"===e.type)),a=e.filter((e=>"attention"===e.type)),r=e.filter((e=>"neutral"===e.type));return n.length>0&&(t+="Aspectos Positivos:\n",n.forEach((e=>{t+="\u2022 ".concat(e.text,"\n")})),t+="\n"),a.length>0&&(t+="Pontos de Aten\xe7\xe3o:\n",a.forEach((e=>{t+="\u2022 ".concat(e.text,"\n")})),t+="\n"),r.length>0&&(t+="Observa\xe7\xf5es Gerais:\n",r.forEach((e=>{t+="\u2022 ".concat(e.text,"\n")})),t+="\n"),t},generateRecommendations(e,t){let n="RECOMENDA\xc7\xd5ES\n\n";e.avg_score<60?(n+="\u2022 Considerar revis\xe3o das estrat\xe9gias de ensino, dado que a m\xe9dia de desempenho est\xe1 abaixo de 60%.\n",n+="\u2022 Avaliar poss\xedvel necessidade de ajuste nos n\xedveis de prompting utilizados.\n"):e.avg_score>85?(n+="\u2022 Excelente desempenho observado. Considerar progress\xe3o para objetivos mais avan\xe7ados.\n",n+="\u2022 Avaliar possibilidade de redu\xe7\xe3o gradual dos n\xedveis de prompting.\n"):n+="\u2022 Desempenho satisfat\xf3rio observado. Manter estrat\xe9gias atuais de interven\xe7\xe3o.\n",null!==e.independence_percentage&&(e.independence_percentage<30?n+="\u2022 Focar no desenvolvimento da independ\xeancia atrav\xe9s de estrat\xe9gias de fading de prompts.\n":e.independence_percentage>70&&(n+="\u2022 Alto n\xedvel de independ\xeancia alcan\xe7ado. Considerar introdu\xe7\xe3o de novos desafios.\n"));return((null===t||void 0===t?void 0:t.filter((e=>"attention"===e.type)))||[]).length>0&&(n+="\u2022 Aten\xe7\xe3o especial aos pontos identificados na an\xe1lise autom\xe1tica.\n"),n+="\u2022 Continuar monitoramento regular do progresso atrav\xe9s dos dados de sess\xe3o.\n",n+="\n",n},formatPeriodText(e){if(e.startDate&&e.endDate){const t=new Date(e.startDate),n=new Date(e.endDate);return"No per\xedodo de ".concat(t.toLocaleDateString("pt-BR")," a ").concat(n.toLocaleDateString("pt-BR"),",")}return"Durante o per\xedodo analisado,"},getPerformanceDescription:e=>e>=90?"excelente desempenho":e>=80?"bom desempenho":e>=70?"desempenho satisfat\xf3rio":e>=60?"desempenho adequado":e>=50?"desempenho moderado":"desempenho que requer aten\xe7\xe3o",getIndependenceDescription:e=>e>=80?"alto n\xedvel de autonomia":e>=60?"bom n\xedvel de independ\xeancia":e>=40?"n\xedvel moderado de independ\xeancia":e>=20?"baixo n\xedvel de independ\xeancia":"necessidade de apoio significativo",getDetailedIndependenceAnalysis:e=>e>=80?"Isso indica que o paciente est\xe1 demonstrando excelente capacidade de resposta aut\xf4noma, sugerindo boa consolida\xe7\xe3o das habilidades trabalhadas.":e>=60?"Isso demonstra boa evolu\xe7\xe3o na dire\xe7\xe3o da independ\xeancia, com potencial para progress\xe3o cont\xednua.":e>=40?"Isso indica progresso moderado na dire\xe7\xe3o da autonomia, com necessidade de manuten\xe7\xe3o das estrat\xe9gias atuais.":e>=20?"Isso sugere que o paciente ainda requer apoio significativo, sendo recomend\xe1vel foco no desenvolvimento da independ\xeancia.":"Isso indica necessidade de apoio intensivo e poss\xedvel revis\xe3o das estrat\xe9gias de ensino para promover maior autonomia."},Yv=Vv;wm.register(Gf,Jf,Fm,Rm,kf,Wf,_f,yf);const Gv=e=>{let{program:t,sessionData:n}=e;const a=(n||[]).filter((e=>e.program_id===t.program_id));if(0===a.length)return null;const r={labels:a.map((e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long";if(!e)return"N/A";const n=new Date(e);if(isNaN(n.getTime()))return"Data inv\xe1lida";const a=6e4*n.getTimezoneOffset(),r="short"===t?{day:"2-digit",month:"2-digit"}:{day:"2-digit",month:"2-digit",year:"numeric"};return new Date(n.getTime()+a).toLocaleDateString("pt-BR",r)}(e.session_date,"short"))),datasets:[{label:"Pontua\xe7\xe3o (%)",data:a.map((e=>e.score)),borderColor:"#4f46e5",backgroundColor:e=>{const t=e.chart,{ctx:n,chartArea:a}=t;if(!a)return"rgba(79, 70, 229, 0.1)";const r=n.createLinearGradient(0,a.top,0,a.bottom);return r.addColorStop(0,"rgba(99, 102, 241, 0.3)"),r.addColorStop(.5,"rgba(79, 70, 229, 0.2)"),r.addColorStop(1,"rgba(67, 56, 202, 0.1)"),r},borderWidth:2.5,pointRadius:a.map((e=>e.is_baseline?6:5)),pointBackgroundColor:a.map((e=>{var t;return e.is_baseline?"#f59e0b":null!==(t=e.details)&&void 0!==t&&t.promptLevelColor?e.details.promptLevelColor:"#4f46e5"})),pointBorderColor:a.map((e=>e.is_baseline?"#f59e0b":"#ffffff")),pointBorderWidth:a.map((e=>e.is_baseline?3:2)),pointStyle:a.map((e=>e.is_baseline?"star":"circle")),pointHoverRadius:7,pointHoverBorderWidth:3,fill:!0,tension:.4}]};return(0,He.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-indigo-200 px-4 py-3",children:[(0,He.jsx)("h5",{className:"text-sm font-semibold text-gray-800 text-center",children:t.program_name}),(0,He.jsx)("p",{className:"text-xs text-indigo-600 text-center mt-1",children:t.discipline_name})]}),(0,He.jsxs)("div",{className:"p-4",children:[(0,He.jsx)("div",{className:"w-full h-56 relative bg-gradient-to-br from-gray-50 to-indigo-50 rounded-lg p-2",children:(0,He.jsx)(Dx,{options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{y:{display:!0,beginAtZero:!0,max:105,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{font:{size:10,weight:500},color:"#6b7280",callback:e=>e+"%"},border:{display:!1}},x:{display:!0,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{font:{size:10,weight:500},color:"#6b7280"},border:{display:!1}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},data:r})}),(0,He.jsxs)("div",{className:"mt-3 bg-gray-50 rounded-lg p-2 border border-gray-200",children:[(0,He.jsxs)("div",{className:"mb-2",children:[(0,He.jsx)("h6",{className:"text-xs font-medium text-gray-700 mb-1",children:"N\xedveis de Prompting:"}),(0,He.jsx)("div",{className:"flex flex-wrap gap-2 text-xs",children:kp().map((e=>(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.hex}}),(0,He.jsx)("span",{className:"text-gray-600",children:e.name})]},e.id)))})]}),(0,He.jsx)("div",{className:"border-t border-gray-200 pt-1",children:(0,He.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("span",{className:"text-amber-500 text-sm",children:"\u2b50"}),(0,He.jsx)("span",{className:"text-gray-600",children:"Linha de Base"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("div",{className:"w-2 h-2 rounded-full bg-indigo-500"}),(0,He.jsx)("span",{className:"text-gray-600",children:"Sess\xe3o Regular"})]})]})})]})]})]})},$v=e=>{let{isOpen:t,onClose:n}=e;const{selectedPatient:r,refreshAndReselectPatient:s}=ct(),{user:i,updateUser:o}=Ge(),[l,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),[f,p]=(0,a.useState)(""),[g,x]=(0,a.useState)(!1),[b,v]=(0,a.useState)(""),[y,w]=(0,a.useState)(!1),[j,N]=(0,a.useState)(""),[_,S]=(0,a.useState)(!1),[k,C]=(0,a.useState)(null),[A,P]=(0,a.useState)(!1),[L,E]=(0,a.useState)(!1);(0,a.useEffect)((()=>{if(t&&(c(""),m(""),p(""),u(""),v(""),N(""),x(!1),E(!1),i)){const t=i.professional_id&&i.professional_id.trim().length>0,n=i.qualifications&&i.qualifications.trim().length>0,a=!t||!n;var e;if(P(a),a)C(null);else C({professional_id:i.professional_id.trim(),qualifications:i.qualifications.trim(),professional_signature:(null===(e=i.professional_signature)||void 0===e?void 0:e.trim())||""})}}),[t,i]);const D=(0,a.useMemo)((()=>{if(null===r||void 0===r||!r.sessionData)return[];const e=h?new Date(h+"T00:00:00"):null,t=f?new Date(f+"T23:59:59"):null;return(r.sessionData||[]).filter((n=>{const a=new Date(n.session_date);return!(e&&a<e)&&!(t&&a>t)}))}),[r,h,f]),M=(0,a.useMemo)((()=>null!==r&&void 0!==r&&r.assigned_programs?r.assigned_programs:[]),[r]);return t&&r?(0,He.jsxs)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center z-50 p-4",children:[(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col transform transition-all",children:[(0,He.jsxs)("div",{className:"flex justify-between items-center p-5 border-b border-gray-200",children:[(0,He.jsxs)("h2",{className:"text-xl font-semibold text-gray-800",children:["Gerar Relat\xf3rio Consolidado para: ",(0,He.jsx)("span",{className:"text-indigo-600",children:r.name})]}),(0,He.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,He.jsx)(Hr,{icon:Vi,className:"text-lg"})})]}),(0,He.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,He.jsxs)("div",{className:"p-6 space-y-6",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-4",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,He.jsxs)("h3",{className:"text-sm font-semibold text-indigo-800 flex items-center",children:[(0,He.jsx)(Hr,{icon:fi,className:"mr-2"}),"Dados Profissionais"]}),(0,He.jsxs)("button",{onClick:()=>{S(!0)},className:"text-xs text-indigo-600 hover:text-indigo-800 flex items-center transition-colors",children:[(0,He.jsx)(Hr,{icon:gs,className:"mr-1"}),A?"Configurar":"Editar"]})]}),A?(0,He.jsx)("div",{className:"text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded p-2",children:"\u26a0\ufe0f \xc9 necess\xe1rio configurar seus dados profissionais antes de gerar o relat\xf3rio."}):k?(0,He.jsxs)("div",{className:"text-sm text-indigo-700 space-y-1",children:[(0,He.jsxs)("p",{children:[(0,He.jsx)("strong",{children:"Nome:"})," ",(null===i||void 0===i?void 0:i.full_name)||(null===i||void 0===i?void 0:i.name)]}),(0,He.jsxs)("p",{children:[(0,He.jsx)("strong",{children:"Registro:"})," ",k.professional_id]}),(0,He.jsxs)("p",{children:[(0,He.jsx)("strong",{children:"Qualifica\xe7\xf5es:"})," ",k.qualifications]})]}):(0,He.jsx)("div",{className:"text-sm text-gray-500",children:"Carregando dados profissionais..."})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Per\xedodo do Relat\xf3rio"}),(0,He.jsx)(Fv,{startDate:h,endDate:f,onStartDateChange:m,onEndDateChange:p,onClear:()=>{m(""),p("")},showInfo:!1}),(0,He.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Padr\xe3o: \xfaltimo m\xeas. Limpe os filtros para incluir todos os dados."})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,He.jsxs)("div",{className:"lg:col-span-3",children:[(0,He.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-3 gap-2",children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"An\xe1lise e Observa\xe7\xf5es do Terapeuta"}),(0,He.jsxs)("button",{onClick:async()=>{if(r){w(!0),N("");try{const e={startDate:h||null,endDate:f||null},t=await Yv.generateConventionalReportSuggestion(r.id,D,e);v(t),x(!0)}catch(yj){console.error("Erro ao gerar sugest\xe3o:",yj),N(yj.message||"Erro ao gerar sugest\xe3o de texto.")}finally{w(!1)}}},disabled:y||!r||A,className:"flex items-center px-3 py-1.5 text-xs bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white font-medium rounded-md transition duration-150 ease-in-out shadow hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,He.jsx)(Hr,{icon:y?Zi:oo,className:"mr-1.5 ".concat(y?"fa-spin":"")}),y?"Gerando...":"Sugerir Texto"]})]}),(0,He.jsxs)("div",{className:"mb-3 space-y-2",children:[(0,He.jsxs)("p",{className:"text-xs text-gray-500",children:['Este texto ser\xe1 inclu\xeddo no in\xedcio do relat\xf3rio em PDF. Use o bot\xe3o "Sugerir Texto" para gerar automaticamente uma an\xe1lise baseada nos dados do paciente.',(0,He.jsx)("span",{className:"hidden sm:inline",children:" Melhor experi\xeancia em desktop para formata\xe7\xe3o avan\xe7ada."})]}),(0,He.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-2",children:(0,He.jsxs)("p",{className:"text-xs text-amber-800",children:[(0,He.jsx)("strong",{children:"\u26a0\ufe0f Responsabilidade Profissional:"})," A sugest\xe3o autom\xe1tica \xe9 baseada apenas em m\xe9tricas quantitativas. \xc9 ",(0,He.jsx)("strong",{children:"imprescind\xedvel"})," que o terapeuta revise, adapte e complemente o texto com sua an\xe1lise cl\xednica qualitativa, considerando aspectos comportamentais, contextuais e individuais do paciente que n\xe3o s\xe3o capturados pelos dados num\xe9ricos."]})})]}),j&&(0,He.jsx)("div",{className:"mb-3 p-2 bg-red-50 border border-red-200 rounded-md",children:(0,He.jsx)("p",{className:"text-xs text-red-600",children:j})}),(0,He.jsx)(qv,{value:l,onChange:c,placeholder:"Escreva aqui a sua an\xe1lise qualitativa ou use o bot\xe3o 'Sugerir Texto' para gerar automaticamente...",rows:8,disabled:A})]}),(0,He.jsx)("div",{className:"lg:col-span-1",children:(0,He.jsx)(Uv,{sessionData:D,startDate:h,endDate:f,assignedPrograms:M,className:"sticky top-4"})})]}),(0,He.jsxs)("div",{className:"border-t pt-6",children:[(0,He.jsxs)("h3",{className:"text-lg font-semibold text-gray-700 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:Qs,className:"mr-3 text-indigo-500"}),"Pr\xe9-visualiza\xe7\xe3o do Progresso no Per\xedodo"]}),(0,He.jsx)("div",{className:"space-y-4",children:M.length>0?(()=>{const e=M.reduce(((e,t)=>{const n=t.discipline_name;return e[n]||(e[n]=[]),e[n].push(t),e}),{});return Object.keys(e).sort().map((t=>(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-3 mb-3",children:(0,He.jsx)("h4",{className:"text-sm font-semibold text-indigo-800",children:t})}),(0,He.jsx)("div",{className:"space-y-3 mb-6",children:e[t].map((e=>(0,He.jsx)(Gv,{program:e,sessionData:D},e.program_id)))})]},t)))})():(0,He.jsx)("p",{className:"text-center text-gray-500 py-4",children:"Nenhum programa para exibir."})})]}),d&&(0,He.jsx)("p",{className:"text-red-500 text-sm text-center",children:d})]})}),(0,He.jsxs)("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3 mt-auto",children:[(0,He.jsx)("button",{onClick:n,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,He.jsxs)("button",{onClick:()=>{r&&l.trim()&&!A&&E(!0)},disabled:A||!l.trim(),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-6 rounded-md text-sm transition duration-150 ease-in-out shadow hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-60 flex items-center space-x-2",children:[(0,He.jsx)(Hr,{icon:ni}),(0,He.jsx)("span",{children:A?"Configure Dados Profissionais":l.trim()?"Visualizar PDF":"Adicione Texto para Visualizar"})]})]})]}),(0,He.jsx)(zv,{isOpen:g,onClose:()=>{x(!1),v(""),N("")},suggestedText:b,currentText:l,onUseSuggestion:e=>{c(e)},onAppendSuggestion:e=>{c(e)},isGenerating:y}),(0,He.jsx)(Bv,{isOpen:_,onClose:()=>S(!1),onSave:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)return console.error("Erro ao salvar dados profissionais:",t),void P(!0);if(e&&(C(e),P(!1),S(!1),o({professional_id:e.professional_id,qualifications:e.qualifications,professional_signature:e.professional_signature}),s&&r))try{console.log("\ud83d\udd04 Re-selecionando paciente ap\xf3s salvar dados profissionais..."),await s(r.id),console.log("\u2705 Paciente re-selecionado com sucesso no consolidado")}catch(yj){console.warn("\u26a0\ufe0f Aviso: N\xe3o foi poss\xedvel re-selecionar paciente:",yj)}},currentUser:i,title:"Configurar Dados Profissionais para Relat\xf3rio"}),(0,He.jsx)(Hv,{isOpen:L,onClose:()=>{E(!1)},patientData:r,reportText:l,professionalData:k?(0,Ie.A)((0,Ie.A)({},k),{},{professional_name:(null===i||void 0===i?void 0:i.full_name)||(null===i||void 0===i?void 0:i.name)||"Profissional"}):null,sessionData:D,assignedPrograms:M,onUpdateReportText:e=>{c(e)}})]}):null};if("undefined"!==typeof document&&!document.querySelector("#clients-page-styles")){const e=document.createElement("style");e.id="clients-page-styles",e.textContent="\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  .animate-fade-in {\n    animation: fadeIn 0.6s ease-out;\n  }\n",document.head.appendChild(e)}const Xv=()=>{const{selectedPatient:e,isLoading:t,isPatientFormOpen:n,closePatientForm:r,patientToEdit:s,addPatient:i,editPatient:o,isReportModalOpen:l,closeReportModal:c}=ct(),[d,u]=(0,a.useState)(null);(0,a.useEffect)((()=>{u(null)}),[e]);return t?(0,He.jsx)("div",{className:"flex items-center justify-center h-full text-center p-10",children:(0,He.jsxs)("div",{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-4xl text-indigo-500 mb-4"}),(0,He.jsx)("p",{className:"text-gray-500",children:"A carregar dados dos clientes..."})]})}):(0,He.jsxs)(He.Fragment,{children:[e?(0,He.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:(0,He.jsxs)("div",{className:"space-y-8 p-6",children:[(0,He.jsx)("div",{className:"animate-fade-in",children:(0,He.jsx)(xx,{})}),(0,He.jsxs)("div",{className:"animate-fade-in",children:[(0,He.jsx)("div",{className:"mb-6",children:(0,He.jsxs)("div",{className:"flex items-center mb-4",children:[(0,He.jsx)("div",{className:"w-1 h-8 bg-gradient-to-b from-indigo-500 to-purple-600 rounded-full mr-4"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83c\udfaf Gest\xe3o de Programas"}),(0,He.jsx)("p",{className:"text-gray-600 text-sm",children:"Selecione um programa \xe0 esquerda para visualizar o progresso detalhado"})]})]})}),(0,He.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[(0,He.jsx)("div",{className:"lg:col-span-2",children:(0,He.jsx)(jx,{onProgramSelect:e=>{u(e)},selectedProgramId:null===d||void 0===d?void 0:d.assignment_id})}),(0,He.jsx)("div",{className:"lg:col-span-3",children:(0,He.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden min-h-[600px]",children:d?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 px-6 py-4",children:[(0,He.jsx)("h3",{className:"text-xl font-bold text-white flex items-center",children:"\ud83d\udcc8 Progresso do Programa"}),(0,He.jsx)("p",{className:"text-blue-100 text-sm mt-1 truncate",children:d.program_name})]}),(0,He.jsx)("div",{className:"p-6",children:(0,He.jsx)(Iv,{program:d,assignment:d})})]}):(0,He.jsx)("div",{className:"flex items-center justify-center h-full text-center p-8",children:(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-blue-100 to-indigo-100 p-6 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:(0,He.jsx)("span",{className:"text-4xl",children:"\ud83d\udcc8"})}),(0,He.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-3",children:"Selecione um Programa"}),(0,He.jsx)("p",{className:"text-gray-500 leading-relaxed max-w-md mx-auto",children:"Escolha um programa na lista ao lado para visualizar gr\xe1ficos de progresso, hist\xf3rico de sess\xf5es e dados detalhados de desempenho."}),(0,He.jsxs)("div",{className:"mt-6 flex items-center justify-center space-x-2 text-sm text-gray-400",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),(0,He.jsx)("span",{children:"Aguardando sele\xe7\xe3o"})]})]})})})})]})]})]})}):(0,He.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center p-8",children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 p-8 rounded-full w-32 h-32 mx-auto mb-8 flex items-center justify-center shadow-lg",children:(0,He.jsx)(Hr,{icon:Bi,className:"text-6xl text-indigo-600"})}),(0,He.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Bem-vindo \xe0 Gest\xe3o de Clientes"}),(0,He.jsx)("p",{className:"text-lg text-gray-600 mb-6 max-w-lg mx-auto leading-relaxed",children:"Selecione um cliente na barra lateral para acessar informa\xe7\xf5es detalhadas, gerenciar programas de interven\xe7\xe3o e acompanhar o progresso."}),(0,He.jsx)("div",{className:"bg-white border-2 border-dashed border-indigo-300 rounded-lg p-6 max-w-md mx-auto",children:(0,He.jsxs)("div",{className:"flex items-center justify-center space-x-3 text-indigo-600",children:[(0,He.jsx)("div",{className:"w-3 h-3 bg-indigo-500 rounded-full animate-pulse"}),(0,He.jsx)("span",{className:"font-medium",children:"Aguardando sele\xe7\xe3o de cliente"})]})})]})}),(0,He.jsx)(vx,{isOpen:n,onClose:r,onSave:async e=>{s?await o(e):await i(e)},patientToEdit:s}),(0,He.jsx)($v,{isOpen:l,onClose:c})]})},Kv=e=>{let{program:t,onAssign:n,isAssigning:a,isPatientSelected:r,isAssigned:s}=e;const i=t.objective?t.objective:"Nenhum objetivo definido.",o=(e=>e.skill&&e.skill.includes("vbmapp"))(t);return(0,He.jsxs)("div",{className:"\n      bg-white border-2 rounded-xl shadow-sm flex flex-col justify-between transition-all duration-300 hover:shadow-lg transform hover:-translate-y-1\n      ".concat(s?"border-green-200 bg-gradient-to-br from-green-50 to-emerald-50":"border-gray-200 hover:border-indigo-300","\n    "),children:[(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,He.jsxs)("div",{className:"flex-1 pr-3",children:[(0,He.jsx)("h3",{className:"text-lg font-bold leading-tight ".concat(s?"text-green-800":"text-gray-800"),children:t.name}),o&&(0,He.jsx)("div",{className:"mt-2",children:(0,He.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-teal-100 to-cyan-100 text-teal-800 border border-teal-200",children:[(0,He.jsx)(Hr,{icon:Cs,className:"mr-1 text-teal-600"}),"VB-MAPP"]})})]}),s&&(0,He.jsx)("div",{className:"bg-green-100 p-2 rounded-full",children:(0,He.jsx)(Hr,{icon:fo,className:"text-green-600 text-sm"})})]}),(0,He.jsxs)("div",{className:"mb-4",children:[(0,He.jsxs)("div",{className:"flex items-center mb-2",children:[(0,He.jsx)(Hr,{icon:ws,className:"text-indigo-500 mr-2"}),(0,He.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:"Objetivos"})]}),(0,He.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",title:i,children:i.length>120?"".concat(i.substring(0,120),"..."):i})]}),(()=>{const e=(e=>{if(!e)return null;try{const t="string"===typeof e?JSON.parse(e):e,n=new Set;return t.forEach((e=>{e.sd&&n.add("SD"),(e.r||e.R)&&n.add("R"),(e.c||e.C)&&n.add("C"),e.dica&&n.add("Dica")})),n.size>0?Array.from(n).sort():null}catch(vj){return null}})(t.procedure);return e&&(0,He.jsxs)("div",{className:"mb-4",children:[(0,He.jsxs)("div",{className:"flex items-center mb-2",children:[(0,He.jsx)(Hr,{icon:gi,className:"text-emerald-500 mr-2"}),(0,He.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:"Componentes ABA"})]}),(0,He.jsx)("div",{className:"flex flex-wrap gap-1",children:e.map((e=>(0,He.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",title:"SD"===e?"Est\xedmulo Discriminativo":"R"===e?"Resposta":"C"===e?"Consequ\xeancia":"Dica"===e?"Prompt":e,children:e},e)))})]})})(),t.tags&&t.tags.length>0&&(0,He.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[t.tags.slice(0,3).map(((e,t)=>{const n=(e=>({Mando:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"},Tato:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"},Ecoico:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200"},Intraverbal:{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-200"}}[e]||{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"}))(e);return(0,He.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ".concat(n.bg," ").concat(n.text," ").concat(n.border),children:[(0,He.jsx)(Hr,{icon:ui,className:"mr-1"}),e]},t)})),t.tags.length>3&&(0,He.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 border border-gray-200",children:["+",t.tags.length-3," mais"]})]})]}),(0,He.jsx)("div",{className:"border-t p-4 ".concat(s?"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200":"bg-gray-50 border-gray-200"),children:s?(0,He.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 py-3 rounded-lg flex items-center justify-center space-x-2 shadow-sm",children:[(0,He.jsx)("div",{className:"bg-white bg-opacity-20 p-1 rounded-full",children:(0,He.jsx)(Hr,{icon:fo,className:"text-sm"})}),(0,He.jsx)("span",{className:"font-semibold text-sm",children:"J\xe1 Atribu\xeddo"})]}):(0,He.jsx)("button",{onClick:()=>n(t.id),disabled:!r||a,title:r?"Atribuir ao cliente":"Selecione um cliente para atribuir",className:"\n            px-4 py-3 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center justify-center space-x-2 w-full shadow-sm transform\n            ".concat(r?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white hover:from-indigo-600 hover:to-purple-700 hover:scale-105 active:scale-95":"bg-gray-200 text-gray-500 cursor-not-allowed","\n          "),children:a?(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin"}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)("div",{className:"p-1 rounded-full ".concat(r?"bg-white bg-opacity-20":"bg-gray-300"),children:(0,He.jsx)(Hr,{icon:Wi,className:"text-sm"})}),(0,He.jsx)("span",{children:"Atribuir Programa"})]})})})]})},Jv=e=>{let{program:t,onEdit:n,onDelete:r,onAssign:s,isDeleting:i,hasAssignments:o=!1,assignmentCount:l=0,progressCount:c=0,userIsAdmin:d=!1,isAssigned:u=!1,isAssigning:h=!1,isPatientSelected:m=!1}=e;const[f,p]=(0,a.useState)(!1),[g,x]=(0,a.useState)(1),b=t.created_by||!0,v=!o&&0===c;return(0,He.jsxs)("div",{className:"bg-white border border-purple-200 rounded-lg shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[(0,He.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border-b border-purple-100 p-4",children:(0,He.jsxs)("div",{className:"flex justify-between items-start",children:[(0,He.jsxs)("div",{className:"flex-1",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,He.jsxs)("span",{className:"bg-purple-100 text-purple-800 text-xs font-medium px-2 py-1 rounded-full",children:[(0,He.jsx)(Hr,{icon:ji,className:"mr-1"}),"Customizado"]}),t.program_slug&&(0,He.jsxs)("span",{className:"bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded-full",children:[(0,He.jsx)(Hr,{icon:ui,className:"mr-1"}),t.program_slug]})]}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800 leading-tight",children:t.name})]}),(0,He.jsxs)("div",{className:"flex space-x-2 ml-4",children:[b&&(0,He.jsx)("button",{onClick:()=>null===n||void 0===n?void 0:n(t),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar programa",children:(0,He.jsx)(Hr,{icon:gs})}),d&&(0,He.jsx)("button",{onClick:()=>{p(!0),x(1)},disabled:i,className:"p-2 rounded-lg transition-colors ".concat(v?"text-red-600 hover:bg-red-50":"text-gray-400 cursor-not-allowed"),title:v?"Remover programa":"N\xe3o \xe9 poss\xedvel remover: h\xe1 dados associados",children:i?(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin"}):(0,He.jsx)(Hr,{icon:li})})]})]})}),(0,He.jsxs)("div",{className:"p-4",children:[t.objective&&(0,He.jsxs)("div",{className:"mb-4",children:[(0,He.jsxs)("div",{className:"flex items-center text-gray-600 text-sm mb-1",children:[(0,He.jsx)(Hr,{icon:ws,className:"mr-2"}),(0,He.jsx)("span",{className:"font-medium",children:"Objetivo"})]}),(0,He.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:t.objective})]}),(0,He.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.trials&&(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-gray-500",children:"Tentativas:"}),(0,He.jsx)("span",{className:"ml-1 font-medium",children:t.trials})]}),t.created_by_name&&(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:js,className:"text-gray-400 mr-1"}),(0,He.jsx)("span",{className:"text-gray-600 truncate",children:t.created_by_name})]})]}),(l>0||c>0)&&(0,He.jsxs)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,He.jsxs)("div",{className:"flex items-center text-yellow-800 text-sm",children:[(0,He.jsx)(Hr,{icon:xo,className:"mr-2"}),(0,He.jsx)("span",{className:"font-medium",children:"Programa em uso"})]}),(0,He.jsxs)("div",{className:"mt-1 text-yellow-700 text-xs",children:[l>0&&"".concat(l," atribui\xe7\xe3o(\xf5es)"),l>0&&c>0&&" \u2022 ",c>0&&"".concat(c," registro(s) de progresso")]})]}),m&&s&&(0,He.jsx)("div",{className:"mt-4",children:u?(0,He.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 py-3 rounded-lg flex items-center justify-center space-x-2 shadow-sm",children:[(0,He.jsx)("div",{className:"bg-white bg-opacity-20 p-1 rounded-full",children:(0,He.jsx)(Hr,{icon:fo,className:"text-sm"})}),(0,He.jsx)("span",{className:"font-semibold text-sm",children:"J\xe1 Atribu\xeddo"})]}):(0,He.jsx)("button",{onClick:()=>s(t),disabled:!m||h,title:m?"Atribuir ao cliente":"Selecione um cliente para atribuir",className:"\n                  px-4 py-3 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center justify-center space-x-2 w-full shadow-sm transform\n                  ".concat(m?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white hover:from-indigo-600 hover:to-purple-700 hover:scale-105 active:scale-95":"bg-gray-200 text-gray-500 cursor-not-allowed","\n                "),children:h?(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin"}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)("div",{className:"p-1 rounded-full ".concat(m?"bg-white bg-opacity-20":"bg-gray-300"),children:(0,He.jsx)(Hr,{icon:Wi,className:"text-sm"})}),(0,He.jsx)("span",{children:"Atribuir Programa"})]})})})]}),f&&(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,He.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsxs)("div",{className:"flex items-center mb-4",children:[(0,He.jsx)("div",{className:"bg-red-100 p-3 rounded-full mr-4",children:(0,He.jsx)(Hr,{icon:go,className:"text-red-600 text-xl"})}),(0,He.jsx)("div",{children:(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:1===g?"Confirmar Remo\xe7\xe3o":"ATEN\xc7\xc3O: Perda de Dados"})})]}),1===g?(0,He.jsxs)("div",{className:"mb-6",children:[(0,He.jsx)("p",{className:"text-gray-700 mb-4",children:"Tem certeza que deseja remover o programa:"}),(0,He.jsxs)("p",{className:"font-medium text-gray-900 bg-gray-50 p-3 rounded border-l-4 border-purple-500",children:['"',t.name,'"']}),o||c>0?(0,He.jsxs)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,He.jsxs)("div",{className:"flex items-center text-red-800 mb-2",children:[(0,He.jsx)(Hr,{icon:go,className:"mr-2"}),(0,He.jsx)("span",{className:"font-semibold",children:"CUIDADO!"})]}),(0,He.jsx)("p",{className:"text-red-700 text-sm",children:"Este programa possui dados associados que ser\xe3o PERMANENTEMENTE perdidos:"}),(0,He.jsxs)("ul",{className:"mt-2 text-red-700 text-sm list-disc list-inside",children:[l>0&&(0,He.jsxs)("li",{children:[l," atribui\xe7\xe3o(\xf5es) a pacientes"]}),c>0&&(0,He.jsxs)("li",{children:[c," registro(s) de progresso/sess\xf5es"]})]})]}):(0,He.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,He.jsx)("p",{className:"text-green-700 text-sm",children:"\u2713 Este programa n\xe3o possui dados associados. \xc9 seguro remov\xea-lo."})})]}):(0,He.jsxs)("div",{className:"mb-6",children:[(0,He.jsx)("p",{className:"text-red-700 font-medium mb-4",children:"\ud83d\udea8 \xdaLTIMA CONFIRMA\xc7\xc3O"}),(0,He.jsx)("p",{className:"text-gray-700 mb-4",children:"Ao continuar, TODOS os dados abaixo ser\xe3o PERMANENTEMENTE perdidos:"}),(0,He.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,He.jsxs)("ul",{className:"text-red-800 text-sm space-y-1",children:[(0,He.jsx)("li",{children:"\u2022 O programa customizado"}),(0,He.jsx)("li",{children:"\u2022 Todas as atribui\xe7\xf5es aos pacientes"}),(0,He.jsx)("li",{children:"\u2022 Todo o hist\xf3rico de progresso/sess\xf5es"}),(0,He.jsx)("li",{children:"\u2022 Relat\xf3rios e dados anal\xedticos"})]})}),(0,He.jsx)("p",{className:"text-gray-700 mt-4 text-sm",children:(0,He.jsx)("strong",{children:"Esta a\xe7\xe3o N\xc3O pode ser desfeita!"})})]}),(0,He.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,He.jsx)("button",{onClick:()=>{p(!1),x(1)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),1===g&&(o||c>0)?(0,He.jsx)("button",{onClick:()=>x(2),className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:"Continuar Mesmo Assim"}):(0,He.jsx)("button",{onClick:async()=>{if(1===g&&(o||c>0))x(2);else try{await(0,nt.VX)(t.id),null===r||void 0===r||r(t.id),p(!1)}catch(e){console.error("Erro ao deletar programa:",e)}},className:"px-4 py-2 text-white rounded-lg ".concat(v?"bg-red-600 hover:bg-red-700":"bg-red-800 hover:bg-red-900"),children:2===g?"CONFIRMAR REMO\xc7\xc3O":"Remover Programa"})]})]})})})]})},Qv=e=>{let{onProgramSelect:t,onAssign:n,assigningId:r,assignedPrograms:s=[],isPatientSelected:i=!1,disciplineName:o="",disciplineDisplayName:l="",disciplineColors:c={}}=e;const[d,u]=(0,a.useState)(""),[h,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)([]),[g,x]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null),[y,w]=(0,a.useState)(!1),j=(0,a.useRef)(null),N=(0,a.useRef)(null),_=(0,a.useCallback)((async e=>{if(e.trim()){x(!0);try{const t=await(0,nt.sp)(e,o);p(t.slice(0,8))}catch(t){console.error("Erro na busca:",t),p([])}finally{x(!1)}}else p([])}),[o]);(0,a.useEffect)((()=>{const e=setTimeout((()=>{_(d)}),300);return()=>clearTimeout(e)}),[d,_]),(0,a.useEffect)((()=>{m(d.length>0&&(f.length>0||g))}),[d,f,g]),(0,a.useEffect)((()=>{const e=e=>{j.current&&!j.current.contains(e.target)&&N.current&&!N.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);const S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"view",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"assign"===t&&n?(n(e.id),u(""),m(!1)):"view"===t&&(a&&a.stopPropagation(),v(e),w(!0))},k=e=>Array.isArray(s)&&s.some((t=>t.program_id===e)),C=e=>{const t=[];return e.area_name&&e.area_name!==e.sub_area_name&&t.push(e.area_name),e.sub_area_name&&t.push(e.sub_area_name),t.join(" \u2192 ")};return(0,He.jsxs)("div",{className:"relative mb-6",children:[(0,He.jsxs)("div",{className:"relative",ref:j,children:[(0,He.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 z-10",children:(0,He.jsx)(Hr,{icon:Oi,className:"".concat(c.text||"text-gray-400"," transition-colors")})}),(0,He.jsx)("input",{type:"text",placeholder:"Buscar programas de ".concat(l||o,"..."),value:d,onChange:e=>u(e.target.value),className:"\n            w-full pl-10 pr-12 py-3 \n            border-2 rounded-lg \n            placeholder-gray-400 text-gray-800 \n            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 \n            transition-all duration-200 border-gray-300 focus:border-blue-500\n            ".concat(h?"rounded-b-none":"","\n          ")}),d&&(0,He.jsx)("button",{onClick:()=>{var e;u(""),m(!1),null===(e=j.current)||void 0===e||e.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,He.jsx)(Hr,{icon:Vi})})]}),h&&(0,He.jsx)("div",{ref:N,className:"\n            absolute top-full left-0 right-0 z-50 \n            bg-white border-2 border-t-0 rounded-b-lg shadow-xl\n            max-h-96 overflow-y-auto border-gray-300\n          ",children:g?(0,He.jsxs)("div",{className:"px-4 py-6 text-center text-gray-500",children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-2xl mb-2 opacity-50"}),(0,He.jsx)("p",{children:"Buscando programas..."})]}):f.length>0?(0,He.jsx)("div",{className:"py-2",children:f.map(((e,t)=>{const n=k(e.id),a=r===e.id;return(0,He.jsx)("div",{className:"\n                      px-4 py-3 hover:bg-gray-50 transition-colors\n                      ".concat(t<f.length-1?"border-b border-gray-100":"","\n                    "),children:(0,He.jsxs)("div",{className:"flex items-start justify-between",children:[(0,He.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,He.jsx)(Hr,{icon:ho,className:"text-sm ".concat(c.text||"text-gray-500")}),(0,He.jsx)("h4",{className:"font-semibold text-gray-800 truncate",children:e.name}),n&&(0,He.jsx)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Atribu\xeddo"})]}),(0,He.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:C(e)}),(0,He.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.objective||"Sem objetivo definido"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-2 ml-3",children:[(0,He.jsx)("button",{onClick:t=>S(e,"view",t),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Visualizar programa",children:(0,He.jsx)(Hr,{icon:ni,className:"text-sm"})}),i&&!n&&(0,He.jsx)("button",{onClick:()=>S(e,"assign"),disabled:a,className:"\n                              p-2 rounded-lg transition-colors text-sm\n                              ".concat(a?"text-gray-400 cursor-not-allowed":"text-white bg-blue-600 hover:bg-blue-700","\n                            "),title:"Atribuir programa",children:(0,He.jsx)(Hr,{icon:a?Zi:Wi,className:a?"fa-spin":""})})]})]})},e.id)}))}):(0,He.jsxs)("div",{className:"px-4 py-6 text-center text-gray-500",children:[(0,He.jsx)(Hr,{icon:Oi,className:"text-2xl mb-2 opacity-50"}),(0,He.jsx)("p",{children:"Nenhum programa encontrado"}),(0,He.jsx)("p",{className:"text-xs mt-1",children:"Tente buscar por nome, objetivo ou \xe1rea"})]})}),y&&b&&(0,He.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 p-4",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,He.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:b.name}),(0,He.jsxs)("p",{className:"text-sm text-gray-500",children:[b.discipline_name," \u2192 ",b.area_name," \u2192 ",b.sub_area_name]})]}),(0,He.jsx)("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600 p-2",children:(0,He.jsx)(Hr,{icon:Vi})})]})}),(0,He.jsxs)("div",{className:"p-6 space-y-4",children:[b.objective&&(0,He.jsxs)("div",{children:[(0,He.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"Objetivo:"}),(0,He.jsx)("p",{className:"text-gray-600 leading-relaxed",children:b.objective})]}),b.skill&&(0,He.jsxs)("div",{children:[(0,He.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"Habilidade:"}),(0,He.jsx)("p",{className:"text-gray-600 leading-relaxed",children:b.skill})]}),(0,He.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[b.program_slug&&(0,He.jsxs)("div",{children:[(0,He.jsx)("h4",{className:"font-semibold text-gray-700 mb-1",children:"Tag:"}),(0,He.jsx)("p",{className:"text-gray-600",children:b.program_slug})]}),b.trials&&(0,He.jsxs)("div",{children:[(0,He.jsx)("h4",{className:"font-semibold text-gray-700 mb-1",children:"Tentativas:"}),(0,He.jsx)("p",{className:"text-gray-600",children:b.trials})]})]})]}),(0,He.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsx)("button",{onClick:()=>w(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Fechar"}),i&&!k(b.id)&&(0,He.jsx)("button",{onClick:()=>{S(b,"assign"),w(!1)},disabled:r===b.id,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:r===b.id?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin mr-2"}),"Atribuindo..."]}):"Atribuir Programa"})]})})]})})]})},Zv=e=>{let{isOpen:t,onClose:n,onSuccess:r}=e;const[s,i]=(0,a.useState)({discipline:"",area:"",sub_area_id:"",name:"",objective:"",program_slug:"",skill:"",materials:[""],procedure:[{step:"",description:""}],criteria_for_advancement:"",trials:5}),[o,l]=(0,a.useState)({}),[c,d]=(0,a.useState)({}),[u,h]=(0,a.useState)({}),[m,f]=(0,a.useState)(!1),[p,g]=(0,a.useState)(!0),[x,b]=(0,a.useState)("");(0,a.useEffect)((()=>{t&&v()}),[t]);const v=async()=>{try{g(!0);const e=await(0,nt.uc)();l(e)}catch(x){console.error("Erro ao buscar hierarquia:",x),b("Erro ao carregar disciplinas. Tente novamente.")}finally{g(!1)}},y=(e,t,n)=>{const a=[...s.procedure];a[e]=(0,Ie.A)((0,Ie.A)({},a[e]),{},{[t]:n}),i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:a})))},w=async e=>{if(e.preventDefault(),s.sub_area_id?s.name.trim()?s.objective.trim()?s.program_slug.trim()?s.skill.trim()?s.materials.every((e=>!e.trim()))?(b("Adicione pelo menos um material."),0):s.procedure.every((e=>!e.step.trim()&&!e.description.trim()))?(b("Adicione pelo menos um passo do procedimento."),0):s.criteria_for_advancement.trim()?!(!s.trials||s.trials<1||s.trials>999)||(b("N\xfamero de tentativas deve ser entre 1 e 999."),0):(b("Crit\xe9rios para avan\xe7o s\xe3o obrigat\xf3rios."),0):(b("Habilidade ABA \xe9 obrigat\xf3ria."),0):(b("Tag do programa \xe9 obrigat\xf3ria."),0):(b("Objetivo \xe9 obrigat\xf3rio."),0):(b("Nome do programa \xe9 obrigat\xf3rio."),0):(b("Selecione uma disciplina, \xe1rea e sub-\xe1rea."),0)){f(!0),b("");try{const e={sub_area_id:s.sub_area_id,name:s.name.trim(),objective:s.objective.trim(),program_slug:s.program_slug.trim(),skill:s.skill.trim(),materials:s.materials.filter((e=>e.trim())),procedure:s.procedure.filter((e=>e.step.trim()||e.description.trim())),criteria_for_advancement:s.criteria_for_advancement.trim(),trials:parseInt(s.trials)};await(0,nt.og)(e),i({discipline:"",area:"",sub_area_id:"",name:"",objective:"",program_slug:"",skill:"",materials:[""],procedure:[{step:"",description:""}],criteria_for_advancement:"",trials:5}),null===r||void 0===r||r(),n()}catch(x){var t,a;console.error("Erro ao criar programa:",x),b((null===(t=x.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Erro ao criar programa customizado.")}finally{f(!1)}}},j=()=>{m||(b(""),n())};return t?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)("style",{children:"\n        .modal-scroll-content {\n          scrollbar-width: thin;\n          scrollbar-color: #cbd5e0 #f7fafc;\n        }\n        .modal-scroll-content::-webkit-scrollbar {\n          width: 8px;\n        }\n        .modal-scroll-content::-webkit-scrollbar-track {\n          background: #f7fafc;\n          border-radius: 4px;\n        }\n        .modal-scroll-content::-webkit-scrollbar-thumb {\n          background: #cbd5e0;\n          border-radius: 4px;\n        }\n        .modal-scroll-content::-webkit-scrollbar-thumb:hover {\n          background: #a0aec0;\n        }\n      "}),(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,He.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl h-[95vh] sm:h-[90vh] flex flex-col overflow-hidden",style:{maxHeight:window.innerHeight>600?"90vh":"95vh",minHeight:window.innerHeight>600?"500px":"300px",height:window.innerHeight>600?"90vh":"95vh"},children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 flex justify-between items-center",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:(0,He.jsx)(Hr,{icon:Wi,className:"text-xl"})}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h2",{className:"text-xl font-bold",children:"Criar Programa Customizado"}),(0,He.jsx)("p",{className:"text-purple-100 text-sm",children:"Programa espec\xedfico para sua cl\xednica"})]})]}),(0,He.jsx)("button",{onClick:j,disabled:m,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors disabled:opacity-50",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsx)("div",{className:"flex-1 overflow-y-auto p-6 modal-scroll-content",style:{minHeight:0,maxHeight:window.innerHeight>600?"calc(90vh - 140px)":"calc(95vh - 120px)",overflowY:"auto",WebkitOverflowScrolling:"touch"},children:p?(0,He.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-3xl text-purple-500 mb-4"}),(0,He.jsx)("p",{className:"text-gray-600",children:"Carregando disciplinas..."})]})}):(0,He.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[x&&(0,He.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,He.jsx)("p",{className:"text-red-800 text-sm",children:x})}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:Ys,className:"mr-2 text-purple-500"}),"Disciplina *"]}),(0,He.jsxs)("select",{value:s.discipline,onChange:e=>{return t=e.target.value,i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{discipline:t,area:"",sub_area_id:""}))),void(t&&o[t]?(d(o[t].areas),h({})):(d({}),h({})));var t},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[(0,He.jsx)("option",{value:"",children:"Selecione uma disciplina"}),Object.keys(o).map((e=>(0,He.jsx)("option",{value:e,children:e},e)))]})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\xc1rea *"}),(0,He.jsxs)("select",{value:s.area,onChange:e=>{return t=e.target.value,i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{area:t,sub_area_id:""}))),void(t&&c[t]?h(c[t].sub_areas):h({}));var t},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:!s.discipline,required:!0,children:[(0,He.jsx)("option",{value:"",children:"Selecione uma \xe1rea"}),Object.keys(c).map((e=>(0,He.jsx)("option",{value:e,children:e},e)))]})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sub-\xe1rea *"}),(0,He.jsxs)("select",{value:Object.keys(u).find((e=>u[e].id===s.sub_area_id))||"",onChange:e=>(e=>{var t;const n=null===(t=u[e])||void 0===t?void 0:t.id;i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{sub_area_id:n})))})(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:!s.area,required:!0,children:[(0,He.jsx)("option",{value:"",children:"Selecione uma sub-\xe1rea"}),Object.keys(u).map((e=>(0,He.jsx)("option",{value:e,children:e},e)))]})]})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ui,className:"mr-2 text-purple-500"}),"Nome do Programa *"]}),(0,He.jsx)("input",{type:"text",value:s.name,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{name:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: Identifica\xe7\xe3o de Objetos",required:!0})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:lo,className:"mr-2 text-purple-500"}),"Tag/Slug *"]}),(0,He.jsx)("input",{type:"text",value:s.program_slug,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{program_slug:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: Mando, Tato, Ecoico",required:!0})]})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ws,className:"mr-2 text-purple-500"}),"Objetivo *"]}),(0,He.jsx)("textarea",{value:s.objective,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{objective:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:"3",placeholder:"Descreva o objetivo terap\xeautico deste programa...",required:!0})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ji,className:"mr-2 text-purple-500"}),"Habilidade ABA *"]}),(0,He.jsx)("input",{type:"text",value:s.skill,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{skill:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: Linguagem Receptiva, Habilidades Motoras",required:!0})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:fs,className:"mr-2 text-purple-500"}),"Materiais *"]}),(0,He.jsxs)("div",{className:"space-y-2",children:[s.materials.map(((e,t)=>(0,He.jsxs)("div",{className:"flex gap-2",children:[(0,He.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...s.materials];n[e]=t,i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:n})))})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Material ".concat(t+1)}),s.materials.length>1&&(0,He.jsx)("button",{type:"button",onClick:()=>(e=>{if(s.materials.length>1){const t=s.materials.filter(((t,n)=>n!==e));i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:t})))}})(t),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:(0,He.jsx)(Hr,{icon:Vi})})]},t))),(0,He.jsxs)("button",{type:"button",onClick:()=>{i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:[...e.materials,""]})))},className:"w-full py-2 text-purple-600 border-2 border-dashed border-purple-300 rounded-lg hover:border-purple-500 hover:bg-purple-50",children:[(0,He.jsx)(Hr,{icon:Wi,className:"mr-2"}),"Adicionar Material"]})]})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ss,className:"mr-2 text-purple-500"}),"Procedimentos *"]}),(0,He.jsxs)("div",{className:"space-y-3",children:[s.procedure.map(((e,t)=>(0,He.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,He.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,He.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:["Passo ",t+1]}),s.procedure.length>1&&(0,He.jsx)("button",{type:"button",onClick:()=>(e=>{if(s.procedure.length>1){const t=s.procedure.filter(((t,n)=>n!==e));i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:t})))}})(t),className:"text-red-600 hover:bg-red-50 p-1 rounded",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,He.jsx)("input",{type:"text",value:e.step,onChange:e=>y(t,"step",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Nome do passo"}),(0,He.jsx)("input",{type:"text",value:e.description,onChange:e=>y(t,"description",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Descri\xe7\xe3o do passo"})]})]},t))),(0,He.jsxs)("button",{type:"button",onClick:()=>{i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:[...e.procedure,{step:"",description:""}]})))},className:"w-full py-2 text-purple-600 border-2 border-dashed border-purple-300 rounded-lg hover:border-purple-500 hover:bg-purple-50",children:[(0,He.jsx)(Hr,{icon:Wi,className:"mr-2"}),"Adicionar Passo"]})]})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Crit\xe9rios para Avan\xe7o *"}),(0,He.jsx)("textarea",{value:s.criteria_for_advancement,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{criteria_for_advancement:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:"3",placeholder:"Ex: 80% de acertos em 3 sess\xf5es consecutivas",required:!0})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tentativas Padr\xe3o *"}),(0,He.jsx)("input",{type:"number",min:"1",max:"999",value:s.trials,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{trials:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),(0,He.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"N\xfamero padr\xe3o de tentativas por sess\xe3o"})]})]})]})}),!p&&(0,He.jsxs)("div",{className:"border-t border-gray-200 p-6 flex justify-end space-x-3 flex-shrink-0",children:[(0,He.jsx)("button",{type:"button",onClick:j,disabled:m,className:"px-6 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Cancelar"}),(0,He.jsx)("button",{onClick:w,disabled:m,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 flex items-center space-x-2",children:m?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin"}),(0,He.jsx)("span",{children:"Criando..."})]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:ri}),(0,He.jsx)("span",{children:"Criar Programa"})]})})]})]})})]}):null},ey=e=>{let{isOpen:t,onClose:n,onSuccess:r,program:s}=e;const[i,o]=(0,a.useState)({discipline:"",area:"",sub_area_id:"",name:"",objective:"",program_slug:"",skill:"",materials:[""],procedure:[{step:"",description:""}],criteria_for_advancement:"",trials:5}),[l,c]=(0,a.useState)({}),[d,u]=(0,a.useState)({}),[h,m]=(0,a.useState)({}),[f,p]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!0),[b,v]=(0,a.useState)(""),[y,w]=(0,a.useState)(!1);(0,a.useEffect)((()=>{t&&s&&(_(),j(),N())}),[t,s]);const j=()=>{if(s)try{const e="string"===typeof s.materials?JSON.parse(s.materials):s.materials||[""],t="string"===typeof s.procedure?JSON.parse(s.procedure):s.procedure||[{step:"",description:""}];o({discipline:"",area:"",sub_area_id:s.sub_area_id||"",name:s.name||"",objective:s.objective||"",program_slug:s.program_slug||"",skill:s.skill||"",materials:e.length>0?e:[""],procedure:t.length>0?t:[{step:"",description:""}],criteria_for_advancement:s.criteria_for_advancement||"",trials:s.trials||5})}catch(b){console.error("Erro ao parsear dados do programa:",b),v("Erro ao carregar dados do programa.")}},N=async()=>{w(!0)},_=async()=>{try{x(!0);const e=await(0,nt.uc)();c(e)}catch(b){console.error("Erro ao buscar hierarquia:",b),v("Erro ao carregar disciplinas. Tente novamente.")}finally{x(!1)}},S=(e,t,n)=>{const a=[...i.procedure];a[e]=(0,Ie.A)((0,Ie.A)({},a[e]),{},{[t]:n}),o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:a})))},k=async e=>{if(e.preventDefault(),i.name.trim()?i.objective.trim()?i.program_slug.trim()?i.skill.trim()?i.materials.every((e=>!e.trim()))?(v("Adicione pelo menos um material."),0):i.procedure.every((e=>!e.step.trim()&&!e.description.trim()))?(v("Adicione pelo menos um passo do procedimento."),0):i.criteria_for_advancement.trim()?!(!i.trials||i.trials<1||i.trials>999)||(v("N\xfamero de tentativas deve ser entre 1 e 999."),0):(v("Crit\xe9rios para avan\xe7o s\xe3o obrigat\xf3rios."),0):(v("Habilidade ABA \xe9 obrigat\xf3ria."),0):(v("Tag do programa \xe9 obrigat\xf3ria."),0):(v("Objetivo \xe9 obrigat\xf3rio."),0):(v("Nome do programa \xe9 obrigat\xf3rio."),0)){p(!0),v("");try{const e={name:i.name.trim(),objective:i.objective.trim(),program_slug:i.program_slug.trim(),skill:i.skill.trim(),materials:i.materials.filter((e=>e.trim())),procedure:i.procedure.filter((e=>e.step.trim()||e.description.trim())),criteria_for_advancement:i.criteria_for_advancement.trim(),trials:parseInt(i.trials)};await(0,nt.VU)(s.id,e),null===r||void 0===r||r(),n()}catch(b){var t,a;console.error("Erro ao atualizar programa:",b),v((null===(t=b.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||"Erro ao atualizar programa customizado.")}finally{p(!1)}}},C=()=>{f||(v(""),n())};return t&&s?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)("style",{children:"\n        .modal-scroll-content {\n          scrollbar-width: thin;\n          scrollbar-color: #cbd5e0 #f7fafc;\n        }\n        .modal-scroll-content::-webkit-scrollbar {\n          width: 8px;\n        }\n        .modal-scroll-content::-webkit-scrollbar-track {\n          background: #f7fafc;\n          border-radius: 4px;\n        }\n        .modal-scroll-content::-webkit-scrollbar-thumb {\n          background: #cbd5e0;\n          border-radius: 4px;\n        }\n        .modal-scroll-content::-webkit-scrollbar-thumb:hover {\n          background: #a0aec0;\n        }\n      "}),(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,He.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl h-[95vh] sm:h-[90vh] flex flex-col overflow-hidden",style:{maxHeight:window.innerHeight>600?"90vh":"95vh",minHeight:window.innerHeight>600?"500px":"300px",height:window.innerHeight>600?"90vh":"95vh"},children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 flex justify-between items-center",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:(0,He.jsx)(Hr,{icon:gs,className:"text-xl"})}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h2",{className:"text-xl font-bold",children:"Editar Programa Customizado"}),(0,He.jsx)("p",{className:"text-blue-100 text-sm",children:"Modifique os dados do programa"})]})]}),(0,He.jsx)("button",{onClick:C,disabled:f,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors disabled:opacity-50",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 modal-scroll-content",style:{minHeight:0,maxHeight:window.innerHeight>600?"calc(90vh - 140px)":"calc(95vh - 120px)",overflowY:"auto",WebkitOverflowScrolling:"touch"},children:[y&&(0,He.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,He.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,He.jsx)(Hr,{icon:go,className:"text-yellow-600 mt-1"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h3",{className:"font-semibold text-yellow-800",children:"Cuidado ao Editar"}),(0,He.jsx)("p",{className:"text-yellow-700 text-sm mt-1",children:"Altera\xe7\xf5es neste programa podem afetar:"}),(0,He.jsxs)("ul",{className:"text-yellow-700 text-sm mt-2 list-disc list-inside",children:[(0,He.jsx)("li",{children:"Relat\xf3rios existentes dos pacientes"}),(0,He.jsx)("li",{children:"Dados de progresso j\xe1 registrados"}),(0,He.jsx)("li",{children:"An\xe1lises e gr\xe1ficos hist\xf3ricos"})]}),(0,He.jsx)("p",{className:"text-yellow-700 text-sm mt-2 font-medium",children:"\u2139\ufe0f Os dados j\xe1 registrados ser\xe3o preservados, mas podem parecer inconsistentes."})]})]})}),g?(0,He.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-3xl text-blue-500 mb-4"}),(0,He.jsx)("p",{className:"text-gray-600",children:"Carregando dados..."})]})}):(0,He.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[b&&(0,He.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,He.jsx)("p",{className:"text-red-800 text-sm",children:b})}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ui,className:"mr-2 text-blue-500"}),"Nome do Programa *"]}),(0,He.jsx)("input",{type:"text",value:i.name,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{name:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Identifica\xe7\xe3o de Objetos",required:!0})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:lo,className:"mr-2 text-blue-500"}),"Tag/Slug *"]}),(0,He.jsx)("input",{type:"text",value:i.program_slug,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{program_slug:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Mando, Tato, Ecoico",required:!0})]})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ws,className:"mr-2 text-blue-500"}),"Objetivo *"]}),(0,He.jsx)("textarea",{value:i.objective,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{objective:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Descreva o objetivo terap\xeautico deste programa...",required:!0})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ji,className:"mr-2 text-blue-500"}),"Habilidade ABA *"]}),(0,He.jsx)("input",{type:"text",value:i.skill,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{skill:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Linguagem Receptiva, Habilidades Motoras",required:!0})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:fs,className:"mr-2 text-blue-500"}),"Materiais *"]}),(0,He.jsxs)("div",{className:"space-y-2",children:[i.materials.map(((e,t)=>(0,He.jsxs)("div",{className:"flex gap-2",children:[(0,He.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...i.materials];n[e]=t,o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:n})))})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Material ".concat(t+1)}),i.materials.length>1&&(0,He.jsx)("button",{type:"button",onClick:()=>(e=>{if(i.materials.length>1){const t=i.materials.filter(((t,n)=>n!==e));o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:t})))}})(t),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:(0,He.jsx)(Hr,{icon:Vi})})]},t))),(0,He.jsxs)("button",{type:"button",onClick:()=>{o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:[...e.materials,""]})))},className:"w-full py-2 text-blue-600 border-2 border-dashed border-blue-300 rounded-lg hover:border-blue-500 hover:bg-blue-50",children:[(0,He.jsx)(Hr,{icon:gs,className:"mr-2"}),"Adicionar Material"]})]})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ss,className:"mr-2 text-blue-500"}),"Procedimentos *"]}),(0,He.jsxs)("div",{className:"space-y-3",children:[i.procedure.map(((e,t)=>(0,He.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,He.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,He.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:["Passo ",t+1]}),i.procedure.length>1&&(0,He.jsx)("button",{type:"button",onClick:()=>(e=>{if(i.procedure.length>1){const t=i.procedure.filter(((t,n)=>n!==e));o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:t})))}})(t),className:"text-red-600 hover:bg-red-50 p-1 rounded",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,He.jsx)("input",{type:"text",value:e.step,onChange:e=>S(t,"step",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome do passo"}),(0,He.jsx)("input",{type:"text",value:e.description,onChange:e=>S(t,"description",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descri\xe7\xe3o do passo"})]})]},t))),(0,He.jsxs)("button",{type:"button",onClick:()=>{o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:[...e.procedure,{step:"",description:""}]})))},className:"w-full py-2 text-blue-600 border-2 border-dashed border-blue-300 rounded-lg hover:border-blue-500 hover:bg-blue-50",children:[(0,He.jsx)(Hr,{icon:gs,className:"mr-2"}),"Adicionar Passo"]})]})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Crit\xe9rios para Avan\xe7o *"}),(0,He.jsx)("textarea",{value:i.criteria_for_advancement,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{criteria_for_advancement:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Ex: 80% de acertos em 3 sess\xf5es consecutivas",required:!0})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tentativas Padr\xe3o *"}),(0,He.jsx)("input",{type:"number",min:"1",max:"999",value:i.trials,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{trials:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),(0,He.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"N\xfamero padr\xe3o de tentativas por sess\xe3o"})]})]})]})]}),!g&&(0,He.jsxs)("div",{className:"border-t border-gray-200 p-6 flex justify-end space-x-3 flex-shrink-0",children:[(0,He.jsx)("button",{type:"button",onClick:C,disabled:f,className:"px-6 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Cancelar"}),(0,He.jsx)("button",{onClick:k,disabled:f,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 flex items-center space-x-2",children:f?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin"}),(0,He.jsx)("span",{children:"Salvando..."})]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:ri}),(0,He.jsx)("span",{children:"Salvar Altera\xe7\xf5es"})]})})]})]})})]}):null},ty=e=>{let{onAssign:t,assigningId:n,assignedPrograms:r,isPatientSelected:s}=e;const{disciplines:i,isLoading:o,error:l,refreshPrograms:c}=ht(),{user:d}=Ge(),[u,h]=(0,a.useState)(null),[m,f]=(0,a.useState)("global"),[p,g]=(0,a.useState)({}),[x,b]=(0,a.useState)(!1),[v,y]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),[N,_]=(0,a.useState)(null),[S,k]=(0,a.useState)(null);(0,a.useEffect)((()=>{i&&Object.keys(i).length>0&&h(Object.keys(i)[0])}),[i]),(0,a.useEffect)((()=>{"custom"===m&&C()}),[m]);const C=async()=>{b(!0);try{const e=await(0,nt.rx)();g(e),Object.keys(e).length>0&&!u&&h(Object.keys(e)[0])}catch(l){console.error("Erro ao buscar programas customizados:",l)}finally{b(!1)}},A=e=>{_(e),j(!0)},P=e=>{k(e),C(),k(null)};if(o)return(0,He.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-4xl text-purple-500 mb-4"}),(0,He.jsx)("p",{className:"text-gray-600",children:"Carregando biblioteca de programas..."})]})});if(l)return(0,He.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-500 p-6 rounded-r-lg",children:(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)(Hr,{icon:go,className:"text-red-600 mt-1 mr-3"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{className:"text-red-800 font-medium mb-1",children:"Erro ao Carregar Programas"}),(0,He.jsx)("p",{className:"text-red-700 text-sm",children:l})]})]})});if(!i||0===Object.keys(i).length)return(0,He.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm p-8 text-center",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-gray-100 to-slate-100 p-6 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:Oi,className:"text-4xl text-gray-400"})}),(0,He.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Biblioteca Vazia"}),(0,He.jsx)("p",{className:"text-gray-500",children:"Nenhum programa encontrado na biblioteca."})]});const L="global"===m?i:p,E=u?L[u]:{},D=Object.keys(p).length>0,M=e=>({Fonoaudiologia:{bg:"from-blue-500 to-indigo-600",light:"from-blue-50 to-indigo-50",border:"border-blue-300",text:"text-blue-700"},Psicologia:{bg:"from-red-500 to-pink-600",light:"from-red-50 to-pink-50",border:"border-red-300",text:"text-red-700"},Musicoterapia:{bg:"from-purple-500 to-violet-600",light:"from-purple-50 to-violet-50",border:"border-purple-300",text:"text-purple-700"},TerapiaOcupacional:{bg:"from-orange-500 to-amber-600",light:"from-orange-50 to-amber-50",border:"border-orange-300",text:"text-orange-700"},Psicomotricidade:{bg:"from-green-500 to-emerald-600",light:"from-green-50 to-emerald-50",border:"border-green-300",text:"text-green-700"},Psicopedagogia:{bg:"from-yellow-500 to-orange-600",light:"from-yellow-50 to-orange-50",border:"border-yellow-300",text:"text-yellow-700"},"VB-MAPP":{bg:"from-teal-500 to-cyan-600",light:"from-teal-50 to-cyan-50",border:"border-teal-300",text:"text-teal-700"}}[e]||{bg:"from-gray-500 to-slate-600",light:"from-gray-50 to-slate-50",border:"border-gray-300",text:"text-gray-700"}),O=e=>e.replace(/([A-Z])/g," $1").trim();return(0,He.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[(0,He.jsx)("div",{className:"border-b border-gray-200",children:(0,He.jsxs)("div",{className:"flex",children:[(0,He.jsxs)("button",{className:"\n              flex-1 px-6 py-3 font-semibold text-sm transition-all duration-200 flex items-center justify-center space-x-2\n              ".concat("global"===m?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white":"bg-gray-50 text-gray-600 hover:bg-gray-100","\n            "),onClick:()=>f("global"),children:[(0,He.jsx)(Hr,{icon:_s}),(0,He.jsx)("span",{children:"Programas Globais"})]}),(0,He.jsxs)("button",{className:"\n              flex-1 px-6 py-3 font-semibold text-sm transition-all duration-200 flex items-center justify-center space-x-2\n              ".concat("custom"===m?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white":"bg-gray-50 text-gray-600 hover:bg-gray-100","\n            "),onClick:()=>f("custom"),children:[(0,He.jsx)(Hr,{icon:ao}),(0,He.jsx)("span",{children:"Programas da Cl\xednica"}),D&&(0,He.jsx)("span",{className:"bg-white bg-opacity-20 text-xs px-2 py-1 rounded-full",children:Object.values(p).reduce(((e,t)=>e+Object.values(t).reduce(((e,t)=>e+Object.values(t).reduce(((e,t)=>e+(Array.isArray(t)?t.length:0)),0)),0)),0)})]})]})}),"custom"===m&&(null===d||void 0===d?void 0:d.is_admin)&&(0,He.jsx)("div",{className:"border-b border-gray-200 p-4",children:(0,He.jsxs)("button",{onClick:()=>y(!0),className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-4 py-3 rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 flex items-center justify-center space-x-2 shadow-md",children:[(0,He.jsx)(Hr,{icon:Wi}),(0,He.jsx)("span",{children:"Criar Programa Customizado"})]})}),(0,He.jsx)("div",{className:"border-b border-gray-200",children:(0,He.jsx)("div",{className:"flex flex-wrap",children:Object.keys(L).map(((e,t)=>{const n=M(e),a=u===e;return(0,He.jsxs)("button",{className:"\n                  flex-1 min-w-0 px-6 py-4 font-semibold text-sm transition-all duration-200 relative\n                  ".concat(a?"bg-gradient-to-r ".concat(n.bg," text-white shadow-lg"):"bg-gradient-to-r ".concat(n.light," ").concat(n.text," hover:shadow-md"),"\n                "),onClick:()=>(e=>{h(e)})(e),children:[(0,He.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,He.jsx)(Hr,{icon:"custom"===m?ji:_o,className:"flex-shrink-0"}),(0,He.jsx)("span",{className:"truncate",children:O(e)}),"custom"===m&&(0,He.jsx)("span",{className:"bg-white bg-opacity-20 text-xs px-2 py-1 rounded-full",children:"Custom"})]}),a&&(0,He.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white bg-opacity-30 rounded-full"})]},e)}))})}),(0,He.jsx)("div",{className:"p-6",children:o||x?(0,He.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-4xl text-purple-500 mb-4"}),(0,He.jsx)("p",{className:"text-gray-600",children:"custom"===m?"Carregando programas customizados...":"Carregando biblioteca de programas..."})]})}):"custom"!==m||D?u&&Object.keys(E).length>0?(0,He.jsxs)("div",{className:"space-y-8",children:["global"===m&&(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Qv,{onProgramSelect:()=>{},onAssign:t,assigningId:n,assignedPrograms:r,isPatientSelected:s,disciplineName:u,disciplineDisplayName:O(u),disciplineColors:M(u)}),(0,He.jsx)("div",{className:"border-b border-gray-200 my-6"})]}),"custom"===m&&(0,He.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-4 mb-6",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)(Hr,{icon:ao,className:"text-purple-600"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h3",{className:"font-semibold text-purple-800",children:"Programas da Cl\xednica"}),(0,He.jsx)("p",{className:"text-sm text-purple-600",children:"Programas criados especificamente para sua cl\xednica"})]})]}),(null===d||void 0===d?void 0:d.is_admin)&&(0,He.jsxs)("button",{onClick:()=>y(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[(0,He.jsx)(Hr,{icon:Wi}),(0,He.jsx)("span",{children:"Novo"})]})]})}),Object.keys(E).map((e=>{const a=E[e],i=M(u);return(0,He.jsxs)("div",{className:"space-y-6",children:[(0,He.jsx)("div",{className:"bg-gradient-to-r ".concat(i.light," border-l-4 ").concat(i.border," p-4 rounded-r-lg"),children:(0,He.jsxs)("h3",{className:"text-xl font-bold ".concat(i.text," flex items-center"),children:[(0,He.jsx)(Hr,{icon:Ys,className:"mr-3"}),e]})}),Object.keys(a).map((i=>{const o=a[i],l=(null===o||void 0===o?void 0:o.length)||0;if(0===l)return null;const c=(null===o||void 0===o?void 0:o.filter((e=>Array.isArray(r)&&r.some((t=>t.program_id===e.id)))).length)||0;return(0,He.jsxs)("div",{className:"space-y-4",children:[i!==e&&(0,He.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 pb-3",children:[(0,He.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:i}),(0,He.jsxs)("div",{className:"flex space-x-4 text-sm",children:[(0,He.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full",children:[l," programa",1!==l?"s":""]}),c>0&&(0,He.jsxs)("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full",children:[c," atribu\xeddo",1!==c?"s":""]})]})]}),(0,He.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6",children:null===o||void 0===o?void 0:o.map((e=>{const a=Array.isArray(r)&&r.some((t=>t.program_id===e.id));return"custom"===m?(0,He.jsx)(Jv,{program:e,onEdit:A,onDelete:P,onAssign:t,isDeleting:S===e.id,hasAssignments:e.assignment_count>0,assignmentCount:e.assignment_count||0,progressCount:e.progress_count||0,userIsAdmin:(null===d||void 0===d?void 0:d.is_admin)||!1,isAssigned:a,isAssigning:n===e.id,isPatientSelected:s},e.id):(0,He.jsx)(Kv,{program:e,onAssign:t,isAssigned:a,isAssigning:n===e.id,isPatientSelected:s},e.id)}))})]},i)}))]},e)}))]}):(0,He.jsxs)("div",{className:"text-center py-12",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-gray-100 to-slate-100 p-6 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:Oi,className:"text-3xl text-gray-400"})}),(0,He.jsx)("p",{className:"text-gray-500 text-lg",children:"Selecione uma disciplina para explorar os programas"})]}):(0,He.jsxs)("div",{className:"text-center py-12",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-purple-100 to-indigo-100 p-6 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:ao,className:"text-4xl text-purple-400"})}),(0,He.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Nenhum Programa Customizado"}),(0,He.jsx)("p",{className:"text-gray-500 mb-6",children:"Sua cl\xednica ainda n\xe3o criou programas customizados."}),(null===d||void 0===d?void 0:d.is_admin)&&(0,He.jsxs)("button",{onClick:()=>y(!0),className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 flex items-center space-x-2 mx-auto",children:[(0,He.jsx)(Hr,{icon:Wi}),(0,He.jsx)("span",{children:"Criar Primeiro Programa"})]})]})}),(0,He.jsx)(Zv,{isOpen:v,onClose:()=>y(!1),onSuccess:()=>{C(),c()}}),(0,He.jsx)(ey,{isOpen:w,program:N,onClose:()=>{j(!1),_(null)},onSuccess:()=>{C(),j(!1),_(null)}})]})};if("undefined"!==typeof document&&!document.querySelector("#programs-page-styles")){const e=document.createElement("style");e.id="programs-page-styles",e.textContent="\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  .animate-fade-in {\n    animation: fadeIn 0.6s ease-out;\n  }\n",document.head.appendChild(e)}const ny=()=>{const{selectedPatient:e,refreshPatientData:t}=ct(),{isLoading:n,error:r}=ht(),{token:s}=Ge(),[i,o]=(0,a.useState)(null),[l,c]=(0,a.useState)("");return n?(0,He.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-purple-50 flex items-center justify-center",children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-purple-100 to-indigo-100 p-8 rounded-full w-32 h-32 mx-auto mb-8 flex items-center justify-center shadow-lg",children:(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-4xl text-purple-600"})}),(0,He.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Carregando Biblioteca"}),(0,He.jsx)("p",{className:"text-gray-600",children:"Preparando os programas de interven\xe7\xe3o..."})]})}):r?(0,He.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-red-50 flex items-center justify-center p-8",children:(0,He.jsxs)("div",{className:"bg-white border border-red-200 rounded-xl shadow-sm overflow-hidden max-w-lg w-full",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 px-6 py-4",children:[(0,He.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center",children:[(0,He.jsx)(Hr,{icon:go,className:"mr-3"}),"Erro ao Carregar"]}),(0,He.jsx)("p",{className:"text-red-100 text-sm mt-1",children:"N\xe3o foi poss\xedvel acessar a biblioteca de programas"})]}),(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsx)("p",{className:"text-red-800 mb-4",children:r||"N\xe3o foi poss\xedvel carregar os programas."}),(0,He.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Tentar Novamente"})]})]})}):(0,He.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-purple-50",children:(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsx)("div",{className:"animate-fade-in mb-8",children:(0,He.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[(0,He.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-700 px-8 py-6",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center",children:[(0,He.jsx)(Hr,{icon:ho,className:"mr-4"}),"Biblioteca de Programas"]}),(0,He.jsx)("p",{className:"text-purple-100 text-lg mt-2",children:"Explore e atribua programas de interven\xe7\xe3o especializados"})]}),e&&(0,He.jsxs)("div",{className:"bg-white bg-opacity-20 rounded-lg p-4 text-center",children:[(0,He.jsx)(Hr,{icon:Bi,className:"text-white text-2xl mb-2"}),(0,He.jsx)("p",{className:"text-white text-sm font-medium",children:e.name}),(0,He.jsx)("p",{className:"text-purple-100 text-xs",children:"Cliente selecionado"})]})]})}),(0,He.jsxs)("div",{className:"p-6",children:[l&&(0,He.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-500 p-4 mb-4 rounded-r-lg",children:(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)(Hr,{icon:go,className:"text-red-600 mt-1 mr-3"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{className:"text-red-800 font-medium mb-1",children:"Erro na Opera\xe7\xe3o"}),(0,He.jsx)("p",{className:"text-red-700 text-sm",children:l})]})]})}),!e&&(0,He.jsx)("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border-l-4 border-amber-400 p-4 rounded-r-lg",children:(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)(Hr,{icon:gi,className:"text-amber-600 mt-1 mr-3"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{className:"text-amber-800 font-medium mb-1",children:"\ud83d\udc65 Selecione um Cliente"}),(0,He.jsx)("p",{className:"text-amber-700 text-sm leading-relaxed",children:"Para visualizar os programas e realizar atribui\xe7\xf5es, \xe9 necess\xe1rio primeiro selecionar um cliente na barra lateral."})]})]})})]})]})}),(0,He.jsx)("div",{className:"animate-fade-in",children:e?(0,He.jsx)(ty,{onAssign:async n=>{if(e)if(s){o(n),c("");try{await st(e.id,n,s),t&&await t(e.id)}catch(a){console.error("Falha ao atribuir programa:",a),c(a.message||"Ocorreu um erro ao atribuir o programa.")}finally{o(null)}}else c("Erro de autentica\xe7\xe3o. Por favor, fa\xe7a login novamente.");else c("Nenhum cliente selecionado para atribuir o programa.")},isPatientSelected:!!e,assigningId:i,assignedPrograms:e.assigned_programs||[]}):(0,He.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:(0,He.jsx)("div",{className:"flex items-center justify-center h-96 text-center p-8",children:(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 p-8 rounded-full w-32 h-32 mx-auto mb-8 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:ho,className:"text-5xl text-indigo-600"})}),(0,He.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Biblioteca Pronta para Uso"}),(0,He.jsx)("p",{className:"text-gray-600 leading-relaxed max-w-md mx-auto mb-6",children:"Nossa biblioteca cont\xe9m centenas de programas organizados por disciplinas e \xe1reas de interven\xe7\xe3o. Selecione um cliente para come\xe7ar a explorar."}),(0,He.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-dashed border-indigo-300 rounded-lg p-4 max-w-sm mx-auto",children:(0,He.jsxs)("div",{className:"flex items-center justify-center space-x-3 text-indigo-600",children:[(0,He.jsx)("div",{className:"w-3 h-3 bg-indigo-500 rounded-full animate-pulse"}),(0,He.jsx)("span",{className:"font-medium",children:"Aguardando sele\xe7\xe3o de cliente"})]})})]})})})})]})})};if("undefined"!==typeof document&&!document.querySelector("#notes-page-styles")){const e=document.createElement("style");e.id="notes-page-styles",e.textContent="\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  .animate-fade-in {\n    animation: fadeIn 0.6s ease-out;\n  }\n",document.head.appendChild(e)}const ay=()=>{const{selectedPatient:e,saveNotes:t}=ct(),[n,r]=(0,a.useState)(""),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)(""),[u,h]=(0,a.useState)(null);(0,a.useEffect)((()=>{if(e){const t=e.general_notes||"";r(t)}else r("");l(!1),d(""),h(null)}),[e]);return(0,He.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-indigo-50",children:(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsx)("div",{className:"animate-fade-in mb-8",children:(0,He.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:(0,He.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-700 px-8 py-6",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center",children:[(0,He.jsx)(Hr,{icon:as,className:"mr-4"}),"Anota\xe7\xf5es Gerais"]}),(0,He.jsx)("p",{className:"text-indigo-100 text-lg mt-2",children:"Registre observa\xe7\xf5es, progresso e informa\xe7\xf5es importantes"})]}),e&&(0,He.jsxs)("div",{className:"bg-white bg-opacity-20 rounded-lg p-4 text-center",children:[(0,He.jsx)(Hr,{icon:Bi,className:"text-white text-2xl mb-2"}),(0,He.jsx)("p",{className:"text-white text-sm font-medium",children:e.name}),(0,He.jsx)("p",{className:"text-indigo-100 text-xs",children:"Cliente selecionado"})]})]})})})}),(0,He.jsx)("div",{className:"animate-fade-in",children:e?(0,He.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[(0,He.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-indigo-200 px-6 py-4",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,He.jsx)("div",{className:"bg-indigo-100 p-2 rounded-full",children:(0,He.jsx)(Hr,{icon:Jr,className:"text-indigo-600"})}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:["Anota\xe7\xf5es para ",e.name]}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:"Documente informa\xe7\xf5es relevantes sobre o cliente"})]})]}),(0,He.jsx)("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:u&&(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)(Hr,{icon:Ni,className:"text-green-500"}),(0,He.jsxs)("span",{className:"text-green-600",children:["Salvo em ",(m=u,m?m.toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"")]})]})})]})}),(0,He.jsxs)("div",{className:"p-6",children:[c&&(0,He.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-500 p-4 mb-6 rounded-r-lg",children:(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)(Hr,{icon:go,className:"text-red-600 mt-1 mr-3"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{className:"text-red-800 font-medium mb-1",children:"Erro ao Salvar"}),(0,He.jsx)("p",{className:"text-red-700 text-sm",children:c})]})]})}),o&&(0,He.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-500 p-4 mb-6 rounded-r-lg",children:(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)(Hr,{icon:fo,className:"text-green-600 mt-1 mr-3"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{className:"text-green-800 font-medium mb-1",children:"Anota\xe7\xf5es Salvas"}),(0,He.jsx)("p",{className:"text-green-700 text-sm",children:"As informa\xe7\xf5es foram salvas com sucesso"})]})]})}),(0,He.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-lg",children:(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)(Hr,{icon:gi,className:"text-blue-600 mt-1 mr-3"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{className:"text-blue-800 font-medium mb-1",children:"\ud83d\udcdd Dicas para Anota\xe7\xf5es Eficazes"}),(0,He.jsxs)("ul",{className:"text-blue-700 text-sm space-y-1",children:[(0,He.jsx)("li",{children:"\u2022 Registre comportamentos observados e padr\xf5es identificados"}),(0,He.jsx)("li",{children:"\u2022 Documente progress\xf5es, regress\xf5es e marcos importantes"}),(0,He.jsx)("li",{children:"\u2022 Inclua informa\xe7\xf5es sobre resposta aos programas de interven\xe7\xe3o"}),(0,He.jsx)("li",{children:"\u2022 Anote considera\xe7\xf5es para planejamento futuro"})]})]})]})}),(0,He.jsx)("div",{className:"border-2 border-gray-200 rounded-lg focus-within:border-amber-400 focus-within:ring-4 focus-within:ring-amber-100 transition-all",children:(0,He.jsx)("textarea",{id:"notes-textarea",placeholder:"Comece a escrever suas anota\xe7\xf5es sobre o cliente aqui... Exemplos do que incluir:\n\u2022 Observa\xe7\xf5es comportamentais\n\u2022 Resposta aos programas de interven\xe7\xe3o\n\u2022 Intera\xe7\xf5es sociais e comunicativas\n\u2022 Marcos e progress\xf5es importantes\n\u2022 Desafios identificados\n\u2022 Recomenda\xe7\xf5es para sess\xf5es futuras",rows:"20",value:n,onChange:e=>r(e.target.value),className:"w-full px-6 py-4 border-none rounded-lg resize-vertical text-base leading-relaxed focus:outline-none placeholder:text-gray-400 placeholder:text-sm"})}),(0,He.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)(Hr,{icon:Zr,className:"text-amber-500"}),(0,He.jsx)("span",{children:"Editado hoje"})]}),(0,He.jsx)("div",{className:"w-px h-4 bg-gray-300"}),(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(n!==(e.general_notes||"")?"bg-yellow-500 animate-pulse":"bg-green-500")}),(0,He.jsx)("span",{children:n!==(e.general_notes||"")?"Altera\xe7\xf5es n\xe3o salvas":"Tudo salvo"})]})]}),(0,He.jsxs)("button",{onClick:async()=>{if(e){i(!0),l(!1),d("");try{await t(n),l(!0),h(new Date),setTimeout((()=>l(!1)),3e3)}catch(yj){d(yj.message||"Ocorreu um erro ao guardar as anota\xe7\xf5es.")}finally{i(!1)}}else d("Nenhum cliente selecionado.")},disabled:s||!e||n===(e.general_notes||""),className:"\n                      font-semibold py-3 px-8 rounded-lg text-sm transition-all duration-200 flex items-center justify-center min-w-[160px] shadow-sm transform hover:scale-105 disabled:hover:scale-100\n                      ".concat(o?"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white shadow-green-200":"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white shadow-indigo-200 disabled:from-gray-300 disabled:to-gray-400 disabled:shadow-gray-200","\n                    "),children:[(0,He.jsx)("div",{className:"bg-white bg-opacity-20 p-1 rounded-full mr-3",children:(0,He.jsx)(Hr,{icon:s?Zi:o?fo:ri,className:"text-sm ".concat(s&&"fa-spin")})}),s?"Salvando...":o?"Salvo com Sucesso!":"Salvar Anota\xe7\xf5es"]})]})]})]}):(0,He.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:(0,He.jsx)("div",{className:"flex items-center justify-center h-96 text-center p-8",children:(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 p-8 rounded-full w-32 h-32 mx-auto mb-8 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:as,className:"text-5xl text-indigo-600"})}),(0,He.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Editor de Anota\xe7\xf5es"}),(0,He.jsx)("p",{className:"text-gray-600 leading-relaxed max-w-md mx-auto mb-6",children:"Selecione um cliente na barra lateral para come\xe7ar a registrar anota\xe7\xf5es importantes sobre seu progresso e desenvolvimento."}),(0,He.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-dashed border-indigo-300 rounded-lg p-4 max-w-sm mx-auto",children:(0,He.jsxs)("div",{className:"flex items-center justify-center space-x-3 text-indigo-600",children:[(0,He.jsx)("div",{className:"w-3 h-3 bg-indigo-500 rounded-full animate-pulse"}),(0,He.jsx)("span",{className:"font-medium",children:"Aguardando sele\xe7\xe3o de cliente"})]})})]})})})})]})});var m};wm.register(Gf,Jf,Fm,Rm,kf,Wf,_f,yf,Ev);const ry=e=>{let{title:t,value:n,icon:a,colorClass:r,interpretation:s}=e;const i=s?(e=>{switch(e){case"good":return{bg:"bg-green-100",border:"border-green-200",icon:Fs,color:"text-green-600"};case"attention":return{bg:"bg-yellow-100",border:"border-yellow-200",icon:go,color:"text-yellow-600"};case"critical":return{bg:"bg-red-100",border:"border-red-200",icon:go,color:"text-red-600"};default:return{bg:"bg-gray-100",border:"border-gray-200",icon:gi,color:"text-gray-600"}}})(s):null;return(0,He.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border ".concat(i?i.border:"border-gray-200"," flex items-start space-x-4 relative"),children:[(0,He.jsx)("div",{className:"text-xl p-3 rounded-full ".concat(r.bg," ").concat(r.text),children:(0,He.jsx)(Hr,{icon:a,className:"fa-fw"})}),(0,He.jsxs)("div",{className:"flex-1",children:[(0,He.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:t}),(0,He.jsx)("p",{className:"text-3xl font-semibold ".concat(r.text),children:n})]}),i&&(0,He.jsx)("div",{className:"absolute top-2 right-2 w-6 h-6 rounded-full ".concat(i.bg," flex items-center justify-center"),children:(0,He.jsx)(Hr,{icon:i.icon,className:"text-xs ".concat(i.color)})})]})},sy=()=>(0,He.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm mb-8 overflow-hidden",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 px-6 py-4",children:[(0,He.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center",children:[(0,He.jsx)(Hr,{icon:gi,className:"mr-3"}),"Guia de M\xe9tricas ABA"]}),(0,He.jsx)("p",{className:"text-blue-100 text-sm mt-1",children:"Compreenda os indicadores e interpreta\xe7\xf5es utilizados"})]}),(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsxs)("div",{className:"mb-8",children:[(0,He.jsxs)("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),(0,He.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udcca Defini\xe7\xf5es das M\xe9tricas"})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border-l-4 border-blue-500",children:[(0,He.jsxs)("h5",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,He.jsx)("span",{className:"text-blue-600 mr-2",children:"\ud83d\udcca"})," Progresso M\xe9dio"]}),(0,He.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"M\xe9dia de todas as sess\xf5es de interven\xe7\xe3o no per\xedodo selecionado."}),(0,He.jsx)("div",{className:"mt-2 text-xs text-blue-700 bg-blue-100 px-2 py-1 rounded-full inline-block",children:"Meta: \u226570%"})]}),(0,He.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border-l-4 border-purple-500",children:[(0,He.jsxs)("h5",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,He.jsx)("span",{className:"text-purple-600 mr-2",children:"\ud83c\udfaf"})," Taxa de Aquisi\xe7\xe3o"]}),(0,He.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"Percentual de programas que atingiram crit\xe9rio (\u226580%) recentemente."}),(0,He.jsx)("div",{className:"mt-2 text-xs text-purple-700 bg-purple-100 px-2 py-1 rounded-full inline-block",children:"Meta: \u226530%"})]}),(0,He.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-4 rounded-lg border-l-4 border-amber-500",children:[(0,He.jsxs)("h5",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,He.jsx)("span",{className:"text-amber-600 mr-2",children:"\u23f1\ufe0f"})," Frequ\xeancia Semanal"]}),(0,He.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"N\xfamero de dias \xfanicos com sess\xf5es por semana em m\xe9dia."}),(0,He.jsx)("div",{className:"mt-2 text-xs text-amber-700 bg-amber-100 px-2 py-1 rounded-full inline-block",children:"Ideal ABA: 3-5 dias/semana"})]}),(0,He.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border-l-4 border-green-500",children:[(0,He.jsxs)("h5",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,He.jsx)("span",{className:"text-green-600 mr-2",children:"\ud83d\udcc8"})," Estabilidade"]}),(0,He.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"Consist\xeancia da performance (0-100). Alta estabilidade indica manuten\xe7\xe3o."}),(0,He.jsx)("div",{className:"mt-2 text-xs text-green-700 bg-green-100 px-2 py-1 rounded-full inline-block",children:"Alta: \u226580%"})]}),(0,He.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 p-4 rounded-lg border-l-4 border-emerald-500",children:[(0,He.jsxs)("h5",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,He.jsx)("span",{className:"text-emerald-600 mr-2",children:"\ud83c\udfc6"})," Programas na Meta"]}),(0,He.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"Quantidade de programas que atingiram \u226580% de desempenho m\xe9dio."}),(0,He.jsx)("div",{className:"mt-2 text-xs text-emerald-700 bg-emerald-100 px-2 py-1 rounded-full inline-block",children:"Objetivo: Maioria"})]}),(0,He.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 p-4 rounded-lg border-l-4 border-indigo-500",children:[(0,He.jsxs)("h5",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,He.jsx)("span",{className:"text-indigo-600 mr-2",children:"\ud83d\udcc5"})," Dias at\xe9 Crit\xe9rio"]}),(0,He.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"Tempo m\xe9dio para dominar habilidades. Varia por complexidade da tarefa."}),(0,He.jsx)("div",{className:"mt-2 text-xs text-indigo-700 bg-indigo-100 px-2 py-1 rounded-full inline-block",children:"Vari\xe1vel"})]})]})]}),(0,He.jsxs)("div",{className:"mb-6",children:[(0,He.jsxs)("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),(0,He.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"\ud83c\udfa8 Sistema de Interpreta\xe7\xe3o"})]}),(0,He.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-lg",children:[(0,He.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Os indicadores visuais nas m\xe9tricas seguem este sistema de cores:"}),(0,He.jsxs)("div",{className:"flex flex-wrap gap-6",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3 bg-white px-4 py-2 rounded-lg shadow-sm",children:[(0,He.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full shadow-sm"}),(0,He.jsx)("span",{className:"text-green-700 font-medium",children:"Bom desempenho"}),(0,He.jsx)("span",{className:"text-gray-500 text-sm",children:"- Dentro das metas"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-3 bg-white px-4 py-2 rounded-lg shadow-sm",children:[(0,He.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded-full shadow-sm"}),(0,He.jsx)("span",{className:"text-yellow-700 font-medium",children:"Requer aten\xe7\xe3o"}),(0,He.jsx)("span",{className:"text-gray-500 text-sm",children:"- Monitoramento necess\xe1rio"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-3 bg-white px-4 py-2 rounded-lg shadow-sm",children:[(0,He.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded-full shadow-sm"}),(0,He.jsx)("span",{className:"text-red-700 font-medium",children:"Cr\xedtico"}),(0,He.jsx)("span",{className:"text-gray-500 text-sm",children:"- A\xe7\xe3o imediata necess\xe1ria"})]})]})]})]}),(0,He.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-lg",children:(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)(Hr,{icon:us,className:"text-blue-600 mt-1 mr-3"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{className:"text-blue-800 font-medium mb-1",children:"Dica Profissional"}),(0,He.jsx)("p",{className:"text-blue-700 text-sm leading-relaxed",children:"Use estas m\xe9tricas em conjunto para uma an\xe1lise completa do progresso. M\xe9tricas isoladas podem n\xe3o refletir o quadro completo do desenvolvimento."})]})]})})]})]}),iy=e=>{let{recommendations:t,regressionAlerts:n}=e;return 0===t.length&&0===n?null:(0,He.jsxs)("div",{className:"bg-white border border-orange-200 rounded-xl shadow-sm mb-8 overflow-hidden",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 px-6 py-4",children:[(0,He.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center",children:[(0,He.jsx)(Hr,{icon:us,className:"mr-3"}),"Recomenda\xe7\xf5es Cl\xednicas"]}),(0,He.jsx)("p",{className:"text-orange-100 text-sm mt-1",children:"Sugest\xf5es baseadas na an\xe1lise dos dados"})]}),(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsxs)("div",{className:"space-y-4",children:[n>0&&(0,He.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-500 p-4 rounded-r-lg",children:(0,He.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,He.jsx)("div",{className:"bg-red-100 p-2 rounded-full",children:(0,He.jsx)(Hr,{icon:go,className:"text-red-600"})}),(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{className:"font-semibold text-red-800 mb-1",children:"\u26a0\ufe0f Alerta de Regress\xe3o"}),(0,He.jsxs)("p",{className:"text-red-700 text-sm",children:[n," programa",n>1?"s apresentam":" apresenta"," decl\xednio na performance. Revis\xe3o imediata recomendada."]})]})]})}),t.length>0&&(0,He.jsx)("div",{className:"space-y-3",children:t.map(((e,t)=>(0,He.jsx)("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border-l-4 border-amber-400 p-4 rounded-r-lg",children:(0,He.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,He.jsx)("div",{className:"bg-amber-100 p-2 rounded-full flex-shrink-0",children:(0,He.jsx)(Hr,{icon:us,className:"text-amber-600"})}),(0,He.jsx)("div",{className:"min-w-0 flex-1",children:(0,He.jsx)("p",{className:"text-gray-800 text-sm leading-relaxed",children:e})})]})},t)))})]}),(t.length>0||n>0)&&(0,He.jsx)("div",{className:"mt-6 bg-orange-50 border border-orange-200 p-4 rounded-lg",children:(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)(Hr,{icon:gi,className:"text-orange-600 mt-1 mr-3"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("p",{className:"text-orange-800 font-medium mb-1",children:"\ud83d\udca1 Dica"}),(0,He.jsx)("p",{className:"text-orange-700 text-sm leading-relaxed",children:"Estas recomenda\xe7\xf5es s\xe3o geradas automaticamente com base nas m\xe9tricas atuais. Considere o contexto cl\xednico individual ao implementar mudan\xe7as."})]})]})})]})]})},oy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long";if(!e)return"N/A";const n=new Date(e);if(isNaN(n.getTime()))return"Data inv\xe1lida";const a=6e4*n.getTimezoneOffset(),r=new Date(n.getTime()+a),s={day:"2-digit",month:"2-digit",year:"numeric"};return"short"===t?r.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}):("datetime"===t&&(s.hour="2-digit",s.minute="2-digit"),r.toLocaleDateString("pt-BR",s))},ly=e=>{let{sessionData:t,activePrograms:n,analytics:a}=e;const r=(()=>{if(!t||0===t.length||!n||0===n.length)return[];const e={};n.forEach((t=>{const n=t.discipline_name||"Outros";e[n]||(e[n]={name:n,programIds:new Set,sessions:[],totalScore:0,sessionCount:0}),e[n].programIds.add(t.program_id)}));const a=t.filter((e=>!e.is_baseline));return a.forEach((t=>{Object.values(e).forEach((e=>{e.programIds.has(t.program_id)&&(e.sessions.push(t),e.totalScore+=t.score,e.sessionCount+=1)}))})),Object.values(e).filter((e=>e.sessionCount>0)).map((e=>{const t=e.totalScore/e.sessionCount,n=e.sessions;let a="stable";if(n.length>=6){const e=n.slice(0,Math.floor(n.length/2)),t=n.slice(Math.floor(n.length/2)),r=e.reduce(((e,t)=>e+t.score),0)/e.length,s=t.reduce(((e,t)=>e+t.score),0)/t.length,i=s-r;i>5?a="improving":i<-5&&(a="declining")}return{name:e.name,average:Math.round(10*t)/10,sessionCount:e.sessionCount,trend:a,programCount:e.programIds.size}})).sort(((e,t)=>t.average-e.average))})();if(0===r.length)return(0,He.jsx)("div",{className:"flex items-center justify-center h-full text-center text-gray-400 bg-gray-50 rounded-lg p-6",children:(0,He.jsxs)("div",{children:[(0,He.jsx)(Hr,{icon:Qs,className:"text-4xl mb-3"}),(0,He.jsx)("p",{children:"N\xe3o h\xe1 dados suficientes no per\xedodo selecionado para gerar o resumo por disciplina."})]})});return(0,He.jsxs)("div",{className:"space-y-4",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-indigo-50 to-blue-50 rounded-lg border border-indigo-200",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("h3",{className:"font-semibold text-gray-800",children:"Resumo Geral"}),(0,He.jsxs)("p",{className:"text-sm text-gray-600",children:[r.length," disciplina",1!==r.length?"s":""," \u2022 "," ","M\xe9dia geral: ",Math.round(r.reduce(((e,t)=>e+t.average),0)/r.length*10)/10,"%"]})]}),(0,He.jsxs)("div",{className:"text-right",children:[(0,He.jsxs)("div",{className:"text-2xl font-bold text-indigo-600",children:[a.overallAverage,"%"]}),(0,He.jsx)("div",{className:"text-xs text-gray-500",children:"Progresso m\xe9dio geral"})]})]}),(0,He.jsx)("div",{className:"space-y-3",children:r.map((e=>{const t={Fonoaudiologia:{bg:"bg-blue-500",light:"bg-blue-100",text:"text-blue-600"},Psicologia:{bg:"bg-red-500",light:"bg-red-100",text:"text-red-600"},Musicoterapia:{bg:"bg-purple-500",light:"bg-purple-100",text:"text-purple-600"},TerapiaOcupacional:{bg:"bg-orange-500",light:"bg-orange-100",text:"text-orange-600"},Psicomotricidade:{bg:"bg-green-500",light:"bg-green-100",text:"text-green-600"},Psicopedagogia:{bg:"bg-yellow-500",light:"bg-yellow-100",text:"text-yellow-600"}}[e.name]||{bg:"bg-gray-500",light:"bg-gray-100",text:"text-gray-600"};const n=(e=>{switch(e){case"improving":return{icon:"\ud83d\udcc8",color:"text-green-600",text:"Melhorando"};case"declining":return{icon:"\ud83d\udcc9",color:"text-red-600",text:"Em queda"};default:return{icon:"\u27a1\ufe0f",color:"text-gray-600",text:"Est\xe1vel"}}})(e.trend),a=Math.min(e.average,100);return(0,He.jsxs)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg hover:shadow-md transition-shadow",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)("div",{className:"w-4 h-4 rounded ".concat(t.bg)}),(0,He.jsx)("h4",{className:"font-medium text-gray-800",children:e.name}),(0,He.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(t.light," ").concat(t.text),children:[e.programCount," programa",1!==e.programCount?"s":""]})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsxs)("span",{className:"text-sm ".concat(n.color," flex items-center space-x-1"),children:[(0,He.jsx)("span",{children:n.icon}),(0,He.jsx)("span",{children:n.text})]}),(0,He.jsxs)("div",{className:"text-right",children:[(0,He.jsxs)("div",{className:"text-xl font-bold text-gray-800",children:[e.average,"%"]}),(0,He.jsxs)("div",{className:"text-xs text-gray-500",children:[e.sessionCount," sess\xf5es"]})]})]})]}),(0,He.jsxs)("div",{className:"relative",children:[(0,He.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,He.jsx)("div",{className:"h-3 rounded-full transition-all duration-500 ".concat(t.bg),style:{width:"".concat(a,"%")}})}),(0,He.jsx)("div",{className:"absolute top-0 h-3 w-0.5 bg-green-600",style:{left:"80%"},title:"Meta: 80%"})]})]},e.name)}))}),(0,He.jsxs)("div",{className:"text-xs text-gray-500 p-3 bg-gray-50 rounded-lg",children:["\ud83d\udca1 ",(0,He.jsx)("strong",{children:"Dica:"})," A linha verde nas barras indica a meta de 80%. Tend\xeancias s\xe3o calculadas comparando primeira e segunda metade das sess\xf5es."]})]})},cy=e=>{let{activePrograms:t,sessionData:n}=e;const{user:a}=Ge();if(!t||0===t.length)return null;const r={};t.forEach((e=>{const t=e.discipline_name||"Outros";r[t]||(r[t]=[]),r[t].push(e)}));const s=Object.keys(r).sort(),i=e=>{let{program:t}=e;const r=(n||[]).filter((e=>e.program_id===t.program_id));if(0===r.length)return(0,He.jsx)("div",{className:"flex items-center justify-center h-48 text-center bg-gradient-to-br from-gray-50 to-slate-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-gray-100 to-slate-100 p-4 rounded-full w-16 h-16 mx-auto mb-3 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:Qs,className:"text-2xl text-gray-400"})}),(0,He.jsx)("p",{className:"text-xs text-gray-500",children:"Sem dados neste per\xedodo"})]})});const s={labels:r.map((e=>oy(e.session_date,"short"))),datasets:[{data:r.map((e=>e.score)),borderColor:"#4f46e5",backgroundColor:e=>{const t=e.chart,{ctx:n,chartArea:a}=t;if(!a)return"rgba(79, 70, 229, 0.1)";const r=n.createLinearGradient(0,a.top,0,a.bottom);return r.addColorStop(0,"rgba(99, 102, 241, 0.2)"),r.addColorStop(.5,"rgba(79, 70, 229, 0.15)"),r.addColorStop(1,"rgba(67, 56, 202, 0.05)"),r},borderWidth:2.5,pointRadius:r.map((e=>e.is_baseline?6:5)),pointBackgroundColor:r.map((e=>{var t;return e.is_baseline?"#f59e0b":null!==(t=e.details)&&void 0!==t&&t.promptLevelColor?e.details.promptLevelColor:"#4f46e5"})),pointBorderColor:r.map((e=>e.is_baseline?"#f59e0b":"#ffffff")),pointBorderWidth:r.map((e=>e.is_baseline?3:2)),pointStyle:r.map((e=>e.is_baseline?"star":"circle")),pointHoverRadius:8,pointHoverBorderWidth:3,fill:!0,tension:.35,shadowColor:"rgba(79, 70, 229, 0.2)",shadowBlur:8,shadowOffsetX:0,shadowOffsetY:3}]},i={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{y:{display:!0,min:0,max:105,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{font:{size:9,weight:500},color:"#6b7280",callback:e=>e+"%"},border:{display:!1}},x:{display:!0,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{font:{size:9,weight:500},color:"#6b7280"},border:{display:!1}}},plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#e5e7eb",borderColor:"#4f46e5",borderWidth:2,padding:12,cornerRadius:8,displayColors:!1,titleFont:{size:12,weight:"bold"},bodyFont:{size:11},callbacks:{title:e=>{if(!e||!e[0]||void 0===e[0].dataIndex)return"Sess\xe3o";const t=r[e[0].dataIndex],n=null===t||void 0===t?void 0:t.is_baseline,a=oy(t.session_date);let s="Sess\xe3o de ".concat(a);return s=n?"\ud83d\udccb [BASELINE] ".concat(s):"\ud83d\udcc8 ".concat(s),s},label:e=>{const t=e.parsed.y.toFixed(1);return"\ud83c\udfaf Pontua\xe7\xe3o: ".concat(t,"%")},afterLabel:e=>{var t;if(!e||void 0===e.dataIndex)return"";const n=e.dataIndex,a=r[n];0===n&&(console.log("Dashboard data - attempts:",null===a||void 0===a?void 0:a.attempts),console.log("Dashboard data - successes:",null===a||void 0===a?void 0:a.successes),console.log("Dashboard data - created_at:",null===a||void 0===a?void 0:a.created_at),console.log("Dashboard data - therapist_name:",null===a||void 0===a?void 0:a.therapist_name),console.log("Dashboard data - FULL OBJECT:",JSON.stringify(a,null,2)));const s=(null===a||void 0===a?void 0:a.attempts)||0,i=(null===a||void 0===a?void 0:a.successes)||0;let o=["\ud83d\udcca Acertos: ".concat(i,"/").concat(s)];return null!==a&&void 0!==a&&null!==(t=a.details)&&void 0!==t&&t.promptLevelName&&o.push("\ud83c\udfaf N\xedvel: ".concat(a.details.promptLevelName)),a&&a.therapist_name&&""!==a.therapist_name.trim()?o.push("\ud83d\udc68\u200d\u2695\ufe0f Terapeuta: ".concat(a.therapist_name)):a&&a.therapist_id&&null!==a.therapist_id&&o.push("\ud83d\udc68\u200d\u2695\ufe0f Terapeuta ID: ".concat(a.therapist_id)),o},afterBody:e=>{if(!e||!e[0]||void 0===e[0].dataIndex)return"";const t=r[e[0].dataIndex];let n=[];if(null!==t&&void 0!==t&&t.notes&&(n.push("\n\ud83d\udcdd Observa\xe7\xf5es:"),n.push("".concat(t.notes))),e[0].dataIndex,a&&("therapist"===a.role||"terapeuta"===a.role||"admin"===a.role||"administrador"===a.role)&&null!==t&&void 0!==t&&t.created_at){const e=new Date(t.created_at).toLocaleString("pt-BR");n.push("\n\ud83d\udcc5 Registrado: ".concat(e))}return n}}},annotation:{annotations:{goalLine:{type:"line",yMin:80,yMax:80,borderColor:"#10b981",borderWidth:2,borderDash:[6,6],label:{content:"\ud83c\udfaf Meta (80%)",enabled:!0,position:"end",backgroundColor:"rgba(16, 185, 129, 0.9)",font:{size:9,weight:"bold"},color:"white",padding:4,borderRadius:4,yAdjust:-8}}}}}};return(0,He.jsxs)("div",{className:"w-full",children:[(0,He.jsx)("div",{className:"h-48 w-full",children:(0,He.jsx)(Dx,{options:i,data:s})}),(0,He.jsxs)("div",{className:"mt-3 bg-gray-50 rounded-lg p-2 border border-gray-200",children:[(0,He.jsxs)("div",{className:"mb-2",children:[(0,He.jsx)("h6",{className:"text-xs font-medium text-gray-700 mb-1",children:"N\xedveis de Prompting:"}),(0,He.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#10b981"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"Independente"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#8b5cf6"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"Verbal"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#f59e0b"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"Gestual"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#ef4444"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"F\xedsica Parcial"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#dc2626"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"F\xedsica Total"})]})]})]}),(0,He.jsx)("div",{className:"border-t border-gray-200 pt-1",children:(0,He.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("span",{className:"text-amber-500 text-sm",children:"\u2b50"}),(0,He.jsx)("span",{className:"text-gray-600",children:"Linha de Base"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,He.jsx)("div",{className:"w-2 h-2 rounded-full bg-indigo-500"}),(0,He.jsx)("span",{className:"text-gray-600",children:"Sess\xe3o Regular"})]})]})})]})]})};return(0,He.jsx)("div",{className:"mt-8",children:s.map((e=>r[e]&&0!==r[e].length?(0,He.jsxs)("div",{className:"mb-8",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-l-4 border-indigo-500 p-4 rounded-r-lg mb-6",children:[(0,He.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[(0,He.jsx)("div",{className:"bg-indigo-100 p-2 rounded-full mr-3",children:(0,He.jsx)(Hr,{icon:Ds,className:"text-indigo-600"})}),e]}),(0,He.jsx)("p",{className:"text-sm text-indigo-700 mt-1",children:"Gr\xe1ficos de progresso individual por programa"})]}),(0,He.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r[e].map((e=>(0,He.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-indigo-200 px-4 py-3",children:[(0,He.jsx)("p",{className:"text-sm font-semibold text-gray-800 truncate",title:e.program_name,children:e.program_name}),(0,He.jsxs)("p",{className:"text-xs text-indigo-600 mt-1",children:["Tentativas: ",e.trials||"N/A",null!==e.custom_trials&&void 0!==e.custom_trials&&(0,He.jsx)("span",{className:"ml-1 text-blue-500 text-xs",children:"(customizado)"})]})]}),(0,He.jsx)("div",{className:"p-4",children:(0,He.jsx)("div",{className:"bg-gradient-to-br from-gray-50 to-indigo-50 rounded-lg p-2",children:(0,He.jsx)(i,{program:e})})})]},e.program_id)))})]},e):null))})},dy=()=>{const{user:e}=Ge(),{patients:t,selectedPatient:n,isLoading:r}=ct(),[s,i]=(0,a.useState)(""),[o,l]=(0,a.useState)(""),c=(0,a.useMemo)((()=>null!==n&&void 0!==n&&n.assigned_programs?n.assigned_programs:[]),[n]),d=(0,a.useMemo)((()=>new Set(c.map((e=>e.program_id)))),[c]),u=(0,a.useMemo)((()=>{if(null===n||void 0===n||!n.sessionData)return[];const e=s?new Date(s+"T00:00:00"):null,t=o?new Date(o+"T23:59:59"):null;return n.sessionData.filter((n=>{if(!d.has(n.program_id))return!1;const a=new Date(n.session_date);return!(e&&a<e)&&!(t&&a>t)}))}),[n,s,o,d]);if(r)return(0,He.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-3xl text-indigo-500"})});const h=(null===t||void 0===t?void 0:t.length)||0,m=(null===e||void 0===e?void 0:e.max_patients)||0,f=(null===t||void 0===t?void 0:t.reduce(((e,t)=>{var n;return e+((null===(n=t.sessionData)||void 0===n?void 0:n.length)||0)}),0))||0,p=(()=>{if(!u||0===u.length)return{assignedProgramsCount:c.length,overallAverage:"--",programsAboveGoal:"--",sessionFrequency:"--",acquisitionRate:"--",averageDaysToMastery:"--",stabilityIndex:"--",regressionAlerts:0,interpretations:{},recommendations:[]};const e=u.filter((e=>!e.is_baseline&&"number"===typeof e.score)).map((e=>e.score)),t=e.length>0?(e.reduce(((e,t)=>e+t),0)/e.length).toFixed(1):"--",n={};u.filter((e=>!e.is_baseline)).forEach((e=>{n[e.program_id]||(n[e.program_id]={scores:[],dates:[],sessions:[]}),n[e.program_id].scores.push(e.score),n[e.program_id].dates.push(new Date(e.session_date)),n[e.program_id].sessions.push(e)}));const a=Object.values(n).map((e=>e.scores.reduce(((e,t)=>e+t),0)/e.scores.length)),r=a.filter((e=>e>=80)).length,s=Math.max(a.length,c.length);let i=0,o=0,l=0,d=0;Object.values(n).forEach((e=>{e.dates.sort(((e,t)=>e-t));const t=e.sessions.slice(-5),n=t.reduce(((e,t)=>e+t.score),0)/t.length;if(n>=80&&t.length>=3){i++;const t=e.dates[0],n=e.dates[e.dates.length-1];o+=(n-t)/864e5,l++}if(e.sessions.length>=6){const t=e.sessions.slice(0,Math.floor(e.sessions.length/3)),n=e.sessions.slice(-Math.floor(e.sessions.length/3)),a=t.reduce(((e,t)=>e+t.score),0)/t.length,r=n.reduce(((e,t)=>e+t.score),0)/n.length;a-r>10&&d++}}));const h=s>0?(i/s*100).toFixed(1):"--",m=l>0?(o/l).toFixed(0):"--";let f=0,p=0;Object.values(n).forEach((e=>{if(e.scores.length>=5){const t=e.scores.slice(-5),n=t.reduce(((e,t)=>e+t),0)/t.length,a=t.reduce(((e,t)=>e+Math.pow(t-n,2)),0)/t.length,r=Math.sqrt(a),s=Math.max(0,100-2*r);f+=s,p++}}));const g=p>0?(f/p).toFixed(1):"--",x=u.map((e=>new Date(e.session_date))).sort(((e,t)=>e-t));let b="--";if(x.length>=2){const e=[...new Set(x.map((e=>e.toDateString())))],t=Math.max((x[x.length-1]-x[0])/864e5,1),n=Math.max(t/7,1);b=n>0?(e.length/n).toFixed(1):"--"}const v={overallAverage:parseFloat(t)>=70?"good":parseFloat(t)>=50?"attention":"critical",sessionFrequency:parseFloat(b)>=3?"good":parseFloat(b)>=2?"attention":"critical",acquisitionRate:parseFloat(h)>=30?"good":parseFloat(h)>=15?"attention":"critical",stabilityIndex:parseFloat(g)>=80?"good":parseFloat(g)>=60?"attention":"critical"},y=[];return"critical"===v.overallAverage&&y.push("Revisar estrat\xe9gias de interven\xe7\xe3o - progresso abaixo do esperado"),"critical"===v.sessionFrequency&&y.push("Aumentar frequ\xeancia de atendimentos para acelerar aquisi\xe7\xf5es"),parseFloat(h)<20&&y.push("Analisar crit\xe9rios de dom\xednio - poucos programas atingindo metas"),d>0&&y.push("Aten\xe7\xe3o: ".concat(d," programa(s) apresentando regress\xe3o")),"critical"===v.stabilityIndex&&y.push("Focar na manuten\xe7\xe3o - performance inconsistente"),{assignedProgramsCount:c.length,overallAverage:t,programsAboveGoal:"".concat(r,"/").concat(s),sessionFrequency:"--"===b?"--":b,acquisitionRate:h,averageDaysToMastery:m,stabilityIndex:g,regressionAlerts:d,interpretations:v,recommendations:y}})();return(0,He.jsx)("div",{children:n?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-4",children:[(0,He.jsxs)("h1",{className:"text-2xl font-semibold text-gray-800",children:["Dashboard: ",n.name]}),(0,He.jsx)("div",{className:"flex items-center gap-3",children:!(null!==e&&void 0!==e&&e.is_admin)&&(0,He.jsxs)("button",{onClick:()=>window.dispatchEvent(new CustomEvent("checkProgressAlerts")),className:"bg-amber-600 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-amber-700 transition-colors flex items-center space-x-1",title:"Verificar se h\xe1 programas prontos para serem marcados como dominados",children:[(0,He.jsx)(Hr,{icon:ws}),(0,He.jsx)("span",{className:"hidden sm:inline",children:"Verificar Progresso"})]})})]}),(0,He.jsx)(sy,{}),(0,He.jsx)(iy,{recommendations:p.recommendations,regressionAlerts:p.regressionAlerts}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[(0,He.jsx)(ry,{title:"Programas Ativos",value:p.assignedProgramsCount,icon:Fi,colorClass:{bg:"bg-indigo-100",text:"text-indigo-600"}}),(0,He.jsx)(ry,{title:"Programas Acima da Meta (\u226580%)",value:p.programsAboveGoal,icon:ws,colorClass:{bg:"bg-emerald-100",text:"text-emerald-600"},interpretation:p.interpretations.overallAverage}),(0,He.jsx)(ry,{title:"Frequ\xeancia Semanal de Sess\xf5es",value:"".concat(p.sessionFrequency).concat("--"!==p.sessionFrequency?"/sem":""),icon:ss,colorClass:{bg:"bg-amber-100",text:"text-amber-600"},interpretation:p.interpretations.sessionFrequency})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,He.jsx)(ry,{title:"Taxa de Aquisi\xe7\xe3o (%)",value:"".concat(p.acquisitionRate,"%"),icon:Ji,colorClass:{bg:"bg-purple-100",text:"text-purple-600"},interpretation:p.interpretations.acquisitionRate}),(0,He.jsx)(ry,{title:"Tempo M\xe9dio at\xe9 Crit\xe9rio",value:"".concat(p.averageDaysToMastery).concat("--"!==p.averageDaysToMastery?" dias":""),icon:Ni,colorClass:{bg:"bg-blue-100",text:"text-blue-600"}}),(0,He.jsx)(ry,{title:"\xcdndice de Estabilidade",value:"".concat(p.stabilityIndex).concat("--"!==p.stabilityIndex?"%":""),icon:uo,colorClass:{bg:"bg-green-100",text:"text-green-600"},interpretation:p.interpretations.stabilityIndex})]}),(0,He.jsxs)("div",{className:"mt-8 bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,He.jsxs)("h2",{className:"text-lg font-semibold text-gray-700 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:Qs,className:"mr-3 text-emerald-500"}),"Progresso por \xc1rea de Interven\xe7\xe3o"]}),(0,He.jsx)("div",{className:"relative",children:(0,He.jsx)(ly,{sessionData:u,activePrograms:c,analytics:p})})]}),(0,He.jsx)("div",{className:"mt-6",children:(0,He.jsx)(Fv,{startDate:s,endDate:o,onStartDateChange:i,onEndDateChange:l,onClear:()=>{i(""),l("")}})}),(0,He.jsx)(cy,{activePrograms:c,sessionData:u})]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,He.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:null!==e&&void 0!==e&&e.is_admin?"Dashboard da Cl\xednica":"Dashboard Geral"}),!(null!==e&&void 0!==e&&e.is_admin)&&(0,He.jsxs)("button",{onClick:()=>window.dispatchEvent(new CustomEvent("checkProgressAlerts")),className:"bg-amber-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-amber-700 transition-colors flex items-center space-x-2",title:"Verificar se h\xe1 programas prontos para serem marcados como dominados",children:[(0,He.jsx)(Hr,{icon:ws}),(0,He.jsx)("span",{children:"Verificar Progresso"})]})]}),(0,He.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:null!==e&&void 0!==e&&e.is_admin?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(ry,{title:"Pacientes Cadastrados",value:h,icon:xs,colorClass:{bg:"bg-indigo-100",text:"text-indigo-600"}}),(0,He.jsx)(ry,{title:"Limite Contratado",value:m,icon:ss,colorClass:{bg:"bg-blue-100",text:"text-blue-600"}}),(0,He.jsx)(ry,{title:"Utiliza\xe7\xe3o da Licen\xe7a",value:"".concat(m>0?Math.round(h/m*100):0,"%"),icon:Ji,colorClass:{bg:"bg-emerald-100",text:"text-emerald-600"},interpretation:m>0?h>=m?"critical":h>=.9*m?"attention":"good":"critical"})]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(ry,{title:"Clientes Atribu\xeddos a Mim",value:h,icon:xs,colorClass:{bg:"bg-indigo-100",text:"text-indigo-600"}}),(0,He.jsx)(ry,{title:"Total de Sess\xf5es (Meus Clientes)",value:f,icon:ss,colorClass:{bg:"bg-emerald-100",text:"text-emerald-600"}})]})}),(null===e||void 0===e?void 0:e.is_admin)&&(0,He.jsxs)("div",{className:"mt-6 bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,He.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,He.jsx)(Hr,{icon:xs,className:"mr-3 text-indigo-500"}),"Status da Assinatura"]}),(0,He.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(h>=m?"bg-red-100 text-red-800":h>=.9*m?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:h>=m?"\ud83d\udeab Limite Atingido":h>=.9*m?"\u26a0\ufe0f Pr\xf3ximo do Limite":"\u2705 Dentro do Limite"})]}),(0,He.jsxs)("div",{className:"relative",children:[(0,He.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4",children:(0,He.jsx)("div",{className:"h-4 rounded-full transition-all duration-500 ".concat(h>=m?"bg-red-500":h>=.9*m?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(h/Math.max(m,1)*100,100),"%")}})}),(0,He.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[(0,He.jsx)("span",{children:"0 pacientes"}),(0,He.jsxs)("span",{className:"font-medium",children:[h," / ",m," pacientes"]}),(0,He.jsxs)("span",{children:[m," pacientes (limite)"]})]})]}),h>=.8*m&&(0,He.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border-l-4 border-yellow-400 rounded-r-lg",children:(0,He.jsxs)("p",{className:"text-yellow-800 text-sm",children:[(0,He.jsx)(Hr,{icon:go,className:"mr-2"}),h>=m?"Voc\xea atingiu o limite de pacientes da sua assinatura. Entre em contato para atualizar seu plano.":"Voc\xea est\xe1 pr\xf3ximo do limite de pacientes. Considere atualizar sua assinatura."]})})]}),(0,He.jsxs)("div",{className:"mt-8 text-center text-gray-500 p-8 border-2 border-dashed rounded-lg bg-gray-50",children:[(0,He.jsx)(Hr,{icon:Ei,className:"text-4xl text-gray-300 mb-3"}),(0,He.jsx)("p",{children:"Selecione um cliente para ver um dashboard mais detalhado."})]})]})})};wm.register(Gf,Jf,Fm,Rm,kf,Wf,_f,yf,Ev);const uy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long";if(!e)return"N/A";const n=new Date(e);if(isNaN(n.getTime()))return"Data inv\xe1lida";const a=6e4*n.getTimezoneOffset(),r="short"===t?{day:"2-digit",month:"2-digit"}:{day:"2-digit",month:"2-digit",year:"numeric"};return new Date(n.getTime()+a).toLocaleDateString("pt-BR",r)},hy=e=>{let{program:t,sessionData:n}=e;const a=(n||[]).filter((e=>e.program_id===t.id));if(0===a.length)return(0,He.jsx)("div",{className:"flex items-center justify-center h-48 text-center bg-gradient-to-br from-gray-50 to-slate-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-gray-100 to-slate-100 p-4 rounded-full w-16 h-16 mx-auto mb-3 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:Qs,className:"text-2xl text-gray-400"})}),(0,He.jsx)("p",{className:"text-xs text-gray-500",children:"Sem dados de sess\xe3o"})]})});const r={labels:a.map((e=>uy(e.session_date,"short"))),datasets:[{label:"Pontua\xe7\xe3o (%)",data:a.map((e=>e.score)),borderColor:"#4f46e5",backgroundColor:e=>{const t=e.chart,{ctx:n,chartArea:a}=t;if(!a)return"rgba(79, 70, 229, 0.1)";const r=n.createLinearGradient(0,a.top,0,a.bottom);return r.addColorStop(0,"rgba(99, 102, 241, 0.3)"),r.addColorStop(.5,"rgba(79, 70, 229, 0.2)"),r.addColorStop(1,"rgba(67, 56, 202, 0.1)"),r},borderWidth:3,pointRadius:a.map((e=>e.is_baseline?8:6)),pointBackgroundColor:a.map((e=>e.is_baseline?"#f59e0b":e.details&&e.details.promptLevelColor?e.details.promptLevelColor:"#4f46e5")),pointBorderColor:a.map((e=>e.is_baseline?"#f59e0b":"#ffffff")),pointBorderWidth:a.map((e=>e.is_baseline?4:2)),pointHoverRadius:a.map((e=>e.is_baseline?10:8)),pointHoverBorderWidth:3,pointStyle:a.map((e=>e.is_baseline?"star":"circle")),fill:!0,tension:.4,shadowColor:"rgba(79, 70, 229, 0.3)",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:4}]},s={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{y:{display:!0,beginAtZero:!0,max:105,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{font:{size:11,weight:500},color:"#6b7280",callback:e=>e+"%"},border:{display:!1}},x:{display:!0,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{font:{size:11,weight:500},color:"#6b7280"},border:{display:!1}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#e5e7eb",borderColor:"#4f46e5",borderWidth:2,padding:16,cornerRadius:12,displayColors:!1,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{title:e=>{var t;const n=e[0].dataIndex,r=null===(t=a[n])||void 0===t?void 0:t.is_baseline,s="Sess\xe3o de ".concat(uy(a[n].session_date));return r?"\ud83d\udccb [LINHA DE BASE] ".concat(s):"\ud83d\udcc8 ".concat(s)},label:e=>"Pontua\xe7\xe3o: ".concat(e.parsed.y.toFixed(1),"%"),afterLabel:e=>{const t=e.dataIndex,n=a[t],r=(null===n||void 0===n?void 0:n.attempts)||0,s=(null===n||void 0===n?void 0:n.successes)||0;return r>0?"Acertos: ".concat(s,"/").concat(r):""},afterBody:e=>{var t;if(!e||!e[0]||void 0===e[0].dataIndex)return"";const n=e[0].dataIndex,r=null===(t=a[n])||void 0===t?void 0:t.notes;return r?"\n\ud83d\udcdd Observa\xe7\xf5es:\n".concat(r):""}}}}};return(0,He.jsxs)("div",{className:"w-full relative bg-gradient-to-br from-gray-50 to-indigo-50 rounded-lg p-2",children:[(0,He.jsx)("div",{className:"h-48 sm:h-56 mb-4",children:(0,He.jsx)(Dx,{options:s,data:r})}),(0,He.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,He.jsx)("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:"N\xedveis de Prompting:"}),(0,He.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#10b981"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"Independente"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#8b5cf6"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"Verbal"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#f59e0b"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"Gestual"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#ef4444"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"F\xedsica Parcial"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#dc2626"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"F\xedsica Total"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#6b7280"}}),(0,He.jsx)("span",{className:"text-gray-600",children:"Sem Resposta"})]})]}),(0,He.jsxs)("div",{className:"mt-3 pt-2 border-t border-gray-100",children:[(0,He.jsx)("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:"S\xedmbolos:"}),(0,He.jsxs)("div",{className:"flex items-center space-x-4 text-xs",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"text-yellow-500 text-base",children:"\u2b50"}),(0,He.jsx)("span",{className:"text-gray-600",children:"Linha de Base"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"text-indigo-500 text-base",children:"\u25cf"}),(0,He.jsx)("span",{className:"text-gray-600",children:"Sess\xe3o Regular"})]})]})]})]})]})},my=()=>{Z();const{selectedPatient:e,isLoading:t,error:n}=ct(),{getProgramById:r,isLoading:s}=ht(),[i,o]=(0,a.useState)(""),[l,c]=(0,a.useState)(""),d=(0,a.useMemo)((()=>{if(null===e||void 0===e||!e.sessionData)return[];const t=i?new Date(i+"T00:00:00"):null,n=l?new Date(l+"T23:59:59"):null;return e.sessionData.filter((e=>{const a=new Date(e.session_date);return!(t&&a<t)&&!(n&&a>n)}))}),[e,i,l]);if(t||s)return(0,He.jsx)("div",{className:"flex items-center justify-center h-full text-center p-10",children:(0,He.jsxs)("div",{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-4xl text-indigo-500 mb-4"}),(0,He.jsx)("p",{className:"text-gray-500",children:"A carregar dados de acompanhamento..."})]})});if(n)return(0,He.jsxs)("div",{className:"flex flex-col items-center justify-center text-center text-red-500 p-10 border-2 border-dashed border-red-200 rounded-lg bg-red-50 h-full",children:[(0,He.jsx)(Hr,{icon:ms,className:"text-5xl text-red-400 mb-4"}),(0,He.jsx)("p",{className:"text-lg font-medium text-red-700",children:"Ocorreu um erro"}),(0,He.jsx)("p",{className:"mt-1 text-sm",children:n})]});if(!e)return(0,He.jsxs)("div",{className:"flex flex-col items-center justify-center text-center text-gray-500 p-10 border-2 border-dashed border-gray-200 rounded-lg bg-gray-50 h-full",children:[(0,He.jsx)(Hr,{icon:ms,className:"text-5xl text-gray-400 mb-4"}),(0,He.jsx)("p",{className:"text-lg font-medium text-gray-700",children:"Paciente n\xe3o encontrado"}),(0,He.jsx)("p",{className:"mt-1 text-sm",children:"N\xe3o foi poss\xedvel carregar os dados do paciente associado."})]});const u=(e.assigned_programs||[]).map((e=>{const t=e.id||e.program_id||e.programId;return r(t)})).filter((e=>e)),h=u.reduce(((e,t)=>{const n=t.discipline||"Outros";return e[n]||(e[n]=[]),e[n].push(t),e}),{});return(0,He.jsxs)("div",{className:"p-4 md:p-6",children:[(0,He.jsx)("div",{className:"flex flex-wrap justify-between items-start mb-6 gap-4",children:(0,He.jsxs)("div",{children:[(0,He.jsxs)("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:["Acompanhamento de ",e.name]}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:"Progresso nos programas de interven\xe7\xe3o."})]})}),(0,He.jsx)("div",{className:"mb-8 max-w-5xl mx-auto",children:(0,He.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-700 px-8 py-8 relative overflow-hidden",children:[(0,He.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),(0,He.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-white/5 to-transparent rounded-full -translate-y-32 translate-x-32"}),(0,He.jsx)("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-white/5 to-transparent rounded-full translate-y-24 -translate-x-24"}),(0,He.jsxs)("div",{className:"relative z-10 text-center",children:[(0,He.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl mb-4",children:(0,He.jsx)(Hr,{icon:rs,className:"text-3xl text-white"})}),(0,He.jsx)("h3",{className:"text-2xl font-bold text-white mb-3 tracking-wide",children:"Comunica\xe7\xe3o com a Equipe Terap\xeautica"}),(0,He.jsxs)("div",{className:"max-w-2xl mx-auto space-y-3",children:[(0,He.jsx)("p",{className:"text-blue-100 font-medium text-lg leading-relaxed",children:"\ud83d\udcac Converse diretamente com todos os terapeutas do seu filho"}),(0,He.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl px-6 py-4 border border-white/20",children:(0,He.jsxs)("p",{className:"text-white text-sm leading-relaxed",children:["\u2728 Use ",(0,He.jsx)("span",{className:"bg-white/20 text-white px-3 py-1 rounded-lg font-mono font-semibold mx-1 border border-white/30",children:"@nome"})," para mencionar um terapeuta espec\xedfico"]})}),(0,He.jsxs)("div",{className:"flex items-center justify-center space-x-6 text-blue-100 text-sm",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,He.jsx)("span",{className:"font-medium",children:"\ud83d\udcf1 Tempo Real"})]}),(0,He.jsx)("div",{className:"w-px h-4 bg-white/30"}),(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("span",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),(0,He.jsx)("span",{className:"font-medium",children:"\ud83d\udd14 Notifica\xe7\xf5es"})]})]})]})]})]}),(0,He.jsx)("div",{className:"p-4",children:(0,He.jsx)(rx,{patientId:e.id,patientName:e.name})})]})}),(0,He.jsx)("div",{className:"mb-6",children:(0,He.jsx)(Fv,{startDate:i,endDate:l,onStartDateChange:o,onEndDateChange:c,onClear:()=>{o(""),c("")}})}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("h3",{className:"text-xl font-semibold text-gray-700 mb-3 pb-2 border-b border-gray-200 flex items-center",children:[(0,He.jsx)(Hr,{icon:Qs,className:"mr-3 text-indigo-500"}),"Progresso por \xc1rea de Interven\xe7\xe3o"]}),Object.keys(h).length>0?Object.keys(h).sort().map((e=>(0,He.jsxs)("div",{className:"mb-8 bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[(0,He.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-indigo-200 px-6 py-4",children:[(0,He.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,He.jsx)("div",{className:"bg-indigo-100 p-2 rounded-full mr-3",children:(0,He.jsx)(Hr,{icon:Qs,className:"text-indigo-600"})}),e]}),(0,He.jsx)("p",{className:"text-sm text-indigo-700 mt-1",children:"Gr\xe1ficos de progresso individual"})]}),(0,He.jsx)("div",{className:"p-6",children:(0,He.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h[e].map((e=>(0,He.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[(0,He.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border-b border-gray-200 px-4 py-3",children:(0,He.jsx)("h5",{className:"text-sm font-semibold text-gray-800 text-center",children:e.name})}),(0,He.jsx)("div",{className:"p-4",children:(0,He.jsx)(hy,{program:e,sessionData:d})})]},e.id)))})})]},e))):(0,He.jsx)("p",{className:"text-center text-gray-500 py-6 col-span-full",children:"Nenhum programa atribu\xeddo para visualiza\xe7\xe3o."})]})]})},fy=e=>{let{isOpen:t,onClose:n,onSave:r,userToEdit:s=null,patients:i=[]}=e;const[o,l]=(0,a.useState)({fullName:"",username:"",password:"",role:"terapeuta",associated_patient_id:""}),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(""),m=Boolean(s);(0,a.useEffect)((()=>{l(m?{fullName:s.full_name||"",username:s.username||"",password:"",role:s.role||"terapeuta",associated_patient_id:s.associated_patient_id||""}:{fullName:"",username:"",password:"",role:"terapeuta",associated_patient_id:""}),h("")}),[t,s,m]);const f=e=>{const{name:t,value:n}=e.target;l((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:n})))},p=async e=>{if(e.preventDefault(),h(""),m||o.password)if("pai"!==o.role||o.associated_patient_id){d(!0);try{await r(o),n()}catch(yj){h(yj.message||"Ocorreu um erro desconhecido.")}finally{d(!1)}}else h("\xc9 obrigat\xf3rio selecionar um paciente para o papel 'Pai/Respons\xe1vel'.");else h("O campo 'senha' \xe9 obrigat\xf3rio para novos utilizadores.")};return t?(0,He.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center z-50 p-4 transition-opacity",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col transform transition-all",children:[(0,He.jsxs)("div",{className:"flex justify-between items-center p-5 border-b border-gray-200",children:[(0,He.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:m?"Editar Utilizador":"Adicionar Novo Utilizador"}),(0,He.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,He.jsx)(Hr,{icon:Vi,className:"text-lg"})})]}),(0,He.jsxs)("form",{onSubmit:p,className:"p-6 space-y-4 overflow-y-auto",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),(0,He.jsx)("input",{type:"text",id:"fullName",name:"fullName",value:o.fullName,onChange:f,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome de Utilizador (login)"}),(0,He.jsx)("input",{type:"text",id:"username",name:"username",value:o.username,onChange:f,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha"}),(0,He.jsx)("input",{type:"password",id:"password",name:"password",value:o.password,onChange:f,placeholder:m?"Deixe em branco para n\xe3o alterar":"M\xednimo 6 caracteres",required:!m,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fun\xe7\xe3o"}),(0,He.jsxs)("select",{id:"role",name:"role",value:o.role,onChange:e=>{const{value:t}=e.target;l((e=>(0,Ie.A)((0,Ie.A)({},e),{},{role:t,associated_patient_id:""})))},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white",children:[(0,He.jsx)("option",{value:"terapeuta",children:"Terapeuta"}),(0,He.jsx)("option",{value:"pai",children:"Pai/Respons\xe1vel"})]})]}),"pai"===o.role&&(0,He.jsxs)("div",{className:"transition-all duration-300 ease-in-out",children:[(0,He.jsx)("label",{htmlFor:"associated_patient_id",className:"block text-sm font-medium text-gray-700 mb-1",children:"Paciente Associado"}),(0,He.jsxs)("select",{id:"associated_patient_id",name:"associated_patient_id",value:o.associated_patient_id,onChange:f,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white",children:[(0,He.jsx)("option",{value:"",children:"-- Selecione um paciente --"}),i.length>0?i.map((e=>(0,He.jsxs)("option",{value:e.id,children:[e.name," (ID: ",e.id,")"]},e.id))):(0,He.jsx)("option",{disabled:!0,children:"Nenhum paciente cadastrado na cl\xednica"})]})]}),u&&(0,He.jsx)("p",{className:"text-red-500 text-sm text-center bg-red-50 p-3 rounded-md",children:u})]}),(0,He.jsxs)("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex justify-end",children:[(0,He.jsx)("button",{onClick:n,type:"button",className:"bg-white hover:bg-gray-100 text-gray-700 font-medium py-2 px-4 rounded-md border border-gray-300 mr-3",children:"Cancelar"}),(0,He.jsxs)("button",{onClick:p,disabled:c,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md transition-colors shadow flex items-center disabled:opacity-60",children:[(0,He.jsx)(Hr,{icon:c?Zi:ri,className:"mr-2 ".concat(c&&"fa-spin")}),c?"A guardar...":"Guardar"]})]})]})}):null},py=e=>{let{isOpen:t,onClose:n,patient:r,allTherapists:s=[]}=e;const{token:i}=Ge(),[o,l]=(0,a.useState)(new Set),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[m,f]=(0,a.useState)("");(0,a.useEffect)((()=>{if(t&&r){const e=async()=>{d(!0),f("");try{const e=await(async(e,t)=>{try{return(await $e.A.get("".concat(Xe,"/admin/assignments/").concat(e),Ke(t))).data.therapists||[]}catch(m){var n,a,r,s;throw new Error((null===(n=m.response)||void 0===n||null===(a=n.data)||void 0===a||null===(r=a.errors)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.msg)||"N\xe3o foi poss\xedvel carregar as atribui\xe7\xf5es.")}})(r.id,i);l(new Set(e.map((e=>e.id))))}catch(yj){f(yj.message||"N\xe3o foi poss\xedvel carregar as atribui\xe7\xf5es.")}finally{d(!1)}};e()}}),[t,r,i]);return t?(0,He.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] flex flex-col",children:[(0,He.jsxs)("div",{className:"flex justify-between items-center p-5 border-b border-gray-200",children:[(0,He.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[(0,He.jsx)(Hr,{icon:xs,className:"mr-3 text-indigo-500"}),"Gerir Terapeutas para: ",(0,He.jsx)("span",{className:"font-bold ml-2",children:null===r||void 0===r?void 0:r.name})]}),(0,He.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,He.jsx)(Hr,{icon:Vi,className:"text-lg"})})]}),(0,He.jsx)("div",{className:"p-6 overflow-y-auto",children:c?(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-2xl text-indigo-500"}),(0,He.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"A carregar atribui\xe7\xf5es..."})]}):m?(0,He.jsx)("p",{className:"text-red-500 text-sm text-center bg-red-50 p-3 rounded-md",children:m}):(0,He.jsxs)("fieldset",{className:"space-y-3",children:[(0,He.jsx)("legend",{className:"text-sm font-medium text-gray-900 mb-2",children:"Selecione os terapeutas a serem atribu\xeddos:"}),s.length>0?s.map((e=>(0,He.jsxs)("div",{className:"relative flex items-start",children:[(0,He.jsx)("div",{className:"flex items-center h-5",children:(0,He.jsx)("input",{id:"therapist-".concat(e.id),name:"therapist-".concat(e.id),type:"checkbox",checked:o.has(e.id),onChange:()=>{return t=e.id,void l((e=>{const n=new Set(e);return n.has(t)?n.delete(t):n.add(t),n}));var t},className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),(0,He.jsxs)("div",{className:"ml-3 text-sm",children:[(0,He.jsx)("label",{htmlFor:"therapist-".concat(e.id),className:"font-medium text-gray-700 cursor-pointer",children:e.full_name}),(0,He.jsxs)("p",{className:"text-gray-500 text-xs",children:["ID: ",e.id," | Username: ",e.username]})]})]},e.id))):(0,He.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Nenhum terapeuta encontrado na cl\xednica."})]})}),(0,He.jsxs)("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex justify-end",children:[(0,He.jsx)("button",{onClick:n,type:"button",className:"bg-white hover:bg-gray-100 text-gray-700 font-medium py-2 px-4 rounded-md border border-gray-300 mr-3",children:"Cancelar"}),(0,He.jsxs)("button",{onClick:async()=>{if(r){h(!0),f("");try{const e=Array.from(o);await(async(e,t,n)=>{try{return(await $e.A.put("".concat(Xe,"/admin/assignments/").concat(e),{therapistIds:t},Ke(n))).data}catch(m){var a,r,s,i;throw new Error((null===(a=m.response)||void 0===a||null===(r=a.data)||void 0===r||null===(s=r.errors)||void 0===s||null===(i=s[0])||void 0===i?void 0:i.msg)||"N\xe3o foi poss\xedvel atualizar as atribui\xe7\xf5es.")}})(r.id,e,i),n()}catch(yj){f(yj.message||"N\xe3o foi poss\xedvel guardar as atribui\xe7\xf5es.")}finally{h(!1)}}},disabled:u||c,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md transition-colors shadow flex items-center disabled:opacity-60",children:[(0,He.jsx)(Hr,{icon:u?Zi:ri,className:"mr-2 ".concat(u&&"fa-spin")}),u?"A guardar...":"Guardar Atribui\xe7\xf5es"]})]})]})}):null},gy=e=>{let{isOpen:t,onClose:n,title:a,children:r,size:s="max-w-3xl"}=e;return t?(0,He.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,He.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,He.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:n}),(0,He.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle ".concat(s," w-full"),children:(0,He.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,He.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:a}),(0,He.jsxs)("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:n,children:[(0,He.jsx)("span",{className:"sr-only",children:"Fechar"}),(0,He.jsx)(Hr,{icon:Vi,className:"h-6 w-6"})]})]}),(0,He.jsx)("div",{className:"mt-3",children:r})]})})]})}):null},xy=e=>{let{isOpen:t,onClose:n,therapistToDelete:r,availableTherapists:s,onTransferComplete:i}=e;const{token:o}=Ge(),[l,c]=(0,a.useState)(null),[d,u]=(0,a.useState)([]),[h,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)("");(0,a.useEffect)((()=>{t&&r&&g()}),[t,r]);const g=async()=>{try{m(!0),p("");const e=await(async(e,t)=>{try{return(await $e.A.get("".concat(Xe,"/admin/users/").concat(e,"/assignments"),Ke(t))).data}catch(f){var n,a,r,s;throw new Error((null===(n=f.response)||void 0===n||null===(a=n.data)||void 0===a||null===(r=a.errors)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.msg)||"N\xe3o foi poss\xedvel carregar as atribui\xe7\xf5es.")}})(r.id,o);c(e);const t=[];e.patients.forEach((e=>{e.programs.forEach((n=>{t.push({assignment_id:n.assignment_id,patient_name:e.patient_name,program_name:n.program_name,session_count:n.session_count,to_therapist_id:s.length>0?s[0].id:""})}))})),u(t)}catch(yj){p("Erro ao carregar atribui\xe7\xf5es do terapeuta."),console.error("Erro ao buscar atribui\xe7\xf5es:",yj)}finally{m(!1)}};return t?(0,He.jsx)(gy,{isOpen:t,onClose:n,title:"\ud83d\udd04 Transferir Atribui\xe7\xf5es",children:(0,He.jsxs)("div",{className:"max-w-4xl mx-auto",children:[h&&!l&&(0,He.jsxs)("div",{className:"text-center py-4",children:[(0,He.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),(0,He.jsx)("p",{className:"mt-2 text-gray-600",children:"Carregando atribui\xe7\xf5es..."})]}),f&&(0,He.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:f}),l&&(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)("div",{className:"flex-shrink-0",children:"\ud83d\udea8"}),(0,He.jsxs)("div",{className:"ml-3",children:[(0,He.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"ATEN\xc7\xc3O: Transfer\xeancia Obrigat\xf3ria"}),(0,He.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,He.jsxs)("p",{children:[(0,He.jsx)("strong",{children:r.full_name})," possui atribui\xe7\xf5es ativas. Para manter a continuidade do tratamento, \xe9 necess\xe1rio transferir todas as atribui\xe7\xf5es antes da remo\xe7\xe3o."]})})]})]})}),(0,He.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,He.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"\ud83d\udccb Resumo das Atribui\xe7\xf5es:"}),(0,He.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium",children:l.summary.total_patients})," pacientes ativos"]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium",children:l.summary.total_programs})," programas em andamento"]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium",children:l.summary.total_sessions})," sess\xf5es registradas (preservadas no hist\xf3rico)"]})]})]}),(0,He.jsxs)("div",{className:"mb-6",children:[(0,He.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\ud83d\udc64 Selecione o terapeuta substituto para cada programa:"}),(0,He.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:l.patients.map((e=>(0,He.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,He.jsxs)("h4",{className:"font-medium text-gray-900 mb-3",children:["\ud83d\udccb ",e.patient_name]}),(0,He.jsx)("div",{className:"space-y-2",children:e.programs.map((e=>{const t=d.find((t=>t.assignment_id===e.assignment_id));return(0,He.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,He.jsxs)("div",{className:"flex-1",children:[(0,He.jsx)("span",{className:"text-sm font-medium",children:e.program_name}),(0,He.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",e.session_count," sess\xf5es)"]})]}),(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)("span",{className:"text-sm text-gray-500 mr-2",children:"\u2192"}),(0,He.jsxs)("select",{value:(null===t||void 0===t?void 0:t.to_therapist_id)||"",onChange:t=>{return n=e.assignment_id,a=t.target.value,void u((e=>e.map((e=>e.assignment_id===n?(0,Ie.A)((0,Ie.A)({},e),{},{to_therapist_id:parseInt(a)}):e))));var n,a},className:"block w-48 px-3 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,He.jsx)("option",{value:"",children:"Selecione um terapeuta"}),s.filter((e=>e.id!==r.id)).map((e=>(0,He.jsx)("option",{value:e.id,children:e.full_name},e.id)))]})]})]},e.assignment_id)}))})]},e.patient_id)))})]}),(0,He.jsxs)("div",{className:"mb-6 p-3 bg-gray-50 border border-gray-200 rounded",children:[(0,He.jsxs)("p",{className:"text-sm text-gray-600",children:["\u26a0\ufe0f ",(0,He.jsx)("strong",{children:"Importante:"})]}),(0,He.jsxs)("ul",{className:"text-sm text-gray-600 mt-1 ml-4 list-disc",children:[(0,He.jsx)("li",{children:"O hist\xf3rico de evolu\xe7\xe3o ser\xe1 preservado"}),(0,He.jsx)("li",{children:"As sess\xf5es j\xe1 realizadas permanecer\xe3o no nome do terapeuta original"}),(0,He.jsx)("li",{children:"O novo terapeuta assumir\xe1 a responsabilidade a partir de hoje"})]})]}),(0,He.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,He.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:n,disabled:h,children:"Cancelar"}),(0,He.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",onClick:async()=>{try{m(!0),p("");if(d.filter((e=>!e.to_therapist_id)).length>0)return void p("Por favor, selecione um terapeuta para todas as atribui\xe7\xf5es.");const e=d.map((e=>({assignment_id:e.assignment_id,to_therapist_id:e.to_therapist_id})));await(async(e,t,n)=>{try{return(await $e.A.post("".concat(Xe,"/admin/users/").concat(e,"/transfer"),{transferList:t},Ke(n))).data}catch(f){var a,r,s,i;throw new Error((null===(a=f.response)||void 0===a||null===(r=a.data)||void 0===r||null===(s=r.errors)||void 0===s||null===(i=s[0])||void 0===i?void 0:i.msg)||"N\xe3o foi poss\xedvel transferir as atribui\xe7\xf5es.")}})(r.id,e,o),i()}catch(yj){p("Erro ao transferir atribui\xe7\xf5es. Tente novamente."),console.error("Erro na transfer\xeancia:",yj)}finally{m(!1)}},disabled:h||d.some((e=>!e.to_therapist_id)),children:h?"Transferindo...":"Transferir e Remover"})]})]})]})}):null},by=e=>{let{users:t,onEditClick:n,onDeleteClick:a}=e;return(0,He.jsxs)("div",{className:"overflow-x-auto",children:[(0,He.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,He.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-slate-50",children:(0,He.jsxs)("tr",{children:[(0,He.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Nome Completo"}),(0,He.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Username"}),(0,He.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Fun\xe7\xe3o"}),(0,He.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Data de Cria\xe7\xe3o"}),(0,He.jsx)("th",{scope:"col",className:"relative px-6 py-4 border-b border-gray-200",children:(0,He.jsx)("span",{className:"sr-only",children:"A\xe7\xf5es"})})]})}),(0,He.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:t.map(((e,t)=>{return(0,He.jsxs)("tr",{className:"hover:bg-gradient-to-r hover:from-gray-50 hover:to-slate-50 transition-all duration-200 ".concat(t%2===0?"bg-white":"bg-gray-50/30"),children:[(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)("div",{className:"flex-shrink-0 h-8 w-8",children:(0,He.jsx)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center ".concat(e.is_admin?"bg-purple-100 text-purple-600":"pai"===e.role?"bg-amber-100 text-amber-600":"bg-blue-100 text-blue-600"),children:(0,He.jsx)(Hr,{icon:e.is_admin?qi:"pai"===e.role?xs:Ui,className:"text-sm"})})}),(0,He.jsx)("div",{className:"ml-3",children:(0,He.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.full_name})})]})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.username})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_admin?"bg-purple-100 text-purple-800":"pai"===e.role?"bg-amber-100 text-amber-800":"bg-blue-100 text-blue-800"),children:e.is_admin?"Admin":"pai"===e.role?"Pai/M\xe3e":"Terapeuta"})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(r=e.created_at,r?new Date(r).toLocaleDateString("pt-BR"):"-")}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:!e.is_admin&&(0,He.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,He.jsxs)("button",{onClick:()=>n(e),className:"text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 px-2 py-1 rounded-md transition-colors duration-200",children:[(0,He.jsx)(Hr,{icon:gs,className:"mr-1 h-3 w-3"})," Editar"]}),(0,He.jsxs)("button",{onClick:()=>a(e),className:"text-red-600 hover:text-red-900 hover:bg-red-50 px-2 py-1 rounded-md transition-colors duration-200",children:[(0,He.jsx)(Hr,{icon:Gr,className:"mr-1 h-3 w-3"})," Apagar"]})]})})]},e.id);var r}))})]}),0===t.length&&(0,He.jsxs)("div",{className:"text-center py-12 bg-gradient-to-br from-gray-50 to-slate-50",children:[(0,He.jsx)(Hr,{icon:go,className:"text-3xl text-gray-400 mb-3"}),(0,He.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Nenhum utilizador encontrado"}),(0,He.jsx)("p",{className:"text-sm text-gray-500",children:"N\xe3o h\xe1 utilizadores que correspondam aos crit\xe9rios de busca."})]})]})},vy=e=>{let{patients:t,onManageClick:n,onDeleteClick:a}=e;return(0,He.jsxs)("div",{className:"overflow-x-auto",children:[(0,He.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,He.jsx)("thead",{className:"bg-gradient-to-r from-green-50 to-emerald-50",children:(0,He.jsxs)("tr",{children:[(0,He.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Paciente"}),(0,He.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Idade"}),(0,He.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Data de Nasc."}),(0,He.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Diagn\xf3stico"}),(0,He.jsx)("th",{scope:"col",className:"relative px-6 py-4 border-b border-gray-200",children:(0,He.jsx)("span",{className:"sr-only",children:"A\xe7\xf5es"})})]})}),(0,He.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:t.map(((e,t)=>{const r=(e=>{if(!e)return null;const t=new Date(e),n=new Date;let a=n.getFullYear()-t.getFullYear();const r=n.getMonth()-t.getMonth();return(r<0||0===r&&n.getDate()<t.getDate())&&a--,a})(e.dob);return(0,He.jsxs)("tr",{className:"hover:bg-gradient-to-r hover:from-green-50 hover:to-emerald-50 transition-all duration-200 ".concat(t%2===0?"bg-white":"bg-gray-50/30"),children:[(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)("div",{className:"flex-shrink-0 h-8 w-8",children:(0,He.jsx)("div",{className:"h-8 w-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:Ui,className:"text-sm"})})}),(0,He.jsx)("div",{className:"ml-3",children:(0,He.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})})]})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:null!==r?(0,He.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[r," anos"]}):(0,He.jsx)("span",{className:"text-sm text-gray-500",children:"-"})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(s=e.dob,s?new Date(s).toLocaleDateString("pt-BR"):"-")}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.diagnosis?"bg-amber-100 text-amber-800":"bg-gray-100 text-gray-600"),children:e.diagnosis||"N\xe3o informado"})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,He.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,He.jsxs)("button",{onClick:()=>n(e),className:"text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 px-2 py-1 rounded-md transition-colors duration-200",children:[(0,He.jsx)(Hr,{icon:to,className:"mr-1 h-3 w-3"})," Gerir Terapeutas"]}),(0,He.jsxs)("button",{onClick:()=>a(e),className:"text-red-600 hover:text-red-900 hover:bg-red-50 px-2 py-1 rounded-md transition-colors duration-200",children:[(0,He.jsx)(Hr,{icon:Gr,className:"mr-1 h-3 w-3"})," Apagar"]})]})})]},e.id);var s}))})]}),0===t.length&&(0,He.jsxs)("div",{className:"text-center py-12 bg-gradient-to-br from-green-50 to-emerald-50",children:[(0,He.jsx)(Hr,{icon:Ui,className:"text-3xl text-green-400 mb-3"}),(0,He.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Nenhum paciente encontrado"}),(0,He.jsx)("p",{className:"text-sm text-gray-500",children:"N\xe3o h\xe1 pacientes nesta cl\xednica que correspondam aos crit\xe9rios de busca."})]})]})},yy=e=>{let{assignments:t,onArchiveClick:n,onDeleteClick:a,onRestoreClick:r,onPauseClick:s,onResumeClick:i}=e;const o=e=>{switch(e){case"active":return(0,He.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Ativo"});case"archived":return(0,He.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Arquivado"});case"paused":return(0,He.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pausado"});default:return(0,He.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Desconhecido"})}},l=e=>{const t=[];switch(e.status){case"active":t.push((0,He.jsxs)("button",{onClick:()=>n(e),className:"text-amber-600 hover:text-amber-900 hover:bg-amber-50 px-2 py-1 rounded-md text-xs transition-colors duration-200",title:"Arquivar programa",children:[(0,He.jsx)(Hr,{icon:os,className:"mr-1"})," Arquivar"]},"archive"),(0,He.jsxs)("button",{onClick:()=>s(e),className:"text-blue-600 hover:text-blue-900 hover:bg-blue-50 px-2 py-1 rounded-md text-xs transition-colors duration-200",title:"Pausar programa",children:[(0,He.jsx)(Hr,{icon:qs,className:"mr-1"})," Pausar"]},"pause"));break;case"archived":t.push((0,He.jsxs)("button",{onClick:()=>r(e),className:"text-green-600 hover:text-green-900 hover:bg-green-50 px-2 py-1 rounded-md text-xs transition-colors duration-200",title:"Restaurar programa",children:[(0,He.jsx)(Hr,{icon:vi,className:"mr-1"})," Restaurar"]},"restore"),(0,He.jsxs)("button",{onClick:()=>a(e),className:"text-red-600 hover:text-red-900 hover:bg-red-50 px-2 py-1 rounded-md text-xs transition-colors duration-200",title:"Deletar permanentemente",children:[(0,He.jsx)(Hr,{icon:Gr,className:"mr-1"})," Deletar"]},"delete"));break;case"paused":t.push((0,He.jsxs)("button",{onClick:()=>i(e),className:"text-green-600 hover:text-green-900 hover:bg-green-50 px-2 py-1 rounded-md text-xs transition-colors duration-200",title:"Retomar programa",children:[(0,He.jsx)(Hr,{icon:Di,className:"mr-1"})," Retomar"]},"resume"),(0,He.jsxs)("button",{onClick:()=>n(e),className:"text-amber-600 hover:text-amber-900 hover:bg-amber-50 px-2 py-1 rounded-md text-xs transition-colors duration-200",title:"Arquivar programa",children:[(0,He.jsx)(Hr,{icon:os,className:"mr-1"})," Arquivar"]},"archive2"))}return(0,He.jsx)("div",{className:"flex flex-col space-y-1",children:t})};return(0,He.jsxs)("div",{className:"overflow-x-auto",children:[(0,He.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,He.jsx)("thead",{className:"bg-gradient-to-r from-indigo-50 to-purple-50",children:(0,He.jsxs)("tr",{children:[(0,He.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Paciente"}),(0,He.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Programa"}),(0,He.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Terapeuta"}),(0,He.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Status"}),(0,He.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Sess\xf5es"}),(0,He.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"\xdaltima Sess\xe3o"}),(0,He.jsx)("th",{scope:"col",className:"relative px-6 py-4 border-b border-gray-200",children:(0,He.jsx)("span",{className:"sr-only",children:"A\xe7\xf5es"})})]})}),(0,He.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:t.map(((e,t)=>{return(0,He.jsxs)("tr",{className:"hover:bg-gradient-to-r hover:from-indigo-50 hover:to-purple-50 transition-all duration-200 ".concat(t%2===0?"bg-white":"bg-gray-50/30"),children:[(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)("div",{className:"flex-shrink-0 h-8 w-8",children:(0,He.jsx)("div",{className:"h-8 w-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:Ui,className:"text-sm"})})}),(0,He.jsx)("div",{className:"ml-3",children:(0,He.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.patient_name})})]})}),(0,He.jsx)("td",{className:"px-6 py-4",children:(0,He.jsxs)("div",{className:"text-sm text-gray-900",children:[(0,He.jsx)("div",{className:"max-w-xs truncate font-medium",title:e.program_name,children:e.program_name}),e.has_custom_trials&&(0,He.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:[(0,He.jsx)(Hr,{icon:to,className:"mr-1"}),"Tentativas customizadas"]})]})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.therapist_name}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:o(e.status)}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"font-medium",children:e.total_sessions}),e.total_sessions>0&&e.average_score>0&&(0,He.jsxs)("div",{className:"text-xs text-green-600",children:[e.average_score.toFixed(1),"% m\xe9dia"]})]})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(n=e.last_session_date,n?new Date(n).toLocaleDateString("pt-BR"):"-")}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:l(e)})]},e.assignment_id);var n}))})]}),0===t.length&&(0,He.jsxs)("div",{className:"text-center py-12 bg-gradient-to-br from-indigo-50 to-purple-50",children:[(0,He.jsx)(Hr,{icon:to,className:"text-3xl text-indigo-400 mb-3"}),(0,He.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Nenhuma atribui\xe7\xe3o encontrada"}),(0,He.jsx)("p",{className:"text-sm text-gray-500",children:"N\xe3o h\xe1 programas atribu\xeddos que correspondam aos crit\xe9rios de busca."})]})]})},wy=()=>{const{token:e}=Ge(),[t,n]=(0,a.useState)([]),[r,s]=(0,a.useState)([]),[i,o]=(0,a.useState)([]),[l,c]=(0,a.useState)("users"),[d,u]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),[f,p]=(0,a.useState)(""),[g,x]=(0,a.useState)("all"),[b,v]=(0,a.useState)(!0),[y,w]=(0,a.useState)(""),[j,N]=(0,a.useState)(!1),[_,S]=(0,a.useState)(!1),[k,C]=(0,a.useState)(!1),[A,P]=(0,a.useState)(!1),[L,E]=(0,a.useState)(null),[D,M]=(0,a.useState)(null),[O,T]=(0,a.useState)(null),R=(0,a.useCallback)((async()=>{if(e){v(!0),w("");try{const[t,a,r]=await Promise.all([Je(e),Ze(e),et(e)]);n(t),s(a),o(r)}catch(yj){w(yj.message||"Ocorreu um erro ao carregar os dados.")}finally{v(!1)}}}),[e]);(0,a.useEffect)((()=>{R()}),[R]);const I=(0,a.useMemo)((()=>t.filter((e=>e.full_name.toLowerCase().includes(d.toLowerCase())||e.username.toLowerCase().includes(d.toLowerCase())))),[t,d]),F=(0,a.useMemo)((()=>r.filter((e=>e.name.toLowerCase().includes(h.toLowerCase())))),[r,h]),z=(0,a.useMemo)((()=>i.filter((e=>{const t=e.patient_name.toLowerCase().includes(f.toLowerCase())||e.program_name.toLowerCase().includes(f.toLowerCase())||e.therapist_name.toLowerCase().includes(f.toLowerCase()),n="all"===g||e.status===g;return t&&n}))),[i,f,g]),B=(0,a.useCallback)((async t=>{try{O?await(async(e,t,n)=>{try{return(await $e.A.put("".concat(Xe,"/admin/users/").concat(e),t,Ke(n))).data}catch(y){var a,r,s,i;throw new Error((null===(a=y.response)||void 0===a||null===(r=a.data)||void 0===r||null===(s=r.errors)||void 0===s||null===(i=s[0])||void 0===i?void 0:i.msg)||"N\xe3o foi poss\xedvel atualizar o utilizador.")}})(O.id,t,e):await(async(e,t)=>{try{return(await $e.A.post("".concat(Xe,"/admin/users"),e,Ke(t))).data}catch(y){var n,a,r,s;throw new Error((null===(n=y.response)||void 0===n||null===(a=n.data)||void 0===a||null===(r=a.errors)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.msg)||"N\xe3o foi poss\xedvel criar o utilizador.")}})(t,e),await R()}catch(yj){throw yj}}),[e,R,O]),q=(0,a.useCallback)((async t=>{try{await(async(e,t)=>{try{return(await $e.A.post("".concat(Xe,"/admin/patients"),e,Ke(t))).data}catch(y){var n,a,r,s;throw new Error((null===(n=y.response)||void 0===n||null===(a=n.data)||void 0===a||null===(r=a.errors)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.msg)||"N\xe3o foi poss\xedvel criar o paciente.")}})(t,e),await R()}catch(yj){throw yj}}),[e,R]),U=(0,a.useCallback)((async t=>{if("pai"!==t.role){if("terapeuta"===t.role)try{await Qe(t.id,e),await R()}catch(yj){yj.requiresTransfer?(E(t),P(!0)):alert("Erro ao apagar utilizador: ".concat(yj.message))}}else if(window.confirm('Tem a certeza que deseja apagar o utilizador "'.concat(t.full_name,'"? Esta a\xe7\xe3o n\xe3o pode ser desfeita.')))try{await Qe(t.id,e),await R()}catch(yj){alert("Erro ao apagar utilizador: ".concat(yj.message))}}),[e,R]),W=(0,a.useCallback)((async()=>{try{await Qe(L.id,e),await R(),P(!1),E(null),alert("Terapeuta removido com sucesso ap\xf3s transfer\xeancia das atribui\xe7\xf5es!")}catch(yj){alert("Erro ao remover terapeuta ap\xf3s transfer\xeancia: ".concat(yj.message))}}),[L,e,R]),H=(0,a.useCallback)((async t=>{if(window.confirm('Tem a certeza que deseja apagar o paciente "'.concat(t.name,'"? Esta a\xe7\xe3o n\xe3o pode ser desfeita e ir\xe1 remover todos os dados associados.')))try{await(async(e,t)=>{try{return(await $e.A.delete("".concat(Xe,"/admin/patients/").concat(e),Ke(t))).data}catch(y){var n,a,r,s;throw new Error((null===(n=y.response)||void 0===n||null===(a=n.data)||void 0===a||null===(r=a.errors)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.msg)||"N\xe3o foi poss\xedvel apagar o paciente.")}})(t.id,e),await R()}catch(yj){alert("Erro ao apagar paciente: ".concat(yj.message))}}),[e,R]),V=(0,a.useCallback)((async e=>{if(window.confirm('Arquivar programa "'.concat(e.program_name,'" do paciente "').concat(e.patient_name,'"?')))try{await(0,nt.xT)(e.assignment_id,"archived"),await R()}catch(yj){alert("Erro ao arquivar: ".concat(yj.message))}}),[R]),Y=(0,a.useCallback)((async t=>{if(window.confirm('DELETAR PERMANENTEMENTE programa "'.concat(t.program_name,'" do paciente "').concat(t.patient_name,'"? Esta a\xe7\xe3o N\xc3O pode ser desfeita!')))try{await it(t.assignment_id,e),await R()}catch(yj){alert("Erro ao deletar: ".concat(yj.message))}}),[e,R]),G=(0,a.useCallback)((async e=>{if(window.confirm('Restaurar programa "'.concat(e.program_name,'" do paciente "').concat(e.patient_name,'"?')))try{await(0,nt.xT)(e.assignment_id,"active"),await R()}catch(yj){alert("Erro ao restaurar: ".concat(yj.message))}}),[R]),$=(0,a.useCallback)((async e=>{if(window.confirm('Pausar programa "'.concat(e.program_name,'" do paciente "').concat(e.patient_name,'"?')))try{await(0,nt.xT)(e.assignment_id,"paused"),await R()}catch(yj){alert("Erro ao pausar: ".concat(yj.message))}}),[R]),X=(0,a.useCallback)((async e=>{if(window.confirm('Retomar programa "'.concat(e.program_name,'" do paciente "').concat(e.patient_name,'"?')))try{await(0,nt.xT)(e.assignment_id,"active"),await R()}catch(yj){alert("Erro ao retomar: ".concat(yj.message))}}),[R]),K=(0,a.useMemo)((()=>t.filter((e=>"terapeuta"===e.role&&!e.is_admin))),[t]),J=e=>{let{tabName:t,activeTab:n,setTab:a,icon:r,children:s}=e;return(0,He.jsxs)("button",{onClick:()=>a(t),className:"flex items-center px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat(n===t?"bg-indigo-100 text-indigo-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[(0,He.jsx)(Hr,{icon:r,className:"mr-2"}),s]})};return(0,He.jsxs)(He.Fragment,{children:[(0,He.jsxs)("div",{className:"fade-in",children:[(()=>{const e="users"===l,t=e||"patients"===l;return(0,He.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[(0,He.jsxs)("h1",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,He.jsx)(Hr,{icon:qi,className:"mr-3 text-indigo-500"}),"Painel de Administra\xe7\xe3o"]}),t&&(0,He.jsxs)("button",{onClick:()=>e?(T(null),void N(!0)):S(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-lg text-sm transition-colors shadow hover:shadow-md flex items-center",children:[(0,He.jsx)(Hr,{icon:mo,className:"mr-2"}),e?"Adicionar Utilizador":"Adicionar Paciente"]})]})})(),(0,He.jsx)("div",{className:"mb-4 border-b border-gray-200",children:(0,He.jsxs)("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[(0,He.jsx)(J,{tabName:"users",activeTab:l,setTab:c,icon:xs,children:"Utilizadores"}),(0,He.jsx)(J,{tabName:"patients",activeTab:l,setTab:c,icon:Ui,children:"Pacientes"}),(0,He.jsx)(J,{tabName:"assignments",activeTab:l,setTab:c,icon:to,children:"Programas Atribu\xeddos"})]})}),(0,He.jsx)("div",{className:"mb-4",children:"users"===l?(0,He.jsxs)("div",{className:"relative",children:[(0,He.jsx)(Hr,{icon:Oi,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,He.jsx)("input",{type:"text",placeholder:"Buscar por nome ou username...",value:d,onChange:e=>u(e.target.value),className:"w-full sm:w-72 pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}):"patients"===l?(0,He.jsxs)("div",{className:"relative",children:[(0,He.jsx)(Hr,{icon:Oi,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,He.jsx)("input",{type:"text",placeholder:"Buscar por nome de paciente...",value:h,onChange:e=>m(e.target.value),className:"w-full sm:w-72 pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}):"assignments"===l?(0,He.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,He.jsxs)("div",{className:"relative flex-1",children:[(0,He.jsx)(Hr,{icon:Oi,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,He.jsx)("input",{type:"text",placeholder:"Buscar paciente, programa ou terapeuta...",value:f,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),(0,He.jsxs)("select",{value:g,onChange:e=>x(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[(0,He.jsx)("option",{value:"all",children:"Todos os Status"}),(0,He.jsx)("option",{value:"active",children:"Ativos"}),(0,He.jsx)("option",{value:"archived",children:"Arquivados"}),(0,He.jsx)("option",{value:"paused",children:"Pausados"})]})]}):null}),b?(0,He.jsxs)("div",{className:"flex justify-center items-center h-64",children:[" ",(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-4xl text-indigo-500"})," "]}):y?(0,He.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md",children:[" ",(0,He.jsx)("p",{className:"font-bold",children:"Erro"})," ",(0,He.jsx)("p",{children:y})," "]}):(0,He.jsxs)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden border border-gray-200",children:["users"===l&&(0,He.jsx)(by,{users:I,onEditClick:e=>{T(e),N(!0)},onDeleteClick:U}),"patients"===l&&(0,He.jsx)(vy,{patients:F,onManageClick:e=>{M(e),C(!0)},onDeleteClick:H}),"assignments"===l&&(0,He.jsx)(yy,{assignments:z,onArchiveClick:V,onDeleteClick:Y,onRestoreClick:G,onPauseClick:$,onResumeClick:X})]})]}),(0,He.jsx)(fy,{isOpen:j,onClose:()=>N(!1),onSave:B,userToEdit:O,patients:r}),(0,He.jsx)(vx,{isOpen:_,onClose:()=>S(!1),onSave:q,patientToEdit:null}),(0,He.jsx)(py,{isOpen:k,onClose:()=>C(!1),patient:D,allTherapists:K}),(0,He.jsx)(xy,{isOpen:A,onClose:()=>{P(!1),E(null)},therapistToDelete:L,availableTherapists:K,onTransferComplete:W})]})},jy=()=>{const{assignmentId:e}=function(){let{matches:e}=a.useContext($),t=e[e.length-1];return t?t.params:{}}(),[t,n]=(0,a.useState)(null),[r,s]=(0,a.useState)(!0),[i,o]=(0,a.useState)("");if((0,a.useEffect)((()=>{if(!e)return o("ID da designa\xe7\xe3o n\xe3o fornecido."),void s(!1);(async()=>{try{s(!0),o("");const t=await(0,nt.Ow)(e);if(!t)throw new Error("Designa\xe7\xe3o de programa n\xe3o encontrada.");n(t)}catch(yj){var t,a;console.error("Erro ao carregar dados da sess\xe3o:",yj),o((null===(t=yj.response)||void 0===t||null===(a=t.data)||void 0===a?void 0:a.message)||yj.message||"Ocorreu um erro ao carregar a sess\xe3o.")}finally{s(!1)}})()}),[e]),r)return(0,He.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-8",children:(0,He.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-12 text-center max-w-md w-full border border-gray-100",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 p-6 rounded-2xl w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-3xl text-indigo-600"})}),(0,He.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"Carregando Sess\xe3o"}),(0,He.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Preparando os dados da sess\xe3o terap\xeautica..."}),(0,He.jsxs)("div",{className:"mt-6 flex items-center justify-center space-x-2",children:[(0,He.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"}),(0,He.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,He.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})});if(i)return(0,He.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-pink-50 to-rose-50 flex items-center justify-center p-8",children:(0,He.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-12 text-center max-w-lg w-full border border-red-100",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-red-100 to-pink-100 p-6 rounded-2xl w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:go,className:"text-3xl text-red-600"})}),(0,He.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:i.includes("arquivado")?"Programa Arquivado":"Erro ao Carregar Sess\xe3o"}),(0,He.jsx)("p",{className:"text-gray-600 mb-8 leading-relaxed",children:i}),i.includes("arquivado")&&(0,He.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,He.jsx)("p",{className:"text-green-700 text-sm",children:"\ud83c\udf89 Este programa foi marcado como dominado com sucesso! Volte \xe0 lista de programas para selecionar outro."})}),(0,He.jsxs)(De,{to:"/clients",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-xl font-medium hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,He.jsx)(Hr,{icon:ci}),(0,He.jsx)("span",{children:"Voltar aos Clientes"})]})]})});if(!t)return(0,He.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-slate-50 to-gray-100 flex items-center justify-center p-8",children:(0,He.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-12 text-center max-w-md w-full border border-gray-100",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-gray-100 to-slate-100 p-6 rounded-2xl w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:ss,className:"text-3xl text-gray-600"})}),(0,He.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"Dados Indispon\xedveis"}),(0,He.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"N\xe3o foi poss\xedvel carregar os dados da sess\xe3o."})]})});const{program:l,patient:c,assignment_id:d}=t;return(0,He.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[(0,He.jsx)("div",{className:"bg-white shadow-xl border-b border-gray-100",children:(0,He.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,He.jsxs)(De,{to:"/clients/".concat(null===c||void 0===c?void 0:c.id),className:"inline-flex items-center space-x-2 text-indigo-600 hover:text-indigo-700 bg-indigo-50 hover:bg-indigo-100 px-4 py-2 rounded-xl font-medium transition-all duration-200",children:[(0,He.jsx)(Hr,{icon:ci}),(0,He.jsx)("span",{children:"Voltar ao Paciente"})]}),(0,He.jsx)("div",{className:"h-8 w-px bg-gray-300"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-1",children:(null===l||void 0===l?void 0:l.name)||"Carregando programa..."}),(0,He.jsxs)("div",{className:"flex items-center space-x-3 text-gray-600",children:[(0,He.jsx)(Hr,{icon:fi,className:"text-indigo-500"}),(0,He.jsx)("span",{className:"font-medium",children:"Sess\xe3o de Terapia para:"}),(0,He.jsx)("span",{className:"font-bold text-gray-800",children:null===c||void 0===c?void 0:c.name})]})]})]}),(0,He.jsx)("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 px-6 py-3 rounded-2xl border border-green-200",children:(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),(0,He.jsx)("span",{className:"text-green-800 font-semibold text-sm",children:"Sess\xe3o Ativa"})]})})]})})}),(0,He.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-12",children:(0,He.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:l&&t?(0,He.jsx)(Iv,{program:l,assignment:t}):(0,He.jsxs)("div",{className:"p-16 text-center",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 p-8 rounded-2xl w-24 h-24 mx-auto mb-8 flex items-center justify-center",children:(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin text-4xl text-indigo-600"})}),(0,He.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Preparando Sess\xe3o"}),(0,He.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed max-w-md mx-auto",children:"A carregar detalhes do registo de progresso..."}),(0,He.jsxs)("div",{className:"mt-8 flex items-center justify-center space-x-3",children:[(0,He.jsx)("div",{className:"w-3 h-3 bg-indigo-500 rounded-full animate-pulse"}),(0,He.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"0.3s"}}),(0,He.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0.6s"}})]})]})})})]})},Ny=e=>{let{contact:t,onClick:n,isLoading:a}=e;const r=(e=>{if(!e)return{badge:"\ud83d\udc68\u200d\u2695\ufe0f Terapeuta",color:"#3498db",avatar:"TR"};const t=e.toLowerCase(),n={fono:{badge:"\ud83d\udde3\ufe0f Fono",color:"#3498db",avatar:"FO"},fonoaudiologia:{badge:"\ud83d\udde3\ufe0f Fono",color:"#3498db",avatar:"FO"},psico:{badge:"\ud83e\udde0 Psico",color:"#e74c3c",avatar:"PS"},psicologia:{badge:"\ud83e\udde0 Psico",color:"#e74c3c",avatar:"PS"},music:{badge:"\ud83c\udfb5 Music",color:"#9b59b6",avatar:"MU"},musicoterapia:{badge:"\ud83c\udfb5 Music",color:"#9b59b6",avatar:"MU"},to:{badge:"\ud83c\udfe5 TO",color:"#f39c12",avatar:"TO"},terapiaocupacional:{badge:"\ud83c\udfe5 TO",color:"#f39c12",avatar:"TO"},fisio:{badge:"\ud83e\udd38 Fisio",color:"#27ae60",avatar:"FI"},fisioterapia:{badge:"\ud83e\udd38 Fisio",color:"#27ae60",avatar:"FI"},psicomotricidade:{badge:"\ud83e\udd38 Psico",color:"#27ae60",avatar:"PM"},psicopedagogia:{badge:"\ud83d\udcda Psicoped",color:"#e67e22",avatar:"PP"}};for(const[a,r]of Object.entries(n))if(t.includes(a))return r;return{badge:"\ud83d\udc68\u200d\u2695\ufe0f Terapeuta",color:"#3498db",avatar:e.split(" ").map((e=>e[0])).join("").substring(0,2).toUpperCase()}})(t.full_name);return(0,He.jsx)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4 ".concat(a?"opacity-50":"hover:transform hover:scale-105"),style:{borderLeftColor:r.color},onClick:()=>!a&&n(t),children:(0,He.jsx)("div",{className:"p-4",children:(0,He.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,He.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-md",style:{backgroundColor:r.color},children:r.avatar}),(0,He.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:t.full_name}),(0,He.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-medium text-white rounded-full",style:{backgroundColor:r.color},children:r.badge}),t.total_patients&&(0,He.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[t.total_patients," paciente",1!==t.total_patients?"s":""]})]}),(0,He.jsx)("div",{className:"text-gray-400",children:a?(0,He.jsx)(Hr,{icon:Zi,spin:!0}):(0,He.jsx)(Hr,{icon:rs})})]})})})},_y=e=>{let{patientId:t,patientName:n,type:r="therapists",onContactSelect:s,className:i=""}=e;const[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(!0),[u,h]=(0,a.useState)(null),[m,f]=(0,a.useState)(null);(0,a.useEffect)((()=>{p()}),[t,r]);const p=async()=>{try{let e;d(!0),h(null),"therapists"===r?(e=await Qg(t),l(e.therapists||[])):"colleagues"===r&&(e=await Zg(t),l(e.colleagues||[]))}catch(yj){var e,n,a,s;console.error("Erro ao buscar contatos:",yj),h((null===(e=yj.response)||void 0===e||null===(n=e.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.msg)||"Erro ao carregar contatos"),l([])}finally{d(!1)}},g=async e=>{f(e.id);try{s&&await s(e)}catch(u){console.error("Erro ao selecionar contato:",u)}finally{f(null)}};return c?(0,He.jsx)("div",{className:"flex items-center justify-center p-8 ".concat(i),children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)(Hr,{icon:Zi,spin:!0,className:"text-3xl text-blue-500 mb-2"}),(0,He.jsx)("p",{className:"text-gray-500",children:"Carregando contatos..."})]})}):u?(0,He.jsx)("div",{className:"flex items-center justify-center p-8 ".concat(i),children:(0,He.jsxs)("div",{className:"text-center text-red-500",children:[(0,He.jsx)(Hr,{icon:go,className:"text-3xl mb-2"}),(0,He.jsx)("p",{children:u}),(0,He.jsx)("button",{onClick:p,className:"mt-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"Tentar novamente"})]})}):0===o.length?(0,He.jsx)("div",{className:"flex items-center justify-center p-8 ".concat(i),children:(0,He.jsxs)("div",{className:"text-center text-gray-500",children:[(0,He.jsx)(Hr,{icon:"colleagues"===r?xs:rs,className:"text-3xl mb-2"}),(0,He.jsx)("p",{className:"text-lg font-medium mb-2",children:"colleagues"===r?"Nenhum colega encontrado":"Equipe individual"}),(0,He.jsx)("p",{className:"text-sm",children:"colleagues"===r?"Este paciente n\xe3o tem outros terapeutas atribu\xeddos para discuss\xe3o.":"Este paciente \xe9 atendido por apenas um profissional. As mensagens no chat geral chegam diretamente ao terapeuta respons\xe1vel."}),"therapists"===r&&(0,He.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,He.jsxs)("p",{className:"text-sm text-blue-700",children:["\ud83d\udca1 ",(0,He.jsx)("strong",{children:"Dica:"})," Continue usando o chat geral abaixo para se comunicar com o terapeuta."]})})]})}):(0,He.jsxs)("div",{className:i,children:[(0,He.jsxs)("div",{className:"mb-4",children:[(0,He.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"colleagues"===r?"Colegas Terapeutas":"Meus Terapeutas"}),(0,He.jsxs)("p",{className:"text-gray-600",children:["Paciente: ",(0,He.jsx)("span",{className:"font-medium",children:n})]}),(0,He.jsxs)("p",{className:"text-sm text-gray-500",children:[o.length," ","colleagues"===r?"colega":"terapeuta",1!==o.length?"s":"","colleagues"===r?" para discuss\xe3o":" na equipe"]}),1===o.length&&"therapists"===r&&(0,He.jsx)("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:(0,He.jsx)("p",{className:"text-xs text-yellow-700",children:"\u2139\ufe0f Como h\xe1 apenas um terapeuta, as mensagens no chat geral chegam diretamente a ele."})})]}),(0,He.jsx)("div",{className:"space-y-3",children:o.map((e=>(0,He.jsx)(Ny,{contact:e,onClick:g,isLoading:m===e.id},e.id)))})]})},Sy=()=>{const e=Z(),{selectedPatient:t}=ct(),[n,r]=(0,a.useState)(!1);if(!t)return(0,He.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Nenhum paciente selecionado"}),(0,He.jsx)("p",{className:"text-gray-600 mb-4",children:"Selecione um paciente para ver os colegas da equipe."}),(0,He.jsx)("button",{onClick:()=>e("/clients"),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Voltar aos Clientes"})]})});return(0,He.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,He.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,He.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,He.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,He.jsx)("button",{onClick:()=>e("/clients"),className:"text-gray-600 hover:text-gray-800 transition-colors",children:(0,He.jsx)(Hr,{icon:ci,className:"w-5 h-5"})}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Discuss\xe3o de Casos"}),(0,He.jsxs)("p",{className:"text-gray-600",children:["Converse com colegas sobre ",t.name]})]})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-2 text-indigo-600",children:[(0,He.jsx)(Hr,{icon:xs}),(0,He.jsx)("span",{className:"font-medium",children:"Equipe Multidisciplinar"})]})]})})}),(0,He.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,He.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,He.jsx)(_y,{patientId:t.id,patientName:t.name,type:"colleagues",onContactSelect:async n=>{try{r(!0),console.log("Iniciando discuss\xe3o com colega:",n),e("/case-discussion?patient=".concat(t.id,"&colleague=").concat(n.id,"&colleagueName=").concat(encodeURIComponent(n.full_name)))}catch(a){console.error("Erro ao iniciar discuss\xe3o:",a),alert("Erro ao iniciar discuss\xe3o. Tente novamente.")}finally{r(!1)}},className:"w-full"})}),(0,He.jsx)("div",{className:"mt-6 bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:(0,He.jsxs)("div",{className:"flex",children:[(0,He.jsx)("div",{className:"flex-shrink-0",children:(0,He.jsx)(Hr,{icon:rs,className:"text-indigo-400 w-5 h-5"})}),(0,He.jsxs)("div",{className:"ml-3",children:[(0,He.jsx)("h3",{className:"text-sm font-medium text-indigo-800",children:"Discuss\xe3o de Casos"}),(0,He.jsx)("div",{className:"mt-2 text-sm text-indigo-700",children:(0,He.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,He.jsx)("li",{children:"Clique em qualquer colega para iniciar uma discuss\xe3o sobre o caso"}),(0,He.jsx)("li",{children:"Compartilhe observa\xe7\xf5es, estrat\xe9gias e progressos do paciente"}),(0,He.jsx)("li",{children:"Colabore de forma integrada para otimizar o tratamento"}),(0,He.jsx)("li",{children:"Todas as discuss\xf5es ficam registradas para consulta futura"})]})})]})]})}),(0,He.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,He.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[(0,He.jsx)("div",{className:"text-green-500 mb-2",children:(0,He.jsx)(Hr,{icon:xs,className:"w-6 h-6"})}),(0,He.jsx)("h4",{className:"font-semibold text-green-800",children:"Colabora\xe7\xe3o"}),(0,He.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"Trabalho em equipe integrado"})]}),(0,He.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[(0,He.jsx)("div",{className:"text-blue-500 mb-2",children:(0,He.jsx)(Hr,{icon:rs,className:"w-6 h-6"})}),(0,He.jsx)("h4",{className:"font-semibold text-blue-800",children:"Comunica\xe7\xe3o"}),(0,He.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"Troca de experi\xeancias"})]}),(0,He.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[(0,He.jsx)("div",{className:"text-purple-500 mb-2",children:(0,He.jsx)(Hr,{icon:rs,className:"w-6 h-6"})}),(0,He.jsx)("h4",{className:"font-semibold text-purple-800",children:"Resultados"}),(0,He.jsx)("p",{className:"text-sm text-purple-700 mt-1",children:"Melhores outcomes"})]})]})]}),n&&(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg p-6 text-center",children:[(0,He.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500 mx-auto mb-4"}),(0,He.jsx)("p",{className:"text-gray-700",children:"Iniciando discuss\xe3o..."})]})})]})},ky=qe.H||"http://localhost:3000",Cy=$e.A.create({baseURL:"".concat(ky,"/super-admin"),headers:{"Content-Type":"application/json"}});Cy.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),Cy.interceptors.response.use((e=>e),(e=>{var t;return console.error("Erro na API Super Admin:",e),401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)}));const Ay=async()=>{try{return(await Cy.get("/metrics")).data}catch(e){throw e}},Py=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;try{return(await Cy.get("/growth-stats?months=".concat(e))).data}catch(t){throw t}},Ly=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;e.status&&t.append("status",e.status),e.search&&t.append("search",e.search);return(await Cy.get("/clinics?".concat(t.toString()))).data}catch(t){throw t}},Ey=async e=>{try{return(await Cy.post("/clinics",e)).data}catch(t){throw t}},Dy=async(e,t)=>{try{return(await Cy.put("/clinics/".concat(e,"/suspend"),{reason:t})).data}catch(n){throw n}},My=async e=>{try{return(await Cy.put("/clinics/".concat(e,"/reactivate"))).data}catch(t){throw t}},Oy=async(e,t)=>{try{return(await Cy.put("/clinics/".concat(e,"/patient-limit"),{maxPatients:t})).data}catch(n){throw n}},Ty=async e=>{try{return(await Cy.put("/clinics/".concat(e,"/reset-admin-password"))).data}catch(t){throw console.error("Erro ao resetar senha:",t),t}},Ry=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;e.status&&t.append("status",e.status),e.clinic_id&&t.append("clinic_id",e.clinic_id),e.overdue_only&&t.append("overdue_only","true"),e.due_soon&&t.append("due_soon","true");return(await Cy.get("/billing?".concat(t.toString()))).data}catch(t){throw t}},Iy=async e=>{try{return(await Cy.post("/billing",e)).data}catch(t){throw t}},Fy=async(e,t)=>{try{return(await Cy.put("/billing/".concat(e,"/payment"),t)).data}catch(n){throw n}},zy=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;try{return(await Cy.get("/billing/revenue-evolution?months=".concat(e))).data}catch(t){throw t}},By=async e=>{try{return(await Cy.delete("/clinics/".concat(e))).data}catch(t){throw t}},qy=async(e,t)=>{try{return(await Cy.put("/billing/".concat(e,"/due-date"),t)).data}catch(n){throw n}},Uy=$e.A.create({baseURL:"".concat(ky,"/programs"),headers:{"Content-Type":"application/json"}});Uy.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),Uy.interceptors.response.use((e=>e),(e=>{var t;return console.error("Erro na API Programas Globais:",e),401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)}));const Wy=async()=>{try{return(await Uy.get("/hierarchy")).data}catch(e){throw e}},Hy=async e=>{try{return(await Uy.post("/global",e)).data}catch(t){throw t}},Vy=async()=>{try{return(await Uy.get("/global")).data}catch(e){throw e}},Yy=async e=>{try{return(await Uy.delete("/global/".concat(e))).data}catch(t){throw t}},Gy=async e=>{try{return(await Uy.get("/".concat(e,"/usage"))).data}catch(t){throw t}},$y=qe.H||"http://localhost:3000/api",Xy=$e.A.create({baseURL:"".concat($y,"/super-admin/enterprise"),timeout:3e4,headers:{"Content-Type":"application/json"}});Xy.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),Xy.interceptors.response.use((e=>e),(e=>{var t;return console.error("Erro na API Enterprise:",e),401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)}));const Ky=async()=>{try{return(await Xy.get("/dashboard")).data}catch(e){throw console.error("Erro ao buscar dashboard executivo:",e),e}},Jy=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;e.segment&&t.append("segment",e.segment),e.risk_level&&t.append("risk_level",e.risk_level),e.sort_by&&t.append("sort_by",e.sort_by),e.order&&t.append("order",e.order);return(await Xy.get("/customer-health?".concat(t.toString()))).data}catch(t){throw console.error("Erro ao buscar customer health:",t),t}},Qy=async()=>{try{return(await Xy.get("/cohort-analysis")).data}catch(e){throw console.error("Erro ao buscar an\xe1lise de coortes:",e),e}},Zy=async()=>{try{return(await Xy.get("/churn-prediction")).data}catch(e){throw console.error("Erro ao buscar predi\xe7\xe3o de churn:",e),e}},ew=async()=>{try{return(await Xy.get("/expansion-opportunities")).data}catch(e){throw console.error("Erro ao buscar oportunidades de expans\xe3o:",e),e}},tw=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=e?"?month=".concat(e):"";return(await Xy.get("/executive-report".concat(t))).data}catch(t){throw console.error("Erro ao buscar relat\xf3rio executivo:",t),t}},nw=e=>{let{isOpen:t,onClose:n,onSubmit:r}=e;const[s,i]=(0,a.useState)({clinic_name:"",max_patients:50,admin_name:"",admin_username:""}),[o,l]=(0,a.useState)(!1),[c,d]=(0,a.useState)({}),u=e=>{const{name:t,value:n}=e.target;i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:"max_patients"===t?parseInt(n)||0:n}))),c[t]&&d((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:""})))},h=async e=>{e.preventDefault();const t=(()=>{const e={};return s.clinic_name.trim()||(e.clinic_name="Nome da cl\xednica \xe9 obrigat\xf3rio"),s.admin_name.trim()||(e.admin_name="Nome do administrador \xe9 obrigat\xf3rio"),s.admin_username.trim()?s.admin_username.length<3&&(e.admin_username="Username deve ter pelo menos 3 caracteres"):e.admin_username="Username \xe9 obrigat\xf3rio",(!s.max_patients||s.max_patients<1)&&(e.max_patients="Limite de pacientes deve ser maior que 0"),e})();if(Object.keys(t).length>0)d(t);else{l(!0);try{await r(s),i({clinic_name:"",max_patients:50,admin_name:"",admin_username:""}),d({})}catch(o){var n,a;if(console.error("Erro ao criar cl\xednica:",o),null!==(n=o.response)&&void 0!==n&&null!==(a=n.data)&&void 0!==a&&a.errors){const e={};o.response.data.errors.forEach((t=>{t.msg.includes("Nome de usu\xe1rio")&&(e.admin_username="Este username j\xe1 est\xe1 em uso")})),d(e)}}finally{l(!1)}}};return t?(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:ao,className:"text-2xl text-blue-600 mr-3"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Nova Cl\xednica"})]}),(0,He.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsxs)("form",{onSubmit:h,className:"p-6 space-y-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Cl\xednica *"}),(0,He.jsx)("input",{type:"text",name:"clinic_name",value:s.clinic_name,onChange:u,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(c.clinic_name?"border-red-500":"border-gray-300"),placeholder:"Ex: Cl\xednica ABA Plus"}),c.clinic_name&&(0,He.jsx)("p",{className:"text-red-500 text-xs mt-1",children:c.clinic_name})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Limite de Pacientes *"}),(0,He.jsx)("input",{type:"number",name:"max_patients",value:s.max_patients,onChange:u,min:"1",max:"1000",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(c.max_patients?"border-red-500":"border-gray-300")}),c.max_patients&&(0,He.jsx)("p",{className:"text-red-500 text-xs mt-1",children:c.max_patients})]}),(0,He.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,He.jsx)("div",{className:"flex items-center justify-center",children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Modelo de Cobran\xe7a"}),(0,He.jsx)("div",{className:"text-lg font-bold text-green-600",children:"R$ 34,90 por paciente/m\xeas"}),(0,He.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Exemplo: ",s.max_patients," pacientes = R$ ",(34.9*s.max_patients).toLocaleString("pt-BR",{minimumFractionDigits:2})," m\xe1ximo/m\xeas"]})]})})}),(0,He.jsx)("div",{className:"border-t border-gray-200 my-4 pt-4",children:(0,He.jsxs)("div",{className:"flex items-center mb-4",children:[(0,He.jsx)(Hr,{icon:js,className:"text-blue-600 mr-2"}),(0,He.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:"Dados do Administrador"})]})}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),(0,He.jsx)("input",{type:"text",name:"admin_name",value:s.admin_name,onChange:u,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(c.admin_name?"border-red-500":"border-gray-300"),placeholder:"Ex: Jo\xe3o Silva"}),c.admin_name&&(0,He.jsx)("p",{className:"text-red-500 text-xs mt-1",children:c.admin_name})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username de Login *"}),(0,He.jsx)("input",{type:"text",name:"admin_username",value:s.admin_username,onChange:u,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(c.admin_username?"border-red-500":"border-gray-300"),placeholder:"Ex: clinica.abaplus"}),c.admin_username&&(0,He.jsx)("p",{className:"text-red-500 text-xs mt-1",children:c.admin_username}),(0,He.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"O administrador definir\xe1 a senha no primeiro acesso"})]})]}),(0,He.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,He.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:o,children:"Cancelar"}),(0,He.jsx)("button",{onClick:h,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50",children:o?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"animate-spin mr-2"}),"Criando..."]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:fo,className:"mr-2"}),"Criar Cl\xednica"]})})]})]})}):null},aw=e=>{let{isOpen:t,onClose:n,clinic:r,onSubmit:s,onResetPassword:i}=e;const[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)(!1),[u,h]=(0,a.useState)(""),[m,f]=(0,a.useState)("limit"),[p,g]=(0,a.useState)(!1);(0,a.useEffect)((()=>{var e;t&&r&&(l((null===(e=r.max_patients)||void 0===e?void 0:e.toString())||""),h(""),f("limit"))}),[t,r]);const x=async e=>{e.preventDefault();const t=parseInt(o),n=parseInt((null===r||void 0===r?void 0:r.patients_count)||0);if(!t||t<1)h("Limite deve ser um n\xfamero maior que 0");else if(t<n)h("Limite n\xe3o pode ser menor que ".concat(n," (pacientes atuais)"));else if(t!==r.max_patients){d(!0),h("");try{await s(t)}catch(u){console.error("Erro ao atualizar limite:",u),h("Erro ao atualizar limite de pacientes")}finally{d(!1)}}else h("O limite informado \xe9 igual ao atual")};if(!t||!r)return null;const b=parseInt(r.patients_count||0),v=parseInt(r.max_patients||0),y=parseInt(o)||0,w=y-v;return(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,He.jsxs)("div",{className:"border-b border-gray-200",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:gs,className:"text-2xl text-blue-600 mr-3"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Gerenciar Cl\xednica"})]}),(0,He.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsxs)("div",{className:"flex border-t",children:[(0,He.jsxs)("button",{onClick:()=>f("limit"),className:"flex-1 py-3 px-4 text-sm font-medium text-center border-b-2 transition-colors ".concat("limit"===m?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[(0,He.jsx)(Hr,{icon:xs,className:"mr-2"}),"Limite de Pacientes"]}),(0,He.jsxs)("button",{onClick:()=>f("password"),className:"flex-1 py-3 px-4 text-sm font-medium text-center border-b-2 transition-colors ".concat("password"===m?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[(0,He.jsx)(Hr,{icon:Ns,className:"mr-2"}),"Resetar Senha Admin"]})]})]}),(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,He.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:r.name}),(0,He.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-gray-500",children:"Admin:"}),(0,He.jsx)("div",{className:"font-semibold text-gray-900",children:r.admin_name})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-gray-500",children:"E-mail:"}),(0,He.jsx)("div",{className:"font-semibold text-gray-900 text-xs",children:r.admin_email})]}),"limit"===m&&(0,He.jsxs)(He.Fragment,{children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-gray-500",children:"Pacientes atuais:"}),(0,He.jsx)("div",{className:"font-semibold text-gray-900",children:b})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-gray-500",children:"Limite atual:"}),(0,He.jsx)("div",{className:"font-semibold text-gray-900",children:v})]})]})]}),"limit"===m&&(0,He.jsxs)("div",{className:"mt-3",children:[(0,He.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,He.jsx)("span",{children:"Ocupa\xe7\xe3o atual"}),(0,He.jsxs)("span",{children:[Math.round(b/v*100),"%"]})]}),(0,He.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,He.jsx)("div",{className:"h-2 rounded-full ".concat(b/v>.8?"bg-red-500":b/v>.6?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(100,b/v*100),"%")}})})]})]}),"limit"===m&&(0,He.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:xs,className:"mr-2 text-blue-600"}),"Novo Limite de Pacientes"]}),(0,He.jsx)("input",{type:"number",value:o,onChange:e=>{const t=e.target.value;l(t),u&&h("")},min:b,max:"1000",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg font-semibold ".concat(u?"border-red-500":"border-gray-300"),placeholder:"Digite o novo limite"}),y&&y!==v&&!u&&(0,He.jsxs)("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:w>0?fo:go,className:"mr-2 ".concat(w>0?"text-green-600":"text-yellow-600")}),(0,He.jsx)("span",{className:"text-sm",children:w>0?"Aumento de ".concat(w," paciente").concat(w>1?"s":""):"Redu\xe7\xe3o de ".concat(Math.abs(w)," paciente").concat(Math.abs(w)>1?"s":"")})]}),(0,He.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:["Nova ocupa\xe7\xe3o: ",Math.round(b/y*100),"%"]})]})]}),u&&(0,He.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,He.jsxs)("div",{className:"flex",children:[(0,He.jsx)(Hr,{icon:go,className:"text-red-600 mr-2 mt-0.5"}),(0,He.jsx)("span",{className:"text-red-700 text-sm",children:u})]})}),(0,He.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg text-xs text-gray-600",children:[(0,He.jsx)("strong",{children:"Dicas:"}),(0,He.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,He.jsx)("li",{children:"O limite n\xe3o pode ser menor que o n\xfamero atual de pacientes"}),(0,He.jsx)("li",{children:"Recomenda-se manter uma margem de 10-20% para crescimento"}),(0,He.jsx)("li",{children:"Cl\xednicas com mais de 80% de ocupa\xe7\xe3o podem precisar expandir"})]})]})]}),"password"===m&&(0,He.jsxs)("div",{className:"space-y-4",children:[(0,He.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,He.jsxs)("div",{className:"flex",children:[(0,He.jsx)(Hr,{icon:go,className:"text-red-600 mr-2 mt-0.5"}),(0,He.jsxs)("div",{className:"text-red-800 text-sm",children:[(0,He.jsx)("strong",{children:"Aten\xe7\xe3o!"})," Esta a\xe7\xe3o ir\xe1 resetar a senha do administrador da cl\xednica para NULL. O administrador ser\xe1 obrigado a cadastrar uma nova senha no pr\xf3ximo login."]})]})}),(0,He.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,He.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Como funciona:"}),(0,He.jsxs)("ul",{className:"text-blue-800 text-sm space-y-1",children:[(0,He.jsx)("li",{children:"\u2022 A senha atual ser\xe1 removida do sistema"}),(0,He.jsx)("li",{children:"\u2022 O administrador n\xe3o conseguir\xe1 fazer login com a senha atual"}),(0,He.jsx)("li",{children:"\u2022 No pr\xf3ximo acesso, ser\xe1 solicitada a cria\xe7\xe3o de uma nova senha"}),(0,He.jsx)("li",{children:"\u2022 Apenas o pr\xf3prio administrador definir\xe1 a nova senha"})]})]}),(0,He.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg text-xs text-gray-600",children:[(0,He.jsx)("strong",{children:"Seguran\xe7a:"}),(0,He.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,He.jsx)("li",{children:"O super admin nunca tem acesso \xe0s senhas dos usu\xe1rios"}),(0,He.jsx)("li",{children:"Esta \xe9 uma opera\xe7\xe3o de seguran\xe7a que remove credenciais"}),(0,He.jsx)("li",{children:"Informe o administrador sobre a necessidade de criar nova senha"})]})]})]})]}),(0,He.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,He.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:c||p,children:"Cancelar"}),"limit"===m&&(0,He.jsx)("button",{onClick:x,disabled:c||!o||u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50",children:c?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"animate-spin mr-2"}),"Atualizando..."]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:fo,className:"mr-2"}),"Atualizar Limite"]})}),"password"===m&&(0,He.jsx)("button",{onClick:async()=>{if(window.confirm("Tem certeza que deseja resetar a senha do administrador? Ele precisar\xe1 cadastrar uma nova senha no pr\xf3ximo login.")){g(!0);try{await i(r.id),alert("Senha resetada! O administrador dever\xe1 cadastrar nova senha no pr\xf3ximo login.")}catch(u){console.error("Erro ao resetar senha:",u),alert("Erro ao resetar senha do administrador")}finally{g(!1)}}},disabled:p,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center disabled:opacity-50",children:p?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"animate-spin mr-2"}),"Resetando..."]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Ns,className:"mr-2"}),"Resetar Senha"]})})]})]})})},rw=e=>{let{isOpen:t,onClose:n,clinic:r,onSubmit:s}=e;const[i,o]=(0,a.useState)(""),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(""),h=async e=>{if(e.preventDefault(),i.trim())if(i.trim().length<10)u("Motivo deve ter pelo menos 10 caracteres");else{c(!0),u("");try{await s(i.trim()),o("")}catch(d){console.error("Erro ao suspender cl\xednica:",d),u("Erro ao suspender cl\xednica")}finally{c(!1)}}else u("Motivo da suspens\xe3o \xe9 obrigat\xf3rio")},m=()=>{o(""),u(""),n()};if(!t||!r)return null;const f=new Date(r.created_at).toLocaleDateString("pt-BR"),p=parseInt(r.therapists_count||0)+parseInt(r.parents_count||0);return(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:go,className:"text-2xl text-red-600 mr-3"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Suspender Cl\xednica"})]}),(0,He.jsx)("button",{onClick:m,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,He.jsxs)("div",{className:"flex",children:[(0,He.jsx)(Hr,{icon:go,className:"text-red-600 mr-3 mt-0.5"}),(0,He.jsxs)("div",{className:"text-sm",children:[(0,He.jsx)("h4",{className:"font-semibold text-red-800 mb-2",children:"Aten\xe7\xe3o!"}),(0,He.jsx)("p",{className:"text-red-700",children:"Esta a\xe7\xe3o suspender\xe1 completamente o acesso da cl\xednica ao sistema. Todos os usu\xe1rios (terapeutas e pais) ser\xe3o bloqueados, exceto o administrador que ter\xe1 acesso limitado apenas para regulariza\xe7\xe3o."})]})]})}),(0,He.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,He.jsxs)("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[(0,He.jsx)(Hr,{icon:ao,className:"mr-2 text-blue-600"}),r.name]}),(0,He.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("div",{className:"text-gray-500",children:"Pacientes"}),(0,He.jsx)("div",{className:"font-semibold text-gray-900",children:r.patients_count||0})]}),(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("div",{className:"text-gray-500",children:"Usu\xe1rios"}),(0,He.jsx)("div",{className:"font-semibold text-gray-900",children:p})]}),(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("div",{className:"text-gray-500",children:"Criada em"}),(0,He.jsx)("div",{className:"font-semibold text-gray-900",children:f})]})]}),(0,He.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,He.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,He.jsx)("span",{className:"text-gray-500",children:"Administrador:"}),(0,He.jsxs)("div",{className:"text-right",children:[(0,He.jsx)("div",{className:"font-medium text-gray-900",children:r.admin_name}),(0,He.jsxs)("div",{className:"text-gray-500",children:["@",r.admin_username]})]})]})})]}),(0,He.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo da Suspens\xe3o *"}),(0,He.jsxs)("div",{className:"mb-3",children:[(0,He.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Motivos comuns (clique para selecionar):"}),(0,He.jsx)("div",{className:"space-y-1",children:["Inadimpl\xeancia - Pagamento em atraso h\xe1 mais de 10 dias","Inadimpl\xeancia - M\xfaltiplas faturas em aberto","Viola\xe7\xe3o dos termos de uso","Inatividade prolongada - Mais de 60 dias sem acesso","Solicita\xe7\xe3o da pr\xf3pria cl\xednica","Problemas t\xe9cnicos ou de seguran\xe7a"].map(((e,t)=>(0,He.jsx)("button",{type:"button",onClick:()=>o(e),className:"text-left w-full px-3 py-2 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",children:e},t)))})]}),(0,He.jsx)("textarea",{value:i,onChange:e=>{o(e.target.value),d&&u("")},rows:"4",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent resize-none ".concat(d?"border-red-500":"border-gray-300"),placeholder:"Descreva o motivo detalhado da suspens\xe3o..."}),(0,He.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[d&&(0,He.jsx)("span",{className:"text-red-500 text-xs",children:d}),(0,He.jsxs)("div",{className:"text-xs text-gray-500 ml-auto",children:[i.length,"/500 caracteres"]})]})]}),(0,He.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[(0,He.jsx)("h5",{className:"font-medium text-yellow-800 mb-2",children:"Consequ\xeancias da Suspens\xe3o:"}),(0,He.jsxs)("ul",{className:"text-xs text-yellow-700 space-y-1",children:[(0,He.jsx)("li",{children:"\u2022 Terapeutas n\xe3o conseguir\xe3o fazer login"}),(0,He.jsx)("li",{children:"\u2022 Pais n\xe3o ter\xe3o acesso aos dados dos filhos"}),(0,He.jsx)("li",{children:"\u2022 Administrador ter\xe1 acesso limitado para regulariza\xe7\xe3o"}),(0,He.jsx)("li",{children:"\u2022 Dados permanecem seguros e podem ser reativados"}),(0,He.jsx)("li",{children:"\u2022 Cobran\xe7a continua ativa at\xe9 regulariza\xe7\xe3o"})]})]})]})]}),(0,He.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,He.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:l,children:"Cancelar"}),(0,He.jsx)("button",{onClick:h,disabled:l||!i.trim()||i.trim().length<10,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center disabled:opacity-50",children:l?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"animate-spin mr-2"}),"Suspendendo..."]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:ks,className:"mr-2"}),"Suspender Cl\xednica"]})})]})]})})},sw=e=>{var t,n;let{isOpen:r,onClose:s,billing:i,onSubmit:o}=e;const[l,c]=(0,a.useState)({payment_date:(new Date).toISOString().split("T")[0],payment_method:"credit_card",notes:""}),[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)("");(0,a.useEffect)((()=>{r&&i&&(c({payment_date:(new Date).toISOString().split("T")[0],payment_method:"credit_card",notes:""}),m(""))}),[r,i]);const f=async e=>{if(e.preventDefault(),!l.payment_date)return void m("Data de pagamento \xe9 obrigat\xf3ria");const t=new Date(l.payment_date),n=new Date;if(n.setHours(23,59,59,999),t>n)m("Data de pagamento n\xe3o pode ser futura");else{u(!0),m("");try{await o(l)}catch(h){console.error("Erro ao registrar pagamento:",h),m("Erro ao registrar pagamento")}finally{u(!1)}}},p=()=>{c({payment_date:(new Date).toISOString().split("T")[0],payment_method:"credit_card",notes:""}),m(""),s()},g=e=>{const{name:t,value:n}=e.target;c((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:n}))),h&&m("")};if(!r||!i)return null;const x=Math.floor((new Date-new Date(i.due_date))/864e5),b=x>0&&"pending"===i.status;return(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:Ci,className:"text-2xl text-green-600 mr-3"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Registrar Pagamento"})]}),(0,He.jsx)("button",{onClick:p,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,He.jsxs)("h4",{className:"font-medium text-gray-900 flex items-center",children:[(0,He.jsx)(Hr,{icon:ao,className:"mr-2 text-blue-600"}),i.clinic_name]}),(0,He.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("premium"===i.plan_type?"bg-purple-100 text-purple-800":"enterprise"===i.plan_type?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:(null===(t=i.plan_type)||void 0===t?void 0:t.charAt(0).toUpperCase())+(null===(n=i.plan_type)||void 0===n?void 0:n.slice(1))})]}),(0,He.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-gray-500",children:"Valor:"}),(0,He.jsx)("div",{className:"font-bold text-lg text-green-600",children:(e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat(e)||0))(i.amount)})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-gray-500",children:"Vencimento:"}),(0,He.jsx)("div",{className:"font-semibold ".concat(b?"text-red-600":"text-gray-900"),children:(v=i.due_date,new Date(v).toLocaleDateString("pt-BR"))}),b&&(0,He.jsxs)("div",{className:"text-xs text-red-500",children:[x," dia",x>1?"s":""," em atraso"]})]})]})]}),b&&(0,He.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:(0,He.jsxs)("div",{className:"flex",children:[(0,He.jsx)(Hr,{icon:gi,className:"text-red-600 mr-2 mt-0.5"}),(0,He.jsxs)("div",{className:"text-sm text-red-700",children:[(0,He.jsx)("strong",{children:"Pagamento em Atraso:"})," Esta cobran\xe7a est\xe1 vencida h\xe1 ",x," dia",x>1?"s":"",". Ap\xf3s confirmar o pagamento, a cl\xednica ser\xe1 automaticamente reativada."]})]})}),(0,He.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2 text-blue-600"}),"Data do Pagamento *"]}),(0,He.jsx)("input",{type:"date",name:"payment_date",value:l.payment_date,onChange:g,max:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent ".concat(h&&h.includes("Data")?"border-red-500":"border-gray-300")})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:Ss,className:"mr-2 text-blue-600"}),"M\xe9todo de Pagamento *"]}),(0,He.jsx)("select",{name:"payment_method",value:l.payment_method,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[{value:"credit_card",label:"\ud83d\udcb3 Cart\xe3o de Cr\xe9dito"},{value:"debit_card",label:"\ud83d\udcb3 Cart\xe3o de D\xe9bito"},{value:"bank_transfer",label:"\ud83c\udfe6 Transfer\xeancia Banc\xe1ria"},{value:"pix",label:"\ud83d\udcf1 PIX"},{value:"bank_slip",label:"\ud83d\udcc4 Boleto Banc\xe1rio"},{value:"cash",label:"\ud83d\udcb5 Dinheiro"},{value:"other",label:"\ud83d\udd27 Outros"}].map((e=>(0,He.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observa\xe7\xf5es (opcional)"}),(0,He.jsx)("textarea",{name:"notes",value:l.notes,onChange:g,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none",placeholder:"Ex: N\xfamero da transa\xe7\xe3o, observa\xe7\xf5es sobre o pagamento..."}),(0,He.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[l.notes.length,"/200 caracteres"]})]})]}),h&&(0,He.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,He.jsxs)("div",{className:"flex",children:[(0,He.jsx)(Hr,{icon:gi,className:"text-red-600 mr-2 mt-0.5"}),(0,He.jsx)("span",{className:"text-red-700 text-sm",children:h})]})}),(0,He.jsxs)("div",{className:"mt-4 bg-green-50 border border-green-200 rounded-lg p-3",children:[(0,He.jsx)("h5",{className:"font-medium text-green-800 mb-2",children:"Ap\xf3s confirmar o pagamento:"}),(0,He.jsxs)("ul",{className:"text-xs text-green-700 space-y-1",children:[(0,He.jsx)("li",{children:'\u2022 Status da cobran\xe7a ser\xe1 alterado para "Pago"'}),"suspended"===i.clinic_status&&(0,He.jsx)("li",{children:"\u2022 Cl\xednica ser\xe1 automaticamente reativada"}),(0,He.jsx)("li",{children:"\u2022 M\xe9tricas financeiras ser\xe3o atualizadas"}),(0,He.jsx)("li",{children:"\u2022 Registro ficar\xe1 dispon\xedvel no hist\xf3rico"})]})]})]}),(0,He.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,He.jsx)("button",{type:"button",onClick:p,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:d,children:"Cancelar"}),(0,He.jsx)("button",{onClick:f,disabled:d||!l.payment_date,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center disabled:opacity-50",children:d?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"animate-spin mr-2"}),"Registrando..."]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:fo,className:"mr-2"}),"Confirmar Pagamento"]})})]})]})});var v},iw=e=>{let{days:t,currentDate:n,today:a,billingsByDate:r,weekDays:s,getDateStatus:i,getStatusStyles:o,formatCurrency:l,onViewBilling:c,onEditDueDate:d,onRecordPayment:u}=e;return(0,He.jsxs)("div",{className:"grid grid-cols-7 gap-0",children:[s.map((e=>(0,He.jsx)("div",{className:"bg-gray-100 p-3 text-center font-medium text-gray-700 border-b border-gray-200",children:e},e))),t.map(((e,t)=>{const s=e.toDateString(),h=r[s]||[],m=e.toDateString()===a.toDateString(),f=e.getMonth()===n.getMonth(),p=i(e,h);return(0,He.jsxs)("div",{className:o(p,m,f),children:[(0,He.jsx)("div",{className:"p-2",children:(0,He.jsx)("div",{className:"text-sm font-medium ".concat(m?"bg-blue-600 text-white w-6 h-6 rounded-full flex items-center justify-center":""),children:e.getDate()})}),h.length>0&&(0,He.jsxs)("div",{className:"absolute inset-x-1 bottom-1 space-y-1 max-h-20 overflow-y-auto",children:[h.slice(0,3).map((e=>(0,He.jsx)(cw,{billing:e,formatCurrency:l,onViewBilling:c,onEditDueDate:d,onRecordPayment:u},e.id))),h.length>3&&(0,He.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["+",h.length-3," mais"]})]})]},t)}))]})},ow=e=>{let{days:t,today:n,billingsByDate:a,weekDays:r,formatCurrency:s,onViewBilling:i,onEditDueDate:o,onRecordPayment:l}=e;return(0,He.jsx)("div",{className:"grid grid-cols-7 gap-4",children:t.map(((e,t)=>{const c=e.toDateString(),d=a[c]||[],u=e.toDateString()===n.toDateString();return(0,He.jsxs)("div",{className:"bg-white border rounded-lg p-4 min-h-64 ".concat(u?"ring-2 ring-blue-500":"border-gray-200"),children:[(0,He.jsxs)("div",{className:"text-center mb-3",children:[(0,He.jsx)("div",{className:"text-sm font-medium text-gray-600",children:r[e.getDay()]}),(0,He.jsx)("div",{className:"text-lg font-bold ".concat(u?"bg-blue-600 text-white w-8 h-8 rounded-full flex items-center justify-center mx-auto":"text-gray-900"),children:e.getDate()})]}),(0,He.jsx)("div",{className:"space-y-2",children:d.map((e=>(0,He.jsx)(cw,{billing:e,formatCurrency:s,onViewBilling:i,onEditDueDate:o,onRecordPayment:l,compact:!1},e.id)))})]},t)}))})},lw=e=>{let{date:t,today:n,billingsByDate:a,formatCurrency:r,onViewBilling:s,onEditDueDate:i,onRecordPayment:o}=e;const l=a[t.toDateString()]||[],c=t.toDateString()===n.toDateString();return(0,He.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,He.jsxs)("div",{className:"p-6 border-b border-gray-200 ".concat(c?"bg-blue-50":"bg-gray-50"),children:[(0,He.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:t.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,He.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[l.length," cobran\xe7a",1!==l.length?"s":""," ",l.length>0?"programada"+(l.length>1?"s":""):"programadas"]})]}),(0,He.jsx)("div",{className:"p-6",children:l.length>0?(0,He.jsx)("div",{className:"space-y-4",children:l.map((e=>(0,He.jsx)("div",{className:"p-4 rounded-lg border ".concat("paid"===e.status?"bg-green-50 border-green-200":"overdue"===e.status?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"),children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("h4",{className:"font-semibold text-gray-900",children:e.clinic_name}),(0,He.jsx)("p",{className:"text-lg font-bold text-gray-800",children:r(e.amount)}),(0,He.jsxs)("p",{className:"text-sm text-gray-600",children:["Status: ","paid"===e.status?"Pago":"overdue"===e.status?"Vencido":"Pendente"]})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("button",{onClick:()=>s&&s(e),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-white rounded transition-colors",title:"Ver detalhes",children:(0,He.jsx)(Hr,{icon:ni})}),(0,He.jsx)("button",{onClick:()=>i&&i(e),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-white rounded transition-colors",title:"Editar data de vencimento",children:(0,He.jsx)(Hr,{icon:gs})}),"paid"!==e.status&&(0,He.jsx)("button",{onClick:()=>o&&o(e),className:"p-2 text-gray-600 hover:text-green-600 hover:bg-white rounded transition-colors",title:"Registrar pagamento",children:(0,He.jsx)(Hr,{icon:Ci})})]})]})},e.id)))}):(0,He.jsxs)("div",{className:"text-center py-12",children:[(0,He.jsx)(Hr,{icon:Zr,className:"text-4xl text-gray-400 mb-4"}),(0,He.jsx)("p",{className:"text-gray-500",children:"Nenhuma cobran\xe7a programada para este dia."})]})})]})},cw=e=>{let{billing:t,formatCurrency:n,onViewBilling:a,onEditDueDate:r,onRecordPayment:s,compact:i=!0}=e;return(0,He.jsxs)("div",{className:"".concat(i?"text-xs":"text-sm"," p-").concat(i?"1":"3"," rounded cursor-pointer group relative ").concat("paid"===t.status?"bg-green-100 text-green-800":"overdue"===t.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),onClick:()=>a&&a(t),children:[(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsx)("span",{className:"truncate font-medium ".concat(i?"":"text-base"),children:t.clinic_name}),(0,He.jsxs)("div",{className:"flex items-center space-x-1 ".concat(i?"opacity-0 group-hover:opacity-100":""," transition-opacity"),children:[(0,He.jsx)("button",{onClick:e=>{e.stopPropagation(),a&&a(t)},className:"text-gray-600 hover:text-blue-600",title:"Ver detalhes",children:(0,He.jsx)(Hr,{icon:ni,className:i?"w-3 h-3":"w-4 h-4"})}),(0,He.jsx)("button",{onClick:e=>{e.stopPropagation(),r&&r(t)},className:"text-gray-600 hover:text-blue-600",title:"Editar data de vencimento",children:(0,He.jsx)(Hr,{icon:gs,className:i?"w-3 h-3":"w-4 h-4"})}),"paid"!==t.status&&(0,He.jsx)("button",{onClick:e=>{e.stopPropagation(),s&&s(t)},className:"text-gray-600 hover:text-green-600",title:"Registrar pagamento",children:(0,He.jsx)(Hr,{icon:Ci,className:i?"w-3 h-3":"w-4 h-4"})})]})]}),(0,He.jsx)("div",{className:"".concat(i?"text-xs":"text-sm"," opacity-75"),children:n(t.amount)})]})},dw=e=>{let{billings:t,onViewBilling:n,onRecordPayment:r,onEditDueDate:s}=e;const[i,o]=(0,a.useState)(new Date),[l,c]=(0,a.useState)("month"),d=e=>{const t=new Date(i);"month"===l?t.setMonth(i.getMonth()+e):"week"===l?t.setDate(i.getDate()+7*e):"day"===l&&t.setDate(i.getDate()+e),o(t)},u=(0,a.useMemo)((()=>{const e={};return t.forEach((t=>{const n=new Date(t.due_date).toDateString();e[n]||(e[n]=[]),e[n].push(t)})),e}),[t]),h=(e,t)=>{if(!t||0===t.length)return"normal";const n=e<new Date,a=t.every((e=>"paid"===e.status)),r=t.some((e=>"pending"===e.status)),s=t.some((e=>"overdue"===e.status));return a?"paid":s||n&&r?"overdue":r?"pending":"normal"},m=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0),f=new Date,p=["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"];return(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,He.jsx)("div",{className:"bg-gray-50 border-b border-gray-200 p-4",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,He.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2 text-blue-600"}),"Calend\xe1rio de Cobran\xe7as"]}),(0,He.jsx)("button",{onClick:()=>{o(new Date)},className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Hoje"})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,He.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden",children:[(0,He.jsxs)("button",{onClick:()=>c("month"),className:"px-3 py-1 text-sm flex items-center transition-colors ".concat("month"===l?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:[(0,He.jsx)(Hr,{icon:cs,className:"mr-1"}),"M\xeas"]}),(0,He.jsxs)("button",{onClick:()=>c("week"),className:"px-3 py-1 text-sm flex items-center transition-colors ".concat("week"===l?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-1"}),"Semana"]}),(0,He.jsxs)("button",{onClick:()=>c("day"),className:"px-3 py-1 text-sm flex items-center transition-colors ".concat("day"===l?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:[(0,He.jsx)(Hr,{icon:fs,className:"mr-1"}),"Dia"]})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:ti,className:"text-green-500 mr-1"}),(0,He.jsx)("span",{children:"Pago"})]}),(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:ti,className:"text-yellow-500 mr-1"}),(0,He.jsx)("span",{children:"Pendente"})]}),(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:ti,className:"text-red-500 mr-1"}),(0,He.jsx)("span",{children:"Vencido"})]})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("button",{onClick:()=>d(-1),className:"p-2 hover:bg-gray-200 rounded transition-colors",children:(0,He.jsx)(Hr,{icon:$i})}),(0,He.jsxs)("span",{className:"font-medium text-gray-900 min-w-48 text-center",children:["month"===l&&"".concat(["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][i.getMonth()]," ").concat(i.getFullYear()),"week"===l&&"Semana de ".concat(i.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})),"day"===l&&i.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),(0,He.jsx)("button",{onClick:()=>d(1),className:"p-2 hover:bg-gray-200 rounded transition-colors",children:(0,He.jsx)(Hr,{icon:Xi})})]})]})]})}),"month"===l&&(0,He.jsx)(iw,{days:(()=>{const e=i.getFullYear(),t=i.getMonth(),n=new Date(e,t,1),a=new Date(n);a.setDate(a.getDate()-n.getDay());const r=[],s=new Date(a);s.setDate(s.getDate()+42);for(let i=new Date(a);i<s;i.setDate(i.getDate()+1))r.push(new Date(i));return r})(),currentDate:i,today:f,billingsByDate:u,weekDays:p,getDateStatus:h,getStatusStyles:(e,t,n)=>{const a="relative w-full h-32 border border-gray-200 hover:bg-gray-50 transition-colors ".concat(n?"bg-white":"bg-gray-50 text-gray-400");let r="";switch(t&&(r="ring-2 ring-blue-500"),e){case"paid":r+=" bg-green-50 border-green-200";break;case"overdue":r+=" bg-red-50 border-red-300";break;case"pending":r+=" bg-yellow-50 border-yellow-200"}return"".concat(a," ").concat(r)},formatCurrency:m,onViewBilling:n,onEditDueDate:s,onRecordPayment:r}),"week"===l&&(0,He.jsx)(ow,{days:(()=>{const e=new Date(i),t=e.getDay(),n=e.getDate()-t;e.setDate(n);const a=[];for(let r=0;r<7;r++){const t=new Date(e);t.setDate(e.getDate()+r),a.push(t)}return a})(),currentDate:i,today:f,billingsByDate:u,weekDays:p,getDateStatus:h,formatCurrency:m,onViewBilling:n,onEditDueDate:s,onRecordPayment:r}),"day"===l&&(0,He.jsx)(lw,{date:i,today:f,billingsByDate:u,formatCurrency:m,onViewBilling:n,onEditDueDate:s,onRecordPayment:r}),(0,He.jsx)("div",{className:"bg-gray-50 border-t border-gray-200 p-4",children:(0,He.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-center",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"text-sm text-gray-600",children:"Total de Cobran\xe7as"}),(0,He.jsx)("div",{className:"font-bold text-lg text-gray-900",children:t.length})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"text-sm text-gray-600",children:"Pagas"}),(0,He.jsx)("div",{className:"font-bold text-lg text-green-600",children:t.filter((e=>"paid"===e.status)).length})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"text-sm text-gray-600",children:"Pendentes"}),(0,He.jsx)("div",{className:"font-bold text-lg text-yellow-600",children:t.filter((e=>"pending"===e.status)).length})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"text-sm text-gray-600",children:"Vencidas"}),(0,He.jsx)("div",{className:"font-bold text-lg text-red-600",children:t.filter((e=>"overdue"===e.status)).length})]})]})})]})},uw=e=>{let{isOpen:t,onClose:n,onSubmit:r}=e;const[s,i]=(0,a.useState)({clinic_id:"",due_date:"",notes:""}),[o,l]=(0,a.useState)([]),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(0),[m,f]=(0,a.useState)(!1),[p,g]=(0,a.useState)("");(0,a.useEffect)((()=>{if(t){x();const e=new Date;e.setDate(e.getDate()+30),i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{due_date:e.toISOString().split("T")[0]})))}}),[t]);const x=async()=>{try{const e=await Ly();l(e.data||[])}catch(p){console.error("Erro ao carregar cl\xednicas:",p),g("Erro ao carregar cl\xednicas")}},b=()=>{i({clinic_id:"",due_date:"",notes:""}),d(null),h(0),g(""),n()},v=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0);return t?(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:No,className:"text-2xl text-green-600 mr-3"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Nova Cobran\xe7a"})]}),(0,He.jsx)("button",{onClick:b,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s.clinic_id&&s.due_date)if(c&&0!==c.current_patients){f(!0),g("");try{await r({clinic_id:parseInt(s.clinic_id),due_date:s.due_date,notes:s.notes||"Cobran\xe7a autom\xe1tica - ".concat((null===c||void 0===c?void 0:c.current_patients)||0," pacientes")}),i({clinic_id:"",due_date:"",notes:""}),d(null),h(0)}catch(p){console.error("Erro ao criar cobran\xe7a:",p),g("Erro ao criar cobran\xe7a")}finally{f(!1)}}else g("A cl\xednica selecionada deve ter pelo menos 1 paciente para cobran\xe7a");else g("Cl\xednica e data de vencimento s\xe3o obrigat\xf3rios")},className:"p-6 space-y-6",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ao,className:"mr-2"}),"Cl\xednica *"]}),(0,He.jsxs)("select",{value:s.clinic_id,onChange:e=>{const t=e.target.value,n=o.find((e=>e.id===parseInt(t)));if(i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{clinic_id:t}))),d(n),n){const e=34.9,t=(n.current_patients||0)*e;h(t)}else h(0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,He.jsx)("option",{value:"",children:"Selecione uma cl\xednica"}),o.map((e=>(0,He.jsxs)("option",{value:e.id,children:[e.name," (",e.current_patients||0," pacientes)"]},e.id)))]})]}),c&&(0,He.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,He.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Informa\xe7\xf5es da Cl\xednica"}),(0,He.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-blue-700 font-medium",children:"Status:"}),(0,He.jsx)("span",{className:"ml-2 px-2 py-1 rounded text-xs ".concat("active"===c.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"active"===c.status?"Ativa":"Suspensa"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-blue-700 font-medium",children:"Pacientes:"}),(0,He.jsxs)("span",{className:"ml-2 text-blue-900",children:[c.current_patients||0," / ",c.max_patients]})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-blue-700 font-medium",children:"Terapeutas:"}),(0,He.jsx)("span",{className:"ml-2 text-blue-900",children:c.therapists_count||0})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-blue-700 font-medium",children:"Administrador:"}),(0,He.jsx)("span",{className:"ml-2 text-blue-900",children:c.admin_name||"N/A"})]})]})]}),u>0&&(0,He.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,He.jsxs)("h4",{className:"font-medium text-green-900 mb-2 flex items-center",children:[(0,He.jsx)(Hr,{icon:_i,className:"mr-2"}),"C\xe1lculo da Cobran\xe7a"]}),(0,He.jsxs)("div",{className:"text-sm text-green-800",children:[(0,He.jsxs)("div",{className:"flex justify-between items-center",children:[(0,He.jsxs)("span",{children:[(null===c||void 0===c?void 0:c.current_patients)||0," pacientes \xd7 R$ 34,90"]}),(0,He.jsx)("span",{className:"font-bold text-lg",children:v(u)})]}),(0,He.jsx)("p",{className:"text-xs text-green-600 mt-2",children:"* Valor calculado automaticamente baseado no n\xfamero atual de pacientes"})]})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2"}),"Data de Vencimento *"]}),(0,He.jsx)("input",{type:"date",value:s.due_date,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{due_date:e.target.value}))),min:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:gi,className:"mr-2"}),"Observa\xe7\xf5es"]}),(0,He.jsx)("textarea",{value:s.notes,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{notes:e.target.value}))),placeholder:"Observa\xe7\xf5es sobre esta cobran\xe7a (opcional)",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),p&&(0,He.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,He.jsx)("p",{className:"text-sm text-red-800",children:p})}),(0,He.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,He.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",disabled:m,children:"Cancelar"}),(0,He.jsxs)("button",{type:"submit",disabled:m||!s.clinic_id||!s.due_date||0===u,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 rounded-md transition-colors flex items-center",children:[m&&(0,He.jsx)(Hr,{icon:Zi,className:"mr-2 animate-spin"}),m?"Criando...":"Criar Cobran\xe7a ".concat(v(u))]})]})]})]})}):null},hw=e=>{let{isOpen:t,onClose:n,billing:r,onSubmit:s}=e;const[i,o]=(0,a.useState)({due_date:"",reason:""}),[l,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)("");(0,a.useEffect)((()=>{t&&r&&(o({due_date:new Date(r.due_date).toISOString().split("T")[0],reason:""}),u(""))}),[t,r]);const h=()=>{o({due_date:"",reason:""}),u(""),n()},m=e=>new Date(e).toLocaleDateString("pt-BR");return t&&r?(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:gs,className:"text-2xl text-blue-600 mr-3"}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Editar Data de Vencimento"})]}),(0,He.jsx)("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[(0,He.jsxs)("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[(0,He.jsx)(Hr,{icon:ao,className:"mr-2 text-gray-600"}),"Informa\xe7\xf5es da Cobran\xe7a"]}),(0,He.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-gray-600 font-medium",children:"Cl\xednica:"}),(0,He.jsx)("span",{className:"ml-2 text-gray-900",children:r.clinic_name})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-gray-600 font-medium",children:"Valor:"}),(0,He.jsx)("span",{className:"ml-2 text-gray-900 font-semibold",children:(e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0))(r.amount)})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-gray-600 font-medium",children:"Status:"}),(0,He.jsx)("span",{className:"ml-2 px-2 py-1 rounded text-xs ".concat("paid"===r.status?"bg-green-100 text-green-800":"overdue"===r.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"paid"===r.status?"Pago":"overdue"===r.status?"Vencido":"Pendente"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-gray-600 font-medium",children:"Vencimento Atual:"}),(0,He.jsx)("span",{className:"ml-2 text-gray-900 font-semibold",children:m(r.due_date)})]})]})]}),"paid"===r.status&&(0,He.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:go,className:"text-amber-500 mr-2"}),(0,He.jsx)("span",{className:"text-amber-800 text-sm font-medium",children:"Aten\xe7\xe3o: Esta cobran\xe7a j\xe1 foi paga. Alterar a data pode afetar relat\xf3rios financeiros."})]})}),(0,He.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!i.due_date)return void u("Nova data de vencimento \xe9 obrigat\xf3ria");const t=new Date(i.due_date),n=new Date(r.due_date);if(t.getTime()!==n.getTime()){c(!0),u("");try{await s({billing_id:r.id,old_due_date:r.due_date,new_due_date:i.due_date,reason:i.reason||"Altera\xe7\xe3o solicitada pelo super admin"}),o({due_date:"",reason:""})}catch(d){console.error("Erro ao editar data de vencimento:",d),u("Erro ao salvar altera\xe7\xe3o")}finally{c(!1)}}else u("A nova data deve ser diferente da data atual")},className:"space-y-6",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2"}),"Nova Data de Vencimento *"]}),(0,He.jsx)("input",{type:"date",value:i.due_date,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{due_date:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),(0,He.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Data atual: ",m(r.due_date)]})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo da Altera\xe7\xe3o (opcional)"}),(0,He.jsx)("textarea",{value:i.reason,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{reason:e.target.value}))),placeholder:"Descreva o motivo da altera\xe7\xe3o da data de vencimento...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"}),(0,He.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Este motivo ser\xe1 registrado no hist\xf3rico de altera\xe7\xf5es."})]}),i.due_date&&i.due_date!==r.due_date&&(0,He.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,He.jsx)("h5",{className:"font-medium text-blue-900 mb-2",children:"Resumo da Altera\xe7\xe3o"}),(0,He.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-blue-700 font-medium",children:"Data Original:"}),(0,He.jsx)("br",{}),(0,He.jsx)("span",{className:"text-blue-900",children:m(r.due_date)})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"text-blue-700 font-medium",children:"Nova Data:"}),(0,He.jsx)("br",{}),(0,He.jsx)("span",{className:"text-blue-900 font-semibold",children:m(i.due_date)})]})]}),(0,He.jsx)("div",{className:"mt-3 pt-3 border-t border-blue-300",children:(0,He.jsx)("span",{className:"text-blue-700 text-sm",children:new Date(i.due_date)>new Date(r.due_date)?"\ud83d\udcc5 Prazo ser\xe1 estendido":"\u26a1 Prazo ser\xe1 antecipado"})})]}),d&&(0,He.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,He.jsxs)("p",{className:"text-sm text-red-800 flex items-center",children:[(0,He.jsx)(Hr,{icon:go,className:"mr-2"}),d]})}),(0,He.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,He.jsx)("button",{type:"button",onClick:h,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",disabled:l,children:"Cancelar"}),(0,He.jsxs)("button",{type:"submit",disabled:l||!i.due_date||i.due_date===r.due_date,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 rounded-md transition-colors flex items-center",children:[l&&(0,He.jsx)(Hr,{icon:Zi,className:"mr-2 animate-spin"}),l?"Salvando...":"Salvar Altera\xe7\xe3o"]})]})]})]})]})}):null},mw=e=>{let{isOpen:t,onClose:n,onSuccess:r}=e;const[s,i]=(0,a.useState)({discipline:"",area:"",sub_area_id:"",name:"",objective:"",program_slug:"",skill:"",materials:[""],procedure:[{step:"",description:""}],criteria_for_advancement:"",trials:5}),[o,l]=(0,a.useState)({}),[c,d]=(0,a.useState)({}),[u,h]=(0,a.useState)({}),[m,f]=(0,a.useState)(!1),[p,g]=(0,a.useState)(!0),[x,b]=(0,a.useState)("");(0,a.useEffect)((()=>{t&&(y(),v())}),[t]);const v=()=>{i({discipline:"",area:"",sub_area_id:"",name:"",objective:"",program_slug:"",skill:"",materials:[""],procedure:[{step:"",description:""}],criteria_for_advancement:"",trials:5}),d({}),h({}),b("")},y=async()=>{try{g(!0);const e=await Wy();l(e)}catch(x){console.error("Erro ao buscar hierarquia:",x),b("Erro ao carregar disciplinas. Tente novamente.")}finally{g(!1)}},w=(e,t,n)=>{const a=[...s.procedure];a[e][t]=n,i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:a})))};return t?(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)(Hr,{icon:_s,className:"text-green-600 text-xl"}),(0,He.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Criar Programa Global"})]}),(0,He.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,He.jsx)(Hr,{icon:Vi,size:"lg"})})]}),(0,He.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s.sub_area_id?s.name.trim()?s.objective.trim()?s.skill.trim()?s.materials.some((e=>!e.trim()))?(b("Todos os materiais devem ser preenchidos."),0):s.procedure.some((e=>!e.step.trim()||!e.description.trim()))?(b("Todos os passos do procedimento devem ser preenchidos."),0):s.criteria_for_advancement.trim()?!(!s.trials||s.trials<1||s.trials>999)||(b("N\xfamero de tentativas deve estar entre 1 e 999."),0):(b("Crit\xe9rio de avan\xe7o \xe9 obrigat\xf3rio."),0):(b("Habilidade \xe9 obrigat\xf3ria."),0):(b("Objetivo \xe9 obrigat\xf3rio."),0):(b("Nome do programa \xe9 obrigat\xf3rio."),0):(b("Por favor, selecione uma sub-\xe1rea."),0)){f(!0),b("");try{const e=s.materials.filter((e=>e.trim())),t=s.procedure.filter((e=>e.step.trim()&&e.description.trim())),a={sub_area_id:s.sub_area_id,name:s.name.trim(),objective:s.objective.trim(),program_slug:s.program_slug.trim()||s.name.trim().toLowerCase().replace(/\s+/g,"-"),skill:s.skill.trim(),materials:e,procedure:t,criteria_for_advancement:s.criteria_for_advancement.trim(),trials:parseInt(s.trials)};await Hy(a),r(),n()}catch(x){var t;console.error("Erro ao criar programa global:",x),409===(null===(t=x.response)||void 0===t?void 0:t.status)?b("J\xe1 existe um programa global com este nome."):b("Erro ao criar programa global. Tente novamente.")}finally{f(!1)}}},className:"p-6 space-y-6",children:[x&&(0,He.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:x}),p?(0,He.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,He.jsx)(Hr,{icon:Zi,spin:!0,className:"text-2xl text-blue-600"}),(0,He.jsx)("span",{className:"ml-3 text-gray-600",children:"Carregando hierarquia..."})]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:Ys,className:"mr-2 text-blue-600"}),"Disciplina *"]}),(0,He.jsxs)("select",{value:s.discipline,onChange:e=>{return t=e.target.value,i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{discipline:t,area:"",sub_area_id:""}))),void(t&&o[t]?(d(o[t].areas),h({})):(d({}),h({})));var t},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,He.jsx)("option",{value:"",children:"Selecione uma disciplina"}),Object.keys(o).map((e=>(0,He.jsx)("option",{value:e,children:e},e)))]})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:Ys,className:"mr-2 text-blue-600"}),"\xc1rea *"]}),(0,He.jsxs)("select",{value:s.area,onChange:e=>{return t=e.target.value,i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{area:t,sub_area_id:""}))),void(t&&c[t]?h(c[t].sub_areas):h({}));var t},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:!s.discipline,children:[(0,He.jsx)("option",{value:"",children:"Selecione uma \xe1rea"}),Object.keys(c).map((e=>(0,He.jsx)("option",{value:e,children:e},e)))]})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:Ys,className:"mr-2 text-blue-600"}),"Sub-\xe1rea *"]}),(0,He.jsxs)("select",{value:Object.keys(u).find((e=>u[e].id===s.sub_area_id))||"",onChange:e=>(e=>{var t;const n=null===(t=u[e])||void 0===t?void 0:t.id;i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{sub_area_id:n})))})(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:!s.area,children:[(0,He.jsx)("option",{value:"",children:"Selecione uma sub-\xe1rea"}),Object.keys(u).map((e=>(0,He.jsx)("option",{value:e,children:e},e)))]})]})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ui,className:"mr-2 text-green-600"}),"Nome do Programa *"]}),(0,He.jsx)("input",{type:"text",value:s.name,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{name:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Identifica\xe7\xe3o de Cores",required:!0})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:lo,className:"mr-2 text-purple-600"}),"Slug do Programa"]}),(0,He.jsx)("input",{type:"text",value:s.program_slug,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{program_slug:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: identificacao-cores (opcional)"})]})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ws,className:"mr-2 text-red-600"}),"Objetivo *"]}),(0,He.jsx)("textarea",{value:s.objective,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{objective:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Descreva o objetivo do programa...",required:!0})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ji,className:"mr-2 text-yellow-600"}),"Habilidade *"]}),(0,He.jsx)("input",{type:"text",value:s.skill,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{skill:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Discrimina\xe7\xe3o visual",required:!0})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:fs,className:"mr-2 text-indigo-600"}),"Materiais *"]}),s.materials.map(((e,t)=>(0,He.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,He.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const n=[...s.materials];n[e]=t,i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:n})))})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Material ".concat(t+1),required:!0}),s.materials.length>1&&(0,He.jsx)("button",{type:"button",onClick:()=>(e=>{if(s.materials.length>1){const t=s.materials.filter(((t,n)=>n!==e));i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:t})))}})(t),className:"px-3 py-2 text-red-600 hover:text-red-800",children:(0,He.jsx)(Hr,{icon:Vi})})]},t))),(0,He.jsxs)("button",{type:"button",onClick:()=>{i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:[...e.materials,""]})))},className:"flex items-center text-blue-600 hover:text-blue-800",children:[(0,He.jsx)(Hr,{icon:Wi,className:"mr-1"}),"Adicionar Material"]})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ss,className:"mr-2 text-orange-600"}),"Procedimento *"]}),s.procedure.map(((e,t)=>(0,He.jsxs)("div",{className:"border border-gray-200 rounded-md p-4 mb-4",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,He.jsxs)("h4",{className:"font-medium text-gray-700",children:["Passo ",t+1]}),s.procedure.length>1&&(0,He.jsx)("button",{type:"button",onClick:()=>(e=>{if(s.procedure.length>1){const t=s.procedure.filter(((t,n)=>n!==e));i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:t})))}})(t),className:"text-red-600 hover:text-red-800",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsxs)("div",{className:"space-y-2",children:[(0,He.jsx)("input",{type:"text",value:e.step,onChange:e=>w(t,"step",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome do passo",required:!0}),(0,He.jsx)("textarea",{value:e.description,onChange:e=>w(t,"description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Descri\xe7\xe3o do passo",required:!0})]})]},t))),(0,He.jsxs)("button",{type:"button",onClick:()=>{i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:[...e.procedure,{step:"",description:""}]})))},className:"flex items-center text-blue-600 hover:text-blue-800",children:[(0,He.jsx)(Hr,{icon:Wi,className:"mr-1"}),"Adicionar Passo"]})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:ws,className:"mr-2 text-green-600"}),"Crit\xe9rio de Avan\xe7o *"]}),(0,He.jsx)("input",{type:"text",value:s.criteria_for_advancement,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{criteria_for_advancement:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 80% de acertos em 3 sess\xf5es consecutivas",required:!0})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:lo,className:"mr-2 text-purple-600"}),"N\xfamero de Tentativas *"]}),(0,He.jsx)("input",{type:"number",value:s.trials,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{trials:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"999",required:!0})]})]})]}),(0,He.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,He.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",disabled:m,children:"Cancelar"}),(0,He.jsx)("button",{type:"submit",disabled:m||p,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center",children:m?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,spin:!0,className:"mr-2"}),"Criando..."]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:ri,className:"mr-2"}),"Criar Programa Global"]})})]})]})]})}):null},fw=()=>{const[e,t]=(0,a.useState)({}),[n,r]=(0,a.useState)(!0),[s,i]=(0,a.useState)(!1),[o,l]=(0,a.useState)({}),[c,d]=(0,a.useState)({}),[u,h]=(0,a.useState)(null),[m,f]=(0,a.useState)(!1),[p,g]=(0,a.useState)(null),[x,b]=(0,a.useState)(!1),[v,y]=(0,a.useState)(""),[w,j]=(0,a.useState)("");(0,a.useEffect)((()=>{N()}),[]);const N=async()=>{try{r(!0),y("");const e=await Vy();t(e)}catch(v){console.error("Erro ao buscar programas globais:",v),y("Erro ao carregar programas globais.")}finally{r(!1)}},_=(e,t,n,a)=>(0,He.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,He.jsxs)("div",{className:"flex items-start justify-between",children:[(0,He.jsxs)("div",{className:"flex-1",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,He.jsx)(Hr,{icon:_s,className:"text-green-600"}),(0,He.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(0,He.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("global_admin"===e.program_type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"global_admin"===e.program_type?"Super Admin":"Global Original"})]}),(0,He.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.objective}),(0,He.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("strong",{children:"Habilidade:"})," ",e.skill]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("strong",{children:"Tentativas:"})," ",e.trials]}),e.created_by_name&&(0,He.jsxs)("div",{children:[(0,He.jsx)("strong",{children:"Criado por:"})," ",e.created_by_name]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("strong",{children:"Criado em:"})," ",new Date(e.created_at).toLocaleDateString("pt-BR")]})]})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,He.jsx)("button",{onClick:()=>(async e=>{try{b(!0),h(e);const t=await Gy(e.id);g(t),f(!0)}catch(v){console.error("Erro ao buscar estat\xedsticas:",v),y("Erro ao carregar estat\xedsticas do programa.")}finally{b(!1)}})(e),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-full transition-colors",title:"Ver estat\xedsticas de uso",disabled:x,children:(0,He.jsx)(Hr,{icon:x?Zi:ni,spin:x})}),(0,He.jsx)("button",{onClick:()=>(async e=>{if(window.confirm('Tem certeza que deseja excluir o programa "'.concat(e.name,'"?\n\nEsta a\xe7\xe3o n\xe3o pode ser desfeita e o programa ser\xe1 removido de todas as cl\xednicas.')))try{await Yy(e.id),j("Programa global exclu\xeddo com sucesso!"),N(),setTimeout((()=>j("")),5e3)}catch(v){var t;console.error("Erro ao excluir programa:",v),400===(null===(t=v.response)||void 0===t?void 0:t.status)?y("N\xe3o \xe9 poss\xedvel excluir um programa que est\xe1 sendo usado por cl\xednicas."):y("Erro ao excluir programa global.")}})(e),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-full transition-colors",title:"Excluir programa",children:(0,He.jsx)(Hr,{icon:li})})]})]})},e.id),S=(e,t,n)=>{const a="".concat(n,"-").concat(e),r=c[a];return(0,He.jsxs)("div",{className:"ml-4",children:[(0,He.jsxs)("button",{onClick:()=>{return e=a,void d((t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:!t[e]})));var e},className:"flex items-center space-x-2 text-left w-full py-2 px-3 hover:bg-gray-50 rounded-md transition-colors",children:[(0,He.jsx)(Hr,{icon:r?Ti:Xi,className:"text-gray-400 text-sm"}),(0,He.jsx)("h3",{className:"font-medium text-gray-800",children:e}),(0,He.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full ml-auto",children:[Object.values(t).reduce(((e,t)=>e+t.length),0)," programas"]})]}),r&&(0,He.jsx)("div",{className:"mt-3 space-y-4",children:Object.entries(t).map((e=>{let[t,n]=e;return((e,t)=>(0,He.jsxs)("div",{className:"ml-8",children:[(0,He.jsx)("h4",{className:"font-medium text-gray-700 mb-3 text-sm",children:e}),(0,He.jsx)("div",{className:"space-y-3",children:t.map((e=>_(e)))})]},e))(t,n)}))})]},e)},k=(e,t)=>{const n=o[e],a=Object.values(t).reduce(((e,t)=>e+Object.values(t).reduce(((e,t)=>e+t.length),0)),0);return(0,He.jsxs)("div",{className:"border border-gray-200 rounded-lg bg-gray-50",children:[(0,He.jsxs)("button",{onClick:()=>{return t=e,void l((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!e[t]})));var t},className:"flex items-center justify-between w-full p-4 text-left hover:bg-gray-100 rounded-lg transition-colors",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)(Hr,{icon:n?Ti:Xi,className:"text-gray-500"}),(0,He.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:e})]}),(0,He.jsxs)("span",{className:"text-sm bg-gray-200 text-gray-700 px-3 py-1 rounded-full",children:[a," programas"]})]}),n&&(0,He.jsx)("div",{className:"px-4 pb-4 space-y-3",children:Object.entries(t).map((t=>{let[n,a]=t;return S(n,a,e)}))})]},e)};if(n)return(0,He.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,He.jsx)(Hr,{icon:Zi,spin:!0,className:"text-2xl text-blue-600 mr-3"}),(0,He.jsx)("span",{className:"text-gray-600",children:"Carregando programas globais..."})]});const C=Object.values(e).reduce(((e,t)=>e+Object.values(t).reduce(((e,t)=>e+Object.values(t).reduce(((e,t)=>e+t.length),0)),0)),0);return(0,He.jsxs)("div",{className:"space-y-6",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsx)(Hr,{icon:_s,className:"text-green-600 text-xl"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Biblioteca Global de Programas"}),(0,He.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Total: ",(0,He.jsxs)("span",{className:"font-medium text-green-600",children:[C," programas"]})]})]})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,He.jsxs)("button",{onClick:N,className:"flex items-center px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",disabled:n,children:[(0,He.jsx)(Hr,{icon:Ws,className:"mr-2"}),"Atualizar"]}),(0,He.jsxs)("button",{onClick:()=>i(!0),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[(0,He.jsx)(Hr,{icon:Wi,className:"mr-2"}),"Criar Programa Global"]})]})]}),v&&(0,He.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:[(0,He.jsx)(Hr,{icon:go,className:"mr-2"}),v]}),w&&(0,He.jsxs)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md",children:[(0,He.jsx)(Hr,{icon:Fs,className:"mr-2"}),w]}),0===Object.keys(e).length?(0,He.jsxs)("div",{className:"text-center py-12",children:[(0,He.jsx)(Hr,{icon:_s,className:"text-4xl text-gray-300 mb-4"}),(0,He.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum programa global encontrado"}),(0,He.jsx)("p",{className:"text-gray-600 mb-4",children:"Comece criando seu primeiro programa global que ficar\xe1 dispon\xedvel para todas as cl\xednicas."}),(0,He.jsxs)("button",{onClick:()=>i(!0),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors mx-auto",children:[(0,He.jsx)(Hr,{icon:Wi,className:"mr-2"}),"Criar Programa Global"]})]}):(0,He.jsx)("div",{className:"space-y-4",children:Object.entries(e).map((e=>{let[t,n]=e;return k(t,n)}))}),(0,He.jsx)(mw,{isOpen:s,onClose:()=>i(!1),onSuccess:()=>{j("Programa global criado com sucesso!"),N(),setTimeout((()=>j("")),5e3)}}),m&&p&&(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Estat\xedsticas de Uso"}),(0,He.jsx)("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:null===u||void 0===u?void 0:u.name}),(0,He.jsxs)("div",{className:"space-y-3",children:[(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"Atribui\xe7\xf5es:"}),(0,He.jsx)("span",{className:"font-medium",children:p.assignment_count})]}),(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"Pacientes:"}),(0,He.jsx)("span",{className:"font-medium",children:p.patient_count})]}),(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"Sess\xf5es:"}),(0,He.jsx)("span",{className:"font-medium",children:p.progress_count})]}),p.first_session&&(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"Primeira sess\xe3o:"}),(0,He.jsx)("span",{className:"font-medium",children:new Date(p.first_session).toLocaleDateString("pt-BR")})]}),p.last_session&&(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"\xdaltima sess\xe3o:"}),(0,He.jsx)("span",{className:"font-medium",children:new Date(p.last_session).toLocaleDateString("pt-BR")})]})]}),p.assignment_count>0&&(0,He.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,He.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,He.jsx)(Hr,{icon:go,className:"mr-2"}),"Este programa est\xe1 sendo usado por cl\xednicas e n\xe3o pode ser exclu\xeddo."]})})]}),(0,He.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-200",children:(0,He.jsx)("button",{onClick:()=>f(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Fechar"})})]})})]})};wm.register(Gf,Jf,Fm,Rm,kf,Wf,_f,yf,Cm,Vm);const pw=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(parseFloat(e)||0).toFixed(t)},gw=e=>{let{title:t,value:n,icon:a,colorClass:r,interpretation:s,trend:i}=e;const o=s?(e=>{switch(e){case"good":return{bg:"bg-green-100",border:"border-green-200",icon:Fs,color:"text-green-600"};case"attention":return{bg:"bg-yellow-100",border:"border-yellow-200",icon:go,color:"text-yellow-600"};case"critical":return{bg:"bg-red-100",border:"border-red-200",icon:go,color:"text-red-600"};default:return{bg:"bg-gray-100",border:"border-gray-200",icon:gi,color:"text-gray-600"}}})(s):null;return(0,He.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border ".concat(o?o.border:"border-gray-200"," flex items-start space-x-4 relative transition-all hover:shadow-md"),children:[(0,He.jsx)("div",{className:"text-xl p-3 rounded-full ".concat(r.bg," ").concat(r.text),children:(0,He.jsx)(Hr,{icon:a,className:"fa-fw"})}),(0,He.jsxs)("div",{className:"flex-1",children:[(0,He.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:t}),(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("p",{className:"text-3xl font-semibold ".concat(r.text),children:n}),i&&(0,He.jsxs)("span",{className:"text-sm font-medium ".concat(i>0?"text-green-500":"text-red-500"),children:[i>0?"\u2197":"\u2198"," ",Math.abs(i),"%"]})]})]}),o&&(0,He.jsx)("div",{className:"absolute top-2 right-2 w-6 h-6 rounded-full ".concat(o.bg," flex items-center justify-center"),children:(0,He.jsx)(Hr,{icon:o.icon,className:"text-xs ".concat(o.color)})})]})},xw=e=>{let{metrics:t,processedRevenueChart:n,processedGrowthChart:a,statusChart:r}=e;return(0,He.jsxs)("div",{className:"space-y-8",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,He.jsx)(Hr,{icon:Qs,className:"mr-3 text-blue-600"}),"M\xe9tricas do Sistema"]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[(0,He.jsx)(gw,{title:"Total de Cl\xednicas",value:t.total_clinics||"0",icon:ao,colorClass:{bg:"bg-blue-100",text:"text-blue-600"},interpretation:parseInt(t.total_clinics||0)>20?"good":"attention"}),(0,He.jsx)(gw,{title:"Receita Mensal (MRR)",value:"R$ ".concat(parseFloat(t.monthly_revenue||0).toLocaleString("pt-BR")),icon:Ss,colorClass:{bg:"bg-green-100",text:"text-green-600"},interpretation:"good"}),(0,He.jsx)(gw,{title:"Total de Usu\xe1rios",value:t.total_users||"0",icon:xs,colorClass:{bg:"bg-purple-100",text:"text-purple-600"}}),(0,He.jsx)(gw,{title:"Taxa de Inadimpl\xeancia",value:"".concat(pw(t.default_rate,1),"%"),icon:go,colorClass:{bg:"bg-orange-100",text:"text-orange-600"},interpretation:parseFloat(t.default_rate||0)<5?"good":parseFloat(t.default_rate||0)<15?"attention":"critical"})]})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,He.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,He.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:Gi,className:"mr-2 text-green-600"}),"Evolu\xe7\xe3o da Receita"]}),n?(0,He.jsx)(Dx,{data:n,options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",callbacks:{label:e=>"R$ ".concat(e.parsed.y.toLocaleString("pt-BR"))}}},scales:{y:{beginAtZero:!0,ticks:{callback:e=>"R$ ".concat(e.toLocaleString("pt-BR"))}}}}}):(0,He.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,He.jsx)(Hr,{icon:Zi,className:"text-2xl text-gray-400 animate-spin"})})]}),(0,He.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,He.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:Ks,className:"mr-2 text-blue-600"}),"Status das Cl\xednicas"]}),r?(0,He.jsx)(Ox,{data:r,options:{responsive:!0,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:e=>"".concat(e.label,": ").concat(e.parsed)}}}}}):(0,He.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,He.jsx)(Hr,{icon:Zi,className:"text-2xl text-gray-400 animate-spin"})})]})]}),a&&(0,He.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,He.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:mo,className:"mr-2 text-purple-600"}),"Crescimento por M\xeas"]}),(0,He.jsx)(Mx,{data:a,options:{responsive:!0,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0}}}})]})]})},bw=e=>{let{clinics:t,filters:n,setFilters:a,onCreateClinic:r,onEditLimit:s,onSuspend:i,onReactivate:o,onViewDetails:l,onDeleteClinic:c}=e;const d=e=>{switch(e){case"active":return"Ativa";case"suspended":return"Suspensa";case"inactive":return"Inativa";default:return"Desconhecido"}};return(0,He.jsxs)("div",{className:"space-y-6",children:[(0,He.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,He.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4 lg:mb-0 flex items-center",children:[(0,He.jsx)(Hr,{icon:ao,className:"mr-3 text-blue-600"}),"Gest\xe3o de Cl\xednicas"]}),(0,He.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)(Hr,{icon:Xs,className:"text-gray-400"}),["active","suspended","inactive"].map((e=>(0,He.jsx)("button",{onClick:()=>(e=>{a((0,Ie.A)((0,Ie.A)({},n),{},{status:e===n.status?"":e}))})(e),className:"px-3 py-1 rounded-full text-xs font-medium ".concat(n.status===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:d(e)},e)))]}),(0,He.jsxs)("div",{className:"relative",children:[(0,He.jsx)(Hr,{icon:Oi,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,He.jsx)("input",{type:"text",placeholder:"Buscar cl\xednicas...",value:n.search,onChange:e=>{return t=e.target.value,void a((0,Ie.A)((0,Ie.A)({},n),{},{search:t}));var t},className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,He.jsxs)("button",{onClick:r,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[(0,He.jsx)(Hr,{icon:Wi,className:"mr-2"}),"Nova Cl\xednica"]})]})]}),(0,He.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,He.jsx)("div",{className:"overflow-x-auto",children:(0,He.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,He.jsx)("thead",{className:"bg-gray-50",children:(0,He.jsxs)("tr",{children:[(0,He.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cl\xednica"}),(0,He.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,He.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pacientes"}),(0,He.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usu\xe1rios"}),(0,He.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Administrador"}),(0,He.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,He.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e=>{const t=(e=>{switch(e){case"active":return{icon:Fs,color:"text-green-500"};case"suspended":return{icon:go,color:"text-red-500"};default:return{icon:gi,color:"text-gray-500"}}})(e.status);return(0,He.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,He.jsxs)("div",{className:"text-sm text-gray-500",children:["Criada em ",new Date(e.created_at).toLocaleDateString("pt-BR")]})]})}),(0,He.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:t.icon,className:"mr-2 ".concat(t.color)}),(0,He.jsx)("span",{className:"text-sm font-medium",children:d(e.status)})]}),e.suspension_reason&&(0,He.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.suspension_reason})]}),(0,He.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,He.jsxs)("div",{className:"text-sm text-gray-900",children:[e.patients_count||0," / ",e.max_patients]}),(0,He.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:(0,He.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(Math.min(100,(e.patients_count||0)/e.max_patients*100),"%")}})})]}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,He.jsxs)("div",{className:"space-y-1",children:[(0,He.jsxs)("div",{children:[e.therapists_count||0," terapeutas"]}),(0,He.jsxs)("div",{className:"text-gray-500",children:[e.parents_count||0," pais"]})]})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.admin_name}),(0,He.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.admin_username]})]})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)("button",{onClick:()=>s(e),className:"text-blue-600 hover:text-blue-900",title:"Editar limite de pacientes",children:(0,He.jsx)(Hr,{icon:gs})}),"active"===e.status?(0,He.jsx)("button",{onClick:()=>i(e),className:"text-red-600 hover:text-red-900",title:"Suspender cl\xednica",children:(0,He.jsx)(Hr,{icon:ks})}):(0,He.jsx)("button",{onClick:()=>o(e.id),className:"text-green-600 hover:text-green-900",title:"Reativar cl\xednica",children:(0,He.jsx)(Hr,{icon:Di})}),(0,He.jsx)("button",{onClick:()=>l(e),className:"text-gray-600 hover:text-gray-900",title:"Ver detalhes",children:(0,He.jsx)(Hr,{icon:ni})}),(0,He.jsx)("button",{onClick:()=>{window.confirm('Tem certeza que deseja ELIMINAR permanentemente a cl\xednica "'.concat(e.name,'"?\n\nEsta a\xe7\xe3o ir\xe1:\n- Remover todos os usu\xe1rios da cl\xednica\n- Remover todos os pacientes e dados associados\n- Remover todas as cobran\xe7as\n- Esta a\xe7\xe3o \xc9 IRREVERS\xcdVEL!'))&&c(e.id)},className:"text-gray-600 hover:text-red-600",title:"Eliminar cl\xednica (IRREVERS\xcdVEL)",children:(0,He.jsx)(Hr,{icon:li})})]})})]},e.id)}))})]})}),0===t.length&&(0,He.jsxs)("div",{className:"text-center py-12",children:[(0,He.jsx)(Hr,{icon:ao,className:"text-4xl text-gray-400 mb-4"}),(0,He.jsx)("p",{className:"text-gray-500",children:"Nenhuma cl\xednica encontrada."})]})]})]})},vw=e=>{let{billings:t,metrics:n,filters:a,setFilters:r,onRecordPayment:s,onCreateBilling:i,loadInitialData:o}=e;const l=e=>{switch(e){case"paid":return{bg:"bg-green-100",text:"text-green-800",label:"Pago"};case"pending":return{bg:"bg-yellow-100",text:"text-yellow-800",label:"Pendente"};case"overdue":return{bg:"bg-red-100",text:"text-red-800",label:"Vencida"};default:return{bg:"bg-gray-100",text:"text-gray-800",label:"Desconhecido"}}},c=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat(e)||0),d=e=>new Date(e).toLocaleDateString("pt-BR"),u=(()=>{const e={suspend_now:[],overdue:[],due_soon:[]};return t.forEach((t=>{const n=new Date,a=new Date(t.due_date),r=Math.ceil((a-n)/864e5);"paid"!==t.status&&(r<-10?e.suspend_now.push(t):r<0?e.overdue.push(t):r<=3&&e.due_soon.push(t))})),e})(),h=u.suspend_now.length>0||u.overdue.length>0||u.due_soon.length>0;return(0,He.jsxs)("div",{className:"space-y-6",children:[h&&(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,He.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:go,className:"mr-2 text-amber-500"}),"Alertas de Cobran\xe7a"]}),u.suspend_now.length>0&&(0,He.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,He.jsxs)("h4",{className:"font-medium text-red-800 mb-2",children:["\u26a0\ufe0f Suspender Agora (",u.suspend_now.length,")"]}),(0,He.jsx)("p",{className:"text-sm text-red-700 mb-2",children:"Cl\xednicas com mais de 10 dias de atraso. Prazo de suspens\xe3o atingido."}),u.suspend_now.slice(0,3).map((e=>(0,He.jsxs)("div",{className:"text-sm text-red-600",children:["\u2022 ",e.clinic_name," - ",c(e.amount)," - Venceu em ",d(e.due_date)]},e.id))),u.suspend_now.length>3&&(0,He.jsxs)("div",{className:"text-sm text-red-600 mt-1",children:["... e mais ",u.suspend_now.length-3," cl\xednicas"]})]}),u.overdue.length>0&&(0,He.jsxs)("div",{className:"mb-4 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[(0,He.jsxs)("h4",{className:"font-medium text-orange-800 mb-2",children:["\ud83d\udd36 Em Atraso (",u.overdue.length,")"]}),(0,He.jsx)("p",{className:"text-sm text-orange-700 mb-2",children:"Cobran\xe7as vencidas. Monitorar para eventual suspens\xe3o."}),u.overdue.slice(0,3).map((e=>(0,He.jsxs)("div",{className:"text-sm text-orange-600",children:["\u2022 ",e.clinic_name," - ",c(e.amount)," - Venceu em ",d(e.due_date)]},e.id))),u.overdue.length>3&&(0,He.jsxs)("div",{className:"text-sm text-orange-600 mt-1",children:["... e mais ",u.overdue.length-3," cl\xednicas"]})]}),u.due_soon.length>0&&(0,He.jsxs)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,He.jsxs)("h4",{className:"font-medium text-yellow-800 mb-2",children:["\ud83d\udcc5 Vencem em Breve (",u.due_soon.length,")"]}),(0,He.jsx)("p",{className:"text-sm text-yellow-700 mb-2",children:"Cobran\xe7as que vencem nos pr\xf3ximos 3 dias. Acompanhar de perto."}),u.due_soon.slice(0,3).map((e=>(0,He.jsxs)("div",{className:"text-sm text-yellow-600",children:["\u2022 ",e.clinic_name," - ",c(e.amount)," - Vence em ",d(e.due_date)]},e.id))),u.due_soon.length>3&&(0,He.jsxs)("div",{className:"text-sm text-yellow-600 mt-1",children:["... e mais ",u.due_soon.length-3," cl\xednicas"]})]})]}),(0,He.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6 mb-6",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)("div",{className:"bg-green-100 p-3 rounded-full mr-4",children:(0,He.jsx)(Hr,{icon:xs,className:"text-green-600 text-xl"})}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Modelo de Assinatura ABAplay"}),(0,He.jsxs)("p",{className:"text-gray-600",children:[(0,He.jsx)("span",{className:"font-bold text-green-600",children:"R$ 34,90"})," por slot contratado \u2022 Cobran\xe7a mensal pelos slots assinados (independente do uso)"]}),(0,He.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"\ud83d\udca1 Cl\xednica assina X slots, paga por X slots mesmo se usar menos"})]})]}),(0,He.jsxs)("div",{className:"text-right",children:[(0,He.jsx)("div",{className:"text-sm text-gray-500",children:"Exemplo"}),(0,He.jsx)("div",{className:"text-lg font-bold text-green-600",children:"100 slots = R$ 3.490,00/m\xeas"}),(0,He.jsx)("div",{className:"text-xs text-gray-500",children:"(mesmo usando s\xf3 80 pacientes)"})]})]})}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,He.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,He.jsx)(Hr,{icon:No,className:"mr-3 text-green-600"}),"Gest\xe3o Financeira",h&&(0,He.jsxs)("span",{className:"ml-2 px-2 py-1 bg-red-100 text-red-800 text-sm rounded-full",children:[u.suspend_now.length+u.overdue.length+u.due_soon.length," alertas"]})]}),(0,He.jsxs)("div",{className:"flex space-x-3",children:[(0,He.jsxs)("button",{onClick:async()=>{if(window.confirm("Esta a\xe7\xe3o ir\xe1 recalcular todas as cobran\xe7as pendentes para o modelo por slots contratados.\n\nDeseja continuar?"))try{const e=await fetch("/api/super-admin/billing/migrate-to-slot-model",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}}),t=await e.json();t.success&&(alert("Migra\xe7\xe3o conclu\xedda!\n\n".concat(t.data.updated_count," cobran\xe7as atualizadas\nDiferen\xe7a total: R$ ").concat(pw(t.data.difference,2),"\nVaria\xe7\xe3o: ").concat(t.data.percentage_change,"%")),o())}catch(e){alert("Erro na migra\xe7\xe3o: "+e.message)}},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg flex items-center text-sm",children:[(0,He.jsx)(Hr,{icon:gs,className:"mr-1"}),"Migrar Cobran\xe7as"]}),(0,He.jsxs)("button",{onClick:i,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center",children:[(0,He.jsx)(Hr,{icon:Wi,className:"mr-2"}),"Nova Cobran\xe7a"]})]})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[(0,He.jsx)(gw,{title:"Receita Mensal (MRR)",value:c(n.monthly_revenue||0),icon:Ss,colorClass:{bg:"bg-green-100",text:"text-green-600"},interpretation:"good"}),(0,He.jsx)(gw,{title:"Valores Pendentes",value:c(n.pending_amount||0),icon:ss,colorClass:{bg:"bg-yellow-100",text:"text-yellow-600"}}),(0,He.jsx)(gw,{title:"Valores Vencidos",value:c(n.overdue_amount||0),icon:go,colorClass:{bg:"bg-red-100",text:"text-red-600"},interpretation:0===parseFloat(n.overdue_amount||0)?"good":"critical"}),(0,He.jsx)(gw,{title:"Taxa Inadimpl\xeancia",value:"".concat(pw(n.default_rate,1),"%"),icon:Qs,colorClass:{bg:"bg-purple-100",text:"text-purple-600"},interpretation:parseFloat(n.default_rate||0)<5?"good":parseFloat(n.default_rate||0)<15?"attention":"critical"})]})]}),(0,He.jsx)("div",{className:"flex items-center space-x-4",children:(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,He.jsx)(Hr,{icon:Xs,className:"text-gray-400"}),["pending","overdue","paid"].map((e=>(0,He.jsx)("button",{onClick:()=>(e=>{r((0,Ie.A)((0,Ie.A)({},a),{},{status:e===a.status?"":e}))})(e),className:"px-3 py-1 rounded-full text-xs font-medium ".concat(a.status===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:l(e).label},e)))]})}),(0,He.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,He.jsx)("div",{className:"overflow-x-auto",children:(0,He.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,He.jsx)("thead",{className:"bg-gray-50",children:(0,He.jsxs)("tr",{children:[(0,He.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cl\xednica"}),(0,He.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),(0,He.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vencimento"}),(0,He.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,He.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pacientes"}),(0,He.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Real"}),(0,He.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,He.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e=>{const t=l(e.status),n=new Date(e.due_date)<new Date&&"pending"===e.status;return(0,He.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.clinic_name}),(0,He.jsxs)("div",{className:"text-sm text-gray-500",children:[e.current_patients," pacientes / ",e.max_patients," limite"]})]})}),(0,He.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,He.jsx)("div",{className:"text-sm font-medium text-gray-900",children:c(34.9*e.max_patients)}),(0,He.jsxs)("div",{className:"text-xs text-blue-600 font-medium",children:[e.max_patients," slots \xd7 R$ 34,90"]}),(e.current_patients||0)<e.max_patients&&(0,He.jsxs)("div",{className:"text-xs text-gray-500",children:["Usando ",e.current_patients||0," de ",e.max_patients," slots"]})]}),(0,He.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,He.jsx)("div",{className:"text-sm ".concat(n?"text-red-600 font-medium":"text-gray-900"),children:d(e.due_date)}),e.payment_date&&(0,He.jsxs)("div",{className:"text-xs text-green-600",children:["Pago em ",d(e.payment_date)]})]}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(t.bg," ").concat(t.text),children:t.label})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("div",{className:"text-lg font-bold text-blue-600",children:e.current_patients||0}),(0,He.jsxs)("div",{className:"text-xs text-gray-500",children:["de ",e.max_patients," m\xe1x"]}),(0,He.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:(0,He.jsx)("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:"".concat(Math.min(100,(e.current_patients||0)/e.max_patients*100),"%")}})})]})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("div",{className:"text-sm font-bold text-purple-600",children:c(34.9*e.max_patients)}),(0,He.jsxs)("div",{className:"text-xs text-gray-500",children:[e.max_patients," \xd7 R$ 34,90"]}),e.max_patients-(e.current_patients||0)>0&&(0,He.jsxs)("div",{className:"text-xs text-amber-600 font-medium mt-1",children:["+",e.max_patients-(e.current_patients||0)," slots livres"]})]})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,He.jsxs)("div",{className:"flex items-center space-x-2",children:["paid"!==e.status&&(0,He.jsx)("button",{onClick:()=>s(e),className:"text-green-600 hover:text-green-900",title:"Registrar pagamento",children:(0,He.jsx)(Hr,{icon:Ci})}),(0,He.jsx)("button",{className:"text-blue-600 hover:text-blue-900",title:"Ver hist\xf3rico",children:(0,He.jsx)(Hr,{icon:so})})]})})]},e.id)}))})]})}),0===t.length&&(0,He.jsxs)("div",{className:"text-center py-12",children:[(0,He.jsx)(Hr,{icon:No,className:"text-4xl text-gray-400 mb-4"}),(0,He.jsx)("p",{className:"text-gray-500",children:"Nenhuma cobran\xe7a encontrada."})]})]})]})},yw=e=>{let{billings:t,onViewBilling:n,onRecordPayment:a,onEditDueDate:r,onCreateBilling:s}=e;return(0,He.jsxs)("div",{className:"space-y-6",children:[(0,He.jsxs)("div",{className:"flex justify-between items-center",children:[(0,He.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-3 text-blue-600"}),"Calend\xe1rio de Vencimentos"]}),(0,He.jsxs)("button",{onClick:s,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[(0,He.jsx)(Hr,{icon:Wi,className:"mr-2"}),"Nova Cobran\xe7a"]})]}),(0,He.jsx)(dw,{billings:t,onViewBilling:n,onRecordPayment:a,onEditDueDate:r})]})},ww=()=>{const[e,t]=(0,a.useState)(!0),[n,r]=(0,a.useState)(""),[s,i]=(0,a.useState)("executive"),[o,l]=(0,a.useState)({executiveDashboard:null,customerHealth:null,cohortAnalysis:null,churnPrediction:null,expansionOpportunities:null,executiveReport:null});(0,a.useEffect)((()=>{c()}),[]);const c=async()=>{try{t(!0),r("");const[e,n,a,s,i,o]=await Promise.all([Ky().catch((e=>({data:null,error:e}))),Jy().catch((e=>({data:null,error:e}))),Qy().catch((e=>({data:null,error:e}))),Zy().catch((e=>({data:null,error:e}))),ew().catch((e=>({data:null,error:e}))),tw().catch((e=>({data:null,error:e})))]);l({executiveDashboard:e.data,customerHealth:n.data,cohortAnalysis:a.data,churnPrediction:s.data,expansionOpportunities:i.data,executiveReport:o.data})}catch(n){console.error("Erro ao carregar dados empresariais:",n),r("Erro ao carregar dados empresariais. Alguns recursos podem n\xe3o estar dispon\xedveis.")}finally{t(!1)}};return e?(0,He.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,He.jsx)(Hr,{icon:Zi,className:"text-4xl text-blue-500 animate-spin mr-3"}),(0,He.jsx)("span",{className:"text-lg",children:"Carregando Business Intelligence..."})]}):(0,He.jsxs)("div",{className:"space-y-8",children:[(0,He.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("h2",{className:"text-3xl font-bold mb-2 flex items-center",children:[(0,He.jsx)(Hr,{icon:bo,className:"mr-3"}),"Business Intelligence & Analytics"]}),(0,He.jsx)("p",{className:"text-blue-100 text-lg",children:"Insights avan\xe7ados para decis\xf5es estrat\xe9gicas baseadas em dados"})]}),(0,He.jsxs)("div",{className:"text-right",children:[(0,He.jsx)("div",{className:"text-blue-100 text-sm",children:"\xdaltima atualiza\xe7\xe3o"}),(0,He.jsx)("div",{className:"text-white font-semibold",children:(new Date).toLocaleString("pt-BR")})]})]})}),n&&(0,He.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:go,className:"text-yellow-600 mr-2"}),(0,He.jsx)("p",{className:"text-yellow-800",children:n})]})}),(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[(0,He.jsx)("div",{className:"border-b border-gray-200",children:(0,He.jsx)("nav",{className:"flex space-x-8 px-6",children:[{key:"executive",label:"Dashboard Executivo",icon:zs,color:"blue"},{key:"health",label:"Customer Health",icon:Ps,color:"green"},{key:"churn",label:"An\xe1lise de Churn",icon:ws,color:"red"},{key:"growth",label:"Oportunidades",icon:Yi,color:"purple"},{key:"cohort",label:"An\xe1lise de Coortes",icon:to,color:"orange"}].map((e=>(0,He.jsxs)("button",{onClick:()=>i(e.key),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center ".concat(s===e.key?"border-".concat(e.color,"-500 text-").concat(e.color,"-600"):"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,He.jsx)(Hr,{icon:e.icon,className:"mr-2"}),e.label]},e.key)))})}),(0,He.jsxs)("div",{className:"p-6",children:["executive"===s&&(0,He.jsx)(jw,{data:o.executiveDashboard}),"health"===s&&(0,He.jsx)(Nw,{data:o.customerHealth}),"churn"===s&&(0,He.jsx)(_w,{data:o.churnPrediction}),"growth"===s&&(0,He.jsx)(Sw,{data:o.expansionOpportunities}),"cohort"===s&&(0,He.jsx)(kw,{data:o.cohortAnalysis})]})]})]})},jw=e=>{var t,n,a,r;let{data:s}=e;if(!s)return(0,He.jsxs)("div",{className:"text-center py-12",children:[(0,He.jsx)(Hr,{icon:us,className:"text-4xl text-gray-400 mb-4"}),(0,He.jsx)("p",{className:"text-gray-500",children:"Dados do dashboard executivo n\xe3o dispon\xedveis."}),(0,He.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Verifique se o modelo EnterpriseMetricsModel est\xe1 configurado corretamente."})]});const{financial_kpis:i,insights:o}=s;return(0,He.jsxs)("div",{className:"space-y-8",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"KPIs Executivos"}),(0,He.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:"C-Level Dashboard"})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[(0,He.jsx)(gw,{title:"MRR (Monthly Recurring Revenue)",value:"R$ ".concat(((null===i||void 0===i?void 0:i.current_mrr)||0).toLocaleString("pt-BR")),icon:Ss,colorClass:{bg:"bg-green-100",text:"text-green-600"},trend:null===i||void 0===i?void 0:i.mrr_growth_rate,interpretation:(null===i||void 0===i?void 0:i.mrr_growth_rate)>0?"good":"attention"}),(0,He.jsx)(gw,{title:"ARR (Annual Recurring Revenue)",value:"R$ ".concat(((null===i||void 0===i?void 0:i.arr)||0).toLocaleString("pt-BR")),icon:Qs,colorClass:{bg:"bg-blue-100",text:"text-blue-600"}}),(0,He.jsx)(gw,{title:"LTV (Lifetime Value)",value:"R$ ".concat(((null===i||void 0===i?void 0:i.ltv)||0).toLocaleString("pt-BR")),icon:Ai,colorClass:{bg:"bg-purple-100",text:"text-purple-600"}}),(0,He.jsx)(gw,{title:"Churn Rate",value:"".concat(pw(null===i||void 0===i?void 0:i.churn_rate,1),"%"),icon:go,colorClass:{bg:"bg-red-100",text:"text-red-600"},interpretation:(null===i||void 0===i?void 0:i.churn_rate)<5?"good":"critical"})]}),o&&(0,He.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,He.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:us,className:"mr-2 text-yellow-500"}),"Insights Estrat\xe9gicos"]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,He.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,He.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Sa\xfade do Neg\xf3cio"}),(0,He.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"Tend\xeancia MRR:"}),(0,He.jsx)("span",{className:"font-medium ".concat("growing"===o.mrr_trend?"text-green-600":"text-red-600"),children:"growing"===o.mrr_trend?"Crescendo":"Declining"})]}),(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"Receita por Cliente:"}),(0,He.jsxs)("span",{className:"font-medium",children:["R$ ",pw(o.avg_revenue_per_user,2)]})]}),(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"Proje\xe7\xe3o ARR:"}),(0,He.jsxs)("span",{className:"font-medium",children:["R$ ",(o.arr_projection||0).toLocaleString("pt-BR")]})]})]})]}),(0,He.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,He.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Segmenta\xe7\xe3o de Clientes"}),(0,He.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"Micro:"}),(0,He.jsx)("span",{className:"font-medium",children:(null===(t=o.customer_segments)||void 0===t?void 0:t.micro)||0})]}),(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"Pequeno:"}),(0,He.jsx)("span",{className:"font-medium",children:(null===(n=o.customer_segments)||void 0===n?void 0:n.small)||0})]}),(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"M\xe9dio:"}),(0,He.jsx)("span",{className:"font-medium",children:(null===(a=o.customer_segments)||void 0===a?void 0:a.medium)||0})]}),(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"Grande:"}),(0,He.jsx)("span",{className:"font-medium",children:(null===(r=o.customer_segments)||void 0===r?void 0:r.large)||0})]})]})]}),(0,He.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,He.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Riscos e Oportunidades"}),(0,He.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"Clientes em Risco:"}),(0,He.jsx)("span",{className:"font-medium text-red-600",children:o.total_customers_at_risk||0})]}),(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"Receita em Risco:"}),(0,He.jsxs)("span",{className:"font-medium text-red-600",children:["R$ ",pw(o.revenue_at_risk,2)]})]}),(0,He.jsxs)("div",{className:"flex justify-between",children:[(0,He.jsx)("span",{className:"text-gray-600",children:"Oportunidades Expans\xe3o:"}),(0,He.jsx)("span",{className:"font-medium text-green-600",children:o.expansion_opportunities||0})]})]})]})]})]})]})},Nw=e=>{let{data:t}=e;if(!t)return(0,He.jsxs)("div",{className:"text-center py-12",children:[(0,He.jsx)(Hr,{icon:Ps,className:"text-4xl text-gray-400 mb-4"}),(0,He.jsx)("p",{className:"text-gray-500",children:"Dados de Customer Health n\xe3o dispon\xedveis."})]});const{summary:n}=t;return(0,He.jsxs)("div",{className:"space-y-6",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Customer Health Score"}),(0,He.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"An\xe1lise Comportamental"})]}),n&&(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,He.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:Fs,className:"text-green-500 mr-2"}),(0,He.jsx)("span",{className:"text-green-800 font-medium",children:"Saud\xe1veis"})]}),(0,He.jsx)("div",{className:"text-2xl font-bold text-green-600 mt-2",children:n.healthy_customers||0}),(0,He.jsx)("div",{className:"text-sm text-green-600",children:"Health Score \u2265 80"})]}),(0,He.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:go,className:"text-yellow-500 mr-2"}),(0,He.jsx)("span",{className:"text-yellow-800 font-medium",children:"Em Risco"})]}),(0,He.jsx)("div",{className:"text-2xl font-bold text-yellow-600 mt-2",children:n.at_risk_customers||0}),(0,He.jsx)("div",{className:"text-sm text-yellow-600",children:"Health Score < 60"})]}),(0,He.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:xs,className:"text-blue-500 mr-2"}),(0,He.jsx)("span",{className:"text-blue-800 font-medium",children:"Total Clientes"})]}),(0,He.jsx)("div",{className:"text-2xl font-bold text-blue-600 mt-2",children:n.total_customers||0}),(0,He.jsxs)("div",{className:"text-sm text-blue-600",children:["M\xe9dia: ",pw(n.avg_health_score,1)]})]}),(0,He.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:Ss,className:"text-purple-500 mr-2"}),(0,He.jsx)("span",{className:"text-purple-800 font-medium",children:"Receita Total"})]}),(0,He.jsxs)("div",{className:"text-2xl font-bold text-purple-600 mt-2",children:["R$ ",(n.total_revenue||0).toLocaleString("pt-BR")]}),(0,He.jsxs)("div",{className:"text-sm text-purple-600",children:["Idade m\xe9dia: ",Math.round(n.avg_customer_age||0)," meses"]})]})]}),(0,He.jsx)("p",{className:"text-gray-600",children:"O Customer Health Score \xe9 calculado com base em m\xfaltiplos fatores incluindo utiliza\xe7\xe3o da plataforma, hist\xf3rico de pagamentos, engajamento e crescimento do neg\xf3cio do cliente."})]})},_w=e=>{let{data:t}=e;return t?(0,He.jsxs)("div",{className:"space-y-8",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"An\xe1lise Preditiva de Churn"}),(0,He.jsx)("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium",children:"Preven\xe7\xe3o de Churn"})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,He.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex items-center mb-4",children:[(0,He.jsx)("div",{className:"bg-red-100 rounded-full p-3 mr-4",children:(0,He.jsx)(Hr,{icon:go,className:"text-red-600 text-xl"})}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h4",{className:"text-lg font-semibold text-red-900",children:"Alto Risco"}),(0,He.jsx)("p",{className:"text-red-600 text-sm",children:"A\xe7\xe3o imediata necess\xe1ria"})]})]}),(0,He.jsx)("div",{className:"text-3xl font-bold text-red-700 mb-2",children:t.high_risk_count||0}),(0,He.jsx)("p",{className:"text-red-600 text-sm",children:"cl\xednicas em risco cr\xedtico"})]}),(0,He.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex items-center mb-4",children:[(0,He.jsx)("div",{className:"bg-yellow-100 rounded-full p-3 mr-4",children:(0,He.jsx)(Hr,{icon:ms,className:"text-yellow-600 text-xl"})}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h4",{className:"text-lg font-semibold text-yellow-900",children:"M\xe9dio Risco"}),(0,He.jsx)("p",{className:"text-yellow-600 text-sm",children:"Monitoramento ativo"})]})]}),(0,He.jsx)("div",{className:"text-3xl font-bold text-yellow-700 mb-2",children:t.medium_risk_count||0}),(0,He.jsx)("p",{className:"text-yellow-600 text-sm",children:"cl\xednicas para acompanhar"})]}),(0,He.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex items-center mb-4",children:[(0,He.jsx)("div",{className:"bg-green-100 rounded-full p-3 mr-4",children:(0,He.jsx)(Hr,{icon:Fs,className:"text-green-600 text-xl"})}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h4",{className:"text-lg font-semibold text-green-900",children:"Baixo Risco"}),(0,He.jsx)("p",{className:"text-green-600 text-sm",children:"Clientes saud\xe1veis"})]})]}),(0,He.jsx)("div",{className:"text-3xl font-bold text-green-700 mb-2",children:t.low_risk_count||0}),(0,He.jsx)("p",{className:"text-green-600 text-sm",children:"cl\xednicas est\xe1veis"})]})]}),(0,He.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,He.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Principais Fatores de Churn"}),(0,He.jsxs)("div",{className:"space-y-3",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[(0,He.jsx)("span",{className:"text-gray-700",children:"Inadimpl\xeancia prolongada"}),(0,He.jsx)("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-sm",children:"Alto impacto"})]}),(0,He.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[(0,He.jsx)("span",{className:"text-gray-700",children:"Baixa utiliza\xe7\xe3o da plataforma"}),(0,He.jsx)("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-sm",children:"M\xe9dio impacto"})]}),(0,He.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[(0,He.jsx)("span",{className:"text-gray-700",children:"Aus\xeancia de crescimento"}),(0,He.jsx)("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm",children:"M\xe9dio impacto"})]})]})]}),(0,He.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,He.jsxs)("h4",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:us,className:"mr-2"}),"Recomenda\xe7\xf5es de A\xe7\xe3o"]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,He.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Contato Proativo"}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:"Entre em contato com cl\xednicas de alto risco para entender dificuldades"})]}),(0,He.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,He.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Ofertas Personalizadas"}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:"Crie planos especiais para clientes em risco m\xe9dio"})]}),(0,He.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,He.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Treinamento & Suporte"}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:"Ofere\xe7a sess\xf5es de treinamento para melhorar a ado\xe7\xe3o"})]}),(0,He.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,He.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Monitoramento Cont\xednuo"}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:"Acompanhe m\xe9tricas de uso e engagement regularmente"})]})]})]})]}):(0,He.jsxs)("div",{className:"text-center py-12",children:[(0,He.jsx)(Hr,{icon:ws,className:"text-4xl text-gray-400 mb-4"}),(0,He.jsx)("p",{className:"text-gray-500",children:"An\xe1lise Preditiva de Churn"}),(0,He.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Dados n\xe3o dispon\xedveis"})]})},Sw=e=>{let{data:t}=e;return t?(0,He.jsxs)("div",{className:"space-y-8",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Oportunidades de Crescimento"}),(0,He.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"Expans\xe3o de Receita"})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[(0,He.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,He.jsx)("div",{className:"bg-blue-100 rounded-full p-3",children:(0,He.jsx)(Hr,{icon:Gi,className:"text-blue-600 text-xl"})}),(0,He.jsx)("span",{className:"text-xs bg-blue-200 text-blue-800 px-2 py-1 rounded-full",children:"Expans\xe3o"})]}),(0,He.jsxs)("div",{className:"text-2xl font-bold text-blue-700 mb-1",children:["R$ ",pw((t.expansion_potential||0)/1e3,1),"K"]}),(0,He.jsx)("p",{className:"text-blue-600 text-sm",children:"Receita potencial de expans\xe3o"})]}),(0,He.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,He.jsx)("div",{className:"bg-green-100 rounded-full p-3",children:(0,He.jsx)(Hr,{icon:mo,className:"text-green-600 text-xl"})}),(0,He.jsx)("span",{className:"text-xs bg-green-200 text-green-800 px-2 py-1 rounded-full",children:"Pronto"})]}),(0,He.jsx)("div",{className:"text-2xl font-bold text-green-700 mb-1",children:t.ready_for_expansion||0}),(0,He.jsx)("p",{className:"text-green-600 text-sm",children:"Clientes prontos para expans\xe3o"})]})]}),(0,He.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,He.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:Ss,className:"mr-2 text-green-600"}),"Principais Candidatos \xe0 Expans\xe3o"]}),(0,He.jsx)("div",{className:"space-y-4",children:(0,He.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("h5",{className:"font-medium text-gray-900",children:"Cl\xednicas com Alta Utiliza\xe7\xe3o"}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:"Utilizando > 85% dos slots contratados"})]}),(0,He.jsxs)("div",{className:"text-right",children:[(0,He.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.high_utilization_clinics||0}),(0,He.jsx)("p",{className:"text-sm text-green-600",children:"cl\xednicas"})]})]})})]}),(0,He.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6",children:[(0,He.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:Yi,className:"mr-2 text-blue-600"}),"Estrat\xe9gias de Expans\xe3o Recomendadas"]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,He.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,He.jsx)("h5",{className:"font-medium text-gray-900 mb-3",children:"Outreach Proativo"}),(0,He.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,He.jsx)("li",{children:"\u2022 Contatar cl\xednicas com alta utiliza\xe7\xe3o"}),(0,He.jsx)("li",{children:"\u2022 Oferecer consulta gratuita de expans\xe3o"}),(0,He.jsx)("li",{children:"\u2022 Demonstrar ROI de slots adicionais"})]})]}),(0,He.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,He.jsx)("h5",{className:"font-medium text-gray-900 mb-3",children:"Incentivos de Upgrades"}),(0,He.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,He.jsx)("li",{children:"\u2022 Desconto de 15% no primeiro m\xeas"}),(0,He.jsx)("li",{children:"\u2022 Per\xedodo de teste de 30 dias"}),(0,He.jsx)("li",{children:"\u2022 Suporte premium inclu\xeddo"})]})]})]})]})]}):(0,He.jsxs)("div",{className:"text-center py-12",children:[(0,He.jsx)(Hr,{icon:Yi,className:"text-4xl text-gray-400 mb-4"}),(0,He.jsx)("p",{className:"text-gray-500",children:"Oportunidades de Crescimento"}),(0,He.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Dados n\xe3o dispon\xedveis"})]})},kw=e=>{let{data:t}=e;return t?(0,He.jsxs)("div",{className:"space-y-8",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"An\xe1lise de Coortes"}),(0,He.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:"Reten\xe7\xe3o de Clientes"})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,He.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,He.jsx)("h4",{className:"text-lg font-semibold text-blue-900",children:"Taxa de Reten\xe7\xe3o Global"}),(0,He.jsx)(Hr,{icon:xs,className:"text-blue-600 text-xl"})]}),(0,He.jsxs)("div",{className:"text-3xl font-bold text-blue-700 mb-2",children:[pw(100*(t.global_retention_rate||0),1),"%"]}),(0,He.jsx)("p",{className:"text-blue-600 text-sm",children:"Clientes ativos ap\xf3s 12 meses"})]}),(0,He.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,He.jsx)("h4",{className:"text-lg font-semibold text-green-900",children:"Melhor Coorte"}),(0,He.jsx)(Hr,{icon:Qi,className:"text-green-600 text-xl"})]}),(0,He.jsx)("div",{className:"text-3xl font-bold text-green-700 mb-2",children:t.best_cohort_period||"Jun/24"}),(0,He.jsxs)("p",{className:"text-green-600 text-sm",children:[pw(100*(t.best_cohort_retention||0),1),"% de reten\xe7\xe3o"]})]}),(0,He.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,He.jsx)("h4",{className:"text-lg font-semibold text-orange-900",children:"Tend\xeancia"}),(0,He.jsx)(Hr,{icon:Qs,className:"text-orange-600 text-xl"})]}),(0,He.jsxs)("div",{className:"text-3xl font-bold text-orange-700 mb-2",children:["+",pw(100*(t.retention_trend||0),1),"%"]}),(0,He.jsx)("p",{className:"text-orange-600 text-sm",children:"Melhoria \xfaltimos 3 meses"})]})]}),(0,He.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,He.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:cs,className:"mr-2 text-purple-600"}),"Matriz de Reten\xe7\xe3o por Coorte"]}),(0,He.jsx)("div",{className:"overflow-x-auto",children:(0,He.jsxs)("table",{className:"w-full text-sm",children:[(0,He.jsx)("thead",{children:(0,He.jsxs)("tr",{className:"bg-gray-50",children:[(0,He.jsx)("th",{className:"text-left p-3 text-gray-600",children:"Per\xedodo"}),(0,He.jsx)("th",{className:"text-center p-3 text-gray-600",children:"Novos Clientes"}),(0,He.jsx)("th",{className:"text-center p-3 text-gray-600",children:"M\xeas 1"}),(0,He.jsx)("th",{className:"text-center p-3 text-gray-600",children:"M\xeas 3"}),(0,He.jsx)("th",{className:"text-center p-3 text-gray-600",children:"M\xeas 6"}),(0,He.jsx)("th",{className:"text-center p-3 text-gray-600",children:"M\xeas 12"})]})}),(0,He.jsxs)("tbody",{className:"space-y-2",children:[(0,He.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,He.jsx)("td",{className:"p-3 font-medium",children:"Jan/24"}),(0,He.jsx)("td",{className:"text-center p-3",children:"15"}),(0,He.jsx)("td",{className:"text-center p-3",children:(0,He.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:"93%"})}),(0,He.jsx)("td",{className:"text-center p-3",children:(0,He.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:"87%"})}),(0,He.jsx)("td",{className:"text-center p-3",children:(0,He.jsx)("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:"73%"})}),(0,He.jsx)("td",{className:"text-center p-3",children:(0,He.jsx)("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:"67%"})})]}),(0,He.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,He.jsx)("td",{className:"p-3 font-medium",children:"Jun/24"}),(0,He.jsx)("td",{className:"text-center p-3",children:"23"}),(0,He.jsx)("td",{className:"text-center p-3",children:(0,He.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:"96%"})}),(0,He.jsx)("td",{className:"text-center p-3",children:(0,He.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:"91%"})}),(0,He.jsx)("td",{className:"text-center p-3",children:(0,He.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:"87%"})}),(0,He.jsx)("td",{className:"text-center p-3",children:(0,He.jsx)("span",{className:"text-gray-400",children:"-"})})]}),(0,He.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,He.jsx)("td",{className:"p-3 font-medium",children:"Set/24"}),(0,He.jsx)("td",{className:"text-center p-3",children:"18"}),(0,He.jsx)("td",{className:"text-center p-3",children:(0,He.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:"89%"})}),(0,He.jsx)("td",{className:"text-center p-3",children:(0,He.jsx)("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:"78%"})}),(0,He.jsx)("td",{className:"text-center p-3",children:(0,He.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,He.jsx)("td",{className:"text-center p-3",children:(0,He.jsx)("span",{className:"text-gray-400",children:"-"})})]})]})]})})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,He.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,He.jsxs)("h4",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:us,className:"mr-2"}),"Insights de Reten\xe7\xe3o"]}),(0,He.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)("div",{className:"bg-green-100 rounded-full p-1 mr-3 mt-1",children:(0,He.jsx)(Hr,{icon:Fs,className:"text-green-600 text-xs"})}),(0,He.jsx)("p",{className:"text-blue-800",children:"Clientes do primeiro semestre apresentam maior taxa de reten\xe7\xe3o a longo prazo"})]}),(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)("div",{className:"bg-yellow-100 rounded-full p-1 mr-3 mt-1",children:(0,He.jsx)(Hr,{icon:go,className:"text-yellow-600 text-xs"})}),(0,He.jsx)("p",{className:"text-blue-800",children:"Per\xedodo cr\xedtico de churn ocorre entre o 3\xba e 6\xba m\xeas"})]}),(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)("div",{className:"bg-blue-100 rounded-full p-1 mr-3 mt-1",children:(0,He.jsx)(Hr,{icon:gi,className:"text-blue-600 text-xs"})}),(0,He.jsx)("p",{className:"text-blue-800",children:"Coortes recentes mostram tend\xeancia de melhora na reten\xe7\xe3o inicial"})]})]})]}),(0,He.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,He.jsxs)("h4",{className:"text-lg font-semibold text-green-900 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:ws,className:"mr-2"}),"A\xe7\xf5es Recomendadas"]}),(0,He.jsxs)("div",{className:"space-y-3",children:[(0,He.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,He.jsx)("h5",{className:"font-medium text-gray-900 mb-1",children:"Programa de Onboarding"}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:"Fortalecer processo de integra\xe7\xe3o nos primeiros 90 dias"})]}),(0,He.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,He.jsx)("h5",{className:"font-medium text-gray-900 mb-1",children:"Check-ins Proativos"}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:"Agendar reuni\xf5es no 3\xba e 6\xba m\xeas para identificar problemas"})]}),(0,He.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,He.jsx)("h5",{className:"font-medium text-gray-900 mb-1",children:"Programa de Fidelidade"}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:"Criar incentivos para clientes que completam 12 meses"})]})]})]})]})]}):(0,He.jsxs)("div",{className:"text-center py-12",children:[(0,He.jsx)(Hr,{icon:to,className:"text-4xl text-gray-400 mb-4"}),(0,He.jsx)("p",{className:"text-gray-500",children:"An\xe1lise de Coortes"}),(0,He.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Dados n\xe3o dispon\xedveis"})]})},Cw=()=>{const{user:e,logout:t}=Ge(),[n,r]=(0,a.useState)("dashboard"),[s,i]=(0,a.useState)(!0),[o,l]=(0,a.useState)(""),[c,d]=(0,a.useState)({}),[u,h]=(0,a.useState)([]),[m,f]=(0,a.useState)([]),[p,g]=(0,a.useState)([]),[x,b]=(0,a.useState)([]),[v,y]=(0,a.useState)({status:"",search:""}),[w,j]=(0,a.useState)({status:"",clinic_id:""}),[N,_]=(0,a.useState)(!1),[S,k]=(0,a.useState)(!1),[C,A]=(0,a.useState)(!1),[P,L]=(0,a.useState)(!1),[E,D]=(0,a.useState)(!1),[M,O]=(0,a.useState)(!1),[T,R]=(0,a.useState)(!1),[I,F]=(0,a.useState)(null),[z,B]=(0,a.useState)(null);(0,a.useEffect)((()=>{e&&"super_admin"===e.role||t()}),[e,t]);const q=(0,a.useCallback)((async()=>{try{i(!0);const[e,t,n,a]=await Promise.all([Ay(),Ly(),zy(),Py()]);d(e.data||{}),h(t.data||[]),g(n.data||[]),b(a.data||[])}catch(o){console.error("Erro ao carregar dados:",o),l("Erro ao carregar dados do sistema.")}finally{i(!1)}}),[]);(0,a.useEffect)((()=>{q()}),[q]);const U=(0,a.useCallback)((async()=>{try{const e=await Ly(v);h(e.data||[])}catch(o){console.error("Erro ao carregar cl\xednicas:",o)}}),[v]),W=(0,a.useCallback)((async()=>{try{const e=await Ry(w);f(e.data||[])}catch(o){console.error("Erro ao carregar cobran\xe7as:",o)}}),[w]);(0,a.useEffect)((()=>{"clinics"===n&&U()}),[n,U]),(0,a.useEffect)((()=>{"financial"===n&&W()}),[n,W]);const H=(0,a.useMemo)((()=>p.length?{labels:p.map((e=>e.month_label)),datasets:[{label:"Receita Mensal (R$)",data:p.map((e=>parseFloat(e.revenue||0))),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"rgb(59, 130, 246)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]}:null),[p]),V=(0,a.useMemo)((()=>x.length?{labels:x.map((e=>e.month_label)),datasets:[{label:"Novas Cl\xednicas",data:x.map((e=>parseInt(e.new_clinics||0))),backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)",borderWidth:1},{label:"Novos Usu\xe1rios",data:x.map((e=>parseInt(e.new_users||0))),backgroundColor:"rgba(59, 130, 246, 0.6)",borderColor:"rgb(59, 130, 246)",borderWidth:1}]}:null),[x]),Y=(0,a.useMemo)((()=>{const e=parseInt(c.active_clinics||0),t=parseInt(c.suspended_clinics||0);return{labels:["Ativas","Suspensas","Inativas"],datasets:[{data:[e,t,parseInt(c.total_clinics||0)-e-t],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.8)","rgba(156, 163, 175, 0.8)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(156, 163, 175)"],borderWidth:2}]}}),[c]);return s?(0,He.jsxs)("div",{className:"flex justify-center items-center min-h-screen",children:[(0,He.jsx)(Hr,{icon:Zi,className:"text-4xl text-blue-500 animate-spin"}),(0,He.jsx)("span",{className:"ml-3 text-lg",children:"Carregando painel super admin..."})]}):o?(0,He.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,He.jsxs)("div",{className:"text-red-500 text-center",children:[(0,He.jsx)(Hr,{icon:go,className:"text-4xl mb-4"}),(0,He.jsx)("p",{className:"text-lg",children:o})]})}):(0,He.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,He.jsx)("div",{className:"bg-white shadow border-b border-gray-200",children:(0,He.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,He.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:zs,className:"text-2xl text-blue-600 mr-3"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Super Admin"}),(0,He.jsx)("p",{className:"text-sm text-gray-500",children:"Painel de controle do sistema ABAplay"})]})]}),(0,He.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,He.jsxs)("div",{className:"text-sm text-gray-500",children:["Bem-vindo, ",(0,He.jsx)("span",{className:"font-semibold text-gray-700",children:null===e||void 0===e?void 0:e.name})]}),(0,He.jsx)("button",{onClick:t,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Sair"})]})]})})}),(0,He.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,He.jsx)("div",{className:"border-b border-gray-200 bg-white",children:(0,He.jsx)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[{key:"dashboard",label:"Dashboard",icon:Ei},{key:"enterprise",label:"Business Intelligence",icon:bo},{key:"clinics",label:"Cl\xednicas",icon:ao},{key:"programs",label:"Programas Globais",icon:_s},{key:"financial",label:"Financeiro",icon:No},{key:"calendar",label:"Calend\xe1rio",icon:Zr}].map((e=>(0,He.jsxs)("button",{onClick:()=>r(e.key),className:"".concat(n===e.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),children:[(0,He.jsx)(Hr,{icon:e.icon,className:"mr-2"}),e.label]},e.key)))})})}),(0,He.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["dashboard"===n&&(0,He.jsx)(xw,{metrics:c,processedRevenueChart:H,processedGrowthChart:V,statusChart:Y}),"enterprise"===n&&(0,He.jsx)(ww,{}),"clinics"===n&&(0,He.jsx)(bw,{clinics:u,filters:v,setFilters:y,onCreateClinic:()=>_(!0),onEditLimit:e=>{F(e),k(!0)},onSuspend:e=>{F(e),A(!0)},onReactivate:async e=>{try{await My(e),U()}catch(o){console.error("Erro ao reativar cl\xednica:",o)}},onViewDetails:e=>{F(e),D(!0)},onDeleteClinic:async e=>{try{u.find((t=>t.id===e));const o=await By(e);if(o.success){var t,n,a,r,s,i,l,c,d,h;const e=o.data.total_eliminated||0;alert('\u2705 Cl\xednica "'.concat(o.data.clinic_name,'" eliminada com sucesso!\n\n')+"Total de registros eliminados: ".concat(e,"\n\n")+"Detalhes:\n"+"\u2022 Usu\xe1rios: ".concat((null===(t=o.data.eliminated_records)||void 0===t?void 0:t.users)||0,"\n")+"\u2022 Pacientes: ".concat((null===(n=o.data.eliminated_records)||void 0===n?void 0:n.patients)||0,"\n")+"\u2022 Cobran\xe7as: ".concat((null===(a=o.data.eliminated_records)||void 0===a?void 0:a.billings)||0,"\n")+"\u2022 Discuss\xf5es: ".concat((null===(r=o.data.eliminated_records)||void 0===r?void 0:r.case_discussions)||0,"\n")+"\u2022 Chats: ".concat((null===(s=o.data.eliminated_records)||void 0===s?void 0:s.parent_chats)||0,"\n")+"\u2022 Sess\xf5es: ".concat((null===(i=o.data.eliminated_records)||void 0===i?void 0:i.program_sessions)||0,"\n")+"\u2022 Progressos: ".concat((null===(l=o.data.eliminated_records)||void 0===l?void 0:l.progress_records)||0,"\n")+"\u2022 Programas: ".concat((null===(c=o.data.eliminated_records)||void 0===c?void 0:c.program_assignments)||0,"\n")+"\u2022 Atribui\xe7\xf5es: ".concat((null===(d=o.data.eliminated_records)||void 0===d?void 0:d.therapist_assignments)||0,"\n")+"\u2022 Notifica\xe7\xf5es: ".concat((null===(h=o.data.eliminated_records)||void 0===h?void 0:h.notifications)||0)),U(),q()}}catch(o){var m,f,p,g;const t=(null===(m=o.response)||void 0===m||null===(f=m.data)||void 0===f||null===(p=f.errors)||void 0===p||null===(g=p[0])||void 0===g?void 0:g.msg)||"Erro interno do servidor.";alert("\u274c Erro ao eliminar cl\xednica:\n\n".concat(t)),console.error("Erro ao eliminar cl\xednica:",o)}}}),"programs"===n&&(0,He.jsx)(fw,{}),"financial"===n&&(0,He.jsx)(vw,{billings:m,metrics:c,filters:w,setFilters:j,onRecordPayment:e=>{B(e),L(!0)},onCreateBilling:()=>O(!0),loadInitialData:q}),"calendar"===n&&(0,He.jsx)(yw,{billings:m,onViewBilling:e=>{B(e)},onRecordPayment:e=>{B(e),L(!0)},onEditDueDate:e=>{B(e),R(!0)},onCreateBilling:()=>O(!0)})]}),(0,He.jsx)(nw,{isOpen:N,onClose:()=>_(!1),onSubmit:async e=>{try{await Ey(e),_(!1),U(),q()}catch(o){console.error("Erro ao criar cl\xednica:",o)}}}),(0,He.jsx)(aw,{isOpen:S,onClose:()=>{k(!1),F(null)},clinic:I,onSubmit:e=>(async(e,t)=>{try{await Oy(e,t),k(!1),F(null),U()}catch(o){console.error("Erro ao atualizar limite:",o)}})(I.id,e),onResetPassword:async e=>{try{await Ty(e),alert("Senha resetada! O administrador dever\xe1 cadastrar nova senha no pr\xf3ximo login.")}catch(o){throw console.error("Erro ao resetar senha:",o),new Error("Erro ao resetar senha do administrador da cl\xednica")}}}),(0,He.jsx)(rw,{isOpen:C,onClose:()=>{A(!1),F(null)},clinic:I,onSubmit:e=>(async(e,t)=>{try{await Dy(e,t),A(!1),F(null),U()}catch(o){console.error("Erro ao suspender cl\xednica:",o)}})(I.id,e)}),(0,He.jsx)(sw,{isOpen:P,onClose:()=>{L(!1),B(null)},billing:z,onSubmit:async e=>{try{await Fy(z.id,e),L(!1),B(null),W(),q()}catch(o){console.error("Erro ao registrar pagamento:",o)}}}),(0,He.jsx)(uw,{isOpen:M,onClose:()=>O(!1),clinics:u,onSubmit:async e=>{try{await Iy(e),O(!1),W(),q()}catch(o){console.error("Erro ao criar cobran\xe7a:",o)}}}),(0,He.jsx)(hw,{isOpen:T,onClose:()=>{R(!1),B(null)},billing:z,onSubmit:async e=>{try{await qy(z.id,e),R(!1),B(null),W(),q()}catch(o){console.error("Erro ao editar data de vencimento:",o)}}}),E&&I&&(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,He.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Detalhes da Cl\xednica: ",I.name]}),(0,He.jsx)("button",{onClick:()=>{D(!1),F(null)},className:"text-gray-400 hover:text-gray-600",children:(0,He.jsx)(Hr,{icon:Vi})})]}),(0,He.jsxs)("div",{className:"p-6 space-y-4",children:[(0,He.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,He.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("active"===I.status?"bg-green-100 text-green-800":"suspended"===I.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:"active"===I.status?"Ativa":"suspended"===I.status?"Suspensa":"Inativa"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pacientes Atuais"}),(0,He.jsxs)("p",{className:"text-sm text-gray-900",children:[I.current_patients||0," / ",I.max_patients]})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Terapeutas"}),(0,He.jsx)("p",{className:"text-sm text-gray-900",children:I.therapists_count||0})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pais"}),(0,He.jsx)("p",{className:"text-sm text-gray-900",children:I.parents_count||0})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Cria\xe7\xe3o"}),(0,He.jsx)("p",{className:"text-sm text-gray-900",children:new Date(I.created_at).toLocaleDateString("pt-BR")})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Administrador"}),(0,He.jsx)("p",{className:"text-sm text-gray-900",children:I.admin_name||"N/A"})]})]}),I.suspended_at&&(0,He.jsxs)("div",{className:"mt-4 p-4 bg-red-50 rounded-lg",children:[(0,He.jsx)("h4",{className:"font-medium text-red-800",children:"Informa\xe7\xf5es da Suspens\xe3o"}),(0,He.jsxs)("p",{className:"text-sm text-red-700 mt-1",children:[(0,He.jsx)("strong",{children:"Data:"})," ",new Date(I.suspended_at).toLocaleDateString("pt-BR")]}),I.suspension_reason&&(0,He.jsxs)("p",{className:"text-sm text-red-700 mt-1",children:[(0,He.jsx)("strong",{children:"Motivo:"})," ",I.suspension_reason]})]})]})]})})]})},Aw=$e.A.create({baseURL:qe.H});Aw.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e)));const Pw=async e=>{try{const t=(0,Ie.A)((0,Ie.A)({},e),{},{scheduled_date:Bw(e.scheduled_date),patient_id:parseInt(e.patient_id),therapist_id:parseInt(e.therapist_id),discipline_id:e.discipline_id?parseInt(e.discipline_id):null});return(await Aw.post("/admin/scheduling/appointments",t)).data}catch(s){var t,n,a,r;throw console.error("[SCHEDULING-API] Erro ao criar agendamento"),new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"Erro ao criar agendamento")}},Lw=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;Object.entries(e).forEach((e=>{let[n,a]=e;void 0!==a&&null!==a&&""!==a&&t.append(n,a)}));return(await Aw.get("/admin/scheduling/appointments?".concat(t.toString()))).data}catch(s){var t,n,a,r;throw console.error("[SCHEDULING-API] Erro ao buscar agendamentos"),new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"Erro ao buscar agendamentos")}},Ew=async(e,t)=>{try{const n=(0,Ie.A)({},t);t.scheduled_date&&(n.scheduled_date=Bw(t.scheduled_date));return(await Aw.put("/admin/scheduling/appointments/".concat(e),n)).data}catch(i){var n,a,r,s;throw console.error("[SCHEDULING-API] Erro ao atualizar agendamento ID ".concat(e)),new Error((null===(n=i.response)||void 0===n||null===(a=n.data)||void 0===a||null===(r=a.errors)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.msg)||"Erro ao atualizar agendamento")}},Dw=async e=>{try{return(await Aw.delete("/admin/scheduling/appointments/".concat(e,"/permanent"))).data}catch(s){var t,n,a,r;throw console.error("[SCHEDULING-API] Erro ao remover agendamento ID ".concat(e)),new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"Erro ao remover agendamento")}},Mw=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;try{return(await Aw.post("/admin/scheduling/mark-missed",{hours_after:e})).data}catch(s){var t,n,a,r;throw console.error("[SCHEDULING-API] Erro ao marcar agendamentos perdidos"),new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"Erro ao marcar agendamentos perdidos")}},Ow=async(e,t)=>{try{const n=new URLSearchParams;e&&n.append("start_date",e),t&&n.append("end_date",t);return(await Aw.get("/admin/scheduling/statistics?".concat(n.toString()))).data}catch(i){var n,a,r,s;throw console.error("[SCHEDULING-API] Erro ao buscar estat\xedsticas da cl\xednica"),new Error((null===(n=i.response)||void 0===n||null===(a=n.data)||void 0===a||null===(r=a.errors)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.msg)||"Erro ao buscar estat\xedsticas")}},Tw=e=>e?new Date(e).toLocaleDateString("pt-BR"):"-",Rw=e=>e?e.slice(0,5):"-",Iw=e=>({scheduled:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",missed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[e]||"bg-gray-100 text-gray-600"),Fw=e=>({scheduled:"Agendado",completed:"Realizado",missed:"N\xe3o realizado",cancelled:"Cancelado"}[e]||"Desconhecido"),zw=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;try{if(!e||!t)return{isValid:!1,message:"Data e hor\xe1rio s\xe3o obrigat\xf3rios"};if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return{isValid:!1,message:"Data deve estar no formato YYYY-MM-DD"};if(!/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(t))return{isValid:!1,message:"Hor\xe1rio deve estar no formato HH:MM"};const[a,r,s]=e.split("-").map(Number),[i,o]=t.split(":").map(Number),l=new Date(a,r-1,s,i,o,0);if(isNaN(l.getTime()))return{isValid:!1,message:"Data ou hor\xe1rio inv\xe1lidos"};const c=new Date;if(l<new Date(c.getTime()-60*n*1e3))return{isValid:!1,message:"N\xe3o \xe9 poss\xedvel agendar para datas passadas"};const d=new Date;return d.setFullYear(d.getFullYear()+1),l>d?{isValid:!1,message:"N\xe3o \xe9 poss\xedvel agendar com mais de 1 ano de anteced\xeancia"}:{isValid:!0,message:"Data e hor\xe1rio v\xe1lidos"}}catch(a){return{isValid:!1,message:"Erro ao validar data/hor\xe1rio: "+a.message}}},Bw=e=>{if(!e||null===e||void 0===e)return"";const t=String(e).trim();try{if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(t)){const[e,n,a]=t.split("/");return"".concat(a,"-").concat(n.padStart(2,"0"),"-").concat(e.padStart(2,"0"))}if(/^\d{1,2}-\d{1,2}-\d{4}$/.test(t)){const[e,n,a]=t.split("-");return"".concat(a,"-").concat(n.padStart(2,"0"),"-").concat(e.padStart(2,"0"))}const e=new Date(t);if(!isNaN(e.getTime())){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(a)}return""}catch(n){return console.error("[NORMALIZE-DATE] Erro ao normalizar:",t,n),""}},qw=e=>{const t=[];if(e.patient_id||t.push("Paciente \xe9 obrigat\xf3rio"),e.therapist_id||t.push("Terapeuta \xe9 obrigat\xf3rio"),e.scheduled_date||t.push("Data do agendamento \xe9 obrigat\xf3ria"),e.scheduled_time||t.push("Hor\xe1rio do agendamento \xe9 obrigat\xf3rio"),e.scheduled_date&&e.scheduled_time){const n=Bw(e.scheduled_date);if(n){const a=zw(n,e.scheduled_time);a.isValid||t.push(a.message)}else t.push("Formato de data inv\xe1lido")}return e.duration_minutes&&(e.duration_minutes<15||e.duration_minutes>240)&&t.push("Dura\xe7\xe3o deve estar entre 15 e 240 minutos"),t},Uw=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;e.start_date&&t.append("start_date",e.start_date),e.end_date&&t.append("end_date",e.end_date),e.limit&&t.append("limit",e.limit),e.offset&&t.append("offset",e.offset);return(await Aw.get("/admin/scheduling/orphan-sessions?".concat(t.toString()))).data}catch(s){var t,n,a,r;throw console.error("[SCHEDULING-API] Erro ao buscar sess\xf5es \xf3rf\xe3s"),new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"Erro ao buscar sess\xf5es \xf3rf\xe3s")}},Ww=async e=>{try{return(await Aw.post("/admin/scheduling/intelligent-detection",e)).data}catch(s){var t,n,a,r;throw console.error("[SCHEDULING-API] Erro na detec\xe7\xe3o inteligente"),new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"Erro na detec\xe7\xe3o inteligente")}},Hw=async(e,t)=>{try{return(await Aw.post("/admin/scheduling/create-retroactive/".concat(e),t)).data}catch(i){var n,a,r,s;throw console.error("[SCHEDULING-API] Erro ao criar agendamento retroativo"),new Error((null===(n=i.response)||void 0===n||null===(a=n.data)||void 0===a||null===(r=a.errors)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.msg)||"Erro ao criar agendamento retroativo")}},Vw=e=>{if(!e)return"";try{let t;if("string"===typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)&&(t=new Date(e+"T00:00:00"),!isNaN(t.getTime())))return e;if("string"===typeof e&&/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e)){const[n,a,r]=e.split("/");t=new Date(parseInt(r),parseInt(a)-1,parseInt(n))}else if("string"===typeof e&&/^\d{1,2}-\d{1,2}-\d{4}$/.test(e)){const[n,a,r]=e.split("-");t=new Date(parseInt(r),parseInt(a)-1,parseInt(n))}else t=new Date(e);if(isNaN(t.getTime()))return console.warn("[DATE-UTILS] Data inv\xe1lida fornecida:",e),"";const n=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(a,"-").concat(r)}catch(t){return console.warn("[DATE-UTILS] Erro ao processar data:",e,t),""}},Yw=e=>{let{isOpen:t,onClose:n,onSubmit:r,editingAppointment:s=null,isLoading:i=!1}=e;const{token:o}=Ge(),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)([]),[h,m]=(0,a.useState)([]),[f,p]=(0,a.useState)(!1),[g,x]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1),[y,w]=(0,a.useState)({patient_id:"",therapist_id:"",discipline_id:"",scheduled_date:"",scheduled_time:"",duration_minutes:60,notes:""}),[j,N]=(0,a.useState)([]),[_,S]=(0,a.useState)(null);(0,a.useEffect)((()=>{t&&o&&(k(),C(),A())}),[t,o]);const k=async()=>{try{p(!0);const e=await(async e=>{try{return(await $e.A.get("".concat(Xe,"/admin/therapists"),Ke(e))).data.therapists||[]}catch(s){var t,n,a,r;throw new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"N\xe3o foi poss\xedvel carregar a lista de terapeutas.")}})(o);c(e)}catch(e){console.error("Erro ao carregar terapeutas"),N(["Erro ao carregar lista de terapeutas"])}finally{p(!1)}},C=async()=>{try{x(!0);const e=await Ze(o);u(e)}catch(e){console.error("Erro ao carregar pacientes"),N(["Erro ao carregar lista de pacientes"])}finally{x(!1)}},A=async()=>{try{v(!0);const e=await(0,nt.uc)();let t=[];e&&"object"===typeof e&&(t=Object.keys(e).map((t=>({id:e[t].id,name:t})))),m(t)}catch(e){console.error("Erro ao carregar disciplinas"),N(["Erro ao carregar lista de disciplinas"]),m([])}finally{v(!1)}};(0,a.useEffect)((()=>{t&&(w(s?{patient_id:s.patient_id||"",therapist_id:s.therapist_id||"",discipline_id:s.discipline_id||"",scheduled_date:Vw(s.scheduled_date)||"",scheduled_time:s.scheduled_time||"",duration_minutes:s.duration_minutes||60,notes:s.notes||""}:{patient_id:"",therapist_id:"",discipline_id:"",scheduled_date:"",scheduled_time:"",duration_minutes:60,notes:""}),N([]))}),[t,s]);const P=e=>{const{name:t,value:n}=e.target;let a=n;"scheduled_date"===t&&n&&(a=Vw(n));const r=(0,Ie.A)((0,Ie.A)({},y),{},{[t]:a});if(w(r),j.length>0&&N([]),("scheduled_date"===t||"scheduled_time"===t)&&r.scheduled_date&&r.scheduled_time){const e=zw(r.scheduled_date,r.scheduled_time);e.isValid?S(null):S(e.message)}else"scheduled_date"!==t&&"scheduled_time"!==t||S(null)};return t?(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,He.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-3 text-blue-600"}),s?"Editar Agendamento":"Novo Agendamento"]}),(0,He.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:i,children:(0,He.jsx)(Hr,{icon:Vi,className:"w-6 h-6"})})]}),(0,He.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=qw(y);if(t.length>0)return void N(t);const n=(0,Ie.A)((0,Ie.A)({},y),{},{patient_id:parseInt(y.patient_id),therapist_id:parseInt(y.therapist_id),discipline_id:y.discipline_id?parseInt(y.discipline_id):null,duration_minutes:parseInt(y.duration_minutes),scheduled_date:Vw(y.scheduled_date)});r(n)},className:"p-6",children:[j.length>0&&(0,He.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:[(0,He.jsx)("h4",{className:"text-sm font-medium text-red-800 mb-2",children:"Corrigir os seguintes erros:"}),(0,He.jsx)("ul",{className:"text-sm text-red-700 space-y-1",children:j.map(((e,t)=>(0,He.jsxs)("li",{children:["\u2022 ",e]},t)))})]}),(0,He.jsxs)("div",{className:"space-y-6 mb-6",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:js,className:"mr-2 text-gray-400"}),"Paciente *"]}),(0,He.jsxs)("select",{name:"patient_id",value:y.patient_id,onChange:P,required:!0,disabled:i||g,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,He.jsx)("option",{value:"",children:g?"Carregando pacientes...":"Selecione um paciente"}),d.map((e=>(0,He.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:$r,className:"mr-2 text-gray-400"}),"Terapeuta *"]}),(0,He.jsxs)("select",{name:"therapist_id",value:y.therapist_id,onChange:P,required:!0,disabled:i||f,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,He.jsx)("option",{value:"",children:f?"Carregando terapeutas...":"Selecione um terapeuta"}),l.map((e=>(0,He.jsx)("option",{value:e.id,children:e.full_name},e.id)))]})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:jo,className:"mr-2 text-gray-400"}),"\xc1rea de Interven\xe7\xe3o ",(0,He.jsx)("span",{className:"text-gray-500 text-sm",children:"(opcional)"})]}),(0,He.jsxs)("select",{name:"discipline_id",value:y.discipline_id,onChange:P,disabled:i||b,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,He.jsx)("option",{value:"",children:b?"Carregando disciplinas...":"Sess\xe3o geral (todos os programas)"}),Array.isArray(h)&&h.map((e=>(0,He.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,He.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:"\ud83d\udca1 Deixe em branco para sess\xe3o geral que pode trabalhar qualquer programa do paciente"}),b&&(0,He.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[(0,He.jsx)(Hr,{icon:Zi,className:"animate-spin mr-2"}),"Carregando \xe1reas de interven\xe7\xe3o..."]})]})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2 text-gray-400"}),"Data do Agendamento *"]}),(0,He.jsx)("input",{type:"date",name:"scheduled_date",value:y.scheduled_date,onChange:P,min:Vw(new Date),required:!0,disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:Ni,className:"mr-2 text-gray-400"}),"Hor\xe1rio *"]}),(0,He.jsxs)("select",{name:"scheduled_time",value:y.scheduled_time,onChange:P,required:!0,disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[(0,He.jsx)("option",{value:"",children:"Selecione um hor\xe1rio..."}),(()=>{const e=[];for(let t=7;t<=20;t++)e.push("".concat(t.toString().padStart(2,"0"),":00")),t<20&&e.push("".concat(t.toString().padStart(2,"0"),":30"));return e})().map((e=>(0,He.jsx)("option",{value:e,children:e},e)))]})]})]}),_&&(0,He.jsx)("div",{className:"mb-6 p-3 bg-orange-50 border border-orange-200 rounded-md",children:(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)("svg",{className:"w-4 h-4 text-orange-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,He.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,He.jsx)("span",{className:"text-orange-800 text-sm",children:_})]})}),(0,He.jsxs)("div",{className:"mb-6",children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:$r,className:"mr-2 text-gray-400"}),"Dura\xe7\xe3o (minutos)"]}),(0,He.jsxs)("select",{name:"duration_minutes",value:y.duration_minutes,onChange:P,disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[(0,He.jsx)("option",{value:30,children:"30 minutos"}),(0,He.jsx)("option",{value:45,children:"45 minutos"}),(0,He.jsx)("option",{value:60,children:"60 minutos"}),(0,He.jsx)("option",{value:90,children:"90 minutos"}),(0,He.jsx)("option",{value:120,children:"120 minutos"})]})]}),(0,He.jsxs)("div",{className:"mb-6",children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:jo,className:"mr-2 text-gray-400"}),"Observa\xe7\xf5es"]}),(0,He.jsx)("textarea",{name:"notes",value:y.notes,onChange:P,rows:3,maxLength:500,placeholder:"Observa\xe7\xf5es sobre o agendamento (opcional)...",disabled:i,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 resize-none"}),(0,He.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[y.notes.length,"/500 caracteres"]})]}),(0,He.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,He.jsx)("button",{type:"button",onClick:n,disabled:i,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"}),(0,He.jsxs)("button",{type:"submit",disabled:i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[i&&(0,He.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,He.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,He.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s?"Atualizar":"Agendar"]})]})]})]})}):null},Gw=e=>{let{appointments:t=[],onEdit:n,onDelete:r,onView:s,isLoading:i=!1,pagination:o=null,onPageChange:l=null,showFilters:c=!0}=e;const[d,u]=(0,a.useState)({search:"",status:"",startDate:"",endDate:"",therapistId:""}),[h,m]=(0,a.useState)("scheduled_date"),[f,p]=(0,a.useState)("asc"),[g,x]=(0,a.useState)(!1),b=[...new Set(t.map((e=>e.therapist_name)))].sort(),v=(e,t)=>{u((n=>(0,Ie.A)((0,Ie.A)({},n),{},{[e]:t})))},y=e=>{h===e?p("asc"===f?"desc":"asc"):(m(e),p("asc"))},w=[...t.filter((e=>{const t=!d.search||e.patient_name.toLowerCase().includes(d.search.toLowerCase())||e.discipline_name&&e.discipline_name.toLowerCase().includes(d.search.toLowerCase())||e.therapist_name.toLowerCase().includes(d.search.toLowerCase()),n=!d.status||e.status===d.status,a=(!d.startDate||e.scheduled_date>=d.startDate)&&(!d.endDate||e.scheduled_date<=d.endDate),r=!d.therapistId||e.therapist_name===d.therapistId;return t&&n&&a&&r}))].sort(((e,t)=>{let n=e[h],a=t[h];return"scheduled_date"===h&&(n=new Date("".concat(e.scheduled_date,"T").concat(e.scheduled_time)),a=new Date("".concat(t.scheduled_date,"T").concat(t.scheduled_time))),"string"===typeof n&&(n=n.toLowerCase(),a=a.toLowerCase()),"asc"===f?n>a?1:-1:n<a?1:-1})),j=e=>h!==e?null:"asc"===f?vs:Ti,N=e=>{const t=new Date,n=new Date("".concat(e.scheduled_date,"T").concat(e.scheduled_time));let a="hover:bg-gray-50 transition-colors";return"scheduled"===e.status&&n<t?a+=" bg-red-50 border-l-4 border-red-400":"completed"===e.status?a+=" bg-green-50":"cancelled"===e.status&&(a+=" bg-gray-100 opacity-75"),a};return i?(0,He.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,He.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,He.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,He.jsx)("span",{className:"ml-3 text-gray-600",children:"Carregando agendamentos..."})]})}):(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[c&&(0,He.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,He.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,He.jsx)(Hr,{icon:Xs,className:"mr-2 text-gray-400"}),"Filtros"]}),(0,He.jsxs)("button",{onClick:()=>x(!g),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[g?"Ocultar filtros":"Mais filtros",(0,He.jsx)(Hr,{icon:g?vs:Ti,className:"ml-1 w-3 h-3"})]})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,He.jsx)(Hr,{icon:Oi,className:"mr-1 text-gray-400"}),"Buscar"]}),(0,He.jsx)("input",{type:"text",value:d.search,onChange:e=>v("search",e.target.value),placeholder:"Paciente, disciplina ou terapeuta...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,He.jsxs)("select",{value:d.status,onChange:e=>v("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,He.jsx)("option",{value:"",children:"Todos os status"}),(0,He.jsx)("option",{value:"scheduled",children:"Agendado"}),(0,He.jsx)("option",{value:"completed",children:"Realizado"}),(0,He.jsx)("option",{value:"missed",children:"N\xe3o realizado"}),(0,He.jsx)("option",{value:"cancelled",children:"Cancelado"})]})]}),(0,He.jsx)("div",{className:"flex items-end",children:(0,He.jsx)("button",{onClick:()=>{u({search:"",status:"",startDate:"",endDate:"",therapistId:""})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Limpar filtros"})})]}),g&&(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t border-gray-200",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data inicial"}),(0,He.jsx)("input",{type:"date",value:d.startDate,onChange:e=>v("startDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data final"}),(0,He.jsx)("input",{type:"date",value:d.endDate,onChange:e=>v("endDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Terapeuta"}),(0,He.jsxs)("select",{value:d.therapistId,onChange:e=>v("therapistId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,He.jsx)("option",{value:"",children:"Todos os terapeutas"}),b.map((e=>(0,He.jsx)("option",{value:e,children:e},e)))]})]})]})]}),(0,He.jsx)("div",{className:"overflow-x-auto",children:0===w.length?(0,He.jsxs)("div",{className:"p-8 text-center",children:[(0,He.jsx)(Hr,{icon:Zr,className:"text-gray-300 text-4xl mb-4"}),(0,He.jsx)("p",{className:"text-gray-500",children:0===t.length?"Nenhum agendamento encontrado":"Nenhum agendamento corresponde aos filtros selecionados"})]}):(0,He.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,He.jsx)("thead",{className:"bg-gray-50",children:(0,He.jsxs)("tr",{children:[(0,He.jsx)("th",{onClick:()=>y("scheduled_date"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2"}),"Data/Hora",j("scheduled_date")&&(0,He.jsx)(Hr,{icon:j("scheduled_date"),className:"ml-1 w-3 h-3"})]})}),(0,He.jsx)("th",{onClick:()=>y("patient_name"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:js,className:"mr-2"}),"Paciente",j("patient_name")&&(0,He.jsx)(Hr,{icon:j("patient_name"),className:"ml-1 w-3 h-3"})]})}),(0,He.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[(0,He.jsx)(Hr,{icon:$r,className:"mr-2"}),"\xc1rea de Interven\xe7\xe3o"]}),(0,He.jsx)("th",{onClick:()=>y("therapist_name"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:(0,He.jsxs)("div",{className:"flex items-center",children:["Terapeuta",j("therapist_name")&&(0,He.jsx)(Hr,{icon:j("therapist_name"),className:"ml-1 w-3 h-3"})]})}),(0,He.jsx)("th",{onClick:()=>y("status"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:(0,He.jsxs)("div",{className:"flex items-center",children:["Status",j("status")&&(0,He.jsx)(Hr,{icon:j("status"),className:"ml-1 w-3 h-3"})]})}),(0,He.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,He.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map((e=>(0,He.jsxs)("tr",{className:N(e),children:[(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsxs)("div",{className:"flex flex-col",children:[(0,He.jsx)("div",{className:"text-sm font-medium text-gray-900",children:Tw(e.scheduled_date)}),(0,He.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,He.jsx)(Hr,{icon:Ni,className:"mr-1 w-3 h-3"}),Rw(e.scheduled_time),(0,He.jsxs)("span",{className:"ml-1",children:["(",e.duration_minutes,"min)"]})]})]})}),(0,He.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,He.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.patient_name}),e.patient_age&&(0,He.jsxs)("div",{className:"text-sm text-gray-500",children:[e.patient_age," anos"]})]}),(0,He.jsxs)("td",{className:"px-6 py-4",children:[(0,He.jsx)("div",{className:"text-sm text-gray-900",children:e.discipline_name||"Sess\xe3o Geral"}),e.active_programs_count>0&&(0,He.jsxs)("div",{className:"text-sm text-gray-500",children:[e.active_programs_count," programa(s) ativo(s)"]})]}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsx)("div",{className:"text-sm text-gray-900",children:e.therapist_name})}),(0,He.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,He.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(Iw(e.status)),children:Fw(e.status)}),e.missed_reason&&(0,He.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:"Justificado"})]}),(0,He.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2",children:[(0,He.jsx)("button",{onClick:()=>s(e),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Visualizar agendamento",children:(0,He.jsx)(Hr,{icon:ni,className:"w-4 h-4"})}),"scheduled"===e.status&&n&&(0,He.jsx)("button",{onClick:()=>n(e),className:"text-yellow-600 hover:text-yellow-900 transition-colors",title:"Editar agendamento",children:(0,He.jsx)(Hr,{icon:gs,className:"w-4 h-4"})}),("scheduled"===e.status||"cancelled"===e.status||"missed"===e.status||"completed"===e.status)&&r&&(0,He.jsx)("button",{onClick:()=>r(e),className:"text-red-600 hover:text-red-900 transition-colors",title:"Remover agendamento",children:(0,He.jsx)(Hr,{icon:li,className:"w-4 h-4"})})]})]},e.id)))})]})}),o&&o.totalPages>1&&(0,He.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[(0,He.jsxs)("div",{className:"text-sm text-gray-700",children:["Mostrando ",o.startItem," a ",o.endItem," de ",o.totalItems," agendamentos"]}),(0,He.jsxs)("div",{className:"flex space-x-2",children:[(0,He.jsx)("button",{onClick:()=>l(o.currentPage-1),disabled:o.currentPage<=1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),Array.from({length:o.totalPages},((e,t)=>t+1)).map((e=>(0,He.jsx)("button",{onClick:()=>l(e),className:"px-3 py-1 text-sm border rounded-md ".concat(e===o.currentPage?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"),children:e},e))),(0,He.jsx)("button",{onClick:()=>l(o.currentPage+1),disabled:o.currentPage>=o.totalPages,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Pr\xf3xima"})]})]})]})},$w=e=>{let{isOpen:t,onClose:n,appointment:a,onEdit:r=null,onDelete:s=null,canEdit:i=!1,canDelete:o=!1}=e;if(!t||!a)return null;const l="scheduled"===a.status,c="completed"===a.status,d="missed"===a.status,u="cancelled"===a.status,h=new Date,m=(()=>{try{const e=a.scheduled_date,t=a.scheduled_time;if(!e||!t)return new Date;let n=e;if(e instanceof Date){const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");n="".concat(t,"-").concat(a,"-").concat(r)}else"string"===typeof e&&e.includes("T")&&(n=e.split("T")[0]);const[r,s,i]=n.split("-").map(Number),[o,l]=t.split(":").map(Number);return new Date(r,s-1,i,o,l,0)}catch(e){return console.error("Erro ao processar data do agendamento:",e),new Date}})(),f=l&&m<h,p=(()=>{if(c&&a.completed_at){return{label:"Realizado em:",value:new Date(a.completed_at).toLocaleString("pt-BR"),icon:Fs,color:"text-green-600"}}if(d&&a.missed_at){return{label:"Marcado como perdido em:",value:new Date(a.missed_at).toLocaleString("pt-BR"),icon:yo,color:"text-red-600"}}if(u&&a.cancelled_at){return{label:"Cancelado em:",value:new Date(a.cancelled_at).toLocaleString("pt-BR"),icon:yo,color:"text-gray-600"}}if(f){const e=h-m,t=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4);return{label:"Atrasado h\xe1:",value:t>0?"".concat(t,"h ").concat(n,"min"):"".concat(n," minutos"),icon:yo,color:"text-red-600"}}if(l){const e=m-h,t=Math.floor(e/36e5),n=Math.floor(e%36e5/6e4),a=Math.floor(t/24);let r;return r=a>0?"Em ".concat(a," dia(s)"):t>0?"Em ".concat(t,"h ").concat(n,"min"):"Em ".concat(n," minutos"),{label:"Tempo restante:",value:r,icon:Ni,color:"text-blue-600"}}return null})();return(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,He.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,He.jsx)(Hr,{icon:gi,className:"mr-3 text-blue-600"}),"Detalhes do Agendamento"]}),(0,He.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,He.jsx)(Hr,{icon:Vi,className:"w-6 h-6"})})]}),(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full ".concat(Iw(a.status)),children:Fw(a.status)}),f&&(0,He.jsx)("span",{className:"ml-3 inline-flex px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Atrasado"})]}),(0,He.jsxs)("div",{className:"flex space-x-2",children:[i&&l&&r&&(0,He.jsxs)("button",{onClick:()=>r(a),className:"px-3 py-2 text-sm font-medium text-yellow-700 bg-yellow-100 border border-yellow-300 rounded-md hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 flex items-center",children:[(0,He.jsx)(Hr,{icon:gs,className:"mr-2 w-4 h-4"}),"Editar"]}),o&&(l||u||d||c)&&s&&(0,He.jsxs)("button",{onClick:()=>s(a),className:"px-3 py-2 text-sm font-medium text-red-700 bg-red-100 border border-red-300 rounded-md hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 flex items-center",children:[(0,He.jsx)(Hr,{icon:li,className:"mr-2 w-4 h-4"}),"Remover"]})]})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,He.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,He.jsxs)("h3",{className:"text-sm font-medium text-blue-800 mb-3 flex items-center",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2"}),"Data e Hor\xe1rio"]}),(0,He.jsxs)("div",{className:"space-y-2",children:[(0,He.jsxs)("div",{className:"text-sm",children:[(0,He.jsx)("span",{className:"font-medium text-blue-700",children:"Data:"}),(0,He.jsx)("span",{className:"ml-2 text-blue-600",children:Tw(a.scheduled_date)})]}),(0,He.jsxs)("div",{className:"text-sm",children:[(0,He.jsx)("span",{className:"font-medium text-blue-700",children:"Hor\xe1rio:"}),(0,He.jsx)("span",{className:"ml-2 text-blue-600",children:Rw(a.scheduled_time)})]}),(0,He.jsxs)("div",{className:"text-sm",children:[(0,He.jsx)("span",{className:"font-medium text-blue-700",children:"Dura\xe7\xe3o:"}),(0,He.jsxs)("span",{className:"ml-2 text-blue-600",children:[a.duration_minutes," minutos"]})]}),p&&(0,He.jsxs)("div",{className:"text-sm pt-2 border-t border-blue-200",children:[(0,He.jsx)("span",{className:"font-medium text-blue-700",children:p.label}),(0,He.jsxs)("span",{className:"ml-2 ".concat(p.color," flex items-center"),children:[(0,He.jsx)(Hr,{icon:p.icon,className:"mr-1 w-3 h-3"}),p.value]})]})]})]}),(0,He.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,He.jsxs)("h3",{className:"text-sm font-medium text-green-800 mb-3 flex items-center",children:[(0,He.jsx)(Hr,{icon:js,className:"mr-2"}),"Paciente"]}),(0,He.jsxs)("div",{className:"space-y-2",children:[(0,He.jsxs)("div",{className:"text-sm",children:[(0,He.jsx)("span",{className:"font-medium text-green-700",children:"Nome:"}),(0,He.jsx)("span",{className:"ml-2 text-green-600",children:a.patient_name})]}),a.patient_age&&(0,He.jsxs)("div",{className:"text-sm",children:[(0,He.jsx)("span",{className:"font-medium text-green-700",children:"Idade:"}),(0,He.jsxs)("span",{className:"ml-2 text-green-600",children:[a.patient_age," anos"]})]}),(0,He.jsxs)("div",{className:"text-sm",children:[(0,He.jsx)("span",{className:"font-medium text-green-700",children:"Terapeuta:"}),(0,He.jsx)("span",{className:"ml-2 text-green-600",children:a.therapist_name})]})]})]})]}),(0,He.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg mb-6",children:[(0,He.jsxs)("h3",{className:"text-sm font-medium text-purple-800 mb-3 flex items-center",children:[(0,He.jsx)(Hr,{icon:$r,className:"mr-2"}),"\xc1rea de Interven\xe7\xe3o"]}),(0,He.jsxs)("div",{className:"space-y-2",children:[(0,He.jsxs)("div",{className:"text-sm",children:[(0,He.jsx)("span",{className:"font-medium text-purple-700",children:"\xc1rea:"}),(0,He.jsx)("span",{className:"ml-2 text-purple-600",children:a.discipline_name||"Sess\xe3o Geral"})]}),a.active_programs_count>0&&(0,He.jsxs)("div",{className:"text-sm",children:[(0,He.jsx)("span",{className:"font-medium text-purple-700",children:"Programas Ativos:"}),(0,He.jsxs)("span",{className:"ml-2 text-purple-600",children:[a.active_programs_count," programa(s)"]})]}),a.available_programs&&(0,He.jsxs)("div",{className:"text-sm",children:[(0,He.jsx)("span",{className:"font-medium text-purple-700",children:"Programas Dispon\xedveis:"}),(0,He.jsx)("div",{className:"ml-2 text-purple-600 text-xs mt-1",children:a.available_programs.length>100?a.available_programs.substring(0,100)+"...":a.available_programs})]}),a.area_name&&(0,He.jsxs)("div",{className:"text-sm",children:[(0,He.jsx)("span",{className:"font-medium text-purple-700",children:"\xc1rea:"}),(0,He.jsx)("span",{className:"ml-2 text-purple-600",children:a.area_name})]})]})]}),a.notes&&(0,He.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,He.jsxs)("h3",{className:"text-sm font-medium text-gray-800 mb-3 flex items-center",children:[(0,He.jsx)(Hr,{icon:jo,className:"mr-2"}),"Observa\xe7\xf5es"]}),(0,He.jsx)("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:a.notes})]}),(d||u)&&(a.missed_reason||a.cancellation_reason)&&(0,He.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg mb-6",children:[(0,He.jsxs)("h3",{className:"text-sm font-medium text-red-800 mb-3 flex items-center",children:[(0,He.jsx)(Hr,{icon:gi,className:"mr-2"}),d?"Justificativa da Aus\xeancia":"Motivo do Cancelamento"]}),(0,He.jsxs)("div",{className:"space-y-2",children:[a.missed_reason&&(0,He.jsxs)("div",{className:"text-sm",children:[(0,He.jsx)("span",{className:"font-medium text-red-700",children:"Motivo:"}),(0,He.jsx)("span",{className:"ml-2 text-red-600",children:a.missed_reason})]}),a.missed_by&&(0,He.jsxs)("div",{className:"text-sm",children:[(0,He.jsx)("span",{className:"font-medium text-red-700",children:"Respons\xe1vel:"}),(0,He.jsxs)("span",{className:"ml-2 text-red-600",children:["patient"===a.missed_by&&"Paciente","therapist"===a.missed_by&&"Terapeuta","both"===a.missed_by&&"Ambos","other"===a.missed_by&&"Outros fatores"]})]}),a.cancellation_reason&&(0,He.jsxs)("div",{className:"text-sm",children:[(0,He.jsx)("span",{className:"font-medium text-red-700",children:"Motivo:"}),(0,He.jsx)("span",{className:"ml-2 text-red-600",children:a.cancellation_reason})]})]})]}),(0,He.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg text-xs text-gray-500",children:(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium",children:"ID do Agendamento:"}),(0,He.jsxs)("span",{className:"ml-2",children:["#",a.id]})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium",children:"Criado em:"}),(0,He.jsx)("span",{className:"ml-2",children:a.created_at?new Date(a.created_at).toLocaleString("pt-BR"):"N\xe3o informado"})]}),a.session_id&&(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium",children:"Sess\xe3o vinculada:"}),(0,He.jsxs)("span",{className:"ml-2",children:["#",a.session_id]})]}),a.updated_at&&(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium",children:"\xdaltima atualiza\xe7\xe3o:"}),(0,He.jsx)("span",{className:"ml-2",children:new Date(a.updated_at).toLocaleString("pt-BR")})]})]})})]}),(0,He.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-200",children:(0,He.jsx)("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Fechar"})})]})})},Xw=e=>{let{isOpen:t,onClose:n,onGenerate:r,therapists:s=[],isGenerating:i=!1}=e;const[o,l]=(0,a.useState)({type:"week",startDate:"",endDate:""}),[c,d]=(0,a.useState)({type:"all",therapistId:null}),[u,h]=(0,a.useState)({}),[m,f]=(0,a.useState)(1),[p,g]=(0,a.useState)(null);(0,a.useEffect)((()=>{const e=new Date;let t,n;switch(o.type){case"week":t=new Date(e.getTime()-6048e5),n=new Date(e.getTime()+2592e6);break;case"2weeks":t=new Date(e.getTime()-12096e5),n=new Date(e.getTime()+3888e6);break;case"month":t=new Date(e.getFullYear(),e.getMonth()-1,e.getDate()),n=new Date(e.getFullYear(),e.getMonth()+2,e.getDate());break;case"quarter":t=new Date(e.getFullYear(),e.getMonth()-3,e.getDate()),n=new Date(e.getFullYear(),e.getMonth()+3,e.getDate());break;default:return}"custom"!==o.type&&l((e=>(0,Ie.A)((0,Ie.A)({},e),{},{startDate:t.toISOString().split("T")[0],endDate:n.toISOString().split("T")[0]})))}),[o.type]),(0,a.useEffect)((()=>{t&&(f(1),h({}),g(null),l({type:"week",startDate:"",endDate:""}),d({type:"all",therapistId:null}))}),[t]);const x=()=>{if(2===m&&p){const e=new Date(p.period.startDate).toLocaleDateString("pt-BR"),t=new Date(p.period.endDate).toLocaleDateString("pt-BR");return"".concat(e," a ").concat(t)}if(!o.startDate||!o.endDate)return"Per\xedodo ser\xe1 calculado automaticamente";try{const e=new Date(o.startDate).toLocaleDateString("pt-BR"),t=new Date(o.endDate).toLocaleDateString("pt-BR");return"".concat(e," a ").concat(t)}catch(e){return"Per\xedodo ser\xe1 calculado automaticamente"}};return t?(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,He.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,He.jsx)("div",{className:"bg-gradient-to-r from-red-600 to-pink-600 px-6 py-4 rounded-t-2xl",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("h2",{className:"text-xl font-bold text-white",children:"Relat\xf3rio de Agendamentos"}),(0,He.jsx)("p",{className:"text-red-100 text-sm",children:1===m?"Configura\xe7\xe3o do Relat\xf3rio":"Confirmar e Gerar PDF"})]}),(0,He.jsx)("button",{onClick:n,disabled:i,className:"text-white hover:text-red-200 transition-colors disabled:opacity-50",children:(0,He.jsx)(Hr,{icon:Vi,className:"text-xl"})})]})}),(0,He.jsx)("div",{className:"px-6 py-3 border-b border-gray-200",children:(0,He.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,He.jsxs)("div",{className:"flex items-center space-x-2 ".concat(m>=1?"text-red-600":"text-gray-400"),children:[(0,He.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(m>=1?"bg-red-600 text-white":"bg-gray-200"),children:(0,He.jsx)(Hr,{icon:Zr,className:"text-sm"})}),(0,He.jsx)("span",{className:"font-medium",children:"Configura\xe7\xe3o"})]}),(0,He.jsx)("div",{className:"flex-1 h-1 ".concat(m>=2?"bg-red-600":"bg-gray-200"," rounded")}),(0,He.jsxs)("div",{className:"flex items-center space-x-2 ".concat(m>=2?"text-red-600":"text-gray-400"),children:[(0,He.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(m>=2?"bg-red-600 text-white":"bg-gray-200"),children:(0,He.jsx)(Hr,{icon:di,className:"text-sm"})}),(0,He.jsx)("span",{className:"font-medium",children:"Gerar PDF"})]})]})}),(0,He.jsxs)("div",{className:"p-6",children:[1===m&&(0,He.jsxs)("div",{className:"space-y-6",children:[(0,He.jsxs)("div",{className:"text-center mb-6",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-red-100 to-pink-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,He.jsx)(Hr,{icon:di,className:"text-2xl text-red-600"})}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Configura\xe7\xe3o do Relat\xf3rio"}),(0,He.jsx)("p",{className:"text-gray-600 text-sm",children:"Configure o per\xedodo e escopo do relat\xf3rio de agendamentos"})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2 text-red-500"}),"Per\xedodo do Relat\xf3rio"]}),(0,He.jsx)("div",{className:"space-y-2",children:[{value:"week",label:"\xdaltima Semana + Pr\xf3ximo M\xeas"},{value:"2weeks",label:"\xdaltimas 2 Semanas + Pr\xf3ximos 45 Dias"},{value:"month",label:"\xdaltimo M\xeas + Pr\xf3ximos 2 Meses"},{value:"quarter",label:"\xdaltimo Trimestre + Pr\xf3ximos 3 Meses"},{value:"custom",label:"Per\xedodo Customizado"}].map((e=>(0,He.jsxs)("label",{className:"flex items-center",children:[(0,He.jsx)("input",{type:"radio",name:"period",value:e.value,checked:o.type===e.value,onChange:e=>l((t=>(0,Ie.A)((0,Ie.A)({},t),{},{type:e.target.value}))),disabled:i,className:"mr-3 text-red-600 focus:ring-red-500"}),e.label]},e.value)))}),"custom"===o.type&&(0,He.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-xs text-gray-500 mb-2",children:"Data Inicial"}),(0,He.jsx)("input",{type:"date",value:o.startDate,onChange:e=>l((t=>(0,Ie.A)((0,Ie.A)({},t),{},{startDate:e.target.value}))),disabled:i,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}),u.startDate&&(0,He.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.startDate})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-xs text-gray-500 mb-2",children:"Data Final"}),(0,He.jsx)("input",{type:"date",value:o.endDate,onChange:e=>l((t=>(0,Ie.A)((0,Ie.A)({},t),{},{endDate:e.target.value}))),disabled:i,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}),u.endDate&&(0,He.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.endDate})]})]}),o.startDate&&o.endDate&&(0,He.jsxs)("div",{className:"mt-3 p-3 bg-red-50 rounded-lg text-sm text-red-700",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2"}),"Per\xedodo: ",x()]}),u.dateRange&&(0,He.jsx)("p",{className:"text-red-500 text-sm mt-2",children:u.dateRange})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[(0,He.jsx)(Hr,{icon:xs,className:"mr-2 text-red-500"}),"Escopo do Relat\xf3rio"]}),(0,He.jsxs)("div",{className:"space-y-3",children:[(0,He.jsxs)("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,He.jsx)("input",{type:"radio",name:"scope",value:"all",checked:"all"===c.type,onChange:e=>d({type:e.target.value,therapistId:null}),disabled:i,className:"mr-3 text-red-600 focus:ring-red-500"}),(0,He.jsx)(Hr,{icon:xs,className:"mr-3 text-blue-600"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"font-medium",children:"Todos os Terapeutas"}),(0,He.jsx)("div",{className:"text-sm text-gray-500",children:"Relat\xf3rio geral com todos os profissionais"})]})]}),(0,He.jsxs)("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,He.jsx)("input",{type:"radio",name:"scope",value:"individual",checked:"individual"===c.type,onChange:e=>d((t=>(0,Ie.A)((0,Ie.A)({},t),{},{type:e.target.value}))),disabled:i,className:"mr-3 text-red-600 focus:ring-red-500"}),(0,He.jsx)(Hr,{icon:js,className:"mr-3 text-green-600"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"font-medium",children:"Terapeuta Individual"}),(0,He.jsx)("div",{className:"text-sm text-gray-500",children:"Relat\xf3rio detalhado de um profissional espec\xedfico"})]})]})]}),"individual"===c.type&&(0,He.jsxs)("div",{className:"mt-4",children:[(0,He.jsxs)("select",{value:c.therapistId||"",onChange:e=>d((t=>(0,Ie.A)((0,Ie.A)({},t),{},{therapistId:e.target.value||null}))),disabled:i,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,He.jsx)("option",{value:"",children:"Selecione um terapeuta..."}),s.map((e=>(0,He.jsx)("option",{value:e.id,children:e.full_name},e.id)))]}),u.therapist&&(0,He.jsx)("p",{className:"text-red-500 text-xs mt-2",children:u.therapist})]})]}),(0,He.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,He.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,He.jsx)(Hr,{icon:Ts,className:"text-blue-600 mt-1"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h4",{className:"font-medium text-blue-800",children:"Sobre os Relat\xf3rios"}),(0,He.jsx)("p",{className:"text-blue-700 text-sm",children:"Os relat\xf3rios incluem estat\xedsticas detalhadas, taxa de comparecimento, agenda completa e an\xe1lises de performance. Dados baseados nos agendamentos reais."})]})]})})]}),2===m&&p&&(0,He.jsxs)("div",{className:"space-y-6",children:[(0,He.jsxs)("div",{className:"text-center mb-6",children:[(0,He.jsx)("div",{className:"bg-gradient-to-br from-green-100 to-emerald-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,He.jsx)(Hr,{icon:fo,className:"text-2xl text-green-600"})}),(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Configura\xe7\xe3o Confirmada"}),(0,He.jsx)("p",{className:"text-gray-600 text-sm",children:"Revise as configura\xe7\xf5es e gere o relat\xf3rio PDF"})]}),(0,He.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg p-6",children:[(0,He.jsxs)("h4",{className:"font-semibold text-gray-800 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:fo,className:"mr-2 text-green-600"}),"Resumo da Configura\xe7\xe3o"]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,He.jsxs)("div",{className:"flex items-center mb-2",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2 text-red-500"}),(0,He.jsx)("span",{className:"font-medium text-gray-700",children:"Per\xedodo"})]}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:{week:"\xdaltima Semana + Pr\xf3ximo M\xeas","2weeks":"\xdaltimas 2 Semanas + Pr\xf3ximos 45 Dias",month:"\xdaltimo M\xeas + Pr\xf3ximos 2 Meses",quarter:"\xdaltimo Trimestre + Pr\xf3ximos 3 Meses",custom:"Per\xedodo Customizado"}[o.type]||"Per\xedodo n\xe3o definido"}),(0,He.jsx)("p",{className:"text-sm text-gray-800 font-medium",children:x()})]}),(0,He.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,He.jsxs)("div",{className:"flex items-center mb-2",children:[(0,He.jsx)(Hr,{icon:"all"===c.type?xs:js,className:"mr-2 text-red-500"}),(0,He.jsx)("span",{className:"font-medium text-gray-700",children:"Escopo"})]}),(0,He.jsx)("p",{className:"text-sm text-gray-600",children:"all"===c.type?"Relat\xf3rio Geral":"Relat\xf3rio Individual"}),(0,He.jsx)("p",{className:"text-sm text-gray-800 font-medium",children:(()=>{if("all"===c.type)return"Todos os Terapeutas";const e=s.find((e=>e.id==c.therapistId));return e?e.full_name:"Terapeuta n\xe3o encontrado"})()})]})]})]}),(0,He.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,He.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,He.jsx)(Hr,{icon:di,className:"text-green-600 mt-1"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("h4",{className:"font-medium text-green-800",children:"Pronto para Gerar"}),(0,He.jsx)("p",{className:"text-green-700 text-sm",children:"O relat\xf3rio ser\xe1 gerado em formato PDF profissional com estat\xedsticas completas, gr\xe1ficos e tabelas detalhadas. O download iniciar\xe1 automaticamente."})]})]})})]})]}),(0,He.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-between",children:[(0,He.jsx)("div",{children:2===m&&(0,He.jsx)("button",{onClick:()=>{2===m&&f(1)},disabled:i,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors disabled:opacity-50",children:"Voltar"})}),(0,He.jsxs)("div",{className:"flex space-x-3",children:[(0,He.jsx)("button",{onClick:n,disabled:i,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancelar"}),(0,He.jsx)("button",{onClick:async()=>{if(1===m){if(!(()=>{const e={};return"custom"===o.type&&(o.startDate||(e.startDate="Data inicial \xe9 obrigat\xf3ria"),o.endDate||(e.endDate="Data final \xe9 obrigat\xf3ria"),o.startDate&&o.endDate&&o.startDate>o.endDate&&(e.dateRange="Data inicial deve ser anterior \xe0 data final")),"individual"!==c.type||c.therapistId||(e.therapist="Selecione um terapeuta para relat\xf3rio individual"),h(e),0===Object.keys(e).length})())return;let e=o.startDate,t=o.endDate;if(!e||!t){const n=new Date;let a,r;switch(o.type){case"week":default:a=new Date(n.getTime()-6048e5),r=n;break;case"2weeks":a=new Date(n.getTime()-12096e5),r=n;break;case"month":a=new Date(n.getFullYear(),n.getMonth()-1,n.getDate()),r=n;break;case"quarter":a=new Date(n.getFullYear(),n.getMonth()-3,n.getDate()),r=n}e=a.toISOString().split("T")[0],t=r.toISOString().split("T")[0]}const n={period:{type:o.type,startDate:e,endDate:t},scope:{type:c.type,therapistId:c.therapistId}};g(n),f(2)}else p&&r(p)},disabled:i,className:"px-6 py-2 bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-lg hover:from-red-700 hover:to-pink-700 transition-all disabled:opacity-50 flex items-center space-x-2",children:i?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"fa-spin"}),(0,He.jsx)("span",{children:"Gerando..."})]}):(0,He.jsx)("span",{children:2===m?"Gerar Relat\xf3rio PDF":"Continuar"})})]})]})]})}):null},Kw=e=>{let{onCreateRetroactive:t,refreshTrigger:n=0}=e;const{token:r}=Ge(),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(!0),[c,d]=(0,a.useState)(null),[u,h]=(0,a.useState)(!1),[m,f]=(0,a.useState)({startDate:"",endDate:"",patientName:"",therapistName:""});(0,a.useEffect)((()=>{p()}),[n]);const p=async()=>{try{l(!0),d(null);const e={};m.startDate&&(e.start_date=m.startDate),m.endDate&&(e.end_date=m.endDate),e.limit=100;const t=await Uw(e);i(t.orphan_sessions||[])}catch(c){console.error("Erro ao carregar sess\xf5es \xf3rf\xe3s:",c),d("Erro ao carregar sess\xf5es \xf3rf\xe3s. Tente novamente.")}finally{l(!1)}},g=(e,t)=>{f((n=>(0,Ie.A)((0,Ie.A)({},n),{},{[e]:t})))},x=s.filter((e=>{const t=!m.patientName||e.patient_name.toLowerCase().includes(m.patientName.toLowerCase()),n=!m.therapistName||e.therapist_name.toLowerCase().includes(m.therapistName.toLowerCase());return t&&n}));return o?(0,He.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,He.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,He.jsx)(Hr,{icon:Zi,className:"animate-spin h-8 w-8 text-blue-600 mr-3"}),(0,He.jsx)("span",{className:"text-gray-600",children:"Carregando sess\xf5es \xf3rf\xe3s..."})]})}):c?(0,He.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,He.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,He.jsx)(Hr,{icon:go,className:"h-8 w-8 text-red-500 mr-3"}),(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("p",{className:"text-red-600 font-medium",children:"Erro ao carregar dados"}),(0,He.jsx)("p",{className:"text-gray-500 text-sm",children:c}),(0,He.jsx)("button",{onClick:p,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Tentar novamente"})]})]})}):(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,He.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,He.jsxs)("div",{className:"flex items-center justify-between",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,He.jsx)(Hr,{icon:go,className:"mr-3 text-orange-500"}),"Sess\xf5es \xd3rf\xe3s"]}),(0,He.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Sess\xf5es realizadas sem agendamento pr\xe9vio (",x.length," encontradas)"]})]}),(0,He.jsxs)("button",{onClick:()=>h(!u),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:[(0,He.jsx)(Hr,{icon:Xs,className:"mr-2"}),"Filtros",(0,He.jsx)(Hr,{icon:u?vs:Ti,className:"ml-2 w-3 h-3"})]})]})}),u&&(0,He.jsxs)("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:[(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data inicial"}),(0,He.jsx)("input",{type:"date",value:m.startDate,onChange:e=>g("startDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data final"}),(0,He.jsx)("input",{type:"date",value:m.endDate,onChange:e=>g("endDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,He.jsx)(Hr,{icon:js,className:"mr-1"}),"Paciente"]}),(0,He.jsx)("input",{type:"text",value:m.patientName,onChange:e=>g("patientName",e.target.value),placeholder:"Nome do paciente...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,He.jsx)(Hr,{icon:$r,className:"mr-1"}),"Terapeuta"]}),(0,He.jsx)("input",{type:"text",value:m.therapistName,onChange:e=>g("therapistName",e.target.value),placeholder:"Nome do terapeuta...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,He.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[(0,He.jsx)("button",{onClick:()=>{f({startDate:"",endDate:"",patientName:"",therapistName:""}),setTimeout(p,100)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Limpar"}),(0,He.jsxs)("button",{onClick:()=>{p()},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[(0,He.jsx)(Hr,{icon:Oi,className:"mr-2"}),"Aplicar"]})]})]}),(0,He.jsx)("div",{className:"overflow-x-auto",children:0===x.length?(0,He.jsxs)("div",{className:"text-center py-12",children:[(0,He.jsx)(Hr,{icon:Zr,className:"h-12 w-12 text-gray-400 mb-4"}),(0,He.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma sess\xe3o \xf3rf\xe3 encontrada"}),(0,He.jsx)("p",{className:"text-gray-500",children:0===s.length?"N\xe3o h\xe1 sess\xf5es realizadas sem agendamento pr\xe9vio no per\xedodo selecionado.":"Nenhuma sess\xe3o corresponde aos filtros aplicados."})]}):(0,He.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,He.jsx)("thead",{className:"bg-gray-50",children:(0,He.jsxs)("tr",{children:[(0,He.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2"}),"Data/Hora da Sess\xe3o"]}),(0,He.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[(0,He.jsx)(Hr,{icon:js,className:"mr-2"}),"Paciente"]}),(0,He.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[(0,He.jsx)(Hr,{icon:$r,className:"mr-2"}),"Terapeuta"]}),(0,He.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Programa"}),(0,He.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,He.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map((e=>{return(0,He.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:Zr,className:"text-gray-400 mr-2"}),(0,He.jsxs)("div",{children:[(0,He.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(n=e.session_date,n?new Date(n).toLocaleDateString("pt-BR"):"-")}),(0,He.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,He.jsx)(Hr,{icon:Ni,className:"mr-1"}),"Hor\xe1rio aproximado da sess\xe3o"]})]})]})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.patient_name})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,He.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.therapist_name})}),(0,He.jsx)("td",{className:"px-6 py-4",children:(0,He.jsx)("div",{className:"text-sm text-gray-900",children:e.program_names?(0,He.jsxs)("div",{children:[(0,He.jsxs)("div",{className:"font-medium",children:[e.programs_count," programa(s) trabalhados"]}),(0,He.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.program_names.length>100?e.program_names.substring(0,100)+"...":e.program_names})]}):(0,He.jsx)("span",{className:"text-gray-500",children:"Programas n\xe3o identificados"})})}),(0,He.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,He.jsxs)("button",{onClick:()=>t(e),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 transition-colors",children:[(0,He.jsx)(Hr,{icon:yi,className:"mr-2"}),"Criar Agendamento"]})})]},"".concat(e.patient_id,"-").concat(e.therapist_id,"-").concat(e.session_date));var n}))})]})}),x.length>0&&(0,He.jsx)("div",{className:"p-4 border-t border-gray-200 bg-blue-50",children:(0,He.jsxs)("div",{className:"flex items-center text-sm text-blue-700",children:[(0,He.jsx)(Hr,{icon:go,className:"mr-2 text-blue-500"}),(0,He.jsxs)("span",{children:[(0,He.jsx)("strong",{children:"Sess\xf5es \xf3rf\xe3s"})," s\xe3o sess\xf5es que foram realizadas mas n\xe3o tinham agendamento pr\xe9vio. Criar agendamentos retroativos ajuda a manter o hist\xf3rico completo das sess\xf5es."]})]})})]})},Jw=e=>{var t,n,r,s,i;let{isOpen:o,onClose:l,onDetectionComplete:c}=e;const[d,u]=(0,a.useState)({start_date:"",end_date:"",auto_create_retroactive:!1}),[h,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)(null),[g,x]=(0,a.useState)(null),b=e=>{const{name:t,value:n,type:a,checked:r}=e.target;u((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:"checkbox"===a?r:n})))},v=()=>{u({start_date:"",end_date:"",auto_create_retroactive:!1}),p(null),x(null),m(!1),l()};return o?(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,He.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,He.jsx)(Hr,{icon:bo,className:"mr-3 text-purple-600"}),"Detec\xe7\xe3o Inteligente de Sess\xf5es"]}),(0,He.jsx)("button",{onClick:v,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:h,children:(0,He.jsx)(Hr,{icon:Vi,className:"w-6 h-6"})})]}),(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)(Hr,{icon:gi,className:"text-blue-500 mt-1 mr-3"}),(0,He.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,He.jsx)("h4",{className:"font-medium mb-2",children:"Como funciona a detec\xe7\xe3o inteligente:"}),(0,He.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,He.jsxs)("li",{children:["\u2022 ",(0,He.jsx)("strong",{children:"Analisa sess\xf5es realizadas"})," no per\xedodo selecionado"]}),(0,He.jsxs)("li",{children:["\u2022 ",(0,He.jsx)("strong",{children:"Identifica agendamentos correspondentes"})," com base em paciente, terapeuta e data"]}),(0,He.jsxs)("li",{children:["\u2022 ",(0,He.jsx)("strong",{children:"Marca agendamentos como completados"})," quando h\xe1 sess\xf5es correspondentes"]}),(0,He.jsxs)("li",{children:["\u2022 ",(0,He.jsx)("strong",{children:"Detecta sess\xf5es \xf3rf\xe3s"})," (realizadas sem agendamento pr\xe9vio)"]}),(0,He.jsxs)("li",{children:["\u2022 ",(0,He.jsx)("strong",{children:"Opcionalmente cria agendamentos retroativos"})," para sess\xf5es \xf3rf\xe3s"]})]})]})]})}),f?(0,He.jsxs)("div",{className:"space-y-6",children:[(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)(Hr,{icon:Fs,className:"h-16 w-16 text-green-500 mb-4"}),(0,He.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Detec\xe7\xe3o Conclu\xedda com Sucesso!"}),(0,He.jsx)("p",{className:"text-gray-600",children:"A an\xe1lise foi executada no per\xedodo especificado."})]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,He.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[(0,He.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null===(t=f.completed_sessions)||void 0===t?void 0:t.length)||0}),(0,He.jsx)("div",{className:"text-sm text-green-700 font-medium",children:"Agendamentos Completados"}),(0,He.jsx)("div",{className:"text-xs text-green-600 mt-1",children:"Agendamentos marcados como realizados"})]}),(0,He.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg text-center",children:[(0,He.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:(null===(n=f.orphan_sessions)||void 0===n?void 0:n.length)||0}),(0,He.jsx)("div",{className:"text-sm text-orange-700 font-medium",children:"Sess\xf5es \xd3rf\xe3s"}),(0,He.jsx)("div",{className:"text-xs text-orange-600 mt-1",children:"Sess\xf5es sem agendamento pr\xe9vio"})]}),(0,He.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[(0,He.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null===(r=f.retroactive_created)||void 0===r?void 0:r.length)||0}),(0,He.jsx)("div",{className:"text-sm text-blue-700 font-medium",children:"Retroativos Criados"}),(0,He.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:"Agendamentos criados automaticamente"})]})]}),(null===(s=f.completed_sessions)||void 0===s?void 0:s.length)>0&&(0,He.jsxs)("div",{className:"border border-green-200 rounded-lg p-4",children:[(0,He.jsx)("h4",{className:"font-medium text-green-800 mb-2",children:"\u2713 Agendamentos marcados como completados:"}),(0,He.jsxs)("div",{className:"text-sm text-green-700 space-y-1",children:[f.completed_sessions.slice(0,5).map(((e,t)=>(0,He.jsxs)("div",{children:["\u2022 ",e.patient_name," - ",e.therapist_name," (",new Date(e.scheduled_date).toLocaleDateString("pt-BR"),")"]},t))),f.completed_sessions.length>5&&(0,He.jsxs)("div",{className:"text-xs text-green-600",children:["... e mais ",f.completed_sessions.length-5," agendamentos"]})]})]}),(null===(i=f.orphan_sessions)||void 0===i?void 0:i.length)>0&&(0,He.jsxs)("div",{className:"border border-orange-200 rounded-lg p-4",children:[(0,He.jsx)("h4",{className:"font-medium text-orange-800 mb-2",children:"\u26a0 Sess\xf5es \xf3rf\xe3s encontradas:"}),(0,He.jsxs)("div",{className:"text-sm text-orange-700 space-y-1",children:[f.orphan_sessions.slice(0,5).map(((e,t)=>(0,He.jsxs)("div",{children:["\u2022 ",e.patient_name," - ",e.therapist_name," (",new Date(e.session_date).toLocaleDateString("pt-BR"),")"]},t))),f.orphan_sessions.length>5&&(0,He.jsxs)("div",{className:"text-xs text-orange-600",children:["... e mais ",f.orphan_sessions.length-5," sess\xf5es \xf3rf\xe3s"]})]}),!d.auto_create_retroactive&&(0,He.jsx)("p",{className:"text-xs text-orange-600 mt-2",children:'\ud83d\udca1 Use a aba "Sess\xf5es \xd3rf\xe3s" para criar agendamentos retroativos manualmente.'})]}),(0,He.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,He.jsx)("button",{onClick:()=>p(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50",children:"Nova Detec\xe7\xe3o"}),(0,He.jsx)("button",{onClick:v,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700",children:"Concluir"})]})]}):(0,He.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{try{m(!0),x(null),p(null);const e=await Ww(d);p(e.detection_results),c&&c(e.detection_results)}catch(g){console.error("Erro na detec\xe7\xe3o inteligente:",g),x(g.message||"Erro ao executar detec\xe7\xe3o inteligente")}finally{m(!1)}})()},className:"space-y-6",children:[(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2 text-gray-400"}),"Data inicial"]}),(0,He.jsx)("input",{type:"date",name:"start_date",value:d.start_date,onChange:b,placeholder:(()=>{const e=new Date;return e.setDate(e.getDate()-30),e.toISOString().split("T")[0]})(),disabled:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 disabled:bg-gray-100"}),(0,He.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Deixe em branco para \xfaltimos 30 dias"})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2 text-gray-400"}),"Data final"]}),(0,He.jsx)("input",{type:"date",name:"end_date",value:d.end_date,onChange:b,placeholder:(new Date).toISOString().split("T")[0],disabled:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 disabled:bg-gray-100"}),(0,He.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Deixe em branco para hoje"})]})]}),(0,He.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,He.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[(0,He.jsx)(Hr,{icon:ji,className:"mr-2 text-gray-400"}),"Op\xe7\xf5es Avan\xe7adas"]}),(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)("input",{type:"checkbox",id:"auto_create_retroactive",name:"auto_create_retroactive",checked:d.auto_create_retroactive,onChange:b,disabled:h,className:"mt-1 h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),(0,He.jsxs)("label",{htmlFor:"auto_create_retroactive",className:"ml-3 text-sm",children:[(0,He.jsx)("span",{className:"font-medium text-gray-900",children:"Criar agendamentos retroativos automaticamente"}),(0,He.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Quando ativado, criar\xe1 automaticamente agendamentos retroativos para todas as sess\xf5es \xf3rf\xe3s encontradas. Caso contr\xe1rio, apenas listar\xe1 as sess\xf5es \xf3rf\xe3s para cria\xe7\xe3o manual."})]})]})]}),g&&(0,He.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:go,className:"text-red-500 mr-2"}),(0,He.jsx)("span",{className:"text-red-800 text-sm font-medium",children:"Erro na detec\xe7\xe3o"})]}),(0,He.jsx)("p",{className:"text-red-700 text-sm mt-1",children:g})]}),(0,He.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,He.jsx)("button",{type:"button",onClick:v,disabled:h,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",children:"Cancelar"}),(0,He.jsx)("button",{type:"submit",disabled:h,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 flex items-center",children:h?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"animate-spin mr-2"}),"Executando..."]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Oi,className:"mr-2"}),"Executar Detec\xe7\xe3o"]})})]})]})]})]})}):null},Qw=e=>{let{isOpen:t,onClose:n,orphanSession:r,onSuccess:s}=e;const[i,o]=(0,a.useState)({discipline_id:"",notes:""}),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1),[f,p]=(0,a.useState)(null),[g,x]=(0,a.useState)(!1);(0,a.useEffect)((()=>{t&&(b(),o({discipline_id:"",notes:"Agendamento retroativo criado para sess\xe3o realizada em ".concat(w(null===r||void 0===r?void 0:r.session_date),".")}),p(null),x(!1))}),[t,r]);const b=async()=>{try{m(!0);const e=await(0,nt.uc)();c(e||[])}catch(f){console.error("Erro ao carregar disciplinas:",f),p("Erro ao carregar lista de disciplinas")}finally{m(!1)}},v=e=>{const{name:t,value:n}=e.target;o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:n})))},y=()=>{o({discipline_id:"",notes:""}),p(null),x(!1),n()},w=e=>e?new Date(e).toLocaleDateString("pt-BR"):"";return t&&r?(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,He.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,He.jsx)(Hr,{icon:yi,className:"mr-3 text-green-600"}),"Criar Agendamento Retroativo"]}),(0,He.jsx)("button",{onClick:y,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:d,children:(0,He.jsx)(Hr,{icon:Vi,className:"w-6 h-6"})})]}),(0,He.jsx)("div",{className:"p-6",children:g?(0,He.jsxs)("div",{className:"text-center py-8",children:[(0,He.jsx)(Hr,{icon:Fs,className:"h-16 w-16 text-green-500 mb-4"}),(0,He.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Agendamento Retroativo Criado!"}),(0,He.jsx)("p",{className:"text-gray-600",children:"O agendamento foi criado com sucesso para a sess\xe3o realizada."})]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,He.jsxs)("h3",{className:"text-sm font-medium text-blue-800 mb-3 flex items-center",children:[(0,He.jsx)(Hr,{icon:gi,className:"mr-2"}),"Sess\xe3o Realizada (sem agendamento pr\xe9vio)"]}),(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-blue-700",children:"Paciente:"}),(0,He.jsxs)("div",{className:"text-blue-600 flex items-center",children:[(0,He.jsx)(Hr,{icon:js,className:"mr-2"}),r.patient_name]})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-blue-700",children:"Terapeuta:"}),(0,He.jsxs)("div",{className:"text-blue-600 flex items-center",children:[(0,He.jsx)(Hr,{icon:$r,className:"mr-2"}),r.therapist_name]})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-blue-700",children:"Data da Sess\xe3o:"}),(0,He.jsxs)("div",{className:"text-blue-600 flex items-center",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2"}),w(r.session_date)]})]}),(0,He.jsxs)("div",{children:[(0,He.jsx)("span",{className:"font-medium text-blue-700",children:"Programas Trabalhados:"}),(0,He.jsx)("div",{className:"text-blue-600",children:r.programs_count>0?"".concat(r.programs_count," programa(s)"):"N\xe3o identificados"})]})]}),r.program_names&&(0,He.jsxs)("div",{className:"mt-3 text-xs text-blue-600",children:[(0,He.jsx)("strong",{children:"Programas:"})," ",r.program_names]})]}),(0,He.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r)try{u(!0),p(null);const e={discipline_id:i.discipline_id?parseInt(i.discipline_id):null,notes:i.notes||"Agendamento retroativo"};await Hw(r.session_id,e),x(!0),setTimeout((()=>{s&&s(),y()}),2e3)}catch(f){console.error("Erro ao criar agendamento retroativo:",f),p(f.message||"Erro ao criar agendamento retroativo")}finally{u(!1)}},className:"space-y-6",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:$r,className:"mr-2 text-gray-400"}),"\xc1rea de Interven\xe7\xe3o ",(0,He.jsx)("span",{className:"text-gray-500 text-sm",children:"(opcional)"})]}),(0,He.jsxs)("select",{name:"discipline_id",value:i.discipline_id,onChange:v,disabled:d||h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100",children:[(0,He.jsx)("option",{value:"",children:h?"Carregando disciplinas...":"Sess\xe3o geral (todos os programas)"}),l.map((e=>(0,He.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,He.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\ud83d\udca1 Deixe em branco se a sess\xe3o trabalhou programas de m\xfaltiplas \xe1reas"})]}),(0,He.jsxs)("div",{children:[(0,He.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,He.jsx)(Hr,{icon:jo,className:"mr-2 text-gray-400"}),"Observa\xe7\xf5es"]}),(0,He.jsx)("textarea",{name:"notes",value:i.notes,onChange:v,rows:3,maxLength:500,placeholder:"Observa\xe7\xf5es sobre o agendamento retroativo...",disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100 resize-none"}),(0,He.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[i.notes.length,"/500 caracteres"]})]}),(0,He.jsx)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,He.jsxs)("div",{className:"flex items-start",children:[(0,He.jsx)(Hr,{icon:gi,className:"text-yellow-600 mt-0.5 mr-2 flex-shrink-0"}),(0,He.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,He.jsx)("strong",{children:"Agendamento Retroativo:"}),' Este agendamento ser\xe1 criado com a data/hora da sess\xe3o realizada e marcado automaticamente como "realizado". Isso ajuda a manter o hist\xf3rico completo das sess\xf5es e permite que a sess\xe3o \xf3rf\xe3 seja devidamente registrada no sistema.']})]})}),f&&(0,He.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:[(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:go,className:"text-red-500 mr-2"}),(0,He.jsx)("span",{className:"text-red-800 text-sm font-medium",children:"Erro"})]}),(0,He.jsx)("p",{className:"text-red-700 text-sm mt-1",children:f})]}),(0,He.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,He.jsx)("button",{type:"button",onClick:y,disabled:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:"Cancelar"}),(0,He.jsx)("button",{type:"submit",disabled:d,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 flex items-center",children:d?(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:Zi,className:"animate-spin mr-2"}),"Criando..."]}):(0,He.jsxs)(He.Fragment,{children:[(0,He.jsx)(Hr,{icon:yi,className:"mr-2"}),"Criar Agendamento"]})})]})]})]})})]})}):null};class Zw{async generateReport(e){try{const t=await this.fetchReportData(e);return"all"===e.scope.type?this.generateGeneralReport(t,e):this.generateIndividualReport(t,e)}catch(t){throw console.error("Erro ao gerar relat\xf3rio:",t),new Error("Falha na gera\xe7\xe3o do relat\xf3rio")}}async fetchReportData(e){const t={start_date:e.period.startDate,end_date:e.period.endDate,therapist_id:e.scope.therapistId||void 0,limit:1e3},n=(await Lw(t)).appointments||[],a=await Ow(e.period.startDate,e.period.endDate);return{appointments:n,statistics:a.clinic_statistics?{total_appointments:a.clinic_statistics.total_appointments||0,completed_appointments:a.clinic_statistics.completed||0,missed_appointments:a.clinic_statistics.missed||0,cancelled_appointments:a.clinic_statistics.cancelled||0,scheduled_appointments:a.clinic_statistics.scheduled||0,attendance_rate:a.clinic_statistics.attendance_rate||0,completion_rate:a.clinic_statistics.completion_rate||0}:{total_appointments:0,completed_appointments:0,missed_appointments:0,cancelled_appointments:0,scheduled_appointments:0,attendance_rate:0,completion_rate:0},config:e}}generateGeneralReport(e,t){var n=this;const a=new qo.default({orientation:"portrait",unit:"mm",format:"a4"}),{appointments:r,statistics:s}=e;let i=25;i=this.addReportHeader(a,"RELATORIO DE AGENDAMENTOS - GERAL",t);const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e>a.internal.pageSize.getHeight()-15-t?(n.addReportFooter(a),a.addPage(),25):e};i=o(i),i=this.addExecutiveSummary(a,s,i),i=o(i),i=this.addPredictedVsActual(a,s,i),i=o(i),i=this.addTherapistPerformance(a,r,i),i=o(i),i=this.addDetailedSchedule(a,r,i),this.addReportFooter(a);const l="relatorio_agendamentos_geral_".concat(t.period.startDate,"_").concat(t.period.endDate,".pdf");return a.save(l),{success:!0,fileName:l}}generateIndividualReport(e,t){const n=new qo.default("portrait","mm","a4"),{appointments:a}=e,r=a.length>0?a[0].therapist_name:"Terapeuta N\xe3o Encontrado";this.addReportHeader(n,"RELAT\xd3RIO INDIVIDUAL - ".concat(r.toUpperCase()),t);let s=60;s=this.addIndividualPerformance(n,a,s),s=this.addStatisticalDetails(n,a,s),s>200&&(n.addPage(),s=20),s=this.addIndividualDetailedSchedule(n,a,s),s=this.addPaymentSummary(n,a,t,s),this.addReportFooter(n);const i="relatorio_individual_".concat(r.replace(/\s+/g,"_"),"_").concat(t.period.startDate,"_").concat(t.period.endDate,".pdf");return n.save(i),{success:!0,fileName:i}}addReportHeader(e,t,n){const a=15,r=e.internal.pageSize.getWidth();let s=25;e.setFontSize(16),e.setFont("helvetica","bold"),e.text(t,r/2,s,{align:"center"}),s+=8,e.setFontSize(10),e.setFont("helvetica","normal"),e.text("Per\xedodo: ".concat(this.formatDate(n.period.startDate)," a ").concat(this.formatDate(n.period.endDate)),a,s),e.text("Gerado em: ".concat(this.formatDate((new Date).toISOString())),r-a,s,{align:"right"}),s+=6;const i="all"===n.scope.type?"Escopo: Todos os Terapeutas":"Escopo: Terapeuta Individual";return e.text(i,a,s),s+=10,e.setLineWidth(.2),e.line(a,s,r-a,s),s+8}addExecutiveSummary(e,t,n){const a=e.internal.pageSize.getWidth();e.setFontSize(12),e.setFont("helvetica","bold"),e.setFillColor(240,248,255),e.rect(15,n-4,a-30,7,"F"),e.setTextColor(25,118,210),e.text("RESUMO EXECUTIVO",17,n),e.setTextColor(0,0,0),n+=12;const r=[["Total de Agendamentos","".concat(t.total_appointments||0)],["Sess\xf5es Realizadas","".concat(t.completed_appointments||0," (").concat(this.calculatePercentage(t.completed_appointments,t.total_appointments),"%)")],["Faltas Registradas","".concat(t.missed_appointments||0," (").concat(this.calculatePercentage(t.missed_appointments,t.total_appointments),"%)")],["Cancelamentos","".concat(t.cancelled_appointments||0," (").concat(this.calculatePercentage(t.cancelled_appointments,t.total_appointments),"%)")],["Taxa de Comparecimento","".concat(t.attendance_rate||0,"%")]];return e.autoTable({startY:n,head:[["Indicador","Resultado"]],body:r,theme:"grid",headStyles:{fillColor:[25,118,210],textColor:[255,255,255],fontStyle:"bold",fontSize:10,halign:"center"},bodyStyles:{fontSize:9,textColor:[60,60,60],lineColor:[200,200,200],lineWidth:.5},columnStyles:{0:{cellWidth:110,halign:"left",fontStyle:"normal",textColor:[70,70,70]},1:{cellWidth:70,halign:"center",fontStyle:"bold",textColor:[25,118,210]}},margin:{left:15,right:15}}),e.lastAutoTable.finalY+20}addPredictedVsActual(e,t,n){const a=e.internal.pageSize.getWidth();e.setFontSize(12),e.setFont("helvetica","bold"),e.setFillColor(255,247,237),e.rect(15,n-4,a-30,7,"F"),e.setTextColor(234,88,12),e.text("AN\xc1LISE DE EFETIVIDADE",17,n),e.setTextColor(0,0,0),n+=12;const r=(t.completed_appointments||0)+(t.missed_appointments||0),s=t.completed_appointments||0,i=t.missed_appointments||0,o=this.calculatePercentage(s,r),l=[["Sess\xf5es Programadas (Passadas)","".concat(r)],["Sess\xf5es Efetivamente Realizadas","".concat(s)],["Aus\xeancias Registradas","".concat(i)],["Taxa de Efetividade Geral","".concat(o,"%")]];return e.autoTable({startY:n,head:[["M\xe9trica","Resultado"]],body:l,theme:"grid",headStyles:{fillColor:[234,88,12],textColor:[255,255,255],fontStyle:"bold",fontSize:10,halign:"center"},bodyStyles:{fontSize:9,textColor:[60,60,60],lineColor:[200,200,200],lineWidth:.5},columnStyles:{0:{cellWidth:110,halign:"left",fontStyle:"normal",textColor:[70,70,70]},1:{cellWidth:70,halign:"center",fontStyle:"bold",textColor:[234,88,12]}},margin:{left:15,right:15}}),e.lastAutoTable.finalY+20}addTherapistPerformance(e,t,n){const a=15,r=e.internal.pageSize.getWidth();e.setFontSize(12),e.setFont("helvetica","bold"),e.setFillColor(240,253,244),e.rect(a,n-4,r-30,7,"F"),e.setTextColor(21,128,61),e.text("PERFORMANCE POR TERAPEUTA",17,n),e.setTextColor(0,0,0),n+=12;const s=this.groupAppointmentsByTherapist(t);if(0===s.length)return e.setFontSize(10),e.setFont("helvetica","normal"),e.text("Nenhum dado de performance encontrado para o per\xedodo selecionado.",a,n+10),n+30;const i=s.map((e=>[e.name,e.scheduled.toString(),e.completed.toString(),e.missed.toString(),"".concat(e.rate,"%")])),o=this.calculateTotals(s);return i.push(["TOTAL CLINICA",o.scheduled.toString(),o.completed.toString(),o.missed.toString(),"".concat(o.rate,"%")]),e.autoTable({head:[["Terapeuta","Agend","Real","Faltas","Taxa%"]],body:i,startY:n,theme:"grid",headStyles:{fillColor:[21,128,61],textColor:[255,255,255],fontStyle:"bold",fontSize:10,halign:"center"},bodyStyles:{fontSize:9,textColor:[60,60,60],lineColor:[200,200,200],lineWidth:.5},columnStyles:{0:{cellWidth:90,halign:"left",textColor:[70,70,70]},1:{cellWidth:22,halign:"center",textColor:[21,128,61]},2:{cellWidth:22,halign:"center",textColor:[21,128,61],fontStyle:"bold"},3:{cellWidth:22,halign:"center",textColor:[185,28,28]},4:{cellWidth:24,halign:"center",textColor:[21,128,61],fontStyle:"bold"}},margin:{left:a,right:a}}),e.lastAutoTable.finalY+15}addDetailedSchedule(e,t,n){const a=15,r=e.internal.pageSize.getWidth();e.setFontSize(12),e.setFont("helvetica","bold"),e.setFillColor(250,245,255),e.rect(a,n-4,r-30,7,"F"),e.setTextColor(124,58,237),e.text("AGENDA DETALHADA",17,n),e.setTextColor(0,0,0),n+=12;const s=t.sort(((e,t)=>new Date("".concat(e.scheduled_date,"T").concat(e.scheduled_time))-new Date("".concat(t.scheduled_date,"T").concat(t.scheduled_time)))),i=s.slice(0,50).map((e=>[this.formatDate(e.scheduled_date),e.scheduled_time||"",e.patient_name||"N/A",e.therapist_name||"N/A",this.formatStatus(e.status)]));e.autoTable({head:[["Data","Hora","Paciente","Terapeuta","Status"]],body:i,startY:n,theme:"grid",headStyles:{fillColor:[124,58,237],textColor:[255,255,255],fontStyle:"bold",fontSize:10},bodyStyles:{fontSize:8,textColor:[60,60,60],lineColor:[200,200,200],lineWidth:.5},columnStyles:{0:{cellWidth:24,halign:"center"},1:{cellWidth:18,halign:"center"},2:{cellWidth:56,halign:"left"},3:{cellWidth:56,halign:"left"},4:{cellWidth:26,halign:"center"}},didParseCell:function(e){if(4===e.column.index&&"body"===e.section){switch(e.cell.raw){case"Realizada":e.cell.styles.fillColor=[220,252,231],e.cell.styles.textColor=[21,128,61],e.cell.styles.fontStyle="bold";break;case"Falta":e.cell.styles.fillColor=[254,226,226],e.cell.styles.textColor=[185,28,28],e.cell.styles.fontStyle="bold";break;case"Cancelada":e.cell.styles.fillColor=[249,250,251],e.cell.styles.textColor=[107,114,128];break;case"Agendada":e.cell.styles.fillColor=[239,246,255],e.cell.styles.textColor=[29,78,216]}}},margin:{left:a,right:a}});let o=e.lastAutoTable.finalY+10;return s.length>50&&(e.setFontSize(8),e.text("Nota: Mostrando apenas os primeiros 50 registros de ".concat(s.length," total."),a,o),o+=8),o}addIndividualPerformance(e,t,n){e.setFontSize(14),e.setFont("helvetica","bold"),e.text("PERFORMANCE INDIVIDUAL",20,n),n+=10;const a=this.calculateIndividualStats(t);e.setFontSize(10),e.setFont("helvetica","normal");return[["Total de Agendamentos","".concat(a.total)],["Sess\xf5es Realizadas","".concat(a.completed," (").concat(a.completedRate,"%)")],["Faltas","".concat(a.missed," (").concat(a.missedRate,"%)")],["Cancelamentos","".concat(a.cancelled," (").concat(a.cancelledRate,"%)")],["Taxa de Comparecimento","".concat(a.attendanceRate,"%")]].forEach((t=>{let[a,r]=t;e.text("\u251c\u2500\u2500 ".concat(a,": ").concat(r),25,n),n+=6})),n+10}addStatisticalDetails(e,t,n){e.setFontSize(14),e.setFont("helvetica","bold"),e.text("DETALHAMENTO ESTATISTICO",20,n),n+=10;const a=this.calculateAdvancedStats(t);e.setFontSize(10),e.setFont("helvetica","normal");return[["Agendamentos por Semana","".concat(a.avgPerWeek," (m\xe9dia)")],["Sess\xf5es Realizadas por Semana","".concat(a.completedPerWeek," (m\xe9dia)")],["Maior Sequ\xeancia de Sucessos","".concat(a.longestSuccessStreak," sess\xf5es")],["\xdaltima Falta Registrada",a.lastMissed||"Nenhuma falta no per\xedodo"],["Pontualidade Geral","".concat(a.punctuality,"%")]].forEach((t=>{let[a,r]=t;e.text("\u251c\u2500\u2500 ".concat(a,": ").concat(r),25,n),n+=6})),n+10}addIndividualDetailedSchedule(e,t,n){e.setFontSize(14),e.setFont("helvetica","bold"),e.text("AGENDA DETALHADA - TERAPEUTA",20,n),n+=10;const a=t.sort(((e,t)=>new Date("".concat(e.scheduled_date,"T").concat(e.scheduled_time))-new Date("".concat(t.scheduled_date,"T").concat(t.scheduled_time)))).map((e=>[this.formatDate(e.scheduled_date),e.scheduled_time,e.patient_name||"N/A",e.discipline_name||"Sess\xe3o Geral",this.formatStatus(e.status)]));return e.autoTable({head:[["Data","Hora","Paciente","\xc1rea/Disciplina","Status"]],body:a,startY:n,theme:"grid",headStyles:{fillColor:[66,139,202],textColor:[255,255,255],fontStyle:"bold"},styles:{fontSize:8},columnStyles:{0:{cellWidth:22,halign:"center"},1:{cellWidth:18,halign:"center"},2:{cellWidth:48,halign:"left"},3:{cellWidth:48,halign:"left"},4:{cellWidth:22,halign:"center"}}}),e.lastAutoTable.finalY+15}addPaymentSummary(e,t,n,a){e.setFontSize(14),e.setFont("helvetica","bold"),e.text("RESUMO PARA PAGAMENTO",20,a),a+=10;const r=this.calculateIndividualStats(t),s=t.filter((e=>"missed"===e.status&&e.justified_at)).length;e.setFontSize(10),e.setFont("helvetica","normal");return[["Total de Sess\xf5es Efetivamente Realizadas","".concat(r.completed)],["Per\xedodo de Refer\xeancia","".concat(this.formatDate(n.period.startDate)," a ").concat(this.formatDate(n.period.endDate))],["Taxa de Efetiva\xe7\xe3o","".concat(r.attendanceRate,"%")],["Observa\xe7\xf5es","".concat(s," falta(s) justificada(s)")]].forEach((t=>{let[n,r]=t;e.text("\u251c\u2500\u2500 ".concat(n,": ").concat(r),25,a),a+=6})),a+10}addReportFooter(e){const t=e.internal.getNumberOfPages(),n=e.internal.pageSize.getWidth(),a=e.internal.pageSize.getHeight();for(let r=1;r<=t;r++){e.setPage(r),e.setFontSize(8),e.setTextColor(100);const s="P\xe1gina ".concat(r," de ").concat(t);e.text(s,n/2,a-7.5,{align:"center"}),e.text("Gerado em: ".concat(this.formatDate((new Date).toISOString())),15,a-7.5),e.setTextColor(0)}}formatDate(e){if(!e)return"N/A";try{const t=new Date(e);return isNaN(t.getTime())?"Data inv\xe1lida":t.toLocaleDateString("pt-BR")}catch(t){return"Data inv\xe1lida"}}formatStatus(e){return{completed:"Realizada",missed:"Falta",cancelled:"Cancelada",scheduled:"Agendada"}[e]||e}calculatePercentage(e,t){return t&&0!==t?(e/t*100).toFixed(1):"0"}groupAppointmentsByTherapist(e){if(!e||0===e.length)return[];const t=new Map;return e.forEach((e=>{const n=e.therapist_id,a=e.therapist_name||"Terapeuta Desconhecido";if(!n)return;t.has(n)||t.set(n,{name:a,scheduled:0,completed:0,missed:0,cancelled:0});const r=t.get(n);switch(r.scheduled++,e.status){case"completed":r.completed++;break;case"missed":r.missed++;break;case"cancelled":r.cancelled++}})),Array.from(t.values()).map((e=>(0,Ie.A)((0,Ie.A)({},e),{},{rate:this.calculatePercentage(e.completed,e.scheduled)})))}calculateTotals(e){const t=e.reduce(((e,t)=>({scheduled:e.scheduled+t.scheduled,completed:e.completed+t.completed,missed:e.missed+t.missed,cancelled:e.cancelled+t.cancelled})),{scheduled:0,completed:0,missed:0,cancelled:0});return(0,Ie.A)((0,Ie.A)({},t),{},{rate:this.calculatePercentage(t.completed,t.scheduled)})}calculateIndividualStats(e){const t=e.length,n=e.filter((e=>"completed"===e.status)).length,a=e.filter((e=>"missed"===e.status)).length,r=e.filter((e=>"cancelled"===e.status)).length;return{total:t,completed:n,missed:a,cancelled:r,completedRate:this.calculatePercentage(n,t),missedRate:this.calculatePercentage(a,t),cancelledRate:this.calculatePercentage(r,t),attendanceRate:this.calculatePercentage(n,t)}}calculateAdvancedStats(e){const t=e.filter((e=>"completed"===e.status)),n=this.getWeeksInPeriod(e);return{avgPerWeek:(e.length/Math.max(n,1)).toFixed(1),completedPerWeek:(t.length/Math.max(n,1)).toFixed(1),longestSuccessStreak:this.calculateSuccessStreak(e),lastMissed:this.getLastMissed(e),punctuality:this.calculatePercentage(t.length,e.length)}}getWeeksInPeriod(e){if(0===e.length)return 1;const t=e.map((e=>new Date(e.scheduled_date))),n=new Date(Math.min(...t)),a=new Date(Math.max(...t)).getTime()-n.getTime(),r=Math.ceil(a/864e5);return Math.max(Math.ceil(r/7),1)}calculateSuccessStreak(e){const t=e.sort(((e,t)=>new Date("".concat(e.scheduled_date,"T").concat(e.scheduled_time))-new Date("".concat(t.scheduled_date,"T").concat(t.scheduled_time))));let n=0,a=0;return t.forEach((e=>{"completed"===e.status?(a++,n=Math.max(n,a)):a=0})),n}getLastMissed(e){const t=e.filter((e=>"missed"===e.status)).sort(((e,t)=>new Date(t.scheduled_date)-new Date(e.scheduled_date)));return t.length>0?this.formatDate(t[0].scheduled_date):null}}const ej=()=>{const{user:e,token:t}=Ge(),[n,r]=(0,a.useState)([]),[s,i]=(0,a.useState)([]),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(!0),[u,h]=(0,a.useState)(null),[m,f]=(0,a.useState)(!1),[p,g]=(0,a.useState)(!1),[x,b]=(0,a.useState)(!1),[v,y]=(0,a.useState)(!1),[w,j]=(0,a.useState)(!1),[N,_]=(0,a.useState)(null),[S,k]=(0,a.useState)(null),[C,A]=(0,a.useState)(null),[P,L]=(0,a.useState)(!1),[E,D]=(0,a.useState)(!1),[M,O]=(0,a.useState)("appointments"),[T,R]=(0,a.useState)(0),[I,F]=(0,a.useState)({therapist_id:"",patient_id:"",status:"",start_date:"",end_date:"",page:1,limit:20}),[z,B]=(0,a.useState)(null),q=(0,a.useCallback)((async()=>{try{if(!t)return;const e=await et(t);i(e)}catch(u){console.error("Erro ao carregar assignments")}}),[t]),U=(0,a.useCallback)((async()=>{try{d(!0),h(null);const e=await Lw(I);r(e.appointments||[]),B(e.pagination||null)}catch(u){console.error("Erro ao carregar agendamentos"),h("Erro ao carregar agendamentos. Tente novamente.")}finally{d(!1)}}),[I]),W=(0,a.useCallback)((async()=>{try{const e=I.start_date||new Date(Date.now()-2592e6).toISOString().split("T")[0],t=I.end_date||(new Date).toISOString().split("T")[0],n=await Ow(e,t);l(n)}catch(u){console.error("Erro ao carregar estat\xedsticas")}}),[I]);(0,a.useEffect)((()=>{U(),W(),q()}),[U,W,q]),(0,a.useEffect)((()=>{U()}),[U]);const H=e=>{_(e),f(!0),g(!1)},V=async e=>{if(window.confirm("Tem certeza que deseja remover o agendamento de ".concat(e.patient_name," para ").concat(e.scheduled_date," \xe0s ").concat(e.scheduled_time,"?")))try{await Dw(e.id),await U(),await W(),g(!1)}catch(u){console.error("Erro ao remover agendamento"),alert("Erro ao remover agendamento. Tente novamente.")}},Y=e&&e.is_admin,G=e&&e.is_admin,$=e&&e.is_admin;return Y?(0,He.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,He.jsx)("div",{className:"bg-white shadow",children:(0,He.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,He.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-3 text-blue-600"}),"Sistema de Agendamento"]}),(0,He.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Gerencie agendamentos de sess\xf5es e acompanhe estat\xedsticas da cl\xednica"})]}),(0,He.jsxs)("div",{className:"flex space-x-3",children:[(0,He.jsxs)("button",{onClick:()=>{U(),W()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center",children:[(0,He.jsx)(Hr,{icon:Ws,className:"mr-2 w-4 h-4"}),"Atualizar"]}),(0,He.jsxs)("button",{onClick:()=>b(!0),className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 flex items-center",children:[(0,He.jsx)(Hr,{icon:di,className:"mr-2 w-4 h-4"}),"Gerar Relat\xf3rio"]}),(0,He.jsxs)("button",{onClick:()=>y(!0),className:"px-4 py-2 text-sm font-medium text-purple-700 bg-purple-100 border border-purple-300 rounded-md shadow-sm hover:bg-purple-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 flex items-center",children:[(0,He.jsx)(Hr,{icon:bo,className:"mr-2 w-4 h-4"}),"Detec\xe7\xe3o Inteligente"]}),(0,He.jsxs)("button",{onClick:async()=>{if(window.confirm("Tem certeza que deseja marcar automaticamente os agendamentos vencidos como perdidos? Esta a\xe7\xe3o n\xe3o pode ser desfeita."))try{const e=await Mw(1);await U(),await W(),alert("".concat(e.marked_count||0," agendamentos foram marcados como perdidos."))}catch(u){console.error("Erro ao marcar agendamentos perdidos"),alert("Erro ao processar agendamentos perdidos. Tente novamente.")}},className:"px-4 py-2 text-sm font-medium text-red-700 bg-red-100 border border-red-300 rounded-md shadow-sm hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 flex items-center",children:[(0,He.jsx)(Hr,{icon:go,className:"mr-2 w-4 h-4"}),"Marcar Perdidos"]}),(0,He.jsxs)("button",{onClick:()=>f(!0),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center",children:[(0,He.jsx)(Hr,{icon:yi,className:"mr-2 w-4 h-4"}),"Novo Agendamento"]})]})]})})}),(0,He.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u&&(0,He.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:go,className:"text-red-400 mr-2"}),(0,He.jsx)("span",{className:"text-red-800",children:u})]})}),o&&(0,He.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:(o?[{title:"Total de Agendamentos",value:o.total_appointments||0,icon:Zr,color:"bg-blue-500"},{title:"Agendamentos Hoje",value:o.today_appointments||0,icon:Zr,color:"bg-green-500"},{title:"Taxa de Comparecimento",value:"".concat(o.attendance_rate||0,"%"),icon:Ts,color:"bg-purple-500"},{title:"Agendamentos Perdidos",value:o.missed_appointments||0,icon:go,color:"bg-red-500"}]:[]).map(((e,t)=>(0,He.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)("div",{className:"flex-shrink-0 ".concat(e.color," rounded-md p-3"),children:(0,He.jsx)(Hr,{icon:e.icon,className:"text-white w-6 h-6"})}),(0,He.jsxs)("div",{className:"ml-4",children:[(0,He.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:e.title}),(0,He.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.value})]})]})},t)))}),(0,He.jsx)("div",{className:"mb-6",children:(0,He.jsx)("div",{className:"border-b border-gray-200",children:(0,He.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,He.jsxs)("button",{onClick:()=>O("appointments"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("appointments"===M?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-2"}),"Agendamentos"]}),(0,He.jsxs)("button",{onClick:()=>O("orphans"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("orphans"===M?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,He.jsx)(Hr,{icon:go,className:"mr-2"}),"Sess\xf5es \xd3rf\xe3s"]})]})})}),"appointments"===M&&(0,He.jsx)(Gw,{appointments:n,onEdit:H,onDelete:V,onView:e=>{k(e),g(!0)},isLoading:c,pagination:z,onPageChange:e=>{F((t=>(0,Ie.A)((0,Ie.A)({},t),{},{page:e})))},showFilters:!0}),"orphans"===M&&(0,He.jsx)(Kw,{onCreateRetroactive:e=>{A(e),j(!0)},refreshTrigger:T})]}),(0,He.jsx)(Yw,{isOpen:m,onClose:()=>{f(!1),_(null)},onSubmit:N?async e=>{try{L(!0);const t=await Ew(N.id,e);await U(),await W(),f(!1),_(null),k(t.appointment),g(!0)}catch(u){throw console.error("Erro ao atualizar agendamento"),u}finally{L(!1)}}:async e=>{try{L(!0);const t=await Pw(e);await U(),await W(),f(!1),_(null),k(t.appointment),g(!0)}catch(u){throw console.error("Erro ao criar agendamento"),u}finally{L(!1)}},assignments:s,editingAppointment:N,isLoading:P}),(0,He.jsx)($w,{isOpen:p,onClose:()=>{g(!1),k(null)},appointment:S,onEdit:H,onDelete:V,canEdit:G,canDelete:$}),(0,He.jsx)(Xw,{isOpen:x,onClose:()=>b(!1),onGenerate:async e=>{try{D(!0);const t=await(async e=>{const t=new Zw;return await t.generateReport(e)})(e);if(!t.success)throw new Error("Falha na gera\xe7\xe3o do relat\xf3rio");alert("Relat\xf3rio gerado com sucesso! Arquivo: ".concat(t.fileName)),b(!1)}catch(u){console.error("Erro ao gerar relat\xf3rio:",u),alert("Erro ao gerar relat\xf3rio. Tente novamente.")}finally{D(!1)}},therapists:(()=>{const e=new Map;return s.forEach((t=>{t.therapist_id&&t.therapist_name&&e.set(t.therapist_id,{id:t.therapist_id,full_name:t.therapist_name})})),n.forEach((t=>{t.therapist_id&&t.therapist_name&&e.set(t.therapist_id,{id:t.therapist_id,full_name:t.therapist_name})})),Array.from(e.values())})(),isGenerating:E}),(0,He.jsx)(Jw,{isOpen:v,onClose:()=>y(!1),onDetectionComplete:e=>{U(),R((e=>e+1))}}),(0,He.jsx)(Qw,{isOpen:w,onClose:()=>{j(!1),A(null)},orphanSession:C,onSuccess:()=>{U(),R((e=>e+1))}})]}):(0,He.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,He.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,He.jsx)(Hr,{icon:go,className:"text-red-500 text-4xl mb-4"}),(0,He.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Acesso Restrito"}),(0,He.jsx)("p",{className:"text-gray-600",children:"Voc\xea n\xe3o tem permiss\xe3o para acessar o sistema de agendamento. Esta funcionalidade est\xe1 dispon\xedvel apenas para administradores."})]})})})},tj=$e.A.create({baseURL:qe.H});tj.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e)));const nj=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;Object.entries(e).forEach((e=>{let[n,a]=e;void 0!==a&&null!==a&&""!==a&&t.append(n,a)}));return(await tj.get("/therapist/schedule?".concat(t.toString()))).data}catch(s){var t,n,a,r;throw console.error("[THERAPIST-SCHEDULE-API] Erro ao buscar agenda pessoal"),new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"Erro ao buscar agenda")}},aj=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;try{return(await tj.get("/therapist/schedule/upcoming?days_ahead=".concat(e))).data}catch(s){var t,n,a,r;throw console.error("[THERAPIST-SCHEDULE-API] Erro ao buscar pr\xf3ximos agendamentos"),new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"Erro ao buscar pr\xf3ximos agendamentos")}},rj=async()=>{try{return(await tj.get("/therapist/schedule/today")).data}catch(r){var e,t,n,a;throw console.error("[THERAPIST-SCHEDULE-API] Erro ao buscar agenda de hoje"),new Error((null===(e=r.response)||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.errors)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.msg)||"Erro ao buscar agenda de hoje")}},sj=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{return(await tj.get("/therapist/schedule/missed?include_justified=".concat(e))).data}catch(s){var t,n,a,r;throw console.error("[THERAPIST-SCHEDULE-API] Erro ao buscar agendamentos perdidos"),new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"Erro ao buscar agendamentos perdidos")}},ij=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;Object.entries(e).forEach((e=>{let[n,a]=e;void 0!==a&&null!==a&&""!==a&&t.append(n,a)}));return(await tj.get("/therapist/schedule/statistics?".concat(t.toString()))).data}catch(s){var t,n,a,r;throw console.error("[THERAPIST-SCHEDULE-API] Erro ao buscar estat\xedsticas pessoais"),new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"Erro ao buscar estat\xedsticas")}},oj=async e=>{try{return(await tj.get("/therapist/schedule/appointments/".concat(e))).data}catch(s){var t,n,a,r;throw console.error("[THERAPIST-SCHEDULE-API] Erro ao buscar agendamento ID ".concat(e)),new Error((null===(t=s.response)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.errors)||void 0===a||null===(r=a[0])||void 0===r?void 0:r.msg)||"Agendamento n\xe3o encontrado")}},lj=async(e,t)=>{try{return(await tj.post("/therapist/schedule/justify/".concat(e),t)).data}catch(i){var n,a,r,s;throw console.error("[THERAPIST-SCHEDULE-API] Erro ao justificar agendamento ID ".concat(e)),new Error((null===(n=i.response)||void 0===n||null===(a=n.data)||void 0===a||null===(r=a.errors)||void 0===r||null===(s=r[0])||void 0===s?void 0:s.msg)||"Erro ao justificar agendamento")}},cj=e=>{const t={};return e.forEach((e=>{const n=e.scheduled_date;t[n]||(t[n]=[]),t[n].push(e)})),Object.keys(t).forEach((e=>{t[e].sort(((e,t)=>e.scheduled_time.localeCompare(t.scheduled_time)))})),t},dj=e=>{const t=new Date,n=t.toISOString().split("T")[0],a=t.toTimeString().slice(0,5),r=e.filter((e=>"scheduled"===e.status&&(e.scheduled_date>n||e.scheduled_date===n&&e.scheduled_time>a)));return 0===r.length?null:(r.sort(((e,t)=>{const n=e.scheduled_date.localeCompare(t.scheduled_date);return 0!==n?n:e.scheduled_time.localeCompare(t.scheduled_time)})),r[0])},uj=e=>{const t={total:e.length,scheduled:0,completed:0,missed:0,cancelled:0,completion_rate:0,attendance_rate:0};e.forEach((e=>{t[e.status]++})),t.total>0&&(t.completion_rate=Math.round(t.completed/t.total*100));const n=t.total-t.cancelled;return n>0&&(t.attendance_rate=Math.round(t.completed/n*100)),t},hj=e=>{if("scheduled"!==e.status)return!1;const t=new Date;return new Date("".concat(e.scheduled_date,"T").concat(e.scheduled_time))<t},mj=e=>{const t=new Date,n=(()=>{try{const t=e.scheduled_date,n=e.scheduled_time;if(!t||!n)return new Date;let a=t;if(t instanceof Date){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");a="".concat(e,"-").concat(n,"-").concat(r)}else"string"===typeof t&&t.includes("T")&&(a=t.split("T")[0]);const[r,s,i]=a.split("-").map(Number),[o,l]=n.split(":").map(Number);return new Date(r,s-1,i,o,l,0)}catch(t){return console.error("Erro ao processar data do agendamento:",t),new Date}})()-t;if(n<0)return"Atrasado";const a=Math.floor(n/36e5),r=Math.floor(n%36e5/6e4),s=Math.floor(a/24);return s>0?"Em ".concat(s," dia(s)"):a>0?"Em ".concat(a,"h ").concat(r,"min"):"Em ".concat(r," minutos")},fj=e=>e>=90?"text-green-600":e>=70?"text-yellow-600":"text-red-600",pj=()=>{const{user:e}=Ge(),[t,n]=(0,a.useState)([]),[r,s]=(0,a.useState)([]),[i,o]=(0,a.useState)([]),[l,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(null),[h,m]=(0,a.useState)(!0),[f,p]=(0,a.useState)(null),[g,x]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null),[y,w]=(0,a.useState)(!1),[j,N]=(0,a.useState)(null),[_,S]=(0,a.useState)("today"),[k,C]=(0,a.useState)({start_date:(new Date).toISOString().split("T")[0],end_date:new Date(Date.now()+6048e5).toISOString().split("T")[0]}),[A,P]=(0,a.useState)({missed_reason:"",missed_by:"patient"}),[L,E]=(0,a.useState)(!1),D=(0,a.useCallback)((async()=>{try{m(!0),p(null),await Promise.all([O(),T(),R(),I(),M()])}catch(f){console.error("Erro ao carregar dados da agenda"),p("Erro ao carregar dados da agenda. Tente novamente.")}finally{m(!1)}}),[]),M=(0,a.useCallback)((async()=>{try{const e=await nj(k);n(e.appointments||[])}catch(f){console.error("Erro ao carregar agenda")}}),[k]);(0,a.useEffect)((()=>{e&&"terapeuta"===e.role&&!e.is_admin&&D()}),[e,D]),(0,a.useEffect)((()=>{"schedule"===_&&M()}),[_,M]);const O=async()=>{try{const e=await rj();s(e.appointments||[])}catch(f){console.error("Erro ao carregar agenda de hoje")}},T=async()=>{try{const e=await aj(7);o(e.appointments||[])}catch(f){console.error("Erro ao carregar pr\xf3ximos agendamentos")}},R=async()=>{try{const e=await sj(!1);c(e.appointments||[])}catch(f){console.error("Erro ao carregar agendamentos perdidos")}},I=async()=>{try{const e=(new Date).toISOString().split("T")[0],t=new Date(Date.now()-2592e6).toISOString().split("T")[0],n=await ij({start_date:t,end_date:e,period:"month"});u(n)}catch(f){console.error("Erro ao carregar estat\xedsticas")}},F=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=hj(e);return(0,He.jsx)("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors hover:bg-gray-50 ".concat(n?"border-red-300 bg-red-50":"border-gray-200"),onClick:()=>(async e=>{try{const t=await oj(e.id);v(t.appointment),x(!0)}catch(f){console.error("Erro ao carregar detalhes do agendamento"),alert("Erro ao carregar detalhes do agendamento")}})(e),children:(0,He.jsxs)("div",{className:"flex items-start justify-between",children:[(0,He.jsxs)("div",{className:"flex-1",children:[t&&(0,He.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:new Date(e.scheduled_date).toLocaleDateString("pt-BR")}),(0,He.jsxs)("div",{className:"flex items-center mb-2",children:[(0,He.jsx)(Hr,{icon:Ni,className:"text-blue-500 mr-2 w-4 h-4"}),(0,He.jsxs)("span",{className:"font-medium text-gray-900",children:[e.scheduled_time," (",e.duration_minutes,"min)"]}),n&&(0,He.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:"Atrasado"})]}),(0,He.jsxs)("div",{className:"flex items-center mb-1",children:[(0,He.jsx)(Hr,{icon:js,className:"text-green-500 mr-2 w-4 h-4"}),(0,He.jsx)("span",{className:"text-gray-700",children:e.patient_name})]}),(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:$r,className:"text-purple-500 mr-2 w-4 h-4"}),(0,He.jsx)("span",{className:"text-sm text-gray-600",children:e.program_name})]})]}),(0,He.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,He.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("scheduled"===e.status?"bg-yellow-100 text-yellow-800":"completed"===e.status?"bg-green-100 text-green-800":"missed"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:["scheduled"===e.status&&"Agendado","completed"===e.status&&"Realizado","missed"===e.status&&"Perdido","cancelled"===e.status&&"Cancelado"]}),"missed"===e.status&&!e.missed_reason&&(0,He.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{N(e),P({missed_reason:"",missed_by:"patient"}),w(!0)})(e)},className:"px-2 py-1 text-xs font-medium text-red-700 bg-red-100 rounded hover:bg-red-200",children:"Justificar"})]})]})},e.id)};return!e||"terapeuta"!==e.role||e.is_admin?(0,He.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,He.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,He.jsx)(Hr,{icon:go,className:"text-red-500 text-4xl mb-4"}),(0,He.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Acesso Restrito"}),(0,He.jsx)("p",{className:"text-gray-600",children:"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina. Esta funcionalidade est\xe1 dispon\xedvel apenas para terapeutas."})]})})}):h?(0,He.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,He.jsxs)("div",{className:"text-center",children:[(0,He.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,He.jsx)("p",{className:"text-gray-600",children:"Carregando sua agenda..."})]})}):(0,He.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,He.jsx)("div",{className:"bg-white shadow",children:(0,He.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,He.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,He.jsxs)("div",{children:[(0,He.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-3 text-blue-600"}),"Minha Agenda"]}),(0,He.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Visualize seus agendamentos e gerencie sua rotina"})]}),(0,He.jsxs)("button",{onClick:D,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center",children:[(0,He.jsx)(Hr,{icon:Ws,className:"mr-2 w-4 h-4"}),"Atualizar"]})]})})}),(0,He.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f&&(0,He.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)(Hr,{icon:go,className:"text-red-400 mr-2"}),(0,He.jsx)("span",{className:"text-red-800",children:f})]})}),(0,He.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:(()=>{uj([...r,...i]);const e=dj([...r,...i]);return[{title:"Agendamentos Hoje",value:r.length,icon:xi,color:"bg-blue-500"},{title:"Pr\xf3ximos 7 Dias",value:i.length,icon:Zr,color:"bg-green-500"},{title:"Aguardando Justificativa",value:l.length,icon:go,color:"bg-red-500"},{title:"Pr\xf3ximo Agendamento",value:e?mj(e):"Nenhum",icon:Ni,color:"bg-purple-500",subtitle:e?"".concat(e.patient_name," - ").concat(e.scheduled_time):"Nenhum agendamento pr\xf3ximo"}]})().map(((e,t)=>(0,He.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,He.jsxs)("div",{className:"flex items-center",children:[(0,He.jsx)("div",{className:"flex-shrink-0 ".concat(e.color," rounded-md p-3"),children:(0,He.jsx)(Hr,{icon:e.icon,className:"text-white w-6 h-6"})}),(0,He.jsxs)("div",{className:"ml-4",children:[(0,He.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:e.title}),(0,He.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.value}),e.subtitle&&(0,He.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.subtitle})]})]})},t)))}),(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,He.jsx)("div",{className:"border-b border-gray-200",children:(0,He.jsx)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[{id:"today",name:"Hoje",icon:xi},{id:"upcoming",name:"Pr\xf3ximos",icon:Zr},{id:"schedule",name:"Agenda Completa",icon:Zr},{id:"missed",name:"Perdidos",icon:go,badge:l.length},{id:"stats",name:"Estat\xedsticas",icon:Ts}].map((e=>(0,He.jsxs)("button",{onClick:()=>S(e.id),className:"".concat(_===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm flex items-center"),children:[(0,He.jsx)(Hr,{icon:e.icon,className:"mr-2 w-4 h-4"}),e.name,e.badge>0&&(0,He.jsx)("span",{className:"ml-2 bg-red-100 text-red-600 py-0.5 px-2 rounded-full text-xs font-medium",children:e.badge})]},e.id)))})}),(0,He.jsxs)("div",{className:"p-6",children:["today"===_&&(0,He.jsx)("div",{className:"space-y-6",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,He.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:xi,className:"mr-3 text-blue-600"}),"Agenda de Hoje - ",(new Date).toLocaleDateString("pt-BR")]}),0===r.length?(0,He.jsx)("p",{className:"text-gray-500 text-center py-8",children:"Nenhum agendamento para hoje"}):(0,He.jsx)("div",{className:"space-y-3",children:r.map((e=>F(e)))})]})}),"upcoming"===_&&(0,He.jsx)("div",{className:"space-y-6",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,He.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-3 text-green-600"}),"Pr\xf3ximos Agendamentos (7 dias)"]}),0===i.length?(0,He.jsx)("p",{className:"text-gray-500 text-center py-8",children:"Nenhum agendamento nos pr\xf3ximos 7 dias"}):(0,He.jsx)("div",{className:"space-y-3",children:i.map((e=>F(e,!0)))})]})}),"schedule"===_&&(()=>{const e=cj(t),n=Object.keys(e).sort();return(0,He.jsx)("div",{className:"space-y-6",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,He.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,He.jsx)(Hr,{icon:Zr,className:"mr-3 text-purple-600"}),"Agenda Completa"]}),(0,He.jsxs)("div",{className:"flex space-x-4",children:[(0,He.jsx)("input",{type:"date",value:k.start_date,onChange:e=>C((t=>(0,Ie.A)((0,Ie.A)({},t),{},{start_date:e.target.value}))),className:"px-3 py-2 border border-gray-300 rounded-md text-sm"}),(0,He.jsx)("input",{type:"date",value:k.end_date,onChange:e=>C((t=>(0,Ie.A)((0,Ie.A)({},t),{},{end_date:e.target.value}))),className:"px-3 py-2 border border-gray-300 rounded-md text-sm"})]})]}),0===n.length?(0,He.jsx)("p",{className:"text-gray-500 text-center py-8",children:"Nenhum agendamento no per\xedodo selecionado"}):(0,He.jsx)("div",{className:"space-y-6",children:n.map((t=>(0,He.jsxs)("div",{children:[(0,He.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-3 border-b border-gray-200 pb-2",children:new Date(t).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,He.jsx)("div",{className:"space-y-3",children:e[t].map((e=>F(e)))})]},t)))})]})})})(),"missed"===_&&(0,He.jsx)("div",{className:"space-y-6",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,He.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,He.jsx)(Hr,{icon:go,className:"mr-3 text-red-600"}),"Agendamentos Perdidos Sem Justificativa"]}),0===l.length?(0,He.jsxs)("div",{className:"text-center py-8",children:[(0,He.jsx)(Hr,{icon:Fs,className:"text-green-500 text-4xl mb-4"}),(0,He.jsx)("p",{className:"text-gray-500",children:"Nenhum agendamento perdido aguardando justificativa"})]}):(0,He.jsx)("div",{className:"space-y-3",children:l.map((e=>F(e,!0)))})]})}),"stats"===_&&(0,He.jsx)("div",{className:"space-y-6",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,He.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,He.jsx)(Hr,{icon:Ts,className:"mr-3 text-indigo-600"}),"Estat\xedsticas Pessoais (\xdaltimos 30 dias)"]}),d?(0,He.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,He.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,He.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Total de Agendamentos"}),(0,He.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:d.total_appointments||0})]}),(0,He.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,He.jsx)("h3",{className:"text-sm font-medium text-green-800 mb-2",children:"Agendamentos Realizados"}),(0,He.jsx)("p",{className:"text-2xl font-bold text-green-600",children:d.completed_appointments||0})]}),(0,He.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,He.jsx)("h3",{className:"text-sm font-medium text-red-800 mb-2",children:"Agendamentos Perdidos"}),(0,He.jsx)("p",{className:"text-2xl font-bold text-red-600",children:d.missed_appointments||0})]}),(0,He.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,He.jsx)("h3",{className:"text-sm font-medium text-purple-800 mb-2",children:"Taxa de Comparecimento"}),(0,He.jsxs)("p",{className:"text-2xl font-bold ".concat(fj(d.attendance_rate||0)),children:[d.attendance_rate||0,"%"]})]}),(0,He.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,He.jsx)("h3",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Taxa de Conclus\xe3o"}),(0,He.jsxs)("p",{className:"text-2xl font-bold ".concat(fj(d.completion_rate||0)),children:[d.completion_rate||0,"%"]})]}),(0,He.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[(0,He.jsx)("h3",{className:"text-sm font-medium text-indigo-800 mb-2",children:"Pacientes Atendidos"}),(0,He.jsx)("p",{className:"text-2xl font-bold text-indigo-600",children:d.unique_patients||0})]})]}):(0,He.jsx)("p",{className:"text-gray-500 text-center py-8",children:"Carregando estat\xedsticas..."})]})})]})]})]}),(0,He.jsx)($w,{isOpen:g,onClose:()=>{x(!1),v(null)},appointment:b,canEdit:!1,canDelete:!1}),y&&(0,He.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,He.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,He.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,He.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Justificar Aus\xeancia"}),(0,He.jsx)("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:(0,He.jsx)(Hr,{icon:Vi,className:"w-6 h-6"})})]}),(0,He.jsxs)("div",{className:"p-6",children:[(0,He.jsxs)("div",{className:"mb-4",children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Respons\xe1vel pela aus\xeancia"}),(0,He.jsxs)("select",{value:A.missed_by,onChange:e=>P((t=>(0,Ie.A)((0,Ie.A)({},t),{},{missed_by:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,He.jsx)("option",{value:"patient",children:"Paciente"}),(0,He.jsx)("option",{value:"therapist",children:"Terapeuta"}),(0,He.jsx)("option",{value:"both",children:"Ambos"}),(0,He.jsx)("option",{value:"other",children:"Outros fatores"})]})]}),(0,He.jsxs)("div",{className:"mb-6",children:[(0,He.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo da aus\xeancia *"}),(0,He.jsx)("textarea",{value:A.missed_reason,onChange:e=>P((t=>(0,Ie.A)((0,Ie.A)({},t),{},{missed_reason:e.target.value}))),rows:4,maxLength:500,placeholder:"Descreva o motivo da aus\xeancia...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 resize-none"}),(0,He.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[A.missed_reason.length,"/500 caracteres"]})]}),(0,He.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,He.jsx)("button",{onClick:()=>w(!1),disabled:L,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Cancelar"}),(0,He.jsxs)("button",{onClick:async()=>{if(A.missed_reason.trim())try{E(!0),await lj(j.id,A),await R(),await I(),w(!1),N(null),alert("Justificativa adicionada com sucesso.")}catch(f){console.error("Erro ao justificar agendamento"),alert("Erro ao adicionar justificativa. Tente novamente.")}finally{E(!1)}else alert("Por favor, forne\xe7a um motivo para a aus\xeancia.")},disabled:L||!A.missed_reason.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[L&&(0,He.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,He.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,He.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Justificar"]})]})]})]})})]})},gj=e=>{let{children:t}=e;const{user:n}=Ge();return n&&n.is_admin?t:(0,He.jsx)(pe,{to:"/",replace:!0})},xj=e=>{let{children:t}=e;const{user:n}=Ge();return n&&"super_admin"===n.role?t:(0,He.jsx)(pe,{to:"/",replace:!0})};const bj=function(){return(0,He.jsx)(Ye,{children:(0,He.jsx)(Pe,{children:(0,He.jsx)("div",{className:"bg-gray-100 min-h-screen",children:(0,He.jsxs)(ve,{children:[(0,He.jsx)(xe,{path:"/login",element:(0,He.jsx)(Po,{})}),(0,He.jsx)(xe,{path:"/super-admin",element:(0,He.jsx)(xj,{children:(0,He.jsx)(Cw,{})})}),(0,He.jsxs)(xe,{path:"/",element:(0,He.jsx)(lt,{children:(0,He.jsx)(ut,{children:(0,He.jsx)(zo,{})})}),children:[(0,He.jsx)(xe,{index:!0,element:(0,He.jsx)(Bo,{})}),(0,He.jsx)(xe,{path:"clients",element:(0,He.jsx)(Xv,{})}),(0,He.jsx)(xe,{path:"parent-dashboard",element:(0,He.jsx)(my,{})}),(0,He.jsx)(xe,{path:"colleagues",element:(0,He.jsx)(Sy,{})}),(0,He.jsx)(xe,{path:"admin",element:(0,He.jsx)(gj,{children:(0,He.jsx)(wy,{})})}),(0,He.jsx)(xe,{path:"programs",element:(0,He.jsx)(ny,{})}),(0,He.jsx)(xe,{path:"session/:assignmentId",element:(0,He.jsx)(jy,{})}),(0,He.jsx)(xe,{path:"notes",element:(0,He.jsx)(ay,{})}),(0,He.jsx)(xe,{path:"dashboard",element:(0,He.jsx)(dy,{})}),(0,He.jsx)(xe,{path:"scheduling",element:(0,He.jsx)(gj,{children:(0,He.jsx)(ej,{})})}),(0,He.jsx)(xe,{path:"my-schedule",element:(0,He.jsx)(pj,{})})]}),(0,He.jsx)(xe,{path:"*",element:(0,He.jsx)(pe,{to:"/",replace:!0})})]})})})})};s.createRoot(document.getElementById("root")).render((0,He.jsx)(a.StrictMode,{children:(0,He.jsx)(bj,{})}))})()})();
//# sourceMappingURL=main.8fd604a2.js.map