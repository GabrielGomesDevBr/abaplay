/*! For license information please see main.53cc4233.js.LICENSE.txt */
(()=>{var e={557:function(e,t,a){var s;"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof this||("undefined"!==typeof window?window:"undefined"!==typeof self?self:a.g),s=function(e){return function(){"use strict";var t={172:function(e,t){var a=this&&this.__extends||function(){var e=function(t,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},e(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function s(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.CellHookData=t.HookData=void 0;var s=function(e,t,a){this.table=t,this.pageNumber=t.pageNumber,this.pageCount=this.pageNumber,this.settings=t.settings,this.cursor=a,this.doc=e.getDocument()};t.HookData=s;var n=function(e){function t(t,a,s,n,r,i){var o=e.call(this,t,a,i)||this;return o.cell=s,o.row=n,o.column=r,o.section=n.section,o}return a(t,e),t}(s);t.CellHookData=n},340:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var s=a(4),n=a(136),r=a(744),i=a(776),o=a(664),l=a(972);t.default=function(e){e.API.autoTable=function(){for(var e,t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];1===t.length?e=t[0]:(console.error("Use of deprecated autoTable initiation"),(e=t[2]||{}).columns=t[0],e.body=t[1]);var s=(0,i.parseInput)(this,e),n=(0,l.createTable)(this,s);return(0,o.drawTable)(this,n),this},e.API.lastAutoTable=!1,e.API.previousAutoTable=!1,e.API.autoTable.previous=!1,e.API.autoTableText=function(e,t,a,s){(0,n.default)(e,t,a,s,this)},e.API.autoTableSetDefaults=function(e){return r.DocHandler.setDefaults(e,this),this},e.autoTableSetDefaults=function(e,t){r.DocHandler.setDefaults(e,t)},e.API.autoTableHtmlToJson=function(e,t){var a;if(void 0===t&&(t=!1),"undefined"===typeof window)return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n=new r.DocHandler(this),i=(0,s.parseHtml)(n,e,window,t,!1),o=i.head,l=i.body;return{columns:(null===(a=o[0])||void 0===a?void 0:a.map((function(e){return e.content})))||[],rows:l,data:l}},e.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var e=this.lastAutoTable;return e&&e.finalY?e.finalY:0},e.API.autoTableAddPageContent=function(t){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),e.API.autoTable.globalDefaults||(e.API.autoTable.globalDefaults={}),e.API.autoTable.globalDefaults.addPageContent=t,this},e.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}},136:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,s,n){s=s||{};var r=n.internal.scaleFactor,i=n.internal.getFontSize()/r,o=i*(n.getLineHeightFactor?n.getLineHeightFactor():1.15),l="",c=1;if("middle"!==s.valign&&"bottom"!==s.valign&&"center"!==s.halign&&"right"!==s.halign||(c=(l="string"===typeof e?e.split(/\r\n|\r|\n/g):e).length||1),a+=i*(2-1.15),"middle"===s.valign?a-=c/2*o:"bottom"===s.valign&&(a-=c*o),"center"===s.halign||"right"===s.halign){var d=i;if("center"===s.halign&&(d*=.5),l&&c>=1){for(var u=0;u<l.length;u++)n.text(l[u],t-n.getStringUnitWidth(l[u])*d,a),a+=o;return n}t-=n.getStringUnitWidth(e)*d}return"justify"===s.halign?n.text(e,t,a,{maxWidth:s.maxWidth||100,align:"justify"}):n.text(e,t,a),n}},420:function(e,t){function a(e,t){var a=e>0,s=t||0===t;return a&&s?"DF":a?"S":s?"F":null}function s(e,t){var a,s,n,r;if(e=e||t,Array.isArray(e)){if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(3===e.length)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(2===e.length)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e=1===e.length?e[0]:t}return"object"===typeof e?("number"===typeof e.vertical&&(e.top=e.vertical,e.bottom=e.vertical),"number"===typeof e.horizontal&&(e.right=e.horizontal,e.left=e.horizontal),{left:null!==(a=e.left)&&void 0!==a?a:t,top:null!==(s=e.top)&&void 0!==s?s:t,right:null!==(n=e.right)&&void 0!==n?n:t,bottom:null!==(r=e.bottom)&&void 0!==r?r:t}):("number"!==typeof e&&(e=t),{top:e,right:e,bottom:e,left:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.getPageAvailableWidth=t.parseSpacing=t.getFillStyle=t.addTableBorder=t.getStringWidth=void 0,t.getStringWidth=function(e,t,a){return a.applyStyles(t,!0),(Array.isArray(e)?e:[e]).map((function(e){return a.getTextWidth(e)})).reduce((function(e,t){return Math.max(e,t)}),0)},t.addTableBorder=function(e,t,s,n){var r=t.settings.tableLineWidth,i=t.settings.tableLineColor;e.applyStyles({lineWidth:r,lineColor:i});var o=a(r,!1);o&&e.rect(s.x,s.y,t.getWidth(e.pageSize().width),n.y-s.y,o)},t.getFillStyle=a,t.parseSpacing=s,t.getPageAvailableWidth=function(e,t){var a=s(t.settings.margin,0);return e.pageSize().width-(a.left+a.right)}},796:function(e,t){var a=this&&this.__extends||function(){var e=function(t,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])},e(t,a)};return function(t,a){if("function"!==typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function s(){this.constructor=t}e(t,a),t.prototype=null===a?Object.create(a):(s.prototype=a.prototype,new s)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.getTheme=t.defaultStyles=t.HtmlRowInput=void 0;var s=function(e){function t(t){var a=e.call(this)||this;return a._element=t,a}return a(t,e),t}(Array);t.HtmlRowInput=s,t.defaultStyles=function(e){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/e,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}},t.getTheme=function(e){return{striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}}[e]}},903:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.parseCss=void 0;var s=a(420);function n(e,t){var a=r(e,t);if(!a)return null;var s=a.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!s||!Array.isArray(s))return null;var n=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3])];return 0===parseInt(s[4])||isNaN(n[0])||isNaN(n[1])||isNaN(n[2])?null:n}function r(e,t){var a=t(e);return"rgba(0, 0, 0, 0)"===a||"transparent"===a||"initial"===a||"inherit"===a?null==e.parentElement?null:r(e.parentElement,t):a}t.parseCss=function(e,t,a,r,i){var o={},l=96/72,c=n(t,(function(e){return i.getComputedStyle(e).backgroundColor}));null!=c&&(o.fillColor=c);var d=n(t,(function(e){return i.getComputedStyle(e).color}));null!=d&&(o.textColor=d);var u=function(e,t){var a=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],n=96/(72/t),r=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,i=a.map((function(e){return parseInt(e||"0")/n})),o=(0,s.parseSpacing)(i,0);return r>o.top&&(o.top=r),r>o.bottom&&(o.bottom=r),o}(r,a);u&&(o.cellPadding=u);var h="borderTopColor",m=l*a,p=r.borderTopWidth;if(r.borderBottomWidth===p&&r.borderRightWidth===p&&r.borderLeftWidth===p){var f=(parseFloat(p)||0)/m;f&&(o.lineWidth=f)}else o.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/m,right:(parseFloat(r.borderRightWidth)||0)/m,bottom:(parseFloat(r.borderBottomWidth)||0)/m,left:(parseFloat(r.borderLeftWidth)||0)/m},o.lineWidth.top||(o.lineWidth.right?h="borderRightColor":o.lineWidth.bottom?h="borderBottomColor":o.lineWidth.left&&(h="borderLeftColor"));var g=n(t,(function(e){return i.getComputedStyle(e)[h]}));null!=g&&(o.lineColor=g);var x=["left","right","center","justify"];-1!==x.indexOf(r.textAlign)&&(o.halign=r.textAlign),-1!==(x=["middle","bottom","top"]).indexOf(r.verticalAlign)&&(o.valign=r.verticalAlign);var b=parseInt(r.fontSize||"");isNaN(b)||(o.fontSize=b/l);var v=function(e){var t="";return("bold"===e.fontWeight||"bolder"===e.fontWeight||parseInt(e.fontWeight)>=700)&&(t="bold"),"italic"!==e.fontStyle&&"oblique"!==e.fontStyle||(t+="italic"),t}(r);v&&(o.fontStyle=v);var y=(r.fontFamily||"").toLowerCase();return-1!==e.indexOf(y)&&(o.font=y),o}},744:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DocHandler=void 0;var a={},s=function(){function e(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(e,t){void 0===t&&(t=null),t?t.__autoTableDocumentDefaults=e:a=e},e.unifyColor=function(e){return Array.isArray(e)?e:"number"===typeof e?[e,e,e]:"string"===typeof e?[e]:null},e.prototype.applyStyles=function(t,a){var s,n,r;void 0===a&&(a=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i=this.jsPDFDocument.internal.getFont(),o=i.fontStyle,l=i.fontName;if(t.font&&(l=t.font),t.fontStyle){o=t.fontStyle;var c=this.getFontList()[l];c&&-1===c.indexOf(o)&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(c[0]),o=c[0])}if(this.jsPDFDocument.setFont(l,o),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!a){var d=e.unifyColor(t.fillColor);d&&(s=this.jsPDFDocument).setFillColor.apply(s,d),(d=e.unifyColor(t.textColor))&&(n=this.jsPDFDocument).setTextColor.apply(n,d),(d=e.unifyColor(t.lineColor))&&(r=this.jsPDFDocument).setDrawColor.apply(r,d),"number"===typeof t.lineWidth&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(e,t,a){return this.jsPDFDocument.splitTextToSize(e,t,a)},e.prototype.rect=function(e,t,a,s,n){return this.jsPDFDocument.rect(e,t,a,s,n)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return a||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return null==e.width&&(e={width:e.getWidth(),height:e.getHeight()}),e},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}();t.DocHandler=s},4:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.parseHtml=void 0;var s=a(903),n=a(796);function r(e,t,a,r,o,l){for(var c=new n.HtmlRowInput(r),d=0;d<r.cells.length;d++){var u=r.cells[d],h=a.getComputedStyle(u);if(o||"none"!==h.display){var m=void 0;l&&(m=(0,s.parseCss)(e,u,t,h,a)),c.push({rowSpan:u.rowSpan,colSpan:u.colSpan,styles:m,_element:u,content:i(u)})}}var p=a.getComputedStyle(r);if(c.length>0&&(o||"none"!==p.display))return c}function i(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map((function(e){return e.trim()})).join("\n"),t.innerText||t.textContent||""}t.parseHtml=function(e,t,a,s,n){var i,o,l;void 0===s&&(s=!1),void 0===n&&(n=!1),l="string"===typeof t?a.document.querySelector(t):t;var c=Object.keys(e.getFontList()),d=e.scaleFactor(),u=[],h=[],m=[];if(!l)return console.error("Html table could not be found with input: ",t),{head:u,body:h,foot:m};for(var p=0;p<l.rows.length;p++){var f=l.rows[p],g=null===(o=null===(i=null===f||void 0===f?void 0:f.parentElement)||void 0===i?void 0:i.tagName)||void 0===o?void 0:o.toLowerCase(),x=r(c,d,a,f,s,n);x&&("thead"===g?u.push(x):"tfoot"===g?m.push(x):h.push(x))}return{head:u,body:h,foot:m}}},776:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.parseInput=void 0;var s=a(4),n=a(356),r=a(420),i=a(744),o=a(792);t.parseInput=function(e,t){var a=new i.DocHandler(e),l=a.getDocumentOptions(),c=a.getGlobalOptions();(0,o.default)(a,c,l,t);var d,u=(0,n.assign)({},c,l,t);"undefined"!==typeof window&&(d=window);var h=function(e,t,a){for(var s={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},r=function(r){if("columnStyles"===r){var i=e[r],o=t[r],l=a[r];s.columnStyles=(0,n.assign)({},i,o,l)}else{var c=[e,t,a].map((function(e){return e[r]||{}}));s[r]=(0,n.assign)({},c[0],c[1],c[2])}},i=0,o=Object.keys(s);i<o.length;i++)r(o[i]);return s}(c,l,t),m=function(e,t,a){for(var s={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},n=0,r=[e,t,a];n<r.length;n++){var i=r[n];i.didParseCell&&s.didParseCell.push(i.didParseCell),i.willDrawCell&&s.willDrawCell.push(i.willDrawCell),i.didDrawCell&&s.didDrawCell.push(i.didDrawCell),i.willDrawPage&&s.willDrawPage.push(i.willDrawPage),i.didDrawPage&&s.didDrawPage.push(i.didDrawPage)}return s}(c,l,t),p=function(e,t){var a,s,n,i,o,l,c,d,u,h,m,p,f,g,x=(0,r.parseSpacing)(t.margin,40/e.scaleFactor()),b=null!==(a=function(e,t){var a=e.getLastAutoTable(),s=e.scaleFactor(),n=e.pageNumber(),r=!1;return a&&a.startPageNumber&&(r=a.startPageNumber+a.pageNumber-1===n),"number"===typeof t?t:null!=t&&!1!==t||!r||null==(null===a||void 0===a?void 0:a.finalY)?null:a.finalY+20/s}(e,t.startY))&&void 0!==a?a:x.top;f=!0===t.showFoot?"everyPage":!1===t.showFoot?"never":null!==(s=t.showFoot)&&void 0!==s?s:"everyPage",g=!0===t.showHead?"everyPage":!1===t.showHead?"never":null!==(n=t.showHead)&&void 0!==n?n:"everyPage";var v=null!==(i=t.useCss)&&void 0!==i&&i,y=t.theme||(v?"plain":"striped"),j=!!t.horizontalPageBreak,N=null!==(o=t.horizontalPageBreakRepeat)&&void 0!==o?o:null;return{includeHiddenHtml:null!==(l=t.includeHiddenHtml)&&void 0!==l&&l,useCss:v,theme:y,startY:b,margin:x,pageBreak:null!==(c=t.pageBreak)&&void 0!==c?c:"auto",rowPageBreak:null!==(d=t.rowPageBreak)&&void 0!==d?d:"auto",tableWidth:null!==(u=t.tableWidth)&&void 0!==u?u:"auto",showHead:g,showFoot:f,tableLineWidth:null!==(h=t.tableLineWidth)&&void 0!==h?h:0,tableLineColor:null!==(m=t.tableLineColor)&&void 0!==m?m:200,horizontalPageBreak:j,horizontalPageBreakRepeat:N,horizontalPageBreakBehaviour:null!==(p=t.horizontalPageBreakBehaviour)&&void 0!==p?p:"afterAllRows"}}(a,u),f=function(e,t,a){var n=t.head||[],r=t.body||[],i=t.foot||[];if(t.html){var o=t.includeHiddenHtml;if(a){var l=(0,s.parseHtml)(e,t.html,a,o,t.useCss)||{};n=l.head||n,r=l.body||n,i=l.foot||n}else console.error("Cannot parse html in non browser environment")}var c=t.columns||function(e,t,a){var s=e[0]||t[0]||a[0]||[],n=[];return Object.keys(s).filter((function(e){return"_element"!==e})).forEach((function(e){var t,a=1;"object"!==typeof(t=Array.isArray(s)?s[parseInt(e)]:s[e])||Array.isArray(t)||(a=(null===t||void 0===t?void 0:t.colSpan)||1);for(var r=0;r<a;r++){var i={dataKey:Array.isArray(s)?n.length:e+(r>0?"_".concat(r):"")};n.push(i)}})),n}(n,r,i);return{columns:c,head:n,body:r,foot:i}}(a,u,d);return{id:t.tableId,content:f,hooks:m,styles:h,settings:p}}},792:function(e,t){function a(e){e.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),e.minCellHeight||(e.minCellHeight=e.rowHeight)):e.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),e.cellWidth||(e.cellWidth=e.columnWidth))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,s,n){for(var r=function(t){t&&"object"!==typeof t&&console.error("The options parameter should be of type object, is: "+typeof t),"undefined"!==typeof t.extendWidth&&(t.tableWidth=t.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),"undefined"!==typeof t.margins&&("undefined"===typeof t.margin&&(t.margin=t.margins),console.error("Use of deprecated option: margins, use margin instead.")),t.startY&&"number"!==typeof t.startY&&(console.error("Invalid value for startY option",t.startY),delete t.startY),!t.didDrawPage&&(t.afterPageContent||t.beforePageContent||t.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),t.didDrawPage=function(a){e.applyStyles(e.userStyles),t.beforePageContent&&t.beforePageContent(a),e.applyStyles(e.userStyles),t.afterPageContent&&t.afterPageContent(a),e.applyStyles(e.userStyles),t.afterPageAdd&&a.pageNumber>1&&a.afterPageAdd(a),e.applyStyles(e.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach((function(e){t[e]&&console.error('The "'.concat(e,'" hook has changed in version 3.0, check the changelog for how to migrate.'))})),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach((function(e){var a=e[0],s=e[1];t[s]&&(console.error("Use of deprecated option ".concat(s,". Use ").concat(a," instead")),t[a]=t[s])})),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach((function(e){var a="string"===typeof e?e:e[0],s="string"===typeof e?e:e[1];"undefined"!==typeof t[a]&&("undefined"===typeof t.styles[s]&&(t.styles[s]=t[a]),console.error("Use of deprecated option: "+a+", use the style "+s+" instead."))}));for(var s=0,n=["styles","bodyStyles","headStyles","footStyles"];s<n.length;s++)a(t[n[s]]||{});for(var r=t.columnStyles||{},i=0,o=Object.keys(r);i<o.length;i++)a(r[o[i]]||{})},i=0,o=[t,s,n];i<o.length;i++)r(o[i])}},260:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.Column=t.Cell=t.Row=t.Table=void 0;var s=a(796),n=a(172),r=a(420),i=function(){function e(e,t){this.pageNumber=1,this.pageCount=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return e.prototype.getHeadHeight=function(e){return this.head.reduce((function(t,a){return t+a.getMaxCellHeight(e)}),0)},e.prototype.getFootHeight=function(e){return this.foot.reduce((function(t,a){return t+a.getMaxCellHeight(e)}),0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(e,t,a,s,r,i){for(var o=0,l=t;o<l.length;o++){var c=!1===(0,l[o])(new n.CellHookData(e,this,a,s,r,i));if(a.text=Array.isArray(a.text)?a.text:[a.text],c)return!1}return!0},e.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var a=0,s=this.hooks.didDrawPage;a<s.length;a++)(0,s[a])(new n.HookData(e,this,t))},e.prototype.callWillDrawPageHooks=function(e,t){for(var a=0,s=this.hooks.willDrawPage;a<s.length;a++)(0,s[a])(new n.HookData(e,this,t))},e.prototype.getWidth=function(e){if("number"===typeof this.settings.tableWidth)return this.settings.tableWidth;if("wrap"===this.settings.tableWidth)return this.columns.reduce((function(e,t){return e+t.wrappedWidth}),0);var t=this.settings.margin;return e-t.left-t.right},e}();t.Table=i;var o=function(){function e(e,t,a,n,r){void 0===r&&(r=!1),this.height=0,this.raw=e,e instanceof s.HtmlRowInput&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=a,this.cells=n,this.spansMultiplePages=r}return e.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce((function(e,a){var s;return Math.max(e,(null===(s=t.cells[a.index])||void 0===s?void 0:s.height)||0)}),0)},e.prototype.hasRowSpan=function(e){var t=this;return e.filter((function(e){var a=t.cells[e.index];return!!a&&a.rowSpan>1})).length>0},e.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},e.prototype.getMinimumRowHeight=function(e,t){var a=this;return e.reduce((function(e,s){var n=a.cells[s.index];if(!n)return 0;var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical")+r;return i>e?i:e}),0)},e}();t.Row=o;var l=function(){function e(e,t,a){var s,n;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=a,this.raw=e;var r=e;null==e||"object"!==typeof e||Array.isArray(e)?(this.rowSpan=1,this.colSpan=1):(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,r=null!==(n=null!==(s=e.content)&&void 0!==s?s:e.title)&&void 0!==n?n:e,e._element&&(this.raw=e._element));var i=null!=r?""+r:"";this.text=i.split(/\r\n|\r|\n/g)}return e.prototype.getTextPos=function(){var e,t;if("top"===this.styles.valign)e=this.y+this.padding("top");else if("bottom"===this.styles.valign)e=this.y+this.height-this.padding("bottom");else{var a=this.height-this.padding("vertical");e=this.y+a/2+this.padding("top")}if("right"===this.styles.halign)t=this.x+this.width-this.padding("right");else if("center"===this.styles.halign){var s=this.width-this.padding("horizontal");t=this.x+s/2+this.padding("left")}else t=this.x+this.padding("left");return{x:t,y:e}},e.prototype.getContentHeight=function(e,t){void 0===t&&(t=1.15);var a=(Array.isArray(this.text)?this.text.length:1)*(this.styles.fontSize/e*t)+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},e.prototype.padding=function(e){var t=(0,r.parseSpacing)(this.styles.cellPadding,0);return"vertical"===e?t.top+t.bottom:"horizontal"===e?t.left+t.right:t[e]},e}();t.Cell=l;var c=function(){function e(e,t,a){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=a}return e.prototype.getMaxCustomCellWidth=function(e){for(var t=0,a=0,s=e.allRows();a<s.length;a++){var n=s[a].cells[this.index];n&&"number"===typeof n.styles.cellWidth&&(t=Math.max(t,n.styles.cellWidth))}return t},e}();t.Column=c},356:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.assign=void 0,t.assign=function(e,t,a,s,n){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(r[l]=o[l])}return r}},972:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.createTable=void 0;var s=a(744),n=a(260),r=a(324),i=a(796),o=a(356);function l(e,t,a,s,r,i){var o={};return t.map((function(t,l){for(var c=0,u={},h=0,m=0,p=0,f=a;p<f.length;p++){var g=f[p];if(null==o[g.index]||0===o[g.index].left)if(0===m){var x=void 0,b={};"object"!==typeof(x=Array.isArray(t)?t[g.index-h-c]:t[g.dataKey])||Array.isArray(x)||(b=(null===x||void 0===x?void 0:x.styles)||{});var v=d(e,g,l,r,s,i,b),y=new n.Cell(x,v,e);u[g.dataKey]=y,u[g.index]=y,m=y.colSpan-1,o[g.index]={left:y.rowSpan-1,times:m}}else m--,h++;else o[g.index].left--,m=o[g.index].times,c++}return new n.Row(t,l,e,u)}))}function c(e,t){var a={};return e.forEach((function(e){if(null!=e.raw){var s=function(e,t){if("head"===e){if("object"===typeof t)return t.header||t.title||null;if("string"===typeof t||"number"===typeof t)return t}else if("foot"===e&&"object"===typeof t)return t.footer;return null}(t,e.raw);null!=s&&(a[e.dataKey]=s)}})),Object.keys(a).length>0?a:null}function d(e,t,a,s,n,r,l){var c,d=(0,i.getTheme)(s);"head"===e?c=n.headStyles:"body"===e?c=n.bodyStyles:"foot"===e&&(c=n.footStyles);var u=(0,o.assign)({},d.table,d[e],n.styles,c),h=n.columnStyles[t.dataKey]||n.columnStyles[t.index]||{},m="body"===e?h:{},p="body"===e&&a%2===0?(0,o.assign)({},d.alternateRow,n.alternateRowStyles):{},f=(0,i.defaultStyles)(r),g=(0,o.assign)({},f,u,p,m);return(0,o.assign)(g,l)}t.createTable=function(e,t){var a=new s.DocHandler(e),i=function(e,t){var a,s=e.content,r=function(e){return e.map((function(e,t){var a,s,r;return r="object"===typeof e&&null!==(s=null!==(a=e.dataKey)&&void 0!==a?a:e.key)&&void 0!==s?s:t,new n.Column(r,e,t)}))}(s.columns);(0===s.head.length&&(a=c(r,"head"))&&s.head.push(a),0===s.foot.length)&&((a=c(r,"foot"))&&s.foot.push(a));var i=e.settings.theme,o=e.styles;return{columns:r,head:l("head",s.head,r,o,i,t),body:l("body",s.body,r,o,i,t),foot:l("foot",s.foot,r,o,i,t)}}(t,a.scaleFactor()),o=new n.Table(t,i);return(0,r.calculateWidths)(a,o),a.applyStyles(a.userStyles),o}},664:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.addPage=t.drawTable=void 0;var s=a(420),n=a(260),r=a(744),i=a(356),o=a(136),l=a(224);function c(e,t,a,s){var n=t.settings;e.applyStyles(e.userStyles),"firstPage"!==n.showHead&&"everyPage"!==n.showHead||t.head.forEach((function(n){return p(e,t,n,a,s)}))}function d(e,t,a,s,n,r){e.applyStyles(e.userStyles),r=null!==r&&void 0!==r?r:t.body.length;var i=Math.min(a+r,t.body.length),o=-1;return t.body.slice(a,i).forEach((function(r,i){var l=a+i===t.body.length-1,c=g(e,t,l,s);r.canEntireRowFit(c,n)&&(p(e,t,r,s,n),o=a+i)})),o}function u(e,t,a,s){var n=t.settings;e.applyStyles(e.userStyles),"lastPage"!==n.showFoot&&"everyPage"!==n.showFoot||t.foot.forEach((function(n){return p(e,t,n,a,s)}))}function h(e,t,a){var s=a.getLineHeight(e.styles.fontSize),n=e.padding("vertical"),r=Math.floor((t-n)/s);return Math.max(0,r)}function m(e,t,a,s,r,o,l){var c=g(e,t,s,o);if(a.canEntireRowFit(c,l))p(e,t,a,o,l);else if(function(e,t,a,s){var n=e.pageSize().height,r=s.settings.margin,i=n-(r.top+r.bottom);"body"===t.section&&(i-=s.getHeadHeight(s.columns)+s.getFootHeight(s.columns));var o=t.getMinimumRowHeight(s.columns,e),l=o<a;if(o>i)return console.error("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!l)return!1;var c=t.hasRowSpan(s.columns);return t.getMaxCellHeight(s.columns)>i?(c&&console.error("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!c&&"avoid"!==s.settings.rowPageBreak}(e,a,c,t)){var d=function(e,t,a,s){var r={};e.spansMultiplePages=!0,e.height=0;for(var o=0,l=0,c=a.columns;l<c.length;l++){var d=c[l];if(v=e.cells[d.index]){Array.isArray(v.text)||(v.text=[v.text]);var u=new n.Cell(v.raw,v.styles,v.section);(u=(0,i.assign)(u,v)).text=[];var m=h(v,t,s);v.text.length>m&&(u.text=v.text.splice(m,v.text.length));var p=s.scaleFactor(),f=s.getLineHeightFactor();v.contentHeight=v.getContentHeight(p,f),v.contentHeight>=t&&(v.contentHeight=t,u.styles.minCellHeight-=t),v.contentHeight>e.height&&(e.height=v.contentHeight),u.contentHeight=u.getContentHeight(p,f),u.contentHeight>o&&(o=u.contentHeight),r[d.index]=u}}var g=new n.Row(e.raw,-1,e.section,r,!0);g.height=o;for(var x=0,b=a.columns;x<b.length;x++){var v;d=b[x],(u=g.cells[d.index])&&(u.height=g.height),(v=e.cells[d.index])&&(v.height=e.height)}return g}(a,c,t,e);p(e,t,a,o,l),x(e,t,r,o,l),m(e,t,d,s,r,o,l)}else x(e,t,r,o,l),m(e,t,a,s,r,o,l)}function p(e,t,a,s,n){s.x=t.settings.margin.left;for(var r=0,i=n;r<i.length;r++){var l=i[r],c=a.cells[l.index];if(c)if(e.applyStyles(c.styles),c.x=s.x,c.y=s.y,!1!==t.callCellHooks(e,t.hooks.willDrawCell,c,a,l,s)){f(e,c,s);var d=c.getTextPos();(0,o.default)(c.text,d.x,d.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,c,a,l,s),s.x+=l.width}else s.x+=l.width;else s.x+=l.width}s.y+=a.height}function f(e,t,a){var n=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),"number"===typeof n.lineWidth){var r=(0,s.getFillStyle)(n.lineWidth,n.fillColor);r&&e.rect(t.x,a.y,t.width,t.height,r)}else"object"===typeof n.lineWidth&&(n.fillColor&&e.rect(t.x,a.y,t.width,t.height,"F"),function(e,t,a,s){var n,r,i,o;function l(t,a,s,n,r){e.getDocument().setLineWidth(t),e.getDocument().line(a,s,n,r,"S")}s.top&&(n=a.x,r=a.y,i=a.x+t.width,o=a.y,s.right&&(i+=.5*s.right),s.left&&(n-=.5*s.left),l(s.top,n,r,i,o)),s.bottom&&(n=a.x,r=a.y+t.height,i=a.x+t.width,o=a.y+t.height,s.right&&(i+=.5*s.right),s.left&&(n-=.5*s.left),l(s.bottom,n,r,i,o)),s.left&&(n=a.x,r=a.y,i=a.x,o=a.y+t.height,s.top&&(r-=.5*s.top),s.bottom&&(o+=.5*s.bottom),l(s.left,n,r,i,o)),s.right&&(n=a.x+t.width,r=a.y,i=a.x+t.width,o=a.y+t.height,s.top&&(r-=.5*s.top),s.bottom&&(o+=.5*s.bottom),l(s.right,n,r,i,o))}(e,t,a,n.lineWidth))}function g(e,t,a,s){var n=t.settings.margin.bottom,r=t.settings.showFoot;return("everyPage"===r||"lastPage"===r&&a)&&(n+=t.getFootHeight(t.columns)),e.pageSize().height-s.y-n}function x(e,t,a,n,r,i){void 0===r&&(r=[]),void 0===i&&(i=!1),e.applyStyles(e.userStyles),"everyPage"!==t.settings.showFoot||i||t.foot.forEach((function(a){return p(e,t,a,n,r)})),t.callEndPageHooks(e,n);var o=t.settings.margin;(0,s.addTableBorder)(e,t,a,n),b(e),t.pageNumber++,t.pageCount++,n.x=o.left,n.y=o.top,a.y=o.top,t.callWillDrawPageHooks(e,n),"everyPage"===t.settings.showHead&&(t.head.forEach((function(a){return p(e,t,a,n,r)})),e.applyStyles(e.userStyles))}function b(e){var t=e.pageNumber();return e.setPage(t+1),e.pageNumber()===t&&(e.addPage(),!0)}t.drawTable=function(e,t){var a=t.settings,n=a.startY,o=a.margin,h={x:o.left,y:n},f=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),g=n+o.bottom+f;"avoid"===a.pageBreak&&(g+=t.body.reduce((function(e,t){return e+t.height}),0));var v=new r.DocHandler(e);("always"===a.pageBreak||null!=a.startY&&g>v.pageSize().height)&&(b(v),h.y=o.top),t.callWillDrawPageHooks(v,h);var y=(0,i.assign)({},h);t.startPageNumber=v.pageNumber(),a.horizontalPageBreak?function(e,t,a,s){var n=(0,l.calculateAllColumnsCanFitInPage)(e,t),r=t.settings;if("afterAllRows"===r.horizontalPageBreakBehaviour)n.forEach((function(n,r){e.applyStyles(e.userStyles),r>0?x(e,t,a,s,n.columns,!0):c(e,t,s,n.columns),function(e,t,a,s,n){e.applyStyles(e.userStyles),t.body.forEach((function(r,i){var o=i===t.body.length-1;m(e,t,r,o,a,s,n)}))}(e,t,a,s,n.columns),u(e,t,s,n.columns)}));else for(var i=-1,o=n[0],h=function(){var r=i;if(o){e.applyStyles(e.userStyles);var l=o.columns;i>=0?x(e,t,a,s,l,!0):c(e,t,s,l),r=d(e,t,i+1,s,l),u(e,t,s,l)}var h=r-i;n.slice(1).forEach((function(n){e.applyStyles(e.userStyles),x(e,t,a,s,n.columns,!0),d(e,t,i+1,s,n.columns,h),u(e,t,s,n.columns)})),i=r};i<t.body.length-1;)h()}(v,t,y,h):(v.applyStyles(v.userStyles),"firstPage"!==a.showHead&&"everyPage"!==a.showHead||t.head.forEach((function(e){return p(v,t,e,h,t.columns)})),v.applyStyles(v.userStyles),t.body.forEach((function(e,a){var s=a===t.body.length-1;m(v,t,e,s,y,h,t.columns)})),v.applyStyles(v.userStyles),"lastPage"!==a.showFoot&&"everyPage"!==a.showFoot||t.foot.forEach((function(e){return p(v,t,e,h,t.columns)}))),(0,s.addTableBorder)(v,t,y,h),t.callEndPageHooks(v,h),t.finalY=h.y,e.lastAutoTable=t,e.previousAutoTable=t,e.autoTable&&(e.autoTable.previous=t),v.applyStyles(v.userStyles)},t.addPage=x},224:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateAllColumnsCanFitInPage=void 0;var s=a(420);function n(e,t,a){var n;void 0===a&&(a={});var r=(0,s.getPageAvailableWidth)(e,t),i=new Map,o=[],l=[],c=[];t.settings.horizontalPageBreakRepeat,Array.isArray(t.settings.horizontalPageBreakRepeat)?c=t.settings.horizontalPageBreakRepeat:"string"!==typeof t.settings.horizontalPageBreakRepeat&&"number"!==typeof t.settings.horizontalPageBreakRepeat||(c=[t.settings.horizontalPageBreakRepeat]),c.forEach((function(e){var a=t.columns.find((function(t){return t.dataKey===e||t.index===e}));a&&!i.has(a.index)&&(i.set(a.index,!0),o.push(a.index),l.push(t.columns[a.index]),r-=a.wrappedWidth)}));for(var d=!0,u=null!==(n=null===a||void 0===a?void 0:a.start)&&void 0!==n?n:0;u<t.columns.length;)if(i.has(u))u++;else{var h=t.columns[u].wrappedWidth;if(!(d||r>=h))break;d=!1,o.push(u),l.push(t.columns[u]),r-=h,u++}return{colIndexes:o,columns:l,lastIndex:u-1}}t.calculateAllColumnsCanFitInPage=function(e,t){for(var a=[],s=0;s<t.columns.length;s++){var r=n(e,t,{start:s});r.columns.length&&(a.push(r),s=r.lastIndex)}return a}},324:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.ellipsize=t.resizeColumns=t.calculateWidths=void 0;var s=a(420);function n(e,t,a){for(var s=t,r=e.reduce((function(e,t){return e+t.wrappedWidth}),0),i=0;i<e.length;i++){var o=e[i],l=s*(o.wrappedWidth/r),c=o.width+l,d=a(o),u=c<d?d:c;t-=u-o.width,o.width=u}if(t=Math.round(1e10*t)/1e10){var h=e.filter((function(e){return!(t<0)||e.width>a(e)}));h.length&&(t=n(h,t,a))}return t}function r(e,t,a,n,r){return e.map((function(e){return function(e,t,a,n,r){var i=1e4*n.scaleFactor();if((t=Math.ceil(t*i)/i)>=(0,s.getStringWidth)(e,a,n))return e;for(;t<(0,s.getStringWidth)(e+r,a,n)&&!(e.length<=1);)e=e.substring(0,e.length-1);return e.trim()+r}(e,t,a,n,r)}))}t.calculateWidths=function(e,t){!function(e,t){var a=e.scaleFactor(),n=t.settings.horizontalPageBreak,r=(0,s.getPageAvailableWidth)(e,t);t.allRows().forEach((function(i){for(var o=0,l=t.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){var u=t.hooks.didParseCell;t.callCellHooks(e,u,d,i,c,null);var h=d.padding("horizontal");d.contentWidth=(0,s.getStringWidth)(d.text,d.styles,e)+h;var m=(0,s.getStringWidth)(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,e);if(d.minReadableWidth=m+d.padding("horizontal"),"number"===typeof d.styles.cellWidth)d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if("wrap"===d.styles.cellWidth||!0===n)d.contentWidth>r?(d.minWidth=r,d.wrappedWidth=r):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var p=10/a;d.minWidth=d.styles.minCellWidth||p,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}})),t.allRows().forEach((function(e){for(var a=0,s=t.columns;a<s.length;a++){var n=s[a],r=e.cells[n.index];if(r&&1===r.colSpan)n.wrappedWidth=Math.max(n.wrappedWidth,r.wrappedWidth),n.minWidth=Math.max(n.minWidth,r.minWidth),n.minReadableWidth=Math.max(n.minReadableWidth,r.minReadableWidth);else{var i=t.styles.columnStyles[n.dataKey]||t.styles.columnStyles[n.index]||{},o=i.cellWidth||i.minCellWidth;o&&"number"===typeof o&&(n.minWidth=o,n.wrappedWidth=o)}r&&(r.colSpan>1&&!n.minWidth&&(n.minWidth=r.minWidth),r.colSpan>1&&!n.wrappedWidth&&(n.wrappedWidth=r.minWidth))}}))}(e,t);var a=[],i=0;t.columns.forEach((function(e){var s=e.getMaxCustomCellWidth(t);s?e.width=s:(e.width=e.wrappedWidth,a.push(e)),i+=e.width}));var o=t.getWidth(e.pageSize().width)-i;o&&(o=n(a,o,(function(e){return Math.max(e.minReadableWidth,e.minWidth)}))),o&&(o=n(a,o,(function(e){return e.minWidth}))),o=Math.abs(o),!t.settings.horizontalPageBreak&&o>.1/e.scaleFactor()&&(o=o<1?o:Math.round(o),console.warn("Of the table content, ".concat(o," units width could not fit page"))),function(e){for(var t=e.allRows(),a=0;a<t.length;a++)for(var s=t[a],n=null,r=0,i=0,o=0;o<e.columns.length;o++){var l=e.columns[o];if((i-=1)>1&&e.columns[o+1])r+=l.width,delete s.cells[l.index];else if(n){var c=n;delete s.cells[l.index],n=null,c.width=l.width+r}else{if(!(c=s.cells[l.index]))continue;if(i=c.colSpan,r=0,c.colSpan>1){n=c,r+=l.width;continue}c.width=l.width+r}}}(t),function(e,t){for(var a={count:0,height:0},s=0,n=e.allRows();s<n.length;s++){for(var i=n[s],o=0,l=e.columns;o<l.length;o++){var c=l[o],d=i.cells[c.index];if(d){t.applyStyles(d.styles,!0);var u=d.width-d.padding("horizontal");if("linebreak"===d.styles.overflow)d.text=t.splitTextToSize(d.text,u+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if("ellipsize"===d.styles.overflow)d.text=r(d.text,u,d.styles,t,"...");else if("hidden"===d.styles.overflow)d.text=r(d.text,u,d.styles,t,"");else if("function"===typeof d.styles.overflow){var h=d.styles.overflow(d.text,u);d.text="string"===typeof h?[h]:h}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var m=d.contentHeight/d.rowSpan;d.rowSpan>1&&a.count*a.height<m*d.rowSpan?a={height:m,count:d.rowSpan}:a&&a.count>0&&a.height>m&&(m=a.height),m>i.height&&(i.height=m)}}a.count--}}(t,e),function(e){for(var t={},a=1,s=e.allRows(),n=0;n<s.length;n++)for(var r=s[n],i=0,o=e.columns;i<o.length;i++){var l=o[i],c=t[l.index];if(a>1)a--,delete r.cells[l.index];else if(c)c.cell.height+=r.height,a=c.cell.colSpan,delete r.cells[l.index],c.left--,c.left<=1&&delete t[l.index];else{var d=r.cells[l.index];if(!d)continue;if(d.height=r.height,d.rowSpan>1){var u=s.length-n,h=d.rowSpan>u?u:d.rowSpan;t[l.index]={cell:d,left:h,row:r}}}}}(t)},t.resizeColumns=n,t.ellipsize=r},964:function(t){if("undefined"===typeof e){var a=new Error("Cannot find module 'undefined'");throw a.code="MODULE_NOT_FOUND",a}t.exports=e}},a={};function s(e){var n=a[e];if(void 0!==n)return n.exports;var r=a[e]={exports:{}};return t[e].call(r.exports,r,r.exports,s),r.exports}var n={};return function(){var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.Cell=e.Column=e.Row=e.Table=e.CellHookData=e.__drawTable=e.__createTable=e.applyPlugin=void 0;var t=s(340),a=s(776),r=s(664),i=s(972),o=s(260);Object.defineProperty(e,"Table",{enumerable:!0,get:function(){return o.Table}});var l=s(172);Object.defineProperty(e,"CellHookData",{enumerable:!0,get:function(){return l.CellHookData}});var c=s(260);function d(e){(0,t.default)(e)}Object.defineProperty(e,"Cell",{enumerable:!0,get:function(){return c.Cell}}),Object.defineProperty(e,"Column",{enumerable:!0,get:function(){return c.Column}}),Object.defineProperty(e,"Row",{enumerable:!0,get:function(){return c.Row}}),e.applyPlugin=d,e.__createTable=function(e,t){var s=(0,a.parseInput)(e,t);return(0,i.createTable)(e,s)},e.__drawTable=function(e,t){(0,r.drawTable)(e,t)};try{var u=s(964);u.jsPDF&&(u=u.jsPDF),d(u)}catch(h){}e.default=function(e,t){var s=(0,a.parseInput)(e,t),n=(0,i.createTable)(e,s);(0,r.drawTable)(e,n)}}(),n}()},e.exports=s(function(){try{return a(7762)}catch(e){}}())},579:(e,t,a)=>{"use strict";e.exports=a(1153)},1153:(e,t,a)=>{"use strict";var s=a(5043),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,a){var s,r={},c=null,d=null;for(s in void 0!==a&&(c=""+a),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,s)&&!l.hasOwnProperty(s)&&(r[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===r[s]&&(r[s]=t[s]);return{$$typeof:n,type:e,key:c,ref:d,props:r,_owner:o.current}}t.Fragment=r,t.jsx=c,t.jsxs=c},1487:(e,t,a)=>{"use strict";a.d(t,{O9:()=>u,Ow:()=>d,VU:()=>b,VX:()=>v,getPatientProgramsGrade:()=>c,getProgramById:()=>l,lF:()=>h,og:()=>f,pF:()=>i,rx:()=>g,sp:()=>o,uc:()=>x,v2:()=>m,xT:()=>p});var s=a(9722),n=a(3488);const r=s.A.create({baseURL:n.H});r.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e)));const i=async()=>{try{return(await r.get("/programs")).data}catch(e){throw console.error("Erro ao carregar programas"),e}},o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const a={search:e};t&&(a.discipline=t);return(await r.get("/programs",{params:a})).data}catch(a){throw console.error("Erro ao buscar programas:",a),a}},l=async e=>{try{return(await r.get("/programs/".concat(e))).data}catch(t){throw console.error("Erro ao carregar programa"),t}},c=async e=>{try{return(await r.get("/programs/patient/".concat(e,"/grade"))).data}catch(t){throw t}},d=async e=>{try{return(await r.get("/assignments/".concat(e))).data}catch(t){throw t}},u=async()=>{try{return(await r.get("/assignments/prompt-levels")).data}catch(e){throw console.error("Erro ao buscar n\xedveis de prompting:",e),e}},h=async e=>{try{return(await r.post("/assignments/progress",e)).data}catch(t){throw t}},m=async e=>{try{return(await r.get("/assignments/".concat(e,"/progress"))).data}catch(t){throw t}},p=async(e,t)=>{try{return(await r.patch("/assignments/".concat(e,"/status"),{status:t})).data}catch(a){throw a}},f=async e=>{try{return(await r.post("/programs/custom",e)).data}catch(t){throw console.error("Erro ao criar programa customizado:",t),t}},g=async()=>{try{return(await r.get("/programs/custom")).data}catch(e){throw console.error("Erro ao buscar programas customizados:",e),e}},x=async()=>{try{return(await r.get("/programs/hierarchy")).data}catch(e){throw console.error("Erro ao buscar hierarquia de disciplinas:",e),e}},b=async(e,t)=>{try{return(await r.put("/programs/".concat(e),t)).data}catch(a){throw console.error("Erro ao atualizar programa customizado:",a),a}},v=async e=>{try{return(await r.delete("/programs/".concat(e))).data}catch(t){throw console.error("Erro ao remover programa customizado:",t),t}}},1497:(e,t,a)=>{"use strict";var s=a(3218);function n(){}function r(){}r.resetWarningCache=n,e.exports=function(){function e(e,t,a,n,r,i){if(i!==s){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:r,resetWarningCache:n};return a.PropTypes=a,a}},1971:(e,t,a)=>{"use strict";a.d(t,{J5:()=>h,Lr:()=>m,XQ:()=>u,generatePatientRegistrationPDF:()=>p,nR:()=>d});var s=a(9379),n=a(7762),r=a(557),i=a.n(r),o=a(5351),l=a(2154);const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long";if(!e)return"N\xe3o informado";try{const a=new Date(e),s=6e4*a.getTimezoneOffset(),n=new Date(a.getTime()+s);return"short"===t?n.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}):n.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(a){return e.split("T")[0]||"Data inv\xe1lida"}},d=async e=>{if(e)try{const{getPatientProgramsGrade:t}=await Promise.resolve().then(a.bind(a,1487)),s=await t(e.id);if(0===Object.keys(s).length)return void alert("Nenhum programa ativo para gerar a Grade.");const r=new n.default({orientation:"portrait",unit:"mm",format:"a4"}),i=15,o=r.internal.pageSize.getWidth(),l=o-2*i;let d=i+10,u=1;const h=e=>{r.setFontSize(8),r.setTextColor(100);const t="P\xe1gina ".concat(e);r.text(t,o/2,r.internal.pageSize.getHeight()-i/2,{align:"center"}),r.text("Gerado em: ".concat(c((new Date).toISOString())),i,r.internal.pageSize.getHeight()-i/2),r.setTextColor(0)},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;return e>r.internal.pageSize.getHeight()-i-t?(h(u),r.addPage(),u++,i+10):e};r.setFontSize(16),r.setFont("helvetica","bold"),r.text("Grade de Programas Ativos - ".concat(e.name),o/2,d,{align:"center"}),d+=8,r.setFontSize(10),r.setFont("helvetica","normal"),r.text("ID: ".concat(e.id),i,d),r.text("Nasc: ".concat(c(e.dob)),o-i,d,{align:"right"}),d+=6,r.text("Diagn\xf3stico: ".concat(e.diagnosis||"N\xe3o informado"),i,d),d+=10,r.setLineWidth(.2),r.line(i,d,o-i,d),d+=8;const p=Object.keys(s).sort();for(const e of p){d=m(d,15),r.setFontSize(12),r.setFont("helvetica","bold"),r.setFillColor(240,240,240),r.rect(i,d-4,l,7,"F"),r.text(e,i+2,d),d+=8;for(const t of s[e]){d=m(d),r.setFontSize(10),r.setFont("helvetica","bold"),r.text("\u2022 ".concat(t.title," (Tag: ").concat(t.tag||"N/A",")"),i+4,d),d+=5,d=m(d),r.setFontSize(9),r.setFont("helvetica","normal");let e=r.splitTextToSize("Objetivo: ".concat(t.objective||"N\xe3o definido"),l-8);if(r.text(e,i+8,d),d+=4*e.length+2,t.criteria_for_advancement){d=m(d),r.setFont("helvetica","italic");let e=r.splitTextToSize("Crit\xe9rio de Avan\xe7o: ".concat(t.criteria_for_advancement),l-8);r.text(e,i+8,d),d+=4*e.length+2,r.setFont("helvetica","normal")}d+=5}}h(u);const f="Grade_Programas_Ativos_".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".pdf");r.save(f)}catch(t){console.error("Erro ao gerar PDF da grade de programas:",t),alert("Erro ao gerar o PDF da grade de programas. Tente novamente.")}else alert("Nenhum cliente selecionado.")},u=async e=>{if(e)try{const{getPatientProgramsGrade:t}=await Promise.resolve().then(a.bind(a,1487)),s=await t(e.id);if(0===Object.keys(s).length)return void alert("Nenhum programa ativo para gerar a Folha de Registro.");const r=new n.default({orientation:"landscape",unit:"mm",format:"a4"}),o=10,l=r.internal.pageSize.getWidth();let c=o;r.setFontSize(14),r.setFont("helvetica","bold"),r.text("Folha de Registro Semanal - ".concat(e.name),l/2,c+5,{align:"center"}),r.setFontSize(10),r.setFont("helvetica","normal"),r.text("ID: ".concat(e.id),o,c+12),r.text("Semana de: ______ / ______ / ________",l-o,c+12,{align:"right"}),c+=20;const d=Object.keys(s).sort(),u=[];d.forEach((e=>{s[e].length>0&&(u.push([{content:e,colSpan:8,styles:{fontStyle:"bold",fillColor:[230,230,230],textColor:[0,0,0],halign:"left"}}]),s[e].forEach((e=>{const t=e.trials||"N/A",a="(".concat(t," tentativas)"),s=null!==e.custom_trials&&void 0!==e.custom_trials?" *":"",n="".concat(e.title,"\n").concat(a).concat(s);u.push([n,"","","","","","",""])})))})),i()(r,{startY:c,head:[["Programa","Seg","Ter","Qua","Qui","Sex","S\xe1b","Dom"]],body:u,theme:"grid",headStyles:{fillColor:[79,70,229],textColor:[255,255,255],fontStyle:"bold",halign:"center"},columnStyles:{0:{cellWidth:80,fontStyle:"bold"},1:{cellWidth:"auto",halign:"center"},2:{cellWidth:"auto",halign:"center"},3:{cellWidth:"auto",halign:"center"},4:{cellWidth:"auto",halign:"center"},5:{cellWidth:"auto",halign:"center"},6:{cellWidth:"auto",halign:"center"},7:{cellWidth:"auto",halign:"center"}},didParseCell:function(e){8===e.cell.raw.colSpan?(e.cell.styles.fontSize=9,e.cell.styles.cellPadding=2):(e.cell.styles.fontSize=8,e.cell.styles.valign="middle")}});const h="Folha_Registro_".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".pdf");r.save(h)}catch(t){console.error("Erro ao gerar Folha de Registro:",t),alert("Erro ao gerar a Folha de Registro. Tente novamente.")}else alert("Nenhum cliente selecionado.")},h=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e)try{let i={};if(e.sessionData&&e.sessionData.length>0&&e.assigned_programs){console.log("PDF: Usando dados completos do paciente:",e.assigned_programs.length,"programas");e.assigned_programs.filter((t=>e.sessionData.some((e=>e.program_id===t.program_id||e.program_id===t.id)))).forEach((e=>{const t=e.discipline_name||e.area_name||"\xc1rea n\xe3o especificada";i[t]||(i[t]=[]),i[t].push((0,s.A)((0,s.A)({},e),{},{area:t,title:e.program_name||e.title||"Programa ".concat(e.program_id||e.id)}))}))}else{console.log("PDF: Buscando dados via API - sem sessionData dispon\xedvel");const{getPatientProgramsGrade:t}=await Promise.resolve().then(a.bind(a,1487));i=await t(e.id)}const d=new n.default({orientation:"portrait",unit:"mm",format:"a4"}),u=15,h=d.internal.pageSize.getWidth(),m=h-2*u;let p=u+10,f=1;const g=e=>{d.setFontSize(8),d.setTextColor(100),d.text("P\xe1gina ".concat(e),h/2,d.internal.pageSize.getHeight()-u/2,{align:"center"}),d.text("Gerado em: ".concat(c((new Date).toISOString())),u,d.internal.pageSize.getHeight()-u/2),d.setTextColor(0)},x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||e>d.internal.pageSize.getHeight()-u-t){const e=d.internal.getFontSize(),t=d.internal.getFont(),s=d.internal.getTextColor();return g(f),d.addPage(),f++,a&&(d.setFontSize(e),d.setFont(t.fontName,t.fontStyle),d.setTextColor(s)),u+10}return e},b=function(e,t,a,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;if(!e)return a;const r=d.splitTextToSize(e,s);let i=a;for(let o=0;o<r.length;o++)i=x(i,n+5,!1,!0),d.text(r[o],t,i),i+=n;return i},v=function(e,t,a,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;if(!e)return a;let r=a;const i=e.split("\n");for(const o of i){if(""===o.trim()){r+=.7*n;continue}if(o.trim().startsWith("\u2022 ")){const e=o.trim().substring(2);r=x(r,n+5,!1,!0),d.setFont("helvetica","normal"),d.text("\u2022",t,r);const a=d.splitTextToSize(e,s-10);for(let s=0;s<a.length;s++)s>0&&(r+=n,r=x(r,n+5,!1,!0)),d.text(a[s],t+5,r);r+=n;continue}const e=o.match(/^(\d+)\.\s(.+)/);if(e){const[,a,i]=e;r=x(r,n+5,!1,!0),d.setFont("helvetica","normal"),d.text("".concat(a,"."),t,r);const o=d.splitTextToSize(i,s-15);for(let e=0;e<o.length;e++)e>0&&(r+=n,r=x(r,n+5,!1,!0)),d.text(o[e],t+10,r);r+=n;continue}r=y(o,t,r,s,n).newY}return r},y=(e,t,a,s,n)=>{let r=e.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1");const i=d.splitTextToSize(r,s);let o=a;for(let l=0;l<i.length;l++)o=x(o,n+5),d.text(i[l],t,o),o+=n;return{newY:o}};if(d.setFontSize(18),d.setFont("helvetica","bold"),d.text("RELAT\xd3RIO CONSOLIDADO",h/2,p,{align:"center"}),p+=6,d.setFontSize(14),d.text("AN\xc1LISE COMPORTAMENTAL",h/2,p,{align:"center"}),p+=10,r){if(d.setFontSize(10),d.setFont("helvetica","normal"),e.clinic_name){const t="Cl\xednica: ".concat(e.clinic_name),a=d.splitTextToSize(t,m);for(const e of a)d.text(e,h/2,p,{align:"center"}),p+=5}if(r.professional_name){const e="Profissional: ".concat(r.professional_name),t=d.splitTextToSize(e,m);for(const a of t)d.text(a,h/2,p,{align:"center"}),p+=5;if(r.professional_id){const e=d.splitTextToSize(r.professional_id,m);for(const t of e)d.text(t,h/2,p,{align:"center"}),p+=5;p+=1}}}p+=5,d.setLineWidth(.5),d.line(u,p,h-u,p),p+=8,d.setFontSize(12),d.setFont("helvetica","bold"),d.text("1. IDENTIFICA\xc7\xc3O DO USU\xc1RIO",u,p),p+=8,d.setFontSize(10),d.setFont("helvetica","normal");const j="Nome: ".concat(e.name);if(p=b(j,u,p,m),p+=5,e.dob){const t=new Date(e.dob),a=Math.floor((new Date-t)/315576e5),s="Data de Nascimento: ".concat(c(e.dob)," (").concat(a," anos)");p=b(s,u,p,m),p+=5}if(e.diagnosis){const t="Diagn\xf3stico: ".concat(e.diagnosis);p=b(t,u,p,m),p+=5}if(d.text("Data do Relat\xf3rio: ".concat(c((new Date).toISOString())),u,p),p+=6,e.sessionData&&e.sessionData.length>0){const t=e.sessionData[0],a=e.sessionData[e.sessionData.length-1];if(t&&a){d.setFontSize(9),d.setFont("helvetica","italic");const e="Per\xedodo dos dados: de ".concat(c(t.session_date)," a ").concat(c(a.session_date));p=b(e,u,p,m,4),p+=2}}p+=4,d.setLineWidth(.2),d.line(u,p,h-u,p),p+=8,p=x(p,20),d.setFontSize(12),d.setFont("helvetica","bold"),d.text("2. AN\xc1LISE E INTERPRETA\xc7\xc3O",u,p),p+=8,d.setFontSize(10),d.setFont("helvetica","normal"),p=v(t||"Nenhuma observa\xe7\xe3o fornecida.",u,p,m,5),p+=10;p=p>u+100?x(p,0,!0):x(p,15),d.setFontSize(12),d.setFont("helvetica","bold"),d.text("3. REGISTRO DA EVOLU\xc7\xc3O DAS SESS\xd5ES",u,p),p+=8;const N=[];Object.keys(i).forEach((e=>{i[e].forEach((t=>{N.push((0,s.A)((0,s.A)({},t),{},{area:e,title:t.program_name||t.title||"Programa ".concat(t.program_id||t.id)}))}))}));const w=N.map((t=>{const a=(e.sessionData||[]).filter((e=>e.program_id===t.program_id||e.program_id===t.id));if(0===a.length)return Promise.resolve(null);const s=document.createElement("canvas");s.width=600,s.height=300;const n={labels:a.map((e=>c(e.session_date,"short"))),datasets:[{label:"Pontua\xe7\xe3o (%)",data:a.map((e=>e.score)),borderColor:"#4f46e5",backgroundColor:"rgba(79, 70, 229, 0.1)",borderWidth:3,pointRadius:a.map((e=>e.is_baseline?6:5)),pointBackgroundColor:a.map((e=>e.is_baseline?"#f59e0b":e.details&&e.details.promptLevelColor?e.details.promptLevelColor:"#4f46e5")),pointBorderColor:a.map((e=>e.is_baseline?"#f59e0b":"#ffffff")),pointBorderWidth:a.map((e=>e.is_baseline?3:2)),pointStyle:a.map((e=>e.is_baseline?"star":"circle")),fill:!0,tension:.3}]},r={animation:!1,responsive:!1,devicePixelRatio:2,scales:{y:{beginAtZero:!0,max:105,grid:{display:!0,color:"rgba(156, 163, 175, 0.3)",drawBorder:!1},ticks:{padding:8,font:{size:12,weight:500},color:"#4b5563",callback:function(e){return e+"%"}},border:{display:!1}},x:{grid:{display:!0,color:"rgba(156, 163, 175, 0.3)",drawBorder:!1},ticks:{padding:8,font:{size:12,weight:500},color:"#4b5563"},border:{display:!1}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}};return new Promise((e=>{new o.Ay(s.getContext("2d"),{type:"line",data:n,options:r,plugins:[{id:"customCanvasBackgroundColor",beforeDraw:e=>{const{ctx:t}=e;t.save(),t.globalCompositeOperation="destination-over",t.fillStyle="white",t.fillRect(0,0,e.width,e.height),t.restore()}}]}),setTimeout((()=>{e({title:t.title||t.program_name||"Programa ".concat(t.program_id||t.id),area:t.area||t.area_name||t.discipline_name||"\xc1rea",imageData:s.toDataURL("image/png",.95)})}),100)}))}));Promise.all(w).then((t=>{const a=t.filter((e=>e));if(0===a.length)p=x(p),d.setFont("helvetica","italic"),d.text("Nenhum dado de progresso para os programas ativos no per\xedodo selecionado.",u,p),p+=10;else{const e=a.reduce(((e,t)=>(e[t.area]||(e[t.area]=[]),e[t.area].push(t),e)),{});Object.keys(e).sort().forEach((t=>{p=x(p,15),d.setFontSize(12),d.setFont("helvetica","bold"),d.setFillColor(240,240,240),d.rect(u,p-4,m,7,"F"),d.text(t,u+2,p),p+=10;const a=e[t];let s=0;for(let e=0;e<a.length;e++){const n=a[e],r=60,i=m,o=8;(s>=2||p+(o+r+20+15)>d.internal.pageSize.getHeight()-u-20)&&(g(f),d.addPage(),f++,p=u+10,s=0,d.setFontSize(12),d.setFont("helvetica","bold"),d.setFillColor(240,240,240),d.rect(u,p-4,m,7,"F"),d.text(t+" (continua\xe7\xe3o)",u+2,p),p+=10),d.setFontSize(12),d.setFont("helvetica","bold"),d.setTextColor(79,70,229),d.text(n.title,u,p),d.setTextColor(0),p+=o,d.addImage(n.imageData,"PNG",u,p,i,r),p+=r+8,d.setFontSize(8),d.setFont("helvetica","bold"),d.text("N\xedveis de Prompting:",u,p),p+=4,d.setFont("helvetica","normal");const c=(0,l.$F)().map((e=>({color:e.rgb,text:e.name}))),h=3;for(let e=0;e<c.length;e+=h){let t=u;const a=c.slice(e,e+h),s=p;a.forEach((e=>{d.setFillColor(e.color[0],e.color[1],e.color[2]),d.circle(t+1,s-.5,1,"F"),d.setTextColor(0),d.text(e.text,t+4,s),t+=60})),p+=4}d.setFontSize(8),d.setFont("helvetica","bold"),d.setTextColor(0),d.text("S\xedmbolos:",u,p),p+=4,d.setFont("helvetica","normal");const x=u+2,b=p-1,v=1.5;d.setDrawColor(245,158,11),d.setLineWidth(1.5),d.line(x-v,b-v,x+v,b+v),d.line(x+v,b-v,x-v,b+v),d.line(x,b-v,x,b+v),d.line(x-v,b,x+v,b),d.setTextColor(0),d.text("Linha de Base",x+8,p);const y=u+80;d.setFillColor(79,70,229),d.circle(y,p-1,1.5,"F"),d.text("Sess\xe3o Regular",y+6,p),p+=12,s++}p+=5}))}g(f);const s="Relatorio_".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".pdf");d.save(s)}))}catch(i){console.error("Erro ao gerar Relat\xf3rio Consolidado:",i),alert("Erro ao gerar o Relat\xf3rio Consolidado. Tente novamente.")}else alert("Nenhum cliente selecionado.")},m=async e=>{const{reportData:t,analysisData:a,patientData:s,professionalData:r,customizations:i={}}=e;if(t&&a)try{var o,l,d,u,h;const e=new n.default({orientation:"portrait",unit:"mm",format:"a4"}),N=15,w=e.internal.pageSize.getWidth(),_=w-2*N;let S=N+10,C=1;const k=t=>{e.setFontSize(8),e.setTextColor(100);const a="P\xe1gina ".concat(t);e.text(a,w/2,e.internal.pageSize.getHeight()-N/2,{align:"center"}),e.text("Gerado em: ".concat(c((new Date).toISOString())),N,e.internal.pageSize.getHeight()-N/2),e.text("Relat\xf3rio Profissional Detalhado",w-N,e.internal.pageSize.getHeight()-N/2,{align:"right"}),e.setTextColor(0)},A=function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t>e.internal.pageSize.getHeight()-N-a-10){const t=e.internal.getFontSize(),a=e.internal.getFont(),n=e.internal.getTextColor();return k(C),e.addPage(),C++,s&&(e.setFontSize(t),e.setFont(a.fontName,a.fontStyle),e.setTextColor(n)),N+10}return t},P=function(t,a,s,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;if(!t)return s;const i=e.splitTextToSize(t,n);let o=s;for(let l=0;l<i.length;l++)o=A(o,r+5,!0),e.text(i[l],a,o),o+=r;return o};e.setFontSize(18),e.setFont("helvetica","bold"),e.text("RELAT\xd3RIO DE EVOLU\xc7\xc3O TERAP\xcaUTICA",w/2,S,{align:"center"}),S+=6,e.setFontSize(14),e.text("AN\xc1LISE COMPORTAMENTAL",w/2,S,{align:"center"}),S+=10,(t.clinic_name||r.professional_name)&&(e.setFontSize(10),e.setFont("helvetica","normal"),t.clinic_name&&(e.text("Cl\xednica: ".concat(t.clinic_name),w/2,S,{align:"center"}),S+=5),r.professional_name&&(e.text("Profissional: ".concat(r.professional_name),w/2,S,{align:"center"}),S+=5,r.professional_id&&(e.text("".concat(r.professional_id),w/2,S,{align:"center"}),S+=6))),S+=5,e.setLineWidth(.5),e.line(N,S,w-N,S),S+=10,S=A(S,25),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("1. IDENTIFICA\xc7\xc3O DO USU\xc1RIO",N,S),S+=8,e.setFontSize(10),e.setFont("helvetica","normal"),e.text("Nome: ".concat(t.name),N,S),S+=5,e.text("Data de Nascimento: ".concat(c(t.dob)),N,S),S+=5,e.text("Idade: ".concat(t.dob?Math.floor((new Date-new Date(t.dob))/315576e5):"N/A"," anos"),N,S),S+=5;const E="Diagn\xf3stico: ".concat(t.diagnosis||"N\xe3o informado");if(S=P(E,N,S,_),S+=5,s.guardian_name){const e="Respons\xe1vel: ".concat(s.guardian_name," (").concat(s.guardian_relationship,")");S=P(e,N,S,_),S+=5}s.patient_occupation&&(e.text("Ocupa\xe7\xe3o: ".concat(s.patient_occupation),N,S),S+=5),S+=5,S=A(S,20),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("2. DESCRI\xc7\xc3O DA DEMANDA",N,S),S+=8,e.setFontSize(10),e.setFont("helvetica","normal"),e.setFont("helvetica","bold"),e.text("Queixa Principal:",N,S),S+=5,e.setFont("helvetica","normal");const L=(null===(o=i.demand)||void 0===o?void 0:o.main_complaint)||s.main_complaint||"N\xe3o informado";S=P(L,N,S,_),S+=5,e.setFont("helvetica","bold"),e.text("Objetivos do Tratamento:",N,S),S+=5,e.setFont("helvetica","normal");const D=(null===(l=i.demand)||void 0===l?void 0:l.treatment_objectives)||s.treatment_objectives||"A serem definidos com base na avalia\xe7\xe3o inicial";if(S=P(D,N,S,_),S+=8,S=A(S,20),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("3. OBJETIVOS ESPEC\xcdFICOS DOS PROGRAMAS",N,S),S+=8,t.active_programs&&t.active_programs.length>0){e.setFontSize(10),e.setFont("helvetica","normal");const a=t.active_programs.reduce(((e,t)=>(e[t.discipline_name]||(e[t.discipline_name]=[]),e[t.discipline_name].push(t),e)),{});Object.keys(a).sort().forEach((t=>{S=A(S,15),e.setFont("helvetica","bold"),e.text("".concat(t,":"),N,S),S+=5,a[t].forEach((t=>{S=A(S,10),e.setFont("helvetica","normal"),e.text("\u2022 ".concat(t.program_name),N+5,S),S+=4,t.objective&&(e.setFont("helvetica","italic"),S=P("Objetivo: ".concat(t.objective),N+10,S,_-10,4),S+=2)})),S+=3}))}else e.setFont("helvetica","italic"),e.text("Nenhum programa ativo no per\xedodo analisado.",N,S),S+=5;if(S+=5,S=A(S,20),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("4. REGISTRO DA EVOLU\xc7\xc3O DAS SESS\xd5ES",N,S),S+=8,e.setFontSize(10),e.setFont("helvetica","normal"),a.period&&(e.text("Per\xedodo analisado: ".concat(c(a.period.start_date)," a ").concat(c(a.period.end_date)),N,S),S+=5),a.statistics){const t=a.statistics;e.setFont("helvetica","normal"),e.text("\u2022 Total de sess\xf5es realizadas: ".concat(t.total_sessions),N+3,S),S+=5,e.text("\u2022 Programas trabalhados: ".concat(t.programs_worked),N+3,S),S+=5,e.text("\u2022 M\xe9dia geral de acertos: ".concat(t.avg_score.toFixed(1),"%"),N+3,S),S+=5,e.text("\u2022 N\xedvel de independ\xeancia: ".concat(t.independence_percentage.toFixed(1),"%"),N+3,S),S+=5;let s="\u2022 Tend\xeancia: ";switch(t.improvement_trend){case"significant_improvement":s+="Melhoria significativa observada";break;case"moderate_improvement":s+="Melhoria gradual observada";break;case"stable":s+="Desempenho est\xe1vel mantido";break;case"moderate_decline":s+="Decl\xednio moderado observado";break;case"significant_decline":s+="Decl\xednio significativo observado";break;default:s+="Dados insuficientes para an\xe1lise de tend\xeancia"}e.text(s,N+3,S),S+=7}if(a.frequent_observations&&a.frequent_observations.length>0&&(S=A(S,15),e.setFont("helvetica","bold"),e.text("Observa\xe7\xf5es Registradas nas Sess\xf5es:",N,S),S+=5,e.setFont("helvetica","normal"),a.frequent_observations.slice(0,8).forEach((e=>{S=A(S,15);const t='\u2022 "'.concat(e.note,'" (observado em ').concat(e.frequency," sess\xe3o").concat(e.frequency>1?"\xf5es":"",")");S=P(t,N+3,S,_-3),S+=3})),S+=3),a.area_performance&&a.area_performance.length>0&&(S=A(S,15),e.setFont("helvetica","bold"),e.text("Desempenho por \xc1rea de Interven\xe7\xe3o:",N,S),S+=5,e.setFont("helvetica","normal"),a.area_performance.forEach((t=>{S=A(S,8),e.text("\u2022 ".concat(t.area_name,": ").concat(t.avg_score.toFixed(1),"% (").concat(t.session_count," sess\xf5es)"),N+3,S),S+=5})),S+=6),S=A(S,20),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("5. AN\xc1LISE E INTERPRETA\xc7\xc3O",N,S),S+=8,e.setFontSize(10),e.setFont("helvetica","normal"),null!==(d=i.analysis)&&void 0!==d&&d.clinical_interpretation?S=P(i.analysis.clinical_interpretation,N,S,_):a.insights&&a.insights.length>0?(S=P("Com base nos dados coletados e na an\xe1lise comportamental, observa-se:",N,S,_),S+=6,a.insights.forEach((e=>{S=A(S,15);const t="\u2022 ".concat(e.text);S=P(t,N+3,S,_-3),S+=3}))):(S=P("An\xe1lise em desenvolvimento com base nos dados coletados.",N,S,_),S+=5),S+=8,S=A(S,20),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("6. CONCLUS\xc3O E ENCAMINHAMENTOS",N,S),S+=8,e.setFontSize(10),e.setFont("helvetica","normal"),e.setFont("helvetica","bold"),e.text("S\xedntese do Per\xedodo:",N,S),S+=5,e.setFont("helvetica","normal"),null!==(u=i.conclusions)&&void 0!==u&&u.summary)S=P(i.conclusions.summary,N,S,_);else{var m,p,f,g,x,b;const e="Durante o per\xedodo analisado, foram realizadas ".concat((null===(m=a.statistics)||void 0===m?void 0:m.total_sessions)||0," sess\xf5es terap\xeauticas abrangendo ").concat((null===(p=a.statistics)||void 0===p?void 0:p.programs_worked)||0," programa(s) de interven\xe7\xe3o. O desempenho m\xe9dio apresentado foi de ").concat((null===(f=a.statistics)||void 0===f||null===(g=f.avg_score)||void 0===g?void 0:g.toFixed(1))||0,"% de acertos, com ").concat((null===(x=a.statistics)||void 0===x||null===(b=x.independence_percentage)||void 0===b?void 0:b.toFixed(1))||0,"% das respostas em n\xedvel independente.");S=P(e,N,S,_)}if(S+=6,e.setFont("helvetica","bold"),e.text("Recomenda\xe7\xf5es:",N,S),S+=5,e.setFont("helvetica","normal"),null!==(h=i.conclusions)&&void 0!==h&&h.recommendations)S=P(i.conclusions.recommendations,N,S,_);else{var v,y,j;let e="Recomenda-se continuidade do programa de interven\xe7\xe3o com ";"significant_improvement"===(null===(v=a.statistics)||void 0===v?void 0:v.improvement_trend)||"moderate_improvement"===(null===(y=a.statistics)||void 0===y?void 0:y.improvement_trend)?e+="manuten\xe7\xe3o das estrat\xe9gias atuais e considera\xe7\xe3o de aumento da complexidade dos objetivos trabalhados.":"stable"===(null===(j=a.statistics)||void 0===j?void 0:j.improvement_trend)?e+="revis\xe3o das estrat\xe9gias para promover maior avan\xe7o no desenvolvimento das habilidades.":e+="revis\xe3o criteriosa dos procedimentos e estrat\xe9gias utilizadas, bem como investiga\xe7\xe3o de poss\xedveis vari\xe1veis interferentes.",S=P(e,N,S,_)}if(S+=10,S=A(S,25),e.setLineWidth(.3),e.line(w-N-60,S,w-N,S),S+=5,e.setFontSize(9),e.setFont("helvetica","normal"),e.text(r.professional_name||"Profissional Respons\xe1vel",w-N-30,S,{align:"center"}),S+=3,e.text(r.professional_id||"Registro Profissional",w-N-30,S,{align:"center"}),r.qualifications){S+=3;e.splitTextToSize(r.qualifications,60).forEach((t=>{e.text(t,w-N-30,S,{align:"center"}),S+=3}))}k(C);const O="Relatorio_Evolucao_Terapeutica_".concat(t.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".pdf");e.save(O)}catch(N){console.error("Erro ao gerar Relat\xf3rio de Evolu\xe7\xe3o Terap\xeautica:",N),alert("Erro ao gerar o Relat\xf3rio de Evolu\xe7\xe3o Terap\xeautica. Tente novamente.")}else alert("Dados insuficientes para gerar o relat\xf3rio.")},p=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e)try{const a=new n.default({orientation:"portrait",unit:"mm",format:"a4"}),s=15,r=a.internal.pageSize.getWidth(),o=r-2*s;let l=s+10,d=1;const u={primary:[79,70,229],lightGray:[240,240,240],darkGray:[100,100,100],black:[0,0,0],warning:[245,158,11]},h=e=>{a.setFontSize(8),a.setTextColor(u.darkGray[0],u.darkGray[1],u.darkGray[2]);a.text("DOCUMENTO CONFIDENCIAL - INFORMA\xc7\xd5ES PROTEGIDAS PELA LGPD",r/2,a.internal.pageSize.getHeight()-s/2-3,{align:"center"});const t="P\xe1gina ".concat(e);a.text(t,r/2,a.internal.pageSize.getHeight()-s/2,{align:"center"}),a.text("Gerado em: ".concat(c((new Date).toISOString())),s,a.internal.pageSize.getHeight()-s/2),a.setTextColor(0,0,0)},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e>a.internal.pageSize.getHeight()-s-t-15){const e=a.internal.getFontSize(),t=a.internal.getFont(),r=a.internal.getTextColor();return h(d),a.addPage(),d++,n&&(a.setFontSize(e),a.setFont(t.fontName,t.fontStyle),a.setTextColor(r)),s+10}return e},p=function(e,t,s,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;if(!e||"N\xe3o informado"===e)return s;const i=a.splitTextToSize(e,n);let o=s;for(let l=0;l<i.length;l++)o=m(o,r+5,!0),a.text(i[l],t,o),o+=r;return o},f=(e,t)=>(t=m(t,15),a.setFontSize(12),a.setFont("helvetica","bold"),a.setFillColor(u.lightGray[0],u.lightGray[1],u.lightGray[2]),a.rect(s,t-4,o,7,"F"),a.setTextColor(u.primary[0],u.primary[1],u.primary[2]),a.text(e,s+2,t),a.setTextColor(0,0,0),t+8),g=(e,t,n)=>t&&""!==t?(n=m(n),a.setFontSize(10),a.setFont("helvetica","bold"),a.text("".concat(e,":"),s,n),a.setFont("helvetica","normal"),(n=p(String(t),s+50,n,o-50))+2):n;if(a.setFontSize(18),a.setFont("helvetica","bold"),a.text("CADASTRO COMPLETO DO PACIENTE",r/2,l,{align:"center"}),l+=6,a.setFontSize(14),a.text("DOCUMENTA\xc7\xc3O CONFIDENCIAL",r/2,l,{align:"center"}),l+=10,null!==t&&void 0!==t&&t.name&&(a.setFontSize(10),a.setFont("helvetica","normal"),a.text("Cl\xednica: ".concat(t.name),r/2,l,{align:"center"}),l+=6),l+=3,a.setLineWidth(.5),a.line(s,l,r-s,l),l+=10,l=f("1. DADOS B\xc1SICOS DO PACIENTE",l),l=g("Nome Completo",e.name,l),l=g("Data de Nascimento",c(e.dob),l),e.dob){const t=Math.floor((new Date-new Date(e.dob))/315576e5);l=g("Idade","".concat(t," anos"),l)}if(l=g("Diagn\xf3stico",e.diagnosis,l),l+=5,l=f("2. DADOS DOS RESPONS\xc1VEIS",l),(e.guardian_name||e.guardian_relationship)&&(a.setFontSize(10),a.setFont("helvetica","bold"),l=m(l),a.text("Respons\xe1vel Principal:",s,l),l+=5,a.setFont("helvetica","normal"),l=g("Nome",e.guardian_name,l),l=g("Parentesco",e.guardian_relationship,l),l=g("Telefone",e.guardian_phone,l),l=g("E-mail",e.guardian_email,l),l=g("Profiss\xe3o",e.guardian_occupation,l),l=g("Escolaridade",e.guardian_education,l),l+=3),e.second_guardian_name&&(a.setFontSize(10),a.setFont("helvetica","bold"),l=m(l),a.text("Segundo Respons\xe1vel:",s,l),l+=5,a.setFont("helvetica","normal"),l=g("Nome",e.second_guardian_name,l),l=g("Parentesco",e.second_guardian_relationship,l),l=g("Telefone",e.second_guardian_phone,l),l=g("E-mail",e.second_guardian_email,l),l=g("Profiss\xe3o",e.second_guardian_occupation,l),l+=3),e.address_street||e.address_city){if(l=f("3. ENDERE\xc7O E CONTATO",l),e.address_street){l=g("Logradouro","".concat(e.address_street).concat(e.address_number?", "+e.address_number:"").concat(e.address_complement?" - "+e.address_complement:""),l)}l=g("Bairro",e.address_neighborhood,l),l=g("Cidade",e.address_city,l),l=g("Estado",e.address_state,l),l=g("CEP",e.address_zip,l),l+=5}if((e.school_name||e.school_grade)&&(l=f("4. INFORMA\xc7\xd5ES EDUCACIONAIS",l),l=g("Nome da Escola",e.school_name,l),l=g("S\xe9rie/Ano",e.school_grade,l),l=g("Per\xedodo",e.school_period,l),l=g("Telefone da Escola",e.school_phone,l),l=g("E-mail da Escola",e.school_email,l),l=g("Professor(a)",e.school_teacher,l),l=g("Telefone do Professor(a)",e.school_teacher_phone,l),e.school_special_needs&&(l=g("Necessidades Especiais","Sim",l),l=g("Adapta\xe7\xf5es Necess\xe1rias",e.school_adaptations,l)),l+=5),(e.birth_weight||e.gestational_age||e.delivery_type)&&(l=f("5. DESENVOLVIMENTO E NASCIMENTO",l),e.birth_weight&&(l=g("Peso ao Nascer","".concat(e.birth_weight," kg"),l)),e.birth_height&&(l=g("Altura ao Nascer","".concat(e.birth_height," cm"),l)),e.gestational_age&&(l=g("Idade Gestacional","".concat(e.gestational_age," semanas"),l)),l=g("Tipo de Parto",e.delivery_type,l),l=g("Complica\xe7\xf5es no Parto",e.birth_complications,l),l=g("Preocupa\xe7\xf5es com Desenvolvimento",e.development_concerns,l),e.early_intervention&&(l=g("Interven\xe7\xe3o Precoce","Sim",l)),l+=5),(e.pediatrician_name||e.health_insurance)&&(l=f("6. DADOS M\xc9DICOS",l),l=g("Pediatra",e.pediatrician_name,l),l=g("Telefone do Pediatra",e.pediatrician_phone,l),l=g("E-mail do Pediatra",e.pediatrician_email,l),l=g("Plano de Sa\xfade",e.health_insurance,l),l=g("N\xfamero do Plano",e.health_insurance_number,l),l+=5),e.medications&&e.medications.length>0){l=f("7. MEDICA\xc7\xd5ES ATUAIS",l);const t=e.medications.map((e=>[e.name||"N/A",e.dosage||"N/A",e.frequency||"N/A",e.prescribing_doctor||"N/A"]));i()(a,{startY:l,head:[["Medicamento","Dosagem","Frequ\xeancia","M\xe9dico"]],body:t,theme:"grid",headStyles:{fillColor:u.primary,textColor:[255,255,255],fontStyle:"bold",halign:"center"},styles:{fontSize:9,cellPadding:3},columnStyles:{0:{cellWidth:45},1:{cellWidth:35},2:{cellWidth:35},3:{cellWidth:45}},margin:{left:s,right:s}}),l=a.lastAutoTable.finalY+5}if(e.emergencyContacts&&e.emergencyContacts.length>0){l=m(l,30),l=f("8. CONTATOS DE EMERG\xcaNCIA",l);const t=e.emergencyContacts.map((e=>[e.name||"N/A",e.relationship||"N/A",e.phone||"N/A",e.is_primary?"Sim":"N\xe3o"]));i()(a,{startY:l,head:[["Nome","Parentesco","Telefone","Contato Principal"]],body:t,theme:"grid",headStyles:{fillColor:u.primary,textColor:[255,255,255],fontStyle:"bold",halign:"center"},styles:{fontSize:9,cellPadding:3},columnStyles:{0:{cellWidth:50},1:{cellWidth:35},2:{cellWidth:40},3:{cellWidth:35,halign:"center"}},margin:{left:s,right:s}}),l=a.lastAutoTable.finalY+5}if(e.medicalHistory&&e.medicalHistory.length>0){l=m(l,30),l=f("9. HIST\xd3RICO M\xc9DICO",l);const t=e.medicalHistory.map((e=>[e.condition||"N/A",e.diagnosis_date?c(e.diagnosis_date):"N/A",e.treatment||"N/A",e.status||"N/A"]));i()(a,{startY:l,head:[["Condi\xe7\xe3o","Data Diagn\xf3stico","Tratamento","Status"]],body:t,theme:"grid",headStyles:{fillColor:u.primary,textColor:[255,255,255],fontStyle:"bold",halign:"center"},styles:{fontSize:9,cellPadding:3},columnStyles:{0:{cellWidth:45},1:{cellWidth:30},2:{cellWidth:50},3:{cellWidth:35}},margin:{left:s,right:s}}),l=a.lastAutoTable.finalY+5}if(e.professionalContacts&&e.professionalContacts.length>0){l=m(l,30),l=f("10. PROFISSIONAIS DE ACOMPANHAMENTO",l);const t=e.professionalContacts.map((e=>[e.name||"N/A",e.specialty||"N/A",e.phone||"N/A",e.email||"N/A"]));i()(a,{startY:l,head:[["Nome","Especialidade","Telefone","E-mail"]],body:t,theme:"grid",headStyles:{fillColor:u.primary,textColor:[255,255,255],fontStyle:"bold",halign:"center"},styles:{fontSize:9,cellPadding:3},columnStyles:{0:{cellWidth:45},1:{cellWidth:40},2:{cellWidth:35},3:{cellWidth:40}},margin:{left:s,right:s}}),l=a.lastAutoTable.finalY+5}(e.allergies||e.dietary_restrictions||e.behavioral_notes||e.communication_preferences)&&(l=m(l,30),l=f("11. OBSERVA\xc7\xd5ES ESPECIAIS",l),l=g("Alergias",e.allergies,l),l=g("Restri\xe7\xf5es Alimentares",e.dietary_restrictions,l),l=g("Observa\xe7\xf5es Comportamentais",e.behavioral_notes,l),l=g("Prefer\xeancias de Comunica\xe7\xe3o",e.communication_preferences,l),l+=5),l=m(l,25),a.setFontSize(9),a.setFont("helvetica","bold"),a.setTextColor(u.warning[0],u.warning[1],u.warning[2]),a.text("AVISO DE CONFIDENCIALIDADE",r/2,l,{align:"center"}),l+=5,a.setFont("helvetica","normal"),a.setTextColor(0,0,0),a.setFontSize(8);l=p("Este documento cont\xe9m informa\xe7\xf5es confidenciais e protegidas pela Lei Geral de Prote\xe7\xe3o de Dados (LGPD - Lei n\xba 13.709/2018). O acesso, uso, divulga\xe7\xe3o ou reprodu\xe7\xe3o n\xe3o autorizada das informa\xe7\xf5es contidas neste documento s\xe3o estritamente proibidos e podem resultar em san\xe7\xf5es legais. Este documento deve ser mantido em local seguro e acessado apenas por profissionais autorizados envolvidos no tratamento do paciente.",s,l,o,4),h(d);const x="Cadastro_Completo_".concat(e.name.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".pdf");a.save(x)}catch(a){console.error("Erro ao gerar PDF de cadastro completo:",a),alert("Erro ao gerar o PDF de cadastro completo. Tente novamente.")}else alert("Nenhum paciente selecionado.")}},2154:(e,t,a)=>{"use strict";a.d(t,{$F:()=>n});const s={5:{name:"Independente",hex:"#10b981",rgb:[16,185,129]},4:{name:"Dica Verbal",hex:"#8b5cf6",rgb:[139,92,246]},3:{name:"Dica Gestual",hex:"#3b82f6",rgb:[59,130,246]},2:{name:"Ajuda F\xedsica Parcial",hex:"#eab308",rgb:[234,179,8]},1:{name:"Ajuda F\xedsica Total",hex:"#f97316",rgb:[249,115,22]},0:{name:"N\xe3o realizou",hex:"#ef4444",rgb:[239,68,68]}},n=()=>[5,4,3,2,1].map((e=>({id:e,name:s[e].name,hex:s[e].hex,rgb:s[e].rgb})))},2284:(e,t,a)=>{"use strict";function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}a.d(t,{A:()=>s})},2730:(e,t,a)=>{"use strict";var s=a(5043),n=a(8853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,a=1;a<arguments.length;a++)t+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},p={};function f(e,t,a,s,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=n,this.mustUseProperty=a,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new f(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new f(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new f(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new f(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new f(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)}));var x=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,t,a,s){var n=g.hasOwnProperty(t)?g[t]:null;(null!==n?0!==n.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,a,s){if(null===t||"undefined"===typeof t||function(e,t,a,s){if(null!==a&&0===a.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==a?!a.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,a,s))return!0;if(s)return!1;if(null!==a)switch(a.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,a,n,s)&&(a=null),s||null===n?function(e){return!!u.call(p,e)||!u.call(m,e)&&(h.test(e)?p[e]=!0:(m[e]=!0,!1))}(t)&&(null===a?e.removeAttribute(t):e.setAttribute(t,""+a)):n.mustUseProperty?e[n.propertyName]=null===a?3!==n.type&&"":a:(t=n.attributeName,s=n.attributeNamespace,null===a?e.removeAttribute(t):(a=3===(n=n.type)||4===n&&!0===a?"":""+a,s?e.setAttributeNS(s,t,a):e.setAttribute(t,a))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(x,b);g[t]=new f(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(x,b);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(x,b);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)}));var y=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),k=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var T=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=T&&e[T]||e["@@iterator"])?e:null}var R,I=Object.assign;function F(e){if(void 0===R)try{throw Error()}catch(a){var t=a.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return"\n"+R+e}var z=!1;function B(e,t){if(!e||z)return"";z=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),r=s.stack.split("\n"),i=n.length-1,o=r.length-1;1<=i&&0<=o&&n[i]!==r[o];)o--;for(;1<=i&&0<=o;i--,o--)if(n[i]!==r[o]){if(1!==i||1!==o)do{if(i--,0>--o||n[i]!==r[o]){var l="\n"+n[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{z=!1,Error.prepareStackTrace=a}return(e=e?e.displayName||e.name:"")?F(e):""}function q(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case N:return"Portal";case S:return"Profiler";case _:return"StrictMode";case P:return"Suspense";case E:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return U(e(t))}catch(a){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof a&&"function"===typeof a.get&&"function"===typeof a.set){var n=a.get,r=a.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){s=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:a.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var a=t.getValue(),s="";return e&&(s=V(e)?e.checked?"true":"false":e.value),(e=s)!==a&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var a=t.checked;return I({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=a?a:e._wrapperState.initialChecked})}function J(e,t){var a=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;a=W(null!=t.value?t.value:a),e._wrapperState={initialChecked:s,initialValue:a,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function Q(e,t){K(e,t);var a=W(t.value),s=t.type;if(null!=a)"number"===s?(0===a&&""===e.value||e.value!=a)&&(e.value=""+a):e.value!==""+a&&(e.value=""+a);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,a):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,a){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,a||t===e.value||(e.value=t),e.defaultValue=t}""!==(a=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==a&&(e.name=a)}function ee(e,t,a){"number"===t&&$(e.ownerDocument)===e||(null==a?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+a&&(e.defaultValue=""+a))}var te=Array.isArray;function ae(e,t,a,s){if(e=e.options,t){t={};for(var n=0;n<a.length;n++)t["$"+a[n]]=!0;for(a=0;a<e.length;a++)n=t.hasOwnProperty("$"+e[a].value),e[a].selected!==n&&(e[a].selected=n),n&&s&&(e[a].defaultSelected=!0)}else{for(a=""+W(a),t=null,n=0;n<e.length;n++){if(e[n].value===a)return e[n].selected=!0,void(s&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return I({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var a=t.value;if(null==a){if(a=t.children,t=t.defaultValue,null!=a){if(null!=t)throw Error(r(92));if(te(a)){if(1<a.length)throw Error(r(93));a=a[0]}t=a}null==t&&(t=""),a=t}e._wrapperState={initialValue:W(a)}}function re(e,t){var a=W(t.value),s=W(t.defaultValue);null!=a&&((a=""+a)!==e.value&&(e.value=a),null==t.defaultValue&&e.defaultValue!==a&&(e.defaultValue=a)),null!=s&&(e.defaultValue=""+s)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,a,s){MSApp.execUnsafeLocalFunction((function(){return de(e,t)}))}:de);function he(e,t){if(t){var a=e.firstChild;if(a&&a===e.lastChild&&3===a.nodeType)return void(a.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function fe(e,t,a){return null==t||"boolean"===typeof t||""===t?"":a||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function ge(e,t){for(var a in e=e.style,t)if(t.hasOwnProperty(a)){var s=0===a.indexOf("--"),n=fe(a,t[a],s);"float"===a&&(a="cssFloat"),s?e.setProperty(a,n):e[a]=n}}Object.keys(me).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]}))}));var xe=I({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function je(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,we=null,_e=null;function Se(e){if(e=vn(e)){if("function"!==typeof Ne)throw Error(r(280));var t=e.stateNode;t&&(t=jn(t),Ne(e.stateNode,e.type,t))}}function Ce(e){we?_e?_e.push(e):_e=[e]:we=e}function ke(){if(we){var e=we,t=_e;if(_e=we=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ae(e,t){return e(t)}function Pe(){}var Ee=!1;function Le(e,t,a){if(Ee)return e(t,a);Ee=!0;try{return Ae(e,t,a)}finally{Ee=!1,(null!==we||null!==_e)&&(Pe(),ke())}}function De(e,t){var a=e.stateNode;if(null===a)return null;var s=jn(a);if(null===s)return null;a=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(a&&"function"!==typeof a)throw Error(r(231,t,typeof a));return a}var Oe=!1;if(d)try{var Te={};Object.defineProperty(Te,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Te,Te),window.removeEventListener("test",Te,Te)}catch(de){Oe=!1}function Me(e,t,a,s,n,r,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(a,c)}catch(d){this.onError(d)}}var Re=!1,Ie=null,Fe=!1,ze=null,Be={onError:function(e){Re=!0,Ie=e}};function qe(e,t,a,s,n,r,i,o,l){Re=!1,Ie=null,Me.apply(Be,arguments)}function Ue(e){var t=e,a=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(a=t.return),e=t.return}while(e)}return 3===t.tag?a:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ue(e)!==e)throw Error(r(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(r(188));return t!==e?null:e}for(var a=e,s=t;;){var n=a.return;if(null===n)break;var i=n.alternate;if(null===i){if(null!==(s=n.return)){a=s;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===a)return We(n),e;if(i===s)return We(n),t;i=i.sibling}throw Error(r(188))}if(a.return!==s.return)a=n,s=i;else{for(var o=!1,l=n.child;l;){if(l===a){o=!0,a=n,s=i;break}if(l===s){o=!0,s=n,a=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===a){o=!0,a=i,s=n;break}if(l===s){o=!0,s=i,a=n;break}l=l.sibling}if(!o)throw Error(r(189))}}if(a.alternate!==s)throw Error(r(190))}if(3!==a.tag)throw Error(r(188));return a.stateNode.current===a?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ye=n.unstable_scheduleCallback,$e=n.unstable_cancelCallback,Xe=n.unstable_shouldYield,Je=n.unstable_requestPaint,Ke=n.unstable_now,Qe=n.unstable_getCurrentPriorityLevel,Ze=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,at=n.unstable_LowPriority,st=n.unstable_IdlePriority,nt=null,rt=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var a=e.pendingLanes;if(0===a)return 0;var s=0,n=e.suspendedLanes,r=e.pingedLanes,i=268435455&a;if(0!==i){var o=i&~n;0!==o?s=ut(o):0!==(r&=i)&&(s=ut(r))}else 0!==(i=a&~n)?s=ut(i):0!==r&&(s=ut(r));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&n)&&((n=s&-s)>=(r=t&-t)||16===n&&0!==(4194240&r)))return t;if(0!==(4&s)&&(s|=16&a),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)n=1<<(a=31-it(t)),s|=e[a],t&=~n;return s}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],a=0;31>a;a++)t.push(e);return t}function xt(e,t,a){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=a}function bt(e,t){var a=e.entangledLanes|=t;for(e=e.entanglements;a;){var s=31-it(a),n=1<<s;n&t|e[s]&t&&(e[s]|=t),a&=~n}}var vt=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var jt,Nt,wt,_t,St,Ct=!1,kt=[],At=null,Pt=null,Et=null,Lt=new Map,Dt=new Map,Ot=[],Tt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Et=null;break;case"pointerover":case"pointerout":Lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Rt(e,t,a,s,n,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:a,eventSystemFlags:s,nativeEvent:r,targetContainers:[n]},null!==t&&(null!==(t=vn(t))&&Nt(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function It(e){var t=bn(e.target);if(null!==t){var a=Ue(t);if(null!==a)if(13===(t=a.tag)){if(null!==(t=He(a)))return e.blockedOn=t,void St(e.priority,(function(){wt(a)}))}else if(3===t&&a.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===a.tag?a.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var a=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==a)return null!==(t=vn(a))&&Nt(t),e.blockedOn=a,!1;var s=new(a=e.nativeEvent).constructor(a.type,a);ye=s,a.target.dispatchEvent(s),ye=null,t.shift()}return!0}function zt(e,t,a){Ft(e)&&a.delete(t)}function Bt(){Ct=!1,null!==At&&Ft(At)&&(At=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==Et&&Ft(Et)&&(Et=null),Lt.forEach(zt),Dt.forEach(zt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Bt)))}function Ut(e){function t(t){return qt(t,e)}if(0<kt.length){qt(kt[0],e);for(var a=1;a<kt.length;a++){var s=kt[a];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==At&&qt(At,e),null!==Pt&&qt(Pt,e),null!==Et&&qt(Et,e),Lt.forEach(t),Dt.forEach(t),a=0;a<Ot.length;a++)(s=Ot[a]).blockedOn===e&&(s.blockedOn=null);for(;0<Ot.length&&null===(a=Ot[0]).blockedOn;)It(a),null===a.blockedOn&&Ot.shift()}var Ht=y.ReactCurrentBatchConfig,Wt=!0;function Vt(e,t,a,s){var n=vt,r=Ht.transition;Ht.transition=null;try{vt=1,Yt(e,t,a,s)}finally{vt=n,Ht.transition=r}}function Gt(e,t,a,s){var n=vt,r=Ht.transition;Ht.transition=null;try{vt=4,Yt(e,t,a,s)}finally{vt=n,Ht.transition=r}}function Yt(e,t,a,s){if(Wt){var n=Xt(e,t,a,s);if(null===n)Hs(e,t,s,$t,a),Mt(e,s);else if(function(e,t,a,s,n){switch(t){case"focusin":return At=Rt(At,e,t,a,s,n),!0;case"dragenter":return Pt=Rt(Pt,e,t,a,s,n),!0;case"mouseover":return Et=Rt(Et,e,t,a,s,n),!0;case"pointerover":var r=n.pointerId;return Lt.set(r,Rt(Lt.get(r)||null,e,t,a,s,n)),!0;case"gotpointercapture":return r=n.pointerId,Dt.set(r,Rt(Dt.get(r)||null,e,t,a,s,n)),!0}return!1}(n,e,t,a,s))s.stopPropagation();else if(Mt(e,s),4&t&&-1<Tt.indexOf(e)){for(;null!==n;){var r=vn(n);if(null!==r&&jt(r),null===(r=Xt(e,t,a,s))&&Hs(e,t,s,$t,a),r===n)break;n=r}null!==n&&s.stopPropagation()}else Hs(e,t,s,null,a)}}var $t=null;function Xt(e,t,a,s){if($t=null,null!==(e=bn(e=je(s))))if(null===(t=Ue(e)))e=null;else if(13===(a=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===a){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case at:return 16;case st:return 536870912;default:return 16}default:return 16}}var Kt=null,Qt=null,Zt=null;function ea(){if(Zt)return Zt;var e,t,a=Qt,s=a.length,n="value"in Kt?Kt.value:Kt.textContent,r=n.length;for(e=0;e<s&&a[e]===n[e];e++);var i=s-e;for(t=1;t<=i&&a[s-t]===n[r-t];t++);return Zt=n.slice(e,1<t?1-t:void 0)}function ta(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function aa(){return!0}function sa(){return!1}function na(e){function t(t,a,s,n,r){for(var i in this._reactName=t,this._targetInst=s,this.type=a,this.nativeEvent=n,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(n):n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?aa:sa,this.isPropagationStopped=sa,this}return I(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=aa)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=aa)},persist:function(){},isPersistent:aa}),t}var ra,ia,oa,la={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=na(la),da=I({},la,{view:0,detail:0}),ua=na(da),ha=I({},da,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_a,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==oa&&(oa&&"mousemove"===e.type?(ra=e.screenX-oa.screenX,ia=e.screenY-oa.screenY):ia=ra=0,oa=e),ra)},movementY:function(e){return"movementY"in e?e.movementY:ia}}),ma=na(ha),pa=na(I({},ha,{dataTransfer:0})),fa=na(I({},da,{relatedTarget:0})),ga=na(I({},la,{animationName:0,elapsedTime:0,pseudoElement:0})),xa=I({},la,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ba=na(xa),va=na(I({},la,{data:0})),ya={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ja={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Na={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wa(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Na[e])&&!!t[e]}function _a(){return wa}var Sa=I({},da,{key:function(e){if(e.key){var t=ya[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=ta(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ja[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_a,charCode:function(e){return"keypress"===e.type?ta(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?ta(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ca=na(Sa),ka=na(I({},ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Aa=na(I({},da,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_a})),Pa=na(I({},la,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ea=I({},ha,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),La=na(Ea),Da=[9,13,27,32],Oa=d&&"CompositionEvent"in window,Ta=null;d&&"documentMode"in document&&(Ta=document.documentMode);var Ma=d&&"TextEvent"in window&&!Ta,Ra=d&&(!Oa||Ta&&8<Ta&&11>=Ta),Ia=String.fromCharCode(32),Fa=!1;function za(e,t){switch(e){case"keyup":return-1!==Da.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ba(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qa=!1;var Ua={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ha(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ua[e.type]:"textarea"===t}function Wa(e,t,a,s){Ce(s),0<(t=Vs(t,"onChange")).length&&(a=new ca("onChange","change",null,a,s),e.push({event:a,listeners:t}))}var Va=null,Ga=null;function Ya(e){Is(e,0)}function $a(e){if(Y(yn(e)))return e}function Xa(e,t){if("change"===e)return t}var Ja=!1;if(d){var Ka;if(d){var Qa="oninput"in document;if(!Qa){var Za=document.createElement("div");Za.setAttribute("oninput","return;"),Qa="function"===typeof Za.oninput}Ka=Qa}else Ka=!1;Ja=Ka&&(!document.documentMode||9<document.documentMode)}function es(){Va&&(Va.detachEvent("onpropertychange",ts),Ga=Va=null)}function ts(e){if("value"===e.propertyName&&$a(Ga)){var t=[];Wa(t,Ga,e,je(e)),Le(Ya,t)}}function as(e,t,a){"focusin"===e?(es(),Ga=a,(Va=t).attachEvent("onpropertychange",ts)):"focusout"===e&&es()}function ss(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $a(Ga)}function ns(e,t){if("click"===e)return $a(t)}function rs(e,t){if("input"===e||"change"===e)return $a(t)}var is="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function os(e,t){if(is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var a=Object.keys(e),s=Object.keys(t);if(a.length!==s.length)return!1;for(s=0;s<a.length;s++){var n=a[s];if(!u.call(t,n)||!is(e[n],t[n]))return!1}return!0}function ls(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cs(e,t){var a,s=ls(e);for(e=0;s;){if(3===s.nodeType){if(a=e+s.textContent.length,e<=t&&a>=t)return{node:s,offset:t-e};e=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=ls(s)}}function ds(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ds(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function us(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var a="string"===typeof t.contentWindow.location.href}catch(s){a=!1}if(!a)break;t=$((e=t.contentWindow).document)}return t}function hs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ms(e){var t=us(),a=e.focusedElem,s=e.selectionRange;if(t!==a&&a&&a.ownerDocument&&ds(a.ownerDocument.documentElement,a)){if(null!==s&&hs(a))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in a)a.selectionStart=t,a.selectionEnd=Math.min(e,a.value.length);else if((e=(t=a.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=a.textContent.length,r=Math.min(s.start,n);s=void 0===s.end?r:Math.min(s.end,n),!e.extend&&r>s&&(n=s,s=r,r=n),n=cs(a,r);var i=cs(a,s);n&&i&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),r>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=a;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof a.focus&&a.focus(),a=0;a<t.length;a++)(e=t[a]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ps=d&&"documentMode"in document&&11>=document.documentMode,fs=null,gs=null,xs=null,bs=!1;function vs(e,t,a){var s=a.window===a?a.document:9===a.nodeType?a:a.ownerDocument;bs||null==fs||fs!==$(s)||("selectionStart"in(s=fs)&&hs(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},xs&&os(xs,s)||(xs=s,0<(s=Vs(gs,"onSelect")).length&&(t=new ca("onSelect","select",null,t,a),e.push({event:t,listeners:s}),t.target=fs)))}function ys(e,t){var a={};return a[e.toLowerCase()]=t.toLowerCase(),a["Webkit"+e]="webkit"+t,a["Moz"+e]="moz"+t,a}var js={animationend:ys("Animation","AnimationEnd"),animationiteration:ys("Animation","AnimationIteration"),animationstart:ys("Animation","AnimationStart"),transitionend:ys("Transition","TransitionEnd")},Ns={},ws={};function _s(e){if(Ns[e])return Ns[e];if(!js[e])return e;var t,a=js[e];for(t in a)if(a.hasOwnProperty(t)&&t in ws)return Ns[e]=a[t];return e}d&&(ws=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);var Ss=_s("animationend"),Cs=_s("animationiteration"),ks=_s("animationstart"),As=_s("transitionend"),Ps=new Map,Es="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ls(e,t){Ps.set(e,t),l(t,[e])}for(var Ds=0;Ds<Es.length;Ds++){var Os=Es[Ds];Ls(Os.toLowerCase(),"on"+(Os[0].toUpperCase()+Os.slice(1)))}Ls(Ss,"onAnimationEnd"),Ls(Cs,"onAnimationIteration"),Ls(ks,"onAnimationStart"),Ls("dblclick","onDoubleClick"),Ls("focusin","onFocus"),Ls("focusout","onBlur"),Ls(As,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ms=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ts));function Rs(e,t,a){var s=e.type||"unknown-event";e.currentTarget=a,function(e,t,a,s,n,i,o,l,c){if(qe.apply(this,arguments),Re){if(!Re)throw Error(r(198));var d=Ie;Re=!1,Ie=null,Fe||(Fe=!0,ze=d)}}(s,t,void 0,e),e.currentTarget=null}function Is(e,t){t=0!==(4&t);for(var a=0;a<e.length;a++){var s=e[a],n=s.event;s=s.listeners;e:{var r=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==r&&n.isPropagationStopped())break e;Rs(n,o,c),r=l}else for(i=0;i<s.length;i++){if(l=(o=s[i]).instance,c=o.currentTarget,o=o.listener,l!==r&&n.isPropagationStopped())break e;Rs(n,o,c),r=l}}}if(Fe)throw e=ze,Fe=!1,ze=null,e}function Fs(e,t){var a=t[fn];void 0===a&&(a=t[fn]=new Set);var s=e+"__bubble";a.has(s)||(Us(t,e,2,!1),a.add(s))}function zs(e,t,a){var s=0;t&&(s|=4),Us(a,e,s,t)}var Bs="_reactListening"+Math.random().toString(36).slice(2);function qs(e){if(!e[Bs]){e[Bs]=!0,i.forEach((function(t){"selectionchange"!==t&&(Ms.has(t)||zs(t,!1,e),zs(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bs]||(t[Bs]=!0,zs("selectionchange",!1,t))}}function Us(e,t,a,s){switch(Jt(t)){case 1:var n=Vt;break;case 4:n=Gt;break;default:n=Yt}a=n.bind(null,t,a,e),n=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),s?void 0!==n?e.addEventListener(t,a,{capture:!0,passive:n}):e.addEventListener(t,a,!0):void 0!==n?e.addEventListener(t,a,{passive:n}):e.addEventListener(t,a,!1)}function Hs(e,t,a,s,n){var r=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var i=s.tag;if(3===i||4===i){var o=s.stateNode.containerInfo;if(o===n||8===o.nodeType&&o.parentNode===n)break;if(4===i)for(i=s.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===n||8===l.nodeType&&l.parentNode===n))return;i=i.return}for(;null!==o;){if(null===(i=bn(o)))return;if(5===(l=i.tag)||6===l){s=r=i;continue e}o=o.parentNode}}s=s.return}Le((function(){var s=r,n=je(a),i=[];e:{var o=Ps.get(e);if(void 0!==o){var l=ca,c=e;switch(e){case"keypress":if(0===ta(a))break e;case"keydown":case"keyup":l=Ca;break;case"focusin":c="focus",l=fa;break;case"focusout":c="blur",l=fa;break;case"beforeblur":case"afterblur":l=fa;break;case"click":if(2===a.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ma;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Aa;break;case Ss:case Cs:case ks:l=ga;break;case As:l=Pa;break;case"scroll":l=ua;break;case"wheel":l=La;break;case"copy":case"cut":case"paste":l=ba;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=ka}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=s;null!==p;){var f=(m=p).stateNode;if(5===m.tag&&null!==f&&(m=f,null!==h&&(null!=(f=De(p,h))&&d.push(Ws(p,f,m)))),u)break;p=p.return}0<d.length&&(o=new l(o,c,null,a,n),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||a===ye||!(c=a.relatedTarget||a.fromElement)||!bn(c)&&!c[pn])&&(l||o)&&(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=s,null!==(c=(c=a.relatedTarget||a.toElement)?bn(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(d=ma,f="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=ka,f="onPointerLeave",h="onPointerEnter",p="pointer"),u=null==l?o:yn(l),m=null==c?o:yn(c),(o=new d(f,p+"leave",l,a,n)).target=u,o.relatedTarget=m,f=null,bn(n)===s&&((d=new d(h,p+"enter",c,a,n)).target=m,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,p=0,m=d=l;m;m=Gs(m))p++;for(m=0,f=h;f;f=Gs(f))m++;for(;0<p-m;)d=Gs(d),p--;for(;0<m-p;)h=Gs(h),m--;for(;p--;){if(d===h||null!==h&&d===h.alternate)break e;d=Gs(d),h=Gs(h)}d=null}else d=null;null!==l&&Ys(i,o,l,d,!1),null!==c&&null!==u&&Ys(i,u,c,d,!0)}if("select"===(l=(o=s?yn(s):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Xa;else if(Ha(o))if(Ja)g=rs;else{g=ss;var x=as}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=ns);switch(g&&(g=g(e,s))?Wa(i,g,a,n):(x&&x(e,o,s),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&ee(o,"number",o.value)),x=s?yn(s):window,e){case"focusin":(Ha(x)||"true"===x.contentEditable)&&(fs=x,gs=s,xs=null);break;case"focusout":xs=gs=fs=null;break;case"mousedown":bs=!0;break;case"contextmenu":case"mouseup":case"dragend":bs=!1,vs(i,a,n);break;case"selectionchange":if(ps)break;case"keydown":case"keyup":vs(i,a,n)}var b;if(Oa)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else qa?za(e,a)&&(v="onCompositionEnd"):"keydown"===e&&229===a.keyCode&&(v="onCompositionStart");v&&(Ra&&"ko"!==a.locale&&(qa||"onCompositionStart"!==v?"onCompositionEnd"===v&&qa&&(b=ea()):(Qt="value"in(Kt=n)?Kt.value:Kt.textContent,qa=!0)),0<(x=Vs(s,v)).length&&(v=new va(v,e,null,a,n),i.push({event:v,listeners:x}),b?v.data=b:null!==(b=Ba(a))&&(v.data=b))),(b=Ma?function(e,t){switch(e){case"compositionend":return Ba(t);case"keypress":return 32!==t.which?null:(Fa=!0,Ia);case"textInput":return(e=t.data)===Ia&&Fa?null:e;default:return null}}(e,a):function(e,t){if(qa)return"compositionend"===e||!Oa&&za(e,t)?(e=ea(),Zt=Qt=Kt=null,qa=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ra&&"ko"!==t.locale?null:t.data}}(e,a))&&(0<(s=Vs(s,"onBeforeInput")).length&&(n=new va("onBeforeInput","beforeinput",null,a,n),i.push({event:n,listeners:s}),n.data=b))}Is(i,t)}))}function Ws(e,t,a){return{instance:e,listener:t,currentTarget:a}}function Vs(e,t){for(var a=t+"Capture",s=[];null!==e;){var n=e,r=n.stateNode;5===n.tag&&null!==r&&(n=r,null!=(r=De(e,a))&&s.unshift(Ws(e,r,n)),null!=(r=De(e,t))&&s.push(Ws(e,r,n))),e=e.return}return s}function Gs(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ys(e,t,a,s,n){for(var r=t._reactName,i=[];null!==a&&a!==s;){var o=a,l=o.alternate,c=o.stateNode;if(null!==l&&l===s)break;5===o.tag&&null!==c&&(o=c,n?null!=(l=De(a,r))&&i.unshift(Ws(a,l,o)):n||null!=(l=De(a,r))&&i.push(Ws(a,l,o))),a=a.return}0!==i.length&&e.push({event:t,listeners:i})}var $s=/\r\n?/g,Xs=/\u0000|\uFFFD/g;function Js(e){return("string"===typeof e?e:""+e).replace($s,"\n").replace(Xs,"")}function Ks(e,t,a){if(t=Js(t),Js(e)!==t&&a)throw Error(r(425))}function Qs(){}var Zs=null,en=null;function tn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var an="function"===typeof setTimeout?setTimeout:void 0,sn="function"===typeof clearTimeout?clearTimeout:void 0,nn="function"===typeof Promise?Promise:void 0,rn="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nn?function(e){return nn.resolve(null).then(e).catch(on)}:an;function on(e){setTimeout((function(){throw e}))}function ln(e,t){var a=t,s=0;do{var n=a.nextSibling;if(e.removeChild(a),n&&8===n.nodeType)if("/$"===(a=n.data)){if(0===s)return e.removeChild(n),void Ut(t);s--}else"$"!==a&&"$?"!==a&&"$!"!==a||s++;a=n}while(a);Ut(t)}function cn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var a=e.data;if("$"===a||"$!"===a||"$?"===a){if(0===t)return e;t--}else"/$"===a&&t++}e=e.previousSibling}return null}var un=Math.random().toString(36).slice(2),hn="__reactFiber$"+un,mn="__reactProps$"+un,pn="__reactContainer$"+un,fn="__reactEvents$"+un,gn="__reactListeners$"+un,xn="__reactHandles$"+un;function bn(e){var t=e[hn];if(t)return t;for(var a=e.parentNode;a;){if(t=a[pn]||a[hn]){if(a=t.alternate,null!==t.child||null!==a&&null!==a.child)for(e=dn(e);null!==e;){if(a=e[hn])return a;e=dn(e)}return t}a=(e=a).parentNode}return null}function vn(e){return!(e=e[hn]||e[pn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function yn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function jn(e){return e[mn]||null}var Nn=[],wn=-1;function _n(e){return{current:e}}function Sn(e){0>wn||(e.current=Nn[wn],Nn[wn]=null,wn--)}function Cn(e,t){wn++,Nn[wn]=e.current,e.current=t}var kn={},An=_n(kn),Pn=_n(!1),En=kn;function Ln(e,t){var a=e.type.contextTypes;if(!a)return kn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var n,r={};for(n in a)r[n]=t[n];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function Dn(e){return null!==(e=e.childContextTypes)&&void 0!==e}function On(){Sn(Pn),Sn(An)}function Tn(e,t,a){if(An.current!==kn)throw Error(r(168));Cn(An,t),Cn(Pn,a)}function Mn(e,t,a){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return a;for(var n in s=s.getChildContext())if(!(n in t))throw Error(r(108,H(e)||"Unknown",n));return I({},a,s)}function Rn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kn,En=An.current,Cn(An,e),Cn(Pn,Pn.current),!0}function In(e,t,a){var s=e.stateNode;if(!s)throw Error(r(169));a?(e=Mn(e,t,En),s.__reactInternalMemoizedMergedChildContext=e,Sn(Pn),Sn(An),Cn(An,e)):Sn(Pn),Cn(Pn,a)}var Fn=null,zn=!1,Bn=!1;function qn(e){null===Fn?Fn=[e]:Fn.push(e)}function Un(){if(!Bn&&null!==Fn){Bn=!0;var e=0,t=vt;try{var a=Fn;for(vt=1;e<a.length;e++){var s=a[e];do{s=s(!0)}while(null!==s)}Fn=null,zn=!1}catch(n){throw null!==Fn&&(Fn=Fn.slice(e+1)),Ye(Ze,Un),n}finally{vt=t,Bn=!1}}return null}var Hn=[],Wn=0,Vn=null,Gn=0,Yn=[],$n=0,Xn=null,Jn=1,Kn="";function Qn(e,t){Hn[Wn++]=Gn,Hn[Wn++]=Vn,Vn=e,Gn=t}function Zn(e,t,a){Yn[$n++]=Jn,Yn[$n++]=Kn,Yn[$n++]=Xn,Xn=e;var s=Jn;e=Kn;var n=32-it(s)-1;s&=~(1<<n),a+=1;var r=32-it(t)+n;if(30<r){var i=n-n%5;r=(s&(1<<i)-1).toString(32),s>>=i,n-=i,Jn=1<<32-it(t)+n|a<<n|s,Kn=r+e}else Jn=1<<r|a<<n|s,Kn=e}function er(e){null!==e.return&&(Qn(e,1),Zn(e,1,0))}function tr(e){for(;e===Vn;)Vn=Hn[--Wn],Hn[Wn]=null,Gn=Hn[--Wn],Hn[Wn]=null;for(;e===Xn;)Xn=Yn[--$n],Yn[$n]=null,Kn=Yn[--$n],Yn[$n]=null,Jn=Yn[--$n],Yn[$n]=null}var ar=null,sr=null,nr=!1,rr=null;function ir(e,t){var a=Lc(5,null,null,0);a.elementType="DELETED",a.stateNode=t,a.return=e,null===(t=e.deletions)?(e.deletions=[a],e.flags|=16):t.push(a)}function or(e,t){switch(e.tag){case 5:var a=e.type;return null!==(t=1!==t.nodeType||a.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ar=e,sr=cn(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ar=e,sr=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(a=null!==Xn?{id:Jn,overflow:Kn}:null,e.memoizedState={dehydrated:t,treeContext:a,retryLane:1073741824},(a=Lc(18,null,null,0)).stateNode=t,a.return=e,e.child=a,ar=e,sr=null,!0);default:return!1}}function lr(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cr(e){if(nr){var t=sr;if(t){var a=t;if(!or(e,t)){if(lr(e))throw Error(r(418));t=cn(a.nextSibling);var s=ar;t&&or(e,t)?ir(s,a):(e.flags=-4097&e.flags|2,nr=!1,ar=e)}}else{if(lr(e))throw Error(r(418));e.flags=-4097&e.flags|2,nr=!1,ar=e}}}function dr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ar=e}function ur(e){if(e!==ar)return!1;if(!nr)return dr(e),nr=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!tn(e.type,e.memoizedProps)),t&&(t=sr)){if(lr(e))throw hr(),Error(r(418));for(;t;)ir(e,t),t=cn(t.nextSibling)}if(dr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var a=e.data;if("/$"===a){if(0===t){sr=cn(e.nextSibling);break e}t--}else"$"!==a&&"$!"!==a&&"$?"!==a||t++}e=e.nextSibling}sr=null}}else sr=ar?cn(e.stateNode.nextSibling):null;return!0}function hr(){for(var e=sr;e;)e=cn(e.nextSibling)}function mr(){sr=ar=null,nr=!1}function pr(e){null===rr?rr=[e]:rr.push(e)}var fr=y.ReactCurrentBatchConfig;function gr(e,t,a){if(null!==(e=a.ref)&&"function"!==typeof e&&"object"!==typeof e){if(a._owner){if(a=a._owner){if(1!==a.tag)throw Error(r(309));var s=a.stateNode}if(!s)throw Error(r(147,e));var n=s,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=n.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(r(284));if(!a._owner)throw Error(r(290,e))}return e}function xr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function br(e){return(0,e._init)(e._payload)}function vr(e){function t(t,a){if(e){var s=t.deletions;null===s?(t.deletions=[a],t.flags|=16):s.push(a)}}function a(a,s){if(!e)return null;for(;null!==s;)t(a,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function i(t,a,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<a?(t.flags|=2,a):s:(t.flags|=2,a):(t.flags|=1048576,a)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,a,s){return null===t||6!==t.tag?((t=Ic(a,e.mode,s)).return=e,t):((t=n(t,a)).return=e,t)}function c(e,t,a,s){var r=a.type;return r===w?u(e,t,a.props.children,s,a.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===D&&br(r)===t.type)?((s=n(t,a.props)).ref=gr(e,t,a),s.return=e,s):((s=Tc(a.type,a.key,a.props,null,e.mode,s)).ref=gr(e,t,a),s.return=e,s)}function d(e,t,a,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==a.containerInfo||t.stateNode.implementation!==a.implementation?((t=Fc(a,e.mode,s)).return=e,t):((t=n(t,a.children||[])).return=e,t)}function u(e,t,a,s,r){return null===t||7!==t.tag?((t=Mc(a,e.mode,s,r)).return=e,t):((t=n(t,a)).return=e,t)}function h(e,t,a){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ic(""+t,e.mode,a)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(a=Tc(t.type,t.key,t.props,null,e.mode,a)).ref=gr(e,null,t),a.return=e,a;case N:return(t=Fc(t,e.mode,a)).return=e,t;case D:return h(e,(0,t._init)(t._payload),a)}if(te(t)||M(t))return(t=Mc(t,e.mode,a,null)).return=e,t;xr(e,t)}return null}function m(e,t,a,s){var n=null!==t?t.key:null;if("string"===typeof a&&""!==a||"number"===typeof a)return null!==n?null:l(e,t,""+a,s);if("object"===typeof a&&null!==a){switch(a.$$typeof){case j:return a.key===n?c(e,t,a,s):null;case N:return a.key===n?d(e,t,a,s):null;case D:return m(e,t,(n=a._init)(a._payload),s)}if(te(a)||M(a))return null!==n?null:u(e,t,a,s,null);xr(e,a)}return null}function p(e,t,a,s,n){if("string"===typeof s&&""!==s||"number"===typeof s)return l(t,e=e.get(a)||null,""+s,n);if("object"===typeof s&&null!==s){switch(s.$$typeof){case j:return c(t,e=e.get(null===s.key?a:s.key)||null,s,n);case N:return d(t,e=e.get(null===s.key?a:s.key)||null,s,n);case D:return p(e,t,a,(0,s._init)(s._payload),n)}if(te(s)||M(s))return u(t,e=e.get(a)||null,s,n,null);xr(t,s)}return null}function f(n,r,o,l){for(var c=null,d=null,u=r,f=r=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var x=m(n,u,o[f],l);if(null===x){null===u&&(u=g);break}e&&u&&null===x.alternate&&t(n,u),r=i(x,r,f),null===d?c=x:d.sibling=x,d=x,u=g}if(f===o.length)return a(n,u),nr&&Qn(n,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(n,o[f],l))&&(r=i(u,r,f),null===d?c=u:d.sibling=u,d=u);return nr&&Qn(n,f),c}for(u=s(n,u);f<o.length;f++)null!==(g=p(u,n,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),r=i(g,r,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach((function(e){return t(n,e)})),nr&&Qn(n,f),c}function g(n,o,l,c){var d=M(l);if("function"!==typeof d)throw Error(r(150));if(null==(l=d.call(l)))throw Error(r(151));for(var u=d=null,f=o,g=o=0,x=null,b=l.next();null!==f&&!b.done;g++,b=l.next()){f.index>g?(x=f,f=null):x=f.sibling;var v=m(n,f,b.value,c);if(null===v){null===f&&(f=x);break}e&&f&&null===v.alternate&&t(n,f),o=i(v,o,g),null===u?d=v:u.sibling=v,u=v,f=x}if(b.done)return a(n,f),nr&&Qn(n,g),d;if(null===f){for(;!b.done;g++,b=l.next())null!==(b=h(n,b.value,c))&&(o=i(b,o,g),null===u?d=b:u.sibling=b,u=b);return nr&&Qn(n,g),d}for(f=s(n,f);!b.done;g++,b=l.next())null!==(b=p(f,n,g,b.value,c))&&(e&&null!==b.alternate&&f.delete(null===b.key?g:b.key),o=i(b,o,g),null===u?d=b:u.sibling=b,u=b);return e&&f.forEach((function(e){return t(n,e)})),nr&&Qn(n,g),d}return function e(s,r,i,l){if("object"===typeof i&&null!==i&&i.type===w&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case j:e:{for(var c=i.key,d=r;null!==d;){if(d.key===c){if((c=i.type)===w){if(7===d.tag){a(s,d.sibling),(r=n(d,i.props.children)).return=s,s=r;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&br(c)===d.type){a(s,d.sibling),(r=n(d,i.props)).ref=gr(s,d,i),r.return=s,s=r;break e}a(s,d);break}t(s,d),d=d.sibling}i.type===w?((r=Mc(i.props.children,s.mode,l,i.key)).return=s,s=r):((l=Tc(i.type,i.key,i.props,null,s.mode,l)).ref=gr(s,r,i),l.return=s,s=l)}return o(s);case N:e:{for(d=i.key;null!==r;){if(r.key===d){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){a(s,r.sibling),(r=n(r,i.children||[])).return=s,s=r;break e}a(s,r);break}t(s,r),r=r.sibling}(r=Fc(i,s.mode,l)).return=s,s=r}return o(s);case D:return e(s,r,(d=i._init)(i._payload),l)}if(te(i))return f(s,r,i,l);if(M(i))return g(s,r,i,l);xr(s,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==r&&6===r.tag?(a(s,r.sibling),(r=n(r,i)).return=s,s=r):(a(s,r),(r=Ic(i,s.mode,l)).return=s,s=r),o(s)):a(s,r)}}var yr=vr(!0),jr=vr(!1),Nr=_n(null),wr=null,_r=null,Sr=null;function Cr(){Sr=_r=wr=null}function kr(e){var t=Nr.current;Sn(Nr),e._currentValue=t}function Ar(e,t,a){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===a)break;e=e.return}}function Pr(e,t){wr=e,Sr=_r=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(vo=!0),e.firstContext=null)}function Er(e){var t=e._currentValue;if(Sr!==e)if(e={context:e,memoizedValue:t,next:null},null===_r){if(null===wr)throw Error(r(308));_r=e,wr.dependencies={lanes:0,firstContext:e}}else _r=_r.next=e;return t}var Lr=null;function Dr(e){null===Lr?Lr=[e]:Lr.push(e)}function Or(e,t,a,s){var n=t.interleaved;return null===n?(a.next=a,Dr(t)):(a.next=n.next,n.next=a),t.interleaved=a,Tr(e,s)}function Tr(e,t){e.lanes|=t;var a=e.alternate;for(null!==a&&(a.lanes|=t),a=e,e=e.return;null!==e;)e.childLanes|=t,null!==(a=e.alternate)&&(a.childLanes|=t),a=e,e=e.return;return 3===a.tag?a.stateNode:null}var Mr=!1;function Rr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ir(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zr(e,t,a){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&Al)){var n=s.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),s.pending=t,Tr(e,a)}return null===(n=s.interleaved)?(t.next=t,Dr(s)):(t.next=n.next,n.next=t),s.interleaved=t,Tr(e,a)}function Br(e,t,a){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&a))){var s=t.lanes;a|=s&=e.pendingLanes,t.lanes=a,bt(e,a)}}function qr(e,t){var a=e.updateQueue,s=e.alternate;if(null!==s&&a===(s=s.updateQueue)){var n=null,r=null;if(null!==(a=a.firstBaseUpdate)){do{var i={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};null===r?n=r=i:r=r.next=i,a=a.next}while(null!==a);null===r?n=r=t:r=r.next=t}else n=r=t;return a={baseState:s.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:s.shared,effects:s.effects},void(e.updateQueue=a)}null===(e=a.lastBaseUpdate)?a.firstBaseUpdate=t:e.next=t,a.lastBaseUpdate=t}function Ur(e,t,a,s){var n=e.updateQueue;Mr=!1;var r=n.firstBaseUpdate,i=n.lastBaseUpdate,o=n.shared.pending;if(null!==o){n.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?r=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==r){var u=n.baseState;for(i=0,d=c=l=null,o=r;;){var h=o.lane,m=o.eventTime;if((s&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,f=o;switch(h=t,m=a,f.tag){case 1:if("function"===typeof(p=f.payload)){u=p.call(m,u,h);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=f.payload)?p.call(m,u,h):p)||void 0===h)break e;u=I({},u,h);break e;case 2:Mr=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=n.effects)?n.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=n.shared.pending))break;o=(h=o).next,h.next=null,n.lastBaseUpdate=h,n.shared.pending=null}}if(null===d&&(l=u),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=d,null!==(t=n.shared.interleaved)){n=t;do{i|=n.lane,n=n.next}while(n!==t)}else null===r&&(n.shared.lanes=0);Rl|=i,e.lanes=i,e.memoizedState=u}}function Hr(e,t,a){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],n=s.callback;if(null!==n){if(s.callback=null,s=a,"function"!==typeof n)throw Error(r(191,n));n.call(s)}}}var Wr={},Vr=_n(Wr),Gr=_n(Wr),Yr=_n(Wr);function $r(e){if(e===Wr)throw Error(r(174));return e}function Xr(e,t){switch(Cn(Yr,t),Cn(Gr,e),Cn(Vr,Wr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sn(Vr),Cn(Vr,t)}function Jr(){Sn(Vr),Sn(Gr),Sn(Yr)}function Kr(e){$r(Yr.current);var t=$r(Vr.current),a=le(t,e.type);t!==a&&(Cn(Gr,e),Cn(Vr,a))}function Qr(e){Gr.current===e&&(Sn(Vr),Sn(Gr))}var Zr=_n(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var a=t.memoizedState;if(null!==a&&(null===(a=a.dehydrated)||"$?"===a.data||"$!"===a.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ai(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var si=y.ReactCurrentDispatcher,ni=y.ReactCurrentBatchConfig,ri=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(r(321))}function pi(e,t){if(null===t)return!1;for(var a=0;a<t.length&&a<e.length;a++)if(!is(e[a],t[a]))return!1;return!0}function fi(e,t,a,s,n,i){if(ri=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,si.current=null===e||null===e.memoizedState?Qi:Zi,e=a(s,n),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(r(301));i+=1,li=oi=null,t.updateQueue=null,si.current=eo,e=a(s,n)}while(di)}if(si.current=Ki,t=null!==oi&&null!==oi.next,ri=0,li=oi=ii=null,ci=!1,t)throw Error(r(300));return e}function gi(){var e=0!==ui;return ui=0,e}function xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function bi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(r(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function vi(e,t){return"function"===typeof t?t(e):t}function yi(e){var t=bi(),a=t.queue;if(null===a)throw Error(r(311));a.lastRenderedReducer=e;var s=oi,n=s.baseQueue,i=a.pending;if(null!==i){if(null!==n){var o=n.next;n.next=i.next,i.next=o}s.baseQueue=n=i,a.pending=null}if(null!==n){i=n.next,s=s.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ri&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=s):c=c.next=h,ii.lanes|=u,Rl|=u}d=d.next}while(null!==d&&d!==i);null===c?o=s:c.next=l,is(s,t.memoizedState)||(vo=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,a.lastRenderedState=s}if(null!==(e=a.interleaved)){n=e;do{i=n.lane,ii.lanes|=i,Rl|=i,n=n.next}while(n!==e)}else null===n&&(a.lanes=0);return[t.memoizedState,a.dispatch]}function ji(e){var t=bi(),a=t.queue;if(null===a)throw Error(r(311));a.lastRenderedReducer=e;var s=a.dispatch,n=a.pending,i=t.memoizedState;if(null!==n){a.pending=null;var o=n=n.next;do{i=e(i,o.action),o=o.next}while(o!==n);is(i,t.memoizedState)||(vo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),a.lastRenderedState=i}return[i,s]}function Ni(){}function wi(e,t){var a=ii,s=bi(),n=t(),i=!is(s.memoizedState,n);if(i&&(s.memoizedState=n,vo=!0),s=s.queue,Mi(Ci.bind(null,a,s,e),[e]),s.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(a.flags|=2048,Ei(9,Si.bind(null,a,s,n,t),void 0,null),null===Pl)throw Error(r(349));0!==(30&ri)||_i(a,t,n)}return n}function _i(e,t,a){e.flags|=16384,e={getSnapshot:t,value:a},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(a=t.stores)?t.stores=[e]:a.push(e)}function Si(e,t,a,s){t.value=a,t.getSnapshot=s,ki(t)&&Ai(e)}function Ci(e,t,a){return a((function(){ki(t)&&Ai(e)}))}function ki(e){var t=e.getSnapshot;e=e.value;try{var a=t();return!is(e,a)}catch(s){return!0}}function Ai(e){var t=Tr(e,1);null!==t&&ac(t,e,1,-1)}function Pi(e){var t=xi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=Yi.bind(null,ii,e),[t.memoizedState,e]}function Ei(e,t,a,s){return e={tag:e,create:t,destroy:a,deps:s,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(a=t.lastEffect)?t.lastEffect=e.next=e:(s=a.next,a.next=e,e.next=s,t.lastEffect=e),e}function Li(){return bi().memoizedState}function Di(e,t,a,s){var n=xi();ii.flags|=e,n.memoizedState=Ei(1|t,a,void 0,void 0===s?null:s)}function Oi(e,t,a,s){var n=bi();s=void 0===s?null:s;var r=void 0;if(null!==oi){var i=oi.memoizedState;if(r=i.destroy,null!==s&&pi(s,i.deps))return void(n.memoizedState=Ei(t,a,r,s))}ii.flags|=e,n.memoizedState=Ei(1|t,a,r,s)}function Ti(e,t){return Di(8390656,8,e,t)}function Mi(e,t){return Oi(2048,8,e,t)}function Ri(e,t){return Oi(4,2,e,t)}function Ii(e,t){return Oi(4,4,e,t)}function Fi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zi(e,t,a){return a=null!==a&&void 0!==a?a.concat([e]):null,Oi(4,4,Fi.bind(null,t,e),a)}function Bi(){}function qi(e,t){var a=bi();t=void 0===t?null:t;var s=a.memoizedState;return null!==s&&null!==t&&pi(t,s[1])?s[0]:(a.memoizedState=[e,t],e)}function Ui(e,t){var a=bi();t=void 0===t?null:t;var s=a.memoizedState;return null!==s&&null!==t&&pi(t,s[1])?s[0]:(e=e(),a.memoizedState=[e,t],e)}function Hi(e,t,a){return 0===(21&ri)?(e.baseState&&(e.baseState=!1,vo=!0),e.memoizedState=a):(is(a,t)||(a=ft(),ii.lanes|=a,Rl|=a,e.baseState=!0),t)}function Wi(e,t){var a=vt;vt=0!==a&&4>a?a:4,e(!0);var s=ni.transition;ni.transition={};try{e(!1),t()}finally{vt=a,ni.transition=s}}function Vi(){return bi().memoizedState}function Gi(e,t,a){var s=tc(e);if(a={lane:s,action:a,hasEagerState:!1,eagerState:null,next:null},$i(e))Xi(t,a);else if(null!==(a=Or(e,t,a,s))){ac(a,e,s,ec()),Ji(a,t,s)}}function Yi(e,t,a){var s=tc(e),n={lane:s,action:a,hasEagerState:!1,eagerState:null,next:null};if($i(e))Xi(t,n);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=r(i,a);if(n.hasEagerState=!0,n.eagerState=o,is(o,i)){var l=t.interleaved;return null===l?(n.next=n,Dr(t)):(n.next=l.next,l.next=n),void(t.interleaved=n)}}catch(c){}null!==(a=Or(e,t,n,s))&&(ac(a,e,s,n=ec()),Ji(a,t,s))}}function $i(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Xi(e,t){di=ci=!0;var a=e.pending;null===a?t.next=t:(t.next=a.next,a.next=t),e.pending=t}function Ji(e,t,a){if(0!==(4194240&a)){var s=t.lanes;a|=s&=e.pendingLanes,t.lanes=a,bt(e,a)}}var Ki={readContext:Er,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Qi={readContext:Er,useCallback:function(e,t){return xi().memoizedState=[e,void 0===t?null:t],e},useContext:Er,useEffect:Ti,useImperativeHandle:function(e,t,a){return a=null!==a&&void 0!==a?a.concat([e]):null,Di(4194308,4,Fi.bind(null,t,e),a)},useLayoutEffect:function(e,t){return Di(4194308,4,e,t)},useInsertionEffect:function(e,t){return Di(4,2,e,t)},useMemo:function(e,t){var a=xi();return t=void 0===t?null:t,e=e(),a.memoizedState=[e,t],e},useReducer:function(e,t,a){var s=xi();return t=void 0!==a?a(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Gi.bind(null,ii,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},xi().memoizedState=e},useState:Pi,useDebugValue:Bi,useDeferredValue:function(e){return xi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=Wi.bind(null,e[1]),xi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,a){var s=ii,n=xi();if(nr){if(void 0===a)throw Error(r(407));a=a()}else{if(a=t(),null===Pl)throw Error(r(349));0!==(30&ri)||_i(s,t,a)}n.memoizedState=a;var i={value:a,getSnapshot:t};return n.queue=i,Ti(Ci.bind(null,s,i,e),[e]),s.flags|=2048,Ei(9,Si.bind(null,s,i,a,t),void 0,null),a},useId:function(){var e=xi(),t=Pl.identifierPrefix;if(nr){var a=Kn;t=":"+t+"R"+(a=(Jn&~(1<<32-it(Jn)-1)).toString(32)+a),0<(a=ui++)&&(t+="H"+a.toString(32)),t+=":"}else t=":"+t+"r"+(a=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zi={readContext:Er,useCallback:qi,useContext:Er,useEffect:Mi,useImperativeHandle:zi,useInsertionEffect:Ri,useLayoutEffect:Ii,useMemo:Ui,useReducer:yi,useRef:Li,useState:function(){return yi(vi)},useDebugValue:Bi,useDeferredValue:function(e){return Hi(bi(),oi.memoizedState,e)},useTransition:function(){return[yi(vi)[0],bi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:wi,useId:Vi,unstable_isNewReconciler:!1},eo={readContext:Er,useCallback:qi,useContext:Er,useEffect:Mi,useImperativeHandle:zi,useInsertionEffect:Ri,useLayoutEffect:Ii,useMemo:Ui,useReducer:ji,useRef:Li,useState:function(){return ji(vi)},useDebugValue:Bi,useDeferredValue:function(e){var t=bi();return null===oi?t.memoizedState=e:Hi(t,oi.memoizedState,e)},useTransition:function(){return[ji(vi)[0],bi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:wi,useId:Vi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var a in t=I({},t),e=e.defaultProps)void 0===t[a]&&(t[a]=e[a]);return t}return t}function ao(e,t,a,s){a=null===(a=a(s,t=e.memoizedState))||void 0===a?t:I({},t,a),e.memoizedState=a,0===e.lanes&&(e.updateQueue.baseState=a)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,a){e=e._reactInternals;var s=ec(),n=tc(e),r=Fr(s,n);r.payload=t,void 0!==a&&null!==a&&(r.callback=a),null!==(t=zr(e,r,n))&&(ac(t,e,n,s),Br(t,e,n))},enqueueReplaceState:function(e,t,a){e=e._reactInternals;var s=ec(),n=tc(e),r=Fr(s,n);r.tag=1,r.payload=t,void 0!==a&&null!==a&&(r.callback=a),null!==(t=zr(e,r,n))&&(ac(t,e,n,s),Br(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var a=ec(),s=tc(e),n=Fr(a,s);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=zr(e,n,s))&&(ac(t,e,s,a),Br(t,e,s))}};function no(e,t,a,s,n,r,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,r,i):!t.prototype||!t.prototype.isPureReactComponent||(!os(a,s)||!os(n,r))}function ro(e,t,a){var s=!1,n=kn,r=t.contextType;return"object"===typeof r&&null!==r?r=Er(r):(n=Dn(t)?En:An.current,r=(s=null!==(s=t.contextTypes)&&void 0!==s)?Ln(e,n):kn),t=new t(a,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=r),t}function io(e,t,a,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(a,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(a,s),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function oo(e,t,a,s){var n=e.stateNode;n.props=a,n.state=e.memoizedState,n.refs={},Rr(e);var r=t.contextType;"object"===typeof r&&null!==r?n.context=Er(r):(r=Dn(t)?En:An.current,n.context=Ln(e,r)),n.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(ao(e,t,r,a),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&so.enqueueReplaceState(n,n.state,null),Ur(e,a,n,s),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var a="",s=t;do{a+=q(s),s=s.return}while(s);var n=a}catch(r){n="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:t,stack:n,digest:null}}function co(e,t,a){return{value:e,source:null,stack:null!=a?a:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(a){setTimeout((function(){throw a}))}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,a){(a=Fr(-1,a)).tag=3,a.payload={element:null};var s=t.value;return a.callback=function(){Wl||(Wl=!0,Vl=s),uo(0,t)},a}function po(e,t,a){(a=Fr(-1,a)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var n=t.value;a.payload=function(){return s(n)},a.callback=function(){uo(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(a.callback=function(){uo(0,t),"function"!==typeof s&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),a}function fo(e,t,a){var s=e.pingCache;if(null===s){s=e.pingCache=new ho;var n=new Set;s.set(t,n)}else void 0===(n=s.get(t))&&(n=new Set,s.set(t,n));n.has(a)||(n.add(a),e=Sc.bind(null,e,t,a),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xo(e,t,a,s,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,a.flags|=131072,a.flags&=-52805,1===a.tag&&(null===a.alternate?a.tag=17:((t=Fr(-1,1)).tag=2,zr(a,t,1))),a.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var bo=y.ReactCurrentOwner,vo=!1;function yo(e,t,a,s){t.child=null===e?jr(t,null,a,s):yr(t,e.child,a,s)}function jo(e,t,a,s,n){a=a.render;var r=t.ref;return Pr(t,n),s=fi(e,t,a,s,r,n),a=gi(),null===e||vo?(nr&&a&&er(t),t.flags|=1,yo(e,t,s,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Wo(e,t,n))}function No(e,t,a,s,n){if(null===e){var r=a.type;return"function"!==typeof r||Dc(r)||void 0!==r.defaultProps||null!==a.compare||void 0!==a.defaultProps?((e=Tc(a.type,null,s,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,wo(e,t,r,s,n))}if(r=e.child,0===(e.lanes&n)){var i=r.memoizedProps;if((a=null!==(a=a.compare)?a:os)(i,s)&&e.ref===t.ref)return Wo(e,t,n)}return t.flags|=1,(e=Oc(r,s)).ref=t.ref,e.return=t,t.child=e}function wo(e,t,a,s,n){if(null!==e){var r=e.memoizedProps;if(os(r,s)&&e.ref===t.ref){if(vo=!1,t.pendingProps=s=r,0===(e.lanes&n))return t.lanes=e.lanes,Wo(e,t,n);0!==(131072&e.flags)&&(vo=!0)}}return Co(e,t,a,s,n)}function _o(e,t,a){var s=t.pendingProps,n=s.children,r=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(Ol,Dl),Dl|=a;else{if(0===(1073741824&a))return e=null!==r?r.baseLanes|a:a,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cn(Ol,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==r?r.baseLanes:a,Cn(Ol,Dl),Dl|=s}else null!==r?(s=r.baseLanes|a,t.memoizedState=null):s=a,Cn(Ol,Dl),Dl|=s;return yo(e,t,n,a),t.child}function So(e,t){var a=t.ref;(null===e&&null!==a||null!==e&&e.ref!==a)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,a,s,n){var r=Dn(a)?En:An.current;return r=Ln(t,r),Pr(t,n),a=fi(e,t,a,s,r,n),s=gi(),null===e||vo?(nr&&s&&er(t),t.flags|=1,yo(e,t,a,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Wo(e,t,n))}function ko(e,t,a,s,n){if(Dn(a)){var r=!0;Rn(t)}else r=!1;if(Pr(t,n),null===t.stateNode)Ho(e,t),ro(t,a,s),oo(t,a,s,n),s=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=a.contextType;"object"===typeof c&&null!==c?c=Er(c):c=Ln(t,c=Dn(a)?En:An.current);var d=a.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==s||l!==c)&&io(t,i,s,c),Mr=!1;var h=t.memoizedState;i.state=h,Ur(t,s,i,n),l=t.memoizedState,o!==s||h!==l||Pn.current||Mr?("function"===typeof d&&(ao(t,a,d,s),l=t.memoizedState),(o=Mr||no(t,a,o,s,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),i.props=s,i.state=l,i.context=c,s=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,Ir(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=a.contextType)&&null!==l?l=Er(l):l=Ln(t,l=Dn(a)?En:An.current);var m=a.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,s,l),Mr=!1,h=t.memoizedState,i.state=h,Ur(t,s,i,n);var p=t.memoizedState;o!==u||h!==p||Pn.current||Mr?("function"===typeof m&&(ao(t,a,m,s),p=t.memoizedState),(c=Mr||no(t,a,c,s,h,p,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(s,p,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(s,p,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=p),i.props=s,i.state=p,i.context=l,s=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Ao(e,t,a,s,r,n)}function Ao(e,t,a,s,n,r){So(e,t);var i=0!==(128&t.flags);if(!s&&!i)return n&&In(t,a,!1),Wo(e,t,r);s=t.stateNode,bo.current=t;var o=i&&"function"!==typeof a.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&i?(t.child=yr(t,e.child,null,r),t.child=yr(t,null,o,r)):yo(e,t,o,r),t.memoizedState=s.state,n&&In(t,a,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Tn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Tn(0,t.context,!1),Xr(e,t.containerInfo)}function Eo(e,t,a,s,n){return mr(),pr(n),t.flags|=256,yo(e,t,a,s),t.child}var Lo,Do,Oo,To,Mo={dehydrated:null,treeContext:null,retryLane:0};function Ro(e){return{baseLanes:e,cachePool:null,transitions:null}}function Io(e,t,a){var s,n=t.pendingProps,i=Zr.current,o=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&i)),s?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Cn(Zr,1&i),null===e)return cr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=n.children,e=n.fallback,o?(n=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&n)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Rc(l,n,0,null),e=Mc(e,n,a,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Ro(a),t.memoizedState=Mo,e):Fo(t,l));if(null!==(i=e.memoizedState)&&null!==(s=i.dehydrated))return function(e,t,a,s,n,i,o){if(a)return 256&t.flags?(t.flags&=-257,zo(e,t,o,s=co(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=s.fallback,n=t.mode,s=Rc({mode:"visible",children:s.children},n,0,null),(i=Mc(i,n,o,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,0!==(1&t.mode)&&yr(t,e.child,null,o),t.child.memoizedState=Ro(o),t.memoizedState=Mo,i);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===n.data){if(s=n.nextSibling&&n.nextSibling.dataset)var l=s.dgst;return s=l,zo(e,t,o,s=co(i=Error(r(419)),s,void 0))}if(l=0!==(o&e.childLanes),vo||l){if(null!==(s=Pl)){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(s.suspendedLanes|o))?0:n)&&n!==i.retryLane&&(i.retryLane=n,Tr(e,n),ac(s,e,n,-1))}return fc(),zo(e,t,o,s=co(Error(r(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=kc.bind(null,e),n._reactRetry=t,null):(e=i.treeContext,sr=cn(n.nextSibling),ar=t,nr=!0,rr=null,null!==e&&(Yn[$n++]=Jn,Yn[$n++]=Kn,Yn[$n++]=Xn,Jn=e.id,Kn=e.overflow,Xn=t),t=Fo(t,s.children),t.flags|=4096,t)}(e,t,l,n,s,i,a);if(o){o=n.fallback,l=t.mode,s=(i=e.child).sibling;var c={mode:"hidden",children:n.children};return 0===(1&l)&&t.child!==i?((n=t.child).childLanes=0,n.pendingProps=c,t.deletions=null):(n=Oc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==s?o=Oc(s,o):(o=Mc(o,l,a,null)).flags|=2,o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,l=null===(l=e.child.memoizedState)?Ro(a):{baseLanes:l.baseLanes|a,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~a,t.memoizedState=Mo,n}return e=(o=e.child).sibling,n=Oc(o,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=a),n.return=t,n.sibling=null,null!==e&&(null===(a=t.deletions)?(t.deletions=[e],t.flags|=16):a.push(e)),t.child=n,t.memoizedState=null,n}function Fo(e,t){return(t=Rc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,a,s){return null!==s&&pr(s),yr(t,e.child,null,a),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,a){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Ar(e.return,t,a)}function qo(e,t,a,s,n){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:a,tailMode:n}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=s,r.tail=a,r.tailMode=n)}function Uo(e,t,a){var s=t.pendingProps,n=s.revealOrder,r=s.tail;if(yo(e,t,s.children,a),0!==(2&(s=Zr.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,a,t);else if(19===e.tag)Bo(e,a,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Cn(Zr,s),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(a=t.child,n=null;null!==a;)null!==(e=a.alternate)&&null===ei(e)&&(n=a),a=a.sibling;null===(a=n)?(n=t.child,t.child=null):(n=a.sibling,a.sibling=null),qo(t,!1,n,a,r);break;case"backwards":for(a=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===ei(e)){t.child=n;break}e=n.sibling,n.sibling=a,a=n,n=e}qo(t,!0,a,null,r);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,a){if(null!==e&&(t.dependencies=e.dependencies),Rl|=t.lanes,0===(a&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(a=Oc(e=t.child,e.pendingProps),t.child=a,a.return=t;null!==e.sibling;)e=e.sibling,(a=a.sibling=Oc(e,e.pendingProps)).return=t;a.sibling=null}return t.child}function Vo(e,t){if(!nr)switch(e.tailMode){case"hidden":t=e.tail;for(var a=null;null!==t;)null!==t.alternate&&(a=t),t=t.sibling;null===a?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var s=null;null!==a;)null!==a.alternate&&(s=a),a=a.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,a=0,s=0;if(t)for(var n=e.child;null!==n;)a|=n.lanes|n.childLanes,s|=14680064&n.subtreeFlags,s|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)a|=n.lanes|n.childLanes,s|=n.subtreeFlags,s|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=s,e.childLanes=a,t}function Yo(e,t,a){var s=t.pendingProps;switch(tr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Dn(t.type)&&On(),Go(t),null;case 3:return s=t.stateNode,Jr(),Sn(Pn),Sn(An),ai(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(ur(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==rr&&(ic(rr),rr=null))),Do(e,t),Go(t),null;case 5:Qr(t);var n=$r(Yr.current);if(a=t.type,null!==e&&null!=t.stateNode)Oo(e,t,a,s,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(r(166));return Go(t),null}if(e=$r(Vr.current),ur(t)){s=t.stateNode,a=t.type;var i=t.memoizedProps;switch(s[hn]=t,s[mn]=i,e=0!==(1&t.mode),a){case"dialog":Fs("cancel",s),Fs("close",s);break;case"iframe":case"object":case"embed":Fs("load",s);break;case"video":case"audio":for(n=0;n<Ts.length;n++)Fs(Ts[n],s);break;case"source":Fs("error",s);break;case"img":case"image":case"link":Fs("error",s),Fs("load",s);break;case"details":Fs("toggle",s);break;case"input":J(s,i),Fs("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Fs("invalid",s);break;case"textarea":ne(s,i),Fs("invalid",s)}for(var l in be(a,i),n=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?s.textContent!==c&&(!0!==i.suppressHydrationWarning&&Ks(s.textContent,c,e),n=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Ks(s.textContent,c,e),n=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fs("scroll",s)}switch(a){case"input":G(s),Z(s,i,!0);break;case"textarea":G(s),ie(s);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(s.onclick=Qs)}s=n,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(a)),"http://www.w3.org/1999/xhtml"===e?"script"===a?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=l.createElement(a,{is:s.is}):(e=l.createElement(a),"select"===a&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,a),e[hn]=t,e[mn]=s,Lo(e,t,!1,!1),t.stateNode=e;e:{switch(l=ve(a,s),a){case"dialog":Fs("cancel",e),Fs("close",e),n=s;break;case"iframe":case"object":case"embed":Fs("load",e),n=s;break;case"video":case"audio":for(n=0;n<Ts.length;n++)Fs(Ts[n],e);n=s;break;case"source":Fs("error",e),n=s;break;case"img":case"image":case"link":Fs("error",e),Fs("load",e),n=s;break;case"details":Fs("toggle",e),n=s;break;case"input":J(e,s),n=X(e,s),Fs("invalid",e);break;case"option":default:n=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},n=I({},s,{value:void 0}),Fs("invalid",e);break;case"textarea":ne(e,s),n=se(e,s),Fs("invalid",e)}for(i in be(a,n),c=n)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==a||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Fs("scroll",e):null!=d&&v(e,i,d,l))}switch(a){case"input":G(e),Z(e,s,!1);break;case"textarea":G(e),ie(e);break;case"option":null!=s.value&&e.setAttribute("value",""+W(s.value));break;case"select":e.multiple=!!s.multiple,null!=(i=s.value)?ae(e,!!s.multiple,i,!1):null!=s.defaultValue&&ae(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=Qs)}switch(a){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)To(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(r(166));if(a=$r(Yr.current),$r(Vr.current),ur(t)){if(s=t.stateNode,a=t.memoizedProps,s[hn]=t,(i=s.nodeValue!==a)&&null!==(e=ar))switch(e.tag){case 3:Ks(s.nodeValue,a,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ks(s.nodeValue,a,0!==(1&e.mode))}i&&(t.flags|=4)}else(s=(9===a.nodeType?a:a.ownerDocument).createTextNode(s))[hn]=t,t.stateNode=s}return Go(t),null;case 13:if(Sn(Zr),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(nr&&null!==sr&&0!==(1&t.mode)&&0===(128&t.flags))hr(),mr(),t.flags|=98560,i=!1;else if(i=ur(t),null!==s&&null!==s.dehydrated){if(null===e){if(!i)throw Error(r(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(r(317));i[hn]=t}else mr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),i=!1}else null!==rr&&(ic(rr),rr=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=a,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zr.current)?0===Tl&&(Tl=3):fc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Jr(),Do(e,t),null===e&&qs(t.stateNode.containerInfo),Go(t),null;case 10:return kr(t.type._context),Go(t),null;case 19:if(Sn(Zr),null===(i=t.memoizedState))return Go(t),null;if(s=0!==(128&t.flags),null===(l=i.rendering))if(s)Vo(i,!1);else{if(0!==Tl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Vo(i,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=a,a=t.child;null!==a;)e=s,(i=a).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),a=a.sibling;return Cn(Zr,1&Zr.current|2),t.child}e=e.sibling}null!==i.tail&&Ke()>Ul&&(t.flags|=128,s=!0,Vo(i,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ei(l))){if(t.flags|=128,s=!0,null!==(a=e.updateQueue)&&(t.updateQueue=a,t.flags|=4),Vo(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!nr)return Go(t),null}else 2*Ke()-i.renderingStartTime>Ul&&1073741824!==a&&(t.flags|=128,s=!0,Vo(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(a=i.last)?a.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ke(),t.sibling=null,a=Zr.current,Cn(Zr,s?1&a|2:1&a),t):(Go(t),null);case 22:case 23:return uc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function $o(e,t){switch(tr(t),t.tag){case 1:return Dn(t.type)&&On(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Jr(),Sn(Pn),Sn(An),ai(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qr(t),null;case 13:if(Sn(Zr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));mr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sn(Zr),null;case 4:return Jr(),null;case 10:return kr(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}Lo=function(e,t){for(var a=t.child;null!==a;){if(5===a.tag||6===a.tag)e.appendChild(a.stateNode);else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===t)break;for(;null===a.sibling;){if(null===a.return||a.return===t)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Do=function(){},Oo=function(e,t,a,s){var n=e.memoizedProps;if(n!==s){e=t.stateNode,$r(Vr.current);var r,i=null;switch(a){case"input":n=X(e,n),s=X(e,s),i=[];break;case"select":n=I({},n,{value:void 0}),s=I({},s,{value:void 0}),i=[];break;case"textarea":n=se(e,n),s=se(e,s),i=[];break;default:"function"!==typeof n.onClick&&"function"===typeof s.onClick&&(e.onclick=Qs)}for(d in be(a,s),a=null,n)if(!s.hasOwnProperty(d)&&n.hasOwnProperty(d)&&null!=n[d])if("style"===d){var l=n[d];for(r in l)l.hasOwnProperty(r)&&(a||(a={}),a[r]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=null!=n?n[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(r in l)!l.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(a||(a={}),a[r]="");for(r in c)c.hasOwnProperty(r)&&l[r]!==c[r]&&(a||(a={}),a[r]=c[r])}else a||(i||(i=[]),i.push(d,a)),a=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fs("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}a&&(i=i||[]).push("style",a);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},To=function(e,t,a,s){a!==s&&(t.flags|=4)};var Xo=!1,Jo=!1,Ko="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Zo(e,t){var a=e.ref;if(null!==a)if("function"===typeof a)try{a(null)}catch(s){_c(e,t,s)}else a.current=null}function el(e,t,a){try{a()}catch(s){_c(e,t,s)}}var tl=!1;function al(e,t,a){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var n=s=s.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&el(t,a,r)}n=n.next}while(n!==s)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var a=t=t.next;do{if((a.tag&e)===e){var s=a.create;a.destroy=s()}a=a.next}while(a!==t)}}function nl(e){var t=e.ref;if(null!==t){var a=e.stateNode;e.tag,e=a,"function"===typeof t?t(e):t.current=e}}function rl(e){var t=e.alternate;null!==t&&(e.alternate=null,rl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hn],delete t[mn],delete t[fn],delete t[gn],delete t[xn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,a){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===a.nodeType?a.parentNode.insertBefore(e,t):a.insertBefore(e,t):(8===a.nodeType?(t=a.parentNode).insertBefore(e,a):(t=a).appendChild(e),null!==(a=a._reactRootContainer)&&void 0!==a||null!==t.onclick||(t.onclick=Qs));else if(4!==s&&null!==(e=e.child))for(ll(e,t,a),e=e.sibling;null!==e;)ll(e,t,a),e=e.sibling}function cl(e,t,a){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?a.insertBefore(e,t):a.appendChild(e);else if(4!==s&&null!==(e=e.child))for(cl(e,t,a),e=e.sibling;null!==e;)cl(e,t,a),e=e.sibling}var dl=null,ul=!1;function hl(e,t,a){for(a=a.child;null!==a;)ml(e,t,a),a=a.sibling}function ml(e,t,a){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(nt,a)}catch(o){}switch(a.tag){case 5:Jo||Zo(a,t);case 6:var s=dl,n=ul;dl=null,hl(e,t,a),ul=n,null!==(dl=s)&&(ul?(e=dl,a=a.stateNode,8===e.nodeType?e.parentNode.removeChild(a):e.removeChild(a)):dl.removeChild(a.stateNode));break;case 18:null!==dl&&(ul?(e=dl,a=a.stateNode,8===e.nodeType?ln(e.parentNode,a):1===e.nodeType&&ln(e,a),Ut(e)):ln(dl,a.stateNode));break;case 4:s=dl,n=ul,dl=a.stateNode.containerInfo,ul=!0,hl(e,t,a),dl=s,ul=n;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(s=a.updateQueue)&&null!==(s=s.lastEffect))){n=s=s.next;do{var r=n,i=r.destroy;r=r.tag,void 0!==i&&(0!==(2&r)||0!==(4&r))&&el(a,t,i),n=n.next}while(n!==s)}hl(e,t,a);break;case 1:if(!Jo&&(Zo(a,t),"function"===typeof(s=a.stateNode).componentWillUnmount))try{s.props=a.memoizedProps,s.state=a.memoizedState,s.componentWillUnmount()}catch(o){_c(a,t,o)}hl(e,t,a);break;case 21:hl(e,t,a);break;case 22:1&a.mode?(Jo=(s=Jo)||null!==a.memoizedState,hl(e,t,a),Jo=s):hl(e,t,a);break;default:hl(e,t,a)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var a=e.stateNode;null===a&&(a=e.stateNode=new Ko),t.forEach((function(t){var s=Ac.bind(null,e,t);a.has(t)||(a.add(t),t.then(s,s))}))}}function fl(e,t){var a=t.deletions;if(null!==a)for(var s=0;s<a.length;s++){var n=a[s];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(r(160));ml(i,o,n),dl=null,ul=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(d){_c(n,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var a=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),xl(e),4&s){try{al(3,e,e.return),sl(3,e)}catch(g){_c(e,e.return,g)}try{al(5,e,e.return)}catch(g){_c(e,e.return,g)}}break;case 1:fl(t,e),xl(e),512&s&&null!==a&&Zo(a,a.return);break;case 5:if(fl(t,e),xl(e),512&s&&null!==a&&Zo(a,a.return),32&e.flags){var n=e.stateNode;try{he(n,"")}catch(g){_c(e,e.return,g)}}if(4&s&&null!=(n=e.stateNode)){var i=e.memoizedProps,o=null!==a?a.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&K(n,i),ve(l,o);var d=ve(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(n,h):"dangerouslySetInnerHTML"===u?ue(n,h):"children"===u?he(n,h):v(n,u,h,d)}switch(l){case"input":Q(n,i);break;case"textarea":re(n,i);break;case"select":var m=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ae(n,!!i.multiple,p,!1):m!==!!i.multiple&&(null!=i.defaultValue?ae(n,!!i.multiple,i.defaultValue,!0):ae(n,!!i.multiple,i.multiple?[]:"",!1))}n[mn]=i}catch(g){_c(e,e.return,g)}}break;case 6:if(fl(t,e),xl(e),4&s){if(null===e.stateNode)throw Error(r(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(g){_c(e,e.return,g)}}break;case 3:if(fl(t,e),xl(e),4&s&&null!==a&&a.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){_c(e,e.return,g)}break;case 4:default:fl(t,e),xl(e);break;case 13:fl(t,e),xl(e),8192&(n=e.child).flags&&(i=null!==n.memoizedState,n.stateNode.isHidden=i,!i||null!==n.alternate&&null!==n.alternate.memoizedState||(ql=Ke())),4&s&&pl(e);break;case 22:if(u=null!==a&&null!==a.memoizedState,1&e.mode?(Jo=(d=Jo)||u,fl(t,e),Jo=d):fl(t,e),xl(e),8192&s){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qo=e,u=e.child;null!==u;){for(h=Qo=u;null!==Qo;){switch(p=(m=Qo).child,m.tag){case 0:case 11:case 14:case 15:al(4,m,m.return);break;case 1:Zo(m,m.return);var f=m.stateNode;if("function"===typeof f.componentWillUnmount){s=m,a=m.return;try{t=s,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){_c(s,a,g)}}break;case 5:Zo(m,m.return);break;case 22:if(null!==m.memoizedState){jl(h);continue}}null!==p?(p.return=m,Qo=p):jl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{n=h.stateNode,d?"function"===typeof(i=n.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){_c(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){_c(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),xl(e),4&s&&pl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var a=e.return;null!==a;){if(il(a)){var s=a;break e}a=a.return}throw Error(r(160))}switch(s.tag){case 5:var n=s.stateNode;32&s.flags&&(he(n,""),s.flags&=-33),cl(e,ol(e),n);break;case 3:case 4:var i=s.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(r(161))}}catch(o){_c(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,a){Qo=e,vl(e,t,a)}function vl(e,t,a){for(var s=0!==(1&e.mode);null!==Qo;){var n=Qo,r=n.child;if(22===n.tag&&s){var i=null!==n.memoizedState||Xo;if(!i){var o=n.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Xo;var c=Jo;if(Xo=i,(Jo=l)&&!c)for(Qo=n;null!==Qo;)l=(i=Qo).child,22===i.tag&&null!==i.memoizedState?Nl(n):null!==l?(l.return=i,Qo=l):Nl(n);for(;null!==r;)Qo=r,vl(r,t,a),r=r.sibling;Qo=n,Xo=o,Jo=c}yl(e)}else 0!==(8772&n.subtreeFlags)&&null!==r?(r.return=n,Qo=r):yl(e)}}function yl(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var a=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||sl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Jo)if(null===a)s.componentDidMount();else{var n=t.elementType===t.type?a.memoizedProps:to(t.type,a.memoizedProps);s.componentDidUpdate(n,a.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Hr(t,i,s);break;case 3:var o=t.updateQueue;if(null!==o){if(a=null,null!==t.child)switch(t.child.tag){case 5:case 1:a=t.child.stateNode}Hr(t,o,a)}break;case 5:var l=t.stateNode;if(null===a&&4&t.flags){a=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&a.focus();break;case"img":c.src&&(a.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ut(h)}}}break;default:throw Error(r(163))}Jo||512&t.flags&&nl(t)}catch(m){_c(t,t.return,m)}}if(t===e){Qo=null;break}if(null!==(a=t.sibling)){a.return=t.return,Qo=a;break}Qo=t.return}}function jl(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Qo=a;break}Qo=t.return}}function Nl(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var a=t.return;try{sl(4,t)}catch(l){_c(t,a,l)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var n=t.return;try{s.componentDidMount()}catch(l){_c(t,n,l)}}var r=t.return;try{nl(t)}catch(l){_c(t,r,l)}break;case 5:var i=t.return;try{nl(t)}catch(l){_c(t,i,l)}}}catch(l){_c(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var wl,_l=Math.ceil,Sl=y.ReactCurrentDispatcher,Cl=y.ReactCurrentOwner,kl=y.ReactCurrentBatchConfig,Al=0,Pl=null,El=null,Ll=0,Dl=0,Ol=_n(0),Tl=0,Ml=null,Rl=0,Il=0,Fl=0,zl=null,Bl=null,ql=0,Ul=1/0,Hl=null,Wl=!1,Vl=null,Gl=null,Yl=!1,$l=null,Xl=0,Jl=0,Kl=null,Ql=-1,Zl=0;function ec(){return 0!==(6&Al)?Ke():-1!==Ql?Ql:Ql=Ke()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Ll?Ll&-Ll:null!==fr.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function ac(e,t,a,s){if(50<Jl)throw Jl=0,Kl=null,Error(r(185));xt(e,a,s),0!==(2&Al)&&e===Pl||(e===Pl&&(0===(2&Al)&&(Il|=a),4===Tl&&oc(e,Ll)),sc(e,s),1===a&&0===Al&&0===(1&t.mode)&&(Ul=Ke()+500,zn&&Un()))}function sc(e,t){var a=e.callbackNode;!function(e,t){for(var a=e.suspendedLanes,s=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes;0<r;){var i=31-it(r),o=1<<i,l=n[i];-1===l?0!==(o&a)&&0===(o&s)||(n[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),r&=~o}}(e,t);var s=ht(e,e===Pl?Ll:0);if(0===s)null!==a&&$e(a),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=a&&$e(a),1===t)0===e.tag?function(e){zn=!0,qn(e)}(lc.bind(null,e)):qn(lc.bind(null,e)),rn((function(){0===(6&Al)&&Un()})),a=null;else{switch(yt(s)){case 1:a=Ze;break;case 4:a=et;break;case 16:default:a=tt;break;case 536870912:a=st}a=Pc(a,nc.bind(null,e))}e.callbackPriority=t,e.callbackNode=a}}function nc(e,t){if(Ql=-1,Zl=0,0!==(6&Al))throw Error(r(327));var a=e.callbackNode;if(Nc()&&e.callbackNode!==a)return null;var s=ht(e,e===Pl?Ll:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=gc(e,s);else{t=s;var n=Al;Al|=2;var i=pc();for(Pl===e&&Ll===t||(Hl=null,Ul=Ke()+500,hc(e,t));;)try{bc();break}catch(l){mc(e,l)}Cr(),Sl.current=i,Al=n,null!==El?t=0:(Pl=null,Ll=0,t=Tl)}if(0!==t){if(2===t&&(0!==(n=pt(e))&&(s=n,t=rc(e,n))),1===t)throw a=Ml,hc(e,0),oc(e,s),sc(e,Ke()),a;if(6===t)oc(e,s);else{if(n=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var a=t.updateQueue;if(null!==a&&null!==(a=a.stores))for(var s=0;s<a.length;s++){var n=a[s],r=n.getSnapshot;n=n.value;try{if(!is(r(),n))return!1}catch(o){return!1}}}if(a=t.child,16384&t.subtreeFlags&&null!==a)a.return=t,t=a;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=gc(e,s))&&(0!==(i=pt(e))&&(s=i,t=rc(e,i))),1===t))throw a=Ml,hc(e,0),oc(e,s),sc(e,Ke()),a;switch(e.finishedWork=n,e.finishedLanes=s,t){case 0:case 1:throw Error(r(345));case 2:case 5:jc(e,Bl,Hl);break;case 3:if(oc(e,s),(130023424&s)===s&&10<(t=ql+500-Ke())){if(0!==ht(e,0))break;if(((n=e.suspendedLanes)&s)!==s){ec(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=an(jc.bind(null,e,Bl,Hl),t);break}jc(e,Bl,Hl);break;case 4:if(oc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,n=-1;0<s;){var o=31-it(s);i=1<<o,(o=t[o])>n&&(n=o),s&=~i}if(s=n,10<(s=(120>(s=Ke()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*_l(s/1960))-s)){e.timeoutHandle=an(jc.bind(null,e,Bl,Hl),s);break}jc(e,Bl,Hl);break;default:throw Error(r(329))}}}return sc(e,Ke()),e.callbackNode===a?nc.bind(null,e):null}function rc(e,t){var a=zl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=a,null!==t&&ic(t)),e}function ic(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function oc(e,t){for(t&=~Fl,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var a=31-it(t),s=1<<a;e[a]=-1,t&=~s}}function lc(e){if(0!==(6&Al))throw Error(r(327));Nc();var t=ht(e,0);if(0===(1&t))return sc(e,Ke()),null;var a=gc(e,t);if(0!==e.tag&&2===a){var s=pt(e);0!==s&&(t=s,a=rc(e,s))}if(1===a)throw a=Ml,hc(e,0),oc(e,t),sc(e,Ke()),a;if(6===a)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jc(e,Bl,Hl),sc(e,Ke()),null}function cc(e,t){var a=Al;Al|=1;try{return e(t)}finally{0===(Al=a)&&(Ul=Ke()+500,zn&&Un())}}function dc(e){null!==$l&&0===$l.tag&&0===(6&Al)&&Nc();var t=Al;Al|=1;var a=kl.transition,s=vt;try{if(kl.transition=null,vt=1,e)return e()}finally{vt=s,kl.transition=a,0===(6&(Al=t))&&Un()}}function uc(){Dl=Ol.current,Sn(Ol)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var a=e.timeoutHandle;if(-1!==a&&(e.timeoutHandle=-1,sn(a)),null!==El)for(a=El.return;null!==a;){var s=a;switch(tr(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&On();break;case 3:Jr(),Sn(Pn),Sn(An),ai();break;case 5:Qr(s);break;case 4:Jr();break;case 13:case 19:Sn(Zr);break;case 10:kr(s.type._context);break;case 22:case 23:uc()}a=a.return}if(Pl=e,El=e=Oc(e.current,null),Ll=Dl=t,Tl=0,Ml=null,Fl=Il=Rl=0,Bl=zl=null,null!==Lr){for(t=0;t<Lr.length;t++)if(null!==(s=(a=Lr[t]).interleaved)){a.interleaved=null;var n=s.next,r=a.pending;if(null!==r){var i=r.next;r.next=n,s.next=i}a.pending=s}Lr=null}return e}function mc(e,t){for(;;){var a=El;try{if(Cr(),si.current=Ki,ci){for(var s=ii.memoizedState;null!==s;){var n=s.queue;null!==n&&(n.pending=null),s=s.next}ci=!1}if(ri=0,li=oi=ii=null,di=!1,ui=0,Cl.current=null,null===a||null===a.return){Tl=1,Ml=t,El=null;break}e:{var i=e,o=a.return,l=a,c=t;if(t=Ll,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,xo(p,o,l,0,t),1&p.mode&&fo(i,d,t),c=d;var f=(t=p).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(i,d,t),fc();break e}c=Error(r(426))}else if(nr&&1&l.mode){var x=go(o);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),xo(x,o,l,0,t),pr(lo(c,l));break e}}i=c=lo(c,l),4!==Tl&&(Tl=2),null===zl?zl=[i]:zl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,qr(i,mo(0,c,t));break e;case 1:l=c;var b=i.type,v=i.stateNode;if(0===(128&i.flags)&&("function"===typeof b.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Gl||!Gl.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t,qr(i,po(i,l,t));break e}}i=i.return}while(null!==i)}yc(a)}catch(y){t=y,El===a&&null!==a&&(El=a=a.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=Ki,null===e?Ki:e}function fc(){0!==Tl&&3!==Tl&&2!==Tl||(Tl=4),null===Pl||0===(268435455&Rl)&&0===(268435455&Il)||oc(Pl,Ll)}function gc(e,t){var a=Al;Al|=2;var s=pc();for(Pl===e&&Ll===t||(Hl=null,hc(e,t));;)try{xc();break}catch(n){mc(e,n)}if(Cr(),Al=a,Sl.current=s,null!==El)throw Error(r(261));return Pl=null,Ll=0,Tl}function xc(){for(;null!==El;)vc(El)}function bc(){for(;null!==El&&!Xe();)vc(El)}function vc(e){var t=wl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?yc(e):El=t,Cl.current=null}function yc(e){var t=e;do{var a=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(a=Yo(a,t,Dl)))return void(El=a)}else{if(null!==(a=$o(a,t)))return a.flags&=32767,void(El=a);if(null===e)return Tl=6,void(El=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(El=t);El=t=e}while(null!==t);0===Tl&&(Tl=5)}function jc(e,t,a){var s=vt,n=kl.transition;try{kl.transition=null,vt=1,function(e,t,a,s){do{Nc()}while(null!==$l);if(0!==(6&Al))throw Error(r(327));a=e.finishedWork;var n=e.finishedLanes;if(null===a)return null;if(e.finishedWork=null,e.finishedLanes=0,a===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var i=a.lanes|a.childLanes;if(function(e,t){var a=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<a;){var n=31-it(a),r=1<<n;t[n]=0,s[n]=-1,e[n]=-1,a&=~r}}(e,i),e===Pl&&(El=Pl=null,Ll=0),0===(2064&a.subtreeFlags)&&0===(2064&a.flags)||Yl||(Yl=!0,Pc(tt,(function(){return Nc(),null}))),i=0!==(15990&a.flags),0!==(15990&a.subtreeFlags)||i){i=kl.transition,kl.transition=null;var o=vt;vt=1;var l=Al;Al|=4,Cl.current=null,function(e,t){if(Zs=Wt,hs(e=us())){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(a=(a=e.ownerDocument)&&a.defaultView||window).getSelection&&a.getSelection();if(s&&0!==s.rangeCount){a=s.anchorNode;var n=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{a.nodeType,i.nodeType}catch(j){a=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var p;h!==a||0!==n&&3!==h.nodeType||(l=o+n),h!==i||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(p=h.firstChild);)m=h,h=p;for(;;){if(h===e)break t;if(m===a&&++d===n&&(l=o),m===i&&++u===s&&(c=o),null!==(p=h.nextSibling))break;m=(h=m).parentNode}h=p}a=-1===l||-1===c?null:{start:l,end:c}}else a=null}a=a||{start:0,end:0}}else a=null;for(en={focusedElem:e,selectionRange:a},Wt=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,x=f.memoizedState,b=t.stateNode,v=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),x);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var y=t.stateNode.containerInfo;1===y.nodeType?y.textContent="":9===y.nodeType&&y.documentElement&&y.removeChild(y.documentElement);break;default:throw Error(r(163))}}catch(j){_c(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}f=tl,tl=!1}(e,a),gl(a,e),ms(en),Wt=!!Zs,en=Zs=null,e.current=a,bl(a,e,n),Je(),Al=l,vt=o,kl.transition=i}else e.current=a;if(Yl&&(Yl=!1,$l=e,Xl=n),i=e.pendingLanes,0===i&&(Gl=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(a.stateNode),sc(e,Ke()),null!==t)for(s=e.onRecoverableError,a=0;a<t.length;a++)n=t[a],s(n.value,{componentStack:n.stack,digest:n.digest});if(Wl)throw Wl=!1,e=Vl,Vl=null,e;0!==(1&Xl)&&0!==e.tag&&Nc(),i=e.pendingLanes,0!==(1&i)?e===Kl?Jl++:(Jl=0,Kl=e):Jl=0,Un()}(e,t,a,s)}finally{kl.transition=n,vt=s}return null}function Nc(){if(null!==$l){var e=yt(Xl),t=kl.transition,a=vt;try{if(kl.transition=null,vt=16>e?16:e,null===$l)var s=!1;else{if(e=$l,$l=null,Xl=0,0!==(6&Al))throw Error(r(331));var n=Al;for(Al|=4,Qo=e.current;null!==Qo;){var i=Qo,o=i.child;if(0!==(16&Qo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qo=d;null!==Qo;){var u=Qo;switch(u.tag){case 0:case 11:case 15:al(8,u,i)}var h=u.child;if(null!==h)h.return=u,Qo=h;else for(;null!==Qo;){var m=(u=Qo).sibling,p=u.return;if(rl(u),u===d){Qo=null;break}if(null!==m){m.return=p,Qo=m;break}Qo=p}}}var f=i.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}Qo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(i=Qo).flags))switch(i.tag){case 0:case 11:case 15:al(9,i,i.return)}var b=i.sibling;if(null!==b){b.return=i.return,Qo=b;break e}Qo=i.return}}var v=e.current;for(Qo=v;null!==Qo;){var y=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==y)y.return=o,Qo=y;else e:for(o=v;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(N){_c(l,l.return,N)}if(l===o){Qo=null;break e}var j=l.sibling;if(null!==j){j.return=l.return,Qo=j;break e}Qo=l.return}}if(Al=n,Un(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(nt,e)}catch(N){}s=!0}return s}finally{vt=a,kl.transition=t}}return!1}function wc(e,t,a){e=zr(e,t=mo(0,t=lo(a,t),1),1),t=ec(),null!==e&&(xt(e,1,t),sc(e,t))}function _c(e,t,a){if(3===e.tag)wc(e,e,a);else for(;null!==t;){if(3===t.tag){wc(t,e,a);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Gl||!Gl.has(s))){t=zr(t,e=po(t,e=lo(a,e),1),1),e=ec(),null!==t&&(xt(t,1,e),sc(t,e));break}}t=t.return}}function Sc(e,t,a){var s=e.pingCache;null!==s&&s.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&a,Pl===e&&(Ll&a)===a&&(4===Tl||3===Tl&&(130023424&Ll)===Ll&&500>Ke()-ql?hc(e,0):Fl|=a),sc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var a=ec();null!==(e=Tr(e,t))&&(xt(e,t,a),sc(e,a))}function kc(e){var t=e.memoizedState,a=0;null!==t&&(a=t.retryLane),Cc(e,a)}function Ac(e,t){var a=0;switch(e.tag){case 13:var s=e.stateNode,n=e.memoizedState;null!==n&&(a=n.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(r(314))}null!==s&&s.delete(t),Cc(e,a)}function Pc(e,t){return Ye(e,t)}function Ec(e,t,a,s){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,a,s){return new Ec(e,t,a,s)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var a=e.alternate;return null===a?((a=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=t,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=14680064&e.flags,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,t=e.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a}function Tc(e,t,a,s,n,i){var o=2;if(s=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case w:return Mc(a.children,n,i,t);case _:o=8,n|=8;break;case S:return(e=Lc(12,a,t,2|n)).elementType=S,e.lanes=i,e;case P:return(e=Lc(13,a,t,n)).elementType=P,e.lanes=i,e;case E:return(e=Lc(19,a,t,n)).elementType=E,e.lanes=i,e;case O:return Rc(a,n,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case k:o=9;break e;case A:o=11;break e;case L:o=14;break e;case D:o=16,s=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=Lc(o,a,t,n)).elementType=e,t.type=s,t.lanes=i,t}function Mc(e,t,a,s){return(e=Lc(7,e,s,t)).lanes=a,e}function Rc(e,t,a,s){return(e=Lc(22,e,s,t)).elementType=O,e.lanes=a,e.stateNode={isHidden:!1},e}function Ic(e,t,a){return(e=Lc(6,e,null,t)).lanes=a,e}function Fc(e,t,a){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=a,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,a,s,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=s,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Bc(e,t,a,s,n,r,i,o,l){return e=new zc(e,t,a,o,l),1===t?(t=1,!0===r&&(t|=8)):t=0,r=Lc(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:s,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rr(r),e}function qc(e){if(!e)return kn;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var a=e.type;if(Dn(a))return Mn(e,a,t)}return t}function Uc(e,t,a,s,n,r,i,o,l){return(e=Bc(a,s,!0,e,0,r,0,o,l)).context=qc(null),a=e.current,(r=Fr(s=ec(),n=tc(a))).callback=void 0!==t&&null!==t?t:null,zr(a,r,n),e.current.lanes=n,xt(e,n,s),sc(e,s),e}function Hc(e,t,a,s){var n=t.current,r=ec(),i=tc(n);return a=qc(a),null===t.context?t.context=a:t.pendingContext=a,(t=Fr(r,i)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=zr(n,t,i))&&(ac(e,n,i,r),Br(e,n,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var a=e.retryLane;e.retryLane=0!==a&&a<t?a:t}}function Gc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}wl=function(e,t,a){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pn.current)vo=!0;else{if(0===(e.lanes&a)&&0===(128&t.flags))return vo=!1,function(e,t,a){switch(t.tag){case 3:Po(t),mr();break;case 5:Kr(t);break;case 1:Dn(t.type)&&Rn(t);break;case 4:Xr(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,n=t.memoizedProps.value;Cn(Nr,s._currentValue),s._currentValue=n;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(Cn(Zr,1&Zr.current),t.flags|=128,null):0!==(a&t.child.childLanes)?Io(e,t,a):(Cn(Zr,1&Zr.current),null!==(e=Wo(e,t,a))?e.sibling:null);Cn(Zr,1&Zr.current);break;case 19:if(s=0!==(a&t.childLanes),0!==(128&e.flags)){if(s)return Uo(e,t,a);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),Cn(Zr,Zr.current),s)break;return null;case 22:case 23:return t.lanes=0,_o(e,t,a)}return Wo(e,t,a)}(e,t,a);vo=0!==(131072&e.flags)}else vo=!1,nr&&0!==(1048576&t.flags)&&Zn(t,Gn,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Ho(e,t),e=t.pendingProps;var n=Ln(t,An.current);Pr(t,a),n=fi(null,t,s,e,n,a);var i=gi();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dn(s)?(i=!0,Rn(t)):i=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Rr(t),n.updater=so,t.stateNode=n,n._reactInternals=t,oo(t,s,e,a),t=Ao(null,t,s,!0,i,a)):(t.tag=0,nr&&i&&er(t),yo(null,t,n,a),t=t.child),t;case 16:s=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,s=(n=s._init)(s._payload),t.type=s,n=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===L)return 14}return 2}(s),e=to(s,e),n){case 0:t=Co(null,t,s,e,a);break e;case 1:t=ko(null,t,s,e,a);break e;case 11:t=jo(null,t,s,e,a);break e;case 14:t=No(null,t,s,to(s.type,e),a);break e}throw Error(r(306,s,""))}return t;case 0:return s=t.type,n=t.pendingProps,Co(e,t,s,n=t.elementType===s?n:to(s,n),a);case 1:return s=t.type,n=t.pendingProps,ko(e,t,s,n=t.elementType===s?n:to(s,n),a);case 3:e:{if(Po(t),null===e)throw Error(r(387));s=t.pendingProps,n=(i=t.memoizedState).element,Ir(e,t),Ur(t,s,null,a);var o=t.memoizedState;if(s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Eo(e,t,s,a,n=lo(Error(r(423)),t));break e}if(s!==n){t=Eo(e,t,s,a,n=lo(Error(r(424)),t));break e}for(sr=cn(t.stateNode.containerInfo.firstChild),ar=t,nr=!0,rr=null,a=jr(t,null,s,a),t.child=a;a;)a.flags=-3&a.flags|4096,a=a.sibling}else{if(mr(),s===n){t=Wo(e,t,a);break e}yo(e,t,s,a)}t=t.child}return t;case 5:return Kr(t),null===e&&cr(t),s=t.type,n=t.pendingProps,i=null!==e?e.memoizedProps:null,o=n.children,tn(s,n)?o=null:null!==i&&tn(s,i)&&(t.flags|=32),So(e,t),yo(e,t,o,a),t.child;case 6:return null===e&&cr(t),null;case 13:return Io(e,t,a);case 4:return Xr(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=yr(t,null,s,a):yo(e,t,s,a),t.child;case 11:return s=t.type,n=t.pendingProps,jo(e,t,s,n=t.elementType===s?n:to(s,n),a);case 7:return yo(e,t,t.pendingProps,a),t.child;case 8:case 12:return yo(e,t,t.pendingProps.children,a),t.child;case 10:e:{if(s=t.type._context,n=t.pendingProps,i=t.memoizedProps,o=n.value,Cn(Nr,s._currentValue),s._currentValue=o,null!==i)if(is(i.value,o)){if(i.children===n.children&&!Pn.current){t=Wo(e,t,a);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===i.tag){(c=Fr(-1,a&-a)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=a,null!==(c=i.alternate)&&(c.lanes|=a),Ar(i.return,a,t),l.lanes|=a;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(r(341));o.lanes|=a,null!==(l=o.alternate)&&(l.lanes|=a),Ar(o,a,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}yo(e,t,n.children,a),t=t.child}return t;case 9:return n=t.type,s=t.pendingProps.children,Pr(t,a),s=s(n=Er(n)),t.flags|=1,yo(e,t,s,a),t.child;case 14:return n=to(s=t.type,t.pendingProps),No(e,t,s,n=to(s.type,n),a);case 15:return wo(e,t,t.type,t.pendingProps,a);case 17:return s=t.type,n=t.pendingProps,n=t.elementType===s?n:to(s,n),Ho(e,t),t.tag=1,Dn(s)?(e=!0,Rn(t)):e=!1,Pr(t,a),ro(t,s,n),oo(t,s,n,a),Ao(null,t,s,!0,e,a);case 19:return Uo(e,t,a);case 22:return _o(e,t,a)}throw Error(r(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Zc(e,t,a,s,n){var r=a._reactRootContainer;if(r){var i=r;if("function"===typeof n){var o=n;n=function(){var e=Wc(i);o.call(e)}}Hc(t,i,e,n)}else i=function(e,t,a,s,n){if(n){if("function"===typeof s){var r=s;s=function(){var e=Wc(i);r.call(e)}}var i=Uc(t,s,e,0,null,!1,0,"",Qc);return e._reactRootContainer=i,e[pn]=i.current,qs(8===e.nodeType?e.parentNode:e),dc(),i}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof s){var o=s;s=function(){var e=Wc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[pn]=l.current,qs(8===e.nodeType?e.parentNode:e),dc((function(){Hc(t,l,a,s)})),l}(a,t,e,n,s);return Wc(i)}Xc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Hc(e,t,null,null)},Xc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Hc(null,e,null,null)})),t[pn]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_t();e={blockedOn:null,target:e,priority:t};for(var a=0;a<Ot.length&&0!==t&&t<Ot[a].priority;a++);Ot.splice(a,0,e),0===a&&It(e)}},jt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var a=ut(t.pendingLanes);0!==a&&(bt(t,1|a),sc(t,Ke()),0===(6&Al)&&(Ul=Ke()+500,Un()))}break;case 13:dc((function(){var t=Tr(e,1);if(null!==t){var a=ec();ac(t,e,1,a)}})),Gc(e,1)}},Nt=function(e){if(13===e.tag){var t=Tr(e,134217728);if(null!==t)ac(t,e,134217728,ec());Gc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),a=Tr(e,t);if(null!==a)ac(a,e,t,ec());Gc(e,t)}},_t=function(){return vt},St=function(e,t){var a=vt;try{return vt=e,t()}finally{vt=a}},Ne=function(e,t,a){switch(t){case"input":if(Q(e,a),t=a.name,"radio"===a.type&&null!=t){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<a.length;t++){var s=a[t];if(s!==e&&s.form===e.form){var n=jn(s);if(!n)throw Error(r(90));Y(s),Q(s,n)}}}break;case"textarea":re(e,a);break;case"select":null!=(t=a.value)&&ae(e,!!a.multiple,t,!1)}},Ae=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[vn,yn,jn,Ce,ke,cc]},td={findFiberByHostInstance:bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ad={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:y.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{nt=sd.inject(ad),rt=sd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(r(200));return function(e,t,a){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==s?null:""+s,children:e,containerInfo:t,implementation:a}}(e,t,null,a)},t.createRoot=function(e,t){if(!Jc(e))throw Error(r(299));var a=!1,s="",n=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(a=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=Bc(e,1,!1,null,0,a,0,s,n),e[pn]=t.current,qs(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,a){if(!Kc(t))throw Error(r(200));return Zc(null,e,t,!0,a)},t.hydrateRoot=function(e,t,a){if(!Jc(e))throw Error(r(405));var s=null!=a&&a.hydratedSources||null,n=!1,i="",o=Yc;if(null!==a&&void 0!==a&&(!0===a.unstable_strictMode&&(n=!0),void 0!==a.identifierPrefix&&(i=a.identifierPrefix),void 0!==a.onRecoverableError&&(o=a.onRecoverableError)),t=Uc(t,null,e,1,null!=a?a:null,n,0,i,o),e[pn]=t.current,qs(e),s)for(e=0;e<s.length;e++)n=(n=(a=s[e])._getVersion)(a._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[a,n]:t.mutableSourceEagerHydrationData.push(a,n);return new Xc(t)},t.render=function(e,t,a){if(!Kc(t))throw Error(r(200));return Zc(null,e,t,!1,a)},t.unmountComponentAtNode=function(e){if(!Kc(e))throw Error(r(40));return!!e._reactRootContainer&&(dc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pn]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,a,s){if(!Kc(a))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Zc(e,t,a,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},2926:(e,t,a)=>{"use strict";function s(e){return e+.5|0}a.d(t,{$:()=>_t,A:()=>Ie,B:()=>Re,C:()=>Nt,D:()=>ke,E:()=>Ft,F:()=>Y,G:()=>va,H:()=>me,I:()=>ua,J:()=>Na,K:()=>ja,L:()=>We,M:()=>da,N:()=>ye,O:()=>U,P:()=>le,Q:()=>G,R:()=>qt,S:()=>De,T:()=>ce,U:()=>Se,V:()=>gt,W:()=>Oe,X:()=>bt,Y:()=>wt,Z:()=>Pt,_:()=>Ue,a:()=>Bt,a0:()=>zt,a1:()=>Ge,a2:()=>Ye,a3:()=>dt,a4:()=>Q,a5:()=>se,a6:()=>ut,a7:()=>re,a8:()=>Wt,a9:()=>Ht,aA:()=>Aa,aB:()=>Pa,aC:()=>$e,aD:()=>Ea,aE:()=>jt,aF:()=>Ae,aG:()=>R,aH:()=>we,aI:()=>ve,aJ:()=>Ne,aK:()=>be,aL:()=>Ce,aM:()=>ct,aN:()=>ge,aO:()=>xt,aP:()=>Fe,aQ:()=>Me,aa:()=>Vt,ab:()=>Z,ac:()=>I,ad:()=>Ve,ae:()=>ya,af:()=>vt,ag:()=>ie,ah:()=>Ba,ai:()=>$,aj:()=>oe,ak:()=>Te,al:()=>Mt,am:()=>ca,an:()=>Ma,ao:()=>Ta,ap:()=>_a,aq:()=>Sa,ar:()=>wa,as:()=>St,at:()=>Ct,au:()=>yt,av:()=>Et,aw:()=>Rt,ax:()=>It,ay:()=>Oa,az:()=>Ee,b:()=>z,b4:()=>he,b5:()=>pe,b6:()=>fe,c:()=>at,d:()=>ft,e:()=>et,f:()=>ae,g:()=>q,h:()=>ne,i:()=>B,j:()=>Ut,k:()=>F,l:()=>Be,m:()=>W,n:()=>V,o:()=>ot,p:()=>Le,q:()=>Xe,r:()=>He,s:()=>xe,t:()=>_e,u:()=>qe,v:()=>H,w:()=>Je,x:()=>je,y:()=>aa,z:()=>xa});const n=(e,t,a)=>Math.max(Math.min(e,a),t);function r(e){return n(s(2.55*e),0,255)}function i(e){return n(s(255*e),0,255)}function o(e){return n(s(e/2.55)/100,0,1)}function l(e){return n(s(100*e),0,100)}const c={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},d=[..."0123456789ABCDEF"],u=e=>d[15&e],h=e=>d[(240&e)>>4]+d[15&e],m=e=>(240&e)>>4===(15&e);function p(e){var t=(e=>m(e.r)&&m(e.g)&&m(e.b)&&m(e.a))(e)?u:h;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const f=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function g(e,t,a){const s=t*Math.min(a,1-a),n=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return a-s*Math.max(Math.min(n-3,9-n,1),-1)};return[n(0),n(8),n(4)]}function x(e,t,a){const s=function(s){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(s+e/60)%6;return a-a*t*Math.max(Math.min(n,4-n,1),0)};return[s(5),s(3),s(1)]}function b(e,t,a){const s=g(e,1,.5);let n;for(t+a>1&&(n=1/(t+a),t*=n,a*=n),n=0;n<3;n++)s[n]*=1-t-a,s[n]+=t;return s}function v(e){const t=e.r/255,a=e.g/255,s=e.b/255,n=Math.max(t,a,s),r=Math.min(t,a,s),i=(n+r)/2;let o,l,c;return n!==r&&(c=n-r,l=i>.5?c/(2-n-r):c/(n+r),o=function(e,t,a,s,n){return e===n?(t-a)/s+(t<a?6:0):t===n?(a-e)/s+2:(e-t)/s+4}(t,a,s,c,n),o=60*o+.5),[0|o,l||0,i]}function y(e,t,a,s){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,a,s)).map(i)}function j(e,t,a){return y(g,e,t,a)}function N(e){return(e%360+360)%360}function w(e){const t=f.exec(e);let a,s=255;if(!t)return;t[5]!==a&&(s=t[6]?r(+t[5]):i(+t[5]));const n=N(+t[2]),o=+t[3]/100,l=+t[4]/100;return a="hwb"===t[1]?function(e,t,a){return y(b,e,t,a)}(n,o,l):"hsv"===t[1]?function(e,t,a){return y(x,e,t,a)}(n,o,l):j(n,o,l),{r:a[0],g:a[1],b:a[2],a:s}}const _={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},S={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let C;function k(e){C||(C=function(){const e={},t=Object.keys(S),a=Object.keys(_);let s,n,r,i,o;for(s=0;s<t.length;s++){for(i=o=t[s],n=0;n<a.length;n++)r=a[n],o=o.replace(r,_[r]);r=parseInt(S[i],16),e[o]=[r>>16&255,r>>8&255,255&r]}return e}(),C.transparent=[0,0,0,0]);const t=C[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const A=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const P=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,E=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function L(e,t,a){if(e){let s=v(e);s[t]=Math.max(0,Math.min(s[t]+s[t]*a,0===t?360:1)),s=j(s),e.r=s[0],e.g=s[1],e.b=s[2]}}function D(e,t){return e?Object.assign(t||{},e):e}function O(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=i(e[3]))):(t=D(e,{r:0,g:0,b:0,a:1})).a=i(t.a),t}function T(e){return"r"===e.charAt(0)?function(e){const t=A.exec(e);let a,s,i,o=255;if(t){if(t[7]!==a){const e=+t[7];o=t[8]?r(e):n(255*e,0,255)}return a=+t[1],s=+t[3],i=+t[5],a=255&(t[2]?r(a):n(a,0,255)),s=255&(t[4]?r(s):n(s,0,255)),i=255&(t[6]?r(i):n(i,0,255)),{r:a,g:s,b:i,a:o}}}(e):w(e)}class M{constructor(e){if(e instanceof M)return e;const t=typeof e;let a;"object"===t?a=O(e):"string"===t&&(a=function(e){var t,a=e.length;return"#"===e[0]&&(4===a||5===a?t={r:255&17*c[e[1]],g:255&17*c[e[2]],b:255&17*c[e[3]],a:5===a?17*c[e[4]]:255}:7!==a&&9!==a||(t={r:c[e[1]]<<4|c[e[2]],g:c[e[3]]<<4|c[e[4]],b:c[e[5]]<<4|c[e[6]],a:9===a?c[e[7]]<<4|c[e[8]]:255})),t}(e)||k(e)||T(e)),this._rgb=a,this._valid=!!a}get valid(){return this._valid}get rgb(){var e=D(this._rgb);return e&&(e.a=o(e.a)),e}set rgb(e){this._rgb=O(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(o(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?p(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=v(e),a=t[0],s=l(t[1]),n=l(t[2]);return e.a<255?"hsla(".concat(a,", ").concat(s,"%, ").concat(n,"%, ").concat(o(e.a),")"):"hsl(".concat(a,", ").concat(s,"%, ").concat(n,"%)")}(this._rgb):void 0}mix(e,t){if(e){const a=this.rgb,s=e.rgb;let n;const r=t===n?.5:t,i=2*r-1,o=a.a-s.a,l=((i*o===-1?i:(i+o)/(1+i*o))+1)/2;n=1-l,a.r=255&l*a.r+n*s.r+.5,a.g=255&l*a.g+n*s.g+.5,a.b=255&l*a.b+n*s.b+.5,a.a=r*a.a+(1-r)*s.a,this.rgb=a}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,a){const s=E(o(e.r)),n=E(o(e.g)),r=E(o(e.b));return{r:i(P(s+a*(E(o(t.r))-s))),g:i(P(n+a*(E(o(t.g))-n))),b:i(P(r+a*(E(o(t.b))-r))),a:e.a+a*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new M(this.rgb)}alpha(e){return this._rgb.a=i(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=s(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return L(this._rgb,2,e),this}darken(e){return L(this._rgb,2,-e),this}saturate(e){return L(this._rgb,1,e),this}desaturate(e){return L(this._rgb,1,-e),this}rotate(e){return function(e,t){var a=v(e);a[0]=N(a[0]+t),a=j(a),e.r=a[0],e.g=a[1],e.b=a[2]}(this._rgb,e),this}}function R(){}const I=(()=>{let e=0;return()=>e++})();function F(e){return null===e||void 0===e}function z(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function B(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function q(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function U(e,t){return q(e)?e:t}function H(e,t){return"undefined"===typeof e?t:e}const W=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t,V=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function G(e,t,a){if(e&&"function"===typeof e.call)return e.apply(a,t)}function Y(e,t,a,s){let n,r,i;if(z(e))if(r=e.length,s)for(n=r-1;n>=0;n--)t.call(a,e[n],n);else for(n=0;n<r;n++)t.call(a,e[n],n);else if(B(e))for(i=Object.keys(e),r=i.length,n=0;n<r;n++)t.call(a,e[i[n]],i[n])}function $(e,t){let a,s,n,r;if(!e||!t||e.length!==t.length)return!1;for(a=0,s=e.length;a<s;++a)if(n=e[a],r=t[a],n.datasetIndex!==r.datasetIndex||n.index!==r.index)return!1;return!0}function X(e){if(z(e))return e.map(X);if(B(e)){const t=Object.create(null),a=Object.keys(e),s=a.length;let n=0;for(;n<s;++n)t[a[n]]=X(e[a[n]]);return t}return e}function J(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function K(e,t,a,s){if(!J(e))return;const n=t[e],r=a[e];B(n)&&B(r)?Q(n,r,s):t[e]=X(r)}function Q(e,t,a){const s=z(t)?t:[t],n=s.length;if(!B(e))return e;const r=(a=a||{}).merger||K;let i;for(let o=0;o<n;++o){if(i=s[o],!B(i))continue;const t=Object.keys(i);for(let s=0,n=t.length;s<n;++s)r(t[s],e,i,a)}return e}function Z(e,t){return Q(e,t,{merger:ee})}function ee(e,t,a){if(!J(e))return;const s=t[e],n=a[e];B(s)&&B(n)?Z(s,n):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=X(n))}const te={"":e=>e,x:e=>e.x,y:e=>e.y};function ae(e,t){const a=te[t]||(te[t]=function(e){const t=function(e){const t=e.split("."),a=[];let s="";for(const n of t)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(a.push(s),s="");return a}(e);return e=>{for(const a of t){if(""===a)break;e=e&&e[a]}return e}}(t));return a(e)}function se(e){return e.charAt(0).toUpperCase()+e.slice(1)}const ne=e=>"undefined"!==typeof e,re=e=>"function"===typeof e,ie=(e,t)=>{if(e.size!==t.size)return!1;for(const a of e)if(!t.has(a))return!1;return!0};function oe(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}const le=Math.PI,ce=2*le,de=ce+le,ue=Number.POSITIVE_INFINITY,he=le/180,me=le/2,pe=le/4,fe=2*le/3,ge=Math.log10,xe=Math.sign;function be(e,t,a){return Math.abs(e-t)<a}function ve(e){const t=Math.round(e);e=be(e,t,e/1e3)?t:e;const a=Math.pow(10,Math.floor(ge(e))),s=e/a;return(s<=1?1:s<=2?2:s<=5?5:10)*a}function ye(e){const t=[],a=Math.sqrt(e);let s;for(s=1;s<a;s++)e%s===0&&(t.push(s),t.push(e/s));return a===(0|a)&&t.push(a),t.sort(((e,t)=>e-t)).pop(),t}function je(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Ne(e,t){const a=Math.round(e);return a-t<=e&&a+t>=e}function we(e,t,a){let s,n,r;for(s=0,n=e.length;s<n;s++)r=e[s][a],isNaN(r)||(t.min=Math.min(t.min,r),t.max=Math.max(t.max,r))}function _e(e){return e*(le/180)}function Se(e){return e*(180/le)}function Ce(e){if(!q(e))return;let t=1,a=0;for(;Math.round(e*t)/t!==e;)t*=10,a++;return a}function ke(e,t){const a=t.x-e.x,s=t.y-e.y,n=Math.sqrt(a*a+s*s);let r=Math.atan2(s,a);return r<-.5*le&&(r+=ce),{angle:r,distance:n}}function Ae(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Pe(e,t){return(e-t+de)%ce-le}function Ee(e){return(e%ce+ce)%ce}function Le(e,t,a,s){const n=Ee(e),r=Ee(t),i=Ee(a),o=Ee(r-n),l=Ee(i-n),c=Ee(n-r),d=Ee(n-i);return n===r||n===i||s&&r===i||o>l&&c<d}function De(e,t,a){return Math.max(t,Math.min(a,e))}function Oe(e){return De(e,-32768,32767)}function Te(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,a)-s&&e<=Math.max(t,a)+s}function Me(e,t,a){a=a||(a=>e[a]<t);let s,n=e.length-1,r=0;for(;n-r>1;)s=r+n>>1,a(s)?r=s:n=s;return{lo:r,hi:n}}const Re=(e,t,a,s)=>Me(e,a,s?s=>{const n=e[s][t];return n<a||n===a&&e[s+1][t]===a}:s=>e[s][t]<a),Ie=(e,t,a)=>Me(e,a,(s=>e[s][t]>=a));function Fe(e,t,a){let s=0,n=e.length;for(;s<n&&e[s]<t;)s++;for(;n>s&&e[n-1]>a;)n--;return s>0||n<e.length?e.slice(s,n):e}const ze=["push","pop","shift","splice","unshift"];function Be(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ze.forEach((t=>{const a="_onData"+se(t),s=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const i=s.apply(this,n);return e._chartjs.listeners.forEach((e=>{"function"===typeof e[a]&&e[a](...n)})),i}})})))}function qe(e,t){const a=e._chartjs;if(!a)return;const s=a.listeners,n=s.indexOf(t);-1!==n&&s.splice(n,1),s.length>0||(ze.forEach((t=>{delete e[t]})),delete e._chartjs)}function Ue(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const He="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function We(e,t){let a=[],s=!1;return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];a=r,s||(s=!0,He.call(window,(()=>{s=!1,e.apply(t,a)})))}}function Ve(e,t){let a;return function(){for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];return t?(clearTimeout(a),a=setTimeout(e,t,n)):e.apply(this,n),t}}const Ge=e=>"start"===e?"left":"end"===e?"right":"center",Ye=(e,t,a)=>"start"===e?t:"end"===e?a:(t+a)/2,$e=(e,t,a,s)=>e===(s?"left":"right")?a:"center"===e?(t+a)/2:t;function Xe(e,t,a){const s=t.length;let n=0,r=s;if(e._sorted){const{iScale:i,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=i.axis,{min:u,max:h,minDefined:m,maxDefined:p}=i.getUserBounds();if(m){if(n=Math.min(Re(l,d,u).lo,a?s:Re(t,d,i.getPixelForValue(u)).lo),c){const e=l.slice(0,n+1).reverse().findIndex((e=>!F(e[o.axis])));n-=Math.max(0,e)}n=De(n,0,s-1)}if(p){let e=Math.max(Re(l,i.axis,h,!0).hi+1,a?0:Re(t,d,i.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex((e=>!F(e[o.axis])));e+=Math.max(0,t)}r=De(e,n,s)-n}else r=s-n}return{start:n,count:r}}function Je(e){const{xScale:t,yScale:a,_scaleRanges:s}=e,n={xmin:t.min,xmax:t.max,ymin:a.min,ymax:a.max};if(!s)return e._scaleRanges=n,!0;const r=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==a.min||s.ymax!==a.max;return Object.assign(s,n),r}const Ke=e=>0===e||1===e,Qe=(e,t,a)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*ce/a),Ze=(e,t,a)=>Math.pow(2,-10*e)*Math.sin((e-t)*ce/a)+1,et={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*me),easeOutSine:e=>Math.sin(e*me),easeInOutSine:e=>-.5*(Math.cos(le*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Ke(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Ke(e)?e:Qe(e,.075,.3),easeOutElastic:e=>Ke(e)?e:Ze(e,.075,.3),easeInOutElastic(e){const t=.1125;return Ke(e)?e:e<.5?.5*Qe(2*e,t,.45):.5+.5*Ze(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-et.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,a=2.75;return e<1/a?t*e*e:e<2/a?t*(e-=1.5/a)*e+.75:e<2.5/a?t*(e-=2.25/a)*e+.9375:t*(e-=2.625/a)*e+.984375},easeInOutBounce:e=>e<.5?.5*et.easeInBounce(2*e):.5*et.easeOutBounce(2*e-1)+.5};function tt(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function at(e){return tt(e)?e:new M(e)}function st(e){return tt(e)?e:new M(e).saturate(.5).darken(.1).hexString()}const nt=["x","y","borderWidth","radius","tension"],rt=["color","borderColor","backgroundColor"];const it=new Map;function ot(e,t,a){return function(e,t){t=t||{};const a=e+JSON.stringify(t);let s=it.get(a);return s||(s=new Intl.NumberFormat(e,t),it.set(a,s)),s}(t,a).format(e)}const lt={values:e=>z(e)?e:""+e,numeric(e,t,a){if(0===e)return"0";const s=this.chart.options.locale;let n,r=e;if(a.length>1){const t=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(t<1e-4||t>1e15)&&(n="scientific"),r=function(e,t){let a=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(a)>=1&&e!==Math.floor(e)&&(a=e-Math.floor(e));return a}(e,a)}const i=ge(Math.abs(r)),o=isNaN(i)?1:Math.max(Math.min(-1*Math.floor(i),20),0),l={notation:n,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),ot(e,s,l)},logarithmic(e,t,a){if(0===e)return"0";const s=a[t].significand||e/Math.pow(10,Math.floor(ge(e)));return[1,2,3,5,10,15].includes(s)||t>.8*a.length?lt.numeric.call(this,e,t,a):""}};var ct={formatters:lt};const dt=Object.create(null),ut=Object.create(null);function ht(e,t){if(!t)return e;const a=t.split(".");for(let s=0,n=a.length;s<n;++s){const t=a[s];e=e[t]||(e[t]=Object.create(null))}return e}function mt(e,t,a){return"string"===typeof t?Q(ht(e,t),a):Q(ht(e,""),t)}class pt{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>st(t.backgroundColor),this.hoverBorderColor=(e,t)=>st(t.borderColor),this.hoverColor=(e,t)=>st(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return mt(this,e,t)}get(e){return ht(this,e)}describe(e,t){return mt(ut,e,t)}override(e,t){return mt(dt,e,t)}route(e,t,a,s){const n=ht(this,e),r=ht(this,a),i="_"+t;Object.defineProperties(n,{[i]:{value:n[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[i],t=r[s];return B(e)?Object.assign({},t,e):H(e,t)},set(e){this[i]=e}}})}apply(e){e.forEach((e=>e(this)))}}var ft=new pt({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:rt},numbers:{type:"number",properties:nt}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ct.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function gt(e,t,a,s,n){let r=t[n];return r||(r=t[n]=e.measureText(n).width,a.push(n)),r>s&&(s=r),s}function xt(e,t,a,s){let n=(s=s||{}).data=s.data||{},r=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(n=s.data={},r=s.garbageCollect=[],s.font=t),e.save(),e.font=t;let i=0;const o=a.length;let l,c,d,u,h;for(l=0;l<o;l++)if(u=a[l],void 0===u||null===u||z(u)){if(z(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||z(h)||(i=gt(e,n,r,i,h))}else i=gt(e,n,r,i,u);e.restore();const m=r.length/2;if(m>a.length){for(l=0;l<m;l++)delete n[r[l]];r.splice(0,m)}return i}function bt(e,t,a){const s=e.currentDevicePixelRatio,n=0!==a?Math.max(a/2,.5):0;return Math.round((t-n)*s)/s+n}function vt(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function yt(e,t,a,s){jt(e,t,a,s,null)}function jt(e,t,a,s,n){let r,i,o,l,c,d,u,h;const m=t.pointStyle,p=t.rotation,f=t.radius;let g=(p||0)*he;if(m&&"object"===typeof m&&(r=m.toString(),"[object HTMLImageElement]"===r||"[object HTMLCanvasElement]"===r))return e.save(),e.translate(a,s),e.rotate(g),e.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),void e.restore();if(!(isNaN(f)||f<=0)){switch(e.beginPath(),m){default:n?e.ellipse(a,s,n/2,f,0,0,ce):e.arc(a,s,f,0,ce),e.closePath();break;case"triangle":d=n?n/2:f,e.moveTo(a+Math.sin(g)*d,s-Math.cos(g)*f),g+=fe,e.lineTo(a+Math.sin(g)*d,s-Math.cos(g)*f),g+=fe,e.lineTo(a+Math.sin(g)*d,s-Math.cos(g)*f),e.closePath();break;case"rectRounded":c=.516*f,l=f-c,i=Math.cos(g+pe)*l,u=Math.cos(g+pe)*(n?n/2-c:l),o=Math.sin(g+pe)*l,h=Math.sin(g+pe)*(n?n/2-c:l),e.arc(a-u,s-o,c,g-le,g-me),e.arc(a+h,s-i,c,g-me,g),e.arc(a+u,s+o,c,g,g+me),e.arc(a-h,s+i,c,g+me,g+le),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*f,d=n?n/2:l,e.rect(a-d,s-l,2*d,2*l);break}g+=pe;case"rectRot":u=Math.cos(g)*(n?n/2:f),i=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(n?n/2:f),e.moveTo(a-u,s-o),e.lineTo(a+h,s-i),e.lineTo(a+u,s+o),e.lineTo(a-h,s+i),e.closePath();break;case"crossRot":g+=pe;case"cross":u=Math.cos(g)*(n?n/2:f),i=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(n?n/2:f),e.moveTo(a-u,s-o),e.lineTo(a+u,s+o),e.moveTo(a+h,s-i),e.lineTo(a-h,s+i);break;case"star":u=Math.cos(g)*(n?n/2:f),i=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(n?n/2:f),e.moveTo(a-u,s-o),e.lineTo(a+u,s+o),e.moveTo(a+h,s-i),e.lineTo(a-h,s+i),g+=pe,u=Math.cos(g)*(n?n/2:f),i=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(n?n/2:f),e.moveTo(a-u,s-o),e.lineTo(a+u,s+o),e.moveTo(a+h,s-i),e.lineTo(a-h,s+i);break;case"line":i=n?n/2:Math.cos(g)*f,o=Math.sin(g)*f,e.moveTo(a-i,s-o),e.lineTo(a+i,s+o);break;case"dash":e.moveTo(a,s),e.lineTo(a+Math.cos(g)*(n?n/2:f),s+Math.sin(g)*f);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Nt(e,t,a){return a=a||.5,!t||e&&e.x>t.left-a&&e.x<t.right+a&&e.y>t.top-a&&e.y<t.bottom+a}function wt(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function _t(e){e.restore()}function St(e,t,a,s,n){if(!t)return e.lineTo(a.x,a.y);if("middle"===n){const s=(t.x+a.x)/2;e.lineTo(s,t.y),e.lineTo(s,a.y)}else"after"===n!==!!s?e.lineTo(t.x,a.y):e.lineTo(a.x,t.y);e.lineTo(a.x,a.y)}function Ct(e,t,a,s){if(!t)return e.lineTo(a.x,a.y);e.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?a.cp2x:a.cp1x,s?a.cp2y:a.cp1y,a.x,a.y)}function kt(e,t,a,s,n){if(n.strikethrough||n.underline){const r=e.measureText(s),i=t-r.actualBoundingBoxLeft,o=t+r.actualBoundingBoxRight,l=a-r.actualBoundingBoxAscent,c=a+r.actualBoundingBoxDescent,d=n.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=n.decorationWidth||2,e.moveTo(i,d),e.lineTo(o,d),e.stroke()}}function At(e,t){const a=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=a}function Pt(e,t,a,s,n){let r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const i=z(t)?t:[t],o=r.strokeWidth>0&&""!==r.strokeColor;let l,c;for(e.save(),e.font=n.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),F(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,r),l=0;l<i.length;++l)c=i[l],r.backdrop&&At(e,r.backdrop),o&&(r.strokeColor&&(e.strokeStyle=r.strokeColor),F(r.strokeWidth)||(e.lineWidth=r.strokeWidth),e.strokeText(c,a,s,r.maxWidth)),e.fillText(c,a,s,r.maxWidth),kt(e,a,s,c,r),s+=Number(n.lineHeight);e.restore()}function Et(e,t){const{x:a,y:s,w:n,h:r,radius:i}=t;e.arc(a+i.topLeft,s+i.topLeft,i.topLeft,1.5*le,le,!0),e.lineTo(a,s+r-i.bottomLeft),e.arc(a+i.bottomLeft,s+r-i.bottomLeft,i.bottomLeft,le,me,!0),e.lineTo(a+n-i.bottomRight,s+r),e.arc(a+n-i.bottomRight,s+r-i.bottomRight,i.bottomRight,me,0,!0),e.lineTo(a+n,s+i.topRight),e.arc(a+n-i.topRight,s+i.topRight,i.topRight,0,-me,!0),e.lineTo(a+i.topLeft,s)}const Lt=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Dt=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ot(e,t){const a=(""+e).match(Lt);if(!a||"normal"===a[1])return 1.2*t;switch(e=+a[2],a[3]){case"px":return e;case"%":e/=100}return t*e}const Tt=e=>+e||0;function Mt(e,t){const a={},s=B(t),n=s?Object.keys(t):t,r=B(e)?s?a=>H(e[a],e[t[a]]):t=>e[t]:()=>e;for(const i of n)a[i]=Tt(r(i));return a}function Rt(e){return Mt(e,{top:"y",right:"x",bottom:"y",left:"x"})}function It(e){return Mt(e,["topLeft","topRight","bottomLeft","bottomRight"])}function Ft(e){const t=Rt(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function zt(e,t){e=e||{},t=t||ft.font;let a=H(e.size,t.size);"string"===typeof a&&(a=parseInt(a,10));let s=H(e.style,t.style);s&&!(""+s).match(Dt)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:H(e.family,t.family),lineHeight:Ot(H(e.lineHeight,t.lineHeight),a),size:a,style:s,weight:H(e.weight,t.weight),string:""};return n.string=function(e){return!e||F(e.size)||F(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(n),n}function Bt(e,t,a,s){let n,r,i,o=!0;for(n=0,r=e.length;n<r;++n)if(i=e[n],void 0!==i&&(void 0!==t&&"function"===typeof i&&(i=i(t),o=!1),void 0!==a&&z(i)&&(i=i[a%i.length],o=!1),void 0!==i))return s&&!o&&(s.cacheable=!1),i}function qt(e,t,a){const{min:s,max:n}=e,r=V(t,(n-s)/2),i=(e,t)=>a&&0===e?0:e+t;return{min:i(s,-Math.abs(r)),max:i(n,r)}}function Ut(e,t){return Object.assign(Object.create(e),t)}function Ht(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const n=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof a&&(a=ea("_fallback",e));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:n,_fallback:a,_getTarget:s,override:s=>Ht([s,...e],t,n,a)};return new Proxy(r,{deleteProperty:(t,a)=>(delete t[a],delete t._keys,delete e[0][a],!0),get:(a,s)=>$t(a,s,(()=>function(e,t,a,s){let n;for(const r of t)if(n=ea(Gt(r,e),a),"undefined"!==typeof n)return Yt(e,n)?Qt(a,s,e,n):n}(s,t,e,a))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>ta(e).includes(t),ownKeys:e=>ta(e),set(e,t,a){const n=e._storage||(e._storage=s());return e[t]=n[t]=a,delete e._keys,!0}})}function Wt(e,t,a,s){const n={_cacheable:!1,_proxy:e,_context:t,_subProxy:a,_stack:new Set,_descriptors:Vt(e,s),setContext:t=>Wt(e,t,a,s),override:n=>Wt(e.override(n),t,a,s)};return new Proxy(n,{deleteProperty:(t,a)=>(delete t[a],delete e[a],!0),get:(e,t,a)=>$t(e,t,(()=>function(e,t,a){const{_proxy:s,_context:n,_subProxy:r,_descriptors:i}=e;let o=s[t];re(o)&&i.isScriptable(t)&&(o=function(e,t,a,s){const{_proxy:n,_context:r,_subProxy:i,_stack:o}=a;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(r,i||s);o.delete(e),Yt(e,l)&&(l=Qt(n._scopes,n,e,l));return l}(t,o,e,a));z(o)&&o.length&&(o=function(e,t,a,s){const{_proxy:n,_context:r,_subProxy:i,_descriptors:o}=a;if("undefined"!==typeof r.index&&s(e))return t[r.index%t.length];if(B(t[0])){const a=t,s=n._scopes.filter((e=>e!==a));t=[];for(const l of a){const a=Qt(s,n,e,l);t.push(Wt(a,r,i&&i[e],o))}}return t}(t,o,e,i.isIndexable));Yt(t,o)&&(o=Wt(o,n,r&&r[t],i));return o}(e,t,a))),getOwnPropertyDescriptor:(t,a)=>t._descriptors.allKeys?Reflect.has(e,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,a),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,a)=>Reflect.has(e,a),ownKeys:()=>Reflect.ownKeys(e),set:(t,a,s)=>(e[a]=s,delete t[a],!0)})}function Vt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:a=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=e;return{allKeys:n,scriptable:a,indexable:s,isScriptable:re(a)?a:()=>a,isIndexable:re(s)?s:()=>s}}const Gt=(e,t)=>e?e+se(t):t,Yt=(e,t)=>B(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function $t(e,t,a){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const s=a();return e[t]=s,s}function Xt(e,t,a){return re(e)?e(t,a):e}const Jt=(e,t)=>!0===e?t:"string"===typeof e?ae(t,e):void 0;function Kt(e,t,a,s,n){for(const r of t){const t=Jt(a,r);if(t){e.add(t);const r=Xt(t._fallback,a,n);if("undefined"!==typeof r&&r!==a&&r!==s)return r}else if(!1===t&&"undefined"!==typeof s&&a!==s)return null}return!1}function Qt(e,t,a,s){const n=t._rootScopes,r=Xt(t._fallback,a,s),i=[...e,...n],o=new Set;o.add(s);let l=Zt(o,i,a,r||a,s);return null!==l&&(("undefined"===typeof r||r===a||(l=Zt(o,i,r,l,s),null!==l))&&Ht(Array.from(o),[""],n,r,(()=>function(e,t,a){const s=e._getTarget();t in s||(s[t]={});const n=s[t];if(z(n)&&B(a))return a;return n||{}}(t,a,s))))}function Zt(e,t,a,s,n){for(;a;)a=Kt(e,t,a,s,n);return a}function ea(e,t){for(const a of t){if(!a)continue;const t=a[e];if("undefined"!==typeof t)return t}}function ta(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const a of e)for(const e of Object.keys(a).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function aa(e,t,a,s){const{iScale:n}=e,{key:r="r"}=this._parsing,i=new Array(s);let o,l,c,d;for(o=0,l=s;o<l;++o)c=o+a,d=t[c],i[o]={r:n.parse(ae(d,r),c)};return i}const sa=Number.EPSILON||1e-14,na=(e,t)=>t<e.length&&!e[t].skip&&e[t],ra=e=>"x"===e?"y":"x";function ia(e,t,a,s){const n=e.skip?t:e,r=t,i=a.skip?t:a,o=Ae(r,n),l=Ae(i,r);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=s*c,h=s*d;return{previous:{x:r.x-u*(i.x-n.x),y:r.y-u*(i.y-n.y)},next:{x:r.x+h*(i.x-n.x),y:r.y+h*(i.y-n.y)}}}function oa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const a=ra(t),s=e.length,n=Array(s).fill(0),r=Array(s);let i,o,l,c=na(e,0);for(i=0;i<s;++i)if(o=l,l=c,c=na(e,i+1),l){if(c){const e=c[t]-l[t];n[i]=0!==e?(c[a]-l[a])/e:0}r[i]=o?c?xe(n[i-1])!==xe(n[i])?0:(n[i-1]+n[i])/2:n[i-1]:n[i]}!function(e,t,a){const s=e.length;let n,r,i,o,l,c=na(e,0);for(let d=0;d<s-1;++d)l=c,c=na(e,d+1),l&&c&&(be(t[d],0,sa)?a[d]=a[d+1]=0:(n=a[d]/t[d],r=a[d+1]/t[d],o=Math.pow(n,2)+Math.pow(r,2),o<=9||(i=3/Math.sqrt(o),a[d]=n*i*t[d],a[d+1]=r*i*t[d])))}(e,n,r),function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const s=ra(a),n=e.length;let r,i,o,l=na(e,0);for(let c=0;c<n;++c){if(i=o,o=l,l=na(e,c+1),!o)continue;const n=o[a],d=o[s];i&&(r=(n-i[a])/3,o["cp1".concat(a)]=n-r,o["cp1".concat(s)]=d-r*t[c]),l&&(r=(l[a]-n)/3,o["cp2".concat(a)]=n+r,o["cp2".concat(s)]=d+r*t[c])}}(e,r,t)}function la(e,t,a){return Math.max(Math.min(e,a),t)}function ca(e,t,a,s,n){let r,i,o,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)oa(e,n);else{let a=s?e[e.length-1]:e[0];for(r=0,i=e.length;r<i;++r)o=e[r],l=ia(a,o,e[Math.min(r+1,i-(s?0:1))%i],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,a=o}t.capBezierPoints&&function(e,t){let a,s,n,r,i,o=Nt(e[0],t);for(a=0,s=e.length;a<s;++a)i=r,r=o,o=a<s-1&&Nt(e[a+1],t),r&&(n=e[a],i&&(n.cp1x=la(n.cp1x,t.left,t.right),n.cp1y=la(n.cp1y,t.top,t.bottom)),o&&(n.cp2x=la(n.cp2x,t.left,t.right),n.cp2y=la(n.cp2y,t.top,t.bottom)))}(e,a)}function da(){return"undefined"!==typeof window&&"undefined"!==typeof document}function ua(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function ha(e,t,a){let s;return"string"===typeof e?(s=parseInt(e,10),-1!==e.indexOf("%")&&(s=s/100*t.parentNode[a])):s=e,s}const ma=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const pa=["top","right","bottom","left"];function fa(e,t,a){const s={};a=a?"-"+a:"";for(let n=0;n<4;n++){const r=pa[n];s[r]=parseFloat(e[t+"-"+r+a])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const ga=(e,t,a)=>(e>0||t>0)&&(!a||!a.shadowRoot);function xa(e,t){if("native"in e)return e;const{canvas:a,currentDevicePixelRatio:s}=t,n=ma(a),r="border-box"===n.boxSizing,i=fa(n,"padding"),o=fa(n,"border","width"),{x:l,y:c,box:d}=function(e,t){const a=e.touches,s=a&&a.length?a[0]:e,{offsetX:n,offsetY:r}=s;let i,o,l=!1;if(ga(n,r,e.target))i=n,o=r;else{const e=t.getBoundingClientRect();i=s.clientX-e.left,o=s.clientY-e.top,l=!0}return{x:i,y:o,box:l}}(e,a),u=i.left+(d&&o.left),h=i.top+(d&&o.top);let{width:m,height:p}=t;return r&&(m-=i.width+o.width,p-=i.height+o.height),{x:Math.round((l-u)/m*a.width/s),y:Math.round((c-h)/p*a.height/s)}}const ba=e=>Math.round(10*e)/10;function va(e,t,a,s){const n=ma(e),r=fa(n,"margin"),i=ha(n.maxWidth,e,"clientWidth")||ue,o=ha(n.maxHeight,e,"clientHeight")||ue,l=function(e,t,a){let s,n;if(void 0===t||void 0===a){const r=e&&ua(e);if(r){const e=r.getBoundingClientRect(),i=ma(r),o=fa(i,"border","width"),l=fa(i,"padding");t=e.width-l.width-o.width,a=e.height-l.height-o.height,s=ha(i.maxWidth,r,"clientWidth"),n=ha(i.maxHeight,r,"clientHeight")}else t=e.clientWidth,a=e.clientHeight}return{width:t,height:a,maxWidth:s||ue,maxHeight:n||ue}}(e,t,a);let{width:c,height:d}=l;if("content-box"===n.boxSizing){const e=fa(n,"border","width"),t=fa(n,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-r.width),d=Math.max(0,s?c/s:d-r.height),c=ba(Math.min(c,i,l.maxWidth)),d=ba(Math.min(d,o,l.maxHeight)),c&&!d&&(d=ba(c/2));return(void 0!==t||void 0!==a)&&s&&l.height&&d>l.height&&(d=l.height,c=ba(Math.floor(d*s))),{width:c,height:d}}function ya(e,t,a){const s=t||1,n=Math.floor(e.height*s),r=Math.floor(e.width*s);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const i=e.canvas;return i.style&&(a||!i.style.height&&!i.style.width)&&(i.style.height="".concat(e.height,"px"),i.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==s||i.height!==n||i.width!==r)&&(e.currentDevicePixelRatio=s,i.height=n,i.width=r,e.ctx.setTransform(s,0,0,s,0,0),!0)}const ja=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};da()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function Na(e,t){const a=function(e,t){return ma(e).getPropertyValue(t)}(e,t),s=a&&a.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function wa(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:e.y+a*(t.y-e.y)}}function _a(e,t,a,s){return{x:e.x+a*(t.x-e.x),y:"middle"===s?a<.5?e.y:t.y:"after"===s?a<1?e.y:t.y:a>0?t.y:e.y}}function Sa(e,t,a,s){const n={x:e.cp2x,y:e.cp2y},r={x:t.cp1x,y:t.cp1y},i=wa(e,n,a),o=wa(n,r,a),l=wa(r,t,a),c=wa(i,o,a),d=wa(o,l,a);return wa(c,d,a)}const Ca=function(e,t){return{x:a=>e+e+t-a,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}},ka=function(){return{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}};function Aa(e,t,a){return e?Ca(t,a):ka()}function Pa(e,t){let a,s;"ltr"!==t&&"rtl"!==t||(a=e.canvas.style,s=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",t,"important"),e.prevTextDirection=s)}function Ea(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function La(e){return"angle"===e?{between:Le,compare:Pe,normalize:Ee}:{between:Te,compare:(e,t)=>e-t,normalize:e=>e}}function Da(e){let{start:t,end:a,count:s,loop:n,style:r}=e;return{start:t%s,end:a%s,loop:n&&(a-t+1)%s===0,style:r}}function Oa(e,t,a){if(!a)return[e];const{property:s,start:n,end:r}=a,i=t.length,{compare:o,between:l,normalize:c}=La(s),{start:d,end:u,loop:h,style:m}=function(e,t,a){const{property:s,start:n,end:r}=a,{between:i,normalize:o}=La(s),l=t.length;let c,d,{start:u,end:h,loop:m}=e;if(m){for(u+=l,h+=l,c=0,d=l;c<d&&i(o(t[u%l][s]),n,r);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:m,style:e.style}}(e,t,a),p=[];let f,g,x,b=!1,v=null;const y=()=>b||l(n,x,f)&&0!==o(n,x),j=()=>!b||0===o(r,f)||l(r,x,f);for(let N=d,w=d;N<=u;++N)g=t[N%i],g.skip||(f=c(g[s]),f!==x&&(b=l(f,n,r),null===v&&y()&&(v=0===o(f,n)?N:w),null!==v&&j()&&(p.push(Da({start:v,end:N,loop:h,count:i,style:m})),v=null),w=N,x=f));return null!==v&&p.push(Da({start:v,end:u,loop:h,count:i,style:m})),p}function Ta(e,t){const a=[],s=e.segments;for(let n=0;n<s.length;n++){const r=Oa(s[n],e.points,t);r.length&&a.push(...r)}return a}function Ma(e,t){const a=e.points,s=e.options.spanGaps,n=a.length;if(!n)return[];const r=!!e._loop,{start:i,end:o}=function(e,t,a,s){let n=0,r=t-1;if(a&&!s)for(;n<t&&!e[n].skip;)n++;for(;n<t&&e[n].skip;)n++;for(n%=t,a&&(r+=n);r>n&&e[r%t].skip;)r--;return r%=t,{start:n,end:r}}(a,n,r,s);if(!0===s)return Ra(e,[{start:i,end:o,loop:r}],a,t);return Ra(e,function(e,t,a,s){const n=e.length,r=[];let i,o=t,l=e[t];for(i=t+1;i<=a;++i){const a=e[i%n];a.skip||a.stop?l.skip||(s=!1,r.push({start:t%n,end:(i-1)%n,loop:s}),t=o=a.stop?i:null):(o=i,l.skip&&(t=i)),l=a}return null!==o&&r.push({start:t%n,end:o%n,loop:s}),r}(a,i,o<i?o+n:o,!!e._fullLoop&&0===i&&o===n-1),a,t)}function Ra(e,t,a,s){return s&&s.setContext&&a?function(e,t,a,s){const n=e._chart.getContext(),r=Ia(e.options),{_datasetIndex:i,options:{spanGaps:o}}=e,l=a.length,c=[];let d=r,u=t[0].start,h=u;function m(e,t,s,n){const r=o?-1:1;if(e!==t){for(e+=l;a[e%l].skip;)e-=r;for(;a[t%l].skip;)t+=r;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:s,style:n}),d=n,u=t%l)}}for(const p of t){u=o?u:p.start;let e,t=a[u%l];for(h=u+1;h<=p.end;h++){const r=a[h%l];e=Ia(s.setContext(Ut(n,{type:"segment",p0:t,p1:r,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:i}))),Fa(e,d)&&m(u,h-1,p.loop,d),t=r,d=e}u<h-1&&m(u,h-1,p.loop,d)}return c}(e,t,a,s):t}function Ia(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Fa(e,t){if(!t)return!1;const a=[],s=function(e,t){return tt(t)?(a.includes(t)||a.push(t),a.indexOf(t)):t};return JSON.stringify(e,s)!==JSON.stringify(t,s)}function za(e,t,a){return e.options.clip?e[a]:t[a]}function Ba(e,t){const a=t._clip;if(a.disabled)return!1;const s=function(e,t){const{xScale:a,yScale:s}=e;return a&&s?{left:za(a,t,"left"),right:za(a,t,"right"),top:za(s,t,"top"),bottom:za(s,t,"bottom")}:t}(t,e.chartArea);return{left:!1===a.left?0:s.left-(!0===a.left?0:a.left),right:!1===a.right?e.width:s.right+(!0===a.right?0:a.right),top:!1===a.top?0:s.top-(!0===a.top?0:a.top),bottom:!1===a.bottom?e.height:s.bottom+(!0===a.bottom?0:a.bottom)}}},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3488:(e,t,a)=>{"use strict";a.d(t,{G:()=>n,H:()=>s});const s={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"https://abaplay-backendv2.onrender.com/api",n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SOCKET_URL||"https://abaplay-backendv2.onrender.com"},4202:(e,t)=>{"use strict";var a=Symbol.for("react.element"),s=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function x(e,t,a){this.props=e,this.context=t,this.refs=g,this.updater=a||p}function b(){}function v(e,t,a){this.props=e,this.context=t,this.refs=g,this.updater=a||p}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=x.prototype;var y=v.prototype=new b;y.constructor=v,f(y,x.prototype),y.isPureReactComponent=!0;var j=Array.isArray,N=Object.prototype.hasOwnProperty,w={current:null},_={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,s){var n,r={},i=null,o=null;if(null!=t)for(n in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)N.call(t,n)&&!_.hasOwnProperty(n)&&(r[n]=t[n]);var l=arguments.length-2;if(1===l)r.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===r[n]&&(r[n]=l[n]);return{$$typeof:a,type:e,key:i,ref:o,props:r,_owner:w.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===a}var k=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case a:case s:l=!0}}if(l)return i=i(l=e),e=""===r?"."+A(l,0):r,j(i)?(n="",null!=e&&(n=e.replace(k,"$&/")+"/"),P(i,t,n,"",(function(e){return e}))):null!=i&&(C(i)&&(i=function(e,t){return{$$typeof:a,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(k,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=""===r?".":r+":",j(e))for(var c=0;c<e.length;c++){var d=r+A(o=e[c],c);l+=P(o,t,n,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,n,d=r+A(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function E(e,t,a){if(null==e)return e;var s=[],n=0;return P(e,s,"","",(function(e){return t.call(a,e,n++)})),s}function L(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},O={transition:null},T={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:O,ReactCurrentOwner:w};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:E,forEach:function(e,t,a){E(e,(function(){t.apply(this,arguments)}),a)},count:function(e){var t=0;return E(e,(function(){t++})),t},toArray:function(e){return E(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=n,t.Profiler=i,t.PureComponent=v,t.StrictMode=r,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T,t.act=M,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=f({},e.props),r=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=w.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)N.call(t,c)&&!_.hasOwnProperty(c)&&(n[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:a,type:e.type,key:r,ref:i,props:n,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,a){return D.current.useImperativeHandle(e,t,a)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,a){return D.current.useReducer(e,t,a)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,a){return D.current.useSyncExternalStore(e,t,a)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},4391:(e,t,a)=>{"use strict";var s=a(7950);t.createRoot=s.createRoot,t.hydrateRoot=s.hydrateRoot},4980:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(2284);function n(e){var t=function(e,t){if("object"!=(0,s.A)(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!=(0,s.A)(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,s.A)(t)?t:t+""}function r(e,t,a){return(t=n(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},5043:(e,t,a)=>{"use strict";e.exports=a(4202)},5173:(e,t,a)=>{e.exports=a(1497)()},5351:(e,t,a)=>{"use strict";a.d(t,{Ay:()=>n,FN:()=>s.FN,No:()=>s.No,PP:()=>s.PP,dN:()=>s.dN,hE:()=>s.hE,kc:()=>s.kc,m_:()=>s.m_,s$:()=>s.s$,t1:()=>s.t1});var s=a(6361);s.t1.register(...s.$L);const n=s.t1},6361:(e,t,a)=>{"use strict";a.d(t,{$L:()=>ms,A6:()=>D,Bs:()=>vt,E8:()=>It,FN:()=>Et,Hg:()=>ke,No:()=>At,PP:()=>Fa,Qw:()=>u,ZT:()=>M,dN:()=>ua,hE:()=>xa,ju:()=>T,kc:()=>qa,m_:()=>Ta,s$:()=>fa,t1:()=>mt});var s=a(9379),n=a(4980),r=a(2926);class i{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,a,s){const n=t.listeners[s],r=t.duration;n.forEach((s=>s({chart:e,initial:t.initial,numSteps:r,currentStep:Math.min(a-t.start,r)})))}_refresh(){this._request||(this._running=!0,this._request=r.r.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((a,s)=>{if(!a.running||!a.items.length)return;const n=a.items;let r,i=n.length-1,o=!1;for(;i>=0;--i)r=n[i],r._active?(r._total>a.duration&&(a.duration=r._total),r.tick(e),o=!0):(n[i]=n[n.length-1],n.pop());o&&(s.draw(),this._notify(s,a,e,"progress")),n.length||(a.running=!1,this._notify(s,a,e,"complete"),a.initial=!1),t+=n.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let a=t.get(e);return a||(a={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,a)),a}listen(e,t,a){this._getAnims(e).listeners[t].push(a)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const a=t.items;let s=a.length-1;for(;s>=0;--s)a[s].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var o=new i;const l="transparent",c={boolean:(e,t,a)=>a>.5?t:e,color(e,t,a){const s=(0,r.c)(e||l),n=s.valid&&(0,r.c)(t||l);return n&&n.valid?n.mix(s,a).hexString():t},number:(e,t,a)=>e+(t-e)*a};class d{constructor(e,t,a,s){const n=t[a];s=(0,r.a)([e.to,s,n,e.from]);const i=(0,r.a)([e.from,n,s]);this._active=!0,this._fn=e.fn||c[e.type||typeof i],this._easing=r.e[e.easing]||r.e.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=a,this._from=i,this._to=s,this._promises=void 0}active(){return this._active}update(e,t,a){if(this._active){this._notify(!1);const s=this._target[this._prop],n=a-this._start,i=this._duration-n;this._start=a,this._duration=Math.floor(Math.max(i,e.duration)),this._total+=n,this._loop=!!e.loop,this._to=(0,r.a)([e.to,t,s,e.from]),this._from=(0,r.a)([e.from,s,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,a=this._duration,s=this._prop,n=this._from,r=this._loop,i=this._to;let o;if(this._active=n!==i&&(r||t<a),!this._active)return this._target[s]=i,void this._notify(!0);t<0?this._target[s]=n:(o=t/a%2,o=r&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[s]=this._fn(n,i,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,a)=>{e.push({res:t,rej:a})}))}_notify(e){const t=e?"res":"rej",a=this._promises||[];for(let s=0;s<a.length;s++)a[s][t]()}}class u{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!(0,r.i)(e))return;const t=Object.keys(r.d.animation),a=this._properties;Object.getOwnPropertyNames(e).forEach((s=>{const n=e[s];if(!(0,r.i)(n))return;const i={};for(const e of t)i[e]=n[e];((0,r.b)(n.properties)&&n.properties||[s]).forEach((e=>{e!==s&&a.has(e)||a.set(e,i)}))}))}_animateOptions(e,t){const a=t.options,s=function(e,t){if(!t)return;let a=e.options;if(!a)return void(e.options=t);a.$shared&&(e.options=a=Object.assign({},a,{$shared:!1,$animations:{}}));return a}(e,a);if(!s)return[];const n=this._createAnimations(s,a);return a.$shared&&function(e,t){const a=[],s=Object.keys(t);for(let n=0;n<s.length;n++){const t=e[s[n]];t&&t.active()&&a.push(t.wait())}return Promise.all(a)}(e.options.$animations,a).then((()=>{e.options=a}),(()=>{})),n}_createAnimations(e,t){const a=this._properties,s=[],n=e.$animations||(e.$animations={}),r=Object.keys(t),i=Date.now();let o;for(o=r.length-1;o>=0;--o){const l=r[o];if("$"===l.charAt(0))continue;if("options"===l){s.push(...this._animateOptions(e,t));continue}const c=t[l];let u=n[l];const h=a.get(l);if(u){if(h&&u.active()){u.update(h,c,i);continue}u.cancel()}h&&h.duration?(n[l]=u=new d(h,e,l,c),s.push(u)):e[l]=c}return s}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const a=this._createAnimations(e,t);return a.length?(o.add(this._chart,a),!0):void 0}}function h(e,t){const a=e&&e.options||{},s=a.reverse,n=void 0===a.min?t:0,r=void 0===a.max?t:0;return{start:s?r:n,end:s?n:r}}function m(e,t){const a=[],s=e._getSortedDatasetMetas(t);let n,r;for(n=0,r=s.length;n<r;++n)a.push(s[n].index);return a}function p(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const n=e.keys,i="single"===s.mode;let o,l,c,d;if(null===t)return;let u=!1;for(o=0,l=n.length;o<l;++o){if(c=+n[o],c===a){if(u=!0,s.all)continue;break}d=e.values[c],(0,r.g)(d)&&(i||0===t||(0,r.s)(t)===(0,r.s)(d))&&(t+=d)}return u||s.all?t:0}function f(e,t){const a=e&&e.options.stacked;return a||void 0===a&&void 0!==t.stack}function g(e,t,a){const s=e[t]||(e[t]={});return s[a]||(s[a]={})}function x(e,t,a,s){for(const n of t.getMatchingVisibleMetas(s).reverse()){const t=e[n.index];if(a&&t>0||!a&&t<0)return n.index}return null}function b(e,t){const{chart:a,_cachedMeta:s}=e,n=a._stacks||(a._stacks={}),{iScale:r,vScale:i,index:o}=s,l=r.axis,c=i.axis,d=function(e,t,a){return"".concat(e.id,".").concat(t.id,".").concat(a.stack||a.type)}(r,i,s),u=t.length;let h;for(let m=0;m<u;++m){const e=t[m],{[l]:a,[c]:r}=e;h=(e._stacks||(e._stacks={}))[c]=g(n,d,a),h[o]=r,h._top=x(h,i,!0,s.type),h._bottom=x(h,i,!1,s.type);(h._visualValues||(h._visualValues={}))[o]=r}}function v(e,t){const a=e.scales;return Object.keys(a).filter((e=>a[e].axis===t)).shift()}function y(e,t){const a=e.controller.index,s=e.vScale&&e.vScale.axis;if(s){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[s]||void 0===t[s][a])return;delete t[s][a],void 0!==t[s]._visualValues&&void 0!==t[s]._visualValues[a]&&delete t[s]._visualValues[a]}}}const j=e=>"reset"===e||"none"===e,N=(e,t)=>t?e:Object.assign({},e);class w{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=f(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&y(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,a=this.getDataset(),s=(e,t,a,s)=>"x"===e?t:"r"===e?s:a,n=t.xAxisID=(0,r.v)(a.xAxisID,v(e,"x")),i=t.yAxisID=(0,r.v)(a.yAxisID,v(e,"y")),o=t.rAxisID=(0,r.v)(a.rAxisID,v(e,"r")),l=t.indexAxis,c=t.iAxisID=s(l,n,i,o),d=t.vAxisID=s(l,i,n,o);t.xScale=this.getScaleForId(n),t.yScale=this.getScaleForId(i),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(c),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&(0,r.u)(this._data,this),e._stacked&&y(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),a=this._data;if((0,r.i)(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:a,vScale:s}=t,n="x"===a.axis?"x":"y",r="x"===s.axis?"x":"y",i=Object.keys(e),o=new Array(i.length);let l,c,d;for(l=0,c=i.length;l<c;++l)d=i[l],o[l]={[n]:d,[r]:e[d]};return o}(t,e)}else if(a!==t){if(a){(0,r.u)(a,this);const e=this._cachedMeta;y(e),e._parsed=[]}t&&Object.isExtensible(t)&&(0,r.l)(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,a=this.getDataset();let s=!1;this._dataCheck();const n=t._stacked;t._stacked=f(t.vScale,t),t.stack!==a.stack&&(s=!0,y(t),t.stack=a.stack),this._resyncElements(e),(s||n!==t._stacked)&&(b(this,t._parsed),t._stacked=f(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),a=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(a,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:a,_data:s}=this,{iScale:n,_stacked:i}=a,o=n.axis;let l,c,d,u=0===e&&t===s.length||a._sorted,h=e>0&&a._parsed[e-1];if(!1===this._parsing)a._parsed=s,a._sorted=!0,d=s;else{d=(0,r.b)(s[e])?this.parseArrayData(a,s,e,t):(0,r.i)(s[e])?this.parseObjectData(a,s,e,t):this.parsePrimitiveData(a,s,e,t);const n=()=>null===c[o]||h&&c[o]<h[o];for(l=0;l<t;++l)a._parsed[l+e]=c=d[l],u&&(n()&&(u=!1),h=c);a._sorted=u}i&&b(this,d)}parsePrimitiveData(e,t,a,s){const{iScale:n,vScale:r}=e,i=n.axis,o=r.axis,l=n.getLabels(),c=n===r,d=new Array(s);let u,h,m;for(u=0,h=s;u<h;++u)m=u+a,d[u]={[i]:c||n.parse(l[m],m),[o]:r.parse(t[m],m)};return d}parseArrayData(e,t,a,s){const{xScale:n,yScale:r}=e,i=new Array(s);let o,l,c,d;for(o=0,l=s;o<l;++o)c=o+a,d=t[c],i[o]={x:n.parse(d[0],c),y:r.parse(d[1],c)};return i}parseObjectData(e,t,a,s){const{xScale:n,yScale:i}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c=new Array(s);let d,u,h,m;for(d=0,u=s;d<u;++d)h=d+a,m=t[h],c[d]={x:n.parse((0,r.f)(m,o),h),y:i.parse((0,r.f)(m,l),h)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,a){const s=this.chart,n=this._cachedMeta,r=t[e.axis];return p({keys:m(s,!0),values:t._stacks[e.axis]._visualValues},r,n.index,{mode:a})}updateRangeFromParsed(e,t,a,s){const n=a[t.axis];let r=null===n?NaN:n;const i=s&&a._stacks[t.axis];s&&i&&(s.values=i,r=p(s,n,this._cachedMeta.index)),e.min=Math.min(e.min,r),e.max=Math.max(e.max,r)}getMinMax(e,t){const a=this._cachedMeta,s=a._parsed,n=a._sorted&&e===a.iScale,i=s.length,o=this._getOtherScale(e),l=((e,t,a)=>e&&!t.hidden&&t._stacked&&{keys:m(a,!0),values:null})(t,a,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:u}=function(e){const{min:t,max:a,minDefined:s,maxDefined:n}=e.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:n?a:Number.POSITIVE_INFINITY}}(o);let h,p;function f(){p=s[h];const t=p[o.axis];return!(0,r.g)(p[e.axis])||d>t||u<t}for(h=0;h<i&&(f()||(this.updateRangeFromParsed(c,e,p,l),!n));++h);if(n)for(h=i-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(c,e,p,l);break}return c}getAllParsedValues(e){const t=this._cachedMeta._parsed,a=[];let s,n,i;for(s=0,n=t.length;s<n;++s)i=t[s][e.axis],(0,r.g)(i)&&a.push(i);return a}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,a=t.iScale,s=t.vScale,n=this.getParsed(e);return{label:a?""+a.getLabelForValue(n[a.axis]):"",value:s?""+s.getLabelForValue(n[s.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,a,s,n;return(0,r.i)(e)?(t=e.top,a=e.right,s=e.bottom,n=e.left):t=a=s=n=e,{top:t,right:a,bottom:s,left:n,disabled:!1===e}}((0,r.v)(this.options.clip,function(e,t,a){if(!1===a)return!1;const s=h(e,a),n=h(t,a);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,a=this._cachedMeta,s=a.data||[],n=t.chartArea,r=[],i=this._drawStart||0,o=this._drawCount||s.length-i,l=this.options.drawActiveElementsOnTop;let c;for(a.dataset&&a.dataset.draw(e,n,i,o),c=i;c<i+o;++c){const t=s[c];t.hidden||(t.active&&l?r.push(t):t.draw(e,n))}for(c=0;c<r.length;++c)r[c].draw(e,n)}getStyle(e,t){const a=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(a):this.resolveDataElementOptions(e||0,a)}getContext(e,t,a){const s=this.getDataset();let n;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];n=t.$context||(t.$context=function(e,t,a){return(0,r.j)(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:a,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),n.parsed=this.getParsed(e),n.raw=s.data[e],n.index=n.dataIndex=e}else n=this.$context||(this.$context=function(e,t){return(0,r.j)(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),n.dataset=s,n.index=n.datasetIndex=this.index;return n.active=!!t,n.mode=a,n}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",a=arguments.length>2?arguments[2]:void 0;const s="active"===t,n=this._cachedDataOpts,i=e+"-"+t,o=n[i],l=this.enableOptionSharing&&(0,r.h)(a);if(o)return N(o,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),u=s?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=c.getOptionScopes(this.getDataset(),d),m=Object.keys(r.d.elements[e]),p=c.resolveNamedOptions(h,m,(()=>this.getContext(a,s,t)),u);return p.$shared&&(p.$shared=l,n[i]=Object.freeze(N(p,l))),p}_resolveAnimations(e,t,a){const s=this.chart,n=this._cachedDataOpts,r="animation-".concat(t),i=n[r];if(i)return i;let o;if(!1!==s.options.animation){const s=this.chart.config,n=s.datasetAnimationScopeKeys(this._type,t),r=s.getOptionScopes(this.getDataset(),n);o=s.createResolver(r,this.getContext(e,a,t))}const l=new u(s,o&&o.animations);return o&&o._cacheable&&(n[r]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||j(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const a=this.resolveDataElementOptions(e,t),s=this._sharedOptions,n=this.getSharedOptions(a),r=this.includeOptions(t,n)||n!==s;return this.updateSharedOptions(n,t,a),{sharedOptions:n,includeOptions:r}}updateElement(e,t,a,s){j(s)?Object.assign(e,a):this._resolveAnimations(t,s).update(e,a)}updateSharedOptions(e,t,a){e&&!j(t)&&this._resolveAnimations(void 0,t).update(e,a)}_setStyle(e,t,a,s){e.active=s;const n=this.getStyle(t,s);this._resolveAnimations(t,a,s).update(e,{options:!s&&this.getSharedOptions(n)||n})}removeHoverStyle(e,t,a){this._setStyle(e,a,"active",!1)}setHoverStyle(e,t,a){this._setStyle(e,a,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,a=this._cachedMeta.data;for(const[i,o,l]of this._syncList)this[i](o,l);this._syncList=[];const s=a.length,n=t.length,r=Math.min(n,s);r&&this.parse(0,r),n>s?this._insertElements(s,n-s,e):n<s&&this._removeElements(n,s-n)}_insertElements(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s=this._cachedMeta,n=s.data,r=e+t;let i;const o=e=>{for(e.length+=t,i=e.length-1;i>=r;i--)e[i]=e[i-t]};for(o(n),i=e;i<r;++i)n[i]=new this.dataElementType;this._parsing&&o(s._parsed),this.parse(e,t),a&&this.updateElements(n,e,t,"reset")}updateElements(e,t,a,s){}_removeElements(e,t){const a=this._cachedMeta;if(this._parsing){const s=a._parsed.splice(e,t);a._stacked&&y(a,s)}a.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,a,s]=e;this[t](a,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const a=arguments.length-2;a&&this._sync(["_insertElements",e,a])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function _(e){const t=e.iScale,a=function(e,t){if(!e._cache.$bar){const a=e.getMatchingVisibleMetas(t);let s=[];for(let t=0,n=a.length;t<n;t++)s=s.concat(a[t].controller.getAllParsedValues(e));e._cache.$bar=(0,r._)(s.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let s,n,i,o,l=t._length;const c=()=>{32767!==i&&-32768!==i&&((0,r.h)(o)&&(l=Math.min(l,Math.abs(i-o)||l)),o=i)};for(s=0,n=a.length;s<n;++s)i=t.getPixelForValue(a[s]),c();for(o=void 0,s=0,n=t.ticks.length;s<n;++s)i=t.getPixelForTick(s),c();return l}function S(e,t,a,s){return(0,r.b)(e)?function(e,t,a,s){const n=a.parse(e[0],s),r=a.parse(e[1],s),i=Math.min(n,r),o=Math.max(n,r);let l=i,c=o;Math.abs(i)>Math.abs(o)&&(l=o,c=i),t[a.axis]=c,t._custom={barStart:l,barEnd:c,start:n,end:r,min:i,max:o}}(e,t,a,s):t[a.axis]=a.parse(e,s),t}function C(e,t,a,s){const n=e.iScale,r=e.vScale,i=n.getLabels(),o=n===r,l=[];let c,d,u,h;for(c=a,d=a+s;c<d;++c)h=t[c],u={},u[n.axis]=o||n.parse(i[c],c),l.push(S(h,u,r,c));return l}function k(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function A(e,t,a,s){let n=t.borderSkipped;const r={};if(!n)return void(e.borderSkipped=r);if(!0===n)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:i,end:o,reverse:l,top:c,bottom:d}=function(e){let t,a,s,n,r;return e.horizontal?(t=e.base>e.x,a="left",s="right"):(t=e.base<e.y,a="bottom",s="top"),t?(n="end",r="start"):(n="start",r="end"),{start:a,end:s,reverse:t,top:n,bottom:r}}(e);"middle"===n&&a&&(e.enableBorderRadius=!0,(a._top||0)===s?n=c:(a._bottom||0)===s?n=d:(r[P(d,i,o,l)]=!0,n=c)),r[P(n,i,o,l)]=!0,e.borderSkipped=r}function P(e,t,a,s){var n,r,i;return s?(i=a,e=E(e=(n=e)===(r=t)?i:n===i?r:n,a,t)):e=E(e,t,a),e}function E(e,t,a){return"start"===e?t:"end"===e?a:e}function L(e,t,a){let{inflateAmount:s}=t;e.inflateAmount="auto"===s?1===a?.33:0:s}(0,n.A)(w,"defaults",{}),(0,n.A)(w,"datasetElementType",null),(0,n.A)(w,"dataElementType",null);class D extends w{parsePrimitiveData(e,t,a,s){return C(e,t,a,s)}parseArrayData(e,t,a,s){return C(e,t,a,s)}parseObjectData(e,t,a,s){const{iScale:n,vScale:i}=e,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,c="x"===n.axis?o:l,d="x"===i.axis?o:l,u=[];let h,m,p,f;for(h=a,m=a+s;h<m;++h)f=t[h],p={},p[n.axis]=n.parse((0,r.f)(f,c),h),u.push(S((0,r.f)(f,d),p,i,h));return u}updateRangeFromParsed(e,t,a,s){super.updateRangeFromParsed(e,t,a,s);const n=a._custom;n&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,n.min),e.max=Math.max(e.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:a,vScale:s}=t,n=this.getParsed(e),r=n._custom,i=k(r)?"["+r.start+", "+r.end+"]":""+s.getLabelForValue(n[s.axis]);return{label:""+a.getLabelForValue(n[a.axis]),value:i}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,a,s){const n="reset"===s,{index:i,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),c=o.isHorizontal(),d=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,s);for(let m=t;m<t+a;m++){const t=this.getParsed(m),a=n||(0,r.k)(t[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),p=this._calculateBarIndexPixels(m,d),f=(t._stacks||{})[o.axis],g={horizontal:c,base:a.base,enableBorderRadius:!f||k(t._custom)||i===f._top||i===f._bottom,x:c?a.head:p.center,y:c?p.center:a.head,height:c?p.size:Math.abs(a.size),width:c?Math.abs(a.size):p.size};h&&(g.options=u||this.resolveDataElementOptions(m,e[m].active?"active":s));const x=g.options||e[m].options;A(g,x,f,i),L(g,x,d.ratio),this.updateElement(e[m],m,g,s)}}_getStacks(e,t){const{iScale:a}=this._cachedMeta,s=a.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),n=a.options.stacked,i=[],o=this._cachedMeta.controller.getParsed(t),l=o&&o[a.axis],c=e=>{const t=e._parsed.find((e=>e[a.axis]===l)),s=t&&t[e.vScale.axis];if((0,r.k)(s)||isNaN(s))return!0};for(const r of s)if((void 0===t||!c(r))&&((!1===n||-1===i.indexOf(r.stack)||void 0===n&&void 0===r.stack)&&i.push(r.stack),r.index===e))break;return i.length||i.push(void 0),i}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,a){const s=this._getStacks(e,a),n=void 0!==t?s.indexOf(t):-1;return-1===n?s.length-1:n}_getRuler(){const e=this.options,t=this._cachedMeta,a=t.iScale,s=[];let n,r;for(n=0,r=t.data.length;n<r;++n)s.push(a.getPixelForValue(this.getParsed(n)[a.axis],n));const i=e.barThickness;return{min:i||_(t),pixels:s,start:a._startPixel,end:a._endPixel,stackCount:this._getStackCount(),scale:a,grouped:e.grouped,ratio:i?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:a,index:s},options:{base:n,minBarLength:i}}=this,o=n||0,l=this.getParsed(e),c=l._custom,d=k(c);let u,h,m=l[t.axis],p=0,f=a?this.applyStack(t,l,a):m;f!==m&&(p=f-m,f=m),d&&(m=c.barStart,f=c.barEnd-c.barStart,0!==m&&(0,r.s)(m)!==(0,r.s)(c.barEnd)&&(p=0),p+=m);const g=(0,r.k)(n)||d?p:n;let x=t.getPixelForValue(g);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(p+f):x,h=u-x,Math.abs(h)<i){h=function(e,t,a){return 0!==e?(0,r.s)(e):(t.isHorizontal()?1:-1)*(t.min>=a?1:-1)}(h,t,o)*i,m===o&&(x-=h/2);const e=t.getPixelForDecimal(0),n=t.getPixelForDecimal(1),c=Math.min(e,n),p=Math.max(e,n);x=Math.max(Math.min(x,p),c),u=x+h,a&&!d&&(l._stacks[t.axis]._visualValues[s]=t.getValueForPixel(u)-t.getValueForPixel(x))}if(x===t.getPixelForValue(o)){const e=(0,r.s)(h)*t.getLineWidthForValue(o)/2;x+=e,h-=e}return{size:h,base:x,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const a=t.scale,s=this.options,n=s.skipNull,i=(0,r.v)(s.maxBarThickness,1/0);let o,l;if(t.grouped){const a=n?this._getStackCount(e):t.stackCount,c="flex"===s.barThickness?function(e,t,a,s){const n=t.pixels,r=n[e];let i=e>0?n[e-1]:null,o=e<n.length-1?n[e+1]:null;const l=a.categoryPercentage;null===i&&(i=r-(null===o?t.end-t.start:o-r)),null===o&&(o=r+r-i);const c=r-(r-Math.min(i,o))/2*l;return{chunk:Math.abs(o-i)/2*l/s,ratio:a.barPercentage,start:c}}(e,t,s,a):function(e,t,a,s){const n=a.barThickness;let i,o;return(0,r.k)(n)?(i=t.min*a.categoryPercentage,o=a.barPercentage):(i=n*s,o=1),{chunk:i/s,ratio:o,start:t.pixels[e]-i/2}}(e,t,s,a),d=this._getStackIndex(this.index,this._cachedMeta.stack,n?e:void 0);o=c.start+c.chunk*d+c.chunk/2,l=Math.min(i,c.chunk*c.ratio)}else o=a.getPixelForValue(this.getParsed(e)[a.axis],e),l=Math.min(i,t.min*t.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const e=this._cachedMeta,t=e.vScale,a=e.data,s=a.length;let n=0;for(;n<s;++n)null===this.getParsed(n)[t.axis]||a[n].hidden||a[n].draw(this._ctx)}}(0,n.A)(D,"id","bar"),(0,n.A)(D,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,n.A)(D,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class O extends w{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,a,s){const n=super.parsePrimitiveData(e,t,a,s);for(let r=0;r<n.length;r++)n[r]._custom=this.resolveDataElementOptions(r+a).radius;return n}parseArrayData(e,t,a,s){const n=super.parseArrayData(e,t,a,s);for(let i=0;i<n.length;i++){const e=t[a+i];n[i]._custom=(0,r.v)(e[2],this.resolveDataElementOptions(i+a).radius)}return n}parseObjectData(e,t,a,s){const n=super.parseObjectData(e,t,a,s);for(let i=0;i<n.length;i++){const e=t[a+i];n[i]._custom=(0,r.v)(e&&e.r&&+e.r,this.resolveDataElementOptions(i+a).radius)}return n}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let a=e.length-1;a>=0;--a)t=Math.max(t,e[a].size(this.resolveDataElementOptions(a))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,a=this.chart.data.labels||[],{xScale:s,yScale:n}=t,r=this.getParsed(e),i=s.getLabelForValue(r.x),o=n.getLabelForValue(r.y),l=r._custom;return{label:a[e]||"",value:"("+i+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,a,s){const n="reset"===s,{iScale:r,vScale:i}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,s),c=r.axis,d=i.axis;for(let u=t;u<t+a;u++){const t=e[u],a=!n&&this.getParsed(u),h={},m=h[c]=n?r.getPixelForDecimal(.5):r.getPixelForValue(a[c]),p=h[d]=n?i.getBasePixel():i.getPixelForValue(a[d]);h.skip=isNaN(m)||isNaN(p),l&&(h.options=o||this.resolveDataElementOptions(u,t.active?"active":s),n&&(h.options.radius=0)),this.updateElement(t,u,h,s)}}resolveDataElementOptions(e,t){const a=this.getParsed(e);let s=super.resolveDataElementOptions(e,t);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const n=s.radius;return"active"!==t&&(s.radius=0),s.radius+=(0,r.v)(a&&a._custom,n),s}}(0,n.A)(O,"id","bubble"),(0,n.A)(O,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,n.A)(O,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class T extends w{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const a=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=a;else{let n,i,o=e=>+a[e];if((0,r.i)(a[e])){const{key:e="value"}=this._parsing;o=t=>+(0,r.f)(a[t],e)}for(n=e,i=e+t;n<i;++n)s._parsed[n]=o(n)}}_getRotation(){return(0,r.t)(this.options.rotation-90)}_getCircumference(){return(0,r.t)(this.options.circumference)}_getRotationExtents(){let e=r.T,t=-r.T;for(let a=0;a<this.chart.data.datasets.length;++a)if(this.chart.isDatasetVisible(a)&&this.chart.getDatasetMeta(a).type===this._type){const s=this.chart.getDatasetMeta(a).controller,n=s._getRotation(),r=s._getCircumference();e=Math.min(e,n),t=Math.max(t,n+r)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:a}=t,s=this._cachedMeta,n=s.data,i=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,o=Math.max((Math.min(a.width,a.height)-i)/2,0),l=Math.min((0,r.m)(this.options.cutout,o),1),c=this._getRingWeight(this.index),{circumference:d,rotation:u}=this._getRotationExtents(),{ratioX:h,ratioY:m,offsetX:p,offsetY:f}=function(e,t,a){let s=1,n=1,i=0,o=0;if(t<r.T){const l=e,c=l+t,d=Math.cos(l),u=Math.sin(l),h=Math.cos(c),m=Math.sin(c),p=(e,t,s)=>(0,r.p)(e,l,c,!0)?1:Math.max(t,t*a,s,s*a),f=(e,t,s)=>(0,r.p)(e,l,c,!0)?-1:Math.min(t,t*a,s,s*a),g=p(0,d,h),x=p(r.H,u,m),b=f(r.P,d,h),v=f(r.P+r.H,u,m);s=(g-b)/2,n=(x-v)/2,i=-(g+b)/2,o=-(x+v)/2}return{ratioX:s,ratioY:n,offsetX:i,offsetY:o}}(u,d,l),g=(a.width-i)/h,x=(a.height-i)/m,b=Math.max(Math.min(g,x)/2,0),v=(0,r.n)(this.options.radius,b),y=(v-Math.max(v*l,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*v,this.offsetY=f*v,s.total=this.calculateTotal(),this.outerRadius=v-y*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-y*c,0),this.updateElements(n,0,n.length,e)}_circumference(e,t){const a=this.options,s=this._cachedMeta,n=this._getCircumference();return t&&a.animation.animateRotate||!this.chart.getDataVisibility(e)||null===s._parsed[e]||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*n/r.T)}updateElements(e,t,a,s){const n="reset"===s,r=this.chart,i=r.chartArea,o=r.options.animation,l=(i.left+i.right)/2,c=(i.top+i.bottom)/2,d=n&&o.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:m,includeOptions:p}=this._getSharedOptions(t,s);let f,g=this._getRotation();for(f=0;f<t;++f)g+=this._circumference(f,n);for(f=t;f<t+a;++f){const t=this._circumference(f,n),a=e[f],r={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};p&&(r.options=m||this.resolveDataElementOptions(f,a.active?"active":s)),g+=t,this.updateElement(a,f,r,s)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let a,s=0;for(a=0;a<t.length;a++){const n=e._parsed[a];null===n||isNaN(n)||!this.chart.getDataVisibility(a)||t[a].hidden||(s+=Math.abs(n))}return s}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?r.T*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,a=this.chart,s=a.data.labels||[],n=(0,r.o)(t._parsed[e],a.options.locale);return{label:s[e]||"",value:n}}getMaxBorderWidth(e){let t=0;const a=this.chart;let s,n,r,i,o;if(!e)for(s=0,n=a.data.datasets.length;s<n;++s)if(a.isDatasetVisible(s)){r=a.getDatasetMeta(s),e=r.data,i=r.controller;break}if(!e)return 0;for(s=0,n=e.length;s<n;++s)o=i.resolveDataElementOptions(s),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let a=0,s=e.length;a<s;++a){const e=this.resolveDataElementOptions(a);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let a=0;a<e;++a)this.chart.isDatasetVisible(a)&&(t+=this._getRingWeight(a));return t}_getRingWeight(e){return Math.max((0,r.v)(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,n.A)(T,"id","doughnut"),(0,n.A)(T,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,n.A)(T,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,n.A)(T,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:a,color:s}}=e.legend.options;return t.labels.map(((t,n)=>{const r=e.getDatasetMeta(0).controller.getStyle(n);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:s,lineWidth:r.borderWidth,pointStyle:a,hidden:!e.getDataVisibility(n),index:n}}))}return[]}},onClick(e,t,a){a.chart.toggleDataVisibility(t.index),a.chart.update()}}}});class M extends w{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:a,data:s=[],_dataset:n}=t,i=this.chart._animationsDisabled;let{start:o,count:l}=(0,r.q)(t,s,i);this._drawStart=o,this._drawCount=l,(0,r.w)(t)&&(o=0,l=s.length),a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!n._decimated,a.points=s;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e),this.updateElements(s,o,l,e)}updateElements(e,t,a,s){const n="reset"===s,{iScale:i,vScale:o,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,s),h=i.axis,m=o.axis,{spanGaps:p,segment:f}=this.options,g=(0,r.x)(p)?p:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||n||"none"===s,b=t+a,v=e.length;let y=t>0&&this.getParsed(t-1);for(let j=0;j<v;++j){const a=e[j],p=x?a:{};if(j<t||j>=b){p.skip=!0;continue}const v=this.getParsed(j),N=(0,r.k)(v[m]),w=p[h]=i.getPixelForValue(v[h],j),_=p[m]=n||N?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,v,l):v[m],j);p.skip=isNaN(w)||isNaN(_)||N,p.stop=j>0&&Math.abs(v[h]-y[h])>g,f&&(p.parsed=v,p.raw=c.data[j]),u&&(p.options=d||this.resolveDataElementOptions(j,a.active?"active":s)),x||this.updateElement(a,j,p,s),y=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,a=t.options&&t.options.borderWidth||0,s=e.data||[];if(!s.length)return a;const n=s[0].size(this.resolveDataElementOptions(0)),r=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(a,n,r)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,n.A)(M,"id","line"),(0,n.A)(M,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,n.A)(M,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class R extends w{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,a=this.chart,s=a.data.labels||[],n=(0,r.o)(t._parsed[e].r,a.options.locale);return{label:s[e]||"",value:n}}parseObjectData(e,t,a,s){return r.y.bind(this)(e,t,a,s)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,a)=>{const s=this.getParsed(a).r;!isNaN(s)&&this.chart.getDataVisibility(a)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,a=e.options,s=Math.min(t.right-t.left,t.bottom-t.top),n=Math.max(s/2,0),r=(n-Math.max(a.cutoutPercentage?n/100*a.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=n-r*this.index,this.innerRadius=this.outerRadius-r}updateElements(e,t,a,s){const n="reset"===s,i=this.chart,o=i.options.animation,l=this._cachedMeta.rScale,c=l.xCenter,d=l.yCenter,u=l.getIndexAngle(0)-.5*r.P;let h,m=u;const p=360/this.countVisibleElements();for(h=0;h<t;++h)m+=this._computeAngle(h,s,p);for(h=t;h<t+a;h++){const t=e[h];let a=m,r=m+this._computeAngle(h,s,p),f=i.getDataVisibility(h)?l.getDistanceFromCenterForValue(this.getParsed(h).r):0;m=r,n&&(o.animateScale&&(f=0),o.animateRotate&&(a=r=u));const g={x:c,y:d,innerRadius:0,outerRadius:f,startAngle:a,endAngle:r,options:this.resolveDataElementOptions(h,t.active?"active":s)};this.updateElement(t,h,g,s)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,a)=>{!isNaN(this.getParsed(a).r)&&this.chart.getDataVisibility(a)&&t++})),t}_computeAngle(e,t,a){return this.chart.getDataVisibility(e)?(0,r.t)(this.resolveDataElementOptions(e,t).angle||a):0}}(0,n.A)(R,"id","polarArea"),(0,n.A)(R,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,n.A)(R,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:a,color:s}}=e.legend.options;return t.labels.map(((t,n)=>{const r=e.getDatasetMeta(0).controller.getStyle(n);return{text:t,fillStyle:r.backgroundColor,strokeStyle:r.borderColor,fontColor:s,lineWidth:r.borderWidth,pointStyle:a,hidden:!e.getDataVisibility(n),index:n}}))}return[]}},onClick(e,t,a){a.chart.toggleDataVisibility(t.index),a.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class I extends T{}(0,n.A)(I,"id","pie"),(0,n.A)(I,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class F extends w{getLabelAndValue(e){const t=this._cachedMeta.vScale,a=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(a[t.axis])}}parseObjectData(e,t,a,s){return r.y.bind(this)(e,t,a,s)}update(e){const t=this._cachedMeta,a=t.dataset,s=t.data||[],n=t.iScale.getLabels();if(a.points=s,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const r={_loop:!0,_fullLoop:n.length===s.length,options:t};this.updateElement(a,void 0,r,e)}this.updateElements(s,0,s.length,e)}updateElements(e,t,a,s){const n=this._cachedMeta.rScale,r="reset"===s;for(let i=t;i<t+a;i++){const t=e[i],a=this.resolveDataElementOptions(i,t.active?"active":s),o=n.getPointPositionForValue(i,this.getParsed(i).r),l=r?n.xCenter:o.x,c=r?n.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:a};this.updateElement(t,i,d,s)}}}(0,n.A)(F,"id","radar"),(0,n.A)(F,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,n.A)(F,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class z extends w{getLabelAndValue(e){const t=this._cachedMeta,a=this.chart.data.labels||[],{xScale:s,yScale:n}=t,r=this.getParsed(e),i=s.getLabelForValue(r.x),o=n.getLabelForValue(r.y);return{label:a[e]||"",value:"("+i+", "+o+")"}}update(e){const t=this._cachedMeta,{data:a=[]}=t,s=this.chart._animationsDisabled;let{start:n,count:i}=(0,r.q)(t,a,s);if(this._drawStart=n,this._drawCount=i,(0,r.w)(t)&&(n=0,i=a.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:n,_dataset:r}=t;n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=a;const i=this.resolveDatasetElementOptions(e);i.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:i},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(a,n,i,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,a,s){const n="reset"===s,{iScale:i,vScale:o,_stacked:l,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(t,s),u=this.getSharedOptions(d),h=this.includeOptions(s,u),m=i.axis,p=o.axis,{spanGaps:f,segment:g}=this.options,x=(0,r.x)(f)?f:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||n||"none"===s;let v=t>0&&this.getParsed(t-1);for(let y=t;y<t+a;++y){const t=e[y],a=this.getParsed(y),d=b?t:{},f=(0,r.k)(a[p]),j=d[m]=i.getPixelForValue(a[m],y),N=d[p]=n||f?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,a,l):a[p],y);d.skip=isNaN(j)||isNaN(N)||f,d.stop=y>0&&Math.abs(a[m]-v[m])>x,g&&(d.parsed=a,d.raw=c.data[y]),h&&(d.options=u||this.resolveDataElementOptions(y,t.active?"active":s)),b||this.updateElement(t,y,d,s),v=a}this.updateSharedOptions(u,s,d)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let a=t.length-1;a>=0;--a)e=Math.max(e,t[a].size(this.resolveDataElementOptions(a))/2);return e>0&&e}const a=e.dataset,s=a.options&&a.options.borderWidth||0;if(!t.length)return s;const n=t[0].size(this.resolveDataElementOptions(0)),r=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(s,n,r)/2}}(0,n.A)(z,"id","scatter"),(0,n.A)(z,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,n.A)(z,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var B=Object.freeze({__proto__:null,BarController:D,BubbleController:O,DoughnutController:T,LineController:M,PieController:I,PolarAreaController:R,RadarController:F,ScatterController:z});function q(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class U{static override(e){Object.assign(U.prototype,e)}constructor(e){(0,n.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return q()}parse(){return q()}format(){return q()}add(){return q()}diff(){return q()}startOf(){return q()}endOf(){return q()}}var H=U;function W(e,t,a,s){const{controller:n,data:i,_sorted:o}=e,l=n._cachedMeta.iScale,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(l&&t===l.axis&&"r"!==t&&o&&i.length){const o=l._reversePixels?r.A:r.B;if(!s){const s=o(i,t,a);if(c){const{vScale:t}=n._cachedMeta,{_parsed:a}=e,i=a.slice(0,s.lo+1).reverse().findIndex((e=>!(0,r.k)(e[t.axis])));s.lo-=Math.max(0,i);const o=a.slice(s.hi).findIndex((e=>!(0,r.k)(e[t.axis])));s.hi+=Math.max(0,o)}return s}if(n._sharedOptions){const e=i[0],s="function"===typeof e.getRange&&e.getRange(t);if(s){const e=o(i,t,a-s),n=o(i,t,a+s);return{lo:e.lo,hi:n.hi}}}}return{lo:0,hi:i.length-1}}function V(e,t,a,s,n){const r=e.getSortedVisibleDatasetMetas(),i=a[t];for(let o=0,l=r.length;o<l;++o){const{index:e,data:a}=r[o],{lo:l,hi:c}=W(r[o],t,i,n);for(let t=l;t<=c;++t){const n=a[t];n.skip||s(n,e,t)}}}function G(e,t,a,s,n){const i=[];if(!n&&!e.isPointInArea(t))return i;return V(e,a,t,(function(a,o,l){(n||(0,r.C)(a,e.chartArea,0))&&a.inRange(t.x,t.y,s)&&i.push({element:a,datasetIndex:o,index:l})}),!0),i}function Y(e,t,a,s,n,r){let i=[];const o=function(e){const t=-1!==e.indexOf("x"),a=-1!==e.indexOf("y");return function(e,s){const n=t?Math.abs(e.x-s.x):0,r=a?Math.abs(e.y-s.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}}(a);let l=Number.POSITIVE_INFINITY;return V(e,a,t,(function(a,c,d){const u=a.inRange(t.x,t.y,n);if(s&&!u)return;const h=a.getCenterPoint(n);if(!(!!r||e.isPointInArea(h))&&!u)return;const m=o(t,h);m<l?(i=[{element:a,datasetIndex:c,index:d}],l=m):m===l&&i.push({element:a,datasetIndex:c,index:d})})),i}function $(e,t,a,s,n,i){return i||e.isPointInArea(t)?"r"!==a||s?Y(e,t,a,s,n,i):function(e,t,a,s){let n=[];return V(e,a,t,(function(e,a,i){const{startAngle:o,endAngle:l}=e.getProps(["startAngle","endAngle"],s),{angle:c}=(0,r.D)(e,{x:t.x,y:t.y});(0,r.p)(c,o,l)&&n.push({element:e,datasetIndex:a,index:i})})),n}(e,t,a,n):[]}function X(e,t,a,s,n){const r=[],i="x"===a?"inXRange":"inYRange";let o=!1;return V(e,a,t,((e,s,l)=>{e[i]&&e[i](t[a],n)&&(r.push({element:e,datasetIndex:s,index:l}),o=o||e.inRange(t.x,t.y,n))})),s&&!o?[]:r}var J={evaluateInteractionItems:V,modes:{index(e,t,a,s){const n=(0,r.z)(t,e),i=a.axis||"x",o=a.includeInvisible||!1,l=a.intersect?G(e,n,i,s,o):$(e,n,i,!1,s,o),c=[];return l.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=l[0].index,a=e.data[t];a&&!a.skip&&c.push({element:a,datasetIndex:e.index,index:t})})),c):[]},dataset(e,t,a,s){const n=(0,r.z)(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;let l=a.intersect?G(e,n,i,s,o):$(e,n,i,!1,s,o);if(l.length>0){const t=l[0].datasetIndex,a=e.getDatasetMeta(t).data;l=[];for(let e=0;e<a.length;++e)l.push({element:a[e],datasetIndex:t,index:e})}return l},point:(e,t,a,s)=>G(e,(0,r.z)(t,e),a.axis||"xy",s,a.includeInvisible||!1),nearest(e,t,a,s){const n=(0,r.z)(t,e),i=a.axis||"xy",o=a.includeInvisible||!1;return $(e,n,i,a.intersect,s,o)},x:(e,t,a,s)=>X(e,(0,r.z)(t,e),"x",a.intersect,s),y:(e,t,a,s)=>X(e,(0,r.z)(t,e),"y",a.intersect,s)}};const K=["left","top","right","bottom"];function Q(e,t){return e.filter((e=>e.pos===t))}function Z(e,t){return e.filter((e=>-1===K.indexOf(e.pos)&&e.box.axis===t))}function ee(e,t){return e.sort(((e,a)=>{const s=t?a:e,n=t?e:a;return s.weight===n.weight?s.index-n.index:s.weight-n.weight}))}function te(e,t){const a=function(e){const t={};for(const a of e){const{stack:e,pos:s,stackWeight:n}=a;if(!e||!K.includes(s))continue;const r=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=n}return t}(e),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t;let r,i,o;for(r=0,i=e.length;r<i;++r){o=e[r];const{fullSize:i}=o.box,l=a[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*s:i&&t.availableWidth,o.height=n):(o.width=s,o.height=c?c*n:i&&t.availableHeight)}return a}function ae(e,t,a,s){return Math.max(e[a],t[a])+Math.max(e[s],t[s])}function se(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function ne(e,t,a,s){const{pos:n,box:i}=a,o=e.maxPadding;if(!(0,r.i)(n)){a.size&&(e[n]-=a.size);const t=s[a.stack]||{size:0,count:1};t.size=Math.max(t.size,a.horizontal?i.height:i.width),a.size=t.size/t.count,e[n]+=a.size}i.getPadding&&se(o,i.getPadding());const l=Math.max(0,t.outerWidth-ae(o,e,"left","right")),c=Math.max(0,t.outerHeight-ae(o,e,"top","bottom")),d=l!==e.w,u=c!==e.h;return e.w=l,e.h=c,a.horizontal?{same:d,other:u}:{same:u,other:d}}function re(e,t){const a=t.maxPadding;function s(e){const s={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{s[e]=Math.max(t[e],a[e])})),s}return s(e?["left","right"]:["top","bottom"])}function ie(e,t,a,s){const n=[];let r,i,o,l,c,d;for(r=0,i=e.length,c=0;r<i;++r){o=e[r],l=o.box,l.update(o.width||t.w,o.height||t.h,re(o.horizontal,t));const{same:i,other:u}=ne(t,a,o,s);c|=i&&n.length,d=d||u,l.fullSize||n.push(o)}return c&&ie(n,t,a,s)||d}function oe(e,t,a,s,n){e.top=a,e.left=t,e.right=t+s,e.bottom=a+n,e.width=s,e.height=n}function le(e,t,a,s){const n=a.padding;let{x:i,y:o}=t;for(const l of e){const e=l.box,c=s[l.stack]||{count:1,placed:0,weight:1},d=l.stackWeight/c.weight||1;if(l.horizontal){const s=t.w*d,i=c.size||e.height;(0,r.h)(c.start)&&(o=c.start),e.fullSize?oe(e,n.left,o,a.outerWidth-n.right-n.left,i):oe(e,t.left+c.placed,o,s,i),c.start=o,c.placed+=s,o=e.bottom}else{const s=t.h*d,o=c.size||e.width;(0,r.h)(c.start)&&(i=c.start),e.fullSize?oe(e,i,n.top,o,a.outerHeight-n.bottom-n.top):oe(e,i,t.top+c.placed,o,s),c.start=i,c.placed+=s,i=e.right}}t.x=i,t.y=o}var ce={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const a=e.boxes?e.boxes.indexOf(t):-1;-1!==a&&e.boxes.splice(a,1)},configure(e,t,a){t.fullSize=a.fullSize,t.position=a.position,t.weight=a.weight},update(e,t,a,s){if(!e)return;const n=(0,r.E)(e.options.layout.padding),i=Math.max(t-n.width,0),o=Math.max(a-n.height,0),l=function(e){const t=function(e){const t=[];let a,s,n,r,i,o;for(a=0,s=(e||[]).length;a<s;++a)n=e[a],({position:r,options:{stack:i,stackWeight:o=1}}=n),t.push({index:a,box:n,pos:r,horizontal:n.isHorizontal(),weight:n.weight,stack:i&&r+i,stackWeight:o});return t}(e),a=ee(t.filter((e=>e.box.fullSize)),!0),s=ee(Q(t,"left"),!0),n=ee(Q(t,"right")),r=ee(Q(t,"top"),!0),i=ee(Q(t,"bottom")),o=Z(t,"x"),l=Z(t,"y");return{fullSize:a,leftAndTop:s.concat(r),rightAndBottom:n.concat(l).concat(i).concat(o),chartArea:Q(t,"chartArea"),vertical:s.concat(n).concat(l),horizontal:r.concat(i).concat(o)}}(e.boxes),c=l.vertical,d=l.horizontal;(0,r.F)(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=c.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,h=Object.freeze({outerWidth:t,outerHeight:a,padding:n,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),m=Object.assign({},n);se(m,(0,r.E)(s));const p=Object.assign({maxPadding:m,w:i,h:o,x:n.left,y:n.top},n),f=te(c.concat(d),h);ie(l.fullSize,p,h,f),ie(c,p,h,f),ie(d,p,h,f)&&ie(c,p,h,f),function(e){const t=e.maxPadding;function a(a){const s=Math.max(t[a]-e[a],0);return e[a]+=s,s}e.y+=a("top"),e.x+=a("left"),a("right"),a("bottom")}(p),le(l.leftAndTop,p,h,f),p.x+=p.w,p.y+=p.h,le(l.rightAndBottom,p,h,f),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},(0,r.F)(l.chartArea,(t=>{const a=t.box;Object.assign(a,e.chartArea),a.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})}))}};class de{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,a){}removeEventListener(e,t,a){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,a,s){return t=Math.max(0,t||e.width),a=a||e.height,{width:t,height:Math.max(0,s?Math.floor(t/s):a)}}isAttached(e){return!0}updateConfig(e){}}class ue extends de{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const he="$chartjs",me={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},pe=e=>null===e||""===e;const fe=!!r.K&&{passive:!0};function ge(e,t,a){e&&e.canvas&&e.canvas.removeEventListener(t,a,fe)}function xe(e,t){for(const a of e)if(a===t||a.contains(t))return!0}function be(e,t,a){const s=e.canvas,n=new MutationObserver((e=>{let t=!1;for(const a of e)t=t||xe(a.addedNodes,s),t=t&&!xe(a.removedNodes,s);t&&a()}));return n.observe(document,{childList:!0,subtree:!0}),n}function ve(e,t,a){const s=e.canvas,n=new MutationObserver((e=>{let t=!1;for(const a of e)t=t||xe(a.removedNodes,s),t=t&&!xe(a.addedNodes,s);t&&a()}));return n.observe(document,{childList:!0,subtree:!0}),n}const ye=new Map;let je=0;function Ne(){const e=window.devicePixelRatio;e!==je&&(je=e,ye.forEach(((t,a)=>{a.currentDevicePixelRatio!==e&&t()})))}function we(e,t,a){const s=e.canvas,n=s&&(0,r.I)(s);if(!n)return;const i=(0,r.L)(((e,t)=>{const s=n.clientWidth;a(e,t),s<n.clientWidth&&a()}),window),o=new ResizeObserver((e=>{const t=e[0],a=t.contentRect.width,s=t.contentRect.height;0===a&&0===s||i(a,s)}));return o.observe(n),function(e,t){ye.size||window.addEventListener("resize",Ne),ye.set(e,t)}(e,i),o}function _e(e,t,a){a&&a.disconnect(),"resize"===t&&function(e){ye.delete(e),ye.size||window.removeEventListener("resize",Ne)}(e)}function Se(e,t,a){const s=e.canvas,n=(0,r.L)((t=>{null!==e.ctx&&a(function(e,t){const a=me[e.type]||e.type,{x:s,y:n}=(0,r.z)(e,t);return{type:a,chart:t,native:e,x:void 0!==s?s:null,y:void 0!==n?n:null}}(t,e))}),e);return function(e,t,a){e&&e.addEventListener(t,a,fe)}(s,t,n),n}class Ce extends de{acquireContext(e,t){const a=e&&e.getContext&&e.getContext("2d");return a&&a.canvas===e?(function(e,t){const a=e.style,s=e.getAttribute("height"),n=e.getAttribute("width");if(e[he]={initial:{height:s,width:n,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",pe(n)){const t=(0,r.J)(e,"width");void 0!==t&&(e.width=t)}if(pe(s))if(""===e.style.height)e.height=e.width/(t||2);else{const t=(0,r.J)(e,"height");void 0!==t&&(e.height=t)}}(e,t),a):null}releaseContext(e){const t=e.canvas;if(!t[he])return!1;const a=t[he].initial;["height","width"].forEach((e=>{const s=a[e];(0,r.k)(s)?t.removeAttribute(e):t.setAttribute(e,s)}));const s=a.style||{};return Object.keys(s).forEach((e=>{t.style[e]=s[e]})),t.width=t.width,delete t[he],!0}addEventListener(e,t,a){this.removeEventListener(e,t);const s=e.$proxies||(e.$proxies={}),n={attach:be,detach:ve,resize:we}[t]||Se;s[t]=n(e,t,a)}removeEventListener(e,t){const a=e.$proxies||(e.$proxies={}),s=a[t];if(!s)return;({attach:_e,detach:_e,resize:_e}[t]||ge)(e,t,s),a[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,a,s){return(0,r.G)(e,t,a,s)}isAttached(e){const t=e&&(0,r.I)(e);return!(!t||!t.isConnected)}}class ke{constructor(){(0,n.A)(this,"x",void 0),(0,n.A)(this,"y",void 0),(0,n.A)(this,"active",!1),(0,n.A)(this,"options",void 0),(0,n.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:a}=this.getProps(["x","y"],e);return{x:t,y:a}}hasValue(){return(0,r.x)(this.x)&&(0,r.x)(this.y)}getProps(e,t){const a=this.$animations;if(!t||!a)return this;const s={};return e.forEach((e=>{s[e]=a[e]&&a[e].active()?a[e]._to:this[e]})),s}}function Ae(e,t){const a=e.options.ticks,s=function(e){const t=e.options.offset,a=e._tickSize(),s=e._length/a+(t?0:1),n=e._maxLength/a;return Math.floor(Math.min(s,n))}(e),n=Math.min(a.maxTicksLimit||s,s),i=a.major.enabled?function(e){const t=[];let a,s;for(a=0,s=e.length;a<s;a++)e[a].major&&t.push(a);return t}(t):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>n)return function(e,t,a,s){let n,r=0,i=a[0];for(s=Math.ceil(s),n=0;n<e.length;n++)n===i&&(t.push(e[n]),r++,i=a[r*s])}(t,d,i,o/n),d;const u=function(e,t,a){const s=function(e){const t=e.length;let a,s;if(t<2)return!1;for(s=e[0],a=1;a<t;++a)if(e[a]-e[a-1]!==s)return!1;return s}(e),n=t.length/a;if(!s)return Math.max(n,1);const i=(0,r.N)(s);for(let r=0,o=i.length-1;r<o;r++){const e=i[r];if(e>n)return e}return Math.max(n,1)}(i,t,n);if(o>0){let e,a;const s=o>1?Math.round((c-l)/(o-1)):null;for(Pe(t,d,u,(0,r.k)(s)?0:l-s,l),e=0,a=o-1;e<a;e++)Pe(t,d,u,i[e],i[e+1]);return Pe(t,d,u,c,(0,r.k)(s)?t.length:c+s),d}return Pe(t,d,u),d}function Pe(e,t,a,s,n){const i=(0,r.v)(s,0),o=Math.min((0,r.v)(n,e.length),e.length);let l,c,d,u=0;for(a=Math.ceil(a),n&&(l=n-s,a=l/Math.floor(l/a)),d=i;d<0;)u++,d=Math.round(i+u*a);for(c=Math.max(i,0);c<o;c++)c===d&&(t.push(e[c]),u++,d=Math.round(i+u*a))}(0,n.A)(ke,"defaults",{}),(0,n.A)(ke,"defaultRoutes",void 0);const Ee=(e,t,a)=>"top"===t||"left"===t?e[t]+a:e[t]-a,Le=(e,t)=>Math.min(t||e,e);function De(e,t){const a=[],s=e.length/t,n=e.length;let r=0;for(;r<n;r+=s)a.push(e[Math.floor(r)]);return a}function Oe(e,t,a){const s=e.ticks.length,n=Math.min(t,s-1),r=e._startPixel,i=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(n);if(!(a&&(l=1===s?Math.max(c-r,i-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(n-1))/2,c+=n<t?l:-l,c<r-o||c>i+o)))return c}function Te(e){return e.drawTicks?e.tickLength:0}function Me(e,t){if(!e.display)return 0;const a=(0,r.a0)(e.font,t),s=(0,r.E)(e.padding);return((0,r.b)(e.text)?e.text.length:1)*a.lineHeight+s.height}function Re(e,t,a){let s=(0,r.a1)(e);return(a&&"right"!==t||!a&&"right"===t)&&(s=(e=>"left"===e?"right":"right"===e?"left":e)(s)),s}class Ie extends ke{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:a,_suggestedMax:s}=this;return e=(0,r.O)(e,Number.POSITIVE_INFINITY),t=(0,r.O)(t,Number.NEGATIVE_INFINITY),a=(0,r.O)(a,Number.POSITIVE_INFINITY),s=(0,r.O)(s,Number.NEGATIVE_INFINITY),{min:(0,r.O)(e,a),max:(0,r.O)(t,s),minDefined:(0,r.g)(e),maxDefined:(0,r.g)(t)}}getMinMax(e){let t,{min:a,max:s,minDefined:n,maxDefined:i}=this.getUserBounds();if(n&&i)return{min:a,max:s};const o=this.getMatchingVisibleMetas();for(let r=0,l=o.length;r<l;++r)t=o[r].controller.getMinMax(this,e),n||(a=Math.min(a,t.min)),i||(s=Math.max(s,t.max));return a=i&&a>s?s:a,s=n&&a>s?a:s,{min:(0,r.O)(a,(0,r.O)(s,a)),max:(0,r.O)(s,(0,r.O)(a,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){(0,r.Q)(this.options.beforeUpdate,[this])}update(e,t,a){const{beginAtZero:s,grace:n,ticks:i}=this.options,o=i.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=a=Object.assign({left:0,right:0,top:0,bottom:0},a),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+a.left+a.right:this.height+a.top+a.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=(0,r.R)(this,n,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?De(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),i.display&&(i.autoSkip||"auto"===i.source)&&(this.ticks=Ae(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,a=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,a=!a),this._startPixel=e,this._endPixel=t,this._reversePixels=a,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){(0,r.Q)(this.options.afterUpdate,[this])}beforeSetDimensions(){(0,r.Q)(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){(0,r.Q)(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),(0,r.Q)(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){(0,r.Q)(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let a,s,n;for(a=0,s=e.length;a<s;a++)n=e[a],n.label=(0,r.Q)(t.callback,[n.value,a,e],this)}afterTickToLabelConversion(){(0,r.Q)(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){(0,r.Q)(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,a=Le(this.ticks.length,e.ticks.maxTicksLimit),s=t.minRotation||0,n=t.maxRotation;let i,o,l,c=s;if(!this._isVisible()||!t.display||s>=n||a<=1||!this.isHorizontal())return void(this.labelRotation=s);const d=this._getLabelSizes(),u=d.widest.width,h=d.highest.height,m=(0,r.S)(this.chart.width-u,0,this.maxWidth);i=e.offset?this.maxWidth/a:m/(a-1),u+6>i&&(i=m/(a-(e.offset?.5:1)),o=this.maxHeight-Te(e.grid)-t.padding-Me(e.title,this.chart.options.font),l=Math.sqrt(u*u+h*h),c=(0,r.U)(Math.min(Math.asin((0,r.S)((d.highest.height+6)/i,-1,1)),Math.asin((0,r.S)(o/l,-1,1))-Math.asin((0,r.S)(h/l,-1,1)))),c=Math.max(s,Math.min(n,c))),this.labelRotation=c}afterCalculateLabelRotation(){(0,r.Q)(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){(0,r.Q)(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:a,title:s,grid:n}}=this,i=this._isVisible(),o=this.isHorizontal();if(i){const i=Me(s,t.options.font);if(o?(e.width=this.maxWidth,e.height=Te(n)+i):(e.height=this.maxHeight,e.width=Te(n)+i),a.display&&this.ticks.length){const{first:t,last:s,widest:n,highest:i}=this._getLabelSizes(),l=2*a.padding,c=(0,r.t)(this.labelRotation),d=Math.cos(c),u=Math.sin(c);if(o){const t=a.mirror?0:u*n.width+d*i.height;e.height=Math.min(this.maxHeight,e.height+t+l)}else{const t=a.mirror?0:d*n.width+u*i.height;e.width=Math.min(this.maxWidth,e.width+t+l)}this._calculatePadding(t,s,u,d)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,a,s){const{ticks:{align:n,padding:r},position:i}=this.options,o=0!==this.labelRotation,l="top"!==i&&"x"===this.axis;if(this.isHorizontal()){const i=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;o?l?(d=s*e.width,u=a*t.height):(d=a*e.height,u=s*t.width):"start"===n?u=t.width:"end"===n?d=e.width:"inner"!==n&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-i+r)*this.width/(this.width-i),0),this.paddingRight=Math.max((u-c+r)*this.width/(this.width-c),0)}else{let a=t.height/2,s=e.height/2;"start"===n?(a=0,s=e.height):"end"===n&&(a=t.height,s=0),this.paddingTop=a+r,this.paddingBottom=s+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){(0,r.Q)(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,a;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,a=e.length;t<a;t++)(0,r.k)(e[t].label)&&(e.splice(t,1),a--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let a=this.ticks;t<a.length&&(a=De(a,t)),this._labelSizes=e=this._computeLabelSizes(a,a.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,a){const{ctx:s,_longestTextCache:n}=this,i=[],o=[],l=Math.floor(t/Le(t,a));let c,d,u,h,m,p,f,g,x,b,v,y=0,j=0;for(c=0;c<t;c+=l){if(h=e[c].label,m=this._resolveTickFontOptions(c),s.font=p=m.string,f=n[p]=n[p]||{data:{},gc:[]},g=m.lineHeight,x=b=0,(0,r.k)(h)||(0,r.b)(h)){if((0,r.b)(h))for(d=0,u=h.length;d<u;++d)v=h[d],(0,r.k)(v)||(0,r.b)(v)||(x=(0,r.V)(s,f.data,f.gc,x,v),b+=g)}else x=(0,r.V)(s,f.data,f.gc,x,h),b=g;i.push(x),o.push(b),y=Math.max(x,y),j=Math.max(b,j)}!function(e,t){(0,r.F)(e,(e=>{const a=e.gc,s=a.length/2;let n;if(s>t){for(n=0;n<s;++n)delete e.data[a[n]];a.splice(0,s)}}))}(n,t);const N=i.indexOf(y),w=o.indexOf(j),_=e=>({width:i[e]||0,height:o[e]||0});return{first:_(0),last:_(t-1),widest:_(N),highest:_(w),widths:i,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return(0,r.W)(this._alignToPixels?(0,r.X)(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const a=t[e];return a.$context||(a.$context=function(e,t,a){return(0,r.j)(e,{tick:a,index:t,type:"tick"})}(this.getContext(),e,a))}return this.$context||(this.$context=(a=this.chart.getContext(),s=this,(0,r.j)(a,{scale:s,type:"scale"})));var a,s}_tickSize(){const e=this.options.ticks,t=(0,r.t)(this.labelRotation),a=Math.abs(Math.cos(t)),s=Math.abs(Math.sin(t)),n=this._getLabelSizes(),i=e.autoSkipPadding||0,o=n?n.widest.width+i:0,l=n?n.highest.height+i:0;return this.isHorizontal()?l*a>o*s?o/a:l/s:l*s<o*a?l/a:o/s}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,a=this.chart,s=this.options,{grid:n,position:i,border:o}=s,l=n.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),u=Te(n),h=[],m=o.setContext(this.getContext()),p=m.display?m.width:0,f=p/2,g=function(e){return(0,r.X)(a,e,p)};let x,b,v,y,j,N,w,_,S,C,k,A;if("top"===i)x=g(this.bottom),N=this.bottom-u,_=x-f,C=g(e.top)+f,A=e.bottom;else if("bottom"===i)x=g(this.top),C=e.top,A=g(e.bottom)-f,N=x+f,_=this.top+u;else if("left"===i)x=g(this.right),j=this.right-u,w=x-f,S=g(e.left)+f,k=e.right;else if("right"===i)x=g(this.left),S=e.left,k=g(e.right)-f,j=x+f,w=this.left+u;else if("x"===t){if("center"===i)x=g((e.top+e.bottom)/2+.5);else if((0,r.i)(i)){const e=Object.keys(i)[0],t=i[e];x=g(this.chart.scales[e].getPixelForValue(t))}C=e.top,A=e.bottom,N=x+f,_=N+u}else if("y"===t){if("center"===i)x=g((e.left+e.right)/2);else if((0,r.i)(i)){const e=Object.keys(i)[0],t=i[e];x=g(this.chart.scales[e].getPixelForValue(t))}j=x-f,w=j-u,S=e.left,k=e.right}const P=(0,r.v)(s.ticks.maxTicksLimit,d),E=Math.max(1,Math.ceil(d/P));for(b=0;b<d;b+=E){const e=this.getContext(b),t=n.setContext(e),s=o.setContext(e),i=t.lineWidth,d=t.color,u=s.dash||[],m=s.dashOffset,p=t.tickWidth,f=t.tickColor,g=t.tickBorderDash||[],x=t.tickBorderDashOffset;v=Oe(this,b,l),void 0!==v&&(y=(0,r.X)(a,v,i),c?j=w=S=k=y:N=_=C=A=y,h.push({tx1:j,ty1:N,tx2:w,ty2:_,x1:S,y1:C,x2:k,y2:A,width:i,color:d,borderDash:u,borderDashOffset:m,tickWidth:p,tickColor:f,tickBorderDash:g,tickBorderDashOffset:x}))}return this._ticksLength=d,this._borderValue=x,h}_computeLabelItems(e){const t=this.axis,a=this.options,{position:s,ticks:n}=a,i=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:c,padding:d,mirror:u}=n,h=Te(a.grid),m=h+d,p=u?-d:m,f=-(0,r.t)(this.labelRotation),g=[];let x,b,v,y,j,N,w,_,S,C,k,A,P="middle";if("top"===s)N=this.bottom-p,w=this._getXAxisLabelAlignment();else if("bottom"===s)N=this.top+p,w=this._getXAxisLabelAlignment();else if("left"===s){const e=this._getYAxisLabelAlignment(h);w=e.textAlign,j=e.x}else if("right"===s){const e=this._getYAxisLabelAlignment(h);w=e.textAlign,j=e.x}else if("x"===t){if("center"===s)N=(e.top+e.bottom)/2+m;else if((0,r.i)(s)){const e=Object.keys(s)[0],t=s[e];N=this.chart.scales[e].getPixelForValue(t)+m}w=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===s)j=(e.left+e.right)/2-m;else if((0,r.i)(s)){const e=Object.keys(s)[0],t=s[e];j=this.chart.scales[e].getPixelForValue(t)}w=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===l?P="top":"end"===l&&(P="bottom"));const E=this._getLabelSizes();for(x=0,b=o.length;x<b;++x){v=o[x],y=v.label;const e=n.setContext(this.getContext(x));_=this.getPixelForTick(x)+n.labelOffset,S=this._resolveTickFontOptions(x),C=S.lineHeight,k=(0,r.b)(y)?y.length:1;const t=k/2,a=e.color,l=e.textStrokeColor,d=e.textStrokeWidth;let h,m=w;if(i?(j=_,"inner"===w&&(m=x===b-1?this.options.reverse?"left":"right":0===x?this.options.reverse?"right":"left":"center"),A="top"===s?"near"===c||0!==f?-k*C+C/2:"center"===c?-E.highest.height/2-t*C+C:-E.highest.height+C/2:"near"===c||0!==f?C/2:"center"===c?E.highest.height/2-t*C:E.highest.height-k*C,u&&(A*=-1),0===f||e.showLabelBackdrop||(j+=C/2*Math.sin(f))):(N=_,A=(1-k)*C/2),e.showLabelBackdrop){const t=(0,r.E)(e.backdropPadding),a=E.heights[x],s=E.widths[x];let n=A-t.top,i=0-t.left;switch(P){case"middle":n-=a/2;break;case"bottom":n-=a}switch(w){case"center":i-=s/2;break;case"right":i-=s;break;case"inner":x===b-1?i-=s:x>0&&(i-=s/2)}h={left:i,top:n,width:s+t.width,height:a+t.height,color:e.backdropColor}}g.push({label:y,font:S,textOffset:A,options:{rotation:f,color:a,strokeColor:l,strokeWidth:d,textAlign:m,textBaseline:P,translation:[j,N],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-(0,r.t)(this.labelRotation))return"top"===e?"left":"right";let a="center";return"start"===t.align?a="left":"end"===t.align?a="right":"inner"===t.align&&(a="inner"),a}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:a,mirror:s,padding:n}}=this.options,r=e+n,i=this._getLabelSizes().widest.width;let o,l;return"left"===t?s?(l=this.right+n,"near"===a?o="left":"center"===a?(o="center",l+=i/2):(o="right",l+=i)):(l=this.right-r,"near"===a?o="right":"center"===a?(o="center",l-=i/2):(o="left",l=this.left)):"right"===t?s?(l=this.left+n,"near"===a?o="right":"center"===a?(o="center",l-=i/2):(o="left",l-=i)):(l=this.left+r,"near"===a?o="left":"center"===a?(o="center",l+=i/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:a,top:s,width:n,height:r}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(a,s,n,r),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const a=this.ticks.findIndex((t=>t.value===e));if(a>=0){return t.setContext(this.getContext(a)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,a=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let n,r;const i=(e,t,s)=>{s.width&&s.color&&(a.save(),a.lineWidth=s.width,a.strokeStyle=s.color,a.setLineDash(s.borderDash||[]),a.lineDashOffset=s.borderDashOffset,a.beginPath(),a.moveTo(e.x,e.y),a.lineTo(t.x,t.y),a.stroke(),a.restore())};if(t.display)for(n=0,r=s.length;n<r;++n){const e=s[n];t.drawOnChartArea&&i({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&i({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:a,grid:s}}=this,n=a.setContext(this.getContext()),i=a.display?n.width:0;if(!i)return;const o=s.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,u,h;this.isHorizontal()?(c=(0,r.X)(e,this.left,i)-i/2,d=(0,r.X)(e,this.right,o)+o/2,u=h=l):(u=(0,r.X)(e,this.top,i)-i/2,h=(0,r.X)(e,this.bottom,o)+o/2,c=d=l),t.save(),t.lineWidth=n.width,t.strokeStyle=n.color,t.beginPath(),t.moveTo(c,u),t.lineTo(d,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,a=this._computeLabelArea();a&&(0,r.Y)(t,a);const s=this.getLabelItems(e);for(const n of s){const e=n.options,a=n.font,s=n.label,i=n.textOffset;(0,r.Z)(t,s,0,i,a,e)}a&&(0,r.$)(t)}drawTitle(){const{ctx:e,options:{position:t,title:a,reverse:s}}=this;if(!a.display)return;const n=(0,r.a0)(a.font),i=(0,r.E)(a.padding),o=a.align;let l=n.lineHeight/2;"bottom"===t||"center"===t||(0,r.i)(t)?(l+=i.bottom,(0,r.b)(a.text)&&(l+=n.lineHeight*(a.text.length-1))):l+=i.top;const{titleX:c,titleY:d,maxWidth:u,rotation:h}=function(e,t,a,s){const{top:n,left:i,bottom:o,right:l,chart:c}=e,{chartArea:d,scales:u}=c;let h,m,p,f=0;const g=o-n,x=l-i;if(e.isHorizontal()){if(m=(0,r.a2)(s,i,l),(0,r.i)(a)){const e=Object.keys(a)[0],s=a[e];p=u[e].getPixelForValue(s)+g-t}else p="center"===a?(d.bottom+d.top)/2+g-t:Ee(e,a,t);h=l-i}else{if((0,r.i)(a)){const e=Object.keys(a)[0],s=a[e];m=u[e].getPixelForValue(s)-x+t}else m="center"===a?(d.left+d.right)/2-x+t:Ee(e,a,t);p=(0,r.a2)(s,o,n),f="left"===a?-r.H:r.H}return{titleX:m,titleY:p,maxWidth:h,rotation:f}}(this,l,t,o);(0,r.Z)(e,a.text,0,0,n,{color:a.color,maxWidth:u,rotation:h,textAlign:Re(o,t,s),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,a=(0,r.v)(e.grid&&e.grid.z,-1),s=(0,r.v)(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Ie.prototype.draw?[{z:a,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),a=this.axis+"AxisID",s=[];let n,r;for(n=0,r=t.length;n<r;++n){const r=t[n];r[a]!==this.id||e&&r.type!==e||s.push(r)}return s}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return(0,r.a0)(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Fe{constructor(e,t,a){this.type=e,this.scope=t,this.override=a,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let a;(function(e){return"id"in e&&"defaults"in e})(t)&&(a=this.register(t));const s=this.items,n=e.id,i=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+e);return n in s||(s[n]=e,function(e,t,a){const s=(0,r.a4)(Object.create(null),[a?r.d.get(a):{},r.d.get(t),e.defaults]);r.d.set(t,s),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((a=>{const s=a.split("."),n=s.pop(),i=[e].concat(s).join("."),o=t[a].split("."),l=o.pop(),c=o.join(".");r.d.route(i,n,c,l)}))}(t,e.defaultRoutes);e.descriptors&&r.d.describe(t,e.descriptors)}(e,i,a),this.override&&r.d.override(e.id,e.overrides)),i}get(e){return this.items[e]}unregister(e){const t=this.items,a=e.id,s=this.scope;a in t&&delete t[a],s&&a in r.d[s]&&(delete r.d[s][a],this.override&&delete r.a3[a])}}class ze{constructor(){this.controllers=new Fe(w,"datasets",!0),this.elements=new Fe(ke,"elements"),this.plugins=new Fe(Object,"plugins"),this.scales=new Fe(Ie,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this._each("unregister",t,this.scales)}_each(e,t,a){[...t].forEach((t=>{const s=a||this._getRegistryForType(t);a||s.isForType(t)||s===this.plugins&&t.id?this._exec(e,s,t):(0,r.F)(t,(t=>{const s=a||this._getRegistryForType(t);this._exec(e,s,t)}))}))}_exec(e,t,a){const s=(0,r.a5)(e);(0,r.Q)(a["before"+s],[],a),t[e](a),(0,r.Q)(a["after"+s],[],a)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const a=this._typedRegistries[t];if(a.isForType(e))return a}return this.plugins}_get(e,t,a){const s=t.get(e);if(void 0===s)throw new Error('"'+e+'" is not a registered '+a+".");return s}}var Be=new ze;class qe{constructor(){this._init=[]}notify(e,t,a,s){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const n=s?this._descriptors(e).filter(s):this._descriptors(e),r=this._notify(n,e,t,a);return"afterDestroy"===t&&(this._notify(n,e,"stop"),this._notify(this._init,e,"uninstall")),r}_notify(e,t,a,s){s=s||{};for(const n of e){const e=n.plugin,i=e[a],o=[t,s,n.options];if(!1===(0,r.Q)(i,o,e)&&s.cancelable)return!1}return!0}invalidate(){(0,r.k)(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const a=e&&e.config,s=(0,r.v)(a.options&&a.options.plugins,{}),n=function(e){const t={},a=[],s=Object.keys(Be.plugins.items);for(let r=0;r<s.length;r++)a.push(Be.getPlugin(s[r]));const n=e.plugins||[];for(let r=0;r<n.length;r++){const e=n[r];-1===a.indexOf(e)&&(a.push(e),t[e.id]=!0)}return{plugins:a,localIds:t}}(a);return!1!==s||t?function(e,t,a,s){let{plugins:n,localIds:r}=t;const i=[],o=e.getContext();for(const l of n){const t=l.id,n=Ue(a[t],s);null!==n&&i.push({plugin:l,options:He(e.config,{plugin:l,local:r[t]},n,o)})}return i}(e,n,s,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],a=this._cache,s=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(s(t,a),e,"stop"),this._notify(s(a,t),e,"start")}}function Ue(e,t){return t||!1!==e?!0===e?{}:e:null}function He(e,t,a,s){let{plugin:n,local:r}=t;const i=e.pluginScopeKeys(n),o=e.getOptionScopes(a,i);return r&&n.defaults&&o.push(n.defaults),e.createResolver(o,s,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function We(e,t){const a=r.d.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||a.indexAxis||"x"}function Ve(e){if("x"===e||"y"===e||"r"===e)return e}function Ge(e){if(Ve(e))return e;for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];for(const r of a){const t=r.axis||("top"===(n=r.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||e.length>1&&Ve(e[0].toLowerCase());if(t)return t}var n;throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function Ye(e,t,a){if(a[t+"AxisID"]===e)return{axis:t}}function $e(e,t){const a=r.a3[e.type]||{scales:{}},s=t.scales||{},n=We(e.type,t),i=Object.create(null);return Object.keys(s).forEach((t=>{const o=s[t];if(!(0,r.i)(o))return console.error("Invalid scale configuration for scale: ".concat(t));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const l=Ge(t,o,function(e,t){if(t.data&&t.data.datasets){const a=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(a.length)return Ye(e,"x",a[0])||Ye(e,"y",a[0])}return{}}(t,e),r.d.scales[o.type]),c=function(e,t){return e===t?"_index_":"_value_"}(l,n),d=a.scales||{};i[t]=(0,r.ab)(Object.create(null),[{axis:l},o,d[l],d[c]])})),e.data.datasets.forEach((a=>{const n=a.type||e.type,o=a.indexAxis||We(n,t),l=(r.a3[n]||{}).scales||{};Object.keys(l).forEach((e=>{const t=function(e,t){let a=e;return"_index_"===e?a=t:"_value_"===e&&(a="x"===t?"y":"x"),a}(e,o),n=a[t+"AxisID"]||t;i[n]=i[n]||Object.create(null),(0,r.ab)(i[n],[{axis:t},s[n],l[e]])}))})),Object.keys(i).forEach((e=>{const t=i[e];(0,r.ab)(t,[r.d.scales[t.type],r.d.scale])})),i}function Xe(e){const t=e.options||(e.options={});t.plugins=(0,r.v)(t.plugins,{}),t.scales=$e(e,t)}function Je(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Ke=new Map,Qe=new Set;function Ze(e,t){let a=Ke.get(e);return a||(a=t(),Ke.set(e,a),Qe.add(a)),a}const et=(e,t,a)=>{const s=(0,r.f)(t,a);void 0!==s&&e.add(s)};class tt{constructor(e){this._config=function(e){return(e=e||{}).data=Je(e.data),Xe(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Je(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Xe(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ze(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return Ze("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return Ze("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,a=this.type;return Ze("".concat(a,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const a=this._scopeCache;let s=a.get(e);return s&&!t||(s=new Map,a.set(e,s)),s}getOptionScopes(e,t,a){const{options:s,type:n}=this,i=this._cachedScopes(e,a),o=i.get(t);if(o)return o;const l=new Set;t.forEach((t=>{e&&(l.add(e),t.forEach((t=>et(l,e,t)))),t.forEach((e=>et(l,s,e))),t.forEach((e=>et(l,r.a3[n]||{},e))),t.forEach((e=>et(l,r.d,e))),t.forEach((e=>et(l,r.a6,e)))}));const c=Array.from(l);return 0===c.length&&c.push(Object.create(null)),Qe.has(t)&&i.set(t,c),c}chartOptionScopes(){const{options:e,type:t}=this;return[e,r.a3[t]||{},r.d.datasets[t]||{},{type:t},r.d,r.a6]}resolveNamedOptions(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const n={$shared:!0},{resolver:i,subPrefixes:o}=at(this._resolverCache,e,s);let l=i;if(function(e,t){const{isScriptable:a,isIndexable:s}=(0,r.aa)(e);for(const n of t){const t=a(n),i=s(n),o=(i||t)&&e[n];if(t&&((0,r.a7)(o)||st(o))||i&&(0,r.b)(o))return!0}return!1}(i,t)){n.$shared=!1,a=(0,r.a7)(a)?a():a;const t=this.createResolver(e,a,o);l=(0,r.a8)(i,a,t)}for(const r of t)n[r]=l[r];return n}createResolver(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],s=arguments.length>3?arguments[3]:void 0;const{resolver:n}=at(this._resolverCache,e,a);return(0,r.i)(t)?(0,r.a8)(n,t,void 0,s):n}}function at(e,t,a){let s=e.get(t);s||(s=new Map,e.set(t,s));const n=a.join();let i=s.get(n);if(!i){i={resolver:(0,r.a9)(t,a),subPrefixes:a.filter((e=>!e.toLowerCase().includes("hover")))},s.set(n,i)}return i}const st=e=>(0,r.i)(e)&&Object.getOwnPropertyNames(e).some((t=>(0,r.a7)(e[t])));const nt=["top","bottom","left","right","chartArea"];function rt(e,t){return"top"===e||"bottom"===e||-1===nt.indexOf(e)&&"x"===t}function it(e,t){return function(a,s){return a[e]===s[e]?a[t]-s[t]:a[e]-s[e]}}function ot(e){const t=e.chart,a=t.options.animation;t.notifyPlugins("afterRender"),(0,r.Q)(a&&a.onComplete,[e],t)}function lt(e){const t=e.chart,a=t.options.animation;(0,r.Q)(a&&a.onProgress,[e],t)}function ct(e){return(0,r.M)()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const dt={},ut=e=>{const t=ct(e);return Object.values(dt).filter((e=>e.canvas===t)).pop()};function ht(e,t,a){const s=Object.keys(e);for(const n of s){const s=+n;if(s>=t){const r=e[n];delete e[n],(a>0||s>t)&&(e[s+a]=r)}}}class mt{static register(){Be.add(...arguments),pt()}static unregister(){Be.remove(...arguments),pt()}constructor(e,t){const a=this.config=new tt(t),s=ct(e),n=ut(s);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const i=a.createResolver(a.chartOptionScopes(),this.getContext());this.platform=new(a.platform||function(e){return!(0,r.M)()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?ue:Ce}(s)),this.platform.updateConfig(a);const l=this.platform.acquireContext(s,i.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;this.id=(0,r.ac)(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=i,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new qe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=(0,r.ad)((e=>this.update(e)),i.resizeDelay||0),this._dataChanges=[],dt[this.id]=this,l&&c?(o.listen(this,"complete",ot),o.listen(this,"progress",lt),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:a,height:s,_aspectRatio:n}=this;return(0,r.k)(e)?t&&n?n:s?a/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Be}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():(0,r.ae)(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return(0,r.af)(this.canvas,this.ctx),this}stop(){return o.stop(this),this}resize(e,t){o.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const a=this.options,s=this.canvas,n=a.maintainAspectRatio&&this.aspectRatio,i=this.platform.getMaximumSize(s,e,t,n),o=a.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=i.width,this.height=i.height,this._aspectRatio=this.aspectRatio,(0,r.ae)(this,o,!0)&&(this.notifyPlugins("resize",{size:i}),(0,r.Q)(a.onResize,[this,i],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};(0,r.F)(e,((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,a=this.scales,s=Object.keys(a).reduce(((e,t)=>(e[t]=!1,e)),{});let n=[];t&&(n=n.concat(Object.keys(t).map((e=>{const a=t[e],s=Ge(e,a),n="r"===s,r="x"===s;return{options:a,dposition:n?"chartArea":r?"bottom":"left",dtype:n?"radialLinear":r?"category":"linear"}})))),(0,r.F)(n,(t=>{const n=t.options,i=n.id,o=Ge(i,n),l=(0,r.v)(n.type,t.dtype);void 0!==n.position&&rt(n.position,o)===rt(t.dposition)||(n.position=t.dposition),s[i]=!0;let c=null;if(i in a&&a[i].type===l)c=a[i];else{c=new(Be.getScale(l))({id:i,type:l,ctx:this.ctx,chart:this}),a[c.id]=c}c.init(n,e)})),(0,r.F)(s,((e,t)=>{e||delete a[t]})),(0,r.F)(a,(e=>{ce.configure(this,e,e.options),ce.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,a=e.length;if(e.sort(((e,t)=>e.index-t.index)),a>t){for(let e=t;e<a;++e)this._destroyDatasetMeta(e);e.splice(t,a-t)}this._sortedMetasets=e.slice(0).sort(it("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,a)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(a)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let a,s;for(this._removeUnreferencedMetasets(),a=0,s=t.length;a<s;a++){const s=t[a];let n=this.getDatasetMeta(a);const i=s.type||this.config.type;if(n.type&&n.type!==i&&(this._destroyDatasetMeta(a),n=this.getDatasetMeta(a)),n.type=i,n.indexAxis=s.indexAxis||We(i,this.options),n.order=s.order||0,n.index=a,n.label=""+s.label,n.visible=this.isDatasetVisible(a),n.controller)n.controller.updateIndex(a),n.controller.linkScales();else{const t=Be.getController(i),{datasetElementType:s,dataElementType:o}=r.d.datasets[i];Object.assign(t,{dataElementType:Be.getElement(o),datasetElementType:s&&Be.getElement(s)}),n.controller=new t(this,a),e.push(n.controller)}}return this._updateMetasets(),e}_resetElements(){(0,r.F)(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const a=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!a.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let i=0;for(let r=0,c=this.data.datasets.length;r<c;r++){const{controller:e}=this.getDatasetMeta(r),t=!s&&-1===n.indexOf(e);e.buildOrUpdateElements(t),i=Math.max(+e.getMaxOverflow(),i)}i=this._minPadding=a.layout.autoPadding?i:0,this._updateLayout(i),s||(0,r.F)(n,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(it("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){(0,r.F)(this.scales,(e=>{ce.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),a=new Set(e.events);(0,r.ag)(t,a)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:a,start:s,count:n}of t){ht(e,s,"_removeElements"===a?-n:n)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,a=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),s=a(0);for(let n=1;n<t;n++)if(!(0,r.ag)(s,a(n)))return;return Array.from(s).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;ce.update(this,this.width,this.height,e);const t=this.chartArea,a=t.width<=0||t.height<=0;this._layers=[],(0,r.F)(this.boxes,(e=>{a&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,a=this.data.datasets.length;t<a;++t)this._updateDataset(t,(0,r.a7)(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const a=this.getDatasetMeta(e),s={meta:a,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(a.controller._update(t),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(o.has(this)?this.attached&&!o.running(this)&&o.start(this):(this.draw(),ot({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,a=[];let s,n;for(s=0,n=t.length;s<n;++s){const n=t[s];e&&!n.visible||a.push(n)}return a}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,a={meta:e,index:e.index,cancelable:!0},s=(0,r.ah)(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",a)&&(s&&(0,r.Y)(t,s),e.controller.draw(),s&&(0,r.$)(t),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return(0,r.C)(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,a,s){const n=J.modes[t];return"function"===typeof n?n(this,e,a,s):[]}getDatasetMeta(e){const t=this.data.datasets[e],a=this._metasets;let s=a.filter((e=>e&&e._dataset===t)).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},a.push(s)),s}getContext(){return this.$context||(this.$context=(0,r.j)(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const a=this.getDatasetMeta(e);return"boolean"===typeof a.hidden?!a.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,a){const s=a?"show":"hide",n=this.getDatasetMeta(e),i=n.controller._resolveAnimations(void 0,s);(0,r.h)(t)?(n.data[t].hidden=!a,this.update()):(this.setDatasetVisibility(e,a),i.update(n,{visible:a}),this.update((t=>t.datasetIndex===e?s:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),o.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),(0,r.af)(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete dt[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,a=(a,s)=>{t.addEventListener(this,a,s),e[a]=s},s=(e,t,a)=>{e.offsetX=t,e.offsetY=a,this._eventHandler(e)};(0,r.F)(this.options.events,(e=>a(e,s)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,a=(a,s)=>{t.addEventListener(this,a,s),e[a]=s},s=(a,s)=>{e[a]&&(t.removeEventListener(this,a,s),delete e[a])},n=(e,t)=>{this.canvas&&this.resize(e,t)};let r;const i=()=>{s("attach",i),this.attached=!0,this.resize(),a("resize",n),a("detach",r)};r=()=>{this.attached=!1,s("resize",n),this._stop(),this._resize(0,0),a("attach",i)},t.isAttached(this.canvas)?i():r()}unbindEvents(){(0,r.F)(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},(0,r.F)(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,a){const s=a?"set":"remove";let n,r,i,o;for("dataset"===t&&(n=this.getDatasetMeta(e[0].datasetIndex),n.controller["_"+s+"DatasetHoverStyle"]()),i=0,o=e.length;i<o;++i){r=e[i];const t=r&&this.getDatasetMeta(r.datasetIndex).controller;t&&t[s+"HoverStyle"](r.element,r.datasetIndex,r.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],a=e.map((e=>{let{datasetIndex:t,index:a}=e;const s=this.getDatasetMeta(t);if(!s)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:s.data[a],index:a}}));!(0,r.ai)(a,t)&&(this._active=a,this._lastEvent=null,this._updateHoverStyles(a,t))}notifyPlugins(e,t,a){return this._plugins.notify(this,e,t,a)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,a){const s=this.options.hover,n=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),r=n(t,e),i=a?e:n(e,t);r.length&&this.updateHoverStyle(r,s.mode,!1),i.length&&s.mode&&this.updateHoverStyle(i,s.mode,!0)}_eventHandler(e,t){const a={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},s=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",a,s))return;const n=this._handleEvent(e,t,a.inChartArea);return a.cancelable=!1,this.notifyPlugins("afterEvent",a,s),(n||a.changed)&&this.render(),this}_handleEvent(e,t,a){const{_active:s=[],options:n}=this,i=t,o=this._getActiveElements(e,s,a,i),l=(0,r.aj)(e),c=function(e,t,a,s){return a&&"mouseout"!==e.type?s?t:e:null}(e,this._lastEvent,a,l);a&&(this._lastEvent=null,(0,r.Q)(n.onHover,[e,o,this],this),l&&(0,r.Q)(n.onClick,[e,o,this],this));const d=!(0,r.ai)(o,s);return(d||t)&&(this._active=o,this._updateHoverStyles(o,s,t)),this._lastEvent=c,d}_getActiveElements(e,t,a,s){if("mouseout"===e.type)return[];if(!a)return t;const n=this.options.hover;return this.getElementsAtEventForMode(e,n.mode,n,s)}}function pt(){return(0,r.F)(mt.instances,(e=>e._plugins.invalidate()))}function ft(e,t,a,s){const n=(i=e.options.borderRadius,(0,r.al)(i,["outerStart","outerEnd","innerStart","innerEnd"]));var i;const o=(a-t)/2,l=Math.min(o,s*t/2),c=e=>{const t=(a-Math.min(o,e))*s/2;return(0,r.S)(e,0,Math.min(o,t))};return{outerStart:c(n.outerStart),outerEnd:c(n.outerEnd),innerStart:(0,r.S)(n.innerStart,0,l),innerEnd:(0,r.S)(n.innerEnd,0,l)}}function gt(e,t,a,s){return{x:a+e*Math.cos(t),y:s+e*Math.sin(t)}}function xt(e,t,a,s,n,i){const{x:o,y:l,startAngle:c,pixelMargin:d,innerRadius:u}=t,h=Math.max(t.outerRadius+s+a-d,0),m=u>0?u+s+a+d:0;let p=0;const f=n-c;if(s){const e=((u>0?u-s:0)+(h>0?h-s:0))/2;p=(f-(0!==e?f*e/(e+s):f))/2}const g=(f-Math.max(.001,f*h-a/r.P)/h)/2,x=c+g+p,b=n-g-p,{outerStart:v,outerEnd:y,innerStart:j,innerEnd:N}=ft(t,m,h,b-x),w=h-v,_=h-y,S=x+v/w,C=b-y/_,k=m+j,A=m+N,P=x+j/k,E=b-N/A;if(e.beginPath(),i){const t=(S+C)/2;if(e.arc(o,l,h,S,t),e.arc(o,l,h,t,C),y>0){const t=gt(_,C,o,l);e.arc(t.x,t.y,y,C,b+r.H)}const a=gt(A,b,o,l);if(e.lineTo(a.x,a.y),N>0){const t=gt(A,E,o,l);e.arc(t.x,t.y,N,b+r.H,E+Math.PI)}const s=(b-N/m+(x+j/m))/2;if(e.arc(o,l,m,b-N/m,s,!0),e.arc(o,l,m,s,x+j/m,!0),j>0){const t=gt(k,P,o,l);e.arc(t.x,t.y,j,P+Math.PI,x-r.H)}const n=gt(w,x,o,l);if(e.lineTo(n.x,n.y),v>0){const t=gt(w,S,o,l);e.arc(t.x,t.y,v,x-r.H,S)}}else{e.moveTo(o,l);const t=Math.cos(S)*h+o,a=Math.sin(S)*h+l;e.lineTo(t,a);const s=Math.cos(C)*h+o,n=Math.sin(C)*h+l;e.lineTo(s,n)}e.closePath()}function bt(e,t,a,s,n){const{fullCircles:i,startAngle:o,circumference:l,options:c}=t,{borderWidth:d,borderJoinStyle:u,borderDash:h,borderDashOffset:m}=c,p="inner"===c.borderAlign;if(!d)return;e.setLineDash(h||[]),e.lineDashOffset=m,p?(e.lineWidth=2*d,e.lineJoin=u||"round"):(e.lineWidth=d,e.lineJoin=u||"bevel");let f=t.endAngle;if(i){xt(e,t,a,s,f,n);for(let t=0;t<i;++t)e.stroke();isNaN(l)||(f=o+(l%r.T||r.T))}p&&function(e,t,a){const{startAngle:s,pixelMargin:n,x:i,y:o,outerRadius:l,innerRadius:c}=t;let d=n/l;e.beginPath(),e.arc(i,o,l,s-d,a+d),c>n?(d=n/c,e.arc(i,o,c,a+d,s-d,!0)):e.arc(i,o,n,a+r.H,s-r.H),e.closePath(),e.clip()}(e,t,f),i||(xt(e,t,a,s,f,n),e.stroke())}(0,n.A)(mt,"defaults",r.d),(0,n.A)(mt,"instances",dt),(0,n.A)(mt,"overrides",r.a3),(0,n.A)(mt,"registry",Be),(0,n.A)(mt,"version","4.4.9"),(0,n.A)(mt,"getChart",ut);class vt extends ke{constructor(e){super(),(0,n.A)(this,"circumference",void 0),(0,n.A)(this,"endAngle",void 0),(0,n.A)(this,"fullCircles",void 0),(0,n.A)(this,"innerRadius",void 0),(0,n.A)(this,"outerRadius",void 0),(0,n.A)(this,"pixelMargin",void 0),(0,n.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,a){const s=this.getProps(["x","y"],a),{angle:n,distance:i}=(0,r.D)(s,{x:e,y:t}),{startAngle:o,endAngle:l,innerRadius:c,outerRadius:d,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],a),h=(this.options.spacing+this.options.borderWidth)/2,m=(0,r.v)(u,l-o),p=(0,r.p)(n,o,l)&&o!==l,f=m>=r.T||p,g=(0,r.ak)(i,c+h,d+h);return f&&g}getCenterPoint(e){const{x:t,y:a,startAngle:s,endAngle:n,innerRadius:r,outerRadius:i}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(s+n)/2,d=(r+i+l+o)/2;return{x:t+Math.cos(c)*d,y:a+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:a}=this,s=(t.offset||0)/4,n=(t.spacing||0)/2,i=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=a>r.T?Math.floor(a/r.T):0,0===a||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*s,Math.sin(o)*s);const l=s*(1-Math.sin(Math.min(r.P,a||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,a,s,n){const{fullCircles:i,startAngle:o,circumference:l}=t;let c=t.endAngle;if(i){xt(e,t,a,s,c,n);for(let t=0;t<i;++t)e.fill();isNaN(l)||(c=o+(l%r.T||r.T))}xt(e,t,a,s,c,n),e.fill()}(e,this,l,n,i),bt(e,this,l,n,i),e.restore()}}function yt(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=(0,r.v)(a.borderCapStyle,t.borderCapStyle),e.setLineDash((0,r.v)(a.borderDash,t.borderDash)),e.lineDashOffset=(0,r.v)(a.borderDashOffset,t.borderDashOffset),e.lineJoin=(0,r.v)(a.borderJoinStyle,t.borderJoinStyle),e.lineWidth=(0,r.v)(a.borderWidth,t.borderWidth),e.strokeStyle=(0,r.v)(a.borderColor,t.borderColor)}function jt(e,t,a){e.lineTo(a.x,a.y)}function Nt(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length,{start:n=0,end:r=s-1}=a,{start:i,end:o}=t,l=Math.max(n,i),c=Math.min(r,o),d=n<i&&r<i||n>o&&r>o;return{count:s,start:l,loop:t.loop,ilen:c<l&&!d?s+c-l:c-l}}function wt(e,t,a,s){const{points:n,options:i}=t,{count:o,start:l,loop:c,ilen:d}=Nt(n,a,s),u=function(e){return e.stepped?r.as:e.tension||"monotone"===e.cubicInterpolationMode?r.at:jt}(i);let h,m,p,{move:f=!0,reverse:g}=s||{};for(h=0;h<=d;++h)m=n[(l+(g?d-h:h))%o],m.skip||(f?(e.moveTo(m.x,m.y),f=!1):u(e,p,m,g,i.stepped),p=m);return c&&(m=n[(l+(g?d:0))%o],u(e,p,m,g,i.stepped)),!!c}function _t(e,t,a,s){const n=t.points,{count:r,start:i,ilen:o}=Nt(n,a,s),{move:l=!0,reverse:c}=s||{};let d,u,h,m,p,f,g=0,x=0;const b=e=>(i+(c?o-e:e))%r,v=()=>{m!==p&&(e.lineTo(g,p),e.lineTo(g,m),e.lineTo(g,f))};for(l&&(u=n[b(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=n[b(d)],u.skip)continue;const t=u.x,a=u.y,s=0|t;s===h?(a<m?m=a:a>p&&(p=a),g=(x*g+t)/++x):(v(),e.lineTo(t,a),h=s,x=0,m=p=a),f=a}v()}function St(e){const t=e.options,a=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!a?_t:wt}(0,n.A)(vt,"id","arc"),(0,n.A)(vt,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),(0,n.A)(vt,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,n.A)(vt,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const Ct="function"===typeof Path2D;function kt(e,t,a,s){Ct&&!t.options.segment?function(e,t,a,s){let n=t._path;n||(n=t._path=new Path2D,t.path(n,a,s)&&n.closePath()),yt(e,t.options),e.stroke(n)}(e,t,a,s):function(e,t,a,s){const{segments:n,options:r}=t,i=St(t);for(const o of n)yt(e,r,o.style),e.beginPath(),i(e,t,o,{start:a,end:a+s-1})&&e.closePath(),e.stroke()}(e,t,a,s)}class At extends ke{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const a=this.options;if((a.tension||"monotone"===a.cubicInterpolationMode)&&!a.stepped&&!this._pointsUpdated){const s=a.spanGaps?this._loop:this._fullLoop;(0,r.am)(this._points,a,e,s,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=(0,r.an)(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,a=e.length;return a&&t[e[a-1].end]}interpolate(e,t){const a=this.options,s=e[t],n=this.points,i=(0,r.ao)(this,{property:t,start:s,end:s});if(!i.length)return;const o=[],l=function(e){return e.stepped?r.ap:e.tension||"monotone"===e.cubicInterpolationMode?r.aq:r.ar}(a);let c,d;for(c=0,d=i.length;c<d;++c){const{start:r,end:d}=i[c],u=n[r],h=n[d];if(u===h){o.push(u);continue}const m=l(u,h,Math.abs((s-u[t])/(h[t]-u[t])),a.stepped);m[t]=e[t],o.push(m)}return 1===o.length?o[0]:o}pathSegment(e,t,a){return St(this)(e,this,t,a)}path(e,t,a){const s=this.segments,n=St(this);let r=this._loop;t=t||0,a=a||this.points.length-t;for(const i of s)r&=n(e,this,i,{start:t,end:t+a-1});return!!r}draw(e,t,a,s){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(e.save(),kt(e,this,a,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Pt(e,t,a,s){const n=e.options,{[a]:r}=e.getProps([a],s);return Math.abs(t-r)<n.radius+n.hitRadius}(0,n.A)(At,"id","line"),(0,n.A)(At,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,n.A)(At,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,n.A)(At,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Et extends ke{constructor(e){super(),(0,n.A)(this,"parsed",void 0),(0,n.A)(this,"skip",void 0),(0,n.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,a){const s=this.options,{x:n,y:r}=this.getProps(["x","y"],a);return Math.pow(e-n,2)+Math.pow(t-r,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,t){return Pt(this,e,"x",t)}inYRange(e,t){return Pt(this,e,"y",t)}getCenterPoint(e){const{x:t,y:a}=this.getProps(["x","y"],e);return{x:t,y:a}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const a=this.options;this.skip||a.radius<.1||!(0,r.C)(this,t,this.size(a)/2)||(e.strokeStyle=a.borderColor,e.lineWidth=a.borderWidth,e.fillStyle=a.backgroundColor,(0,r.au)(e,a,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Lt(e,t){const{x:a,y:s,base:n,width:r,height:i}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=i/2,o=Math.min(a,n),l=Math.max(a,n),c=s-u,d=s+u):(u=r/2,o=a-u,l=a+u,c=Math.min(s,n),d=Math.max(s,n)),{left:o,top:c,right:l,bottom:d}}function Dt(e,t,a,s){return e?0:(0,r.S)(t,a,s)}function Ot(e){const t=Lt(e),a=t.right-t.left,s=t.bottom-t.top,n=function(e,t,a){const s=e.options.borderWidth,n=e.borderSkipped,i=(0,r.aw)(s);return{t:Dt(n.top,i.top,0,a),r:Dt(n.right,i.right,0,t),b:Dt(n.bottom,i.bottom,0,a),l:Dt(n.left,i.left,0,t)}}(e,a/2,s/2),i=function(e,t,a){const{enableBorderRadius:s}=e.getProps(["enableBorderRadius"]),n=e.options.borderRadius,i=(0,r.ax)(n),o=Math.min(t,a),l=e.borderSkipped,c=s||(0,r.i)(n);return{topLeft:Dt(!c||l.top||l.left,i.topLeft,0,o),topRight:Dt(!c||l.top||l.right,i.topRight,0,o),bottomLeft:Dt(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:Dt(!c||l.bottom||l.right,i.bottomRight,0,o)}}(e,a/2,s/2);return{outer:{x:t.left,y:t.top,w:a,h:s,radius:i},inner:{x:t.left+n.l,y:t.top+n.t,w:a-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,i.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(n.b,n.r))}}}}function Tt(e,t,a,s){const n=null===t,i=null===a,o=e&&!(n&&i)&&Lt(e,s);return o&&(n||(0,r.ak)(t,o.left,o.right))&&(i||(0,r.ak)(a,o.top,o.bottom))}function Mt(e,t){e.rect(t.x,t.y,t.w,t.h)}function Rt(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.x!==a.x?-t:0,n=e.y!==a.y?-t:0,r=(e.x+e.w!==a.x+a.w?t:0)-s,i=(e.y+e.h!==a.y+a.h?t:0)-n;return{x:e.x+s,y:e.y+n,w:e.w+r,h:e.h+i,radius:e.radius}}(0,n.A)(Et,"id","point"),(0,n.A)(Et,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,n.A)(Et,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class It extends ke{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:a,backgroundColor:s}}=this,{inner:n,outer:i}=Ot(this),o=(l=i.radius).topLeft||l.topRight||l.bottomLeft||l.bottomRight?r.av:Mt;var l;e.save(),i.w===n.w&&i.h===n.h||(e.beginPath(),o(e,Rt(i,t,n)),e.clip(),o(e,Rt(n,-t,i)),e.fillStyle=a,e.fill("evenodd")),e.beginPath(),o(e,Rt(n,t)),e.fillStyle=s,e.fill(),e.restore()}inRange(e,t,a){return Tt(this,e,t,a)}inXRange(e,t){return Tt(this,e,null,t)}inYRange(e,t){return Tt(this,null,e,t)}getCenterPoint(e){const{x:t,y:a,base:s,horizontal:n}=this.getProps(["x","y","base","horizontal"],e);return{x:n?(t+s)/2:t,y:n?a:(a+s)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,n.A)(It,"id","bar"),(0,n.A)(It,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,n.A)(It,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Ft=Object.freeze({__proto__:null,ArcElement:vt,BarElement:It,LineElement:At,PointElement:Et});const zt=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Bt=zt.map((e=>e.replace("rgb(","rgba(").replace(")",", 0.5)")));function qt(e){return zt[e%zt.length]}function Ut(e){return Bt[e%Bt.length]}function Ht(e){let t=0;return(a,s)=>{const n=e.getDatasetMeta(s).controller;n instanceof T?t=function(e,t){return e.backgroundColor=e.data.map((()=>qt(t++))),t}(a,t):n instanceof R?t=function(e,t){return e.backgroundColor=e.data.map((()=>Ut(t++))),t}(a,t):n&&(t=function(e,t){return e.borderColor=qt(t),e.backgroundColor=Ut(t),++t}(a,t))}}function Wt(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var Vt={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,a){if(!a.enabled)return;const{data:{datasets:s},options:n}=e.config,{elements:i}=n,o=Wt(s)||(l=n)&&(l.borderColor||l.backgroundColor)||i&&Wt(i)||"rgba(0,0,0,0.1)"!==r.d.borderColor||"rgba(0,0,0,0.1)"!==r.d.backgroundColor;var l;if(!a.forceOverride&&o)return;const c=Ht(e);s.forEach(c)}};function Gt(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Yt(e){e.data.datasets.forEach((e=>{Gt(e)}))}var $t={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,a)=>{if(!a.enabled)return void Yt(e);const n=e.width;e.data.datasets.forEach(((t,i)=>{const{_data:o,indexAxis:l}=t,c=e.getDatasetMeta(i),d=o||t.data;if("y"===(0,r.a)([l,e.options.indexAxis]))return;if(!c.controller.supportsDecimation)return;const u=e.scales[c.xAxisID];if("linear"!==u.type&&"time"!==u.type)return;if(e.options.parsing)return;let{start:h,count:m}=function(e,t){const a=t.length;let s,n=0;const{iScale:i}=e,{min:o,max:l,minDefined:c,maxDefined:d}=i.getUserBounds();return c&&(n=(0,r.S)((0,r.B)(t,i.axis,o).lo,0,a-1)),s=d?(0,r.S)((0,r.B)(t,i.axis,l).hi+1,n,a)-n:a-n,{start:n,count:s}}(c,d);if(m<=(a.threshold||4*n))return void Gt(t);let p;switch((0,r.k)(o)&&(t._data=d,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),a.algorithm){case"lttb":p=function(e,t,a,s,n){const r=n.samples||s;if(r>=a)return e.slice(t,t+a);const i=[],o=(a-2)/(r-2);let l=0;const c=t+a-1;let d,u,h,m,p,f=t;for(i[l++]=e[f],d=0;d<r-2;d++){let s,n=0,r=0;const c=Math.floor((d+1)*o)+1+t,g=Math.min(Math.floor((d+2)*o)+1,a)+t,x=g-c;for(s=c;s<g;s++)n+=e[s].x,r+=e[s].y;n/=x,r/=x;const b=Math.floor(d*o)+1+t,v=Math.min(Math.floor((d+1)*o)+1,a)+t,{x:y,y:j}=e[f];for(h=m=-1,s=b;s<v;s++)m=.5*Math.abs((y-n)*(e[s].y-j)-(y-e[s].x)*(r-j)),m>h&&(h=m,u=e[s],p=s);i[l++]=u,f=p}return i[l++]=e[c],i}(d,h,m,n,a);break;case"min-max":p=function(e,t,a,n){let i,o,l,c,d,u,h,m,p,f,g=0,x=0;const b=[],v=t+a-1,y=e[t].x,j=e[v].x-y;for(i=t;i<t+a;++i){o=e[i],l=(o.x-y)/j*n,c=o.y;const t=0|l;if(t===d)c<p?(p=c,u=i):c>f&&(f=c,h=i),g=(x*g+o.x)/++x;else{const a=i-1;if(!(0,r.k)(u)&&!(0,r.k)(h)){const t=Math.min(u,h),n=Math.max(u,h);t!==m&&t!==a&&b.push((0,s.A)((0,s.A)({},e[t]),{},{x:g})),n!==m&&n!==a&&b.push((0,s.A)((0,s.A)({},e[n]),{},{x:g}))}i>0&&a!==m&&b.push(e[a]),b.push(o),d=t,x=0,p=f=c,u=h=m=i}}return b}(d,h,m,n);break;default:throw new Error("Unsupported decimation algorithm '".concat(a.algorithm,"'"))}t._decimated=p}))},destroy(e){Yt(e)}};function Xt(e,t,a,s){if(s)return;let n=t[e],i=a[e];return"angle"===e&&(n=(0,r.az)(n),i=(0,r.az)(i)),{property:e,start:n,end:i}}function Jt(e,t,a){for(;t>e;t--){const e=a[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function Kt(e,t,a,s){return e&&t?s(e[a],t[a]):e?e[a]:t?t[a]:0}function Qt(e,t){let a=[],s=!1;return(0,r.b)(e)?(s=!0,a=e):a=function(e,t){const{x:a=null,y:s=null}=e||{},n=t.points,r=[];return t.segments.forEach((e=>{let{start:t,end:i}=e;i=Jt(t,i,n);const o=n[t],l=n[i];null!==s?(r.push({x:o.x,y:s}),r.push({x:l.x,y:s})):null!==a&&(r.push({x:a,y:o.y}),r.push({x:a,y:l.y}))})),r}(e,t),a.length?new At({points:a,options:{tension:0},_loop:s,_fullLoop:s}):null}function Zt(e){return e&&!1!==e.fill}function ea(e,t,a){let s=e[t].fill;const n=[t];let i;if(!a)return s;for(;!1!==s&&-1===n.indexOf(s);){if(!(0,r.g)(s))return s;if(i=e[s],!i)return!1;if(i.visible)return s;n.push(s),s=i.fill}return!1}function ta(e,t,a){const s=function(e){const t=e.options,a=t.fill;let s=(0,r.v)(a&&a.target,a);void 0===s&&(s=!!t.backgroundColor);if(!1===s||null===s)return!1;if(!0===s)return"origin";return s}(e);if((0,r.i)(s))return!isNaN(s.value)&&s;let n=parseFloat(s);return(0,r.g)(n)&&Math.floor(n)===n?function(e,t,a,s){"-"!==e&&"+"!==e||(a=t+a);if(a===t||a<0||a>=s)return!1;return a}(s[0],t,n,a):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function aa(e,t,a){const s=[];for(let n=0;n<a.length;n++){const r=a[n],{first:i,last:o,point:l}=sa(r,t,"x");if(!(!l||i&&o))if(i)s.unshift(l);else if(e.push(l),!o)break}e.push(...s)}function sa(e,t,a){const s=e.interpolate(t,a);if(!s)return{};const n=s[a],i=e.segments,o=e.points;let l=!1,c=!1;for(let d=0;d<i.length;d++){const e=i[d],t=o[e.start][a],s=o[e.end][a];if((0,r.ak)(n,t,s)){l=n===t,c=n===s;break}}return{first:l,last:c,point:s}}class na{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,a){const{x:s,y:n,radius:i}=this;return t=t||{start:0,end:r.T},e.arc(s,n,i,t.end,t.start,!0),!a.bounds}interpolate(e){const{x:t,y:a,radius:s}=this,n=e.angle;return{x:t+Math.cos(n)*s,y:a+Math.sin(n)*s,angle:n}}}function ra(e){const{chart:t,fill:a,line:s}=e;if((0,r.g)(a))return function(e,t){const a=e.getDatasetMeta(t),s=a&&e.isDatasetVisible(t);return s?a.dataset:null}(t,a);if("stack"===a)return function(e){const{scale:t,index:a,line:s}=e,n=[],r=s.segments,i=s.points,o=function(e,t){const a=[],s=e.getMatchingVisibleMetas("line");for(let n=0;n<s.length;n++){const e=s[n];if(e.index===t)break;e.hidden||a.unshift(e.dataset)}return a}(t,a);o.push(Qt({x:null,y:t.bottom},s));for(let l=0;l<r.length;l++){const e=r[l];for(let t=e.start;t<=e.end;t++)aa(n,i[t],o)}return new At({points:n,options:{}})}(e);if("shape"===a)return!0;const n=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:a}=e,s=t.options,n=t.getLabels().length,i=s.reverse?t.max:t.min,o=function(e,t,a){let s;return s="start"===e?a:"end"===e?t.options.reverse?t.min:t.max:(0,r.i)(e)?e.value:t.getBaseValue(),s}(a,t,i),l=[];if(s.grid.circular){const e=t.getPointPositionForValue(0,i);return new na({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(o)})}for(let r=0;r<n;++r)l.push(t.getPointPositionForValue(r,o));return l}(e);return function(e){const{scale:t={},fill:a}=e,s=function(e,t){let a=null;return"start"===e?a=t.bottom:"end"===e?a=t.top:(0,r.i)(e)?a=t.getPixelForValue(e.value):t.getBasePixel&&(a=t.getBasePixel()),a}(a,t);if((0,r.g)(s)){const e=t.isHorizontal();return{x:e?s:null,y:e?null:s}}return null}(e)}(e);return n instanceof na?n:Qt(n,s)}function ia(e,t,a){const s=ra(t),{chart:n,index:i,line:o,scale:l,axis:c}=t,d=o.options,u=d.fill,h=d.backgroundColor,{above:m=h,below:p=h}=u||{},f=n.getDatasetMeta(i),g=(0,r.ah)(n,f);s&&o.points.length&&((0,r.Y)(e,a),function(e,t){const{line:a,target:s,above:n,below:r,area:i,scale:o,clip:l}=t,c=a._loop?"angle":t.axis;e.save(),"x"===c&&r!==n&&(oa(e,s,i.top),la(e,{line:a,target:s,color:n,scale:o,property:c,clip:l}),e.restore(),e.save(),oa(e,s,i.bottom));la(e,{line:a,target:s,color:r,scale:o,property:c,clip:l}),e.restore()}(e,{line:o,target:s,above:m,below:p,area:a,scale:l,axis:c,clip:g}),(0,r.$)(e))}function oa(e,t,a){const{segments:s,points:n}=t;let r=!0,i=!1;e.beginPath();for(const o of s){const{start:s,end:l}=o,c=n[s],d=n[Jt(s,l,n)];r?(e.moveTo(c.x,c.y),r=!1):(e.lineTo(c.x,a),e.lineTo(c.x,c.y)),i=!!t.pathSegment(e,o,{move:i}),i?e.closePath():e.lineTo(d.x,a)}e.lineTo(t.first().x,a),e.closePath(),e.clip()}function la(e,t){const{line:a,target:s,property:n,color:i,scale:o,clip:l}=t,c=function(e,t,a){const s=e.segments,n=e.points,i=t.points,o=[];for(const l of s){let{start:e,end:s}=l;s=Jt(e,s,n);const c=Xt(a,n[e],n[s],l.loop);if(!t.segments){o.push({source:l,target:c,start:n[e],end:n[s]});continue}const d=(0,r.ao)(t,c);for(const t of d){const e=Xt(a,i[t.start],i[t.end],t.loop),s=(0,r.ay)(l,n,e);for(const n of s)o.push({source:n,target:t,start:{[a]:Kt(c,e,"start",Math.max)},end:{[a]:Kt(c,e,"end",Math.min)}})}}return o}(a,s,n);for(const{source:r,target:d,start:u,end:h}of c){const{style:{backgroundColor:t=i}={}}=r,c=!0!==s;e.save(),e.fillStyle=t,ca(e,o,l,c&&Xt(n,u,h)),e.beginPath();const m=!!a.pathSegment(e,r);let p;if(c){m?e.closePath():da(e,s,h,n);const t=!!s.pathSegment(e,d,{move:m,reverse:!0});p=m&&t,p||da(e,s,u,n)}e.closePath(),e.fill(p?"evenodd":"nonzero"),e.restore()}}function ca(e,t,a,s){const n=t.chart.chartArea,{property:r,start:i,end:o}=s||{};if("x"===r||"y"===r){let t,s,l,c;"x"===r?(t=i,s=n.top,l=o,c=n.bottom):(t=n.left,s=i,l=n.right,c=o),e.beginPath(),a&&(t=Math.max(t,a.left),l=Math.min(l,a.right),s=Math.max(s,a.top),c=Math.min(c,a.bottom)),e.rect(t,s,l-t,c-s),e.clip()}}function da(e,t,a,s){const n=t.interpolate(a,s);n&&e.lineTo(n.x,n.y)}var ua={id:"filler",afterDatasetsUpdate(e,t,a){const s=(e.data.datasets||[]).length,n=[];let r,i,o,l;for(i=0;i<s;++i)r=e.getDatasetMeta(i),o=r.dataset,l=null,o&&o.options&&o instanceof At&&(l={visible:e.isDatasetVisible(i),index:i,fill:ta(o,i,s),chart:e,axis:r.controller.options.indexAxis,scale:r.vScale,line:o}),r.$filler=l,n.push(l);for(i=0;i<s;++i)l=n[i],l&&!1!==l.fill&&(l.fill=ea(n,i,a.propagate))},beforeDraw(e,t,a){const s="beforeDraw"===a.drawTime,n=e.getSortedVisibleDatasetMetas(),r=e.chartArea;for(let i=n.length-1;i>=0;--i){const t=n[i].$filler;t&&(t.line.updateControlPoints(r,t.axis),s&&t.fill&&ia(e.ctx,t,r))}},beforeDatasetsDraw(e,t,a){if("beforeDatasetsDraw"!==a.drawTime)return;const s=e.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){const t=s[n].$filler;Zt(t)&&ia(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,a){const s=t.meta.$filler;Zt(s)&&"beforeDatasetDraw"===a.drawTime&&ia(e.ctx,s,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ha=(e,t)=>{let{boxHeight:a=t,boxWidth:s=t}=e;return e.usePointStyle&&(a=Math.min(a,t),s=e.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:a,itemHeight:Math.max(t,a)}};class ma extends ke{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,a){this.maxWidth=e,this.maxHeight=t,this._margins=a,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=(0,r.Q)(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,a)=>e.sort(t,a,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const a=e.labels,s=(0,r.a0)(a.font),n=s.size,i=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=ha(a,n);let c,d;t.font=s.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(i,n,o,l)+10):(d=this.maxHeight,c=this._fitCols(i,s,o,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,t,a,s){const{ctx:n,maxWidth:r,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=s+i;let d=e;n.textAlign="left",n.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach(((e,m)=>{const p=a+t/2+n.measureText(e.text).width;(0===m||l[l.length-1]+p+2*i>r)&&(d+=c,l[l.length-(m>0?0:1)]=0,h+=c,u++),o[m]={left:0,top:h,row:u,width:p,height:s},l[l.length-1]+=p+i})),d}_fitCols(e,t,a,s){const{ctx:n,maxHeight:r,options:{labels:{padding:i}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=r-e;let d=i,u=0,h=0,m=0,p=0;return this.legendItems.forEach(((e,r)=>{const{itemWidth:f,itemHeight:g}=function(e,t,a,s,n){const r=function(e,t,a,s){let n=e.text;n&&"string"!==typeof n&&(n=n.reduce(((e,t)=>e.length>t.length?e:t)));return t+a.size/2+s.measureText(n).width}(s,e,t,a),i=function(e,t,a){let s=e;"string"!==typeof t.text&&(s=pa(t,a));return s}(n,s,t.lineHeight);return{itemWidth:r,itemHeight:i}}(a,t,n,e,s);r>0&&h+g+2*i>c&&(d+=u+i,l.push({width:u,height:h}),m+=u+i,p++,u=h=0),o[r]={left:m,top:h,col:p,width:f,height:g},u=Math.max(u,f),h+=g+i})),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:a,labels:{padding:s},rtl:n}}=this,i=(0,r.aA)(n,this.left,this.width);if(this.isHorizontal()){let n=0,o=(0,r.a2)(a,this.left+s,this.right-this.lineWidths[n]);for(const l of t)n!==l.row&&(n=l.row,o=(0,r.a2)(a,this.left+s,this.right-this.lineWidths[n])),l.top+=this.top+e+s,l.left=i.leftForLtr(i.x(o),l.width),o+=l.width+s}else{let n=0,o=(0,r.a2)(a,this.top+e+s,this.bottom-this.columnSizes[n].height);for(const l of t)l.col!==n&&(n=l.col,o=(0,r.a2)(a,this.top+e+s,this.bottom-this.columnSizes[n].height)),l.top=o,l.left+=this.left+s,l.left=i.leftForLtr(i.x(l.left),l.width),o+=l.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;(0,r.Y)(e,this),this._draw(),(0,r.$)(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:a,ctx:s}=this,{align:n,labels:i}=e,o=r.d.color,l=(0,r.aA)(e.rtl,this.left,this.width),c=(0,r.a0)(i.font),{padding:d}=i,u=c.size,h=u/2;let m;this.drawTitle(),s.textAlign=l.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=c.string;const{boxWidth:p,boxHeight:f,itemHeight:g}=ha(i,u),x=this.isHorizontal(),b=this._computeTitleHeight();m=x?{x:(0,r.a2)(n,this.left+d,this.right-a[0]),y:this.top+d+b,line:0}:{x:this.left+d,y:(0,r.a2)(n,this.top+b+d,this.bottom-t[0].height),line:0},(0,r.aB)(this.ctx,e.textDirection);const v=g+d;this.legendItems.forEach(((y,j)=>{s.strokeStyle=y.fontColor,s.fillStyle=y.fontColor;const N=s.measureText(y.text).width,w=l.textAlign(y.textAlign||(y.textAlign=i.textAlign)),_=p+h+N;let S=m.x,C=m.y;l.setWidth(this.width),x?j>0&&S+_+d>this.right&&(C=m.y+=v,m.line++,S=m.x=(0,r.a2)(n,this.left+d,this.right-a[m.line])):j>0&&C+v>this.bottom&&(S=m.x=S+t[m.line].width+d,m.line++,C=m.y=(0,r.a2)(n,this.top+b+d,this.bottom-t[m.line].height));if(function(e,t,a){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;s.save();const n=(0,r.v)(a.lineWidth,1);if(s.fillStyle=(0,r.v)(a.fillStyle,o),s.lineCap=(0,r.v)(a.lineCap,"butt"),s.lineDashOffset=(0,r.v)(a.lineDashOffset,0),s.lineJoin=(0,r.v)(a.lineJoin,"miter"),s.lineWidth=n,s.strokeStyle=(0,r.v)(a.strokeStyle,o),s.setLineDash((0,r.v)(a.lineDash,[])),i.usePointStyle){const o={radius:f*Math.SQRT2/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:n},c=l.xPlus(e,p/2),d=t+h;(0,r.aE)(s,o,c,d,i.pointStyleWidth&&p)}else{const i=t+Math.max((u-f)/2,0),o=l.leftForLtr(e,p),c=(0,r.ax)(a.borderRadius);s.beginPath(),Object.values(c).some((e=>0!==e))?(0,r.av)(s,{x:o,y:i,w:p,h:f,radius:c}):s.rect(o,i,p,f),s.fill(),0!==n&&s.stroke()}s.restore()}(l.x(S),C,y),S=(0,r.aC)(w,S+p+h,x?S+_:this.right,e.rtl),function(e,t,a){(0,r.Z)(s,a.text,e,t+g/2,c,{strikethrough:a.hidden,textAlign:l.textAlign(a.textAlign)})}(l.x(S),C,y),x)m.x+=_+d;else if("string"!==typeof y.text){const e=c.lineHeight;m.y+=pa(y,e)+d}else m.y+=v})),(0,r.aD)(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,a=(0,r.a0)(t.font),s=(0,r.E)(t.padding);if(!t.display)return;const n=(0,r.aA)(e.rtl,this.left,this.width),i=this.ctx,o=t.position,l=a.size/2,c=s.top+l;let d,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),d=this.top+c,u=(0,r.a2)(e.align,u,this.right-h);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);d=c+(0,r.a2)(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const m=(0,r.a2)(o,u,u+h);i.textAlign=n.textAlign((0,r.a1)(o)),i.textBaseline="middle",i.strokeStyle=t.color,i.fillStyle=t.color,i.font=a.string,(0,r.Z)(i,t.text,m,d,a)}_computeTitleHeight(){const e=this.options.title,t=(0,r.a0)(e.font),a=(0,r.E)(e.padding);return e.display?t.lineHeight+a.height:0}_getLegendItemAt(e,t){let a,s,n;if((0,r.ak)(e,this.left,this.right)&&(0,r.ak)(t,this.top,this.bottom))for(n=this.legendHitBoxes,a=0;a<n.length;++a)if(s=n[a],(0,r.ak)(e,s.left,s.left+s.width)&&(0,r.ak)(t,s.top,s.top+s.height))return this.legendItems[a];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const a=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,o=(n=a,null!==(s=i)&&null!==n&&s.datasetIndex===n.datasetIndex&&s.index===n.index);i&&!o&&(0,r.Q)(t.onLeave,[e,i,this],this),this._hoveredItem=a,a&&!o&&(0,r.Q)(t.onHover,[e,a,this],this)}else a&&(0,r.Q)(t.onClick,[e,a,this],this);var s,n}}function pa(e,t){return t*(e.text?e.text.length:0)}var fa={id:"legend",_element:ma,start(e,t,a){const s=e.legend=new ma({ctx:e.ctx,options:a,chart:e});ce.configure(e,s,a),ce.addBox(e,s)},stop(e){ce.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,a){const s=e.legend;ce.configure(e,s,a),s.options=a},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,a){const s=t.datasetIndex,n=a.chart;n.isDatasetVisible(s)?(n.hide(s),t.hidden=!0):(n.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:a,pointStyle:s,textAlign:n,color:i,useBorderRadius:o,borderRadius:l}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const c=e.controller.getStyle(a?0:void 0),d=(0,r.E)(c.borderWidth);return{text:t[e.index].label,fillStyle:c.backgroundColor,fontColor:i,hidden:!e.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:n||c.textAlign,borderRadius:o&&(l||c.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class ga extends ke{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const a=this.options;if(this.left=0,this.top=0,!a.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const s=(0,r.b)(a.text)?a.text.length:1;this._padding=(0,r.E)(a.padding);const n=s*(0,r.a0)(a.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:a,bottom:s,right:n,options:i}=this,o=i.align;let l,c,d,u=0;return this.isHorizontal()?(c=(0,r.a2)(o,a,n),d=t+e,l=n-a):("left"===i.position?(c=a+e,d=(0,r.a2)(o,s,t),u=-.5*r.P):(c=n-e,d=(0,r.a2)(o,t,s),u=.5*r.P),l=s-t),{titleX:c,titleY:d,maxWidth:l,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const a=(0,r.a0)(t.font),s=a.lineHeight/2+this._padding.top,{titleX:n,titleY:i,maxWidth:o,rotation:l}=this._drawArgs(s);(0,r.Z)(e,t.text,0,0,a,{color:t.color,maxWidth:o,rotation:l,textAlign:(0,r.a1)(t.align),textBaseline:"middle",translation:[n,i]})}}var xa={id:"title",_element:ga,start(e,t,a){!function(e,t){const a=new ga({ctx:e.ctx,options:t,chart:e});ce.configure(e,a,t),ce.addBox(e,a),e.titleBlock=a}(e,a)},stop(e){const t=e.titleBlock;ce.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,a){const s=e.titleBlock;ce.configure(e,s,a),s.options=a},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ba=new WeakMap;var va={id:"subtitle",start(e,t,a){const s=new ga({ctx:e.ctx,options:a,chart:e});ce.configure(e,s,a),ce.addBox(e,s),ba.set(e,s)},stop(e){ce.removeBox(e,ba.get(e)),ba.delete(e)},beforeUpdate(e,t,a){const s=ba.get(e);ce.configure(e,s,a),s.options=a},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ya={average(e){if(!e.length)return!1;let t,a,s=new Set,n=0,r=0;for(t=0,a=e.length;t<a;++t){const a=e[t].element;if(a&&a.hasValue()){const e=a.tooltipPosition();s.add(e.x),n+=e.y,++r}}if(0===r||0===s.size)return!1;return{x:[...s].reduce(((e,t)=>e+t))/s.size,y:n/r}},nearest(e,t){if(!e.length)return!1;let a,s,n,i=t.x,o=t.y,l=Number.POSITIVE_INFINITY;for(a=0,s=e.length;a<s;++a){const s=e[a].element;if(s&&s.hasValue()){const e=s.getCenterPoint(),a=(0,r.aF)(t,e);a<l&&(l=a,n=s)}}if(n){const e=n.tooltipPosition();i=e.x,o=e.y}return{x:i,y:o}}};function ja(e,t){return t&&((0,r.b)(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Na(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function wa(e,t){const{element:a,datasetIndex:s,index:n}=t,r=e.getDatasetMeta(s).controller,{label:i,value:o}=r.getLabelAndValue(n);return{chart:e,label:i,parsed:r.getParsed(n),raw:e.data.datasets[s].data[n],formattedValue:o,dataset:r.getDataset(),dataIndex:n,datasetIndex:s,element:a}}function _a(e,t){const a=e.chart.ctx,{body:s,footer:n,title:i}=e,{boxWidth:o,boxHeight:l}=t,c=(0,r.a0)(t.bodyFont),d=(0,r.a0)(t.titleFont),u=(0,r.a0)(t.footerFont),h=i.length,m=n.length,p=s.length,f=(0,r.E)(t.padding);let g=f.height,x=0,b=s.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(b+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*d.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),b){g+=p*(t.displayColors?Math.max(l,c.lineHeight):c.lineHeight)+(b-p)*c.lineHeight+(b-1)*t.bodySpacing}m&&(g+=t.footerMarginTop+m*u.lineHeight+(m-1)*t.footerSpacing);let v=0;const y=function(e){x=Math.max(x,a.measureText(e).width+v)};return a.save(),a.font=d.string,(0,r.F)(e.title,y),a.font=c.string,(0,r.F)(e.beforeBody.concat(e.afterBody),y),v=t.displayColors?o+2+t.boxPadding:0,(0,r.F)(s,(e=>{(0,r.F)(e.before,y),(0,r.F)(e.lines,y),(0,r.F)(e.after,y)})),v=0,a.font=u.string,(0,r.F)(e.footer,y),a.restore(),x+=f.width,{width:x,height:g}}function Sa(e,t,a,s){const{x:n,width:r}=a,{width:i,chartArea:{left:o,right:l}}=e;let c="center";return"center"===s?c=n<=(o+l)/2?"left":"right":n<=r/2?c="left":n>=i-r/2&&(c="right"),function(e,t,a,s){const{x:n,width:r}=s,i=a.caretSize+a.caretPadding;return"left"===e&&n+r+i>t.width||"right"===e&&n-r-i<0||void 0}(c,e,t,a)&&(c="center"),c}function Ca(e,t,a){const s=a.yAlign||t.yAlign||function(e,t){const{y:a,height:s}=t;return a<s/2?"top":a>e.height-s/2?"bottom":"center"}(e,a);return{xAlign:a.xAlign||t.xAlign||Sa(e,t,a,s),yAlign:s}}function ka(e,t,a,s){const{caretSize:n,caretPadding:i,cornerRadius:o}=e,{xAlign:l,yAlign:c}=a,d=n+i,{topLeft:u,topRight:h,bottomLeft:m,bottomRight:p}=(0,r.ax)(o);let f=function(e,t){let{x:a,width:s}=e;return"right"===t?a-=s:"center"===t&&(a-=s/2),a}(t,l);const g=function(e,t,a){let{y:s,height:n}=e;return"top"===t?s+=a:s-="bottom"===t?n+a:n/2,s}(t,c,d);return"center"===c?"left"===l?f+=d:"right"===l&&(f-=d):"left"===l?f-=Math.max(u,m)+n:"right"===l&&(f+=Math.max(h,p)+n),{x:(0,r.S)(f,0,s.width-t.width),y:(0,r.S)(g,0,s.height-t.height)}}function Aa(e,t,a){const s=(0,r.E)(a.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-s.right:e.x+s.left}function Pa(e){return ja([],Na(e))}function Ea(e,t){const a=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return a?e.override(a):e}const La={beforeTitle:r.aG,title(e){if(e.length>0){const t=e[0],a=t.chart.data.labels,s=a?a.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return a[t.dataIndex]}return""},afterTitle:r.aG,beforeBody:r.aG,beforeLabel:r.aG,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const a=e.formattedValue;return(0,r.k)(a)||(t+=a),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:r.aG,afterBody:r.aG,beforeFooter:r.aG,footer:r.aG,afterFooter:r.aG};function Da(e,t,a,s){const n=e[t].call(a,s);return"undefined"===typeof n?La[t].call(a,s):n}class Oa extends ke{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,a=this.options.setContext(this.getContext()),s=a.enabled&&t.options.animation&&a.animations,n=new u(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,a=this._tooltipItems,(0,r.j)(e,{tooltip:t,tooltipItems:a,type:"tooltip"})));var e,t,a}getTitle(e,t){const{callbacks:a}=t,s=Da(a,"beforeTitle",this,e),n=Da(a,"title",this,e),r=Da(a,"afterTitle",this,e);let i=[];return i=ja(i,Na(s)),i=ja(i,Na(n)),i=ja(i,Na(r)),i}getBeforeBody(e,t){return Pa(Da(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:a}=t,s=[];return(0,r.F)(e,(e=>{const t={before:[],lines:[],after:[]},n=Ea(a,e);ja(t.before,Na(Da(n,"beforeLabel",this,e))),ja(t.lines,Da(n,"label",this,e)),ja(t.after,Na(Da(n,"afterLabel",this,e))),s.push(t)})),s}getAfterBody(e,t){return Pa(Da(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:a}=t,s=Da(a,"beforeFooter",this,e),n=Da(a,"footer",this,e),r=Da(a,"afterFooter",this,e);let i=[];return i=ja(i,Na(s)),i=ja(i,Na(n)),i=ja(i,Na(r)),i}_createItems(e){const t=this._active,a=this.chart.data,s=[],n=[],i=[];let o,l,c=[];for(o=0,l=t.length;o<l;++o)c.push(wa(this.chart,t[o]));return e.filter&&(c=c.filter(((t,s,n)=>e.filter(t,s,n,a)))),e.itemSort&&(c=c.sort(((t,s)=>e.itemSort(t,s,a)))),(0,r.F)(c,(t=>{const a=Ea(e.callbacks,t);s.push(Da(a,"labelColor",this,t)),n.push(Da(a,"labelPointStyle",this,t)),i.push(Da(a,"labelTextColor",this,t))})),this.labelColors=s,this.labelPointStyles=n,this.labelTextColors=i,this.dataPoints=c,c}update(e,t){const a=this.options.setContext(this.getContext()),s=this._active;let n,r=[];if(s.length){const e=ya[a.position].call(this,s,this._eventPosition);r=this._createItems(a),this.title=this.getTitle(r,a),this.beforeBody=this.getBeforeBody(r,a),this.body=this.getBody(r,a),this.afterBody=this.getAfterBody(r,a),this.footer=this.getFooter(r,a);const t=this._size=_a(this,a),i=Object.assign({},e,t),o=Ca(this.chart,a,i),l=ka(a,i,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,n={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=r,this.$context=void 0,n&&this._resolveAnimations().update(this,n),e&&a.external&&a.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,a,s){const n=this.getCaretPosition(e,a,s);t.lineTo(n.x1,n.y1),t.lineTo(n.x2,n.y2),t.lineTo(n.x3,n.y3)}getCaretPosition(e,t,a){const{xAlign:s,yAlign:n}=this,{caretSize:i,cornerRadius:o}=a,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:u}=(0,r.ax)(o),{x:h,y:m}=e,{width:p,height:f}=t;let g,x,b,v,y,j;return"center"===n?(y=m+f/2,"left"===s?(g=h,x=g-i,v=y+i,j=y-i):(g=h+p,x=g+i,v=y-i,j=y+i),b=g):(x="left"===s?h+Math.max(l,d)+i:"right"===s?h+p-Math.max(c,u)-i:this.caretX,"top"===n?(v=m,y=v-i,g=x-i,b=x+i):(v=m+f,y=v+i,g=x+i,b=x-i),j=v),{x1:g,x2:x,x3:b,y1:v,y2:y,y3:j}}drawTitle(e,t,a){const s=this.title,n=s.length;let i,o,l;if(n){const c=(0,r.aA)(a.rtl,this.x,this.width);for(e.x=Aa(this,a.titleAlign,a),t.textAlign=c.textAlign(a.titleAlign),t.textBaseline="middle",i=(0,r.a0)(a.titleFont),o=a.titleSpacing,t.fillStyle=a.titleColor,t.font=i.string,l=0;l<n;++l)t.fillText(s[l],c.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+o,l+1===n&&(e.y+=a.titleMarginBottom-o)}}_drawColorBox(e,t,a,s,n){const i=this.labelColors[a],o=this.labelPointStyles[a],{boxHeight:l,boxWidth:c}=n,d=(0,r.a0)(n.bodyFont),u=Aa(this,"left",n),h=s.x(u),m=l<d.lineHeight?(d.lineHeight-l)/2:0,p=t.y+m;if(n.usePointStyle){const t={radius:Math.min(c,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},a=s.leftForLtr(h,c)+c/2,d=p+l/2;e.strokeStyle=n.multiKeyBackground,e.fillStyle=n.multiKeyBackground,(0,r.au)(e,t,a,d),e.strokeStyle=i.borderColor,e.fillStyle=i.backgroundColor,(0,r.au)(e,t,a,d)}else{e.lineWidth=(0,r.i)(i.borderWidth)?Math.max(...Object.values(i.borderWidth)):i.borderWidth||1,e.strokeStyle=i.borderColor,e.setLineDash(i.borderDash||[]),e.lineDashOffset=i.borderDashOffset||0;const t=s.leftForLtr(h,c),a=s.leftForLtr(s.xPlus(h,1),c-2),o=(0,r.ax)(i.borderRadius);Object.values(o).some((e=>0!==e))?(e.beginPath(),e.fillStyle=n.multiKeyBackground,(0,r.av)(e,{x:t,y:p,w:c,h:l,radius:o}),e.fill(),e.stroke(),e.fillStyle=i.backgroundColor,e.beginPath(),(0,r.av)(e,{x:a,y:p+1,w:c-2,h:l-2,radius:o}),e.fill()):(e.fillStyle=n.multiKeyBackground,e.fillRect(t,p,c,l),e.strokeRect(t,p,c,l),e.fillStyle=i.backgroundColor,e.fillRect(a,p+1,c-2,l-2))}e.fillStyle=this.labelTextColors[a]}drawBody(e,t,a){const{body:s}=this,{bodySpacing:n,bodyAlign:i,displayColors:o,boxHeight:l,boxWidth:c,boxPadding:d}=a,u=(0,r.a0)(a.bodyFont);let h=u.lineHeight,m=0;const p=(0,r.aA)(a.rtl,this.x,this.width),f=function(a){t.fillText(a,p.x(e.x+m),e.y+h/2),e.y+=h+n},g=p.textAlign(i);let x,b,v,y,j,N,w;for(t.textAlign=i,t.textBaseline="middle",t.font=u.string,e.x=Aa(this,g,a),t.fillStyle=a.bodyColor,(0,r.F)(this.beforeBody,f),m=o&&"right"!==g?"center"===i?c/2+d:c+2+d:0,y=0,N=s.length;y<N;++y){for(x=s[y],b=this.labelTextColors[y],t.fillStyle=b,(0,r.F)(x.before,f),v=x.lines,o&&v.length&&(this._drawColorBox(t,e,y,p,a),h=Math.max(u.lineHeight,l)),j=0,w=v.length;j<w;++j)f(v[j]),h=u.lineHeight;(0,r.F)(x.after,f)}m=0,h=u.lineHeight,(0,r.F)(this.afterBody,f),e.y-=n}drawFooter(e,t,a){const s=this.footer,n=s.length;let i,o;if(n){const l=(0,r.aA)(a.rtl,this.x,this.width);for(e.x=Aa(this,a.footerAlign,a),e.y+=a.footerMarginTop,t.textAlign=l.textAlign(a.footerAlign),t.textBaseline="middle",i=(0,r.a0)(a.footerFont),t.fillStyle=a.footerColor,t.font=i.string,o=0;o<n;++o)t.fillText(s[o],l.x(e.x),e.y+i.lineHeight/2),e.y+=i.lineHeight+a.footerSpacing}}drawBackground(e,t,a,s){const{xAlign:n,yAlign:i}=this,{x:o,y:l}=e,{width:c,height:d}=a,{topLeft:u,topRight:h,bottomLeft:m,bottomRight:p}=(0,r.ax)(s.cornerRadius);t.fillStyle=s.backgroundColor,t.strokeStyle=s.borderColor,t.lineWidth=s.borderWidth,t.beginPath(),t.moveTo(o+u,l),"top"===i&&this.drawCaret(e,t,a,s),t.lineTo(o+c-h,l),t.quadraticCurveTo(o+c,l,o+c,l+h),"center"===i&&"right"===n&&this.drawCaret(e,t,a,s),t.lineTo(o+c,l+d-p),t.quadraticCurveTo(o+c,l+d,o+c-p,l+d),"bottom"===i&&this.drawCaret(e,t,a,s),t.lineTo(o+m,l+d),t.quadraticCurveTo(o,l+d,o,l+d-m),"center"===i&&"left"===n&&this.drawCaret(e,t,a,s),t.lineTo(o,l+u),t.quadraticCurveTo(o,l,o+u,l),t.closePath(),t.fill(),s.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,a=this.$animations,s=a&&a.x,n=a&&a.y;if(s||n){const a=ya[e.position].call(this,this._active,this._eventPosition);if(!a)return;const r=this._size=_a(this,e),i=Object.assign({},a,this._size),o=Ca(t,e,i),l=ka(e,i,o,t);s._to===l.x&&n._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=r.width,this.height=r.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let a=this.opacity;if(!a)return;this._updateAnimationTarget(t);const s={width:this.width,height:this.height},n={x:this.x,y:this.y};a=Math.abs(a)<.001?0:a;const i=(0,r.E)(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=a,this.drawBackground(n,e,s,t),(0,r.aB)(e,t.textDirection),n.y+=i.top,this.drawTitle(n,e,t),this.drawBody(n,e,t),this.drawFooter(n,e,t),(0,r.aD)(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const a=this._active,s=e.map((e=>{let{datasetIndex:t,index:a}=e;const s=this.chart.getDatasetMeta(t);if(!s)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:s.data[a],index:a}})),n=!(0,r.ai)(a,s),i=this._positionChanged(s,t);(n||i)&&(this._active=s,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,n=this._active||[],i=this._getActiveElements(e,n,t,a),o=this._positionChanged(i,e),l=t||!(0,r.ai)(i,n)||o;return l&&(this._active=i,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),l}_getActiveElements(e,t,a,s){const n=this.options;if("mouseout"===e.type)return[];if(!s)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const r=this.chart.getElementsAtEventForMode(e,n.mode,n,a);return n.reverse&&r.reverse(),r}_positionChanged(e,t){const{caretX:a,caretY:s,options:n}=this,r=ya[n.position].call(this,e,t);return!1!==r&&(a!==r.x||s!==r.y)}}(0,n.A)(Oa,"positioners",ya);var Ta={id:"tooltip",_element:Oa,positioners:ya,afterInit(e,t,a){a&&(e.tooltip=new Oa({chart:e,options:a}))},beforeUpdate(e,t,a){e.tooltip&&e.tooltip.initialize(a)},reset(e,t,a){e.tooltip&&e.tooltip.initialize(a)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const a={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",(0,s.A)((0,s.A)({},a),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",a)}},afterEvent(e,t){if(e.tooltip){const a=t.replay;e.tooltip.handleEvent(t.event,a,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:La},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Ma=Object.freeze({__proto__:null,Colors:Vt,Decimation:$t,Filler:ua,Legend:fa,SubTitle:va,Title:xa,Tooltip:Ta});function Ra(e,t,a,s){const n=e.indexOf(t);if(-1===n)return((e,t,a,s)=>("string"===typeof t?(a=e.push(t)-1,s.unshift({index:a,label:t})):isNaN(t)&&(a=null),a))(e,t,a,s);return n!==e.lastIndexOf(t)?a:n}function Ia(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class Fa extends Ie{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:a,label:s}of t)e[a]===s&&e.splice(a,1);this._addedLabels=[]}super.init(e)}parse(e,t){if((0,r.k)(e))return null;const a=this.getLabels();return((e,t)=>null===e?null:(0,r.S)(Math.round(e),0,t))(t=isFinite(t)&&a[t]===e?t:Ra(a,e,(0,r.v)(t,e),this._addedLabels),a.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:a,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(a=0),t||(s=this.getLabels().length-1)),this.min=a,this.max=s}buildTicks(){const e=this.min,t=this.max,a=this.options.offset,s=[];let n=this.getLabels();n=0===e&&t===n.length-1?n:n.slice(e,t+1),this._valueRange=Math.max(n.length-(a?0:1),1),this._startValue=this.min-(a?.5:0);for(let r=e;r<=t;r++)s.push({value:r});return s}getLabelForValue(e){return Ia.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function za(e,t,a){let{horizontal:s,minRotation:n}=a;const i=(0,r.t)(n),o=(s?Math.sin(i):Math.cos(i))||.001,l=.75*t*(""+e).length;return Math.min(t/o,l)}(0,n.A)(Fa,"id","category"),(0,n.A)(Fa,"defaults",{ticks:{callback:Ia}});class Ba extends Ie{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return(0,r.k)(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:a}=this.getUserBounds();let{min:s,max:n}=this;const i=e=>s=t?s:e,o=e=>n=a?n:e;if(e){const e=(0,r.s)(s),t=(0,r.s)(n);e<0&&t<0?o(0):e>0&&t>0&&i(0)}if(s===n){let t=0===n?1:Math.abs(.05*n);o(n+t),e||i(s-t)}this.min=s,this.max=n}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:a,stepSize:s}=e;return s?(t=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(s," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),a=a||11),a&&(t=Math.min(a,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let a=this.getTickLimit();a=Math.max(2,a);const s=function(e,t){const a=[],{bounds:s,step:n,min:i,max:o,precision:l,count:c,maxTicks:d,maxDigits:u,includeBounds:h}=e,m=n||1,p=d-1,{min:f,max:g}=t,x=!(0,r.k)(i),b=!(0,r.k)(o),v=!(0,r.k)(c),y=(g-f)/(u+1);let j,N,w,_,S=(0,r.aI)((g-f)/p/m)*m;if(S<1e-14&&!x&&!b)return[{value:f},{value:g}];_=Math.ceil(g/S)-Math.floor(f/S),_>p&&(S=(0,r.aI)(_*S/p/m)*m),(0,r.k)(l)||(j=Math.pow(10,l),S=Math.ceil(S*j)/j),"ticks"===s?(N=Math.floor(f/S)*S,w=Math.ceil(g/S)*S):(N=f,w=g),x&&b&&n&&(0,r.aJ)((o-i)/n,S/1e3)?(_=Math.round(Math.min((o-i)/S,d)),S=(o-i)/_,N=i,w=o):v?(N=x?i:N,w=b?o:w,_=c-1,S=(w-N)/_):(_=(w-N)/S,_=(0,r.aK)(_,Math.round(_),S/1e3)?Math.round(_):Math.ceil(_));const C=Math.max((0,r.aL)(S),(0,r.aL)(N));j=Math.pow(10,(0,r.k)(l)?C:l),N=Math.round(N*j)/j,w=Math.round(w*j)/j;let k=0;for(x&&(h&&N!==i?(a.push({value:i}),N<i&&k++,(0,r.aK)(Math.round((N+k*S)*j)/j,i,za(i,y,e))&&k++):N<i&&k++);k<_;++k){const e=Math.round((N+k*S)*j)/j;if(b&&e>o)break;a.push({value:e})}return b&&h&&w!==o?a.length&&(0,r.aK)(a[a.length-1].value,o,za(o,y,e))?a[a.length-1].value=o:a.push({value:o}):b&&w!==o||a.push({value:w}),a}({maxTicks:a,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&(0,r.aH)(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const e=this.ticks;let t=this.min,a=this.max;if(super.configure(),this.options.offset&&e.length){const s=(a-t)/Math.max(e.length-1,1)/2;t-=s,a+=s}this._startValue=t,this._endValue=a,this._valueRange=a-t}getLabelForValue(e){return(0,r.o)(e,this.chart.options.locale,this.options.ticks.format)}}class qa extends Ba{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=(0,r.g)(e)?e:0,this.max=(0,r.g)(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,a=(0,r.t)(this.options.ticks.minRotation),s=(e?Math.sin(a):Math.cos(a))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,n.lineHeight/s))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,n.A)(qa,"id","linear"),(0,n.A)(qa,"defaults",{ticks:{callback:r.aM.formatters.numeric}});const Ua=e=>Math.floor((0,r.aN)(e)),Ha=(e,t)=>Math.pow(10,Ua(e)+t);function Wa(e){return 1===e/Math.pow(10,Ua(e))}function Va(e,t,a){const s=Math.pow(10,a),n=Math.floor(e/s);return Math.ceil(t/s)-n}function Ga(e,t){let{min:a,max:s}=t;a=(0,r.O)(e.min,a);const n=[],i=Ua(a);let o=function(e,t){let a=Ua(t-e);for(;Va(e,t,a)>10;)a++;for(;Va(e,t,a)<10;)a--;return Math.min(a,Ua(e))}(a,s),l=o<0?Math.pow(10,Math.abs(o)):1;const c=Math.pow(10,o),d=i>o?Math.pow(10,i):0,u=Math.round((a-d)*l)/l,h=Math.floor((a-d)/c/10)*c*10;let m=Math.floor((u-h)/Math.pow(10,o)),p=(0,r.O)(e.min,Math.round((d+h+m*Math.pow(10,o))*l)/l);for(;p<s;)n.push({value:p,major:Wa(p),significand:m}),m>=10?m=m<15?15:20:m++,m>=20&&(o++,m=2,l=o>=0?1:l),p=Math.round((d+h+m*Math.pow(10,o))*l)/l;const f=(0,r.O)(e.max,p);return n.push({value:f,major:Wa(f),significand:m}),n}class Ya extends Ie{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const a=Ba.prototype.parse.apply(this,[e,t]);if(0!==a)return(0,r.g)(a)&&a>0?a:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=(0,r.g)(e)?Math.max(0,e):null,this.max=(0,r.g)(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!(0,r.g)(this._userMin)&&(this.min=e===Ha(this.min,0)?Ha(this.min,-1):Ha(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let a=this.min,s=this.max;const n=t=>a=e?a:t,r=e=>s=t?s:e;a===s&&(a<=0?(n(1),r(10)):(n(Ha(a,-1)),r(Ha(s,1)))),a<=0&&n(Ha(s,-1)),s<=0&&r(Ha(a,1)),this.min=a,this.max=s}buildTicks(){const e=this.options,t=Ga({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&(0,r.aH)(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":(0,r.o)(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=(0,r.aN)(e),this._valueRange=(0,r.aN)(this.max)-(0,r.aN)(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:((0,r.aN)(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function $a(e){const t=e.ticks;if(t.display&&e.display){const e=(0,r.E)(t.backdropPadding);return(0,r.v)(t.font&&t.font.size,r.d.font.size)+e.height}return 0}function Xa(e,t,a,s,n){return e===s||e===n?{start:t-a/2,end:t+a/2}:e<s||e>n?{start:t-a,end:t}:{start:t,end:t+a}}function Ja(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},a=Object.assign({},t),s=[],n=[],i=e._pointLabels.length,o=e.options.pointLabels,l=o.centerPointLabels?r.P/i:0;for(let h=0;h<i;h++){const i=o.setContext(e.getPointLabelContext(h));n[h]=i.padding;const m=e.getPointPosition(h,e.drawingArea+n[h],l),p=(0,r.a0)(i.font),f=(c=e.ctx,d=p,u=e._pointLabels[h],u=(0,r.b)(u)?u:[u],{w:(0,r.aO)(c,d.string,u),h:u.length*d.lineHeight});s[h]=f;const g=(0,r.az)(e.getIndexAngle(h)+l),x=Math.round((0,r.U)(g));Ka(a,t,g,Xa(x,m.x,f.w,0,180),Xa(x,m.y,f.h,90,270))}var c,d,u;e.setCenterPoint(t.l-a.l,a.r-t.r,t.t-a.t,a.b-t.b),e._pointLabelItems=function(e,t,a){const s=[],n=e._pointLabels.length,i=e.options,{centerPointLabels:o,display:l}=i.pointLabels,c={extra:$a(i)/2,additionalAngle:o?r.P/n:0};let d;for(let r=0;r<n;r++){c.padding=a[r],c.size=t[r];const n=Qa(e,r,c);s.push(n),"auto"===l&&(n.visible=Za(n,d),n.visible&&(d=n))}return s}(e,s,n)}function Ka(e,t,a,s,n){const r=Math.abs(Math.sin(a)),i=Math.abs(Math.cos(a));let o=0,l=0;s.start<t.l?(o=(t.l-s.start)/r,e.l=Math.min(e.l,t.l-o)):s.end>t.r&&(o=(s.end-t.r)/r,e.r=Math.max(e.r,t.r+o)),n.start<t.t?(l=(t.t-n.start)/i,e.t=Math.min(e.t,t.t-l)):n.end>t.b&&(l=(n.end-t.b)/i,e.b=Math.max(e.b,t.b+l))}function Qa(e,t,a){const s=e.drawingArea,{extra:n,additionalAngle:i,padding:o,size:l}=a,c=e.getPointPosition(t,s+n+o,i),d=Math.round((0,r.U)((0,r.az)(c.angle+r.H))),u=function(e,t,a){90===a||270===a?e-=t/2:(a>270||a<90)&&(e-=t);return e}(c.y,l.h,d),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(d),m=function(e,t,a){"right"===a?e-=t:"center"===a&&(e-=t/2);return e}(c.x,l.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:m,top:u,right:m+l.w,bottom:u+l.h}}function Za(e,t){if(!t)return!0;const{left:a,top:s,right:n,bottom:i}=e;return!((0,r.C)({x:a,y:s},t)||(0,r.C)({x:a,y:i},t)||(0,r.C)({x:n,y:s},t)||(0,r.C)({x:n,y:i},t))}function es(e,t,a){const{left:s,top:n,right:i,bottom:o}=a,{backdropColor:l}=t;if(!(0,r.k)(l)){const a=(0,r.ax)(t.borderRadius),c=(0,r.E)(t.backdropPadding);e.fillStyle=l;const d=s-c.left,u=n-c.top,h=i-s+c.width,m=o-n+c.height;Object.values(a).some((e=>0!==e))?(e.beginPath(),(0,r.av)(e,{x:d,y:u,w:h,h:m,radius:a}),e.fill()):e.fillRect(d,u,h,m)}}function ts(e,t,a,s){const{ctx:n}=e;if(a)n.arc(e.xCenter,e.yCenter,t,0,r.T);else{let a=e.getPointPosition(0,t);n.moveTo(a.x,a.y);for(let r=1;r<s;r++)a=e.getPointPosition(r,t),n.lineTo(a.x,a.y)}}(0,n.A)(Ya,"id","logarithmic"),(0,n.A)(Ya,"defaults",{ticks:{callback:r.aM.formatters.logarithmic,major:{enabled:!0}}});class as extends Ba{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=(0,r.E)($a(this.options)/2),t=this.width=this.maxWidth-e.width,a=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+a/2+e.top),this.drawingArea=Math.floor(Math.min(t,a)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=(0,r.g)(e)&&!isNaN(e)?e:0,this.max=(0,r.g)(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/$a(this.options))}generateTickLabels(e){Ba.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const a=(0,r.Q)(this.options.pointLabels.callback,[e,t],this);return a||0===a?a:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?Ja(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,a,s){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((a-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,a,s))}getIndexAngle(e){const t=r.T/(this._pointLabels.length||1),a=this.options.startAngle||0;return(0,r.az)(e*t+(0,r.t)(a))}getDistanceFromCenterForValue(e){if((0,r.k)(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if((0,r.k)(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const a=t[e];return function(e,t,a){return(0,r.j)(e,{label:a,index:t,type:"pointLabel"})}(this.getContext(),e,a)}}getPointPosition(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=this.getIndexAngle(e)-r.H+a;return{x:Math.cos(s)*t+this.xCenter,y:Math.sin(s)*t+this.yCenter,angle:s}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:a,right:s,bottom:n}=this._pointLabelItems[e];return{left:t,top:a,right:s,bottom:n}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const a=this.ctx;a.save(),a.beginPath(),ts(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),a.closePath(),a.fillStyle=e,a.fill(),a.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:a,grid:s,border:n}=t,i=this._pointLabels.length;let o,l,c;if(t.pointLabels.display&&function(e,t){const{ctx:a,options:{pointLabels:s}}=e;for(let n=t-1;n>=0;n--){const t=e._pointLabelItems[n];if(!t.visible)continue;const i=s.setContext(e.getPointLabelContext(n));es(a,i,t);const o=(0,r.a0)(i.font),{x:l,y:c,textAlign:d}=t;(0,r.Z)(a,e._pointLabels[n],l,c+o.lineHeight/2,o,{color:i.color,textAlign:d,textBaseline:"middle"})}}(this,i),s.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){l=this.getDistanceFromCenterForValue(e.value);const a=this.getContext(t),r=s.setContext(a),o=n.setContext(a);!function(e,t,a,s,n){const r=e.ctx,i=t.circular,{color:o,lineWidth:l}=t;!i&&!s||!o||!l||a<0||(r.save(),r.strokeStyle=o,r.lineWidth=l,r.setLineDash(n.dash||[]),r.lineDashOffset=n.dashOffset,r.beginPath(),ts(e,a,i,s),r.closePath(),r.stroke(),r.restore())}(this,r,l,i,o)}})),a.display){for(e.save(),o=i-1;o>=0;o--){const s=a.setContext(this.getPointLabelContext(o)),{color:n,lineWidth:r}=s;r&&n&&(e.lineWidth=r,e.strokeStyle=n,e.setLineDash(s.borderDash),e.lineDashOffset=s.borderDashOffset,l=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),c=this.getPointPosition(o,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,a=t.ticks;if(!a.display)return;const s=this.getIndexAngle(0);let n,i;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(s),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((s,o)=>{if(0===o&&this.min>=0&&!t.reverse)return;const l=a.setContext(this.getContext(o)),c=(0,r.a0)(l.font);if(n=this.getDistanceFromCenterForValue(this.ticks[o].value),l.showLabelBackdrop){e.font=c.string,i=e.measureText(s.label).width,e.fillStyle=l.backdropColor;const t=(0,r.E)(l.backdropPadding);e.fillRect(-i/2-t.left,-n-c.size/2-t.top,i+t.width,c.size+t.height)}(0,r.Z)(e,s.label,0,-n,c,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})})),e.restore()}drawTitle(){}}(0,n.A)(as,"id","radialLinear"),(0,n.A)(as,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:r.aM.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,n.A)(as,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,n.A)(as,"descriptors",{angleLines:{_fallback:"grid"}});const ss={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ns=Object.keys(ss);function rs(e,t){return e-t}function is(e,t){if((0,r.k)(t))return null;const a=e._adapter,{parser:s,round:n,isoWeekday:i}=e._parseOpts;let o=t;return"function"===typeof s&&(o=s(o)),(0,r.g)(o)||(o="string"===typeof s?a.parse(o,s):a.parse(o)),null===o?null:(n&&(o="week"!==n||!(0,r.x)(i)&&!0!==i?a.startOf(o,n):a.startOf(o,"isoWeek",i)),+o)}function os(e,t,a,s){const n=ns.length;for(let r=ns.indexOf(e);r<n-1;++r){const e=ss[ns[r]],n=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((a-t)/(n*e.size))<=s)return ns[r]}return ns[n-1]}function ls(e,t,a){if(a){if(a.length){const{lo:s,hi:n}=(0,r.aQ)(a,t);e[a[s]>=t?a[s]:a[n]]=!0}}else e[t]=!0}function cs(e,t,a){const s=[],n={},r=t.length;let i,o;for(i=0;i<r;++i)o=t[i],n[o]=i,s.push({value:o,major:!1});return 0!==r&&a?function(e,t,a,s){const n=e._adapter,r=+n.startOf(t[0].value,s),i=t[t.length-1].value;let o,l;for(o=r;o<=i;o=+n.add(o,1,s))l=a[o],l>=0&&(t[l].major=!0);return t}(e,s,n,a):s}class ds extends Ie{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=e.time||(e.time={}),s=this._adapter=new H(e.adapters.date);s.init(t),(0,r.ab)(a.displayFormats,s.formats()),this._parseOpts={parser:a.parser,round:a.round,isoWeekday:a.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:is(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,a=e.time.unit||"day";let{min:s,max:n,minDefined:i,maxDefined:o}=this.getUserBounds();function l(e){i||isNaN(e.min)||(s=Math.min(s,e.min)),o||isNaN(e.max)||(n=Math.max(n,e.max))}i&&o||(l(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||l(this.getMinMax(!1))),s=(0,r.g)(s)&&!isNaN(s)?s:+t.startOf(Date.now(),a),n=(0,r.g)(n)&&!isNaN(n)?n:+t.endOf(Date.now(),a)+1,this.min=Math.min(s,n-1),this.max=Math.max(s+1,n)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],a=e[e.length-1]),{min:t,max:a}}buildTicks(){const e=this.options,t=e.time,a=e.ticks,s="labels"===a.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const n=this.min,i=this.max,o=(0,r.aP)(s,n,i);return this._unit=t.unit||(a.autoSkip?os(t.minUnit,this.min,this.max,this._getLabelCapacity(n)):function(e,t,a,s,n){for(let r=ns.length-1;r>=ns.indexOf(a);r--){const a=ns[r];if(ss[a].common&&e._adapter.diff(n,s,a)>=t-1)return a}return ns[a?ns.indexOf(a):0]}(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=a.major.enabled&&"year"!==this._unit?function(e){for(let t=ns.indexOf(e)+1,a=ns.length;t<a;++t)if(ss[ns[t]].common)return ns[t]}(this._unit):void 0,this.initOffsets(s),e.reverse&&o.reverse(),cs(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],s=0,n=0;this.options.offset&&a.length&&(e=this.getDecimalForValue(a[0]),s=1===a.length?1-e:(this.getDecimalForValue(a[1])-e)/2,t=this.getDecimalForValue(a[a.length-1]),n=1===a.length?t:(t-this.getDecimalForValue(a[a.length-2]))/2);const i=a.length<3?.5:.25;s=(0,r.S)(s,0,i),n=(0,r.S)(n,0,i),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,t=this.min,a=this.max,s=this.options,n=s.time,i=n.unit||os(n.minUnit,t,a,this._getLabelCapacity(t)),o=(0,r.v)(s.ticks.stepSize,1),l="week"===i&&n.isoWeekday,c=(0,r.x)(l)||!0===l,d={};let u,h,m=t;if(c&&(m=+e.startOf(m,"isoWeek",l)),m=+e.startOf(m,c?"day":i),e.diff(a,t,i)>1e5*o)throw new Error(t+" and "+a+" are too far apart with stepSize of "+o+" "+i);const p="data"===s.ticks.source&&this.getDataTimestamps();for(u=m,h=0;u<a;u=+e.add(u,o,i),h++)ls(d,u,p);return u!==a&&"ticks"!==s.bounds&&1!==h||ls(d,u,p),Object.keys(d).sort(rs).map((e=>+e))}getLabelForValue(e){const t=this._adapter,a=this.options.time;return a.tooltipFormat?t.format(e,a.tooltipFormat):t.format(e,a.displayFormats.datetime)}format(e,t){const a=this.options.time.displayFormats,s=this._unit,n=t||a[s];return this._adapter.format(e,n)}_tickFormatFunction(e,t,a,s){const n=this.options,i=n.ticks.callback;if(i)return(0,r.Q)(i,[e,t,a],this);const o=n.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&o[l],u=c&&o[c],h=a[t],m=c&&u&&h&&h.major;return this._adapter.format(e,s||(m?u:d))}generateTickLabels(e){let t,a,s;for(t=0,a=e.length;t<a;++t)s=e[t],s.label=this._tickFormatFunction(s.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,a=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+a)*t.factor)}getValueForPixel(e){const t=this._offsets,a=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+a*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,a=this.ctx.measureText(e).width,s=(0,r.t)(this.isHorizontal()?t.maxRotation:t.minRotation),n=Math.cos(s),i=Math.sin(s),o=this._resolveTickFontOptions(0).size;return{w:a*n+o*i,h:a*i+o*n}}_getLabelCapacity(e){const t=this.options.time,a=t.displayFormats,s=a[t.unit]||a.millisecond,n=this._tickFormatFunction(e,0,cs(this,[e],this._majorUnit),s),r=this._getLabelSize(n),i=Math.floor(this.isHorizontal()?this.width/r.w:this.height/r.h)-1;return i>0?i:1}getDataTimestamps(){let e,t,a=this._cache.data||[];if(a.length)return a;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(e=0,t=s.length;e<t;++e)a=a.concat(s[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(a)}getLabelTimestamps(){const e=this._cache.labels||[];let t,a;if(e.length)return e;const s=this.getLabels();for(t=0,a=s.length;t<a;++t)e.push(is(this,s[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return(0,r._)(e.sort(rs))}}function us(e,t,a){let s,n,i,o,l=0,c=e.length-1;a?(t>=e[l].pos&&t<=e[c].pos&&({lo:l,hi:c}=(0,r.B)(e,"pos",t)),({pos:s,time:i}=e[l]),({pos:n,time:o}=e[c])):(t>=e[l].time&&t<=e[c].time&&({lo:l,hi:c}=(0,r.B)(e,"time",t)),({time:s,pos:i}=e[l]),({time:n,pos:o}=e[c]));const d=n-s;return d?i+(o-i)*(t-s)/d:i}(0,n.A)(ds,"id","time"),(0,n.A)(ds,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class hs extends ds{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=us(t,this.min),this._tableRange=us(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:a}=this,s=[],n=[];let r,i,o,l,c;for(r=0,i=e.length;r<i;++r)l=e[r],l>=t&&l<=a&&s.push(l);if(s.length<2)return[{time:t,pos:0},{time:a,pos:1}];for(r=0,i=s.length;r<i;++r)c=s[r+1],o=s[r-1],l=s[r],Math.round((c+o)/2)!==l&&n.push({time:l,pos:r/(i-1)});return n}_generate(){const e=this.min,t=this.max;let a=super.getDataTimestamps();return a.includes(e)&&a.length||a.splice(0,0,e),a.includes(t)&&1!==a.length||a.push(t),a.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),a=this.getLabelTimestamps();return e=t.length&&a.length?this.normalize(t.concat(a)):t.length?t:a,e=this._cache.all=e,e}getDecimalForValue(e){return(us(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,a=this.getDecimalForPixel(e)/t.factor-t.end;return us(this._table,a*this._tableRange+this._minPos,!0)}}(0,n.A)(hs,"id","timeseries"),(0,n.A)(hs,"defaults",ds.defaults);const ms=[B,Ft,Ma,Object.freeze({__proto__:null,CategoryScale:Fa,LinearScale:qa,LogarithmicScale:Ya,RadialLinearScale:as,TimeScale:ds,TimeSeriesScale:hs})]},7234:(e,t)=>{"use strict";function a(e,t){var a=e.length;e.push(t);e:for(;0<a;){var s=a-1>>>1,n=e[s];if(!(0<r(n,t)))break e;e[s]=t,e[a]=n,a=s}}function s(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],a=e.pop();if(a!==t){e[0]=a;e:for(var s=0,n=e.length,i=n>>>1;s<i;){var o=2*(s+1)-1,l=e[o],c=o+1,d=e[c];if(0>r(l,a))c<n&&0>r(d,l)?(e[s]=d,e[c]=a,s=c):(e[s]=l,e[o]=a,s=o);else{if(!(c<n&&0>r(d,a)))break e;e[s]=d,e[c]=a,s=c}}}return t}function r(e,t){var a=e.sortIndex-t.sortIndex;return 0!==a?a:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,f=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function y(e){for(var t=s(d);null!==t;){if(null===t.callback)n(d);else{if(!(t.startTime<=e))break;n(d),t.sortIndex=t.expirationTime,a(c,t)}t=s(d)}}function j(e){if(g=!1,y(e),!f)if(null!==s(c))f=!0,O(N);else{var t=s(d);null!==t&&T(j,t.startTime-e)}}function N(e,a){f=!1,g&&(g=!1,b(C),C=-1),p=!0;var r=m;try{for(y(a),h=s(c);null!==h&&(!(h.expirationTime>a)||e&&!P());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var o=i(h.expirationTime<=a);a=t.unstable_now(),"function"===typeof o?h.callback=o:h===s(c)&&n(c),y(a)}else n(c);h=s(c)}if(null!==h)var l=!0;else{var u=s(d);null!==u&&T(j,u.startTime-a),l=!1}return l}finally{h=null,m=r,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,_=!1,S=null,C=-1,k=5,A=-1;function P(){return!(t.unstable_now()-A<k)}function E(){if(null!==S){var e=t.unstable_now();A=e;var a=!0;try{a=S(!0,e)}finally{a?w():(_=!1,S=null)}}else _=!1}if("function"===typeof v)w=function(){v(E)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,D=L.port2;L.port1.onmessage=E,w=function(){D.postMessage(null)}}else w=function(){x(E,0)};function O(e){S=e,_||(_=!0,w())}function T(e,a){C=x((function(){e(t.unstable_now())}),a)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||p||(f=!0,O(N))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var a=m;m=t;try{return e()}finally{m=a}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var a=m;m=e;try{return t()}finally{m=a}},t.unstable_scheduleCallback=function(e,n,r){var i=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?i+r:i:r=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:r,expirationTime:o=r+o,sortIndex:-1},r>i?(e.sortIndex=r,a(d,e),null===s(c)&&e===s(d)&&(g?(b(C),C=-1):g=!0,T(j,r-i))):(e.sortIndex=o,a(c,e),f||p||(f=!0,O(N))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=m;return function(){var a=m;m=t;try{return e.apply(this,arguments)}finally{m=a}}}},7762:(e,t,a)=>{"use strict";a.r(t),a.d(t,{AcroForm:()=>jt,AcroFormAppearance:()=>vt,AcroFormButton:()=>ht,AcroFormCheckBox:()=>gt,AcroFormChoiceField:()=>lt,AcroFormComboBox:()=>dt,AcroFormEditBox:()=>ut,AcroFormListBox:()=>ct,AcroFormPasswordField:()=>bt,AcroFormPushButton:()=>mt,AcroFormRadioButton:()=>pt,AcroFormTextField:()=>xt,GState:()=>Pe,ShadingPattern:()=>Le,TilingPattern:()=>De,default:()=>va,jsPDF:()=>Oe});var s=a(2284),n=Uint8Array,r=Uint16Array,i=Int32Array,o=new n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),l=new n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),c=new n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),d=function(e,t){for(var a=new r(31),s=0;s<31;++s)a[s]=t+=1<<e[s-1];var n=new i(a[30]);for(s=1;s<30;++s)for(var o=a[s];o<a[s+1];++o)n[o]=o-a[s]<<5|s;return{b:a,r:n}},u=d(o,2),h=u.b,m=u.r;h[28]=258,m[258]=28;for(var p=d(l,0),f=p.b,g=p.r,x=new r(32768),b=0;b<32768;++b){var v=(43690&b)>>1|(21845&b)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,x[b]=((65280&v)>>8|(255&v)<<8)>>1}var y=function(e,t,a){for(var s=e.length,n=0,i=new r(t);n<s;++n)e[n]&&++i[e[n]-1];var o,l=new r(t);for(n=1;n<t;++n)l[n]=l[n-1]+i[n-1]<<1;if(a){o=new r(1<<t);var c=15-t;for(n=0;n<s;++n)if(e[n])for(var d=n<<4|e[n],u=t-e[n],h=l[e[n]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)o[x[h]>>c]=d}else for(o=new r(s),n=0;n<s;++n)e[n]&&(o[n]=x[l[e[n]-1]++]>>15-e[n]);return o},j=new n(288);for(b=0;b<144;++b)j[b]=8;for(b=144;b<256;++b)j[b]=9;for(b=256;b<280;++b)j[b]=7;for(b=280;b<288;++b)j[b]=8;var N=new n(32);for(b=0;b<32;++b)N[b]=5;var w=y(j,9,0),_=y(j,9,1),S=y(N,5,0),C=y(N,5,1),k=function(e){for(var t=e[0],a=1;a<e.length;++a)e[a]>t&&(t=e[a]);return t},A=function(e,t,a){var s=t/8|0;return(e[s]|e[s+1]<<8)>>(7&t)&a},P=function(e,t){var a=t/8|0;return(e[a]|e[a+1]<<8|e[a+2]<<16)>>(7&t)},E=function(e){return(e+7)/8|0},L=function(e,t,a){return(null==t||t<0)&&(t=0),(null==a||a>e.length)&&(a=e.length),new n(e.subarray(t,a))},D=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],O=function(e,t,a){var s=new Error(t||D[e]);if(s.code=e,Error.captureStackTrace&&Error.captureStackTrace(s,O),!a)throw s;return s},T=function(e,t,a,s){var r=e.length,i=s?s.length:0;if(!r||t.f&&!t.l)return a||new n(0);var d=!a,u=d||2!=t.i,m=t.i;d&&(a=new n(3*r));var p=function(e){var t=a.length;if(e>t){var s=new n(Math.max(2*t,e));s.set(a),a=s}},g=t.f||0,x=t.p||0,b=t.b||0,v=t.l,j=t.d,N=t.m,w=t.n,S=8*r;do{if(!v){g=A(e,x,1);var D=A(e,x+1,3);if(x+=3,!D){var T=e[(V=E(x)+4)-4]|e[V-3]<<8,M=V+T;if(M>r){m&&O(0);break}u&&p(b+T),a.set(e.subarray(V,M),b),t.b=b+=T,t.p=x=8*M,t.f=g;continue}if(1==D)v=_,j=C,N=9,w=5;else if(2==D){var R=A(e,x,31)+257,I=A(e,x+10,15)+4,F=R+A(e,x+5,31)+1;x+=14;for(var z=new n(F),B=new n(19),q=0;q<I;++q)B[c[q]]=A(e,x+3*q,7);x+=3*I;var U=k(B),H=(1<<U)-1,W=y(B,U,1);for(q=0;q<F;){var V,G=W[A(e,x,H)];if(x+=15&G,(V=G>>4)<16)z[q++]=V;else{var Y=0,$=0;for(16==V?($=3+A(e,x,3),x+=2,Y=z[q-1]):17==V?($=3+A(e,x,7),x+=3):18==V&&($=11+A(e,x,127),x+=7);$--;)z[q++]=Y}}var X=z.subarray(0,R),J=z.subarray(R);N=k(X),w=k(J),v=y(X,N,1),j=y(J,w,1)}else O(1);if(x>S){m&&O(0);break}}u&&p(b+131072);for(var K=(1<<N)-1,Q=(1<<w)-1,Z=x;;Z=x){var ee=(Y=v[P(e,x)&K])>>4;if((x+=15&Y)>S){m&&O(0);break}if(Y||O(2),ee<256)a[b++]=ee;else{if(256==ee){Z=x,v=null;break}var te=ee-254;if(ee>264){var ae=o[q=ee-257];te=A(e,x,(1<<ae)-1)+h[q],x+=ae}var se=j[P(e,x)&Q],ne=se>>4;se||O(3),x+=15&se;J=f[ne];if(ne>3){ae=l[ne];J+=P(e,x)&(1<<ae)-1,x+=ae}if(x>S){m&&O(0);break}u&&p(b+131072);var re=b+te;if(b<J){var ie=i-J,oe=Math.min(J,re);for(ie+b<0&&O(3);b<oe;++b)a[b]=s[ie+b]}for(;b<re;++b)a[b]=a[b-J]}}t.l=v,t.p=Z,t.b=b,t.f=g,v&&(g=1,t.m=N,t.d=j,t.n=w)}while(!g);return b!=a.length&&d?L(a,0,b):a.subarray(0,b)},M=function(e,t,a){a<<=7&t;var s=t/8|0;e[s]|=a,e[s+1]|=a>>8},R=function(e,t,a){a<<=7&t;var s=t/8|0;e[s]|=a,e[s+1]|=a>>8,e[s+2]|=a>>16},I=function(e,t){for(var a=[],s=0;s<e.length;++s)e[s]&&a.push({s:s,f:e[s]});var i=a.length,o=a.slice();if(!i)return{t:W,l:0};if(1==i){var l=new n(a[0].s+1);return l[a[0].s]=1,{t:l,l:1}}a.sort((function(e,t){return e.f-t.f})),a.push({s:-1,f:25001});var c=a[0],d=a[1],u=0,h=1,m=2;for(a[0]={s:-1,f:c.f+d.f,l:c,r:d};h!=i-1;)c=a[a[u].f<a[m].f?u++:m++],d=a[u!=h&&a[u].f<a[m].f?u++:m++],a[h++]={s:-1,f:c.f+d.f,l:c,r:d};var p=o[0].s;for(s=1;s<i;++s)o[s].s>p&&(p=o[s].s);var f=new r(p+1),g=F(a[h-1],f,0);if(g>t){s=0;var x=0,b=g-t,v=1<<b;for(o.sort((function(e,t){return f[t.s]-f[e.s]||e.f-t.f}));s<i;++s){var y=o[s].s;if(!(f[y]>t))break;x+=v-(1<<g-f[y]),f[y]=t}for(x>>=b;x>0;){var j=o[s].s;f[j]<t?x-=1<<t-f[j]++-1:++s}for(;s>=0&&x;--s){var N=o[s].s;f[N]==t&&(--f[N],++x)}g=t}return{t:new n(f),l:g}},F=function(e,t,a){return-1==e.s?Math.max(F(e.l,t,a+1),F(e.r,t,a+1)):t[e.s]=a},z=function(e){for(var t=e.length;t&&!e[--t];);for(var a=new r(++t),s=0,n=e[0],i=1,o=function(e){a[s++]=e},l=1;l<=t;++l)if(e[l]==n&&l!=t)++i;else{if(!n&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(n),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(n);i=1,n=e[l]}return{c:a.subarray(0,s),n:t}},B=function(e,t){for(var a=0,s=0;s<t.length;++s)a+=e[s]*t[s];return a},q=function(e,t,a){var s=a.length,n=E(t+2);e[n]=255&s,e[n+1]=s>>8,e[n+2]=255^e[n],e[n+3]=255^e[n+1];for(var r=0;r<s;++r)e[n+r+4]=a[r];return 8*(n+4+s)},U=function(e,t,a,s,n,i,d,u,h,m,p){M(t,p++,a),++n[256];for(var f=I(n,15),g=f.t,x=f.l,b=I(i,15),v=b.t,_=b.l,C=z(g),k=C.c,A=C.n,P=z(v),E=P.c,L=P.n,D=new r(19),O=0;O<k.length;++O)++D[31&k[O]];for(O=0;O<E.length;++O)++D[31&E[O]];for(var T=I(D,7),F=T.t,U=T.l,H=19;H>4&&!F[c[H-1]];--H);var W,V,G,Y,$=m+5<<3,X=B(n,j)+B(i,N)+d,J=B(n,g)+B(i,v)+d+14+3*H+B(D,F)+2*D[16]+3*D[17]+7*D[18];if(h>=0&&$<=X&&$<=J)return q(t,p,e.subarray(h,h+m));if(M(t,p,1+(J<X)),p+=2,J<X){W=y(g,x,0),V=g,G=y(v,_,0),Y=v;var K=y(F,U,0);M(t,p,A-257),M(t,p+5,L-1),M(t,p+10,H-4),p+=14;for(O=0;O<H;++O)M(t,p+3*O,F[c[O]]);p+=3*H;for(var Q=[k,E],Z=0;Z<2;++Z){var ee=Q[Z];for(O=0;O<ee.length;++O){var te=31&ee[O];M(t,p,K[te]),p+=F[te],te>15&&(M(t,p,ee[O]>>5&127),p+=ee[O]>>12)}}}else W=w,V=j,G=S,Y=N;for(O=0;O<u;++O){var ae=s[O];if(ae>255){R(t,p,W[(te=ae>>18&31)+257]),p+=V[te+257],te>7&&(M(t,p,ae>>23&31),p+=o[te]);var se=31&ae;R(t,p,G[se]),p+=Y[se],se>3&&(R(t,p,ae>>5&8191),p+=l[se])}else R(t,p,W[ae]),p+=V[ae]}return R(t,p,W[256]),p+V[256]},H=new i([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),W=new n(0),V=function(e,t,a,s,c,d){var u=d.z||e.length,h=new n(s+u+5*(1+Math.ceil(u/7e3))+c),p=h.subarray(s,h.length-c),f=d.l,x=7&(d.r||0);if(t){x&&(p[0]=d.r>>3);for(var b=H[t-1],v=b>>13,y=8191&b,j=(1<<a)-1,N=d.p||new r(32768),w=d.h||new r(j+1),_=Math.ceil(a/3),S=2*_,C=function(t){return(e[t]^e[t+1]<<_^e[t+2]<<S)&j},k=new i(25e3),A=new r(288),P=new r(32),D=0,O=0,T=d.i||0,M=0,R=d.w||0,I=0;T+2<u;++T){var F=C(T),z=32767&T,B=w[F];if(N[z]=B,w[F]=z,R<=T){var W=u-T;if((D>7e3||M>24576)&&(W>423||!f)){x=U(e,p,0,k,A,P,O,M,I,T-I,x),M=D=O=0,I=T;for(var V=0;V<286;++V)A[V]=0;for(V=0;V<30;++V)P[V]=0}var G=2,Y=0,$=y,X=z-B&32767;if(W>2&&F==C(T-X))for(var J=Math.min(v,W)-1,K=Math.min(32767,T),Q=Math.min(258,W);X<=K&&--$&&z!=B;){if(e[T+G]==e[T+G-X]){for(var Z=0;Z<Q&&e[T+Z]==e[T+Z-X];++Z);if(Z>G){if(G=Z,Y=X,Z>J)break;var ee=Math.min(X,Z-2),te=0;for(V=0;V<ee;++V){var ae=T-X+V&32767,se=ae-N[ae]&32767;se>te&&(te=se,B=ae)}}}X+=(z=B)-(B=N[z])&32767}if(Y){k[M++]=268435456|m[G]<<18|g[Y];var ne=31&m[G],re=31&g[Y];O+=o[ne]+l[re],++A[257+ne],++P[re],R=T+G,++D}else k[M++]=e[T],++A[e[T]]}}for(T=Math.max(T,R);T<u;++T)k[M++]=e[T],++A[e[T]];x=U(e,p,f,k,A,P,O,M,I,T-I,x),f||(d.r=7&x|p[x/8|0]<<3,x-=7,d.h=w,d.p=N,d.i=T,d.w=R)}else{for(T=d.w||0;T<u+f;T+=65535){var ie=T+65535;ie>=u&&(p[x/8|0]=f,ie=u),x=q(p,x+1,e.subarray(T,ie))}d.i=u}return L(h,0,s+E(x)+c)},G=function(){var e=1,t=0;return{p:function(a){for(var s=e,n=t,r=0|a.length,i=0;i!=r;){for(var o=Math.min(i+2655,r);i<o;++i)n+=s+=a[i];s=(65535&s)+15*(s>>16),n=(65535&n)+15*(n>>16)}e=s,t=n},d:function(){return(255&(e%=65521))<<24|(65280&e)<<8|(255&(t%=65521))<<8|t>>8}}},Y=function(e,t,a,s,r){if(!r&&(r={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new n(i.length+e.length);o.set(i),o.set(e,i.length),e=o,r.w=i.length}return V(e,null==t.level?6:t.level,null==t.mem?r.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):20:12+t.mem,a,s,r)},$=function(e,t,a){for(;a;++t)e[t]=a,a>>>=8},X=function(e,t){var a=t.level,s=0==a?0:a<6?1:9==a?3:2;if(e[0]=120,e[1]=s<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var n=G();n.p(t.dictionary),$(e,2,n.d())}},J=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&O(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&O(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function K(e,t){t||(t={});var a=G();a.p(e);var s=Y(e,t,t.dictionary?6:2,4);return X(s,t),$(s,s.length-4,a.d()),s}function Q(e,t){return T(e.subarray(J(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var Z="undefined"!=typeof TextDecoder&&new TextDecoder;try{Z.decode(W,{stream:!0})}catch(ya){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;var ee=function(){return"undefined"!=typeof window?window:"undefined"!=typeof a.g?a.g:"undefined"!=typeof self?self:this}();function te(){ee.console&&"function"==typeof ee.console.log&&ee.console.log.apply(ee.console,arguments)}var ae={log:te,warn:function(e){ee.console&&("function"==typeof ee.console.warn?ee.console.warn.apply(ee.console,arguments):te.call(null,arguments))},error:function(e){ee.console&&("function"==typeof ee.console.error?ee.console.error.apply(ee.console,arguments):te(e))}};function se(e,t,a){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){le(s.response,t,a)},s.onerror=function(){ae.error("could not download file")},s.send()}function ne(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function re(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(a){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var ie,oe,le=ee.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,s.A)(window))||window!==ee?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(e,t,a){var s=ee.URL||ee.webkitURL,n=document.createElement("a");t=t||e.name||"download",n.download=t,n.rel="noopener","string"==typeof e?(n.href=e,n.origin!==location.origin?ne(n.href)?se(e,t,a):re(n,n.target="_blank"):re(n)):(n.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(n.href)}),4e4),setTimeout((function(){re(n)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,a){if(t=t||e.name||"download","string"==typeof e)if(ne(e))se(e,t,a);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout((function(){re(n)}))}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!==(0,s.A)(t)&&(ae.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,a),t)}:function(e,t,a,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return se(e,t,a);var r="application/octet-stream"===e.type,i=/constructor/i.test(ee.HTMLElement)||ee.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||r&&i)&&"object"===("undefined"==typeof FileReader?"undefined":(0,s.A)(FileReader))){var l=new FileReader;l.onloadend=function(){var e=l.result;e=o?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},l.readAsDataURL(e)}else{var c=ee.URL||ee.webkitURL,d=c.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout((function(){c.revokeObjectURL(d)}),4e4)}});function ce(e){var t;e=e||"",this.ok=!1,"#"==e.charAt(0)&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var a=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(e){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}],s=0;s<a.length;s++){var n=a[s].re,r=a[s].process,i=n.exec(e);i&&(t=r(i),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),a=this.b.toString(16);return 1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==a.length&&(a="0"+a),"#"+e+t+a}}function de(e,t){var a=e[0],s=e[1],n=e[2],r=e[3];a=he(a,s,n,r,t[0],7,-680876936),r=he(r,a,s,n,t[1],12,-389564586),n=he(n,r,a,s,t[2],17,606105819),s=he(s,n,r,a,t[3],22,-1044525330),a=he(a,s,n,r,t[4],7,-176418897),r=he(r,a,s,n,t[5],12,1200080426),n=he(n,r,a,s,t[6],17,-1473231341),s=he(s,n,r,a,t[7],22,-45705983),a=he(a,s,n,r,t[8],7,1770035416),r=he(r,a,s,n,t[9],12,-1958414417),n=he(n,r,a,s,t[10],17,-42063),s=he(s,n,r,a,t[11],22,-1990404162),a=he(a,s,n,r,t[12],7,1804603682),r=he(r,a,s,n,t[13],12,-40341101),n=he(n,r,a,s,t[14],17,-1502002290),a=me(a,s=he(s,n,r,a,t[15],22,1236535329),n,r,t[1],5,-165796510),r=me(r,a,s,n,t[6],9,-1069501632),n=me(n,r,a,s,t[11],14,643717713),s=me(s,n,r,a,t[0],20,-373897302),a=me(a,s,n,r,t[5],5,-701558691),r=me(r,a,s,n,t[10],9,38016083),n=me(n,r,a,s,t[15],14,-660478335),s=me(s,n,r,a,t[4],20,-405537848),a=me(a,s,n,r,t[9],5,568446438),r=me(r,a,s,n,t[14],9,-1019803690),n=me(n,r,a,s,t[3],14,-187363961),s=me(s,n,r,a,t[8],20,1163531501),a=me(a,s,n,r,t[13],5,-1444681467),r=me(r,a,s,n,t[2],9,-51403784),n=me(n,r,a,s,t[7],14,1735328473),a=pe(a,s=me(s,n,r,a,t[12],20,-1926607734),n,r,t[5],4,-378558),r=pe(r,a,s,n,t[8],11,-2022574463),n=pe(n,r,a,s,t[11],16,1839030562),s=pe(s,n,r,a,t[14],23,-35309556),a=pe(a,s,n,r,t[1],4,-1530992060),r=pe(r,a,s,n,t[4],11,1272893353),n=pe(n,r,a,s,t[7],16,-155497632),s=pe(s,n,r,a,t[10],23,-1094730640),a=pe(a,s,n,r,t[13],4,681279174),r=pe(r,a,s,n,t[0],11,-358537222),n=pe(n,r,a,s,t[3],16,-722521979),s=pe(s,n,r,a,t[6],23,76029189),a=pe(a,s,n,r,t[9],4,-640364487),r=pe(r,a,s,n,t[12],11,-421815835),n=pe(n,r,a,s,t[15],16,530742520),a=fe(a,s=pe(s,n,r,a,t[2],23,-995338651),n,r,t[0],6,-198630844),r=fe(r,a,s,n,t[7],10,1126891415),n=fe(n,r,a,s,t[14],15,-1416354905),s=fe(s,n,r,a,t[5],21,-57434055),a=fe(a,s,n,r,t[12],6,1700485571),r=fe(r,a,s,n,t[3],10,-1894986606),n=fe(n,r,a,s,t[10],15,-1051523),s=fe(s,n,r,a,t[1],21,-2054922799),a=fe(a,s,n,r,t[8],6,1873313359),r=fe(r,a,s,n,t[15],10,-30611744),n=fe(n,r,a,s,t[6],15,-1560198380),s=fe(s,n,r,a,t[13],21,1309151649),a=fe(a,s,n,r,t[4],6,-145523070),r=fe(r,a,s,n,t[11],10,-1120210379),n=fe(n,r,a,s,t[2],15,718787259),s=fe(s,n,r,a,t[9],21,-343485551),e[0]=we(a,e[0]),e[1]=we(s,e[1]),e[2]=we(n,e[2]),e[3]=we(r,e[3])}function ue(e,t,a,s,n,r){return t=we(we(t,e),we(s,r)),we(t<<n|t>>>32-n,a)}function he(e,t,a,s,n,r,i){return ue(t&a|~t&s,e,t,n,r,i)}function me(e,t,a,s,n,r,i){return ue(t&s|a&~s,e,t,n,r,i)}function pe(e,t,a,s,n,r,i){return ue(t^a^s,e,t,n,r,i)}function fe(e,t,a,s,n,r,i){return ue(a^(t|~s),e,t,n,r,i)}function ge(e){var t,a=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)de(s,xe(e.substring(t-64,t)));e=e.substring(t-64);var n=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)n[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(n[t>>2]|=128<<(t%4<<3),t>55)for(de(s,n),t=0;t<16;t++)n[t]=0;return n[14]=8*a,de(s,n),s}function xe(e){var t,a=[];for(t=0;t<64;t+=4)a[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return a}ie=ee.atob.bind(ee),oe=ee.btoa.bind(ee);var be="0123456789abcdef".split("");function ve(e){for(var t="",a=0;a<4;a++)t+=be[e>>8*a+4&15]+be[e>>8*a&15];return t}function ye(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function je(e){return ge(e).map(ye).join("")}var Ne="5d41402abc4b2a76b9719d911017c592"!=function(e){for(var t=0;t<e.length;t++)e[t]=ve(e[t]);return e.join("")}(ge("hello"));function we(e,t){if(Ne){var a=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(a>>16)<<16|65535&a}return e+t&4294967295}function _e(e,t){var a,s,n,r;if(e!==a){for(var i=(n=e,r=1+(256/e.length|0),new Array(r+1).join(n)),o=[],l=0;l<256;l++)o[l]=l;var c=0;for(l=0;l<256;l++){var d=o[l];c=(c+d+i.charCodeAt(l))%256,o[l]=o[c],o[c]=d}a=e,s=o}else o=s;var u=t.length,h=0,m=0,p="";for(l=0;l<u;l++)m=(m+(d=o[h=(h+1)%256]))%256,o[h]=o[m],o[m]=d,i=o[(o[h]+o[m])%256],p+=String.fromCharCode(t.charCodeAt(l)^i);return p}var Se={print:4,modify:8,copy:16,"annot-forms":32};function Ce(e,t,a,s){this.v=1,this.r=2;var n=192;e.forEach((function(e){if(void 0!==Se.perm)throw new Error("Invalid permission: "+e);n+=Se[e]})),this.padding="(\xbfN^Nu\x8aAd\0NV\xff\xfa\x01\b..\0\xb6\xd0h>\x80/\f\xa9\xfedSiz";var r=(t+this.padding).substr(0,32),i=(a+this.padding).substr(0,32);this.O=this.processOwnerPassword(r,i),this.P=-(1+(255^n)),this.encryptionKey=je(r+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=_e(this.encryptionKey,this.padding)}function ke(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",a=e.length,s=0;s<a;s++){var n=e.charCodeAt(s);t+=n<33||35===n||37===n||40===n||41===n||47===n||60===n||62===n||91===n||93===n||123===n||125===n||n>126?"#"+("0"+n.toString(16)).slice(-2):e[s]}return t}function Ae(e){if("object"!==(0,s.A)(e))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(e,a,s){if(s=s||!1,"string"!=typeof e||"function"!=typeof a||"boolean"!=typeof s)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(e)||(t[e]={});var n=Math.random().toString(35);return t[e][n]=[a,!!s],n},this.unsubscribe=function(e){for(var a in t)if(t[a][e])return delete t[a][e],0===Object.keys(t[a]).length&&delete t[a],!0;return!1},this.publish=function(a){if(t.hasOwnProperty(a)){var s=Array.prototype.slice.call(arguments,1),n=[];for(var r in t[a]){var i=t[a][r];try{i[0].apply(e,s)}catch(a){ee.console&&ae.error("jsPDF PubSub Error",a.message,a)}i[1]&&n.push(r)}n.length&&n.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Pe(e){if(!(this instanceof Pe))return new Pe(e);var t="opacity,stroke-opacity".split(",");for(var a in e)e.hasOwnProperty(a)&&t.indexOf(a)>=0&&(this[a]=e[a]);this.id="",this.objectNumber=-1}function Ee(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Le(e,t,a,s,n){if(!(this instanceof Le))return new Le(e,t,a,s,n);this.type="axial"===e?2:3,this.coords=t,this.colors=a,Ee.call(this,s,n)}function De(e,t,a,s,n){if(!(this instanceof De))return new De(e,t,a,s,n);this.boundingBox=e,this.xStep=t,this.yStep=a,this.stream="",this.cloneIndex=0,Ee.call(this,s,n)}function Oe(e){var t,a="string"==typeof arguments[0]?arguments[0]:"p",n=arguments[1],r=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;"object"===(0,s.A)(e=e||{})&&(a=e.orientation,n=e.unit||n,r=e.format||r,i=e.compress||e.compressPdf||i,null!==(u=e.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(t=e.precision),void 0!==e.floatPrecision&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(!0===i?["FlateEncode"]:o),n=n||"mm",a=(""+(a||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=Ae;var f="1.3",g=p.__private__.getPdfVersion=function(){return f};p.__private__.setPdfVersion=function(e){f=e};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return x};var b=p.__private__.getPageFormat=function(e){return x[e]};r=r||"a4";var v="compat",y="advanced",j=v;function N(){this.saveGraphicsState(),Q(new We(be,0,0,-be,0,Na()*be).toString()+" cm"),this.setFontSize(this.getFontSize()/be),d="n",j=y}function w(){this.restoreGraphicsState(),d="S",j=v}var _=p.__private__.combineFontStyleAndFontWeight=function(e,t){if("bold"==e&&"normal"==t||"bold"==e&&400==t||"normal"==e&&"italic"==t||"bold"==e&&"italic"==t)throw new Error("Invalid Combination of fontweight and fontstyle");return t&&(e=400==t||"normal"===t?"italic"===e?"italic":"normal":700!=t&&"bold"!==t||"normal"!==e?(700==t?"bold":t)+""+e:"bold"),e};p.advancedAPI=function(e){var t=j===v;return t&&N.call(this),"function"!=typeof e||(e(this),t&&w.call(this)),this},p.compatAPI=function(e){var t=j===y;return t&&w.call(this),"function"!=typeof e||(e(this),t&&N.call(this)),this},p.isAdvancedAPI=function(){return j===y};var S,C=function(e){if(j!==y)throw new Error(e+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=p.roundToPrecision=p.__private__.roundToPrecision=function(e,a){var s=t||a;if(isNaN(e)||isNaN(s))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return e.toFixed(s).replace(/0+$/,"")};S=p.hpf=p.__private__.hpf="number"==typeof c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return k(e,c)}:"smart"===c?function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return k(e,e>-1&&e<1?16:5)}:function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.hpf");return k(e,16)};var A=p.f2=p.__private__.f2=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f2");return k(e,2)},P=p.__private__.f3=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.f3");return k(e,3)},E=p.scale=p.__private__.scale=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.scale");return j===v?e*be:j===y?e:void 0},L=function(e){return E(function(e){return j===v?Na()-e:j===y?e:void 0}(e))};p.__private__.setPrecision=p.setPrecision=function(e){"number"==typeof parseInt(e,10)&&(t=parseInt(e,10))};var D,O="00000000000000000000000000000000",T=p.__private__.getFileId=function(){return O},M=p.__private__.setFileId=function(e){return O=void 0!==e&&/^[a-fA-F0-9]{32}$/.test(e)?e.toUpperCase():O.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==u&&(Dt=new Ce(u.userPermissions,u.userPassword,u.ownerPassword,O)),O};p.setFileId=function(e){return M(e),this},p.getFileId=function(){return T()};var R=p.__private__.convertDateToPDFDate=function(e){var t=e.getTimezoneOffset(),a=t<0?"+":"-",s=Math.floor(Math.abs(t/60)),n=Math.abs(t%60),r=[a,q(s),"'",q(n),"'"].join("");return["D:",e.getFullYear(),q(e.getMonth()+1),q(e.getDate()),q(e.getHours()),q(e.getMinutes()),q(e.getSeconds()),r].join("")},I=p.__private__.convertPDFDateToDate=function(e){var t=parseInt(e.substr(2,4),10),a=parseInt(e.substr(6,2),10)-1,s=parseInt(e.substr(8,2),10),n=parseInt(e.substr(10,2),10),r=parseInt(e.substr(12,2),10),i=parseInt(e.substr(14,2),10);return new Date(t,a,s,n,r,i,0)},F=p.__private__.setCreationDate=function(e){var t;if(void 0===e&&(e=new Date),e instanceof Date)t=R(e);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(e))throw new Error("Invalid argument passed to jsPDF.setCreationDate");t=e}return D=t},z=p.__private__.getCreationDate=function(e){var t=D;return"jsDate"===e&&(t=I(D)),t};p.setCreationDate=function(e){return F(e),this},p.getCreationDate=function(e){return z(e)};var B,q=p.__private__.padd2=function(e){return("0"+parseInt(e)).slice(-2)},U=p.__private__.padd2Hex=function(e){return("00"+(e=e.toString())).substr(e.length)},H=0,W=[],V=[],G=0,Y=[],$=[],X=!1,J=V;p.__private__.setCustomOutputDestination=function(e){X=!0,J=e};var K=function(e){X||(J=e)};p.__private__.resetCustomOutputDestination=function(){X=!1,J=V};var Q=p.__private__.out=function(e){return e=e.toString(),G+=e.length+1,J.push(e),J},Z=p.__private__.write=function(e){return Q(1===arguments.length?e.toString():Array.prototype.join.call(arguments," "))},te=p.__private__.getArrayBuffer=function(e){for(var t=e.length,a=new ArrayBuffer(t),s=new Uint8Array(a);t--;)s[t]=e.charCodeAt(t);return a},se=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return se};var ne=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(e){return ne=j===y?e/be:e,this};var re,ie=p.__private__.getFontSize=p.getFontSize=function(){return j===v?ne:ne*be},de=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(e){return de=e,this},p.__private__.getR2L=p.getR2L=function(){return de};var ue,he=p.__private__.setZoomMode=function(e){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(e))re=e;else if(isNaN(e)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(e))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+e+'" is not recognized.');re=e}else re=parseInt(e,10)};p.__private__.getZoomMode=function(){return re};var me,pe=p.__private__.setPageMode=function(e){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(e))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+e+'" is not recognized.');ue=e};p.__private__.getPageMode=function(){return ue};var fe=p.__private__.setLayoutMode=function(e){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(e))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+e+'" is not recognized.');me=e};p.__private__.getLayoutMode=function(){return me},p.__private__.setDisplayMode=p.setDisplayMode=function(e,t,a){return he(e),fe(t),pe(a),this};var ge={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(e){if(-1===Object.keys(ge).indexOf(e))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ge[e]},p.__private__.getDocumentProperties=function(){return ge},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(e){for(var t in ge)ge.hasOwnProperty(t)&&e[t]&&(ge[t]=e[t]);return this},p.__private__.setDocumentProperty=function(e,t){if(-1===Object.keys(ge).indexOf(e))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ge[e]=t};var xe,be,ve,ye,je,Ne={},we={},_e=[],Se={},Ee={},Te={},Me={},Re=null,Ie=0,Fe=[],ze=new Ae(p),Be=e.hotfixes||[],qe={},Ue={},He=[],We=function e(t,a,s,n,r,i){if(!(this instanceof e))return new e(t,a,s,n,r,i);isNaN(t)&&(t=1),isNaN(a)&&(a=0),isNaN(s)&&(s=0),isNaN(n)&&(n=1),isNaN(r)&&(r=0),isNaN(i)&&(i=0),this._matrix=[t,a,s,n,r,i]};Object.defineProperty(We.prototype,"sx",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(We.prototype,"shy",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(We.prototype,"shx",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(We.prototype,"sy",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(We.prototype,"tx",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(We.prototype,"ty",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(We.prototype,"a",{get:function(){return this._matrix[0]},set:function(e){this._matrix[0]=e}}),Object.defineProperty(We.prototype,"b",{get:function(){return this._matrix[1]},set:function(e){this._matrix[1]=e}}),Object.defineProperty(We.prototype,"c",{get:function(){return this._matrix[2]},set:function(e){this._matrix[2]=e}}),Object.defineProperty(We.prototype,"d",{get:function(){return this._matrix[3]},set:function(e){this._matrix[3]=e}}),Object.defineProperty(We.prototype,"e",{get:function(){return this._matrix[4]},set:function(e){this._matrix[4]=e}}),Object.defineProperty(We.prototype,"f",{get:function(){return this._matrix[5]},set:function(e){this._matrix[5]=e}}),Object.defineProperty(We.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(We.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(We.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(We.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),We.prototype.join=function(e){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(S).join(e)},We.prototype.multiply=function(e){var t=e.sx*this.sx+e.shy*this.shx,a=e.sx*this.shy+e.shy*this.sy,s=e.shx*this.sx+e.sy*this.shx,n=e.shx*this.shy+e.sy*this.sy,r=e.tx*this.sx+e.ty*this.shx+this.tx,i=e.tx*this.shy+e.ty*this.sy+this.ty;return new We(t,a,s,n,r,i)},We.prototype.decompose=function(){var e=this.sx,t=this.shy,a=this.shx,s=this.sy,n=this.tx,r=this.ty,i=Math.sqrt(e*e+t*t),o=(e/=i)*a+(t/=i)*s;a-=e*o,s-=t*o;var l=Math.sqrt(a*a+s*s);return o/=l,e*(s/=l)<t*(a/=l)&&(e=-e,t=-t,o=-o,i=-i),{scale:new We(i,0,0,l,0,0),translate:new We(1,0,0,1,n,r),rotate:new We(e,t,-t,e,0,0),skew:new We(1,0,o,1,0,0)}},We.prototype.toString=function(e){return this.join(" ")},We.prototype.inversed=function(){var e=this.sx,t=this.shy,a=this.shx,s=this.sy,n=this.tx,r=this.ty,i=1/(e*s-t*a),o=s*i,l=-t*i,c=-a*i,d=e*i;return new We(o,l,c,d,-o*n-c*r,-l*n-d*r)},We.prototype.applyToPoint=function(e){var t=e.x*this.sx+e.y*this.shx+this.tx,a=e.x*this.shy+e.y*this.sy+this.ty;return new fa(t,a)},We.prototype.applyToRectangle=function(e){var t=this.applyToPoint(e),a=this.applyToPoint(new fa(e.x+e.w,e.y+e.h));return new ga(t.x,t.y,a.x-t.x,a.y-t.y)},We.prototype.clone=function(){var e=this.sx,t=this.shy,a=this.shx,s=this.sy,n=this.tx,r=this.ty;return new We(e,t,a,s,n,r)},p.Matrix=We;var Ve=p.matrixMult=function(e,t){return t.multiply(e)},Ge=new We(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=Ge;var Ye=function(e,t){if(!Ee[e]){var a=(t instanceof Le?"Sh":"P")+(Object.keys(Se).length+1).toString(10);t.id=a,Ee[e]=a,Se[a]=t,ze.publish("addPattern",t)}};p.ShadingPattern=Le,p.TilingPattern=De,p.addShadingPattern=function(e,t){return C("addShadingPattern()"),Ye(e,t),this},p.beginTilingPattern=function(e){C("beginTilingPattern()"),ba(e.boundingBox[0],e.boundingBox[1],e.boundingBox[2]-e.boundingBox[0],e.boundingBox[3]-e.boundingBox[1],e.matrix)},p.endTilingPattern=function(e,t){C("endTilingPattern()"),t.stream=$[B].join("\n"),Ye(e,t),ze.publish("endTilingPattern",t),He.pop().restore()};var $e,Xe=p.__private__.newObject=function(){var e=Je();return Ke(e,!0),e},Je=p.__private__.newObjectDeferred=function(){return H++,W[H]=function(){return G},H},Ke=function(e,t){return t="boolean"==typeof t&&t,W[e]=G,t&&Q(e+" 0 obj"),e},Qe=p.__private__.newAdditionalObject=function(){var e={objId:Je(),content:""};return Y.push(e),e},Ze=Je(),et=Je(),tt=p.__private__.decodeColorString=function(e){var t=e.split(" ");if(2!==t.length||"g"!==t[1]&&"G"!==t[1])5!==t.length||"k"!==t[4]&&"K"!==t[4]||(t=[(1-t[0])*(1-t[3]),(1-t[1])*(1-t[3]),(1-t[2])*(1-t[3]),"r"]);else{var a=parseFloat(t[0]);t=[a,a,a,"r"]}for(var s="#",n=0;n<3;n++)s+=("0"+Math.floor(255*parseFloat(t[n])).toString(16)).slice(-2);return s},at=p.__private__.encodeColorString=function(e){var t;"string"==typeof e&&(e={ch1:e});var a=e.ch1,n=e.ch2,r=e.ch3,i=e.ch4,o="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof a&&"#"!==a.charAt(0)){var l=new ce(a);if(l.ok)a=l.toHex();else if(!/^\d*\.?\d*$/.test(a))throw new Error('Invalid color "'+a+'" passed to jsPDF.encodeColorString.')}if("string"==typeof a&&/^#[0-9A-Fa-f]{3}$/.test(a)&&(a="#"+a[1]+a[1]+a[2]+a[2]+a[3]+a[3]),"string"==typeof a&&/^#[0-9A-Fa-f]{6}$/.test(a)){var c=parseInt(a.substr(1),16);a=c>>16&255,n=c>>8&255,r=255&c}if(void 0===n||void 0===i&&a===n&&n===r)if("string"==typeof a)t=a+" "+o[0];else if(2===e.precision)t=A(a/255)+" "+o[0];else t=P(a/255)+" "+o[0];else if(void 0===i||"object"===(0,s.A)(i)){if(i&&!isNaN(i.a)&&0===i.a)return["1.","1.","1.",o[1]].join(" ");if("string"==typeof a)t=[a,n,r,o[1]].join(" ");else if(2===e.precision)t=[A(a/255),A(n/255),A(r/255),o[1]].join(" ");else t=[P(a/255),P(n/255),P(r/255),o[1]].join(" ")}else if("string"==typeof a)t=[a,n,r,i,o[2]].join(" ");else if(2===e.precision)t=[A(a),A(n),A(r),A(i),o[2]].join(" ");else t=[P(a),P(n),P(r),P(i),o[2]].join(" ");return t},st=p.__private__.getFilters=function(){return o},nt=p.__private__.putStream=function(e){var t=(e=e||{}).data||"",a=e.filters||st(),s=e.alreadyAppliedFilters||[],n=e.addLength1||!1,r=t.length,i=e.objectId,o=function(e){return e};if(null!==u&&void 0===i)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(o=Dt.encryptor(i,0));var l={};!0===a&&(a=["FlateEncode"]);var c=e.additionalKeyValues||[],d=(l=void 0!==Oe.API.processDataByFilters?Oe.API.processDataByFilters(t,a):{data:t,reverseChain:[]}).reverseChain+(Array.isArray(s)?s.join(" "):s.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===n&&c.push({key:"Length1",value:r})),0!=d.length)if(d.split("/").length-1==1)c.push({key:"Filter",value:d});else{c.push({key:"Filter",value:"["+d+"]"});for(var h=0;h<c.length;h+=1)if("DecodeParms"===c[h].key){for(var m=[],p=0;p<l.reverseChain.split("/").length-1;p+=1)m.push("null");m.push(c[h].value),c[h].value="["+m.join(" ")+"]"}}Q("<<");for(var f=0;f<c.length;f++)Q("/"+c[f].key+" "+c[f].value);Q(">>"),0!==l.data.length&&(Q("stream"),Q(o(l.data)),Q("endstream"))},rt=p.__private__.putPage=function(e){var t=e.number,a=e.data,s=e.objId,n=e.contentsObjId;Ke(s,!0),Q("<</Type /Page"),Q("/Parent "+e.rootDictionaryObjId+" 0 R"),Q("/Resources "+e.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(S(e.mediaBox.bottomLeftX))+" "+parseFloat(S(e.mediaBox.bottomLeftY))+" "+S(e.mediaBox.topRightX)+" "+S(e.mediaBox.topRightY)+"]"),null!==e.cropBox&&Q("/CropBox ["+S(e.cropBox.bottomLeftX)+" "+S(e.cropBox.bottomLeftY)+" "+S(e.cropBox.topRightX)+" "+S(e.cropBox.topRightY)+"]"),null!==e.bleedBox&&Q("/BleedBox ["+S(e.bleedBox.bottomLeftX)+" "+S(e.bleedBox.bottomLeftY)+" "+S(e.bleedBox.topRightX)+" "+S(e.bleedBox.topRightY)+"]"),null!==e.trimBox&&Q("/TrimBox ["+S(e.trimBox.bottomLeftX)+" "+S(e.trimBox.bottomLeftY)+" "+S(e.trimBox.topRightX)+" "+S(e.trimBox.topRightY)+"]"),null!==e.artBox&&Q("/ArtBox ["+S(e.artBox.bottomLeftX)+" "+S(e.artBox.bottomLeftY)+" "+S(e.artBox.topRightX)+" "+S(e.artBox.topRightY)+"]"),"number"==typeof e.userUnit&&1!==e.userUnit&&Q("/UserUnit "+e.userUnit),ze.publish("putPage",{objId:s,pageContext:Fe[t],pageNumber:t,page:a}),Q("/Contents "+n+" 0 R"),Q(">>"),Q("endobj");var r=a.join("\n");return j===y&&(r+="\nQ"),Ke(n,!0),nt({data:r,filters:st(),objectId:n}),Q("endobj"),s},it=p.__private__.putPages=function(){var e,t,a=[];for(e=1;e<=Ie;e++)Fe[e].objId=Je(),Fe[e].contentsObjId=Je();for(e=1;e<=Ie;e++)a.push(rt({number:e,data:$[e],objId:Fe[e].objId,contentsObjId:Fe[e].contentsObjId,mediaBox:Fe[e].mediaBox,cropBox:Fe[e].cropBox,bleedBox:Fe[e].bleedBox,trimBox:Fe[e].trimBox,artBox:Fe[e].artBox,userUnit:Fe[e].userUnit,rootDictionaryObjId:Ze,resourceDictionaryObjId:et}));Ke(Ze,!0),Q("<</Type /Pages");var s="/Kids [";for(t=0;t<Ie;t++)s+=a[t]+" 0 R ";Q(s+"]"),Q("/Count "+Ie),Q(">>"),Q("endobj"),ze.publish("postPutPages")},ot=function(e){ze.publish("putFont",{font:e,out:Q,newObject:Xe,putStream:nt}),!0!==e.isAlreadyPutted&&(e.objectNumber=Xe(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+ke(e.postScriptName)),Q("/Subtype /Type1"),"string"==typeof e.encoding&&Q("/Encoding /"+e.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},lt=function(e){e.objectNumber=Xe();var t=[];t.push({key:"Type",value:"/XObject"}),t.push({key:"Subtype",value:"/Form"}),t.push({key:"BBox",value:"["+[S(e.x),S(e.y),S(e.x+e.width),S(e.y+e.height)].join(" ")+"]"}),t.push({key:"Matrix",value:"["+e.matrix.toString()+"]"});var a=e.pages[1].join("\n");nt({data:a,additionalKeyValues:t,objectId:e.objectNumber}),Q("endobj")},ct=function(e,t){t||(t=21);var a=Xe(),s=function(e,t){var a,s=[],n=1/(t-1);for(a=0;a<1;a+=n)s.push(a);if(s.push(1),0!=e[0].offset){var r={offset:0,color:e[0].color};e.unshift(r)}if(1!=e[e.length-1].offset){var i={offset:1,color:e[e.length-1].color};e.push(i)}for(var o="",l=0,c=0;c<s.length;c++){for(a=s[c];a>e[l+1].offset;)l++;var d=e[l].offset,u=(a-d)/(e[l+1].offset-d),h=e[l].color,m=e[l+1].color;o+=U(Math.round((1-u)*h[0]+u*m[0]).toString(16))+U(Math.round((1-u)*h[1]+u*m[1]).toString(16))+U(Math.round((1-u)*h[2]+u*m[2]).toString(16))}return o.trim()}(e.colors,t),n=[];n.push({key:"FunctionType",value:"0"}),n.push({key:"Domain",value:"[0.0 1.0]"}),n.push({key:"Size",value:"["+t+"]"}),n.push({key:"BitsPerSample",value:"8"}),n.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),n.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),nt({data:s,additionalKeyValues:n,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:a}),Q("endobj"),e.objectNumber=Xe(),Q("<< /ShadingType "+e.type),Q("/ColorSpace /DeviceRGB");var r="/Coords ["+S(parseFloat(e.coords[0]))+" "+S(parseFloat(e.coords[1]))+" ";2===e.type?r+=S(parseFloat(e.coords[2]))+" "+S(parseFloat(e.coords[3])):r+=S(parseFloat(e.coords[2]))+" "+S(parseFloat(e.coords[3]))+" "+S(parseFloat(e.coords[4]))+" "+S(parseFloat(e.coords[5])),Q(r+="]"),e.matrix&&Q("/Matrix ["+e.matrix.toString()+"]"),Q("/Function "+a+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},dt=function(e,t){var a=Je(),s=Xe();t.push({resourcesOid:a,objectOid:s}),e.objectNumber=s;var n=[];n.push({key:"Type",value:"/Pattern"}),n.push({key:"PatternType",value:"1"}),n.push({key:"PaintType",value:"1"}),n.push({key:"TilingType",value:"1"}),n.push({key:"BBox",value:"["+e.boundingBox.map(S).join(" ")+"]"}),n.push({key:"XStep",value:S(e.xStep)}),n.push({key:"YStep",value:S(e.yStep)}),n.push({key:"Resources",value:a+" 0 R"}),e.matrix&&n.push({key:"Matrix",value:"["+e.matrix.toString()+"]"}),nt({data:e.stream,additionalKeyValues:n,objectId:e.objectNumber}),Q("endobj")},ut=function(e){for(var t in e.objectNumber=Xe(),Q("<<"),e)switch(t){case"opacity":Q("/ca "+A(e[t]));break;case"stroke-opacity":Q("/CA "+A(e[t]))}Q(">>"),Q("endobj")},ht=function(e){Ke(e.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var e in Q("/Font <<"),Ne)Ne.hasOwnProperty(e)&&(!1===h||!0===h&&m.hasOwnProperty(e))&&Q("/"+e+" "+Ne[e].objectNumber+" 0 R");Q(">>")}(),function(){if(Object.keys(Se).length>0){for(var e in Q("/Shading <<"),Se)Se.hasOwnProperty(e)&&Se[e]instanceof Le&&Se[e].objectNumber>=0&&Q("/"+e+" "+Se[e].objectNumber+" 0 R");ze.publish("putShadingPatternDict"),Q(">>")}}(),function(e){if(Object.keys(Se).length>0){for(var t in Q("/Pattern <<"),Se)Se.hasOwnProperty(t)&&Se[t]instanceof p.TilingPattern&&Se[t].objectNumber>=0&&Se[t].objectNumber<e&&Q("/"+t+" "+Se[t].objectNumber+" 0 R");ze.publish("putTilingPatternDict"),Q(">>")}}(e.objectOid),function(){if(Object.keys(Te).length>0){var e;for(e in Q("/ExtGState <<"),Te)Te.hasOwnProperty(e)&&Te[e].objectNumber>=0&&Q("/"+e+" "+Te[e].objectNumber+" 0 R");ze.publish("putGStateDict"),Q(">>")}}(),function(){for(var e in Q("/XObject <<"),qe)qe.hasOwnProperty(e)&&qe[e].objectNumber>=0&&Q("/"+e+" "+qe[e].objectNumber+" 0 R");ze.publish("putXobjectDict"),Q(">>")}(),Q(">>"),Q("endobj")},mt=function(){var e=[];(function(){for(var e in Ne)Ne.hasOwnProperty(e)&&(!1===h||!0===h&&m.hasOwnProperty(e))&&ot(Ne[e])})(),function(){var e;for(e in Te)Te.hasOwnProperty(e)&&ut(Te[e])}(),function(){for(var e in qe)qe.hasOwnProperty(e)&&lt(qe[e])}(),function(e){var t;for(t in Se)Se.hasOwnProperty(t)&&(Se[t]instanceof Le?ct(Se[t]):Se[t]instanceof De&&dt(Se[t],e))}(e),ze.publish("putResources"),e.forEach(ht),ht({resourcesOid:et,objectOid:Number.MAX_SAFE_INTEGER}),ze.publish("postPutResources")},pt=function(e){we[e.fontName]=we[e.fontName]||{},we[e.fontName][e.fontStyle]=e.id},ft=function(e,t,a,s,n){var r={id:"F"+(Object.keys(Ne).length+1).toString(10),postScriptName:e,fontName:t,fontStyle:a,encoding:s,isStandardFont:n||!1,metadata:{}};return ze.publish("addFont",{font:r,instance:this}),Ne[r.id]=r,pt(r),r.id},gt=p.__private__.pdfEscape=p.pdfEscape=function(e,t){return function(e,t){var a,s,n,r,i,o,l,c,d;if(n=(t=t||{}).sourceEncoding||"Unicode",i=t.outputEncoding,(t.autoencode||i)&&Ne[xe].metadata&&Ne[xe].metadata[n]&&Ne[xe].metadata[n].encoding&&(r=Ne[xe].metadata[n].encoding,!i&&Ne[xe].encoding&&(i=Ne[xe].encoding),!i&&r.codePages&&(i=r.codePages[0]),"string"==typeof i&&(i=r[i]),i)){for(l=!1,o=[],a=0,s=e.length;a<s;a++)(c=i[e.charCodeAt(a)])?o.push(String.fromCharCode(c)):o.push(e[a]),o[a].charCodeAt(0)>>8&&(l=!0);e=o.join("")}for(a=e.length;void 0===l&&0!==a;)e.charCodeAt(a-1)>>8&&(l=!0),a--;if(!l)return e;for(o=t.noBOM?[]:[254,255],a=0,s=e.length;a<s;a++){if((d=(c=e.charCodeAt(a))>>8)>>8)throw new Error("Character at position "+a+" of string '"+e+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");o.push(d),o.push(c-(d<<8))}return String.fromCharCode.apply(void 0,o)}(e,t).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xt=p.__private__.beginPage=function(e){$[++Ie]=[],Fe[Ie]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(e[0]),topRightY:Number(e[1])}},yt(Ie),K($[B])},bt=function(e,t){var s,n,i;switch(a=t||a,"string"==typeof e&&(s=b(e.toLowerCase()),Array.isArray(s)&&(n=s[0],i=s[1])),Array.isArray(e)&&(n=e[0]*be,i=e[1]*be),isNaN(n)&&(n=r[0],i=r[1]),(n>14400||i>14400)&&(ae.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),n=Math.min(14400,n),i=Math.min(14400,i)),r=[n,i],a.substr(0,1)){case"l":i>n&&(r=[i,n]);break;case"p":n>i&&(r=[i,n])}xt(r),Qt(Jt),Q(ia),0!==ha&&Q(ha+" J"),0!==ma&&Q(ma+" j"),ze.publish("addPage",{pageNumber:Ie})},vt=function(e){e>0&&e<=Ie&&($.splice(e,1),Fe.splice(e,1),Ie--,B>Ie&&(B=Ie),this.setPage(B))},yt=function(e){e>0&&e<=Ie&&(B=e)},jt=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return $.length-1},Nt=function(e,t,a){var s,n=void 0;return a=a||{},e=void 0!==e?e:Ne[xe].fontName,t=void 0!==t?t:Ne[xe].fontStyle,s=e.toLowerCase(),void 0!==we[s]&&void 0!==we[s][t]?n=we[s][t]:void 0!==we[e]&&void 0!==we[e][t]?n=we[e][t]:!1===a.disableWarning&&ae.warn("Unable to look up font label for font '"+e+"', '"+t+"'. Refer to getFontList() for available fonts."),n||a.noFallback||null==(n=we.times[t])&&(n=we.times.normal),n},wt=p.__private__.putInfo=function(){var e=Xe(),t=function(e){return e};for(var a in null!==u&&(t=Dt.encryptor(e,0)),Q("<<"),Q("/Producer ("+gt(t("jsPDF "+Oe.version))+")"),ge)ge.hasOwnProperty(a)&&ge[a]&&Q("/"+a.substr(0,1).toUpperCase()+a.substr(1)+" ("+gt(t(ge[a]))+")");Q("/CreationDate ("+gt(t(D))+")"),Q(">>"),Q("endobj")},_t=p.__private__.putCatalog=function(e){var t=(e=e||{}).rootDictionaryObjId||Ze;switch(Xe(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+t+" 0 R"),re||(re="fullwidth"),re){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var a=""+re;"%"===a.substr(a.length-1)&&(re=parseInt(re)/100),"number"==typeof re&&Q("/OpenAction [3 0 R /XYZ null null "+A(re)+"]")}switch(me||(me="continuous"),me){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}ue&&Q("/PageMode /"+ue),ze.publish("putCatalog"),Q(">>"),Q("endobj")},St=p.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(H+1)),Q("/Root "+H+" 0 R"),Q("/Info "+(H-1)+" 0 R"),null!==u&&Q("/Encrypt "+Dt.oid+" 0 R"),Q("/ID [ <"+O+"> <"+O+"> ]"),Q(">>")},Ct=p.__private__.putHeader=function(){Q("%PDF-"+f),Q("%\xba\xdf\xac\xe0")},kt=p.__private__.putXRef=function(){var e="0000000000";Q("xref"),Q("0 "+(H+1)),Q("0000000000 65535 f ");for(var t=1;t<=H;t++)"function"==typeof W[t]?Q((e+W[t]()).slice(-10)+" 00000 n "):void 0!==W[t]?Q((e+W[t]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},At=p.__private__.buildDocument=function(){H=0,G=0,V=[],W=[],Y=[],Ze=Je(),et=Je(),K(V),ze.publish("buildDocument"),Ct(),it(),function(){ze.publish("putAdditionalObjects");for(var e=0;e<Y.length;e++){var t=Y[e];Ke(t.objId,!0),Q(t.content),Q("endobj")}ze.publish("postPutAdditionalObjects")}(),mt(),null!==u&&(Dt.oid=Xe(),Q("<<"),Q("/Filter /Standard"),Q("/V "+Dt.v),Q("/R "+Dt.r),Q("/U <"+Dt.toHexString(Dt.U)+">"),Q("/O <"+Dt.toHexString(Dt.O)+">"),Q("/P "+Dt.P),Q(">>"),Q("endobj")),wt(),_t();var e=G;return kt(),St(),Q("startxref"),Q(""+e),Q("%%EOF"),K($[B]),V.join("\n")},Pt=p.__private__.getBlob=function(e){return new Blob([te(e)],{type:"application/pdf"})},Et=p.output=p.__private__.output=($e=function(e,t){switch("string"==typeof(t=t||{})?t={filename:t}:t.filename=t.filename||"generated.pdf",e){case void 0:return At();case"save":p.save(t.filename);break;case"arraybuffer":return te(At());case"blob":return Pt(At());case"bloburi":case"bloburl":if(void 0!==ee.URL&&"function"==typeof ee.URL.createObjectURL)return ee.URL&&ee.URL.createObjectURL(Pt(At()))||void 0;ae.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var a="",s=At();try{a=oe(s)}catch(e){a=oe(unescape(encodeURIComponent(s)))}return"data:application/pdf;filename="+t.filename+";base64,"+a;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(ee)){var n="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",r=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';t.pdfObjectUrl&&(n=t.pdfObjectUrl,r="");var i='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+n+'"'+r+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(t)+");<\/script></body></html>",o=ee.open();return null!==o&&o.document.write(i),o}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(ee)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(t.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+t.filename+'" width="500px" height="400px" /></body></html>',c=ee.open();if(null!==c){c.document.write(l);var d=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=t.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(d.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(ee))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",t)+'"></iframe></body></html>',h=ee.open();if(null!==h&&(h.document.write(u),h.document.title=t.filename),h||"undefined"==typeof safari)return h;break;case"datauri":case"dataurl":return ee.document.location.href=this.output("datauristring",t);default:return null}},$e.foo=function(){try{return $e.apply(this,arguments)}catch($e){var e=$e.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var t="Error in function "+e.split("\n")[0].split("<")[0]+": "+$e.message;if(!ee.console)throw new Error(t);ee.console.error(t,$e),ee.alert&&alert(t)}},$e.foo.bar=$e,$e.foo),Lt=function(e){return!0===Array.isArray(Be)&&Be.indexOf(e)>-1};switch(n){case"pt":be=1;break;case"mm":be=72/25.4;break;case"cm":be=72/2.54;break;case"in":be=72;break;case"px":be=1==Lt("px_scaling")?.75:96/72;break;case"pc":case"em":be=12;break;case"ex":be=6;break;default:if("number"!=typeof n)throw new Error("Invalid unit: "+n);be=n}var Dt=null;F(),M();var Ot=p.__private__.getPageInfo=p.getPageInfo=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Fe[e].objId,pageNumber:e,pageContext:Fe[e]}},Tt=p.__private__.getPageInfoByObjId=function(e){if(isNaN(e)||e%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var t in Fe)if(Fe[t].objId===e)break;return Ot(t)},Mt=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Fe[B].objId,pageNumber:B,pageContext:Fe[B]}};p.addPage=function(){return bt.apply(this,arguments),this},p.setPage=function(){return yt.apply(this,arguments),K.call(this,$[B]),this},p.insertPage=function(e){return this.addPage(),this.movePage(B,e),this},p.movePage=function(e,t){var a,s;if(e>t){a=$[e],s=Fe[e];for(var n=e;n>t;n--)$[n]=$[n-1],Fe[n]=Fe[n-1];$[t]=a,Fe[t]=s,this.setPage(t)}else if(e<t){a=$[e],s=Fe[e];for(var r=e;r<t;r++)$[r]=$[r+1],Fe[r]=Fe[r+1];$[t]=a,Fe[t]=s,this.setPage(t)}return this},p.deletePage=function(){return vt.apply(this,arguments),this},p.__private__.text=p.text=function(e,t,a,n,r){var i,o,l,c,d,u,h,p,f,g=(n=n||{}).scope||this;if("number"==typeof e&&"number"==typeof t&&("string"==typeof a||Array.isArray(a))){var x=a;a=t,t=e,e=x}if(arguments[3]instanceof We==0?(l=arguments[4],c=arguments[5],"object"===(0,s.A)(h=arguments[3])&&null!==h||("string"==typeof l&&(c=l,l=null),"string"==typeof h&&(c=h,h=null),"number"==typeof h&&(l=h,h=null),n={flags:h,angle:l,align:c})):(C("The transform parameter of text() with a Matrix value"),f=r),isNaN(t)||isNaN(a)||null==e)throw new Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return g;var b,v="",N="number"==typeof n.lineHeightFactor?n.lineHeightFactor:Xt,w=g.internal.scaleFactor;function _(e){return e=e.split("\t").join(Array(n.TabLen||9).join(" ")),gt(e,h)}function k(e){for(var t,a=e.concat(),s=[],n=a.length;n--;)"string"==typeof(t=a.shift())?s.push(t):Array.isArray(e)&&(1===t.length||void 0===t[1]&&void 0===t[2])?s.push(t[0]):s.push([t[0],t[1],t[2]]);return s}function A(e,t){var a;if("string"==typeof e)a=t(e)[0];else if(Array.isArray(e)){for(var s,n,r=e.concat(),i=[],o=r.length;o--;)"string"==typeof(s=r.shift())?i.push(t(s)[0]):Array.isArray(s)&&"string"==typeof s[0]&&(n=t(s[0],s[1],s[2]),i.push([n[0],n[1],n[2]]));a=i}return a}var P=!1,L=!0;if("string"==typeof e)P=!0;else if(Array.isArray(e)){var D=e.concat();o=[];for(var O,T=D.length;T--;)("string"!=typeof(O=D.shift())||Array.isArray(O)&&"string"!=typeof O[0])&&(L=!1);P=L}if(!1===P)throw new Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var M=ne/g.internal.scaleFactor,R=M*(N-1);switch(n.baseline){case"bottom":a-=R;break;case"top":a+=M-R;break;case"hanging":a+=M-2*R;break;case"middle":a+=M/2-R}if((u=n.maxWidth||0)>0&&("string"==typeof e?e=g.splitTextToSize(e,u):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(g.splitTextToSize(t,u))}),[]))),i={text:e,x:t,y:a,options:n,mutex:{pdfEscape:gt,activeFontKey:xe,fonts:Ne,activeFontSize:ne}},ze.publish("preProcessText",i),e=i.text,l=(n=i.options).angle,f instanceof We==0&&l&&"number"==typeof l){l*=Math.PI/180,0===n.rotationDirection&&(l=-l),j===y&&(l=-l);var I=Math.cos(l),F=Math.sin(l);f=new We(I,F,-F,I,0,0)}else l&&l instanceof We&&(f=l);j!==y||f||(f=Ge),void 0!==(d=n.charSpace||da)&&(v+=S(E(d))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(p=n.horizontalScale)&&(v+=S(100*p)+" Tz\n"),n.lang;var z=-1,B=void 0!==n.renderingMode?n.renderingMode:n.stroke,q=g.internal.getCurrentPageInfo().pageContext;switch(B){case 0:case!1:case"fill":z=0;break;case 1:case!0:case"stroke":z=1;break;case 2:case"fillThenStroke":z=2;break;case 3:case"invisible":z=3;break;case 4:case"fillAndAddForClipping":z=4;break;case 5:case"strokeAndAddPathForClipping":z=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":z=6;break;case 7:case"addToPathForClipping":z=7}var U=void 0!==q.usedRenderingMode?q.usedRenderingMode:-1;-1!==z?v+=z+" Tr\n":-1!==U&&(v+="0 Tr\n"),-1!==z&&(q.usedRenderingMode=z),c=n.align||"left";var H,W=ne*N,V=g.internal.pageSize.getWidth(),G=Ne[xe];d=n.charSpace||da,u=n.maxWidth||0,h=Object.assign({autoencode:!0,noBOM:!0},n.flags);var Y=[],$=function(e){return g.getStringUnitWidth(e,{font:G,charSpace:d,fontSize:ne,doKerning:!1})*ne/w};if("[object Array]"===Object.prototype.toString.call(e)){var X;o=k(e),"left"!==c&&(H=o.map($));var J,K=0;if("right"===c){t-=H[0],e=[],T=o.length;for(var Z=0;Z<T;Z++)0===Z?(J=aa(t),X=sa(a)):(J=E(K-H[Z]),X=-W),e.push([o[Z],J,X]),K=H[Z]}else if("center"===c){t-=H[0]/2,e=[],T=o.length;for(var ee=0;ee<T;ee++)0===ee?(J=aa(t),X=sa(a)):(J=E((K-H[ee])/2),X=-W),e.push([o[ee],J,X]),K=H[ee]}else if("left"===c){e=[],T=o.length;for(var te=0;te<T;te++)e.push(o[te])}else if("justify"===c&&"Identity-H"===G.encoding){e=[],T=o.length,u=0!==u?u:V;for(var ae=0,se=0;se<T;se++)if(X=0===se?sa(a):-W,J=0===se?aa(t):ae,se<T-1){var re=E((u-H[se])/(o[se].split(" ").length-1)),ie=o[se].split(" ");e.push([ie[0]+" ",J,X]),ae=0;for(var oe=1;oe<ie.length;oe++){var le=($(ie[oe-1]+" "+ie[oe])-$(ie[oe]))*w+re;oe==ie.length-1?e.push([ie[oe],le,0]):e.push([ie[oe]+" ",le,0]),ae-=le}}else e.push([o[se],J,X]);e.push(["",ae,0])}else{if("justify"!==c)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(e=[],T=o.length,u=0!==u?u:V,se=0;se<T;se++)X=0===se?sa(a):-W,J=0===se?aa(t):0,se<T-1?Y.push(S(E((u-H[se])/(o[se].split(" ").length-1)))):Y.push(0),e.push([o[se],J,X])}}!0===("boolean"==typeof n.R2L?n.R2L:de)&&(e=A(e,(function(e,t,a){return[e.split("").reverse().join(""),t,a]}))),i={text:e,x:t,y:a,options:n,mutex:{pdfEscape:gt,activeFontKey:xe,fonts:Ne,activeFontSize:ne}},ze.publish("postProcessText",i),e=i.text,b=i.mutex.isHex||!1;var ce=Ne[xe].encoding;"WinAnsiEncoding"!==ce&&"StandardEncoding"!==ce||(e=A(e,(function(e,t,a){return[_(e),t,a]}))),o=k(e),e=[];for(var ue,he,me,pe=Array.isArray(o[0])?1:0,fe="",ge=function(e,t,a){var s="";return a instanceof We?(a="number"==typeof n.angle?Ve(a,new We(1,0,0,1,e,t)):Ve(new We(1,0,0,1,e,t),a),j===y&&(a=Ve(new We(1,0,0,-1,0,0),a)),s=a.join(" ")+" Tm\n"):s=S(e)+" "+S(t)+" Td\n",s},be=0;be<o.length;be++){switch(fe="",pe){case 1:me=(b?"<":"(")+o[be][0]+(b?">":")"),ue=parseFloat(o[be][1]),he=parseFloat(o[be][2]);break;case 0:me=(b?"<":"(")+o[be]+(b?">":")"),ue=aa(t),he=sa(a)}void 0!==Y&&void 0!==Y[be]&&(fe=Y[be]+" Tw\n"),0===be?e.push(fe+ge(ue,he,f)+me):0===pe?e.push(fe+me):1===pe&&e.push(fe+ge(ue,he,f)+me)}e=0===pe?e.join(" Tj\nT* "):e.join(" Tj\n"),e+=" Tj\n";var ve="BT\n/";return ve+=xe+" "+ne+" Tf\n",ve+=S(ne*N)+" TL\n",ve+=la+"\n",ve+=v,ve+=e,Q(ve+="ET"),m[xe]=!0,g};var Rt=p.__private__.clip=p.clip=function(e){return Q("evenodd"===e?"W*":"W"),this};p.clipEvenOdd=function(){return Rt("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Q("n"),this};var It=p.__private__.isValidStyle=function(e){var t=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(e)&&(t=!0),t};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(e){return It(e)&&(d=e),this};var Ft=p.__private__.getStyle=p.getStyle=function(e){var t=d;switch(e){case"D":case"S":t="S";break;case"F":t="f";break;case"FD":case"DF":t="B";break;case"f":case"f*":case"B":case"B*":t=e}return t},zt=p.close=function(){return Q("h"),this};p.stroke=function(){return Q("S"),this},p.fill=function(e){return Bt("f",e),this},p.fillEvenOdd=function(e){return Bt("f*",e),this},p.fillStroke=function(e){return Bt("B",e),this},p.fillStrokeEvenOdd=function(e){return Bt("B*",e),this};var Bt=function(e,t){"object"===(0,s.A)(t)?Ht(t,e):Q(e)},qt=function(e){null===e||j===y&&void 0===e||(e=Ft(e),Q(e))};function Ut(e,t,a,s,n){var r=new De(t||this.boundingBox,a||this.xStep,s||this.yStep,this.gState,n||this.matrix);r.stream=this.stream;var i=e+"$$"+this.cloneIndex+++"$$";return Ye(i,r),r}var Ht=function(e,t){var a=Ee[e.key],s=Se[a];if(s instanceof Le)Q("q"),Q(Wt(t)),s.gState&&p.setGState(s.gState),Q(e.matrix.toString()+" cm"),Q("/"+a+" sh"),Q("Q");else if(s instanceof De){var n=new We(1,0,0,-1,0,Na());e.matrix&&(n=n.multiply(e.matrix||Ge),a=Ut.call(s,e.key,e.boundingBox,e.xStep,e.yStep,n).id),Q("q"),Q("/Pattern cs"),Q("/"+a+" scn"),s.gState&&p.setGState(s.gState),Q(t),Q("Q")}},Wt=function(e){switch(e){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Vt=p.moveTo=function(e,t){return Q(S(E(e))+" "+S(L(t))+" m"),this},Gt=p.lineTo=function(e,t){return Q(S(E(e))+" "+S(L(t))+" l"),this},Yt=p.curveTo=function(e,t,a,s,n,r){return Q([S(E(e)),S(L(t)),S(E(a)),S(L(s)),S(E(n)),S(L(r)),"c"].join(" ")),this};p.__private__.line=p.line=function(e,t,a,s,n){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(s)||!It(n))throw new Error("Invalid arguments passed to jsPDF.line");return j===v?this.lines([[a-e,s-t]],e,t,[1,1],n||"S"):this.lines([[a-e,s-t]],e,t,[1,1]).stroke()},p.__private__.lines=p.lines=function(e,t,a,s,n,r){var i,o,l,c,d,u,h,m,p,f,g,x;if("number"==typeof e&&(x=a,a=t,t=e,e=x),s=s||[1,1],r=r||!1,isNaN(t)||isNaN(a)||!Array.isArray(e)||!Array.isArray(s)||!It(n)||"boolean"!=typeof r)throw new Error("Invalid arguments passed to jsPDF.lines");for(Vt(t,a),i=s[0],o=s[1],c=e.length,f=t,g=a,l=0;l<c;l++)2===(d=e[l]).length?(f=d[0]*i+f,g=d[1]*o+g,Gt(f,g)):(u=d[0]*i+f,h=d[1]*o+g,m=d[2]*i+f,p=d[3]*o+g,f=d[4]*i+f,g=d[5]*o+g,Yt(u,h,m,p,f,g));return r&&zt(),qt(n),this},p.path=function(e){for(var t=0;t<e.length;t++){var a=e[t],s=a.c;switch(a.op){case"m":Vt(s[0],s[1]);break;case"l":Gt(s[0],s[1]);break;case"c":Yt.apply(this,s);break;case"h":zt()}}return this},p.__private__.rect=p.rect=function(e,t,a,s,n){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(s)||!It(n))throw new Error("Invalid arguments passed to jsPDF.rect");return j===v&&(s=-s),Q([S(E(e)),S(L(t)),S(E(a)),S(E(s)),"re"].join(" ")),qt(n),this},p.__private__.triangle=p.triangle=function(e,t,a,s,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(s)||isNaN(n)||isNaN(r)||!It(i))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[a-e,s-t],[n-a,r-s],[e-n,t-r]],e,t,[1,1],i,!0),this},p.__private__.roundedRect=p.roundedRect=function(e,t,a,s,n,r,i){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(s)||isNaN(n)||isNaN(r)||!It(i))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var o=4/3*(Math.SQRT2-1);return n=Math.min(n,.5*a),r=Math.min(r,.5*s),this.lines([[a-2*n,0],[n*o,0,n,r-r*o,n,r],[0,s-2*r],[0,r*o,-n*o,r,-n,r],[2*n-a,0],[-n*o,0,-n,-r*o,-n,-r],[0,2*r-s],[0,-r*o,n*o,-r,n,-r]],e+n,t,[1,1],i,!0),this},p.__private__.ellipse=p.ellipse=function(e,t,a,s,n){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(s)||!It(n))throw new Error("Invalid arguments passed to jsPDF.ellipse");var r=4/3*(Math.SQRT2-1)*a,i=4/3*(Math.SQRT2-1)*s;return Vt(e+a,t),Yt(e+a,t-i,e+r,t-s,e,t-s),Yt(e-r,t-s,e-a,t-i,e-a,t),Yt(e-a,t+i,e-r,t+s,e,t+s),Yt(e+r,t+s,e+a,t+i,e+a,t),qt(n),this},p.__private__.circle=p.circle=function(e,t,a,s){if(isNaN(e)||isNaN(t)||isNaN(a)||!It(s))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(e,t,a,a,s)},p.setFont=function(e,t,a){return a&&(t=_(t,a)),xe=Nt(e,t,{disableWarning:!1}),this};var $t=p.__private__.getFont=p.getFont=function(){return Ne[Nt.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var e,t,a={};for(e in we)if(we.hasOwnProperty(e))for(t in a[e]=[],we[e])we[e].hasOwnProperty(t)&&a[e].push(t);return a},p.addFont=function(e,t,a,s,n){var r=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==r.indexOf(arguments[3])?n=arguments[3]:arguments[3]&&-1==r.indexOf(arguments[3])&&(a=_(a,s)),ft.call(this,e,t,a,n=n||"Identity-H")};var Xt,Jt=e.lineWidth||.200025,Kt=p.__private__.getLineWidth=p.getLineWidth=function(){return Jt},Qt=p.__private__.setLineWidth=p.setLineWidth=function(e){return Jt=e,Q(S(E(e))+" w"),this};p.__private__.setLineDash=Oe.API.setLineDash=Oe.API.setLineDashPattern=function(e,t){if(e=e||[],t=t||0,isNaN(t)||!Array.isArray(e))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return e=e.map((function(e){return S(E(e))})).join(" "),t=S(E(t)),Q("["+e+"] "+t+" d"),this};var Zt=p.__private__.getLineHeight=p.getLineHeight=function(){return ne*Xt};p.__private__.getLineHeight=p.getLineHeight=function(){return ne*Xt};var ea=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(e){return"number"==typeof(e=e||1.15)&&(Xt=e),this},ta=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return Xt};ea(e.lineHeight);var aa=p.__private__.getHorizontalCoordinate=function(e){return E(e)},sa=p.__private__.getVerticalCoordinate=function(e){return j===y?e:Fe[B].mediaBox.topRightY-Fe[B].mediaBox.bottomLeftY-E(e)},na=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(e){return S(aa(e))},ra=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(e){return S(sa(e))},ia=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return tt(ia)},p.__private__.setStrokeColor=p.setDrawColor=function(e,t,a,s){return ia=at({ch1:e,ch2:t,ch3:a,ch4:s,pdfColorType:"draw",precision:2}),Q(ia),this};var oa=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return tt(oa)},p.__private__.setFillColor=p.setFillColor=function(e,t,a,s){return oa=at({ch1:e,ch2:t,ch3:a,ch4:s,pdfColorType:"fill",precision:2}),Q(oa),this};var la=e.textColor||"0 g",ca=p.__private__.getTextColor=p.getTextColor=function(){return tt(la)};p.__private__.setTextColor=p.setTextColor=function(e,t,a,s){return la=at({ch1:e,ch2:t,ch3:a,ch4:s,pdfColorType:"text",precision:3}),this};var da=e.charSpace,ua=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(da||0)};p.__private__.setCharSpace=p.setCharSpace=function(e){if(isNaN(e))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return da=e,this};var ha=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line cap style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ha=t,Q(t+" J"),this};var ma=0;p.__private__.setLineJoin=p.setLineJoin=function(e){var t=p.CapJoinStyles[e];if(void 0===t)throw new Error("Line join style of '"+e+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ma=t,Q(t+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(e){if(e=e||0,isNaN(e))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(S(E(e))+" M"),this},p.GState=Pe,p.setGState=function(e){(e="string"==typeof e?Te[Me[e]]:pa(null,e)).equals(Re)||(Q("/"+e.id+" gs"),Re=e)};var pa=function(e,t){if(!e||!Me[e]){var a=!1;for(var s in Te)if(Te.hasOwnProperty(s)&&Te[s].equals(t)){a=!0;break}if(a)t=Te[s];else{var n="GS"+(Object.keys(Te).length+1).toString(10);Te[n]=t,t.id=n}return e&&(Me[e]=t.id),ze.publish("addGState",t),t}};p.addGState=function(e,t){return pa(e,t),this},p.saveGraphicsState=function(){return Q("q"),_e.push({key:xe,size:ne,color:la}),this},p.restoreGraphicsState=function(){Q("Q");var e=_e.pop();return xe=e.key,ne=e.size,la=e.color,Re=null,this},p.setCurrentTransformationMatrix=function(e){return Q(e.toString()+" cm"),this},p.comment=function(e){return Q("#"+e),this};var fa=function(e,t){var a=e||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return a},set:function(e){isNaN(e)||(a=parseFloat(e))}});var s=t||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return s},set:function(e){isNaN(e)||(s=parseFloat(e))}});var n="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return n},set:function(e){n=e.toString()}}),this},ga=function(e,t,a,s){fa.call(this,e,t),this.type="rect";var n=a||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return n},set:function(e){isNaN(e)||(n=parseFloat(e))}});var r=s||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return r},set:function(e){isNaN(e)||(r=parseFloat(e))}}),this},xa=function(){this.page=Ie,this.currentPage=B,this.pages=$.slice(0),this.pagesContext=Fe.slice(0),this.x=ve,this.y=ye,this.matrix=je,this.width=ya(B),this.height=Na(B),this.outputDestination=J,this.id="",this.objectNumber=-1};xa.prototype.restore=function(){Ie=this.page,B=this.currentPage,Fe=this.pagesContext,$=this.pages,ve=this.x,ye=this.y,je=this.matrix,ja(B,this.width),wa(B,this.height),J=this.outputDestination};var ba=function(e,t,a,s,n){He.push(new xa),Ie=B=0,$=[],ve=e,ye=t,je=n,xt([a,s])};for(var va in p.beginFormObject=function(e,t,a,s,n){return ba(e,t,a,s,n),this},p.endFormObject=function(e){return function(e){if(Ue[e])He.pop().restore();else{var t=new xa,a="Xo"+(Object.keys(qe).length+1).toString(10);t.id=a,Ue[e]=a,qe[a]=t,ze.publish("addFormObject",t),He.pop().restore()}}(e),this},p.doFormObject=function(e,t){var a=qe[Ue[e]];return Q("q"),Q(t.toString()+" cm"),Q("/"+a.id+" Do"),Q("Q"),this},p.getFormObject=function(e){var t=qe[Ue[e]];return{x:t.x,y:t.y,width:t.width,height:t.height,matrix:t.matrix}},p.save=function(e,t){return e=e||"generated.pdf",(t=t||{}).returnPromise=t.returnPromise||!1,!1===t.returnPromise?(le(Pt(At()),e),"function"==typeof le.unload&&ee.setTimeout&&setTimeout(le.unload,911),this):new Promise((function(t,a){try{var s=le(Pt(At()),e);"function"==typeof le.unload&&ee.setTimeout&&setTimeout(le.unload,911),t(s)}catch(e){a(e.message)}}))},Oe.API)Oe.API.hasOwnProperty(va)&&("events"===va&&Oe.API.events.length?function(e,t){var a,s,n;for(n=t.length-1;-1!==n;n--)a=t[n][0],s=t[n][1],e.subscribe.apply(e,[a].concat("function"==typeof s?[s]:s))}(ze,Oe.API.events):p[va]=Oe.API[va]);var ya=p.getPageWidth=function(e){return(Fe[e=e||B].mediaBox.topRightX-Fe[e].mediaBox.bottomLeftX)/be},ja=p.setPageWidth=function(e,t){Fe[e].mediaBox.topRightX=t*be+Fe[e].mediaBox.bottomLeftX},Na=p.getPageHeight=function(e){return(Fe[e=e||B].mediaBox.topRightY-Fe[e].mediaBox.bottomLeftY)/be},wa=p.setPageHeight=function(e,t){Fe[e].mediaBox.topRightY=t*be+Fe[e].mediaBox.bottomLeftY};return p.internal={pdfEscape:gt,getStyle:Ft,getFont:$t,getFontSize:ie,getCharSpace:ua,getTextColor:ca,getLineHeight:Zt,getLineHeightFactor:ta,getLineWidth:Kt,write:Z,getHorizontalCoordinate:aa,getVerticalCoordinate:sa,getCoordinateString:na,getVerticalCoordinateString:ra,collections:{},newObject:Xe,newAdditionalObject:Qe,newObjectDeferred:Je,newObjectDeferredBegin:Ke,getFilters:st,putStream:nt,events:ze,scaleFactor:be,pageSize:{getWidth:function(){return ya(B)},setWidth:function(e){ja(B,e)},getHeight:function(){return Na(B)},setHeight:function(e){wa(B,e)}},encryptionOptions:u,encryption:Dt,getEncryptor:function(e){return null!==u?Dt.encryptor(e,0):function(e){return e}},output:Et,getNumberOfPages:jt,pages:$,out:Q,f2:A,f3:P,getPageInfo:Ot,getPageInfoByObjId:Tt,getCurrentPageInfo:Mt,getPDFVersion:g,Point:fa,Rectangle:ga,Matrix:We,hasHotfix:Lt},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return ya(B)},set:function(e){ja(B,e)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Na(B)},set:function(e){wa(B,e)},enumerable:!0,configurable:!0}),function(e){for(var t=0,a=se.length;t<a;t++){var s=ft.call(this,e[t][0],e[t][1],e[t][2],se[t][3],!0);!1===h&&(m[s]=!0);var n=e[t][0].split("-");pt({id:s,fontName:n[0],fontStyle:n[1]||""})}ze.publish("addFonts",{fonts:Ne,dictionary:we})}.call(p,se),xe="F1",bt(r,a),ze.publish("initialized"),p}Ce.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},Ce.prototype.toHexString=function(e){return e.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Ce.prototype.hexToBytes=function(e){for(var t=[],a=0;a<e.length;a+=2)t.push(String.fromCharCode(parseInt(e.substr(a,2),16)));return t.join("")},Ce.prototype.processOwnerPassword=function(e,t){return _e(je(t).substr(0,5),e)},Ce.prototype.encryptor=function(e,t){var a=je(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(e){return _e(a,e)}},Pe.prototype.equals=function(e){var t,a="id,objectNumber,equals";if(!e||(0,s.A)(e)!==(0,s.A)(this))return!1;var n=0;for(t in this)if(!(a.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;if(this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&a.indexOf(t)<0&&n--;return 0===n},Oe.API={events:[]},Oe.version="2.5.2";var Te=Oe.API,Me=1,Re=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ie=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Fe=function(e){return e.toFixed(2)},ze=function(e){return e.toFixed(5)};Te.__acroform__={};var Be=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},qe=function(e){return e*Me},Ue=function(e){var t=new rt,a=vt.internal.getHeight(e)||0,s=vt.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Fe(s)),Number(Fe(a))],t},He=Te.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},We=Te.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},Ve=Te.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(e&1<<t)?0:1},Ge=Te.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Ve(e,t-1)},Ye=Te.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return He(e,t-1)},$e=Te.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return We(e,t-1)},Xe=Te.__acroform__.calculateCoordinates=function(e,t){var a=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,n=e[0],r=e[1],i=e[2],o=e[3],l={};return l.lowerLeft_X=a(n)||0,l.lowerLeft_Y=s(r+o)||0,l.upperRight_X=a(n+i)||0,l.upperRight_Y=s(r)||0,[Number(Fe(l.lowerLeft_X)),Number(Fe(l.lowerLeft_Y)),Number(Fe(l.upperRight_X)),Number(Fe(l.upperRight_Y))]},Je=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],a=e._V||e.DV,s=Ke(e,a),n=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+n+" "+Fe(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var r=Ue(e);return r.scope=e.scope,r.stream=t.join("\n"),r}},Ke=function(e,t){var a=0===e.fontSize?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},n=(t=")"==(t="("==t.substr(0,1)?t.substr(1):t).substr(t.length-1)?t.substr(0,t.length-1):t).split(" ");n=e.multiline?n.map((function(e){return e.split("\n")})):n.map((function(e){return[e]}));var r=a,i=vt.internal.getHeight(e)||0;i=i<0?-i:i;var o=vt.internal.getWidth(e)||0;o=o<0?-o:o;var l=function(t,a,s){if(t+1<n.length){var r=a+" "+n[t+1][0];return Qe(r,e,s).width<=o-4}return!1};r++;e:for(;r>0;){t="",r--;var c,d,u=Qe("3",e,r).height,h=e.multiline?i-r:(i-u)/2,m=h+=2,p=0,f=0,g=0;if(r<=0){t="(...) Tj\n",t+="% Width of Text: "+Qe(t,e,r=12).width+", FieldWidth:"+o+"\n";break}for(var x="",b=0,v=0;v<n.length;v++)if(n.hasOwnProperty(v)){var y=!1;if(1!==n[v].length&&g!==n[v].length-1){if((u+2)*(b+2)+2>i)continue e;x+=n[v][g],y=!0,f=v,v--}else{x=" "==(x+=n[v][g]+" ").substr(x.length-1)?x.substr(0,x.length-1):x;var j=parseInt(v),N=l(j,x,r),w=v>=n.length-1;if(N&&!w){x+=" ",g=0;continue}if(N||w){if(w)f=j;else if(e.multiline&&(u+2)*(b+2)+2>i)continue e}else{if(!e.multiline)continue e;if((u+2)*(b+2)+2>i)continue e;f=j}}for(var _="",S=p;S<=f;S++){var C=n[S];if(e.multiline){if(S===f){_+=C[g]+" ",g=(g+1)%C.length;continue}if(S===p){_+=C[C.length-1]+" ";continue}}_+=C[0]+" "}switch(_=" "==_.substr(_.length-1)?_.substr(0,_.length-1):_,d=Qe(_,e,r).width,e.textAlign){case"right":c=o-d-2;break;case"center":c=(o-d)/2;break;default:c=2}t+=Fe(c)+" "+Fe(m)+" Td\n",t+="("+Re(_)+") Tj\n",t+=-Fe(c)+" 0 Td\n",m=-(r+2),d=0,p=y?f:f+1,b++,x=""}break}return s.text=t,s.fontSize=r,s},Qe=function(e,t,a){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),n=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(a),charSpace:0})*parseFloat(a);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(a),charSpace:0})*parseFloat(a)*1.5,width:n}},Ze={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},et=function(e,t){var a={type:"reference",object:e};void 0===t.internal.getPageInfo(e.page).pageContext.annotations.find((function(e){return e.type===a.type&&e.object===a.object}))&&t.internal.getPageInfo(e.page).pageContext.annotations.push(a)},tt=function(e,t){if(t.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(ot.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Ze)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Me=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new it,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){var t;(t=e).internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})),e.internal.events.subscribe("buildDocument",(function(){!function(e){e.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var t=e.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in t)if(t.hasOwnProperty(a)){var s=t[a];s.objId=void 0,s.hasAnnotation&&et(s,e)}}(e)})),e.internal.events.subscribe("putCatalog",(function(){!function(e){if(void 0===e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");e.internal.write("/AcroForm "+e.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)})),e.internal.events.subscribe("postPutPages",(function(t){!function(e,t){var a=!e;for(var n in e||(t.internal.newObjectDeferredBegin(t.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),t.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||t.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(n)){var r=e[n],i=[],o=r.Rect;if(r.Rect&&(r.Rect=Xe(r.Rect,t)),t.internal.newObjectDeferredBegin(r.objId,!0),r.DA=vt.createDefaultAppearanceStream(r),"object"===(0,s.A)(r)&&"function"==typeof r.getKeyValueListForStream&&(i=r.getKeyValueListForStream()),r.Rect=o,r.hasAppearanceStream&&!r.appearanceStreamContent){var l=Je(r);i.push({key:"AP",value:"<</N "+l+">>"}),t.internal.acroformPlugin.xForms.push(l)}if(r.appearanceStreamContent){var c="";for(var d in r.appearanceStreamContent)if(r.appearanceStreamContent.hasOwnProperty(d)){var u=r.appearanceStreamContent[d];if(c+="/"+d+" ",c+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var n in u)if(u.hasOwnProperty(n)){var h=u[n];"function"==typeof h&&(h=h.call(t,r)),c+="/"+n+" "+h+" ",t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h)}}else"function"==typeof(h=u)&&(h=h.call(t,r)),c+="/"+n+" "+h,t.internal.acroformPlugin.xForms.indexOf(h)>=0||t.internal.acroformPlugin.xForms.push(h);c+=">>"}i.push({key:"AP",value:"<<\n"+c+">>"})}t.internal.putStream({additionalKeyValues:i,objectId:r.objId}),t.internal.out("endobj")}a&&function(e,t){for(var a in e)if(e.hasOwnProperty(a)){var n=a,r=e[a];t.internal.newObjectDeferredBegin(r.objId,!0),"object"===(0,s.A)(r)&&"function"==typeof r.putStream&&r.putStream(),delete e[n]}}(t.internal.acroformPlugin.xForms,t)}(t,e)})),e.internal.acroformPlugin.isInitialized=!0}},at=Te.__acroform__.arrayToPdfArray=function(e,t,a){var n=function(e){return e};if(Array.isArray(e)){for(var r="[",i=0;i<e.length;i++)switch(0!==i&&(r+=" "),(0,s.A)(e[i])){case"boolean":case"number":case"object":r+=e[i].toString();break;case"string":"/"!==e[i].substr(0,1)?(void 0!==t&&a&&(n=a.internal.getEncryptor(t)),r+="("+Re(n(e[i].toString()))+")"):r+=e[i].toString()}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(e,t,a){var s=function(e){return e};return void 0!==t&&a&&(s=a.internal.getEncryptor(t)),(e=e||"").toString(),"("+Re(s(e))+")"},nt=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};nt.prototype.toString=function(){return this.objId+" 0 R"},nt.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},nt.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(e){return"content"!=e&&"appearanceStreamContent"!=e&&"scope"!=e&&"objId"!=e&&"_"!=e.substring(0,1)}));for(var a in t)if(!1===Object.getOwnPropertyDescriptor(this,t[a]).configurable){var s=t[a],n=this[s];n&&(Array.isArray(n)?e.push({key:s,value:at(n,this.objId,this.scope)}):n instanceof nt?(n.scope=this.scope,e.push({key:s,value:n.objId+" 0 R"})):"function"!=typeof n&&e.push({key:s,value:n}))}return e};var rt=function(){nt.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){e=t.trim()},get:function(){return e||null}})};Be(rt,nt);var it=function(){nt.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Re(t(e))+")"}},set:function(t){e=t}})};Be(it,nt);var ot=function e(){nt.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute F supplied.');t=e}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(t,3))},set:function(e){!0===Boolean(e)?this.F=Ye(t,3):this.F=$e(t,3)}});var a=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return a},set:function(e){if(isNaN(e))throw new Error('Invalid value "'+e+'" for attribute Ff supplied.');a=e}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==s.length)return s},set:function(e){s=void 0!==e?e:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(e){s[0]=e}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(e){s[1]=e}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(e){s[2]=e}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(e){s[3]=e}});var n="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){switch(e){case"/Btn":case"/Tx":case"/Ch":case"/Sig":n=e;break;default:throw new Error('Invalid value "'+e+'" for attribute FT supplied.')}}});var r=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!r||r.length<1){if(this instanceof ft)return;r="FieldObject"+e.FieldNum++}var t=function(e){return e};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Re(t(r))+")"},set:function(e){r=e.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return r},set:function(e){r=e}});var i="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=e}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(e){o=e}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(e){l=e}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/Me:c},set:function(e){c=e}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(e){d=e}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof ft||this instanceof xt))return st(u,this.objId,this.scope)},set:function(e){e=e.toString(),u=e}});var h=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof ht==0?st(h,this.objId,this.scope):h},set:function(e){e=e.toString(),h=this instanceof ht==0?"("===e.substr(0,1)?Ie(e.substr(1,e.length-2)):Ie(e):e}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ht==1?Ie(h.substr(1,h.length-1)):h},set:function(e){e=e.toString(),h=this instanceof ht==1?"/"+e:e}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(e){this.V=e}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof ht==0?st(m,this.objId,this.scope):m},set:function(e){e=e.toString(),m=this instanceof ht==0?"("===e.substr(0,1)?Ie(e.substr(1,e.length-2)):Ie(e):e}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ht==1?Ie(m.substr(1,m.length-1)):m},set:function(e){e=e.toString(),m=this instanceof ht==1?"/"+e:e}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,f=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return f},set:function(e){e=Boolean(e),f=e}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(e){p=e}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,1))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,1):this.Ff=$e(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,2))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,2):this.Ff=$e(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,3))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,3):this.Ff=$e(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(e){if(-1===[0,1,2].indexOf(e))throw new Error('Invalid value "'+e+'" for attribute Q supplied.');g=e}}),Object.defineProperty(this,"textAlign",{get:function(){var e;switch(g){case 0:default:e="left";break;case 1:e="center";break;case 2:e="right"}return e},configurable:!0,enumerable:!0,set:function(e){switch(e){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Be(ot,nt);var lt=function(){ot.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){e=t}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return at(t,this.objId,this.scope)},set:function(e){var a,s;s=[],"string"==typeof(a=e)&&(s=function(e,t,a){a||(a=1);for(var s,n=[];s=t.exec(e);)n.push(s[a]);return n}(a,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(e){t=e,this.sort&&t.sort()},this.addOption=function(e){e=(e=e||"").toString(),t.push(e),this.sort&&t.sort()},this.removeOption=function(e,a){for(a=a||!1,e=(e=e||"").toString();-1!==t.indexOf(e)&&(t.splice(t.indexOf(e),1),!1!==a););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,18))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,18):this.Ff=$e(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,19))},set:function(e){!0===this.combo&&(!0===Boolean(e)?this.Ff=Ye(this.Ff,19):this.Ff=$e(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,20))},set:function(e){!0===Boolean(e)?(this.Ff=Ye(this.Ff,20),t.sort()):this.Ff=$e(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,22))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,22):this.Ff=$e(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,23):this.Ff=$e(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,27))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,27):this.Ff=$e(this.Ff,27)}}),this.hasAppearanceStream=!1};Be(lt,ot);var ct=function(){lt.call(this),this.fontName="helvetica",this.combo=!1};Be(ct,lt);var dt=function(){ct.call(this),this.combo=!0};Be(dt,ct);var ut=function(){dt.call(this),this.edit=!0};Be(ut,dt);var ht=function(){ot.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,15))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,15):this.Ff=$e(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,16))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,16):this.Ff=$e(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,17))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,17):this.Ff=$e(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,26):this.Ff=$e(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};if(this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(t).length){var a,s=[];for(a in s.push("<<"),t)s.push("/"+a+" ("+Re(e(t[a]))+")");return s.push(">>"),s.join("\n")}},set:function(e){"object"===(0,s.A)(e)&&(t=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(e){"string"==typeof e&&(t.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};Be(ht,ot);var mt=function(){ht.call(this),this.pushButton=!0};Be(mt,ht);var pt=function(){ht.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=void 0!==t?t:[]}})};Be(pt,ht);var ft=function(){var e,t;ot.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(e){t=e}});var a,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var e=function(e){return e};this.scope&&(e=this.scope.internal.getEncryptor(this.objId));var t,a=[];for(t in a.push("<<"),n)a.push("/"+t+" ("+Re(e(n[t]))+")");return a.push(">>"),a.join("\n")},set:function(e){"object"===(0,s.A)(e)&&(n=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(e){"string"==typeof e&&(n.CA=e)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return a},set:function(e){a=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return a.substr(1,a.length-1)},set:function(e){a="/"+e}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=vt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Be(ft,ot),pt.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var a=this.Kids[t];a.appearanceStreamContent=e.createAppearanceStream(a.optionName),a.caption=e.getCA()}},pt.prototype.createOption=function(e){var t=new ft;return t.Parent=this,t.optionName=e,this.Kids.push(t),yt.call(this.scope,t),t};var gt=function(){ht.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=vt.CheckBox.createAppearanceStream()};Be(gt,ht);var xt=function(){ot.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,13))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,13):this.Ff=$e(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,21))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,21):this.Ff=$e(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,23))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,23):this.Ff=$e(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,24))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,24):this.Ff=$e(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,25))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,25):this.Ff=$e(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,26))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,26):this.Ff=$e(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Be(xt,ot);var bt=function(){xt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ge(this.Ff,14))},set:function(e){!0===Boolean(e)?this.Ff=Ye(this.Ff,14):this.Ff=$e(this.Ff,14)}}),this.password=!0};Be(bt,xt);var vt={CheckBox:{createAppearanceStream:function(){return{N:{On:vt.CheckBox.YesNormal},D:{On:vt.CheckBox.YesPushDown,Off:vt.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Ue(e);t.scope=e.scope;var a=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),r=Ke(e,e.caption);return a.push("0.749023 g"),a.push("0 0 "+Fe(vt.internal.getWidth(e))+" "+Fe(vt.internal.getHeight(e))+" re"),a.push("f"),a.push("BMC"),a.push("q"),a.push("0 0 1 rg"),a.push("/"+s+" "+Fe(r.fontSize)+" Tf "+n),a.push("BT"),a.push(r.text),a.push("ET"),a.push("Q"),a.push("EMC"),t.stream=a.join("\n"),t},YesNormal:function(e){var t=Ue(e);t.scope=e.scope;var a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),n=[],r=vt.internal.getHeight(e),i=vt.internal.getWidth(e),o=Ke(e,e.caption);return n.push("1 g"),n.push("0 0 "+Fe(i)+" "+Fe(r)+" re"),n.push("f"),n.push("q"),n.push("0 0 1 rg"),n.push("0 0 "+Fe(i-1)+" "+Fe(r-1)+" re"),n.push("W"),n.push("n"),n.push("0 g"),n.push("BT"),n.push("/"+a+" "+Fe(o.fontSize)+" Tf "+s),n.push(o.text),n.push("ET"),n.push("Q"),t.stream=n.join("\n"),t},OffPushDown:function(e){var t=Ue(e);t.scope=e.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+Fe(vt.internal.getWidth(e))+" "+Fe(vt.internal.getHeight(e))+" re"),a.push("f"),t.stream=a.join("\n"),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Circle.YesNormal,t.D[e]=vt.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Ue(e);t.scope=e.scope;var a=[],s=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var n=vt.internal.Bezier_C,r=Number((s*n).toFixed(5));return a.push("q"),a.push("1 0 0 1 "+ze(vt.internal.getWidth(e)/2)+" "+ze(vt.internal.getHeight(e)/2)+" cm"),a.push(s+" 0 m"),a.push(s+" "+r+" "+r+" "+s+" 0 "+s+" c"),a.push("-"+r+" "+s+" -"+s+" "+r+" -"+s+" 0 c"),a.push("-"+s+" -"+r+" -"+r+" -"+s+" 0 -"+s+" c"),a.push(r+" -"+s+" "+s+" -"+r+" "+s+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join("\n"),t},YesPushDown:function(e){var t=Ue(e);t.scope=e.scope;var a=[],s=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var n=Number((2*s).toFixed(5)),r=Number((n*vt.internal.Bezier_C).toFixed(5)),i=Number((s*vt.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+ze(vt.internal.getWidth(e)/2)+" "+ze(vt.internal.getHeight(e)/2)+" cm"),a.push(n+" 0 m"),a.push(n+" "+r+" "+r+" "+n+" 0 "+n+" c"),a.push("-"+r+" "+n+" -"+n+" "+r+" -"+n+" 0 c"),a.push("-"+n+" -"+r+" -"+r+" -"+n+" 0 -"+n+" c"),a.push(r+" -"+n+" "+n+" -"+r+" "+n+" 0 c"),a.push("f"),a.push("Q"),a.push("0 g"),a.push("q"),a.push("1 0 0 1 "+ze(vt.internal.getWidth(e)/2)+" "+ze(vt.internal.getHeight(e)/2)+" cm"),a.push(s+" 0 m"),a.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),a.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),a.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),a.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join("\n"),t},OffPushDown:function(e){var t=Ue(e);t.scope=e.scope;var a=[],s=vt.internal.getWidth(e)<=vt.internal.getHeight(e)?vt.internal.getWidth(e)/4:vt.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var n=Number((2*s).toFixed(5)),r=Number((n*vt.internal.Bezier_C).toFixed(5));return a.push("0.749023 g"),a.push("q"),a.push("1 0 0 1 "+ze(vt.internal.getWidth(e)/2)+" "+ze(vt.internal.getHeight(e)/2)+" cm"),a.push(n+" 0 m"),a.push(n+" "+r+" "+r+" "+n+" 0 "+n+" c"),a.push("-"+r+" "+n+" -"+n+" "+r+" -"+n+" 0 c"),a.push("-"+n+" -"+r+" -"+r+" -"+n+" 0 -"+n+" c"),a.push(r+" -"+n+" "+n+" -"+r+" "+n+" 0 c"),a.push("f"),a.push("Q"),t.stream=a.join("\n"),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:vt.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=vt.RadioButton.Cross.YesNormal,t.D[e]=vt.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Ue(e);t.scope=e.scope;var a=[],s=vt.internal.calculateCross(e);return a.push("q"),a.push("1 1 "+Fe(vt.internal.getWidth(e)-2)+" "+Fe(vt.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(Fe(s.x1.x)+" "+Fe(s.x1.y)+" m"),a.push(Fe(s.x2.x)+" "+Fe(s.x2.y)+" l"),a.push(Fe(s.x4.x)+" "+Fe(s.x4.y)+" m"),a.push(Fe(s.x3.x)+" "+Fe(s.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join("\n"),t},YesPushDown:function(e){var t=Ue(e);t.scope=e.scope;var a=vt.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+Fe(vt.internal.getWidth(e))+" "+Fe(vt.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Fe(vt.internal.getWidth(e)-2)+" "+Fe(vt.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(Fe(a.x1.x)+" "+Fe(a.x1.y)+" m"),s.push(Fe(a.x2.x)+" "+Fe(a.x2.y)+" l"),s.push(Fe(a.x4.x)+" "+Fe(a.x4.y)+" m"),s.push(Fe(a.x3.x)+" "+Fe(a.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join("\n"),t},OffPushDown:function(e){var t=Ue(e);t.scope=e.scope;var a=[];return a.push("0.749023 g"),a.push("0 0 "+Fe(vt.internal.getWidth(e))+" "+Fe(vt.internal.getHeight(e))+" re"),a.push("f"),t.stream=a.join("\n"),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+a}};vt.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=vt.internal.getWidth(e),a=vt.internal.getHeight(e),s=Math.min(t,a);return{x1:{x:(t-s)/2,y:(a-s)/2+s},x2:{x:(t-s)/2+s,y:(a-s)/2},x3:{x:(t-s)/2,y:(a-s)/2},x4:{x:(t-s)/2+s,y:(a-s)/2+s}}}},vt.internal.getWidth=function(e){var t=0;return"object"===(0,s.A)(e)&&(t=qe(e.Rect[2])),t},vt.internal.getHeight=function(e){var t=0;return"object"===(0,s.A)(e)&&(t=qe(e.Rect[3])),t};var yt=Te.addField=function(e){if(tt(this,e),!(e instanceof ot))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Te.AcroFormChoiceField=lt,Te.AcroFormListBox=ct,Te.AcroFormComboBox=dt,Te.AcroFormEditBox=ut,Te.AcroFormButton=ht,Te.AcroFormPushButton=mt,Te.AcroFormRadioButton=pt,Te.AcroFormCheckBox=gt,Te.AcroFormTextField=xt,Te.AcroFormPasswordField=bt,Te.AcroFormAppearance=vt,Te.AcroForm={ChoiceField:lt,ListBox:ct,ComboBox:dt,EditBox:ut,Button:ht,PushButton:mt,RadioButton:pt,CheckBox:gt,TextField:xt,PasswordField:bt,Appearance:vt},Oe.AcroForm={ChoiceField:lt,ListBox:ct,ComboBox:dt,EditBox:ut,Button:ht,PushButton:mt,RadioButton:pt,CheckBox:gt,TextField:xt,PasswordField:bt,Appearance:vt};var jt=Oe.AcroForm;function Nt(e){return e.reduce((function(e,t,a){return e[t]=a,e}),{})}!function(e){e.__addimage__={};var t="UNKNOWN",a={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(e,s){var n,r,i,o,l,c=t;if("RGBA"===(s=s||t)||void 0!==e.data&&e.data instanceof Uint8ClampedArray&&"height"in e&&"width"in e)return"RGBA";if(w(e))for(l in a)for(i=a[l],n=0;n<i.length;n+=1){for(o=!0,r=0;r<i[n].length;r+=1)if(void 0!==i[n][r]&&i[n][r]!==e[r]){o=!1;break}if(!0===o){c=l;break}}else for(l in a)for(i=a[l],n=0;n<i.length;n+=1){for(o=!0,r=0;r<i[n].length;r+=1)if(void 0!==i[n][r]&&i[n][r]!==e.charCodeAt(r)){o=!1;break}if(!0===o){c=l;break}}return c===t&&s!==t&&(c=s),c},r=function e(t){for(var a=this.internal.write,s=this.internal.putStream,n=(0,this.internal.getFilters)();-1!==n.indexOf("FlateEncode");)n.splice(n.indexOf("FlateEncode"),1);t.objectId=this.internal.newObject();var r=[];if(r.push({key:"Type",value:"/XObject"}),r.push({key:"Subtype",value:"/Image"}),r.push({key:"Width",value:t.width}),r.push({key:"Height",value:t.height}),t.colorSpace===x.INDEXED?r.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(t.palette.length/3-1)+" "+("sMask"in t&&void 0!==t.sMask?t.objectId+2:t.objectId+1)+" 0 R]"}):(r.push({key:"ColorSpace",value:"/"+t.colorSpace}),t.colorSpace===x.DEVICE_CMYK&&r.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),r.push({key:"BitsPerComponent",value:t.bitsPerComponent}),"decodeParameters"in t&&void 0!==t.decodeParameters&&r.push({key:"DecodeParms",value:"<<"+t.decodeParameters+">>"}),"transparency"in t&&Array.isArray(t.transparency)){for(var i="",o=0,l=t.transparency.length;o<l;o++)i+=t.transparency[o]+" "+t.transparency[o]+" ";r.push({key:"Mask",value:"["+i+"]"})}void 0!==t.sMask&&r.push({key:"SMask",value:t.objectId+1+" 0 R"});var c=void 0!==t.filter?["/"+t.filter]:void 0;if(s({data:t.data,additionalKeyValues:r,alreadyAppliedFilters:c,objectId:t.objectId}),a("endobj"),"sMask"in t&&void 0!==t.sMask){var d="/Predictor "+t.predictor+" /Colors 1 /BitsPerComponent "+t.bitsPerComponent+" /Columns "+t.width,u={width:t.width,height:t.height,colorSpace:"DeviceGray",bitsPerComponent:t.bitsPerComponent,decodeParameters:d,data:t.sMask};"filter"in t&&(u.filter=t.filter),e.call(this,u)}if(t.colorSpace===x.INDEXED){var h=this.internal.newObject();s({data:S(new Uint8Array(t.palette)),objectId:h}),a("endobj")}},i=function(){var e=this.internal.collections.addImage_images;for(var t in e)r.call(this,e[t])},o=function(){var e,t=this.internal.collections.addImage_images,a=this.internal.write;for(var s in t)a("/I"+(e=t[s]).index,e.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var e=this.internal.collections.addImage_images;return l.call(this),e},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(t){return"function"==typeof e["process"+t.toUpperCase()]},h=function(e){return"object"===(0,s.A)(e)&&1===e.nodeType},m=function(t,a){if("IMG"===t.nodeName&&t.hasAttribute("src")){var s=""+t.getAttribute("src");if(0===s.indexOf("data:image/"))return ie(unescape(s).split("base64,").pop());var n=e.loadFile(s,!0);if(void 0!==n)return n}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw new Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);var r;switch(a){case"PNG":r="image/png";break;case"WEBP":r="image/webp";break;default:r="image/jpeg"}return ie(t.toDataURL(r,1).split("base64,").pop())}},p=function(e){var t=this.internal.collections.addImage_images;if(t)for(var a in t)if(e===t[a].alias)return t[a]},f=function(e,t,a){return e||t||(e=-96,t=-96),e<0&&(e=-1*a.width*72/e/this.internal.scaleFactor),t<0&&(t=-1*a.height*72/t/this.internal.scaleFactor),0===e&&(e=t*a.width/a.height),0===t&&(t=e*a.height/a.width),[e,t]},g=function(e,t,a,s,n,r){var i=f.call(this,a,s,n),o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=c.call(this);if(a=i[0],s=i[1],d[n.index]=n,r){r*=Math.PI/180;var u=Math.cos(r),h=Math.sin(r),m=function(e){return e.toFixed(4)},p=[m(u),m(h),m(-1*h),m(u),0,0,"cm"]}this.internal.write("q"),r?(this.internal.write([1,"0","0",1,o(e),l(t+s),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([o(a),"0","0",o(s),"0","0","cm"].join(" "))):this.internal.write([o(a),"0","0",o(s),o(e),l(t+s),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+n.index+" Do"),this.internal.write("Q")},x=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=e.__addimage__.sHashCode=function(e){var t,a,s=0;if("string"==typeof e)for(a=e.length,t=0;t<a;t++)s=(s<<5)-s+e.charCodeAt(t),s|=0;else if(w(e))for(a=e.byteLength/2,t=0;t<a;t++)s=(s<<5)-s+e[t],s|=0;return s},y=e.__addimage__.validateStringAsBase64=function(e){(e=e||"").toString().trim();var t=!0;return 0===e.length&&(t=!1),e.length%4!=0&&(t=!1),!1===/^[A-Za-z0-9+/]+$/.test(e.substr(0,e.length-2))&&(t=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(e.substr(-2))&&(t=!1),t},j=e.__addimage__.extractImageFromDataUrl=function(e){var t=(e=e||"").split("base64,"),a=null;if(2===t.length){var s=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(t[0]);Array.isArray(s)&&(a={mimeType:s[1],charset:s[2],data:t[1]})}return a},N=e.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};e.__addimage__.isArrayBuffer=function(e){return N()&&e instanceof ArrayBuffer};var w=e.__addimage__.isArrayBufferView=function(e){return N()&&"undefined"!=typeof Uint32Array&&(e instanceof Int8Array||e instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)},_=e.__addimage__.binaryStringToUint8Array=function(e){for(var t=e.length,a=new Uint8Array(t),s=0;s<t;s++)a[s]=e.charCodeAt(s);return a},S=e.__addimage__.arrayBufferToBinaryString=function(e){for(var t="",a=w(e)?e:new Uint8Array(e),s=0;s<a.length;s+=8192)t+=String.fromCharCode.apply(null,a.subarray(s,s+8192));return t};e.addImage=function(){var e,a,n,r,i,o,c,d,u;if("number"==typeof arguments[1]?(a=t,n=arguments[1],r=arguments[2],i=arguments[3],o=arguments[4],c=arguments[5],d=arguments[6],u=arguments[7]):(a=arguments[1],n=arguments[2],r=arguments[3],i=arguments[4],o=arguments[5],c=arguments[6],d=arguments[7],u=arguments[8]),"object"===(0,s.A)(e=arguments[0])&&!h(e)&&"imageData"in e){var m=e;e=m.imageData,a=m.format||a||t,n=m.x||n||0,r=m.y||r||0,i=m.w||m.width||i,o=m.h||m.height||o,c=m.alias||c,d=m.compression||d,u=m.rotation||m.angle||u}var p=this.internal.getFilters();if(void 0===d&&-1!==p.indexOf("FlateEncode")&&(d="SLOW"),isNaN(n)||isNaN(r))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var f=C.call(this,e,a,c,d);return g.call(this,n,r,i,o,f,u),this};var C=function(a,s,r,i){var o,l,c;if("string"==typeof a&&n(a)===t){a=unescape(a);var f=k(a,!1);(""!==f||void 0!==(f=e.loadFile(a,!0)))&&(a=f)}if(h(a)&&(a=m(a,s)),s=n(a,s),!u(s))throw new Error("addImage does not support files of type '"+s+"', please ensure that a plugin for '"+s+"' support is added.");if((null==(c=r)||0===c.length)&&(r=function(e){return"string"==typeof e||w(e)?v(e):w(e.data)?v(e.data):null}(a)),(o=p.call(this,r))||(N()&&(a instanceof Uint8Array||"RGBA"===s||(l=a,a=_(a))),o=this["process"+s.toUpperCase()](a,d.call(this),r,function(t){return t&&"string"==typeof t&&(t=t.toUpperCase()),t in e.image_compression?t:b.NONE}(i),l)),!o)throw new Error("An unknown error occurred whilst processing the image.");return o},k=e.__addimage__.convertBase64ToBinaryString=function(e,t){var a;t="boolean"!=typeof t||t;var s,n="";if("string"==typeof e){s=null!==(a=j(e))?a.data:e;try{n=ie(s)}catch(e){if(t)throw y(s)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return n};e.getImageProperties=function(a){var s,r,i="";if(h(a)&&(a=m(a)),"string"==typeof a&&n(a)===t&&(""===(i=k(a,!1))&&(i=e.loadFile(a)||""),a=i),r=n(a),!u(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if(!N()||a instanceof Uint8Array||(a=_(a)),!(s=this["process"+r.toUpperCase()](a)))throw new Error("An unknown error occurred whilst processing the image");return s.fileType=r,s}}(Oe.API),function(e){var t=function(e){if(void 0!==e&&""!=e)return!0};Oe.API.events.push(["addPage",function(e){this.internal.getPageInfo(e.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(e){for(var a,s,n,r=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(e.objId),l=e.pageContext.annotations,c=!1,d=0;d<l.length&&!c;d++)switch((a=l[d]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var u=0;u<l.length;u++){a=l[u];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(e.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var p=this.internal.newAdditionalObject(),f=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(p.objId),x=a.title||"Note";n="<</Type /Annot /Subtype /Text "+(s="/Rect ["+r(a.bounds.x)+" "+i(a.bounds.y+a.bounds.h)+" "+r(a.bounds.x+a.bounds.w)+" "+i(a.bounds.y)+"] ")+"/Contents ("+h(g(a.contents))+")",n+=" /Popup "+f.objId+" 0 R",n+=" /P "+o.objId+" 0 R",n+=" /T ("+h(g(x))+") >>",p.content=n;var b=p.objId+" 0 R";n="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+r(a.bounds.x+30)+" "+i(a.bounds.y+a.bounds.h)+" "+r(a.bounds.x+a.bounds.w+30)+" "+i(a.bounds.y)+"] ")+" /Parent "+b,a.open&&(n+=" /Open true"),n+=" >>",f.content=n,this.internal.write(p.objId,"0 R",f.objId,"0 R");break;case"freetext":s="/Rect ["+r(a.bounds.x)+" "+i(a.bounds.y)+" "+r(a.bounds.x+a.bounds.w)+" "+i(a.bounds.y+a.bounds.h)+"] ";var v=a.color||"#000000";n="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+h(m(a.contents))+")",n+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+v+")",n+=" /Border [0 0 0]",n+=" >>",this.internal.write(n);break;case"link":if(a.options.name){var y=this.annotations._nameMap[a.options.name];a.options.pageNumber=y.page,a.options.top=y.y}else a.options.top||(a.options.top=0);if(s="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",n="",a.options.url)n="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(a.options.url))+") >>";else if(a.options.pageNumber)switch(n="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":n+=" /Fit]";break;case"FitH":n+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,n+=" /FitV "+a.options.left+"]";break;default:var j=i(a.options.top);a.options.left=a.options.left||0,void 0===a.options.zoom&&(a.options.zoom=0),n+=" /XYZ "+a.options.left+" "+j+" "+a.options.zoom+"]"}""!=n&&(n+=" >>",this.internal.write(n))}}this.internal.write("]")}}]),e.createAnnotation=function(e){var t=this.internal.getCurrentPageInfo();switch(e.type){case"link":this.link(e.bounds.x,e.bounds.y,e.bounds.w,e.bounds.h,e);break;case"text":case"freetext":t.pageContext.annotations.push(e)}},e.link=function(e,t,a,s,n){var r=this.internal.getCurrentPageInfo(),i=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString;r.pageContext.annotations.push({finalBounds:{x:i(e),y:o(t),w:i(e+a),h:o(t+s)},options:n,type:"link"})},e.textWithLink=function(e,t,a,s){var n,r,i=this.getTextWidth(e),o=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==s.maxWidth){r=s.maxWidth;var l=this.splitTextToSize(e,r).length;n=Math.ceil(o*l)}else r=i,n=o;return this.text(e,t,a,s),a+=.2*o,"center"===s.align&&(t-=i/2),"right"===s.align&&(t-=i),this.link(t,a-o,r,n,s),i},e.getTextWidth=function(e){var t=this.internal.getFontSize();return this.getStringUnitWidth(e)*t/this.internal.scaleFactor}}(Oe.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},a={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},n=[1570,1571,1573,1575];e.__arabicParser__={};var r=e.__arabicParser__.isInArabicSubstitutionA=function(e){return void 0!==t[e.charCodeAt(0)]},i=e.__arabicParser__.isArabicLetter=function(e){return"string"==typeof e&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(e)},o=e.__arabicParser__.isArabicEndLetter=function(e){return i(e)&&r(e)&&t[e.charCodeAt(0)].length<=2},l=e.__arabicParser__.isArabicAlfLetter=function(e){return i(e)&&n.indexOf(e.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(e){return i(e)&&r(e)&&t[e.charCodeAt(0)].length>=1};var c=e.__arabicParser__.arabicLetterHasFinalForm=function(e){return i(e)&&r(e)&&t[e.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(e){return i(e)&&r(e)&&t[e.charCodeAt(0)].length>=3};var d=e.__arabicParser__.arabicLetterHasMedialForm=function(e){return i(e)&&r(e)&&4==t[e.charCodeAt(0)].length},u=e.__arabicParser__.resolveLigatures=function(e){var t=0,s=a,n="",r=0;for(t=0;t<e.length;t+=1)void 0!==s[e.charCodeAt(t)]?(r++,"number"==typeof(s=s[e.charCodeAt(t)])&&(n+=String.fromCharCode(s),s=a,r=0),t===e.length-1&&(s=a,n+=e.charAt(t-(r-1)),t-=r-1,r=0)):(s=a,n+=e.charAt(t-r),t-=r,r=0);return n};e.__arabicParser__.isArabicDiacritic=function(e){return void 0!==e&&void 0!==s[e.charCodeAt(0)]};var h=e.__arabicParser__.getCorrectForm=function(e,t,a){return i(e)?!1===r(e)?-1:!c(e)||!i(t)&&!i(a)||!i(a)&&o(t)||o(e)&&!i(t)||o(e)&&l(t)||o(e)&&o(t)?0:d(e)&&i(t)&&!o(t)&&i(a)&&c(a)?3:o(e)||!i(a)?1:2:-1},m=function(e){var a=0,s=0,n=0,r="",o="",l="",c=(e=e||"").split("\\s+"),d=[];for(a=0;a<c.length;a+=1){for(d.push(""),s=0;s<c[a].length;s+=1)r=c[a][s],o=c[a][s-1],l=c[a][s+1],i(r)?(n=h(r,o,l),d[a]+=-1!==n?String.fromCharCode(t[r.charCodeAt(0)][n]):r):d[a]+=r;d[a]=u(d[a])}return d.join(" ")},p=e.__arabicParser__.processArabic=e.processArabic=function(){var e,t="string"==typeof arguments[0]?arguments[0]:arguments[0].text,a=[];if(Array.isArray(t)){var s=0;for(a=[],s=0;s<t.length;s+=1)Array.isArray(t[s])?a.push([m(t[s][0]),t[s][1],t[s][2]]):a.push([m(t[s])]);e=a}else e=m(t);return"string"==typeof arguments[0]?e:(arguments[0].text=e,arguments[0])};e.events.push(["preProcessText",p])}(Oe.API),Oe.API.autoPrint=function(e){var t;if("javascript"===((e=e||{}).variant=e.variant||"non-conform",e.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}));return this},function(e){var t=function(){var e=void 0;Object.defineProperty(this,"pdf",{get:function(){return e},set:function(t){e=t}});var t=150;Object.defineProperty(this,"width",{get:function(){return t},set:function(e){t=isNaN(e)||!1===Number.isInteger(e)||e<0?150:e,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=t+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(e){a=isNaN(e)||!1===Number.isInteger(e)||e<0?300:e,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(e){s=e}});var n={};Object.defineProperty(this,"style",{get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(e,t){var a;if("2d"!==(e=e||"2d"))return null;for(a in t)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=t[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Oe.API),function(e){var t={left:0,top:0,bottom:0,right:0},a=!1,n=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var e=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var t=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var a=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return a},set:function(e){a=e}});var s=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return s},set:function(e){s=e}});var n=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return n},set:function(e){n=e}});var r=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return r},set:function(e){r=e}});var i=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return i},set:function(e){i=e}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(e){return n.call(this),this.internal.__cell__.headerFunction="function"==typeof e?e:void 0,this},e.getTextDimensions=function(e,t){n.call(this);var a=(t=t||{}).fontSize||this.getFontSize(),s=t.font||this.getFont(),r=t.scaleFactor||this.internal.scaleFactor,i=0,o=0,l=0,c=this;if(!Array.isArray(e)&&"string"!=typeof e){if("number"!=typeof e)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");e=String(e)}var d=t.maxWidth;d>0?"string"==typeof e?e=this.splitTextToSize(e,d):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce((function(e,t){return e.concat(c.splitTextToSize(t,d))}),[])):e=Array.isArray(e)?e:[e];for(var u=0;u<e.length;u++)i<(l=this.getStringUnitWidth(e[u],{font:s})*a)&&(i=l);return 0!==i&&(o=e.length),{w:i/=r,h:Math.max((o*a*this.getLineHeightFactor()-a*(this.getLineHeightFactor()-1))/r,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var e=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(e.left,e.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var e;e=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var s=this.internal.__cell__.lastCell,r=this.internal.__cell__.padding,o=this.internal.__cell__.margins||t,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==s.lineNumber&&(s.lineNumber===e.lineNumber?(e.x=(s.x||0)+(s.width||0),e.y=s.y||0):s.y+s.height+e.height+o.bottom>this.getPageHeight()?(this.cellAddPage(),e.y=o.top,c&&l&&(this.printHeaderRow(e.lineNumber,!0),e.y+=l[0].height)):e.y=s.y+s.height||e.y),void 0!==e.text[0]&&(this.rect(e.x,e.y,e.width,e.height,!0===a?"FD":void 0),"right"===e.align?this.text(e.text,e.x+e.width-r,e.y+r,{align:"right",baseline:"top"}):"center"===e.align?this.text(e.text,e.x+e.width/2,e.y+r,{align:"center",baseline:"top",maxWidth:e.width-r-r}):this.text(e.text,e.x+r,e.y+r,{align:"left",baseline:"top",maxWidth:e.width-r-r})),this.internal.__cell__.lastCell=e,this};e.table=function(e,a,c,d,u){if(n.call(this),!c)throw new Error("No data for PDF table.");var h,m,p,f,g=[],x=[],b=[],v={},y={},j=[],N=[],w=(u=u||{}).autoSize||!1,_=!1!==u.printHeaders,S=u.css&&void 0!==u.css["font-size"]?16*u.css["font-size"]:u.fontSize||12,C=u.margins||Object.assign({width:this.getPageWidth()},t),k="number"==typeof u.padding?u.padding:3,A=u.headerBackgroundColor||"#c8c8c8",P=u.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=_,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=S,this.internal.__cell__.padding=k,this.internal.__cell__.headerBackgroundColor=A,this.internal.__cell__.headerTextColor=P,this.setFontSize(S),null==d)x=g=Object.keys(c[0]),b=g.map((function(){return"left"}));else if(Array.isArray(d)&&"object"===(0,s.A)(d[0]))for(g=d.map((function(e){return e.name})),x=d.map((function(e){return e.prompt||e.name||""})),b=d.map((function(e){return e.align||"left"})),h=0;h<d.length;h+=1)y[d[h].name]=d[h].width*(19.049976/25.4);else Array.isArray(d)&&"string"==typeof d[0]&&(x=g=d,b=g.map((function(){return"left"})));if(w||Array.isArray(d)&&"string"==typeof d[0])for(h=0;h<g.length;h+=1){for(v[f=g[h]]=c.map((function(e){return e[f]})),this.setFont(void 0,"bold"),j.push(this.getTextDimensions(x[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=v[f],this.setFont(void 0,"normal"),p=0;p<m.length;p+=1)j.push(this.getTextDimensions(m[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);y[f]=Math.max.apply(null,j)+k+k,j=[]}if(_){var E={};for(h=0;h<g.length;h+=1)E[g[h]]={},E[g[h]].text=x[h],E[g[h]].align=b[h];var L=l.call(this,E,y);N=g.map((function(t){return new i(e,a,y[t],L,E[t].text,void 0,E[t].align)})),this.setTableHeaderRow(N),this.printHeaderRow(1,!1)}var D=d.reduce((function(e,t){return e[t.name]=t.align,e}),{});for(h=0;h<c.length;h+=1){"rowStart"in u&&u.rowStart instanceof Function&&u.rowStart({row:h,data:c[h]},this);var O=l.call(this,c[h],y);for(p=0;p<g.length;p+=1){var T=c[h][g[p]];"cellStart"in u&&u.cellStart instanceof Function&&u.cellStart({row:h,col:p,data:T},this),o.call(this,new i(e,a,y[g[p]],O,T,h+2,D[g[p]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=a,this};var l=function(e,t){var a=this.internal.__cell__.padding,s=this.internal.__cell__.table_font_size,n=this.internal.scaleFactor;return Object.keys(e).map((function(s){var n=e[s];return this.splitTextToSize(n.hasOwnProperty("text")?n.text:n,t[s]-a-a)}),this).map((function(e){return this.getLineHeightFactor()*e.length*s/n+a+a}),this).reduce((function(e,t){return Math.max(e,t)}),0)};e.setTableHeaderRow=function(e){n.call(this),this.internal.__cell__.tableHeaderRow=e},e.printHeaderRow=function(e,t){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var s;if(a=!0,"function"==typeof this.internal.__cell__.headerFunction){var r=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(r[0],r[1],r[2],r[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){s=this.internal.__cell__.tableHeaderRow[c].clone(),t&&(s.y=this.internal.__cell__.margins.top||0,l.push(s)),s.lineNumber=e;var d=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,s),this.setTextColor(d)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),a=!1}}(Oe.API);var wt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},_t=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],St=Nt(_t),Ct=[100,200,300,400,500,600,700,800,900],kt=Nt(Ct);function At(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),a=function(e){return wt[e=e||"normal"]?e:"normal"}(e.style),s=function(e){return e?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400}(e.weight),n=function(e){return"number"==typeof St[e=e||"normal"]?e:"normal"}(e.stretch);return{family:t,style:a,weight:s,stretch:n,src:e.src||[],ref:e.ref||{name:t,style:[n,a,s].join(" ")}}}function Pt(e,t,a,s){var n;for(n=a;n>=0&&n<t.length;n+=s)if(e[t[n]])return e[t[n]];for(n=a;n>=0&&n<t.length;n-=s)if(e[t[n]])return e[t[n]]}var Et={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Lt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Dt(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Ot(e){return e.trimLeft()}function Tt(e,t){for(var a=0;a<e.length;){if(e.charAt(a)===t)return[e.substring(0,a),e.substring(a+1)];a+=1}return null}function Mt(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===t?null:[t[0],e.substring(t[0].length)]}var Rt,It,Ft,zt,Bt=["times"];!function(e){var t,a,n,r,i,o,l,c,d,u=function(e){return e=e||{},this.isStrokeTransparent=e.isStrokeTransparent||!1,this.strokeOpacity=e.strokeOpacity||1,this.strokeStyle=e.strokeStyle||"#000000",this.fillStyle=e.fillStyle||"#000000",this.isFillTransparent=e.isFillTransparent||!1,this.fillOpacity=e.fillOpacity||1,this.font=e.font||"10px sans-serif",this.textBaseline=e.textBaseline||"alphabetic",this.textAlign=e.textAlign||"left",this.lineWidth=e.lineWidth||1,this.lineJoin=e.lineJoin||"miter",this.lineCap=e.lineCap||"butt",this.path=e.path||[],this.transform=void 0!==e.transform?e.transform.clone():new c,this.globalCompositeOperation=e.globalCompositeOperation||"normal",this.globalAlpha=e.globalAlpha||1,this.clip_path=e.clip_path||[],this.currentPoint=e.currentPoint||new o,this.miterLimit=e.miterLimit||10,this.lastPoint=e.lastPoint||new o,this.lineDashOffset=e.lineDashOffset||0,this.lineDash=e.lineDash||[],this.margin=e.margin||[0,0,0,0],this.prevPageLastElemOffset=e.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof e.ignoreClearRect||e.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,a=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(e){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var t=e;Object.defineProperty(this,"pdf",{get:function(){return t}});var a=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return a},set:function(e){a=Boolean(e)}});var s=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return s},set:function(e){s=Boolean(e)}});var n=0;Object.defineProperty(this,"posX",{get:function(){return n},set:function(e){isNaN(e)||(n=e)}});var r=0;Object.defineProperty(this,"posY",{get:function(){return r},set:function(e){isNaN(e)||(r=e)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(e){var t;"number"==typeof e?t=[e,e,e,e]:((t=new Array(4))[0]=e[0],t[1]=e.length>=2?e[1]:t[0],t[2]=e.length>=3?e[2]:t[0],t[3]=e.length>=4?e[3]:t[1]),d.margin=t}});var i=!1;Object.defineProperty(this,"autoPaging",{get:function(){return i},set:function(e){i=e}});var o=0;Object.defineProperty(this,"lastBreak",{get:function(){return o},set:function(e){o=e}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(e){l=e}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(e){e instanceof u&&(d=e)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(e){d.path=e}});var c=[];Object.defineProperty(this,"ctxStack",{get:function(){return c},set:function(e){c=e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(e){var t;t=m(e),this.ctx.fillStyle=t.style,this.ctx.isFillTransparent=0===t.a,this.ctx.fillOpacity=t.a,this.pdf.setFillColor(t.r,t.g,t.b,{a:t.a}),this.pdf.setTextColor(t.r,t.g,t.b,{a:t.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(e){var t=m(e);this.ctx.strokeStyle=t.style,this.ctx.isStrokeTransparent=0===t.a,this.ctx.strokeOpacity=t.a,0===t.a?this.pdf.setDrawColor(255,255,255):(t.a,this.pdf.setDrawColor(t.r,t.g,t.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(e){-1!==["butt","round","square"].indexOf(e)&&(this.ctx.lineCap=e,this.pdf.setLineCap(e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(e){isNaN(e)||(this.ctx.lineWidth=e,this.pdf.setLineWidth(e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(e){-1!==["bevel","round","miter"].indexOf(e)&&(this.ctx.lineJoin=e,this.pdf.setLineJoin(e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(e){isNaN(e)||(this.ctx.miterLimit=e,this.pdf.setMiterLimit(e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(e){this.ctx.textBaseline=e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(e){-1!==["right","end","center","left","start"].indexOf(e)&&(this.ctx.textAlign=e)}});var h=null;function p(e,t){if(null===h){var a=function(e){var t=[];return Object.keys(e).forEach((function(a){e[a].forEach((function(e){var s=null;switch(e){case"bold":s={family:a,weight:"bold"};break;case"italic":s={family:a,style:"italic"};break;case"bolditalic":s={family:a,weight:"bold",style:"italic"};break;case"":case"normal":s={family:a}}null!==s&&(s.ref={name:a,style:e},t.push(s))}))})),t}(e.getFontList());h=function(e){for(var t={},a=0;a<e.length;++a){var s=At(e[a]),n=s.family,r=s.stretch,i=s.style,o=s.weight;t[n]=t[n]||{},t[n][r]=t[n][r]||{},t[n][r][i]=t[n][r][i]||{},t[n][r][i][o]=s}return t}(a.concat(t))}return h}var f=null;Object.defineProperty(this,"fontFaces",{get:function(){return f},set:function(e){h=null,f=e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(e){var t;if(this.ctx.font=e,null!==(t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(e))){var a=t[1],s=(t[2],t[3]),n=t[4],r=(t[5],t[6]),i=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(n)[2];n="px"===i?Math.floor(parseFloat(n)*this.pdf.internal.scaleFactor):"em"===i?Math.floor(parseFloat(n)*this.pdf.getFontSize()):Math.floor(parseFloat(n)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(n);var o=function(e){var t,a,s=[],n=e.trim();if(""===n)return Bt;if(n in Lt)return[Lt[n]];for(;""!==n;){switch(a=null,t=(n=Ot(n)).charAt(0)){case'"':case"'":a=Tt(n.substring(1),t);break;default:a=Mt(n)}if(null===a)return Bt;if(s.push(a[0]),""!==(n=Ot(a[1]))&&","!==n.charAt(0))return Bt;n=n.replace(/^,/,"")}return s}(r);if(this.fontFaces){var l=function(e,t,a){for(var s=(a=a||{}).defaultFontFamily||"times",n=Object.assign({},Et,a.genericFontFamilies||{}),r=null,i=null,o=0;o<t.length;++o)if(n[(r=At(t[o])).family]&&(r.family=n[r.family]),e.hasOwnProperty(r.family)){i=e[r.family];break}if(!(i=i||e[s]))throw new Error("Could not find a font-family for the rule '"+Dt(r)+"' and default family '"+s+"'.");if(i=function(e,t){if(t[e])return t[e];var a=St[e],s=a<=St.normal?-1:1,n=Pt(t,_t,a,s);if(!n)throw new Error("Could not find a matching font-stretch value for "+e);return n}(r.stretch,i),i=function(e,t){if(t[e])return t[e];for(var a=wt[e],s=0;s<a.length;++s)if(t[a[s]])return t[a[s]];throw new Error("Could not find a matching font-style for "+e)}(r.style,i),!(i=function(e,t){if(t[e])return t[e];if(400===e&&t[500])return t[500];if(500===e&&t[400])return t[400];var a=kt[e],s=Pt(t,Ct,a,e<400?-1:1);if(!s)throw new Error("Could not find a matching font-weight for value "+e);return s}(r.weight,i)))throw new Error("Failed to resolve a font for the rule '"+Dt(r)+"'.");return i}(p(this.pdf,this.fontFaces),o.map((function(e){return{family:e,stretch:"normal",weight:s,style:a}})));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===s||parseInt(s,10)>=700||"bold"===a)&&(c="bold"),"italic"===a&&(c+="italic"),0===c.length&&(c="normal");for(var d="",u={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},h=0;h<o.length;h++){if(void 0!==this.pdf.internal.getFont(o[h],c,{noFallback:!0,disableWarning:!0})){d=o[h];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(o[h],"bold",{noFallback:!0,disableWarning:!0}))d=o[h],c="bold";else if(void 0!==this.pdf.internal.getFont(o[h],"normal",{noFallback:!0,disableWarning:!0})){d=o[h],c="normal";break}}if(""===d)for(var m=0;m<o.length;m++)if(u[o[m]]){d=u[o[m]];break}d=""===d?"Times":d,this.pdf.setFont(d,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(e){this.ctx.globalCompositeOperation=e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(e){this.ctx.globalAlpha=e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(e){this.ctx.lineDashOffset=e,F.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(e){this.ctx.lineDash=e,F.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(e){this.ctx.ignoreClearRect=Boolean(e)}})};h.prototype.setLineDash=function(e){this.lineDash=e},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){j.call(this,"fill",!1)},h.prototype.stroke=function(){j.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(e,t){if(isNaN(e)||isNaN(t))throw ae.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var a=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"mt",x:a.x,y:a.y}),this.ctx.lastPoint=new o(e,t)},h.prototype.closePath=function(){var e=new o(0,0),t=0;for(t=this.path.length-1;-1!==t;t--)if("begin"===this.path[t].type&&"object"===(0,s.A)(this.path[t+1])&&"number"==typeof this.path[t+1].x){e=new o(this.path[t+1].x,this.path[t+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(e.x,e.y)},h.prototype.lineTo=function(e,t){if(isNaN(e)||isNaN(t))throw ae.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var a=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"lt",x:a.x,y:a.y}),this.ctx.lastPoint=new o(a.x,a.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},h.prototype.quadraticCurveTo=function(e,t,a,s){if(isNaN(a)||isNaN(s)||isNaN(e)||isNaN(t))throw ae.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var n=this.ctx.transform.applyToPoint(new o(a,s)),r=this.ctx.transform.applyToPoint(new o(e,t));this.path.push({type:"qct",x1:r.x,y1:r.y,x:n.x,y:n.y}),this.ctx.lastPoint=new o(n.x,n.y)},h.prototype.bezierCurveTo=function(e,t,a,s,n,r){if(isNaN(n)||isNaN(r)||isNaN(e)||isNaN(t)||isNaN(a)||isNaN(s))throw ae.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var i=this.ctx.transform.applyToPoint(new o(n,r)),l=this.ctx.transform.applyToPoint(new o(e,t)),c=this.ctx.transform.applyToPoint(new o(a,s));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:i.x,y:i.y}),this.ctx.lastPoint=new o(i.x,i.y)},h.prototype.arc=function(e,t,a,s,n,r){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(s)||isNaN(n))throw ae.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(r=Boolean(r),!this.ctx.transform.isIdentity){var i=this.ctx.transform.applyToPoint(new o(e,t));e=i.x,t=i.y;var l=this.ctx.transform.applyToPoint(new o(0,a)),c=this.ctx.transform.applyToPoint(new o(0,0));a=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(n-s)>=2*Math.PI&&(s=0,n=2*Math.PI),this.path.push({type:"arc",x:e,y:t,radius:a,startAngle:s,endAngle:n,counterclockwise:r})},h.prototype.arcTo=function(e,t,a,s,n){throw new Error("arcTo not implemented.")},h.prototype.rect=function(e,t,a,s){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(s))throw ae.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(e,t),this.lineTo(e+a,t),this.lineTo(e+a,t+s),this.lineTo(e,t+s),this.lineTo(e,t),this.lineTo(e+a,t),this.lineTo(e,t)},h.prototype.fillRect=function(e,t,a,s){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(s))throw ae.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var n={};"butt"!==this.lineCap&&(n.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(n.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(e,t,a,s),this.fill(),n.hasOwnProperty("lineCap")&&(this.lineCap=n.lineCap),n.hasOwnProperty("lineJoin")&&(this.lineJoin=n.lineJoin)}},h.prototype.strokeRect=function(e,t,a,s){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(s))throw ae.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");f.call(this)||(this.beginPath(),this.rect(e,t,a,s),this.stroke())},h.prototype.clearRect=function(e,t,a,s){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(s))throw ae.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(e,t,a,s))},h.prototype.save=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,a=0;a<this.pdf.internal.getNumberOfPages();a++)this.pdf.setPage(a+1),this.pdf.internal.out("q");if(this.pdf.setPage(t),e){this.ctx.fontSize=this.pdf.internal.getFontSize();var s=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=s}},h.prototype.restore=function(e){e="boolean"!=typeof e||e;for(var t=this.pdf.internal.getCurrentPageInfo().pageNumber,a=0;a<this.pdf.internal.getNumberOfPages();a++)this.pdf.setPage(a+1),this.pdf.internal.out("Q");this.pdf.setPage(t),e&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(e){var t,a,s,n;if(!0===e.isCanvasGradient&&(e=e.getColor()),!e)return{r:0,g:0,b:0,a:0,style:e};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(e))t=0,a=0,s=0,n=0;else{var r=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(e);if(null!==r)t=parseInt(r[1]),a=parseInt(r[2]),s=parseInt(r[3]),n=1;else if(null!==(r=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(e)))t=parseInt(r[1]),a=parseInt(r[2]),s=parseInt(r[3]),n=parseFloat(r[4]);else{if(n=1,"string"==typeof e&&"#"!==e.charAt(0)){var i=new ce(e);e=i.ok?i.toHex():"#000000"}4===e.length?(t=e.substring(1,2),t+=t,a=e.substring(2,3),a+=a,s=e.substring(3,4),s+=s):(t=e.substring(1,3),a=e.substring(3,5),s=e.substring(5,7)),t=parseInt(t,16),a=parseInt(a,16),s=parseInt(s,16)}}return{r:t,g:a,b:s,a:n,style:e}},p=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},f=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};h.prototype.fillText=function(e,t,a,s){if(isNaN(t)||isNaN(a)||"string"!=typeof e)throw ae.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(s=isNaN(s)?void 0:s,!p.call(this)){var n=M(this.ctx.transform.rotation),r=this.ctx.transform.scaleX;P.call(this,{text:e,x:t,y:a,scale:r,angle:n,align:this.textAlign,maxWidth:s})}},h.prototype.strokeText=function(e,t,a,s){if(isNaN(t)||isNaN(a)||"string"!=typeof e)throw ae.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!f.call(this)){s=isNaN(s)?void 0:s;var n=M(this.ctx.transform.rotation),r=this.ctx.transform.scaleX;P.call(this,{text:e,x:t,y:a,scale:r,renderingMode:"stroke",angle:n,align:this.textAlign,maxWidth:s})}},h.prototype.measureText=function(e){if("string"!=typeof e)throw ae.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var t=this.pdf,a=this.pdf.internal.scaleFactor,s=t.internal.getFontSize(),n=t.getStringUnitWidth(e)*s/t.internal.scaleFactor;return new function(e){var t=(e=e||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return t}}),this}({width:n*=Math.round(96*a/72*1e4)/1e4})},h.prototype.scale=function(e,t){if(isNaN(e)||isNaN(t))throw ae.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var a=new c(e,0,0,t,0,0);this.ctx.transform=this.ctx.transform.multiply(a)},h.prototype.rotate=function(e){if(isNaN(e))throw ae.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var t=new c(Math.cos(e),Math.sin(e),-Math.sin(e),Math.cos(e),0,0);this.ctx.transform=this.ctx.transform.multiply(t)},h.prototype.translate=function(e,t){if(isNaN(e)||isNaN(t))throw ae.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var a=new c(1,0,0,1,e,t);this.ctx.transform=this.ctx.transform.multiply(a)},h.prototype.transform=function(e,t,a,s,n,r){if(isNaN(e)||isNaN(t)||isNaN(a)||isNaN(s)||isNaN(n)||isNaN(r))throw ae.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var i=new c(e,t,a,s,n,r);this.ctx.transform=this.ctx.transform.multiply(i)},h.prototype.setTransform=function(e,t,a,s,n,r){e=isNaN(e)?1:e,t=isNaN(t)?0:t,a=isNaN(a)?0:a,s=isNaN(s)?1:s,n=isNaN(n)?0:n,r=isNaN(r)?0:r,this.ctx.transform=new c(e,t,a,s,n,r)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(e,t,a,s,n,r,i,o,d){var u=this.pdf.getImageProperties(e),h=1,m=1,p=1,f=1;void 0!==s&&void 0!==o&&(p=o/s,f=d/n,h=u.width/s*o/s,m=u.height/n*d/n),void 0===r&&(r=t,i=a,t=0,a=0),void 0!==s&&void 0===o&&(o=s,d=n),void 0===s&&void 0===o&&(o=u.width,d=u.height);for(var b,j=this.ctx.transform.decompose(),w=M(j.rotate.shx),_=new c,S=(_=(_=(_=_.multiply(j.translate)).multiply(j.skew)).multiply(j.scale)).applyToRectangle(new l(r-t*p,i-a*f,s*h,n*m)),C=x.call(this,S),k=[],A=0;A<C.length;A+=1)-1===k.indexOf(C[A])&&k.push(C[A]);if(y(k),this.autoPaging)for(var P=k[0],E=k[k.length-1],L=P;L<E+1;L++){this.pdf.setPage(L);var D=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],O=1===L?this.posY+this.margin[0]:this.margin[0],T=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],R=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],I=1===L?0:T+(L-2)*R;if(0!==this.ctx.clip_path.length){var F=this.path;b=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(b,this.posX+this.margin[3],-I+O+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=F}var z=JSON.parse(JSON.stringify(S));z=v([z],this.posX+this.margin[3],-I+O+this.ctx.prevPageLastElemOffset)[0];var B=(L>P||L<E)&&g.call(this);B&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],D,R,null).clip().discardPath()),this.pdf.addImage(e,"JPEG",z.x,z.y,z.w,z.h,null,null,w),B&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(e,"JPEG",S.x,S.y,S.w,S.h,null,null,w)};var x=function(e,t,a){var s=[];t=t||this.pdf.internal.pageSize.width,a=a||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var n=this.posY+this.ctx.prevPageLastElemOffset;switch(e.type){default:case"mt":case"lt":s.push(Math.floor((e.y+n)/a)+1);break;case"arc":s.push(Math.floor((e.y+n-e.radius)/a)+1),s.push(Math.floor((e.y+n+e.radius)/a)+1);break;case"qct":var r=R(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x,e.y);s.push(Math.floor((r.y+n)/a)+1),s.push(Math.floor((r.y+r.h+n)/a)+1);break;case"bct":var i=I(this.ctx.lastPoint.x,this.ctx.lastPoint.y,e.x1,e.y1,e.x2,e.y2,e.x,e.y);s.push(Math.floor((i.y+n)/a)+1),s.push(Math.floor((i.y+i.h+n)/a)+1);break;case"rect":s.push(Math.floor((e.y+n)/a)+1),s.push(Math.floor((e.y+e.h+n)/a)+1)}for(var o=0;o<s.length;o+=1)for(;this.pdf.internal.getNumberOfPages()<s[o];)b.call(this);return s},b=function(){var e=this.fillStyle,t=this.strokeStyle,a=this.font,s=this.lineCap,n=this.lineWidth,r=this.lineJoin;this.pdf.addPage(),this.fillStyle=e,this.strokeStyle=t,this.font=a,this.lineCap=s,this.lineWidth=n,this.lineJoin=r},v=function(e,t,a){for(var s=0;s<e.length;s++)switch(e[s].type){case"bct":e[s].x2+=t,e[s].y2+=a;case"qct":e[s].x1+=t,e[s].y1+=a;default:e[s].x+=t,e[s].y+=a}return e},y=function(e){return e.sort((function(e,t){return e-t}))},j=function(e,t){for(var a,s,n=this.fillStyle,r=this.strokeStyle,i=this.lineCap,o=this.lineWidth,l=Math.abs(o*this.ctx.transform.scaleX),c=this.lineJoin,d=JSON.parse(JSON.stringify(this.path)),u=JSON.parse(JSON.stringify(this.path)),h=[],m=0;m<u.length;m++)if(void 0!==u[m].x)for(var p=x.call(this,u[m]),f=0;f<p.length;f+=1)-1===h.indexOf(p[f])&&h.push(p[f]);for(var j=0;j<h.length;j++)for(;this.pdf.internal.getNumberOfPages()<h[j];)b.call(this);if(y(h),this.autoPaging)for(var w=h[0],_=h[h.length-1],S=w;S<_+1;S++){this.pdf.setPage(S),this.fillStyle=n,this.strokeStyle=r,this.lineCap=i,this.lineWidth=l,this.lineJoin=c;var C=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],k=1===S?this.posY+this.margin[0]:this.margin[0],A=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],P=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],E=1===S?0:A+(S-2)*P;if(0!==this.ctx.clip_path.length){var L=this.path;a=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(a,this.posX+this.margin[3],-E+k+this.ctx.prevPageLastElemOffset),N.call(this,e,!0),this.path=L}if(s=JSON.parse(JSON.stringify(d)),this.path=v(s,this.posX+this.margin[3],-E+k+this.ctx.prevPageLastElemOffset),!1===t||0===S){var D=(S>w||S<_)&&g.call(this);D&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],C,P,null).clip().discardPath()),N.call(this,e,t),D&&this.pdf.restoreGraphicsState()}this.lineWidth=o}else this.lineWidth=l,N.call(this,e,t),this.lineWidth=o;this.path=d},N=function(e,t){if(("stroke"!==e||t||!f.call(this))&&("stroke"===e||t||!p.call(this))){for(var a,s,n=[],r=this.path,i=0;i<r.length;i++){var o=r[i];switch(o.type){case"begin":n.push({begin:!0});break;case"close":n.push({close:!0});break;case"mt":n.push({start:o,deltas:[],abs:[]});break;case"lt":var l=n.length;if(r[i-1]&&!isNaN(r[i-1].x)&&(a=[o.x-r[i-1].x,o.y-r[i-1].y],l>0))for(;l>=0;l--)if(!0!==n[l-1].close&&!0!==n[l-1].begin){n[l-1].deltas.push(a),n[l-1].abs.push(o);break}break;case"bct":a=[o.x1-r[i-1].x,o.y1-r[i-1].y,o.x2-r[i-1].x,o.y2-r[i-1].y,o.x-r[i-1].x,o.y-r[i-1].y],n[n.length-1].deltas.push(a);break;case"qct":var c=r[i-1].x+2/3*(o.x1-r[i-1].x),d=r[i-1].y+2/3*(o.y1-r[i-1].y),u=o.x+2/3*(o.x1-o.x),h=o.y+2/3*(o.y1-o.y),m=o.x,g=o.y;a=[c-r[i-1].x,d-r[i-1].y,u-r[i-1].x,h-r[i-1].y,m-r[i-1].x,g-r[i-1].y],n[n.length-1].deltas.push(a);break;case"arc":n.push({deltas:[],abs:[],arc:!0}),Array.isArray(n[n.length-1].abs)&&n[n.length-1].abs.push(o)}}s=t?null:"stroke"===e?"stroke":"fill";for(var x=!1,b=0;b<n.length;b++)if(n[b].arc)for(var v=n[b].abs,y=0;y<v.length;y++){var j=v[y];"arc"===j.type?S.call(this,j.x,j.y,j.radius,j.startAngle,j.endAngle,j.counterclockwise,void 0,t,!x):E.call(this,j.x,j.y),x=!0}else if(!0===n[b].close)this.pdf.internal.out("h"),x=!1;else if(!0!==n[b].begin){var N=n[b].start.x,w=n[b].start.y;L.call(this,n[b].deltas,N,w),x=!0}s&&C.call(this,s),t&&k.call(this)}},w=function(e){var t=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,a=t*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return e-a;case"top":return e+t-a;case"hanging":return e+t-2*a;case"middle":return e+t/2-a;default:return e}},_=function(e){return e+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var e=function(){};return e.colorStops=[],e.addColorStop=function(e,t){this.colorStops.push([e,t])},e.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},e.isCanvasGradient=!0,e},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var S=function(e,t,a,s,n,r,i,o,l){for(var c=O.call(this,a,s,n,r),d=0;d<c.length;d++){var u=c[d];0===d&&(l?A.call(this,u.x1+e,u.y1+t):E.call(this,u.x1+e,u.y1+t)),D.call(this,e,t,u.x2,u.y2,u.x3,u.y3,u.x4,u.y4)}o?k.call(this):C.call(this,i)},C=function(e){switch(e){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},k=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(e,t){this.pdf.internal.out(a(e)+" "+n(t)+" m")},P=function(e){var t;switch(e.align){case"right":case"end":t="right";break;case"center":t="center";break;default:t="left"}var a=this.pdf.getTextDimensions(e.text),s=w.call(this,e.y),n=_.call(this,s)-a.h,r=this.ctx.transform.applyToPoint(new o(e.x,s)),i=this.ctx.transform.decompose(),d=new c;d=(d=(d=d.multiply(i.translate)).multiply(i.skew)).multiply(i.scale);for(var u,h,m,p=this.ctx.transform.applyToRectangle(new l(e.x,s,a.w,a.h)),f=d.applyToRectangle(new l(e.x,n,a.w,a.h)),b=x.call(this,f),j=[],S=0;S<b.length;S+=1)-1===j.indexOf(b[S])&&j.push(b[S]);if(y(j),this.autoPaging)for(var C=j[0],k=j[j.length-1],A=C;A<k+1;A++){this.pdf.setPage(A);var P=1===A?this.posY+this.margin[0]:this.margin[0],E=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],L=this.pdf.internal.pageSize.height-this.margin[2],D=L-this.margin[0],O=this.pdf.internal.pageSize.width-this.margin[1],T=O-this.margin[3],M=1===A?0:E+(A-2)*D;if(0!==this.ctx.clip_path.length){var R=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(u,this.posX+this.margin[3],-1*M+P),N.call(this,"fill",!0),this.path=R}var I=v([JSON.parse(JSON.stringify(f))],this.posX+this.margin[3],-M+P+this.ctx.prevPageLastElemOffset)[0];e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),m=this.lineWidth,this.lineWidth=m*e.scale);var F="text"!==this.autoPaging;if(F||I.y+I.h<=L){if(F||I.y>=P&&I.x<=O){var z=F?e.text:this.pdf.splitTextToSize(e.text,e.maxWidth||O-I.x)[0],B=v([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-M+P+this.ctx.prevPageLastElemOffset)[0],q=F&&(A>C||A<k)&&g.call(this);q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],T,D,null).clip().discardPath()),this.pdf.text(z,B.x,B.y,{angle:e.angle,align:t,renderingMode:e.renderingMode}),q&&this.pdf.restoreGraphicsState()}}else I.y<L&&(this.ctx.prevPageLastElemOffset+=L-I.y);e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=m)}else e.scale>=.01&&(h=this.pdf.internal.getFontSize(),this.pdf.setFontSize(h*e.scale),m=this.lineWidth,this.lineWidth=m*e.scale),this.pdf.text(e.text,r.x+this.posX,r.y+this.posY,{angle:e.angle,align:t,renderingMode:e.renderingMode,maxWidth:e.maxWidth}),e.scale>=.01&&(this.pdf.setFontSize(h),this.lineWidth=m)},E=function(e,t,s,r){s=s||0,r=r||0,this.pdf.internal.out(a(e+s)+" "+n(t+r)+" l")},L=function(e,t,a){return this.pdf.lines(e,t,a,null,null)},D=function(e,a,s,n,o,l,c,d){this.pdf.internal.out([t(r(s+e)),t(i(n+a)),t(r(o+e)),t(i(l+a)),t(r(c+e)),t(i(d+a)),"c"].join(" "))},O=function(e,t,a,s){for(var n=2*Math.PI,r=Math.PI/2;t>a;)t-=n;var i=Math.abs(a-t);i<n&&s&&(i=n-i);for(var o=[],l=s?-1:1,c=t;i>1e-5;){var d=c+l*Math.min(i,r);o.push(T.call(this,e,c,d)),i-=Math.abs(d-c),c=d}return o},T=function(e,t,a){var s=(a-t)/2,n=e*Math.cos(s),r=e*Math.sin(s),i=n,o=-r,l=i*i+o*o,c=l+i*n+o*r,d=4/3*(Math.sqrt(2*l*c)-c)/(i*r-o*n),u=i-d*o,h=o+d*i,m=u,p=-h,f=s+t,g=Math.cos(f),x=Math.sin(f);return{x1:e*Math.cos(t),y1:e*Math.sin(t),x2:u*g-h*x,y2:u*x+h*g,x3:m*g-p*x,y3:m*x+p*g,x4:e*Math.cos(a),y4:e*Math.sin(a)}},M=function(e){return 180*e/Math.PI},R=function(e,t,a,s,n,r){var i=e+.5*(a-e),o=t+.5*(s-t),c=n+.5*(a-n),d=r+.5*(s-r),u=Math.min(e,n,i,c),h=Math.max(e,n,i,c),m=Math.min(t,r,o,d),p=Math.max(t,r,o,d);return new l(u,m,h-u,p-m)},I=function(e,t,a,s,n,r,i,o){var c,d,u,h,m,p,f,g,x,b,v,y,j,N,w=a-e,_=s-t,S=n-a,C=r-s,k=i-n,A=o-r;for(d=0;d<41;d++)x=(f=(u=e+(c=d/40)*w)+c*((m=a+c*S)-u))+c*(m+c*(n+c*k-m)-f),b=(g=(h=t+c*_)+c*((p=s+c*C)-h))+c*(p+c*(r+c*A-p)-g),0==d?(v=x,y=b,j=x,N=b):(v=Math.min(v,x),y=Math.min(y,b),j=Math.max(j,x),N=Math.max(N,b));return new l(Math.round(v),Math.round(y),Math.round(j-v),Math.round(N-y))},F=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var e,t,a=(e=this.ctx.lineDash,t=this.ctx.lineDashOffset,JSON.stringify({lineDash:e,lineDashOffset:t}));this.prevLineDash!==a&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=a)}}}(Oe.API),function(e){var t=function(e){var t,a,s,n,r,i,o,l,c,d;for(/[^\x00-\xFF]/.test(e),a=[],s=0,n=(e+=t="\0\0\0\0".slice(e.length%4||4)).length;n>s;s+=4)0!==(r=(e.charCodeAt(s)<<24)+(e.charCodeAt(s+1)<<16)+(e.charCodeAt(s+2)<<8)+e.charCodeAt(s+3))?(i=(r=((r=((r=((r=(r-(d=r%85))/85)-(c=r%85))/85)-(l=r%85))/85)-(o=r%85))/85)%85,a.push(i+33,o+33,l+33,c+33,d+33)):a.push(122);return function(e,t){for(var a=t;a>0;a--)e.pop()}(a,t.length),String.fromCharCode.apply(String,a)+"~>"},a=function(e){var t,a,s,n,r,i=String,o="length",l=255,c="charCodeAt",d="slice",u="replace";for(e[d](-2),e=e[d](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),s=[],n=0,r=(e+=t="uuuuu"[d](e[o]%5||5))[o];r>n;n+=5)a=52200625*(e[c](n)-33)+614125*(e[c](n+1)-33)+7225*(e[c](n+2)-33)+85*(e[c](n+3)-33)+(e[c](n+4)-33),s.push(l&a>>24,l&a>>16,l&a>>8,l&a);return function(e,t){for(var a=t;a>0;a--)e.pop()}(s,t[o]),i.fromCharCode.apply(i,s)},s=function(e){var t=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(e=e.replace(/\s/g,"")).indexOf(">")&&(e=e.substr(0,e.indexOf(">"))),e.length%2&&(e+="0"),!1===t.test(e))return"";for(var a="",s=0;s<e.length;s+=2)a+=String.fromCharCode("0x"+(e[s]+e[s+1]));return a},n=function(e){for(var t=new Uint8Array(e.length),a=e.length;a--;)t[a]=e.charCodeAt(a);return(t=K(t)).reduce((function(e,t){return e+String.fromCharCode(t)}),"")};e.processDataByFilters=function(e,r){var i=0,o=e||"",l=[];for("string"==typeof(r=r||[])&&(r=[r]),i=0;i<r.length;i+=1)switch(r[i]){case"ASCII85Decode":case"/ASCII85Decode":o=a(o),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":o=t(o),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":o=s(o),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":o=o.split("").map((function(e){return("0"+e.charCodeAt().toString(16)).slice(-2)})).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":o=n(o),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+r[i]+'" is not implemented')}return{data:o,reverseChain:l.reverse().join(" ")}}}(Oe.API),(zt=Oe.API).loadFile=function(e,t,a){return function(e,t,a){t=!1!==t,a="function"==typeof a?a:function(){};var s=void 0;try{s=function(e,t,a){var s=new XMLHttpRequest,n=0,r=function(e){var t=e.length,a=[],s=String.fromCharCode;for(n=0;n<t;n+=1)a.push(s(255&e.charCodeAt(n)));return a.join("")};if(s.open("GET",e,!t),s.overrideMimeType("text/plain; charset=x-user-defined"),!1===t&&(s.onload=function(){200===s.status?a(r(this.responseText)):a(void 0)}),s.send(null),t&&200===s.status)return r(s.responseText)}(e,t,a)}catch(e){}return s}(e,t,a)},zt.loadImageFile=zt.loadFile,function(e){function t(){return(ee.html2canvas?Promise.resolve(ee.html2canvas):a.e(239).then(a.t.bind(a,5239,23))).catch((function(e){return Promise.reject(new Error("Could not load html2canvas: "+e))})).then((function(e){return e.default?e.default:e}))}function n(){return(ee.DOMPurify?Promise.resolve(ee.DOMPurify):a.e(213).then(a.t.bind(a,6213,23))).catch((function(e){return Promise.reject(new Error("Could not load dompurify: "+e))})).then((function(e){return e.default?e.default:e}))}var r=function(e){var t=(0,s.A)(e);return"undefined"===t?"undefined":"string"===t||e instanceof String?"string":"number"===t||e instanceof Number?"number":"function"===t||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===t?"object":"unknown"},i=function(e,t){var a=document.createElement(e);for(var s in t.className&&(a.className=t.className),t.innerHTML&&t.dompurify&&(a.innerHTML=t.dompurify.sanitize(t.innerHTML)),t.style)a.style[s]=t.style[s];return a},o=function e(t){var a=Object.assign(e.convert(Promise.resolve()),JSON.parse(JSON.stringify(e.template))),s=e.convert(Promise.resolve(),a);return(s=s.setProgress(1,e,1,[e])).set(t)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(e,t){return e.__proto__=t||o.prototype,e},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(e,t){return this.then((function(){switch(t=t||function(e){switch(r(e)){case"string":return"string";case"element":return"canvas"===e.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(e)){case"string":return this.then(n).then((function(t){return this.set({src:i("div",{innerHTML:e,dompurify:t})})}));case"element":return this.set({src:e});case"canvas":return this.set({canvas:e});case"img":return this.set({img:e});default:return this.error("Unknown source type.")}}))},o.prototype.to=function(e){switch(e){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var e={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},t=function e(t,a){for(var s=3===t.nodeType?document.createTextNode(t.nodeValue):t.cloneNode(!1),n=t.firstChild;n;n=n.nextSibling)!0!==a&&1===n.nodeType&&"SCRIPT"===n.nodeName||s.appendChild(e(n,a));return 1===t.nodeType&&("CANVAS"===t.nodeName?(s.width=t.width,s.height=t.height,s.getContext("2d").drawImage(t,0,0)):"TEXTAREA"!==t.nodeName&&"SELECT"!==t.nodeName||(s.value=t.value),s.addEventListener("load",(function(){s.scrollTop=t.scrollTop,s.scrollLeft=t.scrollLeft}),!0)),s}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===t.tagName&&(e.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:e}),this.prop.container.appendChild(t),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},o.prototype.toCanvas=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=Object.assign({},this.opt.html2canvas);return delete t.onrendered,e(this.prop.container,t)})).then((function(e){(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},o.prototype.toContext2d=function(){var e=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(e).then(t).then((function(e){var t=this.opt.jsPDF,a=this.opt.fontFaces,s="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,n=Object.assign({async:!0,allowTaint:!0,scale:s,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete n.onrendered,t.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,t.context2d.posX=this.opt.x,t.context2d.posY=this.opt.y,t.context2d.margin=this.opt.margin,t.context2d.fontFaces=a,a)for(var r=0;r<a.length;++r){var i=a[r],o=i.src.find((function(e){return"truetype"===e.format}));o&&t.addFont(o.url,i.ref.name,i.ref.style)}return n.windowHeight=n.windowHeight||0,n.windowHeight=0==n.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):n.windowHeight,t.context2d.save(!0),e(this.prop.container,n)})).then((function(e){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(e),this.prop.canvas=e,document.body.removeChild(this.prop.overlay)}))},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var e=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=e}))},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},o.prototype.output=function(e,t,a){return"img"===(a=a||"pdf").toLowerCase()||"image"===a.toLowerCase()?this.outputImg(e,t):this.outputPdf(e,t)},o.prototype.outputPdf=function(e,t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(e,t)}))},o.prototype.outputImg=function(e){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(e){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+e+'" is not supported.'}}))},o.prototype.save=function(e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(e?{filename:e}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},o.prototype.set=function(e){if("object"!==r(e))return this;var t=Object.keys(e||{}).map((function(t){if(t in o.template.prop)return function(){this.prop[t]=e[t]};switch(t){case"margin":return this.setMargin.bind(this,e.margin);case"jsPDF":return function(){return this.opt.jsPDF=e.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,e.pageSize);default:return function(){this.opt[t]=e[t]}}}),this);return this.then((function(){return this.thenList(t)}))},o.prototype.get=function(e,t){return this.then((function(){var a=e in o.template.prop?this.prop[e]:this.opt[e];return t?t(a):a}))},o.prototype.setMargin=function(e){return this.then((function(){switch(r(e)){case"number":e=[e,e,e,e];case"array":if(2===e.length&&(e=[e[0],e[1],e[0],e[1]]),4===e.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=e})).then(this.setPageSize)},o.prototype.setPageSize=function(e){function t(e,t){return Math.floor(e*t/72*96)}return this.then((function(){(e=e||Oe.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(e.inner={width:e.width-this.opt.margin[1]-this.opt.margin[3],height:e.height-this.opt.margin[0]-this.opt.margin[2]},e.inner.px={width:t(e.inner.width,e.k),height:t(e.inner.height,e.k)},e.inner.ratio=e.inner.height/e.inner.width),this.prop.pageSize=e}))},o.prototype.setProgress=function(e,t,a,s){return null!=e&&(this.progress.val=e),null!=t&&(this.progress.state=t),null!=a&&(this.progress.n=a),null!=s&&(this.progress.stack=s),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(e,t,a,s){return this.setProgress(e?this.progress.val+e:null,t||null,a?this.progress.n+a:null,s?this.progress.stack.concat(s):null)},o.prototype.then=function(e,t){var a=this;return this.thenCore(e,t,(function(e,t){return a.updateProgress(null,null,1,[e]),Promise.prototype.then.call(this,(function(t){return a.updateProgress(null,e),t})).then(e,t).then((function(e){return a.updateProgress(1),e}))}))},o.prototype.thenCore=function(e,t,a){a=a||Promise.prototype.then,e&&(e=e.bind(this)),t&&(t=t.bind(this));var s=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:o.convert(Object.assign({},this),Promise.prototype),n=a.call(s,e,t);return o.convert(n,this.__proto__)},o.prototype.thenExternal=function(e,t){return Promise.prototype.then.call(this,e,t)},o.prototype.thenList=function(e){var t=this;return e.forEach((function(e){t=t.thenCore(e)})),t},o.prototype.catch=function(e){e&&(e=e.bind(this));var t=Promise.prototype.catch.call(this,e);return o.convert(t,this)},o.prototype.catchExternal=function(e){return Promise.prototype.catch.call(this,e)},o.prototype.error=function(e){return this.then((function(){throw new Error(e)}))},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Oe.getPageSize=function(e,t,a){if("object"===(0,s.A)(e)){var n=e;e=n.orientation,t=n.unit||t,a=n.format||a}t=t||"mm",a=a||"a4",e=(""+(e||"P")).toLowerCase();var r,i=(""+a).toLowerCase(),o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(t){case"pt":r=1;break;case"mm":r=72/25.4;break;case"cm":r=72/2.54;break;case"in":r=72;break;case"px":r=.75;break;case"pc":case"em":r=12;break;case"ex":r=6;break;default:throw"Invalid unit: "+t}var l,c=0,d=0;if(o.hasOwnProperty(i))c=o[i][1]/r,d=o[i][0]/r;else try{c=a[1],d=a[0]}catch(zt){throw new Error("Invalid format: "+a)}if("p"===e||"portrait"===e)e="p",d>c&&(l=d,d=c,c=l);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",c>d&&(l=d,d=c,c=l)}return{width:d,height:c,unit:t,k:r,orientation:e}},e.html=function(e,t){(t=t||{}).callback=t.callback||function(){},t.html2canvas=t.html2canvas||{},t.html2canvas.canvas=t.html2canvas.canvas||this.canvas,t.jsPDF=t.jsPDF||this,t.fontFaces=t.fontFaces?t.fontFaces.map(At):null;var a=new o(t);return t.worker?a:a.from(e).doCallback()}}(Oe.API),Oe.API.addJS=function(e){return Ft=e,this.internal.events.subscribe("postPutResources",(function(){Rt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Rt+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),It=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ft+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==Rt&&void 0!==It&&this.internal.out("/Names <</JavaScript "+Rt+" 0 R>>")})),this},function(e){var t;e.events.push(["postPutResources",function(){var e=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=e.outline.render().split(/\r\n/),n=0;n<s.length;n++){var r=s[n],i=a.exec(r);if(null!=i){var o=i[1];e.internal.newObjectDeferredBegin(o,!1)}e.internal.write(r)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(n=0;n<l;n++){var d=e.internal.newObject();c.push(d);var u=e.internal.getPageInfo(n+1);e.internal.write("<< /D["+u.objId+" 0 R /XYZ null null null]>> endobj")}var h=e.internal.newObject();for(e.internal.write("<< /Names [ "),n=0;n<c.length;n++)e.internal.write("(page_"+(n+1)+")"+c[n]+" 0 R");e.internal.write(" ] >>","endobj"),t=e.internal.newObject(),e.internal.write("<< /Dests "+h+" 0 R"),e.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var e=this;e.outline={createNamedDestinations:!1,root:{children:[]}},e.outline.add=function(e,t,a){var s={title:t,options:a,children:[]};return null==e&&(e=this.root),e.children.push(s),s},e.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=e,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},e.outline.genIds_r=function(t){t.id=e.internal.newObjectDeferred();for(var a=0;a<t.children.length;a++)this.genIds_r(t.children[a])},e.outline.renderRoot=function(e){this.objStart(e),this.line("/Type /Outlines"),e.children.length>0&&(this.line("/First "+this.makeRef(e.children[0])),this.line("/Last "+this.makeRef(e.children[e.children.length-1]))),this.line("/Count "+this.count_r({count:0},e)),this.objEnd()},e.outline.renderItems=function(t){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<t.children.length;s++){var n=t.children[s];this.objStart(n),this.line("/Title "+this.makeString(n.title)),this.line("/Parent "+this.makeRef(t)),s>0&&this.line("/Prev "+this.makeRef(t.children[s-1])),s<t.children.length-1&&this.line("/Next "+this.makeRef(t.children[s+1])),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1])));var r=this.count=this.count_r({count:0},n);if(r>0&&this.line("/Count "+r),n.options&&n.options.pageNumber){var i=e.internal.getPageInfo(n.options.pageNumber);this.line("/Dest ["+i.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var o=0;o<t.children.length;o++)this.renderItems(t.children[o])},e.outline.line=function(e){this.ctx.val+=e+"\r\n"},e.outline.makeRef=function(e){return e.id+" 0 R"},e.outline.makeString=function(t){return"("+e.internal.pdfEscape(t)+")"},e.outline.objStart=function(e){this.ctx.val+="\r\n"+e.id+" 0 obj\r\n<<\r\n"},e.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},e.outline.count_r=function(e,t){for(var a=0;a<t.children.length;a++)e.count++,this.count_r(e,t.children[a]);return e.count}}])}(Oe.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(e,a,s,n,r,i){var o,l=this.decode.DCT_DECODE,c=null;if("string"==typeof e||this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e)){switch(e=r||e,e=this.__addimage__.isArrayBuffer(e)?new Uint8Array(e):e,(o=function(e){for(var a,s=256*e.charCodeAt(4)+e.charCodeAt(5),n=e.length,r={width:0,height:0,numcomponents:1},i=4;i<n;i+=2){if(i+=s,-1!==t.indexOf(e.charCodeAt(i+1))){a=256*e.charCodeAt(i+5)+e.charCodeAt(i+6),r={width:256*e.charCodeAt(i+7)+e.charCodeAt(i+8),height:a,numcomponents:e.charCodeAt(i+9)};break}s=256*e.charCodeAt(i+2)+e.charCodeAt(i+3)}return r}(e=this.__addimage__.isArrayBufferView(e)?this.__addimage__.arrayBufferToBinaryString(e):e)).numcomponents){case 1:i=this.color_spaces.DEVICE_GRAY;break;case 4:i=this.color_spaces.DEVICE_CMYK;break;case 3:i=this.color_spaces.DEVICE_RGB}c={data:e,width:o.width,height:o.height,colorSpace:i,bitsPerComponent:8,filter:l,index:a,alias:s}}return c}}(Oe.API);var qt,Ut,Ht,Wt,Vt,Gt=function(){var e,t,a;function s(e){var t,a,s,n,r,i,o,l,c,d,u,h,m,p;for(this.data=e,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},i=null;;){switch(t=this.readUInt32(),c=function(){var e,t;for(t=[],e=0;e<4;++e)t.push(String.fromCharCode(this.data[this.pos++]));return t}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(t);break;case"fcTL":i&&this.animation.frames.push(i),this.pos+=4,i={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},r=this.readUInt16(),n=this.readUInt16()||100,i.delay=1e3*r/n,i.disposeOp=this.data[this.pos++],i.blendOp=this.data[this.pos++],i.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,t-=4),e=(null!=i?i.data:void 0)||this.imgData,h=0;0<=t?h<t:h>t;0<=t?++h:--h)e.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(s=this.palette.length/3,this.transparency.indexed=this.read(t),this.transparency.indexed.length>s)throw new Error("More transparent colors than palette size");if((d=s-this.transparency.indexed.length)>0)for(m=0;0<=d?m<d:m>d;0<=d?++m:--m)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(t)[0];break;case 2:this.transparency.rgb=this.read(t)}break;case"tEXt":o=(u=this.read(t)).indexOf(0),l=String.fromCharCode.apply(String,u.slice(0,o)),this.text[l]=String.fromCharCode.apply(String,u.slice(o+1));break;case"IEND":return i&&this.animation.frames.push(i),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=t}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(e){var t,a;for(a=[],t=0;0<=e?t<e:t>e;0<=e?++t:--t)a.push(this.data[this.pos++]);return a},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(e){var t=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*t),s=0,n=this;if(null==e&&(e=this.imgData),0===e.length)return new Uint8Array(0);function r(r,i,o,l){var c,d,u,h,m,p,f,g,x,b,v,y,j,N,w,_,S,C,k,A,P,E=Math.ceil((n.width-r)/o),L=Math.ceil((n.height-i)/l),D=n.width==E&&n.height==L;for(N=t*E,y=D?a:new Uint8Array(N*L),p=e.length,j=0,d=0;j<L&&s<p;){switch(e[s++]){case 0:for(h=S=0;S<N;h=S+=1)y[d++]=e[s++];break;case 1:for(h=C=0;C<N;h=C+=1)c=e[s++],m=h<t?0:y[d-t],y[d++]=(c+m)%256;break;case 2:for(h=k=0;k<N;h=k+=1)c=e[s++],u=(h-h%t)/t,w=j&&y[(j-1)*N+u*t+h%t],y[d++]=(w+c)%256;break;case 3:for(h=A=0;A<N;h=A+=1)c=e[s++],u=(h-h%t)/t,m=h<t?0:y[d-t],w=j&&y[(j-1)*N+u*t+h%t],y[d++]=(c+Math.floor((m+w)/2))%256;break;case 4:for(h=P=0;P<N;h=P+=1)c=e[s++],u=(h-h%t)/t,m=h<t?0:y[d-t],0===j?w=_=0:(w=y[(j-1)*N+u*t+h%t],_=u&&y[(j-1)*N+(u-1)*t+h%t]),f=m+w-_,g=Math.abs(f-m),b=Math.abs(f-w),v=Math.abs(f-_),x=g<=b&&g<=v?m:b<=v?w:_,y[d++]=(c+x)%256;break;default:throw new Error("Invalid filter algorithm: "+e[s-1])}if(!D){var O=((i+j*l)*n.width+r)*t,T=j*N;for(h=0;h<E;h+=1){for(var M=0;M<t;M+=1)a[O++]=y[T++];O+=(o-1)*t}}j++}}return e=Q(e),1==n.interlaceMethod?(r(0,0,8,8),r(4,0,8,8),r(0,4,4,8),r(2,0,4,4),r(0,2,2,4),r(1,0,2,2),r(0,1,1,2)):r(0,0,1,1),a},s.prototype.decodePalette=function(){var e,t,a,s,n,r,i,o,l;for(a=this.palette,r=this.transparency.indexed||[],n=new Uint8Array((r.length||0)+a.length),s=0,e=0,t=i=0,o=a.length;i<o;t=i+=3)n[s++]=a[t],n[s++]=a[t+1],n[s++]=a[t+2],n[s++]=null!=(l=r[e++])?l:255;return n},s.prototype.copyToImageData=function(e,t){var a,s,n,r,i,o,l,c,d,u,h;if(s=this.colors,d=null,a=this.hasAlphaChannel,this.palette.length&&(d=null!=(h=this._decodedPalette)?h:this._decodedPalette=this.decodePalette(),s=4,a=!0),c=(n=e.data||e).length,i=d||t,r=o=0,1===s)for(;r<c;)l=d?4*t[r/4]:o,u=i[l++],n[r++]=u,n[r++]=u,n[r++]=u,n[r++]=a?i[l++]:255,o=l;else for(;r<c;)l=d?4*t[r/4]:o,n[r++]=i[l++],n[r++]=i[l++],n[r++]=i[l++],n[r++]=a?i[l++]:255,o=l},s.prototype.decode=function(){var e;return e=new Uint8Array(this.width*this.height*4),this.copyToImageData(e,this.decodePixels()),e};var n=function(){if("[object Window]"===Object.prototype.toString.call(ee)){try{t=ee.document.createElement("canvas"),a=t.getContext("2d")}catch(e){return!1}return!0}return!1};return n(),e=function(e){var s;if(!0===n())return a.width=e.width,a.height=e.height,a.clearRect(0,0,e.width,e.height),a.putImageData(e,0,0),(s=new Image).src=t.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(t){var a,s,n,r,i,o,l,c;if(this.animation){for(c=[],s=i=0,o=(l=this.animation.frames).length;i<o;s=++i)a=l[s],n=t.createImageData(a.width,a.height),r=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(n,r),a.imageData=n,c.push(a.image=e(n));return c}},s.prototype.renderFrame=function(e,t){var a,s,n;return a=(s=this.animation.frames)[t],n=s[t-1],0===t&&e.clearRect(0,0,this.width,this.height),1===(null!=n?n.disposeOp:void 0)?e.clearRect(n.xOffset,n.yOffset,n.width,n.height):2===(null!=n?n.disposeOp:void 0)&&e.putImageData(n.imageData,n.xOffset,n.yOffset),0===a.blendOp&&e.clearRect(a.xOffset,a.yOffset,a.width,a.height),e.drawImage(a.image,a.xOffset,a.yOffset)},s.prototype.animate=function(e){var t,a,s,n,r,i,o=this;return a=0,i=this.animation,n=i.numFrames,s=i.frames,r=i.numPlays,(t=function(){var i,l;if(i=a++%n,l=s[i],o.renderFrame(e,i),n>1&&a/n<r)return o.animation._timeout=setTimeout(t,l.delay)})()},s.prototype.stopAnimation=function(){var e;return clearTimeout(null!=(e=this.animation)?e._timeout:void 0)},s.prototype.render=function(e){var t,a;return e._png&&e._png.stopAnimation(),e._png=this,e.width=this.width,e.height=this.height,t=e.getContext("2d"),this.animation?(this.decodeFrames(t),this.animate(t)):(a=t.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),t.putImageData(a,0,0))},s}();function Yt(e){var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var a=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,n=e[t++],r=n>>7,i=1<<1+(7&n);e[t++],e[t++];var o=null,l=null;r&&(o=t,l=i,t+=3*i);var c=!0,d=[],u=0,h=null,m=0,p=null;for(this.width=a,this.height=s;c&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,p=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(0===k)break;t+=k}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var f=e[t++];u=e[t++]|e[t++]<<8,h=e[t++],0==(1&f)&&(h=null),m=f>>2&7,t++;break;case 254:for(;;){if(!((k=e[t++])>=0))throw Error("Invalid block size");if(0===k)break;t+=k}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,x=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,y=e[t++],j=y>>6&1,N=1<<1+(7&y),w=o,_=l,S=!1;y>>7&&(S=!0,w=t,_=N,t+=3*N);var C=t;for(t++;;){var k;if(!((k=e[t++])>=0))throw Error("Invalid block size");if(0===k)break;t+=k}d.push({x:g,y:x,width:b,height:v,has_local_palette:S,palette_offset:w,palette_size:_,data_offset:C,data_length:t-C,transparent_index:h,interlaced:!!j,delay:u,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return p},this.frameInfo=function(e){if(e<0||e>=d.length)throw new Error("Frame index out of range.");return d[e]},this.decodeAndBlitFrameBGRA=function(t,s){var n=this.frameInfo(t),r=n.width*n.height,i=new Uint8Array(r);$t(e,n.data_offset,i,r);var o=n.palette_offset,l=n.transparent_index;null===l&&(l=256);var c=n.width,d=a-c,u=c,h=4*(n.y*a+n.x),m=4*((n.y+n.height)*a+n.x),p=h,f=4*d;!0===n.interlaced&&(f+=4*a*7);for(var g=8,x=0,b=i.length;x<b;++x){var v=i[x];if(0===u&&(u=c,(p+=f)>=m&&(f=4*d+4*a*(g-1),p=h+(c+d)*(g<<1),g>>=1)),v===l)p+=4;else{var y=e[o+3*v],j=e[o+3*v+1],N=e[o+3*v+2];s[p++]=N,s[p++]=j,s[p++]=y,s[p++]=255}--u}},this.decodeAndBlitFrameRGBA=function(t,s){var n=this.frameInfo(t),r=n.width*n.height,i=new Uint8Array(r);$t(e,n.data_offset,i,r);var o=n.palette_offset,l=n.transparent_index;null===l&&(l=256);var c=n.width,d=a-c,u=c,h=4*(n.y*a+n.x),m=4*((n.y+n.height)*a+n.x),p=h,f=4*d;!0===n.interlaced&&(f+=4*a*7);for(var g=8,x=0,b=i.length;x<b;++x){var v=i[x];if(0===u&&(u=c,(p+=f)>=m&&(f=4*d+4*a*(g-1),p=h+(c+d)*(g<<1),g>>=1)),v===l)p+=4;else{var y=e[o+3*v],j=e[o+3*v+1],N=e[o+3*v+2];s[p++]=y,s[p++]=j,s[p++]=N,s[p++]=255}--u}}}function $t(e,t,a,s){for(var n=e[t++],r=1<<n,i=r+1,o=i+1,l=n+1,c=(1<<l)-1,d=0,u=0,h=0,m=e[t++],p=new Int32Array(4096),f=null;;){for(;d<16&&0!==m;)u|=e[t++]<<d,d+=8,1===m?m=e[t++]:--m;if(d<l)break;var g=u&c;if(u>>=l,d-=l,g!==r){if(g===i)break;for(var x=g<o?g:f,b=0,v=x;v>r;)v=p[v]>>8,++b;var y=v;if(h+b+(x!==g?1:0)>s)return void ae.log("Warning, gif stream longer than expected.");a[h++]=y;var j=h+=b;for(x!==g&&(a[h++]=y),v=x;b--;)v=p[v],a[--j]=255&v,v>>=8;null!==f&&o<4096&&(p[o++]=f<<8|y,o>=c+1&&l<12&&(++l,c=c<<1|1)),f=g}else o=i+1,c=(1<<(l=n+1))-1,f=null}return h!==s&&ae.log("Warning, gif stream shorter than expected."),a}function Xt(e){var t,a,s,n,r,i=Math.floor,o=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(65535),h=new Array(65535),m=new Array(64),p=new Array(64),f=[],g=0,x=7,b=new Array(64),v=new Array(64),y=new Array(64),j=new Array(256),N=new Array(2048),w=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],k=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],E=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],L=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function D(e,t){for(var a=0,s=0,n=new Array,r=1;r<=16;r++){for(var i=1;i<=e[r];i++)n[t[s]]=[],n[t[s]][0]=a,n[t[s]][1]=r,s++,a++;a*=2}return n}function O(e){for(var t=e[0],a=e[1]-1;a>=0;)t&1<<a&&(g|=1<<x),a--,--x<0&&(255==g?(T(255),T(0)):T(g),x=7,g=0)}function T(e){f.push(e)}function M(e){T(e>>8&255),T(255&e)}function R(e,t,a,s,n){for(var r,i=n[0],o=n[240],l=function(e,t){var a,s,n,r,i,o,l,c,d,u,h=0;for(d=0;d<8;++d){a=e[h],s=e[h+1],n=e[h+2],r=e[h+3],i=e[h+4],o=e[h+5],l=e[h+6];var p=a+(c=e[h+7]),f=a-c,g=s+l,x=s-l,b=n+o,v=n-o,y=r+i,j=r-i,N=p+y,w=p-y,_=g+b,S=g-b;e[h]=N+_,e[h+4]=N-_;var C=.707106781*(S+w);e[h+2]=w+C,e[h+6]=w-C;var k=.382683433*((N=j+v)-(S=x+f)),A=.5411961*N+k,P=1.306562965*S+k,E=.707106781*(_=v+x),L=f+E,D=f-E;e[h+5]=D+A,e[h+3]=D-A,e[h+1]=L+P,e[h+7]=L-P,h+=8}for(h=0,d=0;d<8;++d){a=e[h],s=e[h+8],n=e[h+16],r=e[h+24],i=e[h+32],o=e[h+40],l=e[h+48];var O=a+(c=e[h+56]),T=a-c,M=s+l,R=s-l,I=n+o,F=n-o,z=r+i,B=r-i,q=O+z,U=O-z,H=M+I,W=M-I;e[h]=q+H,e[h+32]=q-H;var V=.707106781*(W+U);e[h+16]=U+V,e[h+48]=U-V;var G=.382683433*((q=B+F)-(W=R+T)),Y=.5411961*q+G,$=1.306562965*W+G,X=.707106781*(H=F+R),J=T+X,K=T-X;e[h+40]=K+Y,e[h+24]=K-Y,e[h+8]=J+$,e[h+56]=J-$,h++}for(d=0;d<64;++d)u=e[d]*t[d],m[d]=u>0?u+.5|0:u-.5|0;return m}(e,t),c=0;c<64;++c)p[w[c]]=l[c];var d=p[0]-a;a=p[0],0==d?O(s[0]):(O(s[h[r=32767+d]]),O(u[r]));for(var f=63;f>0&&0==p[f];)f--;if(0==f)return O(i),a;for(var g,x=1;x<=f;){for(var b=x;0==p[x]&&x<=f;)++x;var v=x-b;if(v>=16){g=v>>4;for(var y=1;y<=g;++y)O(o);v&=15}r=32767+p[x],O(n[(v<<4)+h[r]]),O(u[r]),x++}return 63!=f&&O(i),a}function I(e){e=Math.min(Math.max(e,1),100),r!=e&&(function(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],a=0;a<64;a++){var s=i((t[a]*e+50)/100);s=Math.min(Math.max(s,1),255),o[w[a]]=s}for(var n=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],r=0;r<64;r++){var u=i((n[r]*e+50)/100);u=Math.min(Math.max(u,1),255),l[w[r]]=u}for(var h=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],m=0,p=0;p<8;p++)for(var f=0;f<8;f++)c[m]=1/(o[w[m]]*h[p]*h[f]*8),d[m]=1/(l[w[m]]*h[p]*h[f]*8),m++}(e<50?Math.floor(5e3/e):Math.floor(200-2*e)),r=e)}this.encode=function(e,r){r&&I(r),f=new Array,g=0,x=7,M(65496),M(65504),M(16),T(74),T(70),T(73),T(70),T(0),T(1),T(1),T(0),M(1),M(1),T(0),T(0),function(){M(65499),M(132),T(0);for(var e=0;e<64;e++)T(o[e]);T(1);for(var t=0;t<64;t++)T(l[t])}(),function(e,t){M(65472),M(17),T(8),M(t),M(e),T(3),T(1),T(17),T(0),T(2),T(17),T(1),T(3),T(17),T(1)}(e.width,e.height),function(){M(65476),M(418),T(0);for(var e=0;e<16;e++)T(_[e+1]);for(var t=0;t<=11;t++)T(S[t]);T(16);for(var a=0;a<16;a++)T(C[a+1]);for(var s=0;s<=161;s++)T(k[s]);T(1);for(var n=0;n<16;n++)T(A[n+1]);for(var r=0;r<=11;r++)T(P[r]);T(17);for(var i=0;i<16;i++)T(E[i+1]);for(var o=0;o<=161;o++)T(L[o])}(),M(65498),M(12),T(3),T(1),T(0),T(2),T(17),T(3),T(17),T(0),T(63),T(0);var i=0,u=0,h=0;g=0,x=7,this.encode.displayName="_encode_";for(var m,p,j,w,D,F,z,B,q,U=e.data,H=e.width,W=e.height,V=4*H,G=0;G<W;){for(m=0;m<V;){for(D=V*G+m,z=-1,B=0,q=0;q<64;q++)F=D+(B=q>>3)*V+(z=4*(7&q)),G+B>=W&&(F-=V*(G+1+B-W)),m+z>=V&&(F-=m+z-V+4),p=U[F++],j=U[F++],w=U[F++],b[q]=(N[p]+N[j+256|0]+N[w+512|0]>>16)-128,v[q]=(N[p+768|0]+N[j+1024|0]+N[w+1280|0]>>16)-128,y[q]=(N[p+1280|0]+N[j+1536|0]+N[w+1792|0]>>16)-128;i=R(b,c,i,t,s),u=R(v,d,u,a,n),h=R(y,d,h,a,n),m+=32}G+=8}if(x>=0){var Y=[];Y[1]=x+1,Y[0]=(1<<x+1)-1,O(Y)}return M(65497),new Uint8Array(f)},e=e||50,function(){for(var e=String.fromCharCode,t=0;t<256;t++)j[t]=e(t)}(),t=D(_,S),a=D(A,P),s=D(C,k),n=D(E,L),function(){for(var e=1,t=2,a=1;a<=15;a++){for(var s=e;s<t;s++)h[32767+s]=a,u[32767+s]=[],u[32767+s][1]=a,u[32767+s][0]=s;for(var n=-(t-1);n<=-e;n++)h[32767+n]=a,u[32767+n]=[],u[32767+n][1]=a,u[32767+n][0]=t-1+n;e<<=1,t<<=1}}(),function(){for(var e=0;e<256;e++)N[e]=19595*e,N[e+256|0]=38470*e,N[e+512|0]=7471*e+32768,N[e+768|0]=-11059*e,N[e+1024|0]=-21709*e,N[e+1280|0]=32768*e+8421375,N[e+1536|0]=-27439*e,N[e+1792|0]=-5329*e}(),I(e)}function Jt(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Kt(e){function t(e){if(!e)throw Error("assert :P")}function a(e,t,a){for(var s=0;4>s;s++)if(e[t+s]!=a.charCodeAt(s))return!0;return!1}function s(e,t,a,s,n){for(var r=0;r<n;r++)e[t+r]=a[s+r]}function n(e,t,a,s){for(var n=0;n<s;n++)e[t+n]=a}function r(e){return new Int32Array(e)}function i(e,t){for(var a=[],s=0;s<e;s++)a.push(new t);return a}function o(e,t){var a=[];return function e(a,s,n){for(var r=n[s],i=0;i<r&&(a.push(n.length>s+1?[]:new t),!(n.length<s+1));i++)e(a[i],s+1,n)}(a,0,e),a}var l=function(){var e=this;function l(e,t){for(var a=1<<t-1>>>0;e&a;)a>>>=1;return a?(e&a-1)+a:e}function c(e,a,s,n,r){t(!(n%s));do{e[a+(n-=s)]=r}while(0<n)}function d(e,a,s,n,i){if(t(2328>=i),512>=i)var o=r(512);else if(null==(o=r(i)))return 0;return function(e,a,s,n,i,o){var d,h,m=a,p=1<<s,f=r(16),g=r(16);for(t(0!=i),t(null!=n),t(null!=e),t(0<s),h=0;h<i;++h){if(15<n[h])return 0;++f[n[h]]}if(f[0]==i)return 0;for(g[1]=0,d=1;15>d;++d){if(f[d]>1<<d)return 0;g[d+1]=g[d]+f[d]}for(h=0;h<i;++h)d=n[h],0<n[h]&&(o[g[d]++]=h);if(1==g[15])return(n=new u).g=0,n.value=o[0],c(e,m,1,p,n),p;var x,b=-1,v=p-1,y=0,j=1,N=1,w=1<<s;for(h=0,d=1,i=2;d<=s;++d,i<<=1){if(j+=N<<=1,0>(N-=f[d]))return 0;for(;0<f[d];--f[d])(n=new u).g=d,n.value=o[h++],c(e,m+y,i,w,n),y=l(y,d)}for(d=s+1,i=2;15>=d;++d,i<<=1){if(j+=N<<=1,0>(N-=f[d]))return 0;for(;0<f[d];--f[d]){if(n=new u,(y&v)!=b){for(m+=w,x=1<<(b=d)-s;15>b&&!(0>=(x-=f[b]));)++b,x<<=1;p+=w=1<<(x=b-s),e[a+(b=y&v)].g=x+s,e[a+b].value=m-a-b}n.g=d-s,n.value=o[h++],c(e,m+(y>>s),i,w,n),y=l(y,d)}}return j!=2*g[15]-1?0:p}(e,a,s,n,i,o)}function u(){this.value=this.g=0}function h(){this.value=this.g=0}function m(){this.G=i(5,u),this.H=r(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=i(Fa,h)}function p(e,a,s,n){t(null!=e),t(null!=a),t(2147483648>n),e.Ca=254,e.I=0,e.b=-8,e.Ka=0,e.oa=a,e.pa=s,e.Jd=a,e.Yc=s+n,e.Zc=4<=n?s+n-4+1:s,C(e)}function f(e,t){for(var a=0;0<t--;)a|=A(e,128)<<t;return a}function g(e,t){var a=f(e,t);return k(e)?-a:a}function x(e,a,s,n){var r,i=0;for(t(null!=e),t(null!=a),t(4294967288>n),e.Sb=n,e.Ra=0,e.u=0,e.h=0,4<n&&(n=4),r=0;r<n;++r)i+=a[s+r]<<8*r;e.Ra=i,e.bb=n,e.oa=a,e.pa=s}function b(e){for(;8<=e.u&&e.bb<e.Sb;)e.Ra>>>=8,e.Ra+=e.oa[e.pa+e.bb]<<qa-8>>>0,++e.bb,e.u-=8;w(e)&&(e.h=1,e.u=0)}function v(e,a){if(t(0<=a),!e.h&&a<=Ba){var s=N(e)&za[a];return e.u+=a,b(e),s}return e.h=1,e.u=0}function y(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function j(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function N(e){return e.Ra>>>(e.u&qa-1)>>>0}function w(e){return t(e.bb<=e.Sb),e.h||e.bb==e.Sb&&e.u>qa}function _(e,t){e.u=t,e.h=w(e)}function S(e){e.u>=Ua&&(t(e.u>=Ua),b(e))}function C(e){t(null!=e&&null!=e.oa),e.pa<e.Zc?(e.I=(e.oa[e.pa++]|e.I<<8)>>>0,e.b+=8):(t(null!=e&&null!=e.oa),e.pa<e.Yc?(e.b+=8,e.I=e.oa[e.pa++]|e.I<<8):e.Ka?e.b=0:(e.I<<=8,e.b+=8,e.Ka=1))}function k(e){return f(e,1)}function A(e,t){var a=e.Ca;0>e.b&&C(e);var s=e.b,n=a*t>>>8,r=(e.I>>>s>n)+0;for(r?(a-=n,e.I-=n+1<<s>>>0):a=n+1,s=a,n=0;256<=s;)n+=8,s>>=8;return s=7^n+Ha[s],e.b-=s,e.Ca=(a<<s)-1,r}function P(e,t,a){e[t+0]=a>>24&255,e[t+1]=a>>16&255,e[t+2]=a>>8&255,e[t+3]=255&a}function E(e,t){return e[t+0]|e[t+1]<<8}function L(e,t){return E(e,t)|e[t+2]<<16}function D(e,t){return E(e,t)|E(e,t+2)<<16}function O(e,a){var s=1<<a;return t(null!=e),t(0<a),e.X=r(s),null==e.X?0:(e.Mb=32-a,e.Xa=a,1)}function T(e,a){t(null!=e),t(null!=a),t(e.Xa==a.Xa),s(a.X,0,e.X,0,1<<a.Xa)}function M(){this.X=[],this.Xa=this.Mb=0}function R(e,a,s,n){t(null!=s),t(null!=n);var r=s[0],i=n[0];return 0==r&&(r=(e*i+a/2)/a),0==i&&(i=(a*r+e/2)/e),0>=r||0>=i?0:(s[0]=r,n[0]=i,1)}function I(e,t){return e+(1<<t)-1>>>t}function F(e,t){return((4278255360&e)+(4278255360&t)>>>0&4278255360)+((16711935&e)+(16711935&t)>>>0&16711935)>>>0}function z(t,a){e[a]=function(a,s,n,r,i,o,l){var c;for(c=0;c<i;++c){var d=e[t](o[l+c-1],n,r+c);o[l+c]=F(a[s+c],d)}}}function B(){this.ud=this.hd=this.jd=0}function q(e,t){return((4278124286&(e^t))>>>1)+(e&t)>>>0}function U(e){return 0<=e&&256>e?e:0>e?0:255<e?255:void 0}function H(e,t){return U(e+(e-t+.5>>1))}function W(e,t,a){return Math.abs(t-a)-Math.abs(e-a)}function V(e,t,a,s,n,r,i){for(s=r[i-1],a=0;a<n;++a)r[i+a]=s=F(e[t+a],s)}function G(e,t,a,s,n){var r;for(r=0;r<a;++r){var i=e[t+r],o=i>>8&255,l=16711935&(l=(l=16711935&i)+((o<<16)+o));s[n+r]=(4278255360&i)+l>>>0}}function Y(e,t){t.jd=255&e,t.hd=e>>8&255,t.ud=e>>16&255}function $(e,t,a,s,n,r){var i;for(i=0;i<s;++i){var o=t[a+i],l=o>>>8,c=o,d=255&(d=(d=o>>>16)+((e.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(e.hd<<24>>24)*(l<<24>>24)>>>5)+((e.ud<<24>>24)*(d<<24>>24)>>>5)),n[r+i]=(4278255360&o)+(d<<16)+c}}function X(t,a,s,n,r){e[a]=function(e,t,a,s,i,o,l,c,d){for(s=l;s<c;++s)for(l=0;l<d;++l)i[o++]=r(a[n(e[t++])])},e[t]=function(t,a,i,o,l,c,d){var u=8>>t.b,h=t.Ea,m=t.K[0],p=t.w;if(8>u)for(t=(1<<t.b)-1,p=(1<<u)-1;a<i;++a){var f,g=0;for(f=0;f<h;++f)f&t||(g=n(o[l++])),c[d++]=r(m[g&p]),g>>=u}else e["VP8LMapColor"+s](o,l,m,p,c,d,a,i,h)}}function J(e,t,a,s,n){for(a=t+a;t<a;){var r=e[t++];s[n++]=r>>16&255,s[n++]=r>>8&255,s[n++]=255&r}}function K(e,t,a,s,n){for(a=t+a;t<a;){var r=e[t++];s[n++]=r>>16&255,s[n++]=r>>8&255,s[n++]=255&r,s[n++]=r>>24&255}}function Q(e,t,a,s,n){for(a=t+a;t<a;){var r=(i=e[t++])>>16&240|i>>12&15,i=240&i|i>>28&15;s[n++]=r,s[n++]=i}}function Z(e,t,a,s,n){for(a=t+a;t<a;){var r=(i=e[t++])>>16&248|i>>13&7,i=i>>5&224|i>>3&31;s[n++]=r,s[n++]=i}}function ee(e,t,a,s,n){for(a=t+a;t<a;){var r=e[t++];s[n++]=255&r,s[n++]=r>>8&255,s[n++]=r>>16&255}}function te(e,t,a,n,r,i){if(0==i)for(a=t+a;t<a;)P(n,((i=e[t++])[0]>>24|i[1]>>8&65280|i[2]<<8&16711680|i[3]<<24)>>>0),r+=32;else s(n,r,e,t,a)}function ae(t,a){e[a][0]=e[t+"0"],e[a][1]=e[t+"1"],e[a][2]=e[t+"2"],e[a][3]=e[t+"3"],e[a][4]=e[t+"4"],e[a][5]=e[t+"5"],e[a][6]=e[t+"6"],e[a][7]=e[t+"7"],e[a][8]=e[t+"8"],e[a][9]=e[t+"9"],e[a][10]=e[t+"10"],e[a][11]=e[t+"11"],e[a][12]=e[t+"12"],e[a][13]=e[t+"13"],e[a][14]=e[t+"0"],e[a][15]=e[t+"0"]}function se(e){return e==Us||e==Hs||e==Ws||e==Vs}function ne(){this.eb=[],this.size=this.A=this.fb=0}function re(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ie(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ne,this.f.kb=new re,this.sd=null}function oe(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function le(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ce(e){return alert("todo:WebPSamplerProcessPlane"),e.T}function de(e,t){var a=e.T,n=t.ba.f.RGBA,r=n.eb,i=n.fb+e.ka*n.A,o=xn[t.ba.S],l=e.y,c=e.O,d=e.f,u=e.N,h=e.ea,m=e.W,p=t.cc,f=t.dc,g=t.Mc,x=t.Nc,b=e.ka,v=e.ka+e.T,y=e.U,j=y+1>>1;for(0==b?o(l,c,null,null,d,u,h,m,d,u,h,m,r,i,null,null,y):(o(t.ec,t.fc,l,c,p,f,g,x,d,u,h,m,r,i-n.A,r,i,y),++a);b+2<v;b+=2)p=d,f=u,g=h,x=m,u+=e.Rc,m+=e.Rc,i+=2*n.A,o(l,(c+=2*e.fa)-e.fa,l,c,p,f,g,x,d,u,h,m,r,i-n.A,r,i,y);return c+=e.fa,e.j+v<e.o?(s(t.ec,t.fc,l,c,y),s(t.cc,t.dc,d,u,j),s(t.Mc,t.Nc,h,m,j),a--):1&v||o(l,c,null,null,d,u,h,m,d,u,h,m,r,i+n.A,null,null,y),a}function ue(e,a,s){var n=e.F,r=[e.J];if(null!=n){var i=e.U,o=a.ba.S,l=o==zs||o==Ws;a=a.ba.f.RGBA;var c=[0],d=e.ka;c[0]=e.T,e.Kb&&(0==d?--c[0]:(--d,r[0]-=e.width),e.j+e.ka+e.T==e.o&&(c[0]=e.o-e.j-d));var u=a.eb;d=a.fb+d*a.A,e=_s(n,r[0],e.width,i,c,u,d+(l?0:3),a.A),t(s==c),e&&se(o)&&Ns(u,d,l,i,c,a.A)}return 0}function he(e){var t=e.ma,a=t.ba.S,s=11>a,n=a==Rs||a==Fs||a==zs||a==Bs||12==a||se(a);if(t.memory=null,t.Ib=null,t.Jb=null,t.Nd=null,!Ma(t.Oa,e,n?11:12))return 0;if(n&&se(a)&&ba(),e.da)alert("todo:use_scaling");else{if(s){if(t.Ib=ce,e.Kb){if(a=e.U+1>>1,t.memory=r(e.U+2*a),null==t.memory)return 0;t.ec=t.memory,t.fc=0,t.cc=t.ec,t.dc=t.fc+e.U,t.Mc=t.cc,t.Nc=t.dc+a,t.Ib=de,ba()}}else alert("todo:EmitYUV");n&&(t.Jb=ue,s&&ga())}if(s&&!Ln){for(e=0;256>e;++e)Dn[e]=89858*(e-128)+Cn>>Sn,Mn[e]=-22014*(e-128)+Cn,Tn[e]=-45773*(e-128),On[e]=113618*(e-128)+Cn>>Sn;for(e=kn;e<An;++e)t=76283*(e-16)+Cn>>Sn,Rn[e-kn]=Ve(t,255),In[e-kn]=Ve(t+8>>4,15);Ln=1}return 1}function me(e){var a=e.ma,s=e.U,n=e.T;return t(!(1&e.ka)),0>=s||0>=n?0:(s=a.Ib(e,a),null!=a.Jb&&a.Jb(e,a,s),a.Dc+=s,1)}function pe(e){e.ma.memory=null}function fe(e,t,a,s){return 47!=v(e,8)?0:(t[0]=v(e,14)+1,a[0]=v(e,14)+1,s[0]=v(e,1),0!=v(e,3)?0:!e.h)}function ge(e,t){if(4>e)return e+1;var a=e-2>>1;return(2+(1&e)<<a)+v(t,a)+1}function xe(e,t){return 120<t?t-120:1<=(a=((a=Ks[t-1])>>4)*e+(8-(15&a)))?a:1;var a}function be(e,t,a){var s=N(a),n=e[t+=255&s].g-8;return 0<n&&(_(a,a.u+8),s=N(a),t+=e[t].value,t+=s&(1<<n)-1),_(a,a.u+e[t].g),e[t].value}function ve(e,a,s){return s.g+=e.g,s.value+=e.value<<a>>>0,t(8>=s.g),e.g}function ye(e,a,s){var n=e.xc;return t((a=0==n?0:e.vc[e.md*(s>>n)+(a>>n)])<e.Wb),e.Ya[a]}function je(e,a,n,r){var i=e.ab,o=e.c*a,l=e.C;a=l+a;var c=n,d=r;for(r=e.Ta,n=e.Ua;0<i--;){var u=e.gc[i],h=l,m=a,p=c,f=d,g=(d=r,c=n,u.Ea);switch(t(h<m),t(m<=u.nc),u.hc){case 2:Ga(p,f,(m-h)*g,d,c);break;case 0:var x=h,b=m,v=d,y=c,j=(C=u).Ea;0==x&&(Wa(p,f,null,null,1,v,y),V(p,f+1,0,0,j-1,v,y+1),f+=j,y+=j,++x);for(var N=1<<C.b,w=N-1,_=I(j,C.b),S=C.K,C=C.w+(x>>C.b)*_;x<b;){var k=S,A=C,P=1;for(Va(p,f,v,y-j,1,v,y);P<j;){var E=(P&~w)+N;E>j&&(E=j),(0,Ka[k[A++]>>8&15])(p,f+ +P,v,y+P-j,E-P,v,y+P),P=E}f+=j,y+=j,++x&w||(C+=_)}m!=u.nc&&s(d,c-g,d,c+(m-h-1)*g,g);break;case 1:for(g=p,b=f,j=(p=u.Ea)-(y=p&~(v=(f=1<<u.b)-1)),x=I(p,u.b),N=u.K,u=u.w+(h>>u.b)*x;h<m;){for(w=N,_=u,S=new B,C=b+y,k=b+p;b<C;)Y(w[_++],S),Qa(S,g,b,f,d,c),b+=f,c+=f;b<k&&(Y(w[_++],S),Qa(S,g,b,j,d,c),b+=j,c+=j),++h&v||(u+=x)}break;case 3:if(p==d&&f==c&&0<u.b){for(b=d,p=g=c+(m-h)*g-(y=(m-h)*I(u.Ea,u.b)),f=d,v=c,x=[],y=(j=y)-1;0<=y;--y)x[y]=f[v+y];for(y=j-1;0<=y;--y)b[p+y]=x[y];Ya(u,h,m,d,g,d,c)}else Ya(u,h,m,p,f,d,c)}c=r,d=n}d!=n&&s(r,n,c,d,o)}function Ne(e,a){var s=e.V,n=e.Ba+e.c*e.C,r=a-e.C;if(t(a<=e.l.o),t(16>=r),0<r){var i=e.l,o=e.Ta,l=e.Ua,c=i.width;if(je(e,r,s,n),r=l=[l],t((s=e.C)<(n=a)),t(i.v<i.va),n>i.o&&(n=i.o),s<i.j){var d=i.j-s;s=i.j,r[0]+=d*c}if(s>=n?s=0:(r[0]+=4*i.v,i.ka=s-i.j,i.U=i.va-i.v,i.T=n-s,s=1),s){if(l=l[0],11>(s=e.ca).S){var u=s.f.RGBA,h=(n=s.S,r=i.U,i=i.T,d=u.eb,u.A),m=i;for(u=u.fb+e.Ma*u.A;0<m--;){var p=o,f=l,g=r,x=d,b=u;switch(n){case Ms:Za(p,f,g,x,b);break;case Rs:es(p,f,g,x,b);break;case Us:es(p,f,g,x,b),Ns(x,b,0,g,1,0);break;case Is:ss(p,f,g,x,b);break;case Fs:te(p,f,g,x,b,1);break;case Hs:te(p,f,g,x,b,1),Ns(x,b,0,g,1,0);break;case zs:te(p,f,g,x,b,0);break;case Ws:te(p,f,g,x,b,0),Ns(x,b,1,g,1,0);break;case Bs:ts(p,f,g,x,b);break;case Vs:ts(p,f,g,x,b),ws(x,b,g,1,0);break;case qs:as(p,f,g,x,b);break;default:t(0)}l+=c,u+=h}e.Ma+=i}else alert("todo:EmitRescaledRowsYUVA");t(e.Ma<=s.height)}}e.C=a,t(e.C<=e.i)}function we(e){var t;if(0<e.ua)return 0;for(t=0;t<e.Wb;++t){var a=e.Ya[t].G,s=e.Ya[t].H;if(0<a[1][s[1]+0].g||0<a[2][s[2]+0].g||0<a[3][s[3]+0].g)return 0}return 1}function _e(e,a,s,n,r,i){if(0!=e.Z){var o=e.qd,l=e.rd;for(t(null!=gn[e.Z]);a<s;++a)gn[e.Z](o,l,n,r,n,r,i),o=n,l=r,r+=i;e.qd=o,e.rd=l}}function Se(e,a){var s=e.l.ma,n=0==s.Z||1==s.Z?e.l.j:e.C;if(n=e.C<n?n:e.C,t(a<=e.l.o),a>n){var r=e.l.width,i=s.ca,o=s.tb+r*n,l=e.V,c=e.Ba+e.c*n,d=e.gc;t(1==e.ab),t(3==d[0].hc),Xa(d[0],n,a,l,c,i,o),_e(s,n,a,i,o,r)}e.C=e.Ma=a}function Ce(e,a,s,n,r,i,o){var l=e.$/n,c=e.$%n,d=e.m,u=e.s,h=s+e.$,m=h;r=s+n*r;var p=s+n*i,f=280+u.ua,g=e.Pb?l:16777216,x=0<u.ua?u.Wa:null,b=u.wc,v=h<p?ye(u,c,l):null;t(e.C<i),t(p<=r);var y=!1;e:for(;;){for(;y||h<p;){var j=0;if(l>=g){var C=h-s;t((g=e).Pb),g.wd=g.m,g.xd=C,0<g.s.ua&&T(g.s.Wa,g.s.vb),g=l+Zs}if(c&b||(v=ye(u,c,l)),t(null!=v),v.Qb&&(a[h]=v.qb,y=!0),!y)if(S(d),v.jc){j=d,C=a;var k=h,A=v.pd[N(j)&Fa-1];t(v.jc),256>A.g?(_(j,j.u+A.g),C[k]=A.value,j=0):(_(j,j.u+A.g-256),t(256<=A.value),j=A.value),0==j&&(y=!0)}else j=be(v.G[0],v.H[0],d);if(d.h)break;if(y||256>j){if(!y)if(v.nd)a[h]=(v.qb|j<<8)>>>0;else{if(S(d),y=be(v.G[1],v.H[1],d),S(d),C=be(v.G[2],v.H[2],d),k=be(v.G[3],v.H[3],d),d.h)break;a[h]=(k<<24|y<<16|j<<8|C)>>>0}if(y=!1,++h,++c>=n&&(c=0,++l,null!=o&&l<=i&&!(l%16)&&o(e,l),null!=x))for(;m<h;)j=a[m++],x.X[(506832829*j&4294967295)>>>x.Mb]=j}else if(280>j){if(j=ge(j-256,d),C=be(v.G[4],v.H[4],d),S(d),C=xe(n,C=ge(C,d)),d.h)break;if(h-s<C||r-h<j)break e;for(k=0;k<j;++k)a[h+k]=a[h+k-C];for(h+=j,c+=j;c>=n;)c-=n,++l,null!=o&&l<=i&&!(l%16)&&o(e,l);if(t(h<=r),c&b&&(v=ye(u,c,l)),null!=x)for(;m<h;)j=a[m++],x.X[(506832829*j&4294967295)>>>x.Mb]=j}else{if(!(j<f))break e;for(y=j-280,t(null!=x);m<h;)j=a[m++],x.X[(506832829*j&4294967295)>>>x.Mb]=j;j=h,t(!(y>>>(C=x).Xa)),a[j]=C.X[y],y=!0}y||t(d.h==w(d))}if(e.Pb&&d.h&&h<r)t(e.m.h),e.a=5,e.m=e.wd,e.$=e.xd,0<e.s.ua&&T(e.s.vb,e.s.Wa);else{if(d.h)break e;null!=o&&o(e,l>i?i:l),e.a=0,e.$=h-s}return 1}return e.a=3,0}function ke(e){t(null!=e),e.vc=null,e.yc=null,e.Ya=null;var a=e.Wa;null!=a&&(a.X=null),e.vb=null,t(null!=e)}function Ae(){var t=new ia;return null==t?null:(t.a=0,t.xb=fn,ae("Predictor","VP8LPredictors"),ae("Predictor","VP8LPredictors_C"),ae("PredictorAdd","VP8LPredictorsAdd"),ae("PredictorAdd","VP8LPredictorsAdd_C"),Ga=G,Qa=$,Za=J,es=K,ts=Q,as=Z,ss=ee,e.VP8LMapColor32b=$a,e.VP8LMapColor8b=Ja,t)}function Pe(e,a,s,o,l){var c=1,h=[e],p=[a],f=o.m,g=o.s,x=null,b=0;e:for(;;){if(s)for(;c&&v(f,1);){var y=h,j=p,w=o,C=1,k=w.m,A=w.gc[w.ab],P=v(k,2);if(w.Oc&1<<P)c=0;else{switch(w.Oc|=1<<P,A.hc=P,A.Ea=y[0],A.nc=j[0],A.K=[null],++w.ab,t(4>=w.ab),P){case 0:case 1:A.b=v(k,3)+2,C=Pe(I(A.Ea,A.b),I(A.nc,A.b),0,w,A.K),A.K=A.K[0];break;case 3:var E,L=v(k,8)+1,D=16<L?0:4<L?1:2<L?2:3;if(y[0]=I(A.Ea,D),A.b=D,E=C=Pe(L,1,0,w,A.K)){var T,M=L,R=A,z=1<<(8>>R.b),B=r(z);if(null==B)E=0;else{var q=R.K[0],U=R.w;for(B[0]=R.K[0][0],T=1;T<1*M;++T)B[T]=F(q[U+T],B[T-1]);for(;T<4*z;++T)B[T]=0;R.K[0]=null,R.K[0]=B,E=1}}C=E;break;case 2:break;default:t(0)}c=C}}if(h=h[0],p=p[0],c&&v(f,1)&&!(c=1<=(b=v(f,4))&&11>=b)){o.a=3;break e}var H;if(H=c)t:{var W,V,G,Y=o,$=h,X=p,J=b,K=s,Q=Y.m,Z=Y.s,ee=[null],te=1,ae=0,se=Qs[J];a:for(;;){if(K&&v(Q,1)){var ne=v(Q,3)+2,re=I($,ne),ie=I(X,ne),oe=re*ie;if(!Pe(re,ie,0,Y,ee))break a;for(ee=ee[0],Z.xc=ne,W=0;W<oe;++W){var le=ee[W]>>8&65535;ee[W]=le,le>=te&&(te=le+1)}}if(Q.h)break a;for(V=0;5>V;++V){var ce=$s[V];!V&&0<J&&(ce+=1<<J),ae<ce&&(ae=ce)}var de=i(te*se,u),ue=te,he=i(ue,m);if(null==he)var me=null;else t(65536>=ue),me=he;var pe=r(ae);if(null==me||null==pe||null==de){Y.a=1;break a}var fe=de;for(W=G=0;W<te;++W){var ge=me[W],xe=ge.G,be=ge.H,ye=0,je=1,Ne=0;for(V=0;5>V;++V){ce=$s[V],xe[V]=fe,be[V]=G,!V&&0<J&&(ce+=1<<J);s:{var we,_e=ce,Se=Y,Ae=pe,Ee=fe,Le=G,De=0,Oe=Se.m,Te=v(Oe,1);if(n(Ae,0,0,_e),Te){var Me=v(Oe,1)+1,Re=v(Oe,1),Ie=v(Oe,0==Re?1:8);Ae[Ie]=1,2==Me&&(Ae[Ie=v(Oe,8)]=1);var Fe=1}else{var ze=r(19),Be=v(Oe,4)+4;if(19<Be){Se.a=3;var qe=0;break s}for(we=0;we<Be;++we)ze[Js[we]]=v(Oe,3);var Ue=void 0,He=void 0,We=Se,Ve=ze,Ge=_e,Ye=Ae,$e=0,Xe=We.m,Je=8,Ke=i(128,u);n:for(;d(Ke,0,7,Ve,19);){if(v(Xe,1)){var Qe=2+2*v(Xe,3);if((Ue=2+v(Xe,Qe))>Ge)break n}else Ue=Ge;for(He=0;He<Ge&&Ue--;){S(Xe);var Ze=Ke[0+(127&N(Xe))];_(Xe,Xe.u+Ze.g);var et=Ze.value;if(16>et)Ye[He++]=et,0!=et&&(Je=et);else{var tt=16==et,at=et-16,st=Ys[at],nt=v(Xe,Gs[at])+st;if(He+nt>Ge)break n;for(var rt=tt?Je:0;0<nt--;)Ye[He++]=rt}}$e=1;break n}$e||(We.a=3),Fe=$e}(Fe=Fe&&!Oe.h)&&(De=d(Ee,Le,8,Ae,_e)),Fe&&0!=De?qe=De:(Se.a=3,qe=0)}if(0==qe)break a;if(je&&1==Xs[V]&&(je=0==fe[G].g),ye+=fe[G].g,G+=qe,3>=V){var it,ot=pe[0];for(it=1;it<ce;++it)pe[it]>ot&&(ot=pe[it]);Ne+=ot}}if(ge.nd=je,ge.Qb=0,je&&(ge.qb=(xe[3][be[3]+0].value<<24|xe[1][be[1]+0].value<<16|xe[2][be[2]+0].value)>>>0,0==ye&&256>xe[0][be[0]+0].value&&(ge.Qb=1,ge.qb+=xe[0][be[0]+0].value<<8)),ge.jc=!ge.Qb&&6>Ne,ge.jc){var lt,ct=ge;for(lt=0;lt<Fa;++lt){var dt=lt,ut=ct.pd[dt],ht=ct.G[0][ct.H[0]+dt];256<=ht.value?(ut.g=ht.g+256,ut.value=ht.value):(ut.g=0,ut.value=0,dt>>=ve(ht,8,ut),dt>>=ve(ct.G[1][ct.H[1]+dt],16,ut),dt>>=ve(ct.G[2][ct.H[2]+dt],0,ut),ve(ct.G[3][ct.H[3]+dt],24,ut))}}}Z.vc=ee,Z.Wb=te,Z.Ya=me,Z.yc=de,H=1;break t}H=0}if(!(c=H)){o.a=3;break e}if(0<b){if(g.ua=1<<b,!O(g.Wa,b)){o.a=1,c=0;break e}}else g.ua=0;var mt=o,pt=h,ft=p,gt=mt.s,xt=gt.xc;if(mt.c=pt,mt.i=ft,gt.md=I(pt,xt),gt.wc=0==xt?-1:(1<<xt)-1,s){o.xb=pn;break e}if(null==(x=r(h*p))){o.a=1,c=0;break e}c=(c=Ce(o,x,0,h,p,p,null))&&!f.h;break e}return c?(null!=l?l[0]=x:(t(null==x),t(s)),o.$=0,s||ke(g)):ke(g),c}function Ee(e,a){var s=e.c*e.i,n=s+a+16*a;return t(e.c<=a),e.V=r(n),null==e.V?(e.Ta=null,e.Ua=0,e.a=1,0):(e.Ta=e.V,e.Ua=e.Ba+s+a,1)}function Le(e,a){var s=e.C,n=a-s,r=e.V,i=e.Ba+e.c*s;for(t(a<=e.l.o);0<n;){var o=16<n?16:n,l=e.l.ma,c=e.l.width,d=c*o,u=l.ca,h=l.tb+c*s,m=e.Ta,p=e.Ua;je(e,o,r,i),Ss(m,p,u,h,d),_e(l,s,s+o,u,h,c),n-=o,r+=o*e.c,s+=o}t(s==a),e.C=e.Ma=a}function De(){this.ub=this.yd=this.td=this.Rb=0}function Oe(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Te(){this.Fb=this.Bb=this.Cb=0,this.Zb=r(4),this.Lb=r(4)}function Me(){this.Yb=function(){var e=[];return function e(t,a,s){for(var n=s[a],r=0;r<n&&(t.push(s.length>a+1?[]:0),!(s.length<a+1));r++)e(t[r],a+1,s)}(e,0,[3,11]),e}()}function Re(){this.jb=r(3),this.Wc=o([4,8],Me),this.Xc=o([4,17],Me)}function Ie(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new r(4),this.od=new r(4)}function Fe(){this.ld=this.La=this.dd=this.tc=0}function ze(){this.Na=this.la=0}function Be(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function qe(){this.ad=r(384),this.Za=0,this.Ob=r(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ue(){this.uc=this.M=this.Nb=0,this.wa=Array(new Fe),this.Y=0,this.ya=Array(new qe),this.aa=0,this.l=new Ge}function He(){this.y=r(16),this.f=r(8),this.ea=r(8)}function We(){this.cb=this.a=0,this.sc="",this.m=new y,this.Od=new De,this.Kc=new Oe,this.ed=new Ie,this.Qa=new Te,this.Ic=this.$c=this.Aa=0,this.D=new Ue,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=i(8,y),this.ia=0,this.pb=i(4,Be),this.Pa=new Re,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new He),this.Hd=0,this.rb=Array(new ze),this.sb=0,this.wa=Array(new Fe),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new qe),this.L=this.aa=0,this.gd=o([4,2],Fe),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ve(e,t){return 0>e?0:e>t?t:e}function Ge(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Ye(){var e=new We;return null!=e&&(e.a=0,e.sc="OK",e.cb=0,e.Xb=0,an||(an=Ke)),e}function $e(e,t,a){return 0==e.a&&(e.a=t,e.sc=a,e.cb=0),0}function Xe(e,t,a){return 3<=a&&157==e[t+0]&&1==e[t+1]&&42==e[t+2]}function Je(e,a){if(null==e)return 0;if(e.a=0,e.sc="OK",null==a)return $e(e,2,"null VP8Io passed to VP8GetHeaders()");var s=a.data,r=a.w,i=a.ha;if(4>i)return $e(e,7,"Truncated header.");var o=s[r+0]|s[r+1]<<8|s[r+2]<<16,l=e.Od;if(l.Rb=!(1&o),l.td=o>>1&7,l.yd=o>>4&1,l.ub=o>>5,3<l.td)return $e(e,3,"Incorrect keyframe parameters.");if(!l.yd)return $e(e,4,"Frame not displayable.");r+=3,i-=3;var c=e.Kc;if(l.Rb){if(7>i)return $e(e,7,"cannot parse picture header");if(!Xe(s,r,i))return $e(e,3,"Bad code word");c.c=16383&(s[r+4]<<8|s[r+3]),c.Td=s[r+4]>>6,c.i=16383&(s[r+6]<<8|s[r+5]),c.Ud=s[r+6]>>6,r+=7,i-=7,e.za=c.c+15>>4,e.Ub=c.i+15>>4,a.width=c.c,a.height=c.i,a.Da=0,a.j=0,a.v=0,a.va=a.width,a.o=a.height,a.da=0,a.ib=a.width,a.hb=a.height,a.U=a.width,a.T=a.height,n((o=e.Pa).jb,0,255,o.jb.length),t(null!=(o=e.Qa)),o.Cb=0,o.Bb=0,o.Fb=1,n(o.Zb,0,0,o.Zb.length),n(o.Lb,0,0,o.Lb)}if(l.ub>i)return $e(e,7,"bad partition length");p(o=e.m,s,r,l.ub),r+=l.ub,i-=l.ub,l.Rb&&(c.Ld=k(o),c.Kd=k(o)),c=e.Qa;var d,u=e.Pa;if(t(null!=o),t(null!=c),c.Cb=k(o),c.Cb){if(c.Bb=k(o),k(o)){for(c.Fb=k(o),d=0;4>d;++d)c.Zb[d]=k(o)?g(o,7):0;for(d=0;4>d;++d)c.Lb[d]=k(o)?g(o,6):0}if(c.Bb)for(d=0;3>d;++d)u.jb[d]=k(o)?f(o,8):255}else c.Bb=0;if(o.Ka)return $e(e,3,"cannot parse segment header");if((c=e.ed).zd=k(o),c.Tb=f(o,6),c.wb=f(o,3),c.Pc=k(o),c.Pc&&k(o)){for(u=0;4>u;++u)k(o)&&(c.vd[u]=g(o,6));for(u=0;4>u;++u)k(o)&&(c.od[u]=g(o,6))}if(e.L=0==c.Tb?0:c.zd?1:2,o.Ka)return $e(e,3,"cannot parse filter header");var h=i;if(i=d=r,r=d+h,c=h,e.Xb=(1<<f(e.m,2))-1,h<3*(u=e.Xb))s=7;else{for(d+=3*u,c-=3*u,h=0;h<u;++h){var m=s[i+0]|s[i+1]<<8|s[i+2]<<16;m>c&&(m=c),p(e.Jc[+h],s,d,m),d+=m,c-=m,i+=3}p(e.Jc[+u],s,d,c),s=d<r?0:5}if(0!=s)return $e(e,s,"cannot parse partitions");for(s=f(d=e.m,7),i=k(d)?g(d,4):0,r=k(d)?g(d,4):0,c=k(d)?g(d,4):0,u=k(d)?g(d,4):0,d=k(d)?g(d,4):0,h=e.Qa,m=0;4>m;++m){if(h.Cb){var x=h.Zb[m];h.Fb||(x+=s)}else{if(0<m){e.pb[m]=e.pb[0];continue}x=s}var b=e.pb[m];b.Sc[0]=en[Ve(x+i,127)],b.Sc[1]=tn[Ve(x+0,127)],b.Eb[0]=2*en[Ve(x+r,127)],b.Eb[1]=101581*tn[Ve(x+c,127)]>>16,8>b.Eb[1]&&(b.Eb[1]=8),b.Qc[0]=en[Ve(x+u,117)],b.Qc[1]=tn[Ve(x+d,127)],b.lc=x+d}if(!l.Rb)return $e(e,4,"Not a key frame.");for(k(o),l=e.Pa,s=0;4>s;++s){for(i=0;8>i;++i)for(r=0;3>r;++r)for(c=0;11>c;++c)u=A(o,cn[s][i][r][c])?f(o,8):on[s][i][r][c],l.Wc[s][i].Yb[r][c]=u;for(i=0;17>i;++i)l.Xc[s][i]=l.Wc[s][dn[i]]}return e.kc=k(o),e.kc&&(e.Bd=f(o,8)),e.cb=1}function Ke(e,t,a,s,n,r,i){var o=t[n].Yb[a];for(a=0;16>n;++n){if(!A(e,o[a+0]))return n;for(;!A(e,o[a+1]);)if(o=t[++n].Yb[0],a=0,16==n)return 16;var l=t[n+1].Yb;if(A(e,o[a+2])){var c=e,d=0;if(A(c,(h=o)[(u=a)+3]))if(A(c,h[u+6])){for(o=0,u=2*(d=A(c,h[u+8]))+(h=A(c,h[u+9+d])),d=0,h=sn[u];h[o];++o)d+=d+A(c,h[o]);d+=3+(8<<u)}else A(c,h[u+7])?(d=7+2*A(c,165),d+=A(c,145)):d=5+A(c,159);else d=A(c,h[u+4])?3+A(c,h[u+5]):2;o=l[2]}else d=1,o=l[1];l=i+nn[n],0>(c=e).b&&C(c);var u,h=c.b,m=(u=c.Ca>>1)-(c.I>>h)>>31;--c.b,c.Ca+=m,c.Ca|=1,c.I-=(u+1&m)<<h,r[l]=((d^m)-m)*s[(0<n)+0]}return 16}function Qe(e){var t=e.rb[e.sb-1];t.la=0,t.Na=0,n(e.zc,0,0,e.zc.length),e.ja=0}function Ze(e,a){if(null==e)return 0;if(null==a)return $e(e,2,"NULL VP8Io parameter in VP8Decode().");if(!e.cb&&!Je(e,a))return 0;if(t(e.cb),null==a.ac||a.ac(a)){a.ob&&(e.L=0);var o=zn[e.L];if(2==e.L?(e.yb=0,e.zb=0):(e.yb=a.v-o>>4,e.zb=a.j-o>>4,0>e.yb&&(e.yb=0),0>e.zb&&(e.zb=0)),e.Va=a.o+15+o>>4,e.Hb=a.va+15+o>>4,e.Hb>e.za&&(e.Hb=e.za),e.Va>e.Ub&&(e.Va=e.Ub),0<e.L){var l=e.ed;for(o=0;4>o;++o){var c;if(e.Qa.Cb){var d=e.Qa.Lb[o];e.Qa.Fb||(d+=l.Tb)}else d=l.Tb;for(c=0;1>=c;++c){var u=e.gd[o][c],h=d;if(l.Pc&&(h+=l.vd[0],c&&(h+=l.od[0])),0<(h=0>h?0:63<h?63:h)){var m=h;0<l.wb&&(m=4<l.wb?m>>2:m>>1)>9-l.wb&&(m=9-l.wb),1>m&&(m=1),u.dd=m,u.tc=2*h+m,u.ld=40<=h?2:15<=h?1:0}else u.tc=0;u.La=c}}}o=0}else $e(e,6,"Frame setup failed"),o=e.a;if(o=0==o){if(o){e.$c=0,0<e.Aa||(e.Ic=qn);e:{o=e.Ic,l=4*(m=e.za);var p=32*m,f=m+1,g=0<e.L?m*(0<e.Aa?2:1):0,x=(2==e.Aa?2:1)*m;if((u=l+832+(c=3*(16*o+zn[e.L])/2*p)+(d=null!=e.Fa&&0<e.Fa.length?e.Kc.c*e.Kc.i:0))!=u)o=0;else{if(u>e.Vb){if(e.Vb=0,e.Ec=r(u),e.Fc=0,null==e.Ec){o=$e(e,1,"no memory during frame initialization.");break e}e.Vb=u}u=e.Ec,h=e.Fc,e.Ac=u,e.Bc=h,h+=l,e.Gd=i(p,He),e.Hd=0,e.rb=i(f+1,ze),e.sb=1,e.wa=g?i(g,Fe):null,e.Y=0,e.D.Nb=0,e.D.wa=e.wa,e.D.Y=e.Y,0<e.Aa&&(e.D.Y+=m),t(!0),e.oc=u,e.pc=h,h+=832,e.ya=i(x,qe),e.aa=0,e.D.ya=e.ya,e.D.aa=e.aa,2==e.Aa&&(e.D.aa+=m),e.R=16*m,e.B=8*m,m=(p=zn[e.L])*e.R,p=p/2*e.B,e.sa=u,e.ta=h+m,e.qa=e.sa,e.ra=e.ta+16*o*e.R+p,e.Ha=e.qa,e.Ia=e.ra+8*o*e.B+p,e.$c=0,h+=c,e.mb=d?u:null,e.nb=d?h:null,t(h+d<=e.Fc+e.Vb),Qe(e),n(e.Ac,e.Bc,0,l),o=1}}if(o){if(a.ka=0,a.y=e.sa,a.O=e.ta,a.f=e.qa,a.N=e.ra,a.ea=e.Ha,a.Vd=e.Ia,a.fa=e.R,a.Rc=e.B,a.F=null,a.J=0,!Es){for(o=-255;255>=o;++o)Cs[255+o]=0>o?-o:o;for(o=-1020;1020>=o;++o)ks[1020+o]=-128>o?-128:127<o?127:o;for(o=-112;112>=o;++o)As[112+o]=-16>o?-16:15<o?15:o;for(o=-255;510>=o;++o)Ps[255+o]=0>o?0:255<o?255:o;Es=1}ns=ct,rs=rt,os=it,ls=ot,cs=lt,is=nt,ds=$t,us=Xt,hs=Qt,ms=Zt,ps=Jt,fs=Kt,gs=ea,xs=ta,bs=Ut,vs=Ht,ys=Wt,js=Vt,hn[0]=_t,hn[1]=ut,hn[2]=Nt,hn[3]=wt,hn[4]=St,hn[5]=kt,hn[6]=Ct,hn[7]=At,hn[8]=Et,hn[9]=Pt,un[0]=xt,un[1]=mt,un[2]=pt,un[3]=ft,un[4]=bt,un[5]=vt,un[6]=yt,mn[0]=Tt,mn[1]=ht,mn[2]=Lt,mn[3]=Dt,mn[4]=Rt,mn[5]=Mt,mn[6]=It,o=1}else o=0}o&&(o=function(e,a){for(e.M=0;e.M<e.Va;++e.M){var i,o=e.Jc[e.M&e.Xb],l=e.m,c=e;for(i=0;i<c.za;++i){var d=l,u=c,h=u.Ac,m=u.Bc+4*i,p=u.zc,f=u.ya[u.aa+i];if(u.Qa.Bb?f.$b=A(d,u.Pa.jb[0])?2+A(d,u.Pa.jb[2]):A(d,u.Pa.jb[1]):f.$b=0,u.kc&&(f.Ad=A(d,u.Bd)),f.Za=!A(d,145)+0,f.Za){var g=f.Ob,x=0;for(u=0;4>u;++u){var b,v=p[0+u];for(b=0;4>b;++b){v=ln[h[m+b]][v];for(var y=rn[A(d,v[0])];0<y;)y=rn[2*y+A(d,v[y])];v=-y,h[m+b]=v}s(g,x,h,m,4),x+=4,p[0+u]=v}}else v=A(d,156)?A(d,128)?1:3:A(d,163)?2:0,f.Ob[0]=v,n(h,m,v,4),n(p,0,v,4);f.Dd=A(d,142)?A(d,114)?A(d,183)?1:3:2:0}if(c.m.Ka)return $e(e,7,"Premature end-of-partition0 encountered.");for(;e.ja<e.za;++e.ja){if(c=o,d=(l=e).rb[l.sb-1],h=l.rb[l.sb+l.ja],i=l.ya[l.aa+l.ja],m=l.kc?i.Ad:0)d.la=h.la=0,i.Za||(d.Na=h.Na=0),i.Hc=0,i.Gc=0,i.ia=0;else{var j,N;if(d=h,h=c,m=l.Pa.Xc,p=l.ya[l.aa+l.ja],f=l.pb[p.$b],u=p.ad,g=0,x=l.rb[l.sb-1],v=b=0,n(u,g,0,384),p.Za)var w=0,_=m[3];else{y=r(16);var S=d.Na+x.Na;if(S=an(h,m[1],S,f.Eb,0,y,0),d.Na=x.Na=(0<S)+0,1<S)ns(y,0,u,g);else{var C=y[0]+3>>3;for(y=0;256>y;y+=16)u[g+y]=C}w=1,_=m[0]}var k=15&d.la,P=15&x.la;for(y=0;4>y;++y){var E=1&P;for(C=N=0;4>C;++C)k=k>>1|(E=(S=an(h,_,S=E+(1&k),f.Sc,w,u,g))>w)<<7,N=N<<2|(3<S?3:1<S?2:0!=u[g+0]),g+=16;k>>=4,P=P>>1|E<<7,b=(b<<8|N)>>>0}for(_=k,w=P>>4,j=0;4>j;j+=2){for(N=0,k=d.la>>4+j,P=x.la>>4+j,y=0;2>y;++y){for(E=1&P,C=0;2>C;++C)S=E+(1&k),k=k>>1|(E=0<(S=an(h,m[2],S,f.Qc,0,u,g)))<<3,N=N<<2|(3<S?3:1<S?2:0!=u[g+0]),g+=16;k>>=2,P=P>>1|E<<5}v|=N<<4*j,_|=k<<4<<j,w|=(240&P)<<j}d.la=_,x.la=w,p.Hc=b,p.Gc=v,p.ia=43690&v?0:f.ia,m=!(b|v)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[i.$b][i.Za],l.wa[l.Y+l.ja].La|=!m),c.Ka)return $e(e,7,"Premature end-of-file encountered.")}if(Qe(e),l=a,c=1,i=(o=e).D,d=0<o.L&&o.M>=o.zb&&o.M<=o.Va,0==o.Aa)e:{if(i.M=o.M,i.uc=d,Oa(o,i),c=1,i=(N=o.D).Nb,d=(v=zn[o.L])*o.R,h=v/2*o.B,y=16*i*o.R,C=8*i*o.B,m=o.sa,p=o.ta-d+y,f=o.qa,u=o.ra-h+C,g=o.Ha,x=o.Ia-h+C,P=0==(k=N.M),b=k>=o.Va-1,2==o.Aa&&Oa(o,N),N.uc)for(E=(S=o).D.M,t(S.D.uc),N=S.yb;N<S.Hb;++N){w=N,_=E;var L=(D=(q=S).D).Nb;j=q.R;var D=D.wa[D.Y+w],O=q.sa,T=q.ta+16*L*j+16*w,M=D.dd,R=D.tc;if(0!=R)if(t(3<=R),1==q.L)0<w&&vs(O,T,j,R+4),D.La&&js(O,T,j,R),0<_&&bs(O,T,j,R+4),D.La&&ys(O,T,j,R);else{var I=q.B,F=q.qa,z=q.ra+8*L*I+8*w,B=q.Ha,q=q.Ia+8*L*I+8*w;L=D.ld,0<w&&(us(O,T,j,R+4,M,L),ms(F,z,B,q,I,R+4,M,L)),D.La&&(fs(O,T,j,R,M,L),xs(F,z,B,q,I,R,M,L)),0<_&&(ds(O,T,j,R+4,M,L),hs(F,z,B,q,I,R+4,M,L)),D.La&&(ps(O,T,j,R,M,L),gs(F,z,B,q,I,R,M,L))}}if(o.ia&&alert("todo:DitherRow"),null!=l.put){if(N=16*k,k=16*(k+1),P?(l.y=o.sa,l.O=o.ta+y,l.f=o.qa,l.N=o.ra+C,l.ea=o.Ha,l.W=o.Ia+C):(N-=v,l.y=m,l.O=p,l.f=f,l.N=u,l.ea=g,l.W=x),b||(k-=v),k>l.o&&(k=l.o),l.F=null,l.J=null,null!=o.Fa&&0<o.Fa.length&&N<k&&(l.J=ua(o,l,N,k-N),l.F=o.mb,null==l.F&&0==l.F.length)){c=$e(o,3,"Could not decode alpha data.");break e}N<l.j&&(v=l.j-N,N=l.j,t(!(1&v)),l.O+=o.R*v,l.N+=o.B*(v>>1),l.W+=o.B*(v>>1),null!=l.F&&(l.J+=l.width*v)),N<k&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=N-l.j,l.U=l.va-l.v,l.T=k-N,c=l.put(l))}i+1!=o.Ic||b||(s(o.sa,o.ta-d,m,p+16*o.R,d),s(o.qa,o.ra-h,f,u+8*o.B,h),s(o.Ha,o.Ia-h,g,x+8*o.B,h))}if(!c)return $e(e,6,"Output aborted.")}return 1}(e,a)),null!=a.bc&&a.bc(a),o&=1}return o?(e.cb=0,o):0}function et(e,t,a,s,n){n=e[t+a+32*s]+(n>>3),e[t+a+32*s]=-256&n?0>n?0:255:n}function tt(e,t,a,s,n,r){et(e,t,0,a,s+n),et(e,t,1,a,s+r),et(e,t,2,a,s-r),et(e,t,3,a,s-n)}function at(e){return(20091*e>>16)+e}function st(e,t,a,s){var n,i=0,o=r(16);for(n=0;4>n;++n){var l=e[t+0]+e[t+8],c=e[t+0]-e[t+8],d=(35468*e[t+4]>>16)-at(e[t+12]),u=at(e[t+4])+(35468*e[t+12]>>16);o[i+0]=l+u,o[i+1]=c+d,o[i+2]=c-d,o[i+3]=l-u,i+=4,t++}for(n=i=0;4>n;++n)l=(e=o[i+0]+4)+o[i+8],c=e-o[i+8],d=(35468*o[i+4]>>16)-at(o[i+12]),et(a,s,0,0,l+(u=at(o[i+4])+(35468*o[i+12]>>16))),et(a,s,1,0,c+d),et(a,s,2,0,c-d),et(a,s,3,0,l-u),i++,s+=32}function nt(e,t,a,s){var n=e[t+0]+4,r=35468*e[t+4]>>16,i=at(e[t+4]),o=35468*e[t+1]>>16;tt(a,s,0,n+i,e=at(e[t+1]),o),tt(a,s,1,n+r,e,o),tt(a,s,2,n-r,e,o),tt(a,s,3,n-i,e,o)}function rt(e,t,a,s,n){st(e,t,a,s),n&&st(e,t+16,a,s+4)}function it(e,t,a,s){rs(e,t+0,a,s,1),rs(e,t+32,a,s+128,1)}function ot(e,t,a,s){var n;for(e=e[t+0]+4,n=0;4>n;++n)for(t=0;4>t;++t)et(a,s,t,n,e)}function lt(e,t,a,s){e[t+0]&&ls(e,t+0,a,s),e[t+16]&&ls(e,t+16,a,s+4),e[t+32]&&ls(e,t+32,a,s+128),e[t+48]&&ls(e,t+48,a,s+128+4)}function ct(e,t,a,s){var n,i=r(16);for(n=0;4>n;++n){var o=e[t+0+n]+e[t+12+n],l=e[t+4+n]+e[t+8+n],c=e[t+4+n]-e[t+8+n],d=e[t+0+n]-e[t+12+n];i[0+n]=o+l,i[8+n]=o-l,i[4+n]=d+c,i[12+n]=d-c}for(n=0;4>n;++n)o=(e=i[0+4*n]+3)+i[3+4*n],l=i[1+4*n]+i[2+4*n],c=i[1+4*n]-i[2+4*n],d=e-i[3+4*n],a[s+0]=o+l>>3,a[s+16]=d+c>>3,a[s+32]=o-l>>3,a[s+48]=d-c>>3,s+=64}function dt(e,t,a){var s,n=t-32,r=Os,i=255-e[n-1];for(s=0;s<a;++s){var o,l=r,c=i+e[t-1];for(o=0;o<a;++o)e[t+o]=l[c+e[n+o]];t+=32}}function ut(e,t){dt(e,t,4)}function ht(e,t){dt(e,t,8)}function mt(e,t){dt(e,t,16)}function pt(e,t){var a;for(a=0;16>a;++a)s(e,t+32*a,e,t-32,16)}function ft(e,t){var a;for(a=16;0<a;--a)n(e,t,e[t-1],16),t+=32}function gt(e,t,a){var s;for(s=0;16>s;++s)n(t,a+32*s,e,16)}function xt(e,t){var a,s=16;for(a=0;16>a;++a)s+=e[t-1+32*a]+e[t+a-32];gt(s>>5,e,t)}function bt(e,t){var a,s=8;for(a=0;16>a;++a)s+=e[t-1+32*a];gt(s>>4,e,t)}function vt(e,t){var a,s=8;for(a=0;16>a;++a)s+=e[t+a-32];gt(s>>4,e,t)}function yt(e,t){gt(128,e,t)}function jt(e,t,a){return e+2*t+a+2>>2}function Nt(e,t){var a,n=t-32;for(n=new Uint8Array([jt(e[n-1],e[n+0],e[n+1]),jt(e[n+0],e[n+1],e[n+2]),jt(e[n+1],e[n+2],e[n+3]),jt(e[n+2],e[n+3],e[n+4])]),a=0;4>a;++a)s(e,t+32*a,n,0,n.length)}function wt(e,t){var a=e[t-1],s=e[t-1+32],n=e[t-1+64],r=e[t-1+96];P(e,t+0,16843009*jt(e[t-1-32],a,s)),P(e,t+32,16843009*jt(a,s,n)),P(e,t+64,16843009*jt(s,n,r)),P(e,t+96,16843009*jt(n,r,r))}function _t(e,t){var a,s=4;for(a=0;4>a;++a)s+=e[t+a-32]+e[t-1+32*a];for(s>>=3,a=0;4>a;++a)n(e,t+32*a,s,4)}function St(e,t){var a=e[t-1+0],s=e[t-1+32],n=e[t-1+64],r=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+96]=jt(s,n,e[t-1+96]),e[t+1+96]=e[t+0+64]=jt(a,s,n),e[t+2+96]=e[t+1+64]=e[t+0+32]=jt(r,a,s),e[t+3+96]=e[t+2+64]=e[t+1+32]=e[t+0+0]=jt(i,r,a),e[t+3+64]=e[t+2+32]=e[t+1+0]=jt(o,i,r),e[t+3+32]=e[t+2+0]=jt(l,o,i),e[t+3+0]=jt(c,l,o)}function Ct(e,t){var a=e[t+1-32],s=e[t+2-32],n=e[t+3-32],r=e[t+4-32],i=e[t+5-32],o=e[t+6-32],l=e[t+7-32];e[t+0+0]=jt(e[t+0-32],a,s),e[t+1+0]=e[t+0+32]=jt(a,s,n),e[t+2+0]=e[t+1+32]=e[t+0+64]=jt(s,n,r),e[t+3+0]=e[t+2+32]=e[t+1+64]=e[t+0+96]=jt(n,r,i),e[t+3+32]=e[t+2+64]=e[t+1+96]=jt(r,i,o),e[t+3+64]=e[t+2+96]=jt(i,o,l),e[t+3+96]=jt(o,l,l)}function kt(e,t){var a=e[t-1+0],s=e[t-1+32],n=e[t-1+64],r=e[t-1-32],i=e[t+0-32],o=e[t+1-32],l=e[t+2-32],c=e[t+3-32];e[t+0+0]=e[t+1+64]=r+i+1>>1,e[t+1+0]=e[t+2+64]=i+o+1>>1,e[t+2+0]=e[t+3+64]=o+l+1>>1,e[t+3+0]=l+c+1>>1,e[t+0+96]=jt(n,s,a),e[t+0+64]=jt(s,a,r),e[t+0+32]=e[t+1+96]=jt(a,r,i),e[t+1+32]=e[t+2+96]=jt(r,i,o),e[t+2+32]=e[t+3+96]=jt(i,o,l),e[t+3+32]=jt(o,l,c)}function At(e,t){var a=e[t+0-32],s=e[t+1-32],n=e[t+2-32],r=e[t+3-32],i=e[t+4-32],o=e[t+5-32],l=e[t+6-32],c=e[t+7-32];e[t+0+0]=a+s+1>>1,e[t+1+0]=e[t+0+64]=s+n+1>>1,e[t+2+0]=e[t+1+64]=n+r+1>>1,e[t+3+0]=e[t+2+64]=r+i+1>>1,e[t+0+32]=jt(a,s,n),e[t+1+32]=e[t+0+96]=jt(s,n,r),e[t+2+32]=e[t+1+96]=jt(n,r,i),e[t+3+32]=e[t+2+96]=jt(r,i,o),e[t+3+64]=jt(i,o,l),e[t+3+96]=jt(o,l,c)}function Pt(e,t){var a=e[t-1+0],s=e[t-1+32],n=e[t-1+64],r=e[t-1+96];e[t+0+0]=a+s+1>>1,e[t+2+0]=e[t+0+32]=s+n+1>>1,e[t+2+32]=e[t+0+64]=n+r+1>>1,e[t+1+0]=jt(a,s,n),e[t+3+0]=e[t+1+32]=jt(s,n,r),e[t+3+32]=e[t+1+64]=jt(n,r,r),e[t+3+64]=e[t+2+64]=e[t+0+96]=e[t+1+96]=e[t+2+96]=e[t+3+96]=r}function Et(e,t){var a=e[t-1+0],s=e[t-1+32],n=e[t-1+64],r=e[t-1+96],i=e[t-1-32],o=e[t+0-32],l=e[t+1-32],c=e[t+2-32];e[t+0+0]=e[t+2+32]=a+i+1>>1,e[t+0+32]=e[t+2+64]=s+a+1>>1,e[t+0+64]=e[t+2+96]=n+s+1>>1,e[t+0+96]=r+n+1>>1,e[t+3+0]=jt(o,l,c),e[t+2+0]=jt(i,o,l),e[t+1+0]=e[t+3+32]=jt(a,i,o),e[t+1+32]=e[t+3+64]=jt(s,a,i),e[t+1+64]=e[t+3+96]=jt(n,s,a),e[t+1+96]=jt(r,n,s)}function Lt(e,t){var a;for(a=0;8>a;++a)s(e,t+32*a,e,t-32,8)}function Dt(e,t){var a;for(a=0;8>a;++a)n(e,t,e[t-1],8),t+=32}function Ot(e,t,a){var s;for(s=0;8>s;++s)n(t,a+32*s,e,8)}function Tt(e,t){var a,s=8;for(a=0;8>a;++a)s+=e[t+a-32]+e[t-1+32*a];Ot(s>>4,e,t)}function Mt(e,t){var a,s=4;for(a=0;8>a;++a)s+=e[t+a-32];Ot(s>>3,e,t)}function Rt(e,t){var a,s=4;for(a=0;8>a;++a)s+=e[t-1+32*a];Ot(s>>3,e,t)}function It(e,t){Ot(128,e,t)}function Ft(e,t,a){var s=e[t-a],n=e[t+0],r=3*(n-s)+Ls[1020+e[t-2*a]-e[t+a]],i=Ds[112+(r+4>>3)];e[t-a]=Os[255+s+Ds[112+(r+3>>3)]],e[t+0]=Os[255+n-i]}function zt(e,t,a,s){var n=e[t+0],r=e[t+a];return Ts[255+e[t-2*a]-e[t-a]]>s||Ts[255+r-n]>s}function Bt(e,t,a,s){return 4*Ts[255+e[t-a]-e[t+0]]+Ts[255+e[t-2*a]-e[t+a]]<=s}function qt(e,t,a,s,n){var r=e[t-3*a],i=e[t-2*a],o=e[t-a],l=e[t+0],c=e[t+a],d=e[t+2*a],u=e[t+3*a];return 4*Ts[255+o-l]+Ts[255+i-c]>s?0:Ts[255+e[t-4*a]-r]<=n&&Ts[255+r-i]<=n&&Ts[255+i-o]<=n&&Ts[255+u-d]<=n&&Ts[255+d-c]<=n&&Ts[255+c-l]<=n}function Ut(e,t,a,s){var n=2*s+1;for(s=0;16>s;++s)Bt(e,t+s,a,n)&&Ft(e,t+s,a)}function Ht(e,t,a,s){var n=2*s+1;for(s=0;16>s;++s)Bt(e,t+s*a,1,n)&&Ft(e,t+s*a,1)}function Wt(e,t,a,s){var n;for(n=3;0<n;--n)Ut(e,t+=4*a,a,s)}function Vt(e,t,a,s){var n;for(n=3;0<n;--n)Ht(e,t+=4,a,s)}function Gt(e,t,a,s,n,r,i,o){for(r=2*r+1;0<n--;){if(qt(e,t,a,r,i))if(zt(e,t,a,o))Ft(e,t,a);else{var l=e,c=t,d=a,u=l[c-2*d],h=l[c-d],m=l[c+0],p=l[c+d],f=l[c+2*d],g=27*(b=Ls[1020+3*(m-h)+Ls[1020+u-p]])+63>>7,x=18*b+63>>7,b=9*b+63>>7;l[c-3*d]=Os[255+l[c-3*d]+b],l[c-2*d]=Os[255+u+x],l[c-d]=Os[255+h+g],l[c+0]=Os[255+m-g],l[c+d]=Os[255+p-x],l[c+2*d]=Os[255+f-b]}t+=s}}function Yt(e,t,a,s,n,r,i,o){for(r=2*r+1;0<n--;){if(qt(e,t,a,r,i))if(zt(e,t,a,o))Ft(e,t,a);else{var l=e,c=t,d=a,u=l[c-d],h=l[c+0],m=l[c+d],p=Ds[112+(4+(f=3*(h-u))>>3)],f=Ds[112+(f+3>>3)],g=p+1>>1;l[c-2*d]=Os[255+l[c-2*d]+g],l[c-d]=Os[255+u+f],l[c+0]=Os[255+h-p],l[c+d]=Os[255+m-g]}t+=s}}function $t(e,t,a,s,n,r){Gt(e,t,a,1,16,s,n,r)}function Xt(e,t,a,s,n,r){Gt(e,t,1,a,16,s,n,r)}function Jt(e,t,a,s,n,r){var i;for(i=3;0<i;--i)Yt(e,t+=4*a,a,1,16,s,n,r)}function Kt(e,t,a,s,n,r){var i;for(i=3;0<i;--i)Yt(e,t+=4,1,a,16,s,n,r)}function Qt(e,t,a,s,n,r,i,o){Gt(e,t,n,1,8,r,i,o),Gt(a,s,n,1,8,r,i,o)}function Zt(e,t,a,s,n,r,i,o){Gt(e,t,1,n,8,r,i,o),Gt(a,s,1,n,8,r,i,o)}function ea(e,t,a,s,n,r,i,o){Yt(e,t+4*n,n,1,8,r,i,o),Yt(a,s+4*n,n,1,8,r,i,o)}function ta(e,t,a,s,n,r,i,o){Yt(e,t+4,1,n,8,r,i,o),Yt(a,s+4,1,n,8,r,i,o)}function aa(){this.ba=new ie,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new le,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function sa(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function na(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ra(){this.ua=0,this.Wa=new M,this.vb=new M,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new m,this.yc=new u}function ia(){this.xb=this.a=0,this.l=new Ge,this.ca=new ie,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new j,this.Pb=0,this.wd=new j,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ra,this.ab=0,this.gc=i(4,na),this.Oc=0}function oa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Ge,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function la(e,t,a,s,n,r,i){for(e=null==e?0:e[t+0],t=0;t<i;++t)n[r+t]=e+a[s+t]&255,e=n[r+t]}function ca(e,t,a,s,n,r,i){var o;if(null==e)la(null,null,a,s,n,r,i);else for(o=0;o<i;++o)n[r+o]=e[t+o]+a[s+o]&255}function da(e,t,a,s,n,r,i){if(null==e)la(null,null,a,s,n,r,i);else{var o,l=e[t+0],c=l,d=l;for(o=0;o<i;++o)c=d+(l=e[t+o])-c,d=a[s+o]+(-256&c?0>c?0:255:c)&255,c=l,n[r+o]=d}}function ua(e,a,n,i){var o=a.width,l=a.o;if(t(null!=e&&null!=a),0>n||0>=i||n+i>l)return null;if(!e.Cc){if(null==e.ga){var c;if(e.ga=new oa,(c=null==e.ga)||(c=a.width*a.o,t(0==e.Gb.length),e.Gb=r(c),e.Uc=0,null==e.Gb?c=0:(e.mb=e.Gb,e.nb=e.Uc,e.rc=null,c=1),c=!c),!c){c=e.ga;var d=e.Fa,u=e.P,h=e.qc,m=e.mb,p=e.nb,f=u+1,g=h-1,b=c.l;if(t(null!=d&&null!=m&&null!=a),gn[0]=null,gn[1]=la,gn[2]=ca,gn[3]=da,c.ca=m,c.tb=p,c.c=a.width,c.i=a.height,t(0<c.c&&0<c.i),1>=h)a=0;else if(c.$a=3&d[u+0],c.Z=d[u+0]>>2&3,c.Lc=d[u+0]>>4&3,u=d[u+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||u)a=0;else if(b.put=me,b.ac=he,b.bc=pe,b.ma=c,b.width=a.width,b.height=a.height,b.Da=a.Da,b.v=a.v,b.va=a.va,b.j=a.j,b.o=a.o,c.$a)e:{t(1==c.$a),a=Ae();t:for(;;){if(null==a){a=0;break e}if(t(null!=c),c.mc=a,a.c=c.c,a.i=c.i,a.l=c.l,a.l.ma=c,a.l.width=c.c,a.l.height=c.i,a.a=0,x(a.m,d,f,g),!Pe(c.c,c.i,1,a,null))break t;if(1==a.ab&&3==a.gc[0].hc&&we(a.s)?(c.ic=1,d=a.c*a.i,a.Ta=null,a.Ua=0,a.V=r(d),a.Ba=0,null==a.V?(a.a=1,a=0):a=1):(c.ic=0,a=Ee(a,c.c)),!a)break t;a=1;break e}c.mc=null,a=0}else a=g>=c.c*c.i;c=!a}if(c)return null;1!=e.ga.Lc?e.Ga=0:i=l-n}t(null!=e.ga),t(n+i<=l);e:{if(a=(d=e.ga).c,l=d.l.o,0==d.$a){if(f=e.rc,g=e.Vc,b=e.Fa,u=e.P+1+n*a,h=e.mb,m=e.nb+n*a,t(u<=e.P+e.qc),0!=d.Z)for(t(null!=gn[d.Z]),c=0;c<i;++c)gn[d.Z](f,g,b,u,h,m,a),f=h,g=m,m+=a,u+=a;else for(c=0;c<i;++c)s(h,m,b,u,a),f=h,g=m,m+=a,u+=a;e.rc=f,e.Vc=g}else{if(t(null!=d.mc),a=n+i,t(null!=(c=d.mc)),t(a<=c.i),c.C>=a)a=1;else if(d.ic||ga(),d.ic){d=c.V,f=c.Ba,g=c.c;var v=c.i,y=(b=1,u=c.$/g,h=c.$%g,m=c.m,p=c.s,c.$),j=g*v,N=g*a,_=p.wc,C=y<N?ye(p,h,u):null;t(y<=j),t(a<=v),t(we(p));t:for(;;){for(;!m.h&&y<N;){if(h&_||(C=ye(p,h,u)),t(null!=C),S(m),256>(v=be(C.G[0],C.H[0],m)))d[f+y]=v,++y,++h>=g&&(h=0,++u<=a&&!(u%16)&&Se(c,u));else{if(!(280>v)){b=0;break t}v=ge(v-256,m);var k,A=be(C.G[4],C.H[4],m);if(S(m),!(y>=(A=xe(g,A=ge(A,m)))&&j-y>=v)){b=0;break t}for(k=0;k<v;++k)d[f+y+k]=d[f+y+k-A];for(y+=v,h+=v;h>=g;)h-=g,++u<=a&&!(u%16)&&Se(c,u);y<N&&h&_&&(C=ye(p,h,u))}t(m.h==w(m))}Se(c,u>a?a:u);break t}!b||m.h&&y<j?(b=0,c.a=m.h?5:3):c.$=y,a=b}else a=Ce(c,c.V,c.Ba,c.c,c.i,a,Le);if(!a){i=0;break e}}n+i>=l&&(e.Cc=1),i=1}if(!i)return null;if(e.Cc&&(null!=(i=e.ga)&&(i.mc=null),e.ga=null,0<e.Ga))return alert("todo:WebPDequantizeLevels"),null}return e.nb+n*o}function ha(e,t,a,s,n,r){for(;0<n--;){var i,o=e,l=t+(a?1:0),c=e,d=t+(a?0:3);for(i=0;i<s;++i){var u=c[d+4*i];255!=u&&(u*=32897,o[l+4*i+0]=o[l+4*i+0]*u>>23,o[l+4*i+1]=o[l+4*i+1]*u>>23,o[l+4*i+2]=o[l+4*i+2]*u>>23)}t+=r}}function ma(e,t,a,s,n){for(;0<s--;){var r;for(r=0;r<a;++r){var i=e[t+2*r+0],o=15&(c=e[t+2*r+1]),l=4369*o,c=(240&c|c>>4)*l>>16;e[t+2*r+0]=(240&i|i>>4)*l>>16&240|(15&i|i<<4)*l>>16>>4&15,e[t+2*r+1]=240&c|o}t+=n}}function pa(e,t,a,s,n,r,i,o){var l,c,d=255;for(c=0;c<n;++c){for(l=0;l<s;++l){var u=e[t+l];r[i+4*l]=u,d&=u}t+=a,i+=o}return 255!=d}function fa(e,t,a,s,n){var r;for(r=0;r<n;++r)a[s+r]=e[t+r]>>8}function ga(){Ns=ha,ws=ma,_s=pa,Ss=fa}function xa(a,s,n){e[a]=function(e,a,r,i,o,l,c,d,u,h,m,p,f,g,x,b,v){var y,j=v-1>>1,N=o[l+0]|c[d+0]<<16,w=u[h+0]|m[p+0]<<16;t(null!=e);var _=3*N+w+131074>>2;for(s(e[a+0],255&_,_>>16,f,g),null!=r&&(_=3*w+N+131074>>2,s(r[i+0],255&_,_>>16,x,b)),y=1;y<=j;++y){var S=o[l+y]|c[d+y]<<16,C=u[h+y]|m[p+y]<<16,k=N+S+w+C+524296,A=k+2*(S+w)>>3;_=A+N>>1,N=(k=k+2*(N+C)>>3)+S>>1,s(e[a+2*y-1],255&_,_>>16,f,g+(2*y-1)*n),s(e[a+2*y-0],255&N,N>>16,f,g+(2*y-0)*n),null!=r&&(_=k+w>>1,N=A+C>>1,s(r[i+2*y-1],255&_,_>>16,x,b+(2*y-1)*n),s(r[i+2*y+0],255&N,N>>16,x,b+(2*y+0)*n)),N=S,w=C}1&v||(_=3*N+w+131074>>2,s(e[a+v-1],255&_,_>>16,f,g+(v-1)*n),null!=r&&(_=3*w+N+131074>>2,s(r[i+v-1],255&_,_>>16,x,b+(v-1)*n)))}}function ba(){xn[Ms]=bn,xn[Rs]=yn,xn[Is]=vn,xn[Fs]=jn,xn[zs]=Nn,xn[Bs]=wn,xn[qs]=_n,xn[Us]=yn,xn[Hs]=jn,xn[Ws]=Nn,xn[Vs]=wn}function va(e){return e&~En?0>e?0:255:e>>Pn}function ya(e,t){return va((19077*e>>8)+(26149*t>>8)-14234)}function ja(e,t,a){return va((19077*e>>8)-(6419*t>>8)-(13320*a>>8)+8708)}function Na(e,t){return va((19077*e>>8)+(33050*t>>8)-17685)}function wa(e,t,a,s,n){s[n+0]=ya(e,a),s[n+1]=ja(e,t,a),s[n+2]=Na(e,t)}function _a(e,t,a,s,n){s[n+0]=Na(e,t),s[n+1]=ja(e,t,a),s[n+2]=ya(e,a)}function Sa(e,t,a,s,n){var r=ja(e,t,a);t=r<<3&224|Na(e,t)>>3,s[n+0]=248&ya(e,a)|r>>5,s[n+1]=t}function Ca(e,t,a,s,n){var r=240&Na(e,t)|15;s[n+0]=240&ya(e,a)|ja(e,t,a)>>4,s[n+1]=r}function ka(e,t,a,s,n){s[n+0]=255,wa(e,t,a,s,n+1)}function Aa(e,t,a,s,n){_a(e,t,a,s,n),s[n+3]=255}function Pa(e,t,a,s,n){wa(e,t,a,s,n),s[n+3]=255}function Ve(e,t){return 0>e?0:e>t?t:e}function Ea(t,a,s){e[t]=function(e,t,n,r,i,o,l,c,d){for(var u=c+(-2&d)*s;c!=u;)a(e[t+0],n[r+0],i[o+0],l,c),a(e[t+1],n[r+0],i[o+0],l,c+s),t+=2,++r,++o,c+=2*s;1&d&&a(e[t+0],n[r+0],i[o+0],l,c)}}function La(e,t,a){return 0==a?0==e?0==t?6:5:0==t?4:0:a}function Da(e,t,a,s,n){switch(e>>>30){case 3:rs(t,a,s,n,0);break;case 2:is(t,a,s,n);break;case 1:ls(t,a,s,n)}}function Oa(e,t){var a,r,i=t.M,o=t.Nb,l=e.oc,c=e.pc+40,d=e.oc,u=e.pc+584,h=e.oc,m=e.pc+600;for(a=0;16>a;++a)l[c+32*a-1]=129;for(a=0;8>a;++a)d[u+32*a-1]=129,h[m+32*a-1]=129;for(0<i?l[c-1-32]=d[u-1-32]=h[m-1-32]=129:(n(l,c-32-1,127,21),n(d,u-32-1,127,9),n(h,m-32-1,127,9)),r=0;r<e.za;++r){var p=t.ya[t.aa+r];if(0<r){for(a=-1;16>a;++a)s(l,c+32*a-4,l,c+32*a+12,4);for(a=-1;8>a;++a)s(d,u+32*a-4,d,u+32*a+4,4),s(h,m+32*a-4,h,m+32*a+4,4)}var f=e.Gd,g=e.Hd+r,x=p.ad,b=p.Hc;if(0<i&&(s(l,c-32,f[g].y,0,16),s(d,u-32,f[g].f,0,8),s(h,m-32,f[g].ea,0,8)),p.Za){var v=l,y=c-32+16;for(0<i&&(r>=e.za-1?n(v,y,f[g].y[15],4):s(v,y,f[g+1].y,0,4)),a=0;4>a;a++)v[y+128+a]=v[y+256+a]=v[y+384+a]=v[y+0+a];for(a=0;16>a;++a,b<<=2)v=l,y=c+Fn[a],hn[p.Ob[a]](v,y),Da(b,x,16*+a,v,y)}else if(v=La(r,i,p.Ob[0]),un[v](l,c),0!=b)for(a=0;16>a;++a,b<<=2)Da(b,x,16*+a,l,c+Fn[a]);for(a=p.Gc,v=La(r,i,p.Dd),mn[v](d,u),mn[v](h,m),b=x,v=d,y=u,255&(p=a|0)&&(170&p?os(b,256,v,y):cs(b,256,v,y)),p=h,b=m,255&(a>>=8)&&(170&a?os(x,320,p,b):cs(x,320,p,b)),i<e.Ub-1&&(s(f[g].y,0,l,c+480,16),s(f[g].f,0,d,u+224,8),s(f[g].ea,0,h,m+224,8)),a=8*o*e.B,f=e.sa,g=e.ta+16*r+16*o*e.R,x=e.qa,p=e.ra+8*r+a,b=e.Ha,v=e.Ia+8*r+a,a=0;16>a;++a)s(f,g+a*e.R,l,c+32*a,16);for(a=0;8>a;++a)s(x,p+a*e.B,d,u+32*a,8),s(b,v+a*e.B,h,m+32*a,8)}}function Ta(e,s,n,r,i,o,l,c,d){var u=[0],h=[0],m=0,p=null!=d?d.kd:0,f=null!=d?d:new sa;if(null==e||12>n)return 7;f.data=e,f.w=s,f.ha=n,s=[s],n=[n],f.gb=[f.gb];e:{var g=s,b=n,v=f.gb;if(t(null!=e),t(null!=b),t(null!=v),v[0]=0,12<=b[0]&&!a(e,g[0],"RIFF")){if(a(e,g[0]+8,"WEBP")){v=3;break e}var y=D(e,g[0]+4);if(12>y||4294967286<y){v=3;break e}if(p&&y>b[0]-8){v=7;break e}v[0]=y,g[0]+=12,b[0]-=12}v=0}if(0!=v)return v;for(y=0<f.gb[0],n=n[0];;){e:{var N=e;b=s,v=n;var w=u,_=h,S=g=[0];if((A=m=[m])[0]=0,8>v[0])v=7;else{if(!a(N,b[0],"VP8X")){if(10!=D(N,b[0]+4)){v=3;break e}if(18>v[0]){v=7;break e}var C=D(N,b[0]+8),k=1+L(N,b[0]+12);if(2147483648<=k*(N=1+L(N,b[0]+15))){v=3;break e}null!=S&&(S[0]=C),null!=w&&(w[0]=k),null!=_&&(_[0]=N),b[0]+=18,v[0]-=18,A[0]=1}v=0}}if(m=m[0],g=g[0],0!=v)return v;if(b=!!(2&g),!y&&m)return 3;if(null!=o&&(o[0]=!!(16&g)),null!=l&&(l[0]=b),null!=c&&(c[0]=0),l=u[0],g=h[0],m&&b&&null==d){v=0;break}if(4>n){v=7;break}if(y&&m||!y&&!m&&!a(e,s[0],"ALPH")){n=[n],f.na=[f.na],f.P=[f.P],f.Sa=[f.Sa];e:{C=e,v=s,y=n;var A=f.gb;w=f.na,_=f.P,S=f.Sa,k=22,t(null!=C),t(null!=y),N=v[0];var P=y[0];for(t(null!=w),t(null!=S),w[0]=null,_[0]=null,S[0]=0;;){if(v[0]=N,y[0]=P,8>P){v=7;break e}var E=D(C,N+4);if(4294967286<E){v=3;break e}var O=8+E+1&-2;if(k+=O,0<A&&k>A){v=3;break e}if(!a(C,N,"VP8 ")||!a(C,N,"VP8L")){v=0;break e}if(P[0]<O){v=7;break e}a(C,N,"ALPH")||(w[0]=C,_[0]=N+8,S[0]=E),N+=O,P-=O}}if(n=n[0],f.na=f.na[0],f.P=f.P[0],f.Sa=f.Sa[0],0!=v)break}n=[n],f.Ja=[f.Ja],f.xa=[f.xa];e:if(A=e,v=s,y=n,w=f.gb[0],_=f.Ja,S=f.xa,C=v[0],N=!a(A,C,"VP8 "),k=!a(A,C,"VP8L"),t(null!=A),t(null!=y),t(null!=_),t(null!=S),8>y[0])v=7;else{if(N||k){if(A=D(A,C+4),12<=w&&A>w-12){v=3;break e}if(p&&A>y[0]-8){v=7;break e}_[0]=A,v[0]+=8,y[0]-=8,S[0]=k}else S[0]=5<=y[0]&&47==A[C+0]&&!(A[C+4]>>5),_[0]=y[0];v=0}if(n=n[0],f.Ja=f.Ja[0],f.xa=f.xa[0],s=s[0],0!=v)break;if(4294967286<f.Ja)return 3;if(null==c||b||(c[0]=f.xa?2:1),l=[l],g=[g],f.xa){if(5>n){v=7;break}c=l,p=g,b=o,null==e||5>n?e=0:5<=n&&47==e[s+0]&&!(e[s+4]>>5)?(y=[0],A=[0],w=[0],x(_=new j,e,s,n),fe(_,y,A,w)?(null!=c&&(c[0]=y[0]),null!=p&&(p[0]=A[0]),null!=b&&(b[0]=w[0]),e=1):e=0):e=0}else{if(10>n){v=7;break}c=g,null==e||10>n||!Xe(e,s+3,n-3)?e=0:(p=e[s+0]|e[s+1]<<8|e[s+2]<<16,b=16383&(e[s+7]<<8|e[s+6]),e=16383&(e[s+9]<<8|e[s+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=f.Ja||!b||!e?e=0:(l&&(l[0]=b),c&&(c[0]=e),e=1))}if(!e)return 3;if(l=l[0],g=g[0],m&&(u[0]!=l||h[0]!=g))return 3;null!=d&&(d[0]=f,d.offset=s-d.w,t(4294967286>s-d.w),t(d.offset==d.ha-n));break}return 0==v||7==v&&m&&null==d?(null!=o&&(o[0]|=null!=f.na&&0<f.na.length),null!=r&&(r[0]=l),null!=i&&(i[0]=g),0):v}function Ma(e,t,a){var s=t.width,n=t.height,r=0,i=0,o=s,l=n;if(t.Da=null!=e&&0<e.Da,t.Da&&(o=e.cd,l=e.bd,r=e.v,i=e.j,11>a||(r&=-2,i&=-2),0>r||0>i||0>=o||0>=l||r+o>s||i+l>n))return 0;if(t.v=r,t.j=i,t.va=r+o,t.o=i+l,t.U=o,t.T=l,t.da=null!=e&&0<e.da,t.da){if(!R(o,l,a=[e.ib],r=[e.hb]))return 0;t.ib=a[0],t.hb=r[0]}return t.ob=null!=e&&e.ob,t.Kb=null==e||!e.Sd,t.da&&(t.ob=t.ib<3*s/4&&t.hb<3*n/4,t.Kb=0),1}function Ra(e){if(null==e)return 2;if(11>e.S){var t=e.f.RGBA;t.fb+=(e.height-1)*t.A,t.A=-t.A}else t=e.f.kb,e=e.height,t.O+=(e-1)*t.fa,t.fa=-t.fa,t.N+=(e-1>>1)*t.Ab,t.Ab=-t.Ab,t.W+=(e-1>>1)*t.Db,t.Db=-t.Db,null!=t.F&&(t.J+=(e-1)*t.lb,t.lb=-t.lb);return 0}function Ia(e,t,a,s){if(null==s||0>=e||0>=t)return 2;if(null!=a){if(a.Da){var n=a.cd,i=a.bd,o=-2&a.v,l=-2&a.j;if(0>o||0>l||0>=n||0>=i||o+n>e||l+i>t)return 2;e=n,t=i}if(a.da){if(!R(e,t,n=[a.ib],i=[a.hb]))return 2;e=n[0],t=i[0]}}s.width=e,s.height=t;e:{var c=s.width,d=s.height;if(e=s.S,0>=c||0>=d||!(e>=Ms&&13>e))e=2;else{if(0>=s.Rd&&null==s.sd){o=i=n=t=0;var u=(l=c*Un[e])*d;if(11>e||(i=(d+1)/2*(t=(c+1)/2),12==e&&(o=(n=c)*d)),null==(d=r(u+2*i+o))){e=1;break e}s.sd=d,11>e?((c=s.f.RGBA).eb=d,c.fb=0,c.A=l,c.size=u):((c=s.f.kb).y=d,c.O=0,c.fa=l,c.Fd=u,c.f=d,c.N=0+u,c.Ab=t,c.Cd=i,c.ea=d,c.W=0+u+i,c.Db=t,c.Ed=i,12==e&&(c.F=d,c.J=0+u+2*i),c.Tc=o,c.lb=n)}if(t=1,n=s.S,i=s.width,o=s.height,n>=Ms&&13>n)if(11>n)e=s.f.RGBA,t&=(l=Math.abs(e.A))*(o-1)+i<=e.size,t&=l>=i*Un[n],t&=null!=e.eb;else{e=s.f.kb,l=(i+1)/2,u=(o+1)/2,c=Math.abs(e.fa),d=Math.abs(e.Ab);var h=Math.abs(e.Db),m=Math.abs(e.lb),p=m*(o-1)+i;t&=c*(o-1)+i<=e.Fd,t&=d*(u-1)+l<=e.Cd,t=(t&=h*(u-1)+l<=e.Ed)&c>=i&d>=l&h>=l,t&=null!=e.y,t&=null!=e.f,t&=null!=e.ea,12==n&&(t&=m>=i,t&=p<=e.Tc,t&=null!=e.F)}else t=0;e=t?0:2}}return 0!=e||null!=a&&a.fd&&(e=Ra(s)),e}var Fa=64,za=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ba=24,qa=32,Ua=8,Ha=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];z("Predictor0","PredictorAdd0"),e.Predictor0=function(){return 4278190080},e.Predictor1=function(e){return e},e.Predictor2=function(e,t,a){return t[a+0]},e.Predictor3=function(e,t,a){return t[a+1]},e.Predictor4=function(e,t,a){return t[a-1]},e.Predictor5=function(e,t,a){return q(q(e,t[a+1]),t[a+0])},e.Predictor6=function(e,t,a){return q(e,t[a-1])},e.Predictor7=function(e,t,a){return q(e,t[a+0])},e.Predictor8=function(e,t,a){return q(t[a-1],t[a+0])},e.Predictor9=function(e,t,a){return q(t[a+0],t[a+1])},e.Predictor10=function(e,t,a){return q(q(e,t[a-1]),q(t[a+0],t[a+1]))},e.Predictor11=function(e,t,a){var s=t[a+0];return 0>=W(s>>24&255,e>>24&255,(t=t[a-1])>>24&255)+W(s>>16&255,e>>16&255,t>>16&255)+W(s>>8&255,e>>8&255,t>>8&255)+W(255&s,255&e,255&t)?s:e},e.Predictor12=function(e,t,a){var s=t[a+0];return(U((e>>24&255)+(s>>24&255)-((t=t[a-1])>>24&255))<<24|U((e>>16&255)+(s>>16&255)-(t>>16&255))<<16|U((e>>8&255)+(s>>8&255)-(t>>8&255))<<8|U((255&e)+(255&s)-(255&t)))>>>0},e.Predictor13=function(e,t,a){var s=t[a-1];return(H((e=q(e,t[a+0]))>>24&255,s>>24&255)<<24|H(e>>16&255,s>>16&255)<<16|H(e>>8&255,s>>8&255)<<8|H(255&e,255&s))>>>0};var Wa=e.PredictorAdd0;e.PredictorAdd1=V,z("Predictor2","PredictorAdd2"),z("Predictor3","PredictorAdd3"),z("Predictor4","PredictorAdd4"),z("Predictor5","PredictorAdd5"),z("Predictor6","PredictorAdd6"),z("Predictor7","PredictorAdd7"),z("Predictor8","PredictorAdd8"),z("Predictor9","PredictorAdd9"),z("Predictor10","PredictorAdd10"),z("Predictor11","PredictorAdd11"),z("Predictor12","PredictorAdd12"),z("Predictor13","PredictorAdd13");var Va=e.PredictorAdd2;X("ColorIndexInverseTransform","MapARGB","32b",(function(e){return e>>8&255}),(function(e){return e})),X("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(e){return e}),(function(e){return e>>8&255}));var Ga,Ya=e.ColorIndexInverseTransform,$a=e.MapARGB,Xa=e.VP8LColorIndexInverseTransformAlpha,Ja=e.MapAlpha,Ka=e.VP8LPredictorsAdd=[];Ka.length=16,(e.VP8LPredictors=[]).length=16,(e.VP8LPredictorsAdd_C=[]).length=16,(e.VP8LPredictors_C=[]).length=16;var Qa,Za,es,ts,as,ss,ns,rs,is,os,ls,cs,ds,us,hs,ms,ps,fs,gs,xs,bs,vs,ys,js,Ns,ws,_s,Ss,Cs=r(511),ks=r(2041),As=r(225),Ps=r(767),Es=0,Ls=ks,Ds=As,Os=Ps,Ts=Cs,Ms=0,Rs=1,Is=2,Fs=3,zs=4,Bs=5,qs=6,Us=7,Hs=8,Ws=9,Vs=10,Gs=[2,3,7],Ys=[3,3,11],$s=[280,256,256,256,40],Xs=[0,1,1,1,0],Js=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ks=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Qs=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Zs=8,en=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],tn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],an=null,sn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],nn=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],rn=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],on=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ln=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],cn=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],dn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],un=[],hn=[],mn=[],pn=1,fn=2,gn=[],xn=[];xa("UpsampleRgbLinePair",wa,3),xa("UpsampleBgrLinePair",_a,3),xa("UpsampleRgbaLinePair",Pa,4),xa("UpsampleBgraLinePair",Aa,4),xa("UpsampleArgbLinePair",ka,4),xa("UpsampleRgba4444LinePair",Ca,2),xa("UpsampleRgb565LinePair",Sa,2);var bn=e.UpsampleRgbLinePair,vn=e.UpsampleBgrLinePair,yn=e.UpsampleRgbaLinePair,jn=e.UpsampleBgraLinePair,Nn=e.UpsampleArgbLinePair,wn=e.UpsampleRgba4444LinePair,_n=e.UpsampleRgb565LinePair,Sn=16,Cn=1<<Sn-1,kn=-227,An=482,Pn=6,En=(256<<Pn)-1,Ln=0,Dn=r(256),On=r(256),Tn=r(256),Mn=r(256),Rn=r(An-kn),In=r(An-kn);Ea("YuvToRgbRow",wa,3),Ea("YuvToBgrRow",_a,3),Ea("YuvToRgbaRow",Pa,4),Ea("YuvToBgraRow",Aa,4),Ea("YuvToArgbRow",ka,4),Ea("YuvToRgba4444Row",Ca,2),Ea("YuvToRgb565Row",Sa,2);var Fn=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],zn=[0,2,8],Bn=[8,7,6,4,4,2,2,2,1,1,1,1],qn=1;this.WebPDecodeRGBA=function(e,a,s,n,r){var i=Rs,o=new aa,l=new ie;o.ba=l,l.S=i,l.width=[l.width],l.height=[l.height];var c=l.width,d=l.height,u=new oe;if(null==u||null==e)var h=2;else t(null!=u),h=Ta(e,a,s,u.width,u.height,u.Pd,u.Qd,u.format,null);if(0!=h?c=0:(null!=c&&(c[0]=u.width[0]),null!=d&&(d[0]=u.height[0]),c=1),c){l.width=l.width[0],l.height=l.height[0],null!=n&&(n[0]=l.width),null!=r&&(r[0]=l.height);e:{if(n=new Ge,(r=new sa).data=e,r.w=a,r.ha=s,r.kd=1,a=[0],t(null!=r),(0==(e=Ta(r.data,r.w,r.ha,null,null,null,a,null,r))||7==e)&&a[0]&&(e=4),0==(a=e)){if(t(null!=o),n.data=r.data,n.w=r.w+r.offset,n.ha=r.ha-r.offset,n.put=me,n.ac=he,n.bc=pe,n.ma=o,r.xa){if(null==(e=Ae())){o=1;break e}if(function(e,a){var s=[0],n=[0],r=[0];t:for(;;){if(null==e)return 0;if(null==a)return e.a=2,0;if(e.l=a,e.a=0,x(e.m,a.data,a.w,a.ha),!fe(e.m,s,n,r)){e.a=3;break t}if(e.xb=fn,a.width=s[0],a.height=n[0],!Pe(s[0],n[0],1,e,null))break t;return 1}return t(0!=e.a),0}(e,n)){if(n=0==(a=Ia(n.width,n.height,o.Oa,o.ba))){t:{n=e;a:for(;;){if(null==n){n=0;break t}if(t(null!=n.s.yc),t(null!=n.s.Ya),t(0<n.s.Wb),t(null!=(s=n.l)),t(null!=(r=s.ma)),0!=n.xb){if(n.ca=r.ba,n.tb=r.tb,t(null!=n.ca),!Ma(r.Oa,s,Fs)){n.a=2;break a}if(!Ee(n,s.width))break a;if(s.da)break a;if((s.da||se(n.ca.S))&&ga(),11>n.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=n.ca.f.kb.F&&ga()),n.Pb&&0<n.s.ua&&null==n.s.vb.X&&!O(n.s.vb,n.s.Wa.Xa)){n.a=1;break a}n.xb=0}if(!Ce(n,n.V,n.Ba,n.c,n.i,s.o,Ne))break a;r.Dc=n.Ma,n=1;break t}t(0!=n.a),n=0}n=!n}n&&(a=e.a)}else a=e.a}else{if(null==(e=new Ye)){o=1;break e}if(e.Fa=r.na,e.P=r.P,e.qc=r.Sa,Je(e,n)){if(0==(a=Ia(n.width,n.height,o.Oa,o.ba))){if(e.Aa=0,s=o.Oa,t(null!=(r=e)),null!=s){if(0<(c=0>(c=s.Md)?0:100<c?255:255*c/100)){for(d=u=0;4>d;++d)12>(h=r.pb[d]).lc&&(h.ia=c*Bn[0>h.lc?0:h.lc]>>3),u|=h.ia;u&&(alert("todo:VP8InitRandom"),r.ia=1)}r.Ga=s.Id,100<r.Ga?r.Ga=100:0>r.Ga&&(r.Ga=0)}Ze(e,n)||(a=e.a)}}else a=e.a}0==a&&null!=o.Oa&&o.Oa.fd&&(a=Ra(o.ba))}o=a}i=0!=o?null:11>i?l.f.RGBA.eb:l.f.kb.y}else i=null;return i};var Un=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(e,t){for(var a="",s=0;s<4;s++)a+=String.fromCharCode(e[t++]);return a}function d(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16)>>>0}function u(e,t){return(e[t+0]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}new l;var h=[0],m=[0],p=[],f=new l,g=e,x=function(e,t){var a={},s=0,n=!1,r=0,i=0;if(a.frames=[],!function(e,t){for(var a=0;a<4;a++)if(e[t+a]!="RIFF".charCodeAt(a))return!0;return!1}(e,t)){var o,l;for(u(e,t+=4),t+=8;t<e.length;){var h=c(e,t),m=u(e,t+=4);t+=4;var p=m+(1&m);switch(h){case"VP8 ":case"VP8L":void 0===a.frames[s]&&(a.frames[s]={}),(x=a.frames[s]).src_off=n?i:t-8,x.src_size=r+m+8,s++,n&&(n=!1,r=0,i=0);break;case"VP8X":(x=a.header={}).feature_flags=e[t];var f=t+4;x.canvas_width=1+d(e,f),f+=3,x.canvas_height=1+d(e,f),f+=3;break;case"ALPH":n=!0,r=p+8,i=t-8;break;case"ANIM":(x=a.header).bgcolor=u(e,t),f=t+4,x.loop_count=(o=e)[(l=f)+0]|o[l+1]<<8,f+=2;break;case"ANMF":var g,x;(x=a.frames[s]={}).offset_x=2*d(e,t),t+=3,x.offset_y=2*d(e,t),t+=3,x.width=1+d(e,t),t+=3,x.height=1+d(e,t),t+=3,x.duration=d(e,t),t+=3,g=e[t++],x.dispose=1&g,x.blend=g>>1&1}"ANMF"!=h&&(t+=p)}return a}}(g,0);x.response=g,x.rgbaoutput=!0,x.dataurl=!1;var b=x.header?x.header:null,v=x.frames?x.frames:null;if(b){b.loop_counter=b.loop_count,h=[b.canvas_height],m=[b.canvas_width];for(var y=0;y<v.length&&0!=v[y].blend;y++);}var j=v[0],N=f.WebPDecodeRGBA(g,j.src_off,j.src_size,m,h);j.rgba=N,j.imgwidth=m[0],j.imgheight=h[0];for(var w=0;w<m[0]*h[0]*4;w++)p[w]=N[w];return this.width=m,this.height=h,this.data=p,this}!function(e){var t=function(t,s,l,c){var d=4,u=r;switch(c){case e.image_compression.FAST:d=1,u=n;break;case e.image_compression.MEDIUM:d=6,u=i;break;case e.image_compression.SLOW:d=9,u=o}var h=K(t=a(t,s,l,u),{level:d});return e.__addimage__.arrayBufferToBinaryString(h)},a=function(e,t,a,s){for(var n,r,i,o=e.length/t,l=new Uint8Array(e.length+o),u=c(),h=0;h<o;h+=1){if(i=h*t,n=e.subarray(i,i+t),s)l.set(s(n,a,r),i+h);else{for(var m,p=u.length,f=[];m<p;m+=1)f[m]=u[m](n,a,r);var g=d(f.concat());l.set(f[g],i+h)}r=n}return l},s=function(e){var t=Array.apply([],e);return t.unshift(0),t},n=function(e,t){var a,s=[],n=e.length;s[0]=1;for(var r=0;r<n;r+=1)a=e[r-t]||0,s[r+1]=e[r]-a+256&255;return s},r=function(e,t,a){var s,n=[],r=e.length;n[0]=2;for(var i=0;i<r;i+=1)s=a&&a[i]||0,n[i+1]=e[i]-s+256&255;return n},i=function(e,t,a){var s,n,r=[],i=e.length;r[0]=3;for(var o=0;o<i;o+=1)s=e[o-t]||0,n=a&&a[o]||0,r[o+1]=e[o]+256-(s+n>>>1)&255;return r},o=function(e,t,a){var s,n,r,i,o=[],c=e.length;o[0]=4;for(var d=0;d<c;d+=1)s=e[d-t]||0,n=a&&a[d]||0,r=a&&a[d-t]||0,i=l(s,n,r),o[d+1]=e[d]-i+256&255;return o},l=function(e,t,a){if(e===t&&t===a)return e;var s=Math.abs(t-a),n=Math.abs(e-a),r=Math.abs(e+t-a-a);return s<=n&&s<=r?e:n<=r?t:a},c=function(){return[s,n,r,i,o]},d=function(e){var t=e.map((function(e){return e.reduce((function(e,t){return e+Math.abs(t)}),0)}));return t.indexOf(Math.min.apply(null,t))};e.processPNG=function(a,s,n,r){var i,o,l,c,d,u,h,m,p,f,g,x,b,v,y,j=this.decode.FLATE_DECODE,N="";if(this.__addimage__.isArrayBuffer(a)&&(a=new Uint8Array(a)),this.__addimage__.isArrayBufferView(a)){if(a=(l=new Gt(a)).imgData,o=l.bits,i=l.colorSpace,d=l.colors,-1!==[4,6].indexOf(l.colorType)){if(8===l.bits){p=(m=32==l.pixelBitlength?new Uint32Array(l.decodePixels().buffer):16==l.pixelBitlength?new Uint16Array(l.decodePixels().buffer):new Uint8Array(l.decodePixels().buffer)).length,g=new Uint8Array(p*l.colors),f=new Uint8Array(p);var w,_=l.pixelBitlength-l.bits;for(v=0,y=0;v<p;v++){for(b=m[v],w=0;w<_;)g[y++]=b>>>w&255,w+=l.bits;f[v]=b>>>w&255}}if(16===l.bits){p=(m=new Uint32Array(l.decodePixels().buffer)).length,g=new Uint8Array(p*(32/l.pixelBitlength)*l.colors),f=new Uint8Array(p*(32/l.pixelBitlength)),x=l.colors>1,v=0,y=0;for(var S=0;v<p;)b=m[v++],g[y++]=b>>>0&255,x&&(g[y++]=b>>>16&255,b=m[v++],g[y++]=b>>>0&255),f[S++]=b>>>16&255;o=8}r!==e.image_compression.NONE?(a=t(g,l.width*l.colors,l.colors,r),h=t(f,l.width,1,r)):(a=g,h=f,j=void 0)}if(3===l.colorType&&(i=this.color_spaces.INDEXED,u=l.palette,l.transparency.indexed)){var C=l.transparency.indexed,k=0;for(v=0,p=C.length;v<p;++v)k+=C[v];if((k/=255)===p-1&&-1!==C.indexOf(0))c=[C.indexOf(0)];else if(k!==p){for(m=l.decodePixels(),f=new Uint8Array(m.length),v=0,p=m.length;v<p;v++)f[v]=C[m[v]];h=t(f,l.width,1)}}var A=function(t){var a;switch(t){case e.image_compression.FAST:a=11;break;case e.image_compression.MEDIUM:a=13;break;case e.image_compression.SLOW:a=14;break;default:a=12}return a}(r);return j===this.decode.FLATE_DECODE&&(N="/Predictor "+A+" "),N+="/Colors "+d+" /BitsPerComponent "+o+" /Columns "+l.width,(this.__addimage__.isArrayBuffer(a)||this.__addimage__.isArrayBufferView(a))&&(a=this.__addimage__.arrayBufferToBinaryString(a)),(h&&this.__addimage__.isArrayBuffer(h)||this.__addimage__.isArrayBufferView(h))&&(h=this.__addimage__.arrayBufferToBinaryString(h)),{alias:n,data:a,index:s,filter:j,decodeParameters:N,transparency:c,palette:u,sMask:h,predictor:A,width:l.width,height:l.height,bitsPerComponent:o,colorSpace:i}}}}(Oe.API),function(e){e.processGIF89A=function(t,a,s,n){var r=new Yt(t),i=r.width,o=r.height,l=[];r.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:i,height:o},d=new Xt(100).encode(c,100);return e.processJPEG.call(this,d,a,s,n)},e.processGIF87A=e.processGIF89A}(Oe.API),Jt.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:n,green:s,blue:a,quad:r}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Jt.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(e){ae.log("bit decode error:"+e)}},Jt.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),a=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,n=0;n<t;n++)for(var r=this.datav.getUint8(this.pos++,!0),i=s*this.width*4+8*n*4,o=0;o<8&&8*n+o<this.width;o++){var l=this.palette[r>>7-o&1];this.data[i+4*o]=l.blue,this.data[i+4*o+1]=l.green,this.data[i+4*o+2]=l.red,this.data[i+4*o+3]=255}0!==a&&(this.pos+=4-a)}},Jt.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,n=0;n<e;n++){var r=this.datav.getUint8(this.pos++,!0),i=s*this.width*4+2*n*4,o=r>>4,l=15&r,c=this.palette[o];if(this.data[i]=c.blue,this.data[i+1]=c.green,this.data[i+2]=c.red,this.data[i+3]=255,2*n+1>=this.width)break;c=this.palette[l],this.data[i+4]=c.blue,this.data[i+4+1]=c.green,this.data[i+4+2]=c.red,this.data[i+4+3]=255}0!==t&&(this.pos+=4-t)}},Jt.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var a=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var n=this.datav.getUint8(this.pos++,!0),r=a*this.width*4+4*s;if(n<this.palette.length){var i=this.palette[n];this.data[r]=i.red,this.data[r+1]=i.green,this.data[r+2]=i.blue,this.data[r+3]=255}else this.data[r]=255,this.data[r+1]=255,this.data[r+2]=255,this.data[r+3]=255}0!==e&&(this.pos+=4-e)}},Jt.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,n=0;n<this.width;n++){var r=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(r&t)/t*255|0,o=(r>>5&t)/t*255|0,l=(r>>10&t)/t*255|0,c=r>>15?255:0,d=s*this.width*4+4*n;this.data[d]=l,this.data[d+1]=o,this.data[d+2]=i,this.data[d+3]=c}this.pos+=e}},Jt.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),a=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var n=this.bottom_up?s:this.height-1-s,r=0;r<this.width;r++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&a)/a*255|0,c=(i>>11)/t*255|0,d=n*this.width*4+4*r;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=o,this.data[d+3]=255}this.pos+=e}},Jt.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*a;this.data[i]=r,this.data[i+1]=n,this.data[i+2]=s,this.data[i+3]=255}this.pos+=this.width%4}},Jt.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*a;this.data[o]=r,this.data[o+1]=n,this.data[o+2]=s,this.data[o+3]=i}},Jt.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,a,s,n){var r=new Jt(t,!1),i=r.width,o=r.height,l={data:r.getData(),width:i,height:o},c=new Xt(100).encode(l,100);return e.processJPEG.call(this,c,a,s,n)}}(Oe.API),Kt.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,a,s,n){var r=new Kt(t,!1),i=r.width,o=r.height,l={data:r.getData(),width:i,height:o},c=new Xt(100).encode(l,100);return e.processJPEG.call(this,c,a,s,n)}}(Oe.API),Oe.API.processRGBA=function(e,t,a){for(var s=e.data,n=s.length,r=new Uint8Array(n/4*3),i=new Uint8Array(n/4),o=0,l=0,c=0;c<n;c+=4){var d=s[c],u=s[c+1],h=s[c+2],m=s[c+3];r[o++]=d,r[o++]=u,r[o++]=h,i[l++]=m}var p=this.__addimage__.arrayBufferToBinaryString(r);return{alpha:this.__addimage__.arrayBufferToBinaryString(i),data:p,index:t,alias:a,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Oe.API.setLanguage=function(e){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]&&(this.internal.languageSettings.languageCode=e,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},qt=Oe.API,Ut=qt.getCharWidthsArray=function(e,t){var a,n,r=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:r.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:r.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=!1!==t.doKerning,m=0,p=e.length,f=0,g=l[0]||c,x=[];for(a=0;a<p;a++)n=e.charCodeAt(a),"function"==typeof r.metadata.widthOfString?x.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(m=h&&"object"===(0,s.A)(d[n])&&!isNaN(parseInt(d[n][f],10))?d[n][f]/u:0,x.push((l[n]||g)/c+m)),f=n;return x},Ht=qt.getStringUnitWidth=function(e,t){var a=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),n=t.charSpace||this.internal.getCharSpace();return qt.processArabic&&(e=qt.processArabic(e)),"function"==typeof s.metadata.widthOfString?s.metadata.widthOfString(e,a,n)/a:Ut.apply(this,arguments).reduce((function(e,t){return e+t}),0)},Wt=function(e,t,a,s){for(var n=[],r=0,i=e.length,o=0;r!==i&&o+t[r]<a;)o+=t[r],r++;n.push(e.slice(0,r));var l=r;for(o=0;r!==i;)o+t[r]>s&&(n.push(e.slice(l,r)),o=0,l=r),o+=t[r],r++;return l!==r&&n.push(e.slice(l,r)),n},Vt=function(e,t,a){a||(a={});var s,n,r,i,o,l,c,d=[],u=[d],h=a.textIndent||0,m=0,p=0,f=e.split(" "),g=Ut.apply(this,[" ",a])[0];if(l=-1===a.lineIndent?f[0].length+2:a.lineIndent||0){var x=Array(l).join(" "),b=[];f.map((function(e){(e=e.split(/\s*\n/)).length>1?b=b.concat(e.map((function(e,t){return(t&&e.length?"\n":"")+e}))):b.push(e[0])})),f=b,l=Ht.apply(this,[x,a])}for(r=0,i=f.length;r<i;r++){var v=0;if(s=f[r],l&&"\n"==s[0]&&(s=s.substr(1),v=1),h+m+(p=(n=Ut.apply(this,[s,a])).reduce((function(e,t){return e+t}),0))>t||v){if(p>t){for(o=Wt.apply(this,[s,n,t-(h+m),t]),d.push(o.shift()),d=[o.pop()];o.length;)u.push([o.shift()]);p=n.slice(s.length-(d[0]?d[0].length:0)).reduce((function(e,t){return e+t}),0)}else d=[s];u.push(d),h=p+l,m=g}else d.push(s),h+=m+p,m=g}return c=l?function(e,t){return(t?x:"")+e.join(" ")}:function(e){return e.join(" ")},u.map(c)},qt.splitTextToSize=function(e,t,a){var s,n=(a=a||{}).fontSize||this.internal.getFontSize(),r=function(e){if(e.widths&&e.kerning)return{widths:e.widths,kerning:e.kerning};var t=this.internal.getFont(e.fontName,e.fontStyle);return t.metadata.Unicode?{widths:t.metadata.Unicode.widths||{0:1},kerning:t.metadata.Unicode.kerning||{}}:{font:t.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,a);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var i=1*this.internal.scaleFactor*t/n;r.textIndent=a.textIndent?1*a.textIndent*this.internal.scaleFactor/n:0,r.lineIndent=a.lineIndent;var o,l,c=[];for(o=0,l=s.length;o<l;o++)c=c.concat(Vt.apply(this,[s[o],i,r]));return c},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",a={},n={},r=0;r<16;r++)a[t[r]]="0123456789abcdef"[r],n["0123456789abcdef"[r]]=t[r];var i=function(e){return"0x"+parseInt(e,10).toString(16)},o=e.__fontmetrics__.compress=function(e){var t,a,r,l,c=["{"];for(var d in e){if(t=e[d],isNaN(parseInt(d,10))?a="'"+d+"'":(d=parseInt(d,10),a=(a=i(d).slice(2)).slice(0,-1)+n[a.slice(-1)]),"number"==typeof t)t<0?(r=i(t).slice(3),l="-"):(r=i(t).slice(2),l=""),r=l+r.slice(0,-1)+n[r.slice(-1)];else{if("object"!==(0,s.A)(t))throw new Error("Don't know what to do with value type "+(0,s.A)(t)+".");r=o(t)}c.push(a+r)}return c.push("}"),c.join("")},l=e.__fontmetrics__.uncompress=function(e){if("string"!=typeof e)throw new Error("Invalid argument passed to uncompress.");for(var t,s,n,r,i={},o=1,l=i,c=[],d="",u="",h=e.length-1,m=1;m<h;m+=1)"'"==(r=e[m])?t?(n=t.join(""),t=void 0):t=[]:t?t.push(r):"{"==r?(c.push([l,n]),l={},n=void 0):"}"==r?((s=c.pop())[0][s[1]]=l,n=void 0,l=s[0]):"-"==r?o=-1:void 0===n?a.hasOwnProperty(r)?(d+=a[r],n=parseInt(d,16)*o,o=1,d=""):d+=r:a.hasOwnProperty(r)?(u+=a[r],l[n]=parseInt(u,16)*o,o=1,n=void 0,u=""):u+=r;return i},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(e){var t=e.font,a=u.Unicode[t.postScriptName];a&&(t.metadata.Unicode={},t.metadata.Unicode.widths=a.widths,t.metadata.Unicode.kerning=a.kerning);var s=d.Unicode[t.postScriptName];s&&(t.metadata.Unicode.encoding=s,t.encoding=s.codePages[0])}])}(Oe.API),function(e){var t=function(e){for(var t=e.length,a=new Uint8Array(t),s=0;s<t;s++)a[s]=e.charCodeAt(s);return a};e.API.events.push(["addFont",function(a){var s=void 0,n=a.font,r=a.instance;if(!n.isStandardFont){if(void 0===r)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if("string"!=typeof(s=!1===r.existsFileInVFS(n.postScriptName)?r.loadFile(n.postScriptName):r.getFileFromVFS(n.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");!function(a,s){s=/^\x00\x01\x00\x00/.test(s)?t(s):t(ie(s)),a.metadata=e.API.TTFFont.open(s),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]}(n,s)}}])}(Oe),function(){function e(){return(ee.canvg?Promise.resolve(ee.canvg):a.e(455).then(a.bind(a,8455))).catch((function(e){return Promise.reject(new Error("Could not load canvg: "+e))})).then((function(e){return e.default?e.default:e}))}Oe.API.addSvgAsImage=function(t,a,s,n,r,i,o,l){if(isNaN(a)||isNaN(s))throw ae.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(r))throw ae.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=n,c.height=r;var d=c.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,c.width,c.height);var u={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return e().then((function(e){return e.fromString(d,t,u)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(e){return e.render(u)})).then((function(){h.addImage(c.toDataURL("image/jpeg",1),a,s,n,r,o,l)}))}}(),Oe.API.putTotalPages=function(e){var t,a=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),a=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),a=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var n=0;n<this.internal.pages[s].length;n++)this.internal.pages[s][n]=this.internal.pages[s][n].replace(t,a);return this},Oe.API.viewerPreferences=function(e,t){var a;e=e||{},t=t||!1;var n,r,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function m(e,t){var a,s=!1;for(a=0;a<e.length;a+=1)e[a]===t&&(s=!0);return s}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),a=this.internal.viewerpreferences.configuration,"reset"===e||!0===t){var p=l.length;for(h=0;h<p;h+=1)a[l[h]].value=a[l[h]].defaultValue,a[l[h]].explicitSet=!1}if("object"===(0,s.A)(e))for(r in e)if(i=e[r],m(l,r)&&void 0!==i){if("boolean"===a[r].type&&"boolean"==typeof i)a[r].value=i;else if("name"===a[r].type&&m(a[r].valueSet,i))a[r].value=i;else if("integer"===a[r].type&&Number.isInteger(i))a[r].value=i;else if("array"===a[r].type){for(d=0;d<i.length;d+=1)if(n=!0,1===i[d].length&&"number"==typeof i[d][0])c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)"number"!=typeof i[d][u]&&(n=!1);!0===n&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}a[r].value="["+c.join(" ")+"]"}else a[r].value=a[r].defaultValue;a[r].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var e,t=[];for(e in a)!0===a[e].explicitSet&&("name"===a[e].type?t.push("/"+e+" /"+a[e].value):t.push("/"+e+" "+a[e].value));0!==t.length&&this.internal.write("/ViewerPreferences\n<<\n"+t.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=a,this},function(e){var t=function(){var e='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',t=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(e)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),n=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),r=unescape(encodeURIComponent("</x:xmpmeta>")),i=a.length+s.length+n.length+t.length+r.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+i+" >>"),this.internal.write("stream"),this.internal.write(t+a+s+n+r),this.internal.write("endstream"),this.internal.write("endobj")},a=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(e,s){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:e,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",a),this.internal.events.subscribe("postPutResources",t)),this}}(Oe.API),function(e){var t=e.API,a=t.pdfEscape16=function(e,t){for(var a,s=t.metadata.Unicode.widths,n=["","0","00","000","0000"],r=[""],i=0,o=e.length;i<o;++i){if(a=t.metadata.characterToGlyph(e.charCodeAt(i)),t.metadata.glyIdsUsed.push(a),t.metadata.toUnicode[a]=e.charCodeAt(i),-1==s.indexOf(a)&&(s.push(a),s.push([parseInt(t.metadata.widthOfGlyph(a),10)])),"0"==a)return r.join("");a=a.toString(16),r.push(n[4-a.length],a)}return r.join("")},s=function(e){var t,a,s,n,r,i,o;for(r="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",s=[],i=0,o=(a=Object.keys(e).sort((function(e,t){return e-t}))).length;i<o;i++)t=a[i],s.length>=100&&(r+="\n"+s.length+" beginbfchar\n"+s.join("\n")+"\nendbfchar",s=[]),void 0!==e[t]&&null!==e[t]&&"function"==typeof e[t].toString&&(n=("0000"+e[t].toString(16)).slice(-4),t=("0000"+(+t).toString(16)).slice(-4),s.push("<"+t+"><"+n+">"));return s.length&&(r+="\n"+s.length+" beginbfchar\n"+s.join("\n")+"\nendbfchar\n"),r+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};t.events.push(["putFont",function(t){!function(t){var a=t.font,n=t.out,r=t.newObject,i=t.putStream;if(a.metadata instanceof e.API.TTFFont&&"Identity-H"===a.encoding){for(var o=a.metadata.Unicode.widths,l=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),c="",d=0;d<l.length;d++)c+=String.fromCharCode(l[d]);var u=r();i({data:c,addLength1:!0,objectId:u}),n("endobj");var h=r();i({data:s(a.metadata.toUnicode),addLength1:!0,objectId:h}),n("endobj");var m=r();n("<<"),n("/Type /FontDescriptor"),n("/FontName /"+ke(a.fontName)),n("/FontFile2 "+u+" 0 R"),n("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),n("/Flags "+a.metadata.flags),n("/StemV "+a.metadata.stemV),n("/ItalicAngle "+a.metadata.italicAngle),n("/Ascent "+a.metadata.ascender),n("/Descent "+a.metadata.decender),n("/CapHeight "+a.metadata.capHeight),n(">>"),n("endobj");var p=r();n("<<"),n("/Type /Font"),n("/BaseFont /"+ke(a.fontName)),n("/FontDescriptor "+m+" 0 R"),n("/W "+e.API.PDFObject.convert(o)),n("/CIDToGIDMap /Identity"),n("/DW 1000"),n("/Subtype /CIDFontType2"),n("/CIDSystemInfo"),n("<<"),n("/Supplement 0"),n("/Registry (Adobe)"),n("/Ordering ("+a.encoding+")"),n(">>"),n(">>"),n("endobj"),a.objectNumber=r(),n("<<"),n("/Type /Font"),n("/Subtype /Type0"),n("/ToUnicode "+h+" 0 R"),n("/BaseFont /"+ke(a.fontName)),n("/Encoding /"+a.encoding),n("/DescendantFonts ["+p+" 0 R]"),n(">>"),n("endobj"),a.isAlreadyPutted=!0}}(t)}]),t.events.push(["putFont",function(t){!function(t){var a=t.font,n=t.out,r=t.newObject,i=t.putStream;if(a.metadata instanceof e.API.TTFFont&&"WinAnsiEncoding"===a.encoding){for(var o=a.metadata.rawData,l="",c=0;c<o.length;c++)l+=String.fromCharCode(o[c]);var d=r();i({data:l,addLength1:!0,objectId:d}),n("endobj");var u=r();i({data:s(a.metadata.toUnicode),addLength1:!0,objectId:u}),n("endobj");var h=r();n("<<"),n("/Descent "+a.metadata.decender),n("/CapHeight "+a.metadata.capHeight),n("/StemV "+a.metadata.stemV),n("/Type /FontDescriptor"),n("/FontFile2 "+d+" 0 R"),n("/Flags 96"),n("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),n("/FontName /"+ke(a.fontName)),n("/ItalicAngle "+a.metadata.italicAngle),n("/Ascent "+a.metadata.ascender),n(">>"),n("endobj"),a.objectNumber=r();for(var m=0;m<a.metadata.hmtx.widths.length;m++)a.metadata.hmtx.widths[m]=parseInt(a.metadata.hmtx.widths[m]*(1e3/a.metadata.head.unitsPerEm));n("<</Subtype/TrueType/Type/Font/ToUnicode "+u+" 0 R/BaseFont/"+ke(a.fontName)+"/FontDescriptor "+h+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),n("endobj"),a.isAlreadyPutted=!0}}(t)}]);var n=function(e){var t,s=e.text||"",n=e.x,r=e.y,i=e.options||{},o=e.mutex||{},l=o.pdfEscape,c=o.activeFontKey,d=o.fonts,u=c,h="",m=0,p="",f=d[u].encoding;if("Identity-H"!==d[u].encoding)return{text:s,x:n,y:r,options:i,mutex:o};for(p=s,u=c,Array.isArray(s)&&(p=s[0]),m=0;m<p.length;m+=1)d[u].metadata.hasOwnProperty("cmap")&&(t=d[u].metadata.cmap.unicode.codeMap[p[m].charCodeAt(0)]),t||p[m].charCodeAt(0)<256&&d[u].metadata.hasOwnProperty("Unicode")?h+=p[m]:h+="";var g="";return parseInt(u.slice(1))<14||"WinAnsiEncoding"===f?g=l(h,u).split("").map((function(e){return e.charCodeAt(0).toString(16)})).join(""):"Identity-H"===f&&(g=a(h,d[u])),o.isHex=!0,{text:g,x:n,y:r,options:i,mutex:o}};t.events.push(["postProcessText",function(e){var t=e.text||"",a=[],s={text:t,x:e.x,y:e.y,options:e.options,mutex:e.mutex};if(Array.isArray(t)){var r=0;for(r=0;r<t.length;r+=1)Array.isArray(t[r])&&3===t[r].length?a.push([n(Object.assign({},s,{text:t[r][0]})).text,t[r][1],t[r][2]]):a.push(n(Object.assign({},s,{text:t[r]})).text);e.text=a}else e.text=n(Object.assign({},s,{text:t})).text}])}(Oe),function(e){var t=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]},e.addFileToVFS=function(e,a){return t.call(this),this.internal.vFS[e]=a,this},e.getFileFromVFS=function(e){return t.call(this),void 0!==this.internal.vFS[e]?this.internal.vFS[e]:null}}(Oe.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(e){var a,s,n,r,i,o,l,c=t,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},m={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","\xab","\xbb","\xab","\u2039","\u203a","\u2039","\u2045","\u2046","\u2045","\u207d","\u207e","\u207d","\u208d","\u208e","\u208d","\u2264","\u2265","\u2264","\u2329","\u232a","\u2329","\ufe59","\ufe5a","\ufe59","\ufe5b","\ufe5c","\ufe5b","\ufe5d","\ufe5e","\ufe5d","\ufe64","\ufe65","\ufe64"],f=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,x=0;this.__bidiEngine__={};var b=function(e){var t=e.charCodeAt(),a=t>>8,s=m[a];return void 0!==s?c[256*s+(255&t)]:252===a||253===a?"AL":f.test(a)?"L":8===a?"R":"N"},v=function(e){for(var t,a=0;a<e.length;a++){if("L"===(t=b(e.charAt(a))))return!1;if("R"===t)return!0}return!1},y=function(e,t,i,o){var l,c,d,u,h=t[o];switch(h){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(h="AN");break;case"AL":g=!0,h="R";break;case"WS":case"BN":h="N";break;case"CS":o<1||o+1>=t.length||"EN"!==(l=i[o-1])&&"AN"!==l||"EN"!==(c=t[o+1])&&"AN"!==c?h="N":g&&(c="AN"),h=c===l?c:"N";break;case"ES":h="EN"===(l=o>0?i[o-1]:"B")&&o+1<t.length&&"EN"===t[o+1]?"EN":"N";break;case"ET":if(o>0&&"EN"===i[o-1]){h="EN";break}if(g){h="N";break}for(d=o+1,u=t.length;d<u&&"ET"===t[d];)d++;h=d<u&&"EN"===t[d]?"EN":"N";break;case"NSM":if(n&&!r){for(u=t.length,d=o+1;d<u&&"NSM"===t[d];)d++;if(d<u){var m=e[o],p=m>=1425&&m<=2303||64286===m;if(l=t[d],p&&("R"===l||"AL"===l)){h="R";break}}}h=o<1||"B"===(l=t[o-1])?"N":i[o-1];break;case"B":g=!1,a=!0,h=x;break;case"S":s=!0,h="N"}return h},j=function(e,t,a){var s=e.split("");return a&&N(s,a,{hiLevel:x}),s.reverse(),t&&t.reverse(),s.join("")},N=function(e,t,n){var r,i,o,l,c,m=-1,p=e.length,f=0,v=[],j=x?u:d,N=[];for(g=!1,a=!1,s=!1,i=0;i<p;i++)N[i]=b(e[i]);for(o=0;o<p;o++){if(c=f,v[o]=y(e,N,v,o),r=240&(f=j[c][h[v[o]]]),f&=15,t[o]=l=j[f][5],r>0)if(16===r){for(i=m;i<o;i++)t[i]=1;m=-1}else m=-1;if(j[f][6])-1===m&&(m=o);else if(m>-1){for(i=m;i<o;i++)t[i]=l;m=-1}"B"===N[o]&&(t[o]=0),n.hiLevel|=l}s&&function(e,t,a){for(var s=0;s<a;s++)if("S"===e[s]){t[s]=x;for(var n=s-1;n>=0&&"WS"===e[n];n--)t[n]=x}}(N,t,p)},w=function(e,t,s,n,r){if(!(r.hiLevel<e)){if(1===e&&1===x&&!a)return t.reverse(),void(s&&s.reverse());for(var i,o,l,c,d=t.length,u=0;u<d;){if(n[u]>=e){for(l=u+1;l<d&&n[l]>=e;)l++;for(c=u,o=l-1;c<o;c++,o--)i=t[c],t[c]=t[o],t[o]=i,s&&(i=s[c],s[c]=s[o],s[o]=i);u=l}u++}}},_=function(e,t,a){var s=e.split(""),n={hiLevel:x};return a||(a=[]),N(s,a,n),function(e,t,a){if(0!==a.hiLevel&&l)for(var s,n=0;n<e.length;n++)1===t[n]&&(s=p.indexOf(e[n]))>=0&&(e[n]=p[s+1])}(s,a,n),w(2,s,t,a,n),w(1,s,t,a,n),s.join("")};return this.__bidiEngine__.doBidiReorder=function(e,t,a){if(function(e,t){if(t)for(var a=0;a<e.length;a++)t[a]=a;void 0===r&&(r=v(e)),void 0===o&&(o=v(e))}(e,t),n||!i||o)if(n&&i&&r^o)x=r?1:0,e=j(e,t,a);else if(!n&&i&&o)x=r?1:0,e=_(e,t,a),e=j(e,t);else if(!n||r||i||o){if(n&&!i&&r^o)e=j(e,t),r?(x=0,e=_(e,t,a)):(x=1,e=_(e,t,a),e=j(e,t));else if(n&&r&&!i&&o)x=1,e=_(e,t,a),e=j(e,t);else if(!n&&!i&&r^o){var s=l;r?(x=1,e=_(e,t,a),x=0,l=!1,e=_(e,t,a),l=s):(x=0,e=_(e,t,a),e=j(e,t),x=1,l=!1,e=_(e,t,a),l=s,e=j(e,t))}}else x=0,e=_(e,t,a);else x=r?1:0,e=_(e,t,a);return e},this.__bidiEngine__.setOptions=function(e){e&&(n=e.isInputVisual,i=e.isOutputVisual,r=e.isInputRtl,o=e.isOutputRtl,l=e.isSymmetricSwapping)},this.__bidiEngine__.setOptions(e),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],a=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(e){var t=e.text,s=(e.x,e.y,e.options||{}),n=(e.mutex,s.lang,[]);if(s.isInputVisual="boolean"!=typeof s.isInputVisual||s.isInputVisual,a.setOptions(s),"[object Array]"===Object.prototype.toString.call(t)){var r=0;for(n=[],r=0;r<t.length;r+=1)"[object Array]"===Object.prototype.toString.call(t[r])?n.push([a.doBidiReorder(t[r][0]),t[r][1],t[r][2]]):n.push([a.doBidiReorder(t[r])]);e.text=n}else e.text=a.doBidiReorder(t);a.setOptions({isInputVisual:!0})}])}(Oe),Oe.API.TTFFont=function(){function e(e){var t;if(this.rawData=e,t=this.contents=new Zt(e),this.contents.pos=4,"ttcf"===t.readString(4))throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new ba(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new ea(this.contents),this.head=new sa(this),this.name=new da(this),this.cmap=new ra(this),this.toUnicode={},this.hhea=new ia(this),this.maxp=new ua(this),this.hmtx=new ha(this),this.post=new la(this),this.os2=new oa(this),this.loca=new xa(this),this.glyf=new pa(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var e,t,a,s,n;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var t,a,s,n;for(n=[],t=0,a=(s=this.bbox).length;t<a;t++)e=s[t],n.push(Math.round(e*this.scaleFactor));return n}.call(this),this.stemV=0,this.post.exists?(a=255&(s=this.post.italic_angle),0!=(32768&(t=s>>16))&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(n=this.familyClass)||2===n||3===n||4===n||5===n||7===n,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(e){var t;return(null!=(t=this.cmap.unicode)?t.codeMap[e]:void 0)||0},e.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},e.prototype.widthOfString=function(e,t,a){var s,n,r,i;for(r=0,n=0,i=(e=""+e).length;0<=i?n<i:n>i;n=0<=i?++n:--n)s=e.charCodeAt(n),r+=this.widthOfGlyph(this.characterToGlyph(s))+a*(1e3/t)||0;return r*(t/1e3)},e.prototype.lineHeight=function(e,t){var a;return null==t&&(t=!1),a=t?this.lineGap:0,(this.ascender+a-this.decender)/1e3*e},e}();var Qt,Zt=function(){function e(e){this.data=null!=e?e:[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(e){return this.data[this.pos++]=e},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},e.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},e.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},e.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},e.prototype.readString=function(e){var t,a;for(a=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)a[t]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(e){var t,a,s;for(s=[],t=0,a=e.length;0<=a?t<a:t>a;t=0<=a?++t:--t)s.push(this.writeByte(e.charCodeAt(t)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(e){return this.writeInt16(e)},e.prototype.readLongLong=function(){var e,t,a,s,n,r,i,o;return e=this.readByte(),t=this.readByte(),a=this.readByte(),s=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^a)+4294967296*(255^s)+16777216*(255^n)+65536*(255^r)+256*(255^i)+(255^o)+1):72057594037927940*e+281474976710656*t+1099511627776*a+4294967296*s+16777216*n+65536*r+256*i+o},e.prototype.writeLongLong=function(e){var t,a;return t=Math.floor(e/4294967296),a=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(e){return this.writeInt32(e)},e.prototype.read=function(e){var t,a;for(t=[],a=0;0<=e?a<e:a>e;a=0<=e?++a:--a)t.push(this.readByte());return t},e.prototype.write=function(e){var t,a,s,n;for(n=[],a=0,s=e.length;a<s;a++)t=e[a],n.push(this.writeByte(t));return n},e}(),ea=function(){var e;function t(e){var t,a,s;for(this.scalarType=e.readInt(),this.tableCount=e.readShort(),this.searchRange=e.readShort(),this.entrySelector=e.readShort(),this.rangeShift=e.readShort(),this.tables={},a=0,s=this.tableCount;0<=s?a<s:a>s;a=0<=s?++a:--a)t={tag:e.readString(4),checksum:e.readInt(),offset:e.readInt(),length:e.readInt()},this.tables[t.tag]=t}return t.prototype.encode=function(t){var a,s,n,r,i,o,l,c,d,u,h,m,p;for(p in h=Object.keys(t).length,o=Math.log(2),d=16*Math.floor(Math.log(h)/o),r=Math.floor(d/o),c=16*h-d,(s=new Zt).writeInt(this.scalarType),s.writeShort(h),s.writeShort(d),s.writeShort(r),s.writeShort(c),n=16*h,l=s.pos+n,i=null,m=[],t)for(u=t[p],s.writeString(p),s.writeInt(e(u)),s.writeInt(l),s.writeInt(u.length),m=m.concat(u),"head"===p&&(i=l),l+=u.length;l%4;)m.push(0),l++;return s.write(m),a=2981146554-e(s.data),s.pos=i+8,s.writeUInt32(a),s.data},e=function(e){var t,a,s,n;for(e=ma.call(e);e.length%4;)e.push(0);for(s=new Zt(e),a=0,t=0,n=e.length;t<n;t=t+=4)a+=s.readUInt32();return 4294967295&a},t}(),ta={}.hasOwnProperty,aa=function(e,t){for(var a in t)ta.call(t,a)&&(e[a]=t[a]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};Qt=function(){function e(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var sa=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,Qt),e.prototype.tag="head",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},e.prototype.encode=function(e){var t;return(t=new Zt).writeInt(this.version),t.writeInt(this.revision),t.writeInt(this.checkSumAdjustment),t.writeInt(this.magicNumber),t.writeShort(this.flags),t.writeShort(this.unitsPerEm),t.writeLongLong(this.created),t.writeLongLong(this.modified),t.writeShort(this.xMin),t.writeShort(this.yMin),t.writeShort(this.xMax),t.writeShort(this.yMax),t.writeShort(this.macStyle),t.writeShort(this.lowestRecPPEM),t.writeShort(this.fontDirectionHint),t.writeShort(e),t.writeShort(this.glyphDataFormat),t.data},e}(),na=function(){function e(e,t){var a,s,n,r,i,o,l,c,d,u,h,m,p,f,g,x,b;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(o=0;o<256;++o)this.codeMap[o]=e.readByte();break;case 4:for(h=e.readUInt16(),u=h/2,e.pos+=6,n=function(){var t,a;for(a=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)a.push(e.readUInt16());return a}(),e.pos+=2,p=function(){var t,a;for(a=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)a.push(e.readUInt16());return a}(),l=function(){var t,a;for(a=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)a.push(e.readUInt16());return a}(),c=function(){var t,a;for(a=[],o=t=0;0<=u?t<u:t>u;o=0<=u?++t:--t)a.push(e.readUInt16());return a}(),s=(this.length-e.pos+this.offset)/2,i=function(){var t,a;for(a=[],o=t=0;0<=s?t<s:t>s;o=0<=s?++t:--t)a.push(e.readUInt16());return a}(),o=g=0,b=n.length;g<b;o=++g)for(f=n[o],a=x=m=p[o];m<=f?x<=f:x>=f;a=m<=f?++x:--x)0===c[o]?r=a+l[o]:0!==(r=i[c[o]/2+(a-m)-(u-o)]||0)&&(r+=l[o]),this.codeMap[a]=65535&r}e.pos=d}return e.encode=function(e,t){var a,s,n,r,i,o,l,c,d,u,h,m,p,f,g,x,b,v,y,j,N,w,_,S,C,k,A,P,E,L,D,O,T,M,R,I,F,z,B,q,U,H,W,V,G,Y;switch(P=new Zt,r=Object.keys(e).sort((function(e,t){return e-t})),t){case"macroman":for(p=0,f=function(){var e=[];for(m=0;m<256;++m)e.push(0);return e}(),x={0:0},n={},E=0,T=r.length;E<T;E++)null==x[W=e[s=r[E]]]&&(x[W]=++p),n[s]={old:e[s],new:x[e[s]]},f[s]=x[e[s]];return P.writeUInt16(1),P.writeUInt16(0),P.writeUInt32(12),P.writeUInt16(0),P.writeUInt16(262),P.writeUInt16(0),P.write(f),{charMap:n,subtable:P.data,maxGlyphID:p+1};case"unicode":for(k=[],d=[],b=0,x={},a={},g=l=null,L=0,M=r.length;L<M;L++)null==x[y=e[s=r[L]]]&&(x[y]=++b),a[s]={old:y,new:x[y]},i=x[y]-s,null!=g&&i===l||(g&&d.push(g),k.push(s),l=i),g=s;for(g&&d.push(g),d.push(65535),k.push(65535),S=2*(_=k.length),w=2*Math.pow(Math.log(_)/Math.LN2,2),u=Math.log(w/2)/Math.LN2,N=2*_-w,o=[],j=[],h=[],m=D=0,R=k.length;D<R;m=++D){if(C=k[m],c=d[m],65535===C){o.push(0),j.push(0);break}if(C-(A=a[C].new)>=32768)for(o.push(0),j.push(2*(h.length+_-m)),s=O=C;C<=c?O<=c:O>=c;s=C<=c?++O:--O)h.push(a[s].new);else o.push(A-C),j.push(0)}for(P.writeUInt16(3),P.writeUInt16(1),P.writeUInt32(12),P.writeUInt16(4),P.writeUInt16(16+8*_+2*h.length),P.writeUInt16(0),P.writeUInt16(S),P.writeUInt16(w),P.writeUInt16(u),P.writeUInt16(N),U=0,I=d.length;U<I;U++)s=d[U],P.writeUInt16(s);for(P.writeUInt16(0),H=0,F=k.length;H<F;H++)s=k[H],P.writeUInt16(s);for(V=0,z=o.length;V<z;V++)i=o[V],P.writeUInt16(i);for(G=0,B=j.length;G<B;G++)v=j[G],P.writeUInt16(v);for(Y=0,q=h.length;Y<q;Y++)p=h[Y],P.writeUInt16(p);return{charMap:a,subtable:P.data,maxGlyphID:b+1}}},e}(),ra=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,Qt),e.prototype.tag="cmap",e.prototype.parse=function(e){var t,a,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)t=new na(e,this.offset),this.tables.push(t),t.isUnicode&&null==this.unicode&&(this.unicode=t);return!0},e.encode=function(e,t){var a,s;return null==t&&(t="macroman"),a=na.encode(e,t),(s=new Zt).writeUInt16(0),s.writeUInt16(1),a.table=s.data.concat(a.subtable),a},e}(),ia=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,Qt),e.prototype.tag="hhea",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},e}(),oa=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,Qt),e.prototype.tag="OS/2",e.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var t,a;for(a=[],t=0;t<10;++t)a.push(e.readByte());return a}(),this.charRange=function(){var t,a;for(a=[],t=0;t<4;++t)a.push(e.readInt());return a}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var t,a;for(a=[],t=0;t<2;t=++t)a.push(e.readInt());return a}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},e}(),la=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,Qt),e.prototype.tag="post",e.prototype.parse=function(e){var t,a,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var n;for(a=e.readUInt16(),this.glyphNameIndex=[],n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)t=e.readByte(),s.push(this.names.push(e.readString(t)));return s;case 151552:return a=e.readUInt16(),this.offsets=e.read(a);case 262144:return this.map=function(){var t,a,s;for(s=[],n=t=0,a=this.file.maxp.numGlyphs;0<=a?t<a:t>a;n=0<=a?++t:--t)s.push(e.readUInt32());return s}.call(this)}},e}(),ca=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},da=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,Qt),e.prototype.tag="name",e.prototype.parse=function(e){var t,a,s,n,r,i,o,l,c,d,u;for(e.pos=this.offset,e.readShort(),t=e.readShort(),i=e.readShort(),a=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)a.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+i+e.readShort()});for(o={},n=c=0,d=a.length;c<d;n=++c)s=a[n],e.pos=s.offset,l=e.readString(s.length),r=new ca(l,s),null==o[u=s.nameID]&&(o[u]=[]),o[s.nameID].push(r);this.strings=o,this.copyright=o[0],this.fontFamily=o[1],this.fontSubfamily=o[2],this.uniqueSubfamily=o[3],this.fontName=o[4],this.version=o[5];try{this.postscriptName=o[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(e){this.postscriptName=o[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=o[7],this.manufacturer=o[8],this.designer=o[9],this.description=o[10],this.vendorUrl=o[11],this.designerUrl=o[12],this.license=o[13],this.licenseUrl=o[14],this.preferredFamily=o[15],this.preferredSubfamily=o[17],this.compatibleFull=o[18],this.sampleText=o[19]},e}(),ua=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,Qt),e.prototype.tag="maxp",e.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},e}(),ha=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,Qt),e.prototype.tag="hmtx",e.prototype.parse=function(e){var t,a,s,n,r,i,o;for(e.pos=this.offset,this.metrics=[],t=0,i=this.file.hhea.numberOfMetrics;0<=i?t<i:t>i;t=0<=i?++t:--t)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var a,n;for(n=[],t=a=0;0<=s?a<s:a>s;t=0<=s?++a:--a)n.push(e.readInt16());return n}(),this.widths=function(){var e,t,a,s;for(s=[],e=0,t=(a=this.metrics).length;e<t;e++)n=a[e],s.push(n.advance);return s}.call(this),a=this.widths[this.widths.length-1],o=[],t=r=0;0<=s?r<s:r>s;t=0<=s?++r:--r)o.push(this.widths.push(a));return o},e.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},e}(),ma=[].slice,pa=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,Qt),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(e){var t,a,s,n,r,i,o,l,c,d;return e in this.cache?this.cache[e]:(n=this.file.loca,t=this.file.contents,a=n.indexOf(e),0===(s=n.lengthOf(e))?this.cache[e]=null:(t.pos=this.offset+a,r=(i=new Zt(t.read(s))).readShort(),l=i.readShort(),d=i.readShort(),o=i.readShort(),c=i.readShort(),this.cache[e]=-1===r?new ga(i,l,d,o,c):new fa(i,r,l,d,o,c),this.cache[e]))},e.prototype.encode=function(e,t,a){var s,n,r,i,o;for(r=[],n=[],i=0,o=t.length;i<o;i++)s=e[t[i]],n.push(r.length),s&&(r=r.concat(s.encode(a)));return n.push(r.length),{table:r,offsets:n}},e}(),fa=function(){function e(e,t,a,s,n,r){this.raw=e,this.numberOfContours=t,this.xMin=a,this.yMin=s,this.xMax=n,this.yMax=r,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),ga=function(){function e(e,t,a,s,n){var r,i;for(this.raw=e,this.xMin=t,this.yMin=a,this.xMax=s,this.yMax=n,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],r=this.raw;i=r.readShort(),this.glyphOffsets.push(r.pos),this.glyphIDs.push(r.readUInt16()),32&i;)r.pos+=1&i?4:2,128&i?r.pos+=8:64&i?r.pos+=4:8&i&&(r.pos+=2)}return e.prototype.encode=function(){var e,t,a;for(t=new Zt(ma.call(this.raw.data)),e=0,a=this.glyphIDs.length;e<a;++e)t.pos=this.glyphOffsets[e];return t.data},e}(),xa=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return aa(e,Qt),e.prototype.tag="loca",e.prototype.parse=function(e){var t,a;return e.pos=this.offset,t=this.file.head.indexToLocFormat,this.offsets=0===t?function(){var t,s;for(s=[],a=0,t=this.length;a<t;a+=2)s.push(2*e.readUInt16());return s}.call(this):function(){var t,s;for(s=[],a=0,t=this.length;a<t;a+=4)s.push(e.readUInt32());return s}.call(this)},e.prototype.indexOf=function(e){return this.offsets[e]},e.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},e.prototype.encode=function(e,t){for(var a=new Uint32Array(this.offsets.length),s=0,n=0,r=0;r<a.length;++r)if(a[r]=s,n<t.length&&t[n]==r){++n,a[r]=s;var i=this.offsets[r],o=this.offsets[r+1]-i;o>0&&(s+=o)}for(var l=new Array(4*a.length),c=0;c<a.length;++c)l[4*c+3]=255&a[c],l[4*c+2]=(65280&a[c])>>8,l[4*c+1]=(16711680&a[c])>>16,l[4*c]=(4278190080&a[c])>>24;return l},e}(),ba=function(){function e(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var e,t,a,s,n;for(t in s=this.font.cmap.tables[0].codeMap,e={},n=this.subset)a=n[t],e[t]=s[a];return e},e.prototype.glyphsFor=function(e){var t,a,s,n,r,i,o;for(s={},r=0,i=e.length;r<i;r++)s[n=e[r]]=this.font.glyf.glyphFor(n);for(n in t=[],s)(null!=(a=s[n])?a.compound:void 0)&&t.push.apply(t,a.glyphIDs);if(t.length>0)for(n in o=this.glyphsFor(t))a=o[n],s[n]=a;return s},e.prototype.encode=function(e,t){var a,s,n,r,i,o,l,c,d,u,h,m,p,f,g;for(s in a=ra.encode(this.generateCmap(),"unicode"),r=this.glyphsFor(e),h={0:0},g=a.charMap)h[(o=g[s]).old]=o.new;for(m in u=a.maxGlyphID,r)m in h||(h[m]=u++);return c=function(e){var t,a;for(t in a={},e)a[e[t]]=t;return a}(h),d=Object.keys(c).sort((function(e,t){return e-t})),p=function(){var e,t,a;for(a=[],e=0,t=d.length;e<t;e++)i=d[e],a.push(c[i]);return a}(),n=this.font.glyf.encode(r,p,h),l=this.font.loca.encode(n.offsets,p),f={cmap:this.font.cmap.raw(),glyf:n.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(f["OS/2"]=this.font.os2.raw()),this.font.directory.encode(f)},e}();Oe.API.PDFObject=function(){var e;function t(){}return e=function(e,t){return(Array(t+1).join("0")+e).slice(-t)},t.convert=function(a){var s,n,r,i;if(Array.isArray(a))return"["+function(){var e,n,r;for(r=[],e=0,n=a.length;e<n;e++)s=a[e],r.push(t.convert(s));return r}().join(" ")+"]";if("string"==typeof a)return"/"+a;if(null!=a?a.isString:void 0)return"("+a+")";if(a instanceof Date)return"(D:"+e(a.getUTCFullYear(),4)+e(a.getUTCMonth(),2)+e(a.getUTCDate(),2)+e(a.getUTCHours(),2)+e(a.getUTCMinutes(),2)+e(a.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(a)){for(n in r=["<<"],a)i=a[n],r.push("/"+n+" "+t.convert(i));return r.push(">>"),r.join("\n")}return""+a},t}();const va=Oe},7950:(e,t,a)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=a(2730)},8853:(e,t,a)=>{"use strict";e.exports=a(7234)},9379:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(4980);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){(0,s.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},9722:(e,t,a)=>{"use strict";a.d(t,{A:()=>Pt});var s={};function n(e,t){return function(){return e.apply(t,arguments)}}a.r(s),a.d(s,{hasBrowserEnv:()=>de,hasStandardBrowserEnv:()=>he,hasStandardBrowserWebWorkerEnv:()=>me,navigator:()=>ue,origin:()=>pe});const{toString:r}=Object.prototype,{getPrototypeOf:i}=Object,{iterator:o,toStringTag:l}=Symbol,c=(d=Object.create(null),e=>{const t=r.call(e);return d[t]||(d[t]=t.slice(8,-1).toLowerCase())});var d;const u=e=>(e=e.toLowerCase(),t=>c(t)===e),h=e=>t=>typeof t===e,{isArray:m}=Array,p=h("undefined");function f(e){return null!==e&&!p(e)&&null!==e.constructor&&!p(e.constructor)&&b(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const g=u("ArrayBuffer");const x=h("string"),b=h("function"),v=h("number"),y=e=>null!==e&&"object"===typeof e,j=e=>{if("object"!==c(e))return!1;const t=i(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(l in e)&&!(o in e)},N=u("Date"),w=u("File"),_=u("Blob"),S=u("FileList"),C=u("URLSearchParams"),[k,A,P,E]=["ReadableStream","Request","Response","Headers"].map(u);function L(e,t){let a,s,{allOwnKeys:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),m(e))for(a=0,s=e.length;a<s;a++)t.call(null,e[a],a,e);else{if(f(e))return;const s=n?Object.getOwnPropertyNames(e):Object.keys(e),r=s.length;let i;for(a=0;a<r;a++)i=s[a],t.call(null,e[i],i,e)}}function D(e,t){if(f(e))return null;t=t.toLowerCase();const a=Object.keys(e);let s,n=a.length;for(;n-- >0;)if(s=a[n],t===s.toLowerCase())return s;return null}const O="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,T=e=>!p(e)&&e!==O;const M=(R="undefined"!==typeof Uint8Array&&i(Uint8Array),e=>R&&e instanceof R);var R;const I=u("HTMLFormElement"),F=(e=>{let{hasOwnProperty:t}=e;return(e,a)=>t.call(e,a)})(Object.prototype),z=u("RegExp"),B=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),s={};L(a,((a,n)=>{let r;!1!==(r=t(a,n,e))&&(s[n]=r||a)})),Object.defineProperties(e,s)};const q=u("AsyncFunction"),U=((e,t)=>{return e?setImmediate:t?(a="axios@".concat(Math.random()),s=[],O.addEventListener("message",(e=>{let{source:t,data:n}=e;t===O&&n===a&&s.length&&s.shift()()}),!1),e=>{s.push(e),O.postMessage(a,"*")}):e=>setTimeout(e);var a,s})("function"===typeof setImmediate,b(O.postMessage)),H="undefined"!==typeof queueMicrotask?queueMicrotask.bind(O):"undefined"!==typeof process&&process.nextTick||U,W={isArray:m,isArrayBuffer:g,isBuffer:f,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||b(e.append)&&("formdata"===(t=c(e))||"object"===t&&b(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&g(e.buffer),t},isString:x,isNumber:v,isBoolean:e=>!0===e||!1===e,isObject:y,isPlainObject:j,isEmptyObject:e=>{if(!y(e)||f(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:k,isRequest:A,isResponse:P,isHeaders:E,isUndefined:p,isDate:N,isFile:w,isBlob:_,isRegExp:z,isFunction:b,isStream:e=>y(e)&&b(e.pipe),isURLSearchParams:C,isTypedArray:M,isFileList:S,forEach:L,merge:function e(){const{caseless:t}=T(this)&&this||{},a={},s=(s,n)=>{const r=t&&D(a,n)||n;j(a[r])&&j(s)?a[r]=e(a[r],s):j(s)?a[r]=e({},s):m(s)?a[r]=s.slice():a[r]=s};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&L(arguments[n],s);return a},extend:function(e,t,a){let{allOwnKeys:s}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return L(t,((t,s)=>{a&&b(t)?e[s]=n(t,a):e[s]=t}),{allOwnKeys:s}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,a,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},toFlatObject:(e,t,a,s)=>{let n,r,o;const l={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),r=n.length;r-- >0;)o=n[r],s&&!s(o,e,t)||l[o]||(t[o]=e[o],l[o]=!0);e=!1!==a&&i(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:u,endsWith:(e,t,a)=>{e=String(e),(void 0===a||a>e.length)&&(a=e.length),a-=t.length;const s=e.indexOf(t,a);return-1!==s&&s===a},toArray:e=>{if(!e)return null;if(m(e))return e;let t=e.length;if(!v(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},forEachEntry:(e,t)=>{const a=(e&&e[o]).call(e);let s;for(;(s=a.next())&&!s.done;){const a=s.value;t.call(e,a[0],a[1])}},matchAll:(e,t)=>{let a;const s=[];for(;null!==(a=e.exec(t));)s.push(a);return s},isHTMLForm:I,hasOwnProperty:F,hasOwnProp:F,reduceDescriptors:B,freezeMethods:e=>{B(e,((t,a)=>{if(b(e)&&-1!==["arguments","caller","callee"].indexOf(a))return!1;const s=e[a];b(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")}))}))},toObjectSet:(e,t)=>{const a={},s=e=>{e.forEach((e=>{a[e]=!0}))};return m(e)?s(e):s(String(e).split(t)),a},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,a){return t.toUpperCase()+a})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:D,global:O,isContextDefined:T,isSpecCompliantForm:function(e){return!!(e&&b(e.append)&&"FormData"===e[l]&&e[o])},toJSONObject:e=>{const t=new Array(10),a=(e,s)=>{if(y(e)){if(t.indexOf(e)>=0)return;if(f(e))return e;if(!("toJSON"in e)){t[s]=e;const n=m(e)?[]:{};return L(e,((e,t)=>{const r=a(e,s+1);!p(r)&&(n[t]=r)})),t[s]=void 0,n}}return e};return a(e,0)},isAsyncFn:q,isThenable:e=>e&&(y(e)||b(e))&&b(e.then)&&b(e.catch),setImmediate:U,asap:H,isIterable:e=>null!=e&&b(e[o])};function V(e,t,a,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}W.inherits(V,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const G=V.prototype,Y={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Y[e]={value:e}})),Object.defineProperties(V,Y),Object.defineProperty(G,"isAxiosError",{value:!0}),V.from=(e,t,a,s,n,r)=>{const i=Object.create(G);return W.toFlatObject(e,i,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),V.call(i,e.message,t,a,s,n),i.cause=e,i.name=e.name,r&&Object.assign(i,r),i};const $=V;function X(e){return W.isPlainObject(e)||W.isArray(e)}function J(e){return W.endsWith(e,"[]")?e.slice(0,-2):e}function K(e,t,a){return e?e.concat(t).map((function(e,t){return e=J(e),!a&&t?"["+e+"]":e})).join(a?".":""):t}const Q=W.toFlatObject(W,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Z=function(e,t,a){if(!W.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const s=(a=W.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!W.isUndefined(t[e])}))).metaTokens,n=a.visitor||c,r=a.dots,i=a.indexes,o=(a.Blob||"undefined"!==typeof Blob&&Blob)&&W.isSpecCompliantForm(t);if(!W.isFunction(n))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(W.isDate(e))return e.toISOString();if(W.isBoolean(e))return e.toString();if(!o&&W.isBlob(e))throw new $("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(e)||W.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,a,n){let o=e;if(e&&!n&&"object"===typeof e)if(W.endsWith(a,"{}"))a=s?a:a.slice(0,-2),e=JSON.stringify(e);else if(W.isArray(e)&&function(e){return W.isArray(e)&&!e.some(X)}(e)||(W.isFileList(e)||W.endsWith(a,"[]"))&&(o=W.toArray(e)))return a=J(a),o.forEach((function(e,s){!W.isUndefined(e)&&null!==e&&t.append(!0===i?K([a],s,r):null===i?a:a+"[]",l(e))})),!1;return!!X(e)||(t.append(K(n,a,r),l(e)),!1)}const d=[],u=Object.assign(Q,{defaultVisitor:c,convertValue:l,isVisitable:X});if(!W.isObject(e))throw new TypeError("data must be an object");return function e(a,s){if(!W.isUndefined(a)){if(-1!==d.indexOf(a))throw Error("Circular reference detected in "+s.join("."));d.push(a),W.forEach(a,(function(a,r){!0===(!(W.isUndefined(a)||null===a)&&n.call(t,a,W.isString(r)?r.trim():r,s,u))&&e(a,s?s.concat(r):[r])})),d.pop()}}(e),t};function ee(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function te(e,t){this._pairs=[],e&&Z(e,this,t)}const ae=te.prototype;ae.append=function(e,t){this._pairs.push([e,t])},ae.toString=function(e){const t=e?function(t){return e.call(this,t,ee)}:ee;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const se=te;function ne(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function re(e,t,a){if(!t)return e;const s=a&&a.encode||ne;W.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let r;if(r=n?n(t,a):W.isURLSearchParams(t)?t.toString():new se(t,a).toString(s),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}const ie=class{constructor(){this.handlers=[]}use(e,t,a){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!a&&a.synchronous,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){W.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},oe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var le=a(9379);const ce={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:se,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},de="undefined"!==typeof window&&"undefined"!==typeof document,ue="object"===typeof navigator&&navigator||void 0,he=de&&(!ue||["ReactNative","NativeScript","NS"].indexOf(ue.product)<0),me="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,pe=de&&window.location.href||"http://localhost",fe=(0,le.A)((0,le.A)({},s),ce);const ge=function(e){function t(e,a,s,n){let r=e[n++];if("__proto__"===r)return!0;const i=Number.isFinite(+r),o=n>=e.length;if(r=!r&&W.isArray(s)?s.length:r,o)return W.hasOwnProp(s,r)?s[r]=[s[r],a]:s[r]=a,!i;s[r]&&W.isObject(s[r])||(s[r]=[]);return t(e,a,s[r],n)&&W.isArray(s[r])&&(s[r]=function(e){const t={},a=Object.keys(e);let s;const n=a.length;let r;for(s=0;s<n;s++)r=a[s],t[r]=e[r];return t}(s[r])),!i}if(W.isFormData(e)&&W.isFunction(e.entries)){const a={};return W.forEachEntry(e,((e,s)=>{t(function(e){return W.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),s,a,0)})),a}return null};const xe={transitional:oe,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const a=t.getContentType()||"",s=a.indexOf("application/json")>-1,n=W.isObject(e);n&&W.isHTMLForm(e)&&(e=new FormData(e));if(W.isFormData(e))return s?JSON.stringify(ge(e)):e;if(W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)||W.isReadableStream(e))return e;if(W.isArrayBufferView(e))return e.buffer;if(W.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(n){if(a.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Z(e,new fe.classes.URLSearchParams,(0,le.A)({visitor:function(e,t,a,s){return fe.isNode&&W.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=W.isFileList(e))||a.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Z(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||s?(t.setContentType("application/json",!1),function(e,t,a){if(W.isString(e))try{return(t||JSON.parse)(e),W.trim(e)}catch(s){if("SyntaxError"!==s.name)throw s}return(a||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||xe.transitional,a=t&&t.forcedJSONParsing,s="json"===this.responseType;if(W.isResponse(e)||W.isReadableStream(e))return e;if(e&&W.isString(e)&&(a&&!this.responseType||s)){const a=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(n){if(a){if("SyntaxError"===n.name)throw $.from(n,$.ERR_BAD_RESPONSE,this,null,this.response);throw n}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fe.classes.FormData,Blob:fe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],(e=>{xe.headers[e]={}}));const be=xe,ve=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),ye=Symbol("internals");function je(e){return e&&String(e).trim().toLowerCase()}function Ne(e){return!1===e||null==e?e:W.isArray(e)?e.map(Ne):String(e)}function we(e,t,a,s,n){return W.isFunction(s)?s.call(this,t,a):(n&&(t=a),W.isString(t)?W.isString(s)?-1!==t.indexOf(s):W.isRegExp(s)?s.test(t):void 0:void 0)}class _e{constructor(e){e&&this.set(e)}set(e,t,a){const s=this;function n(e,t,a){const n=je(t);if(!n)throw new Error("header name must be a non-empty string");const r=W.findKey(s,n);(!r||void 0===s[r]||!0===a||void 0===a&&!1!==s[r])&&(s[r||t]=Ne(e))}const r=(e,t)=>W.forEach(e,((e,a)=>n(e,a,t)));if(W.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(W.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let a,s,n;return e&&e.split("\n").forEach((function(e){n=e.indexOf(":"),a=e.substring(0,n).trim().toLowerCase(),s=e.substring(n+1).trim(),!a||t[a]&&ve[a]||("set-cookie"===a?t[a]?t[a].push(s):t[a]=[s]:t[a]=t[a]?t[a]+", "+s:s)})),t})(e),t);else if(W.isObject(e)&&W.isIterable(e)){let a,s,n={};for(const t of e){if(!W.isArray(t))throw TypeError("Object iterator must return a key-value pair");n[s=t[0]]=(a=n[s])?W.isArray(a)?[...a,t[1]]:[a,t[1]]:t[1]}r(n,t)}else null!=e&&n(t,e,a);return this}get(e,t){if(e=je(e)){const a=W.findKey(this,e);if(a){const e=this[a];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(e);)t[s[1]]=s[2];return t}(e);if(W.isFunction(t))return t.call(this,e,a);if(W.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=je(e)){const a=W.findKey(this,e);return!(!a||void 0===this[a]||t&&!we(0,this[a],a,t))}return!1}delete(e,t){const a=this;let s=!1;function n(e){if(e=je(e)){const n=W.findKey(a,e);!n||t&&!we(0,a[n],n,t)||(delete a[n],s=!0)}}return W.isArray(e)?e.forEach(n):n(e),s}clear(e){const t=Object.keys(this);let a=t.length,s=!1;for(;a--;){const n=t[a];e&&!we(0,this[n],n,e,!0)||(delete this[n],s=!0)}return s}normalize(e){const t=this,a={};return W.forEach(this,((s,n)=>{const r=W.findKey(a,n);if(r)return t[r]=Ne(s),void delete t[n];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,a)=>t.toUpperCase()+a))}(n):String(n).trim();i!==n&&delete t[n],t[i]=Ne(s),a[i]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return W.forEach(this,((a,s)=>{null!=a&&!1!==a&&(t[s]=e&&W.isArray(a)?a.join(", "):a)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,a]=e;return t+": "+a})).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var a=arguments.length,s=new Array(a>1?a-1:0),n=1;n<a;n++)s[n-1]=arguments[n];return s.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[ye]=this[ye]={accessors:{}}).accessors,a=this.prototype;function s(e){const s=je(e);t[s]||(!function(e,t){const a=W.toCamelCase(" "+t);["get","set","has"].forEach((s=>{Object.defineProperty(e,s+a,{value:function(e,a,n){return this[s].call(this,t,e,a,n)},configurable:!0})}))}(a,e),t[s]=!0)}return W.isArray(e)?e.forEach(s):s(e),this}}_e.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),W.reduceDescriptors(_e.prototype,((e,t)=>{let{value:a}=e,s=t[0].toUpperCase()+t.slice(1);return{get:()=>a,set(e){this[s]=e}}})),W.freezeMethods(_e);const Se=_e;function Ce(e,t){const a=this||be,s=t||a,n=Se.from(s.headers);let r=s.data;return W.forEach(e,(function(e){r=e.call(a,r,n.normalize(),t?t.status:void 0)})),n.normalize(),r}function ke(e){return!(!e||!e.__CANCEL__)}function Ae(e,t,a){$.call(this,null==e?"canceled":e,$.ERR_CANCELED,t,a),this.name="CanceledError"}W.inherits(Ae,$,{__CANCEL__:!0});const Pe=Ae;function Ee(e,t,a){const s=a.config.validateStatus;a.status&&s&&!s(a.status)?t(new $("Request failed with status code "+a.status,[$.ERR_BAD_REQUEST,$.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a)):e(a)}const Le=function(e,t){e=e||10;const a=new Array(e),s=new Array(e);let n,r=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=s[i];n||(n=l),a[r]=o,s[r]=l;let d=i,u=0;for(;d!==r;)u+=a[d++],d%=e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),l-n<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const De=function(e,t){let a,s,n=0,r=1e3/t;const i=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n=r,a=null,s&&(clearTimeout(s),s=null),e(...t)};return[function(){const e=Date.now(),t=e-n;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=r?i(l,e):(a=l,s||(s=setTimeout((()=>{s=null,i(a)}),r-t)))},()=>a&&i(a)]},Oe=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,s=0;const n=Le(50,250);return De((a=>{const r=a.loaded,i=a.lengthComputable?a.total:void 0,o=r-s,l=n(o);s=r;e({loaded:r,total:i,progress:i?r/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&r<=i?(i-r)/l:void 0,event:a,lengthComputable:null!=i,[t?"download":"upload"]:!0})}),a)},Te=(e,t)=>{const a=null!=e;return[s=>t[0]({lengthComputable:a,total:e,loaded:s}),t[1]]},Me=e=>function(){for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return W.asap((()=>e(...a)))},Re=fe.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,fe.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(fe.origin),fe.navigator&&/(msie|trident)/i.test(fe.navigator.userAgent)):()=>!0,Ie=fe.hasStandardBrowserEnv?{write(e,t,a,s,n,r){const i=[e+"="+encodeURIComponent(t)];W.isNumber(a)&&i.push("expires="+new Date(a).toGMTString()),W.isString(s)&&i.push("path="+s),W.isString(n)&&i.push("domain="+n),!0===r&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Fe(e,t,a){let s=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(s||0==a)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const ze=e=>e instanceof Se?(0,le.A)({},e):e;function Be(e,t){t=t||{};const a={};function s(e,t,a,s){return W.isPlainObject(e)&&W.isPlainObject(t)?W.merge.call({caseless:s},e,t):W.isPlainObject(t)?W.merge({},t):W.isArray(t)?t.slice():t}function n(e,t,a,n){return W.isUndefined(t)?W.isUndefined(e)?void 0:s(void 0,e,0,n):s(e,t,0,n)}function r(e,t){if(!W.isUndefined(t))return s(void 0,t)}function i(e,t){return W.isUndefined(t)?W.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function o(a,n,r){return r in t?s(a,n):r in e?s(void 0,a):void 0}const l={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,a)=>n(ze(e),ze(t),0,!0)};return W.forEach(Object.keys((0,le.A)((0,le.A)({},e),t)),(function(s){const r=l[s]||n,i=r(e[s],t[s],s);W.isUndefined(i)&&r!==o||(a[s]=i)})),a}const qe=e=>{const t=Be({},e);let a,{data:s,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=Se.from(o),t.url=re(Fe(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),W.isFormData(s))if(fe.hasStandardBrowserEnv||fe.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(a=o.getContentType())){const[e,...t]=a?a.split(";").map((e=>e.trim())).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(fe.hasStandardBrowserEnv&&(n&&W.isFunction(n)&&(n=n(t)),n||!1!==n&&Re(t.url))){const e=r&&i&&Ie.read(i);e&&o.set(r,e)}return t},Ue="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,a){const s=qe(e);let n=s.data;const r=Se.from(s.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=s;function p(){c&&c(),d&&d(),s.cancelToken&&s.cancelToken.unsubscribe(i),s.signal&&s.signal.removeEventListener("abort",i)}let f=new XMLHttpRequest;function g(){if(!f)return;const s=Se.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Ee((function(e){t(e),p()}),(function(e){a(e),p()}),{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:s,config:e,request:f}),f=null}f.open(s.method.toUpperCase(),s.url,!0),f.timeout=s.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(a(new $("Request aborted",$.ECONNABORTED,e,f)),f=null)},f.onerror=function(){a(new $("Network Error",$.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const n=s.transitional||oe;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),a(new $(t,n.clarifyTimeoutError?$.ETIMEDOUT:$.ECONNABORTED,e,f)),f=null},void 0===n&&r.setContentType(null),"setRequestHeader"in f&&W.forEach(r.toJSON(),(function(e,t){f.setRequestHeader(t,e)})),W.isUndefined(s.withCredentials)||(f.withCredentials=!!s.withCredentials),u&&"json"!==u&&(f.responseType=s.responseType),m&&([l,d]=Oe(m,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=Oe(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(s.cancelToken||s.signal)&&(i=t=>{f&&(a(!t||t.type?new Pe(null,e,f):t),f.abort(),f=null)},s.cancelToken&&s.cancelToken.subscribe(i),s.signal&&(s.signal.aborted?i():s.signal.addEventListener("abort",i)));const x=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(s.url);x&&-1===fe.protocols.indexOf(x)?a(new $("Unsupported protocol "+x+":",$.ERR_BAD_REQUEST,e)):f.send(n||null)}))},He=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let a,s=new AbortController;const n=function(e){if(!a){a=!0,i();const t=e instanceof Error?e:this.reason;s.abort(t instanceof $?t:new Pe(t instanceof Error?t.message:t))}};let r=t&&setTimeout((()=>{r=null,n(new $("timeout ".concat(t," of ms exceeded"),$.ETIMEDOUT))}),t);const i=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)})),e=null)};e.forEach((e=>e.addEventListener("abort",n)));const{signal:o}=s;return o.unsubscribe=()=>W.asap(i),o}};function We(e,t){this.v=e,this.k=t}function Ve(e){return function(){return new Ge(e.apply(this,arguments))}}function Ge(e){var t,a;function s(t,a){try{var r=e[t](a),i=r.value,o=i instanceof We;Promise.resolve(o?i.v:i).then((function(a){if(o){var l="return"===t?"return":"next";if(!i.k||a.done)return s(l,a);a=e[l](a).value}n(r.done?"return":"normal",a)}),(function(e){s("throw",e)}))}catch(e){n("throw",e)}}function n(e,n){switch(e){case"return":t.resolve({value:n,done:!0});break;case"throw":t.reject(n);break;default:t.resolve({value:n,done:!1})}(t=t.next)?s(t.key,t.arg):a=null}this._invoke=function(e,n){return new Promise((function(r,i){var o={key:e,arg:n,resolve:r,reject:i,next:null};a?a=a.next=o:(t=a=o,s(e,n))}))},"function"!=typeof e.return&&(this.return=void 0)}function Ye(e){return new We(e,0)}function $e(e){var t={},a=!1;function s(t,s){return a=!0,s=new Promise((function(a){a(e[t](s))})),{done:!1,value:new We(s,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return a?(a=!1,e):s("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(a)throw a=!1,e;return s("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return a?(a=!1,e):s("return",e)}),t}function Xe(e){var t,a,s,n=2;for("undefined"!=typeof Symbol&&(a=Symbol.asyncIterator,s=Symbol.iterator);n--;){if(a&&null!=(t=e[a]))return t.call(e);if(s&&null!=(t=e[s]))return new Je(t.call(e));a="@@asyncIterator",s="@@iterator"}throw new TypeError("Object is not async iterable")}function Je(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Je=function(e){this.s=e,this.n=e.next},Je.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var a=this.s.return;return void 0===a?Promise.resolve({value:e,done:!0}):t(a.apply(this.s,arguments))},throw:function(e){var a=this.s.return;return void 0===a?Promise.reject(e):t(a.apply(this.s,arguments))}},new Je(e)}Ge.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ge.prototype.next=function(e){return this._invoke("next",e)},Ge.prototype.throw=function(e){return this._invoke("throw",e)},Ge.prototype.return=function(e){return this._invoke("return",e)};const Ke=function*(e,t){let a=e.byteLength;if(!t||a<t)return void(yield e);let s,n=0;for(;n<a;)s=n+t,yield e.slice(n,s),n=s},Qe=function(){var e=Ve((function*(e,t){var a,s=!1,n=!1;try{for(var r,i=Xe(Ze(e));s=!(r=yield Ye(i.next())).done;s=!1){const e=r.value;yield*$e(Xe(Ke(e,t)))}}catch(o){n=!0,a=o}finally{try{s&&null!=i.return&&(yield Ye(i.return()))}finally{if(n)throw a}}}));return function(t,a){return e.apply(this,arguments)}}(),Ze=function(){var e=Ve((function*(e){if(e[Symbol.asyncIterator])return void(yield*$e(Xe(e)));const t=e.getReader();try{for(;;){const{done:e,value:a}=yield Ye(t.read());if(e)break;yield a}}finally{yield Ye(t.cancel())}}));return function(t){return e.apply(this,arguments)}}(),et=(e,t,a,s)=>{const n=Qe(e,t);let r,i=0,o=e=>{r||(r=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await n.next();if(t)return o(),void e.close();let r=s.byteLength;if(a){let e=i+=r;a(e)}e.enqueue(new Uint8Array(s))}catch(t){throw o(t),t}},cancel:e=>(o(e),n.return())},{highWaterMark:2})},tt="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,at=tt&&"function"===typeof ReadableStream,st=tt&&("function"===typeof TextEncoder?(nt=new TextEncoder,e=>nt.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var nt;const rt=function(e){try{for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return!!e(...a)}catch(n){return!1}},it=at&&rt((()=>{let e=!1;const t=new Request(fe.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),ot=at&&rt((()=>W.isReadableStream(new Response("").body))),lt={stream:ot&&(e=>e.body)};var ct;tt&&(ct=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!lt[e]&&(lt[e]=W.isFunction(ct[e])?t=>t[e]():(t,a)=>{throw new $("Response type '".concat(e,"' is not supported"),$.ERR_NOT_SUPPORT,a)})})));const dt=async(e,t)=>{const a=W.toFiniteNumber(e.getContentLength());return null==a?(async e=>{if(null==e)return 0;if(W.isBlob(e))return e.size;if(W.isSpecCompliantForm(e)){const t=new Request(fe.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return W.isArrayBufferView(e)||W.isArrayBuffer(e)?e.byteLength:(W.isURLSearchParams(e)&&(e+=""),W.isString(e)?(await st(e)).byteLength:void 0)})(t):a},ut={http:null,xhr:Ue,fetch:tt&&(async e=>{let{url:t,method:a,data:s,signal:n,cancelToken:r,timeout:i,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=qe(e);c=c?(c+"").toLowerCase():"text";let m,p=He([n,r&&r.toAbortSignal()],i);const f=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&it&&"get"!==a&&"head"!==a&&0!==(g=await dt(d,s))){let e,a=new Request(t,{method:"POST",body:s,duplex:"half"});if(W.isFormData(s)&&(e=a.headers.get("content-type"))&&d.setContentType(e),a.body){const[e,t]=Te(g,Oe(Me(l)));s=et(a.body,65536,e,t)}}W.isString(u)||(u=u?"include":"omit");const n="credentials"in Request.prototype;m=new Request(t,(0,le.A)((0,le.A)({},h),{},{signal:p,method:a.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",credentials:n?u:void 0}));let r=await fetch(m,h);const i=ot&&("stream"===c||"response"===c);if(ot&&(o||i&&f)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=r[t]}));const t=W.toFiniteNumber(r.headers.get("content-length")),[a,s]=o&&Te(t,Oe(Me(o),!0))||[];r=new Response(et(r.body,65536,a,(()=>{s&&s(),f&&f()})),e)}c=c||"text";let x=await lt[W.findKey(lt,c)||"text"](r,e);return!i&&f&&f(),await new Promise(((t,a)=>{Ee(t,a,{data:x,headers:Se.from(r.headers),status:r.status,statusText:r.statusText,config:e,request:m})}))}catch(x){if(f&&f(),x&&"TypeError"===x.name&&/Load failed|fetch/i.test(x.message))throw Object.assign(new $("Network Error",$.ERR_NETWORK,e,m),{cause:x.cause||x});throw $.from(x,x&&x.code,e,m)}})};W.forEach(ut,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(a){}Object.defineProperty(e,"adapterName",{value:t})}}));const ht=e=>"- ".concat(e),mt=e=>W.isFunction(e)||null===e||!1===e,pt=e=>{e=W.isArray(e)?e:[e];const{length:t}=e;let a,s;const n={};for(let r=0;r<t;r++){let t;if(a=e[r],s=a,!mt(a)&&(s=ut[(t=String(a)).toLowerCase()],void 0===s))throw new $("Unknown adapter '".concat(t,"'"));if(s)break;n[t||"#"+r]=s}if(!s){const e=Object.entries(n).map((e=>{let[t,a]=e;return"adapter ".concat(t," ")+(!1===a?"is not supported by the environment":"is not available in the build")}));let a=t?e.length>1?"since :\n"+e.map(ht).join("\n"):" "+ht(e[0]):"as no adapter specified";throw new $("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s};function ft(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pe(null,e)}function gt(e){ft(e),e.headers=Se.from(e.headers),e.data=Ce.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return pt(e.adapter||be.adapter)(e).then((function(t){return ft(e),t.data=Ce.call(e,e.transformResponse,t),t.headers=Se.from(t.headers),t}),(function(t){return ke(t)||(ft(e),t&&t.response&&(t.response.data=Ce.call(e,e.transformResponse,t.response),t.response.headers=Se.from(t.response.headers))),Promise.reject(t)}))}const xt="1.11.0",bt={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{bt[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}}));const vt={};bt.transitional=function(e,t,a){function s(e,t){return"[Axios v"+xt+"] Transitional option '"+e+"'"+t+(a?". "+a:"")}return(a,n,r)=>{if(!1===e)throw new $(s(n," has been removed"+(t?" in "+t:"")),$.ERR_DEPRECATED);return t&&!vt[n]&&(vt[n]=!0,console.warn(s(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(a,n,r)}},bt.spelling=function(e){return(t,a)=>(console.warn("".concat(a," is likely a misspelling of ").concat(e)),!0)};const yt={assertOptions:function(e,t,a){if("object"!==typeof e)throw new $("options must be an object",$.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let n=s.length;for(;n-- >0;){const r=s[n],i=t[r];if(i){const t=e[r],a=void 0===t||i(t,r,e);if(!0!==a)throw new $("option "+r+" must be "+a,$.ERR_BAD_OPTION_VALUE)}else if(!0!==a)throw new $("Unknown option "+r,$.ERR_BAD_OPTION)}},validators:bt},jt=yt.validators;class Nt{constructor(e){this.defaults=e||{},this.interceptors={request:new ie,response:new ie}}async request(e,t){try{return await this._request(e,t)}catch(a){if(a instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{a.stack?t&&!String(a.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(a.stack+="\n"+t):a.stack=t}catch(s){}}throw a}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Be(this.defaults,t);const{transitional:a,paramsSerializer:s,headers:n}=t;void 0!==a&&yt.assertOptions(a,{silentJSONParsing:jt.transitional(jt.boolean),forcedJSONParsing:jt.transitional(jt.boolean),clarifyTimeoutError:jt.transitional(jt.boolean)},!1),null!=s&&(W.isFunction(s)?t.paramsSerializer={serialize:s}:yt.assertOptions(s,{encode:jt.function,serialize:jt.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),yt.assertOptions(t,{baseUrl:jt.spelling("baseURL"),withXsrfToken:jt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=n&&W.merge(n.common,n[t.method]);n&&W.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete n[e]})),t.headers=Se.concat(r,n);const i=[];let o=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let d,u=0;if(!o){const e=[gt.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(u=0;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=gt.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return re(Fe((e=Be(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}W.forEach(["delete","get","head","options"],(function(e){Nt.prototype[e]=function(t,a){return this.request(Be(a||{},{method:e,url:t,data:(a||{}).data}))}})),W.forEach(["post","put","patch"],(function(e){function t(t){return function(a,s,n){return this.request(Be(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Nt.prototype[e]=t(),Nt.prototype[e+"Form"]=t(!0)}));const wt=Nt;class _t{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const a=this;this.promise.then((e=>{if(!a._listeners)return;let t=a._listeners.length;for(;t-- >0;)a._listeners[t](e);a._listeners=null})),this.promise.then=e=>{let t;const s=new Promise((e=>{a.subscribe(e),t=e})).then(e);return s.cancel=function(){a.unsubscribe(t)},s},e((function(e,s,n){a.reason||(a.reason=new Pe(e,s,n),t(a.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new _t((function(t){e=t})),cancel:e}}}const St=_t;const Ct={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ct).forEach((e=>{let[t,a]=e;Ct[a]=t}));const kt=Ct;const At=function e(t){const a=new wt(t),s=n(wt.prototype.request,a);return W.extend(s,wt.prototype,a,{allOwnKeys:!0}),W.extend(s,a,null,{allOwnKeys:!0}),s.create=function(a){return e(Be(t,a))},s}(be);At.Axios=wt,At.CanceledError=Pe,At.CancelToken=St,At.isCancel=ke,At.VERSION=xt,At.toFormData=Z,At.AxiosError=$,At.Cancel=At.CanceledError,At.all=function(e){return Promise.all(e)},At.spread=function(e){return function(t){return e.apply(null,t)}},At.isAxiosError=function(e){return W.isObject(e)&&!0===e.isAxiosError},At.mergeConfig=Be,At.AxiosHeaders=Se,At.formToJSON=e=>ge(W.isHTMLForm(e)?new FormData(e):e),At.getAdapter=pt,At.HttpStatusCode=kt,At.default=At;const Pt=At}},t={};function a(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,a),r.exports}a.m=e,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;a.t=function(s,n){if(1&n&&(s=this(s)),8&n)return s;if("object"===typeof s&&s){if(4&n&&s.__esModule)return s;if(16&n&&"function"===typeof s.then)return s}var r=Object.create(null);a.r(r);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&n&&s;"object"==typeof o&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach((e=>i[e]=()=>s[e]));return i.default=()=>s,a.d(r,i),r}})(),a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,s)=>(a.f[s](e,t),t)),[])),a.u=e=>"static/js/"+e+"."+{55:"07ecb4e2",213:"042bb37f",239:"dfdb0d71",455:"d8fc79e9"}[e]+".chunk.js",a.miniCssF=e=>{},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="frontend:";a.l=(s,n,r,i)=>{if(e[s])e[s].push(n);else{var o,l;if(void 0!==r)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+r){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,a.nc&&o.setAttribute("nonce",a.nc),o.setAttribute("data-webpack",t+r),o.src=s),e[s]=[n];var h=(t,a)=>{o.onerror=o.onload=null,clearTimeout(m);var n=e[s];if(delete e[s],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((e=>e(a))),t)return t(a)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),a.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/",(()=>{var e={792:0};a.f.j=(t,s)=>{var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)s.push(n[2]);else{var r=new Promise(((a,s)=>n=e[t]=[a,s]));s.push(n[2]=r);var i=a.p+a.u(t),o=new Error;a.l(i,(s=>{if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var r=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",o.name="ChunkLoadError",o.type=r,o.request=i,n[1](o)}}),"chunk-"+t,t)}};var t=(t,s)=>{var n,r,i=s[0],o=s[1],l=s[2],c=0;if(i.some((t=>0!==e[t]))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)l(a)}for(t&&t(s);c<i.length;c++)r=i[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0},s=self.webpackChunkfrontend=self.webpackChunkfrontend||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),(()=>{"use strict";var e={};a.r(e),a.d(e,{Decoder:()=>yc,Encoder:()=>bc,PacketType:()=>xc,protocol:()=>gc});var t,s=a(5043),n=a.t(s,2),r=a(4391);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},i.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));const o="popstate";function l(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function c(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(a){}}}function d(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,a,s){return void 0===a&&(a=null),i({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:a,key:t&&t.key||s||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:a="",hash:s=""}=e;return a&&"?"!==a&&(t+="?"===a.charAt(0)?a:"?"+a),s&&"#"!==s&&(t+="#"===s.charAt(0)?s:"#"+s),t}function m(e){let t={};if(e){let a=e.indexOf("#");a>=0&&(t.hash=e.substr(a),e=e.substr(0,a));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function p(e,a,s,n){void 0===n&&(n={});let{window:r=document.defaultView,v5Compat:c=!1}=n,m=r.history,p=t.Pop,f=null,g=x();function x(){return(m.state||{idx:null}).idx}function b(){p=t.Pop;let e=x(),a=null==e?null:e-g;g=e,f&&f({action:p,location:y.location,delta:a})}function v(e){let t="null"!==r.location.origin?r.location.origin:r.location.href,a="string"===typeof e?e:h(e);return a=a.replace(/ $/,"%20"),l(t,"No window.location.(origin|href) available to create URL for href: "+a),new URL(a,t)}null==g&&(g=0,m.replaceState(i({},m.state,{idx:g}),""));let y={get action(){return p},get location(){return e(r,m)},listen(e){if(f)throw new Error("A history only accepts one active listener");return r.addEventListener(o,b),f=e,()=>{r.removeEventListener(o,b),f=null}},createHref:e=>a(r,e),createURL:v,encodeLocation(e){let t=v(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,a){p=t.Push;let n=u(y.location,e,a);s&&s(n,e),g=x()+1;let i=d(n,g),o=y.createHref(n);try{m.pushState(i,"",o)}catch(l){if(l instanceof DOMException&&"DataCloneError"===l.name)throw l;r.location.assign(o)}c&&f&&f({action:p,location:y.location,delta:1})},replace:function(e,a){p=t.Replace;let n=u(y.location,e,a);s&&s(n,e),g=x();let r=d(n,g),i=y.createHref(n);m.replaceState(r,"",i),c&&f&&f({action:p,location:y.location,delta:0})},go:e=>m.go(e)};return y}var f;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(f||(f={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,a){return void 0===a&&(a="/"),x(e,t,a,!1)}function x(e,t,a,s){let n=L(("string"===typeof t?m(t):t).pathname||"/",a);if(null==n)return null;let r=b(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let a=e.length===t.length&&e.slice(0,-1).every(((e,a)=>e===t[a]));return a?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(r);let i=null;for(let o=0;null==i&&o<r.length;++o){let e=E(n);i=A(r[o],e,s)}return i}function b(e,t,a,s){void 0===t&&(t=[]),void 0===a&&(a=[]),void 0===s&&(s="");let n=(e,n,r)=>{let i={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};i.relativePath.startsWith("/")&&(l(i.relativePath.startsWith(s),'Absolute route path "'+i.relativePath+'" nested under path "'+s+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(s.length));let o=R([s,i.relativePath]),c=a.concat(i);e.children&&e.children.length>0&&(l(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),b(e.children,t,c,o)),(null!=e.path||e.index)&&t.push({path:o,score:k(o,e.index),routesMeta:c})};return e.forEach(((e,t)=>{var a;if(""!==e.path&&null!=(a=e.path)&&a.includes("?"))for(let s of v(e.path))n(e,t,s);else n(e,t)})),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[a,...s]=t,n=a.endsWith("?"),r=a.replace(/\?$/,"");if(0===s.length)return n?[r,""]:[r];let i=v(s.join("/")),o=[];return o.push(...i.map((e=>""===e?r:[r,e].join("/")))),n&&o.push(...i),o.map((t=>e.startsWith("/")&&""===t?"/":t))}const y=/^:[\w-]+$/,j=3,N=2,w=1,_=10,S=-2,C=e=>"*"===e;function k(e,t){let a=e.split("/"),s=a.length;return a.some(C)&&(s+=S),t&&(s+=N),a.filter((e=>!C(e))).reduce(((e,t)=>e+(y.test(t)?j:""===t?w:_)),s)}function A(e,t,a){void 0===a&&(a=!1);let{routesMeta:s}=e,n={},r="/",i=[];for(let o=0;o<s.length;++o){let e=s[o],l=o===s.length-1,c="/"===r?t:t.slice(r.length)||"/",d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&a&&!s[s.length-1].route.index&&(d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),i.push({params:n,pathname:R([r,d.pathname]),pathnameBase:I(R([r,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(r=R([r,d.pathnameBase]))}return i}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[a,s]=function(e,t,a){void 0===t&&(t=!1);void 0===a&&(a=!0);c("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,a)=>(s.push({paramName:t,isOptional:null!=a}),a?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(s.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let r=new RegExp(n,t?void 0:"i");return[r,s]}(e.path,e.caseSensitive,e.end),n=t.match(a);if(!n)return null;let r=n[0],i=r.replace(/(.)\/+$/,"$1"),o=n.slice(1),l=s.reduce(((e,t,a)=>{let{paramName:s,isOptional:n}=t;if("*"===s){let e=o[a]||"";i=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[a];return e[s]=n&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:r,pathnameBase:i,pattern:e}}function E(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return c(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function L(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let a=t.endsWith("/")?t.length-1:t.length,s=e.charAt(a);return s&&"/"!==s?null:e.slice(a)||"/"}function D(e,t,a,s){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the `to."+a+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function T(e,t){let a=O(e);return t?a.map(((e,t)=>t===a.length-1?e.pathname:e.pathnameBase)):a.map((e=>e.pathnameBase))}function M(e,t,a,s){let n;void 0===s&&(s=!1),"string"===typeof e?n=m(e):(n=i({},e),l(!n.pathname||!n.pathname.includes("?"),D("?","pathname","search",n)),l(!n.pathname||!n.pathname.includes("#"),D("#","pathname","hash",n)),l(!n.search||!n.search.includes("#"),D("#","search","hash",n)));let r,o=""===e||""===n.pathname,c=o?"/":n.pathname;if(null==c)r=a;else{let e=t.length-1;if(!s&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;n.pathname=t.join("/")}r=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:a,search:s="",hash:n=""}="string"===typeof e?m(e):e,r=a?a.startsWith("/")?a:function(e,t){let a=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?a.length>1&&a.pop():"."!==e&&a.push(e)})),a.length>1?a.join("/"):"/"}(a,t):t;return{pathname:r,search:F(s),hash:z(n)}}(n,r),u=c&&"/"!==c&&c.endsWith("/"),h=(o||"."===c)&&a.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const R=e=>e.join("/").replace(/\/\/+/g,"/"),I=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function B(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],U=(new Set(q),["get",...q]);new Set(U),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},H.apply(this,arguments)}const W=s.createContext(null);const V=s.createContext(null);const G=s.createContext(null);const Y=s.createContext(null);const $=s.createContext({outlet:null,matches:[],isDataRoute:!1});const X=s.createContext(null);function J(){return null!=s.useContext(Y)}function K(){return J()||l(!1),s.useContext(Y).location}function Q(e){s.useContext(G).static||s.useLayoutEffect(e)}function Z(){let{isDataRoute:e}=s.useContext($);return e?function(){let{router:e}=de(le.UseNavigateStable),t=he(ce.UseNavigateStable),a=s.useRef(!1);return Q((()=>{a.current=!0})),s.useCallback((function(s,n){void 0===n&&(n={}),a.current&&("number"===typeof s?e.navigate(s):e.navigate(s,H({fromRouteId:t},n)))}),[e,t])}():function(){J()||l(!1);let e=s.useContext(W),{basename:t,future:a,navigator:n}=s.useContext(G),{matches:r}=s.useContext($),{pathname:i}=K(),o=JSON.stringify(T(r,a.v7_relativeSplatPath)),c=s.useRef(!1);return Q((()=>{c.current=!0})),s.useCallback((function(a,s){if(void 0===s&&(s={}),!c.current)return;if("number"===typeof a)return void n.go(a);let r=M(a,JSON.parse(o),i,"path"===s.relative);null==e&&"/"!==t&&(r.pathname="/"===r.pathname?t:R([t,r.pathname])),(s.replace?n.replace:n.push)(r,s.state,s)}),[t,n,o,i,e])}()}const ee=s.createContext(null);function te(e,t){let{relative:a}=void 0===t?{}:t,{future:n}=s.useContext(G),{matches:r}=s.useContext($),{pathname:i}=K(),o=JSON.stringify(T(r,n.v7_relativeSplatPath));return s.useMemo((()=>M(e,JSON.parse(o),i,"path"===a)),[e,o,i,a])}function ae(e,a,n,r){J()||l(!1);let{navigator:i}=s.useContext(G),{matches:o}=s.useContext($),c=o[o.length-1],d=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let h,p=K();if(a){var f;let e="string"===typeof a?m(a):a;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||l(!1),h=e}else h=p;let x=h.pathname||"/",b=x;if("/"!==u){let e=u.replace(/^\//,"").split("/");b="/"+x.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=g(e,{pathname:b});let y=oe(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:R([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:R([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n,r);return a&&y?s.createElement(Y.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:t.Pop}},y):y}function se(){let e=function(){var e;let t=s.useContext(X),a=ue(ce.UseRouteError),n=he(ce.UseRouteError);if(void 0!==t)return t;return null==(e=a.errors)?void 0:e[n]}(),t=B(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),a?s.createElement("pre",{style:r},a):null,null)}const ne=s.createElement(se,null);class re extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement($.Provider,{value:this.props.routeContext},s.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:t,match:a,children:n}=e,r=s.useContext(W);return r&&r.static&&r.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=a.route.id),s.createElement($.Provider,{value:t},n)}function oe(e,t,a,n){var r;if(void 0===t&&(t=[]),void 0===a&&(a=null),void 0===n&&(n=null),null==e){var i;if(!a)return null;if(a.errors)e=a.matches;else{if(!(null!=(i=n)&&i.v7_partialHydration&&0===t.length&&!a.initialized&&a.matches.length>0))return null;e=a.matches}}let o=e,c=null==(r=a)?void 0:r.errors;if(null!=c){let e=o.findIndex((e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id])));e>=0||l(!1),o=o.slice(0,Math.min(o.length,e+1))}let d=!1,u=-1;if(a&&n&&n.v7_partialHydration)for(let s=0;s<o.length;s++){let e=o[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=s),e.route.id){let{loaderData:t,errors:s}=a,n=e.route.loader&&void 0===t[e.route.id]&&(!s||void 0===s[e.route.id]);if(e.route.lazy||n){d=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight(((e,n,r)=>{let i,l=!1,h=null,m=null;var p;a&&(i=c&&n.route.id?c[n.route.id]:void 0,h=n.route.errorElement||ne,d&&(u<0&&0===r?(p="route-fallback",!1||me[p]||(me[p]=!0),l=!0,m=null):u===r&&(l=!0,m=n.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,r+1)),g=()=>{let t;return t=i?h:l?m:n.route.Component?s.createElement(n.route.Component,null):n.route.element?n.route.element:e,s.createElement(ie,{match:n,routeContext:{outlet:e,matches:f,isDataRoute:null!=a},children:t})};return a&&(n.route.ErrorBoundary||n.route.errorElement||0===r)?s.createElement(re,{location:a.location,revalidation:a.revalidation,component:h,error:i,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function de(e){let t=s.useContext(W);return t||l(!1),t}function ue(e){let t=s.useContext(V);return t||l(!1),t}function he(e){let t=function(){let e=s.useContext($);return e||l(!1),e}(),a=t.matches[t.matches.length-1];return a.route.id||l(!1),a.route.id}const me={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}n.startTransition;function fe(e){let{to:t,replace:a,state:n,relative:r}=e;J()||l(!1);let{future:i,static:o}=s.useContext(G),{matches:c}=s.useContext($),{pathname:d}=K(),u=Z(),h=M(t,T(c,i.v7_relativeSplatPath),d,"path"===r),m=JSON.stringify(h);return s.useEffect((()=>u(JSON.parse(m),{replace:a,state:n,relative:r})),[u,m,r,a,n]),null}function ge(e){return function(e){let t=s.useContext($).outlet;return t?s.createElement(ee.Provider,{value:e},t):t}(e.context)}function xe(e){l(!1)}function be(e){let{basename:a="/",children:n=null,location:r,navigationType:i=t.Pop,navigator:o,static:c=!1,future:d}=e;J()&&l(!1);let u=a.replace(/^\/*/,"/"),h=s.useMemo((()=>({basename:u,navigator:o,static:c,future:H({v7_relativeSplatPath:!1},d)})),[u,d,o,c]);"string"===typeof r&&(r=m(r));let{pathname:p="/",search:f="",hash:g="",state:x=null,key:b="default"}=r,v=s.useMemo((()=>{let e=L(p,u);return null==e?null:{location:{pathname:e,search:f,hash:g,state:x,key:b},navigationType:i}}),[u,p,f,g,x,b,i]);return null==v?null:s.createElement(G.Provider,{value:h},s.createElement(Y.Provider,{children:n,value:v}))}function ve(e){let{children:t,location:a}=e;return ae(ye(t),a)}new Promise((()=>{}));s.Component;function ye(e,t){void 0===t&&(t=[]);let a=[];return s.Children.forEach(e,((e,n)=>{if(!s.isValidElement(e))return;let r=[...t,n];if(e.type===s.Fragment)return void a.push.apply(a,ye(e.props.children,r));e.type!==xe&&l(!1),e.props.index&&e.props.children&&l(!1);let i={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=ye(e.props.children,r)),a.push(i)})),a}var je=a(7950),Ne=a.t(je,2);function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},we.apply(this,arguments)}function _e(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ce=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(If){}const ke=s.createContext({isTransitioning:!1});new Map;const Ae=n.startTransition;Ne.flushSync,n.useId;function Pe(e){let{basename:t,children:a,future:n,window:r}=e,i=s.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:r,v5Compat:!0})&&(o={}),p((function(e,t){let{pathname:a,search:s,hash:n}=e.location;return u("",{pathname:a,search:s,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:h(t)}),null,o)));let l=i.current,[c,d]=s.useState({action:l.action,location:l.location}),{v7_startTransition:m}=n||{},f=s.useCallback((e=>{m&&Ae?Ae((()=>d(e))):d(e)}),[d,m]);return s.useLayoutEffect((()=>l.listen(f)),[l,f]),s.useEffect((()=>pe(n)),[n]),s.createElement(be,{basename:t,children:a,location:c.location,navigationType:c.action,navigator:l,future:n})}const Ee="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Le=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=s.forwardRef((function(e,t){let a,{onClick:n,relative:r,reloadDocument:i,replace:o,state:c,target:d,to:u,preventScrollReset:m,viewTransition:p}=e,f=_e(e,Se),{basename:g}=s.useContext(G),x=!1;if("string"===typeof u&&Le.test(u)&&(a=u,Ee))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),a=L(t.pathname,g);t.origin===e.origin&&null!=a?u=a+t.search+t.hash:x=!0}catch(If){}let b=function(e,t){let{relative:a}=void 0===t?{}:t;J()||l(!1);let{basename:n,navigator:r}=s.useContext(G),{hash:i,pathname:o,search:c}=te(e,{relative:a}),d=o;return"/"!==n&&(d="/"===o?n:R([n,o])),r.createHref({pathname:d,search:c,hash:i})}(u,{relative:r}),v=function(e,t){let{target:a,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:l}=void 0===t?{}:t,c=Z(),d=K(),u=te(e,{relative:o});return s.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,a)){t.preventDefault();let a=void 0!==n?n:h(d)===h(u);c(e,{replace:a,state:r,preventScrollReset:i,relative:o,viewTransition:l})}}),[d,c,u,n,r,a,e,i,o,l])}(u,{replace:o,state:c,target:d,preventScrollReset:m,relative:r,viewTransition:p});return s.createElement("a",we({},f,{href:a||b,onClick:x||i?n:function(e){n&&n(e),e.defaultPrevented||v(e)},ref:t,target:d}))}));const Oe=s.forwardRef((function(e,t){let{"aria-current":a="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:c,viewTransition:d,children:u}=e,h=_e(e,Ce),m=te(c,{relative:h.relative}),p=K(),f=s.useContext(V),{navigator:g,basename:x}=s.useContext(G),b=null!=f&&function(e,t){void 0===t&&(t={});let a=s.useContext(ke);null==a&&l(!1);let{basename:n}=Re(Te.useViewTransitionState),r=te(e,{relative:t.relative});if(!a.isTransitioning)return!1;let i=L(a.currentLocation.pathname,n)||a.currentLocation.pathname,o=L(a.nextLocation.pathname,n)||a.nextLocation.pathname;return null!=P(r.pathname,o)||null!=P(r.pathname,i)}(m)&&!0===d,v=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,y=p.pathname,j=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(y=y.toLowerCase(),j=j?j.toLowerCase():null,v=v.toLowerCase()),j&&x&&(j=L(j,x)||j);const N="/"!==v&&v.endsWith("/")?v.length-1:v.length;let w,_=y===v||!i&&y.startsWith(v)&&"/"===y.charAt(N),S=null!=j&&(j===v||!i&&j.startsWith(v)&&"/"===j.charAt(v.length)),C={isActive:_,isPending:S,isTransitioning:b},k=_?a:void 0;w="function"===typeof r?r(C):[r,_?"active":null,S?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof o?o(C):o;return s.createElement(De,we({},h,{"aria-current":k,className:w,ref:t,style:A,to:c,viewTransition:d}),"function"===typeof u?u(C):u)}));var Te,Me;function Re(e){let t=s.useContext(W);return t||l(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Te||(Te={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Me||(Me={}));var Ie=a(9379);class Fe extends Error{}function ze(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let a=t.charCodeAt(0).toString(16).toUpperCase();return a.length<2&&(a="0"+a),"%"+a})))}(t)}catch(a){return atob(t)}}function Be(e,t){if("string"!==typeof e)throw new Fe("Invalid token specified: must be a string");t||(t={});const a=!0===t.header?0:1,s=e.split(".")[a];if("string"!==typeof s)throw new Fe("Invalid token specified: missing part #".concat(a+1));let n;try{n=ze(s)}catch(If){throw new Fe("Invalid token specified: invalid base64 for part #".concat(a+1," (").concat(If.message,")"))}try{return JSON.parse(n)}catch(If){throw new Fe("Invalid token specified: invalid json for part #".concat(a+1," (").concat(If.message,")"))}}Fe.prototype.name="InvalidTokenError";var qe=a(3488);const Ue=async e=>{const t=localStorage.getItem("token"),a=await fetch("".concat(qe.H,"/reports/professional-data"),{method:"PUT",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){const e=await a.json().catch((()=>({})));throw new Error(e.error||"Erro ao atualizar dados profissionais")}return a.json()},He=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=localStorage.getItem("token"),s=new URLSearchParams;t.startDate&&s.append("startDate",t.startDate),t.endDate&&s.append("endDate",t.endDate),t.programIds&&t.programIds.length>0&&s.append("programIds",t.programIds.join(","));const n=await fetch("".concat(qe.H,"/reports/automatic-analysis/").concat(e,"?").concat(s),{method:"GET",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});if(!n.ok){const e=await n.json().catch((()=>({})));throw new Error(e.error||"Erro ao gerar an\xe1lise autom\xe1tica")}return n.json()};var We=a(579);const Ve=(0,s.createContext)(null),Ge=e=>{let{children:t}=e;const[a,n]=(0,s.useState)(null),[r,i]=(0,s.useState)(null),[o,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!0),u=(0,s.useCallback)((async e=>{try{const t=await(async()=>{const e=localStorage.getItem("token"),t=await fetch("".concat(qe.H,"/auth/profile"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!t.ok){const e=await t.json().catch((()=>({})));throw new Error(e.error||"Erro ao buscar perfil do usu\xe1rio")}return t.json()})();if(t.professional_id||t.qualifications||t.professional_signature){const e={professional_id:t.professional_id,qualifications:t.qualifications,professional_signature:t.professional_signature};localStorage.setItem("professionalData",JSON.stringify(e))}const a=Be(e),s=(0,Ie.A)((0,Ie.A)({},a),{},{professional_id:t.professional_id,qualifications:t.qualifications,professional_signature:t.professional_signature,clinic_name:t.clinic_name,full_name:t.full_name||a.full_name});return i(s),s}catch(t){const a=localStorage.getItem("professionalData"),s=Be(e);let n=s;if(a)try{const e=JSON.parse(a);n=(0,Ie.A)((0,Ie.A)({},s),e)}catch(t){localStorage.removeItem("professionalData")}return i(n),n}}),[]),h=(0,s.useCallback)((async()=>{const e=localStorage.getItem("token");if(e)try{if(!(1e3*Be(e).exp<Date.now()))return n(e),l(!0),void await u(e);localStorage.removeItem("token"),localStorage.removeItem("professionalData")}catch(t){localStorage.removeItem("token"),localStorage.removeItem("professionalData")}n(null),i(null),l(!1)}),[u]);(0,s.useEffect)((()=>{(async()=>{await h(),d(!1)})()}),[h]);const m=()=>{localStorage.removeItem("token"),localStorage.removeItem("professionalData"),n(null),i(null),l(!1)},p={token:a,user:r,isAuthenticated:o,isLoading:c,login:async e=>{try{localStorage.setItem("token",e),n(e),l(!0),await u(e)}catch(t){m()}},logout:m,updateUser:e=>{if(r&&e){const s=(0,Ie.A)((0,Ie.A)({},r),e);if(i(s),a&&(e.professional_id||e.qualifications||e.professional_signature))try{const t={professional_id:e.professional_id,qualifications:e.qualifications,professional_signature:e.professional_signature};localStorage.setItem("professionalData",JSON.stringify(t))}catch(t){}}}};return(0,We.jsx)(Ve.Provider,{value:p,children:!c&&t})},Ye=()=>{const e=(0,s.useContext)(Ve);if(null===e)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return e};var $e=a(9722);const Xe={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:3000/api",Je=e=>({headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),Ke=async e=>{try{return(await $e.A.get("".concat(Xe,"/admin/users"),Je(e))).data.users||[]}catch(r){var t,a,s,n;throw new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"N\xe3o foi poss\xedvel carregar a lista de utilizadores.")}},Qe=async(e,t)=>{try{return(await $e.A.delete("".concat(Xe,"/admin/users/").concat(e),Je(t))).data}catch(d){var a,s,n,r,i,o;if(null!==(a=d.response)&&void 0!==a&&null!==(s=a.data)&&void 0!==s&&s.requiresTransfer){var l,c;const e=new Error((null===(l=d.response.data.errors)||void 0===l||null===(c=l[0])||void 0===c?void 0:c.msg)||"Transfer\xeancia necess\xe1ria.");throw e.requiresTransfer=!0,e}throw new Error((null===(n=d.response)||void 0===n||null===(r=n.data)||void 0===r||null===(i=r.errors)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.msg)||"N\xe3o foi poss\xedvel apagar o utilizador.")}},Ze=async e=>{try{return(await $e.A.get("".concat(Xe,"/admin/patients"),Je(e))).data.patients||[]}catch(r){var t,a,s,n;throw new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"N\xe3o foi poss\xedvel carregar a lista de pacientes.")}},et=async(e,t)=>{try{return(await $e.A.post("".concat(Xe,"/admin/patients"),e,Je(t))).data}catch(i){var a,s,n,r;throw new Error((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"N\xe3o foi poss\xedvel criar o paciente.")}},tt=async e=>{try{return(await $e.A.get("".concat(Xe,"/admin/assignments"),Je(e))).data.assignments||[]}catch(r){var t,a,s,n;throw new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"N\xe3o foi poss\xedvel carregar a lista de atribui\xe7\xf5es.")}},at={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:3000/api";var st=a(1487);const nt={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_URL||"http://localhost:3000/api",rt=e=>(e||console.error("[API-LOG] Tentativa de criar cabe\xe7alho de autentica\xe7\xe3o sem token."),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),it=async(e,t,a)=>{try{return(await $e.A.post("".concat(nt,"/assignments"),{patientId:e,programId:t},rt(a))).data}catch(l){var s,n,r,i,o;throw console.error("Erro ao atribuir programa ".concat(t," ao paciente ").concat(e,":"),(null===(s=l.response)||void 0===s?void 0:s.data)||l.message),new Error((null===(n=l.response)||void 0===n||null===(r=n.data)||void 0===r||null===(i=r.errors)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.msg)||"N\xe3o foi poss\xedvel atribuir o programa.")}},ot=async(e,t)=>{try{await $e.A.delete("".concat(nt,"/assignments/").concat(e),rt(t))}catch(o){var a,s,n,r,i;console.error("Erro ao remover a atribui\xe7\xe3o ".concat(e,":"),(null===(a=o.response)||void 0===a?void 0:a.data)||o.message);const t=(null===(s=o.response)||void 0===s||null===(n=s.data)||void 0===n||null===(r=n.errors)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.msg)||"N\xe3o foi poss\xedvel remover o programa.";throw new Error(t)}},lt=(0,s.createContext)(null),ct=e=>{let{children:t}=e;const[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(""),{user:h,isAuthenticated:m,token:p}=Ye(),[f,g]=(0,s.useState)(!1),[x,b]=(0,s.useState)(!1),[v,y]=(0,s.useState)(null),j=s.useRef(new Set),N=(0,s.useCallback)((async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!m||!h||!p)return r([]),o(null),void c(!1);c(!0),u("");try{let t=[];if("super_admin"===h.role)t=[];else if(h.is_admin)t=await Ze(p);else if("terapeuta"===h.role)t=await(async e=>{try{console.log("[API-LOG] fetchAllPatients: Iniciando busca de pacientes para terapeuta");const t=await $e.A.get("".concat(nt,"/patients"),rt(e));return console.log("[API-LOG] fetchAllPatients: Sucesso -",t.data.length,"pacientes encontrados"),t.data}catch(d){var t,a,s,n,r;throw console.error("[API-LOG] fetchAllPatients: Erro -",(null===(t=d.response)||void 0===t?void 0:t.data)||d.message),new Error((null===(a=d.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"N\xe3o foi poss\xedvel carregar os pacientes.")}})(p);else if("pai"===h.role){const e=await(async e=>{try{const t=await $e.A.get("".concat(at,"/parent/dashboard"),(e=>({headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}))(e));return t.data}catch(d){var t,a,s,n,r;throw console.error("Erro ao buscar dados do dashboard parental:",(null===(t=d.response)||void 0===t?void 0:t.data)||d.message),new Error((null===(a=d.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"N\xe3o foi poss\xedvel carregar os dados de acompanhamento.")}})(p);t=e.patient?[e.patient]:[],e.patient&&o(e.patient)}if(r(t),e){const a=t.find((t=>t.id===e));a&&o(a)}else"pai"!==h.role&&o(null)}catch(t){u(t.message||"Falha ao carregar dados.")}finally{c(!1)}}),[m,h,p]),w=(0,s.useCallback)((async e=>{o(e||null)}),[]);(0,s.useEffect)((()=>{N()}),[N]);const _=async e=>{if(!i)throw new Error("Nenhum cliente selecionado.");const t=i.id;try{await e(),await N(t)}catch(d){throw d}},S=(0,s.useCallback)((async(e,t)=>{try{console.log("[PROMPT-LEVEL-FETCH] Buscando n\xedvel para paciente ".concat(e,", programa ").concat(t));const{getPromptLevelByPatientAndProgram:s}=await a.e(55).then(a.bind(a,4055)),n=(await s(e,t)).currentPromptLevel,r=null!==n&&void 0!==n?n:5;return console.log("[PROMPT-LEVEL-FETCH] N\xedvel encontrado: ".concat(r," para paciente ").concat(e,", programa ").concat(t)),r}catch(d){return console.error("[PROMPT-LEVEL-ERROR] Erro ao buscar n\xedvel para paciente ".concat(e,", programa ").concat(t,":"),d),5}}),[]),C=(0,s.useCallback)((async function(e,t,s){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const r="".concat(e,"_").concat(t);if(j.current.has(r))console.log("[PROMPT-LEVEL-LOCK] Opera\xe7\xe3o em andamento para ".concat(r,", ignorando nova chamada"));else if(n){j.current.add(r);try{console.log("[PROMPT-LEVEL-SAVE] Salvando n\xedvel ".concat(s," para paciente ").concat(e,", programa ").concat(t,", assignment ").concat(n));const{updatePromptLevel:r}=await a.e(55).then(a.bind(a,4055));await r(n,s),console.log("[PROMPT-LEVEL-SAVE] N\xedvel ".concat(s," salvo com sucesso no banco para assignment ").concat(n))}catch(d){throw console.error("[PROMPT-LEVEL-ERROR] Erro ao salvar n\xedvel ".concat(s," para assignment ").concat(n,":"),d),d}finally{j.current.delete(r)}}else console.error("[PROMPT-LEVEL-ERROR] assignmentId n\xe3o fornecido para paciente ".concat(e,", programa ").concat(t))}),[]),k={patients:n,selectedPatient:i,isLoading:l,error:d,selectPatient:w,isPatientFormOpen:f,patientToEdit:v,openPatientForm:(0,s.useCallback)((function(){y(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null),g(!0)}),[]),closePatientForm:(0,s.useCallback)((()=>{y(null),g(!1)}),[]),isReportModalOpen:x,openReportModal:(0,s.useCallback)((()=>b(!0)),[]),closeReportModal:(0,s.useCallback)((()=>b(!1)),[]),assignProgram:e=>_((()=>it(i.id,e,p))),removeProgram:e=>{var t;if(!i)return;const a=null===(t=i.assigned_programs)||void 0===t?void 0:t.find((t=>t.program_id===e));if(!a)return;const s=a.assignment_id;window.confirm("Tem a certeza que deseja remover este programa permanentemente? Esta a\xe7\xe3o n\xe3o pode ser desfeita.")&&_((()=>ot(s,p)))},toggleProgramStatus:(e,t)=>{const a="archived"===t?"active":"archived";_((()=>(0,st.xT)(e,a,p)))},addSession:e=>_((()=>(async(e,t,a)=>{try{console.log("[API-LOG] createSession: Criando sess\xe3o para paciente ".concat(e));const s=await $e.A.post("".concat(nt,"/programs/evolution"),t,rt(a));return console.log("[API-LOG] createSession: Sucesso"),s.data}catch(d){var s,n,r,i,o;throw console.error("[API-LOG] createSession: Erro para paciente ".concat(e," -"),(null===(s=d.response)||void 0===s?void 0:s.data)||d.message),new Error((null===(n=d.response)||void 0===n||null===(r=n.data)||void 0===r||null===(i=r.errors)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.msg)||"N\xe3o foi poss\xedvel criar a sess\xe3o.")}})(i.id,e,p))),saveNotes:e=>_((()=>(async(e,t,a)=>{try{const s=await $e.A.patch("".concat(nt,"/patients/").concat(e,"/notes"),{general_notes:t},rt(a));return console.log("[API-LOG] updatePatientNotes: Sucesso"),s.data}catch(d){var s,n,r,i,o;throw console.error("[API-LOG] updatePatientNotes: Erro para paciente ".concat(e," -"),(null===(s=d.response)||void 0===s?void 0:s.data)||d.message),new Error((null===(n=d.response)||void 0===n||null===(r=n.data)||void 0===r||null===(i=r.errors)||void 0===i||null===(o=i[0])||void 0===o?void 0:o.msg)||"N\xe3o foi poss\xedvel atualizar as notas.")}})(i.id,e,p))),refreshPatientData:N,refreshAndReselectPatient:(0,s.useCallback)((e=>N(e)),[N]),getPromptLevelForProgram:S,setPromptLevelForProgram:C};return(0,We.jsx)(lt.Provider,{value:k,children:t})},dt=()=>{const e=(0,s.useContext)(lt);if(null===e)throw new Error("usePatients deve ser usado dentro de um PatientProvider");return e},ut=(0,s.createContext)(),ht=e=>{let{children:t}=e;const[n,r]=(0,s.useState)({}),[i,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(null),{isAuthenticated:h}=Ye(),m=(0,s.useCallback)((async()=>{if(h){c(!0),u(null);try{const e=await(0,st.pF)();r(e||{})}catch(e){u("N\xe3o foi poss\xedvel carregar os programas.")}finally{c(!1)}}else r({})}),[h]),p=(0,s.useCallback)((e=>{if(!n||"object"!==typeof n)return null;for(const t in n){const a=n[t];if(a&&"object"===typeof a)for(const s in a){const n=a[s];if(n&&"object"===typeof n)for(const a in n){const r=n[a];if(Array.isArray(r)){const n=r.find((t=>t.id==e));if(n)return(0,Ie.A)((0,Ie.A)({},n),{},{area:s,discipline:t,sub_area:a})}}}}return null}),[n]);(0,s.useEffect)((()=>{m()}),[m]);const f=(0,s.useCallback)((async e=>{const t=p(e);if(t)o(t);else{c(!0),u(null);try{const{getProgramById:t}=await Promise.resolve().then(a.bind(a,1487)),s=await t(e);o(s)}catch(s){u("N\xe3o foi poss\xedvel carregar os detalhes do programa."),o(null)}finally{c(!1)}}}),[p]),g={disciplines:n,selectedProgram:i,isLoading:l,error:d,refreshPrograms:m,fetchProgramDetails:f,getProgramById:p,clearSelectedProgram:()=>o(null)};return(0,We.jsx)(ut.Provider,{value:g,children:t})},mt=()=>{const e=(0,s.useContext)(ut);if(null===e)throw new Error("usePrograms deve ser usado dentro de um ProgramProvider");return e};function pt(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ft(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function gt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(a),!0).forEach((function(t){pt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ft(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}const xt=()=>{};let bt={},vt={},yt=null,jt={mark:xt,measure:xt};try{"undefined"!==typeof window&&(bt=window),"undefined"!==typeof document&&(vt=document),"undefined"!==typeof MutationObserver&&(yt=MutationObserver),"undefined"!==typeof performance&&(jt=performance)}catch(If){}const{userAgent:Nt=""}=bt.navigator||{},wt=bt,_t=vt,St=yt,Ct=jt,kt=(wt.document,!!_t.documentElement&&!!_t.head&&"function"===typeof _t.addEventListener&&"function"===typeof _t.createElement),At=~Nt.indexOf("MSIE")||~Nt.indexOf("Trident/");var Pt={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},Et=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],Lt="classic",Dt="duotone",Ot=[Lt,Dt,"sharp","sharp-duotone"],Tt=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),Mt=["fak","fa-kit","fakd","fa-kit-duotone"],Rt={fak:"kit","fa-kit":"kit"},It={fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"},Ft=["fak","fakd"],zt={kit:"fak"},Bt={"kit-duotone":"fakd"},qt={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Ut=["fak","fa-kit","fakd","fa-kit-duotone"],Ht={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},Wt=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],Vt=[1,2,3,4,5,6,7,8,9,10],Gt=Vt.concat([11,12,13,14,15,16,17,18,19,20]),Yt=[...Object.keys({classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]}),"solid","regular","light","thin","duotone","brands","2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",qt.GROUP,qt.SWAP_OPACITY,qt.PRIMARY,qt.SECONDARY].concat(Vt.map((e=>"".concat(e,"x")))).concat(Gt.map((e=>"w-".concat(e))));const $t="___FONT_AWESOME___",Xt=16,Jt="svg-inline--fa",Kt="data-fa-i2svg",Qt="data-fa-pseudo-element",Zt="data-prefix",ea="data-icon",ta="fontawesome-i2svg",aa=["HTML","HEAD","STYLE","SCRIPT"],sa=(()=>{try{return!0}catch(e){return!1}})();function na(e){return new Proxy(e,{get:(e,t)=>t in e?e[t]:e[Lt]})}const ra=gt({},Pt);ra[Lt]=gt(gt(gt(gt({},{"fa-duotone":"duotone"}),Pt[Lt]),Rt),It);const ia=na(ra),oa=gt({},{classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}});oa[Lt]=gt(gt(gt(gt({},{duotone:"fad"}),oa[Lt]),zt),Bt);const la=na(oa),ca=gt({},Ht);ca[Lt]=gt(gt({},ca[Lt]),{fak:"fa-kit"});const da=na(ca),ua=gt({},{classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}});ua[Lt]=gt(gt({},ua[Lt]),{"fa-kit":"fak"});na(ua);const ha=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,ma="fa-layers-text",pa=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,fa=(na(gt({},{classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}})),["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"]),ga={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},xa=["kit",...Yt],ba=wt.FontAwesomeConfig||{};if(_t&&"function"===typeof _t.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((e=>{let[t,a]=e;const s=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=_t.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(t));void 0!==s&&null!==s&&(ba[a]=s)}))}const va={styleDefault:"solid",familyDefault:Lt,cssPrefix:"fa",replacementClass:Jt,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};ba.familyPrefix&&(ba.cssPrefix=ba.familyPrefix);const ya=gt(gt({},va),ba);ya.autoReplaceSvg||(ya.observeMutations=!1);const ja={};Object.keys(va).forEach((e=>{Object.defineProperty(ja,e,{enumerable:!0,set:function(t){ya[e]=t,Na.forEach((e=>e(ja)))},get:function(){return ya[e]}})})),Object.defineProperty(ja,"familyPrefix",{enumerable:!0,set:function(e){ya.cssPrefix=e,Na.forEach((e=>e(ja)))},get:function(){return ya.cssPrefix}}),wt.FontAwesomeConfig=ja;const Na=[];const wa=Xt,_a={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function Sa(){let e=12,t="";for(;e-- >0;)t+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return t}function Ca(e){const t=[];for(let a=(e||[]).length>>>0;a--;)t[a]=e[a];return t}function ka(e){return e.classList?Ca(e.classList):(e.getAttribute("class")||"").split(" ").filter((e=>e))}function Aa(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Pa(e){return Object.keys(e||{}).reduce(((t,a)=>t+"".concat(a,": ").concat(e[a].trim(),";")),"")}function Ea(e){return e.size!==_a.size||e.x!==_a.x||e.y!==_a.y||e.rotate!==_a.rotate||e.flipX||e.flipY}function La(){const e="fa",t=Jt,a=ja.cssPrefix,s=ja.replacementClass;let n=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-counter-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(-1 * var(--fa-li-width, 2em));\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  animation-name: fa-beat;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  animation-name: fa-bounce;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  animation-name: fa-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  animation-name: fa-beat-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  animation-name: fa-flip;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  animation-name: fa-shake;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  animation-name: fa-spin;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 2s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  animation-name: fa-spin;\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    animation-delay: -1ms;\n    animation-duration: 1ms;\n    animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    transform: scale(1);\n  }\n  45% {\n    transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-shake {\n  0% {\n    transform: rotate(-15deg);\n  }\n  4% {\n    transform: rotate(15deg);\n  }\n  8%, 24% {\n    transform: rotate(-18deg);\n  }\n  12%, 28% {\n    transform: rotate(18deg);\n  }\n  16% {\n    transform: rotate(-22deg);\n  }\n  20% {\n    transform: rotate(22deg);\n  }\n  32% {\n    transform: rotate(-12deg);\n  }\n  36% {\n    transform: rotate(12deg);\n  }\n  40%, 100% {\n    transform: rotate(0deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}';if(a!==e||s!==t){const r=new RegExp("\\.".concat(e,"\\-"),"g"),i=new RegExp("\\--".concat(e,"\\-"),"g"),o=new RegExp("\\.".concat(t),"g");n=n.replace(r,".".concat(a,"-")).replace(i,"--".concat(a,"-")).replace(o,".".concat(s))}return n}let Da=!1;function Oa(){ja.autoAddCss&&!Da&&(!function(e){if(!e||!kt)return;const t=_t.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;const a=_t.head.childNodes;let s=null;for(let n=a.length-1;n>-1;n--){const e=a[n],t=(e.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(t)>-1&&(s=e)}_t.head.insertBefore(t,s)}(La()),Da=!0)}var Ta={mixout:()=>({dom:{css:La,insertCss:Oa}}),hooks:()=>({beforeDOMElementCreation(){Oa()},beforeI2svg(){Oa()}})};const Ma=wt||{};Ma[$t]||(Ma[$t]={}),Ma[$t].styles||(Ma[$t].styles={}),Ma[$t].hooks||(Ma[$t].hooks={}),Ma[$t].shims||(Ma[$t].shims=[]);var Ra=Ma[$t];const Ia=[],Fa=function(){_t.removeEventListener("DOMContentLoaded",Fa),za=1,Ia.map((e=>e()))};let za=!1;function Ba(e){const{tag:t,attributes:a={},children:s=[]}=e;return"string"===typeof e?Aa(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce(((t,a)=>t+"".concat(a,'="').concat(Aa(e[a]),'" ')),"").trim()}(a),">").concat(s.map(Ba).join(""),"</").concat(t,">")}function qa(e,t,a){if(e&&e[t]&&e[t][a])return{prefix:t,iconName:a,icon:e[t][a]}}kt&&(za=(_t.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(_t.readyState),za||_t.addEventListener("DOMContentLoaded",Fa));var Ua=function(e,t,a,s){var n,r,i,o=Object.keys(e),l=o.length,c=void 0!==s?function(e,t){return function(a,s,n,r){return e.call(t,a,s,n,r)}}(t,s):t;for(void 0===a?(n=1,i=e[o[0]]):(n=0,i=a);n<l;n++)i=c(i,e[r=o[n]],r,e);return i};function Ha(e){const t=function(e){const t=[];let a=0;const s=e.length;for(;a<s;){const n=e.charCodeAt(a++);if(n>=55296&&n<=56319&&a<s){const s=e.charCodeAt(a++);56320==(64512&s)?t.push(((1023&n)<<10)+(1023&s)+65536):(t.push(n),a--)}else t.push(n)}return t}(e);return 1===t.length?t[0].toString(16):null}function Wa(e){return Object.keys(e).reduce(((t,a)=>{const s=e[a];return!!s.icon?t[s.iconName]=s.icon:t[a]=s,t}),{})}function Va(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipHooks:s=!1}=a,n=Wa(t);"function"!==typeof Ra.hooks.addPack||s?Ra.styles[e]=gt(gt({},Ra.styles[e]||{}),n):Ra.hooks.addPack(e,Wa(t)),"fas"===e&&Va("fa",t)}const{styles:Ga,shims:Ya}=Ra,$a=Object.keys(da),Xa=$a.reduce(((e,t)=>(e[t]=Object.keys(da[t]),e)),{});let Ja=null,Ka={},Qa={},Za={},es={},ts={};function as(e,t){const a=t.split("-"),s=a[0],n=a.slice(1).join("-");return s!==e||""===n||(r=n,~xa.indexOf(r))?null:n;var r}const ss=()=>{const e=e=>Ua(Ga,((t,a,s)=>(t[s]=Ua(a,e,{}),t)),{});Ka=e(((e,t,a)=>{if(t[3]&&(e[t[3]]=a),t[2]){t[2].filter((e=>"number"===typeof e)).forEach((t=>{e[t.toString(16)]=a}))}return e})),Qa=e(((e,t,a)=>{if(e[a]=a,t[2]){t[2].filter((e=>"string"===typeof e)).forEach((t=>{e[t]=a}))}return e})),ts=e(((e,t,a)=>{const s=t[2];return e[a]=a,s.forEach((t=>{e[t]=a})),e}));const t="far"in Ga||ja.autoFetchSvg,a=Ua(Ya,((e,a)=>{const s=a[0];let n=a[1];const r=a[2];return"far"!==n||t||(n="fas"),"string"===typeof s&&(e.names[s]={prefix:n,iconName:r}),"number"===typeof s&&(e.unicodes[s.toString(16)]={prefix:n,iconName:r}),e}),{names:{},unicodes:{}});Za=a.names,es=a.unicodes,Ja=cs(ja.styleDefault,{family:ja.familyDefault})};var ns;function rs(e,t){return(Ka[e]||{})[t]}function is(e,t){return(ts[e]||{})[t]}function os(e){return Za[e]||{prefix:null,iconName:null}}function ls(){return Ja}ns=e=>{Ja=cs(e.styleDefault,{family:ja.familyDefault})},Na.push(ns),ss();function cs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{family:a=Lt}=t,s=ia[a][e];if(a===Dt&&!e)return"fad";const n=la[a][e]||la[a][s],r=e in Ra.styles?e:null;return n||r||null}function ds(e){return e.sort().filter(((e,t,a)=>a.indexOf(e)===t))}function us(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{skipLookups:a=!1}=t;let s=null;const n=Wt.concat(Ut),r=ds(e.filter((e=>n.includes(e)))),i=ds(e.filter((e=>!Wt.includes(e)))),o=r.filter((e=>(s=e,!Et.includes(e)))),[l=null]=o,c=function(e){let t=Lt;const a=$a.reduce(((e,t)=>(e[t]="".concat(ja.cssPrefix,"-").concat(t),e)),{});return Ot.forEach((s=>{(e.includes(a[s])||e.some((e=>Xa[s].includes(e))))&&(t=s)})),t}(r),d=gt(gt({},function(e){let t=[],a=null;return e.forEach((e=>{const s=as(ja.cssPrefix,e);s?a=s:e&&t.push(e)})),{iconName:a,rest:t}}(i)),{},{prefix:cs(l,{family:c})});return gt(gt(gt({},d),function(e){const{values:t,family:a,canonical:s,givenPrefix:n="",styles:r={},config:i={}}=e,o=a===Dt,l=t.includes("fa-duotone")||t.includes("fad"),c="duotone"===i.familyDefault,d="fad"===s.prefix||"fa-duotone"===s.prefix;!o&&(l||c||d)&&(s.prefix="fad");(t.includes("fa-brands")||t.includes("fab"))&&(s.prefix="fab");if(!s.prefix&&hs.includes(a)){if(Object.keys(r).find((e=>ms.includes(e)))||i.autoFetchSvg){const e=Tt.get(a).defaultShortPrefixId;s.prefix=e,s.iconName=is(s.prefix,s.iconName)||s.iconName}}"fa"!==s.prefix&&"fa"!==n||(s.prefix=ls()||"fas");return s}({values:e,family:c,styles:Ga,config:ja,canonical:d,givenPrefix:s})),function(e,t,a){let{prefix:s,iconName:n}=a;if(e||!s||!n)return{prefix:s,iconName:n};const r="fa"===t?os(n):{},i=is(s,n);n=r.iconName||i||n,s=r.prefix||s,"far"!==s||Ga.far||!Ga.fas||ja.autoFetchSvg||(s="fas");return{prefix:s,iconName:n}}(a,s,d))}const hs=Ot.filter((e=>e!==Lt||e!==Dt)),ms=Object.keys(Ht).filter((e=>e!==Lt)).map((e=>Object.keys(Ht[e]))).flat();let ps=[],fs={};const gs={},xs=Object.keys(gs);function bs(e,t){for(var a=arguments.length,s=new Array(a>2?a-2:0),n=2;n<a;n++)s[n-2]=arguments[n];return(fs[e]||[]).forEach((e=>{t=e.apply(null,[t,...s])})),t}function vs(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];(fs[e]||[]).forEach((e=>{e.apply(null,a)}))}function ys(){const e=arguments[0],t=Array.prototype.slice.call(arguments,1);return gs[e]?gs[e].apply(null,t):void 0}function js(e){"fa"===e.prefix&&(e.prefix="fas");let{iconName:t}=e;const a=e.prefix||ls();if(t)return t=is(a,t)||t,qa(Ns.definitions,a,t)||qa(Ra.styles,a,t)}const Ns=new class{constructor(){this.definitions={}}add(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];const s=t.reduce(this._pullDefinitions,{});Object.keys(s).forEach((e=>{this.definitions[e]=gt(gt({},this.definitions[e]||{}),s[e]),Va(e,s[e]);const t=da[Lt][e];t&&Va(t,s[e]),ss()}))}reset(){this.definitions={}}_pullDefinitions(e,t){const a=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(a).map((t=>{const{prefix:s,iconName:n,icon:r}=a[t],i=r[2];e[s]||(e[s]={}),i.length>0&&i.forEach((t=>{"string"===typeof t&&(e[s][t]=r)})),e[s][n]=r})),e}},ws={i2svg:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kt?(vs("beforeI2svg",e),ys("pseudoElements2svg",e),ys("i2svg",e)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t}=e;var a;!1===ja.autoReplaceSvg&&(ja.autoReplaceSvg=!0),ja.observeMutations=!0,a=()=>{Cs({autoReplaceSvgRoot:t}),vs("watch",e)},kt&&(za?setTimeout(a,0):Ia.push(a))}},_s={icon:e=>{if(null===e)return null;if("object"===typeof e&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:is(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){const t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],a=cs(e[0]);return{prefix:a,iconName:is(a,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(ja.cssPrefix,"-"))>-1||e.match(ha))){const t=us(e.split(" "),{skipLookups:!0});return{prefix:t.prefix||ls(),iconName:is(t.prefix,t.iconName)||t.iconName}}if("string"===typeof e){const t=ls();return{prefix:t,iconName:is(t,e)||e}}}},Ss={noAuto:()=>{ja.autoReplaceSvg=!1,ja.observeMutations=!1,vs("noAuto")},config:ja,dom:ws,parse:_s,library:Ns,findIconDefinition:js,toHtml:Ba},Cs=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:t=_t}=e;(Object.keys(Ra.styles).length>0||ja.autoFetchSvg)&&kt&&ja.autoReplaceSvg&&Ss.dom.i2svg({node:t})};function ks(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((e=>Ba(e)))}}),Object.defineProperty(e,"node",{get:function(){if(!kt)return;const t=_t.createElement("div");return t.innerHTML=e.html,t.children}}),e}function As(e){const{icons:{main:t,mask:a},prefix:s,iconName:n,transform:r,symbol:i,title:o,maskId:l,titleId:c,extra:d,watchable:u=!1}=e,{width:h,height:m}=a.found?a:t,p=Ft.includes(s),f=[ja.replacementClass,n?"".concat(ja.cssPrefix,"-").concat(n):""].filter((e=>-1===d.classes.indexOf(e))).filter((e=>""!==e||!!e)).concat(d.classes).join(" ");let g={children:[],attributes:gt(gt({},d.attributes),{},{"data-prefix":s,"data-icon":n,class:f,role:d.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(h," ").concat(m)})};const x=p&&!~d.classes.indexOf("fa-fw")?{width:"".concat(h/m*16*.0625,"em")}:{};u&&(g.attributes[Kt]=""),o&&(g.children.push({tag:"title",attributes:{id:g.attributes["aria-labelledby"]||"title-".concat(c||Sa())},children:[o]}),delete g.attributes.title);const b=gt(gt({},g),{},{prefix:s,iconName:n,main:t,mask:a,maskId:l,transform:r,symbol:i,styles:gt(gt({},x),d.styles)}),{children:v,attributes:y}=a.found&&t.found?ys("generateAbstractMask",b)||{children:[],attributes:{}}:ys("generateAbstractIcon",b)||{children:[],attributes:{}};return b.children=v,b.attributes=y,i?function(e){let{prefix:t,iconName:a,children:s,attributes:n,symbol:r}=e;const i=!0===r?"".concat(t,"-").concat(ja.cssPrefix,"-").concat(a):r;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:gt(gt({},n),{},{id:i}),children:s}]}]}(b):function(e){let{children:t,main:a,mask:s,attributes:n,styles:r,transform:i}=e;if(Ea(i)&&a.found&&!s.found){const{width:e,height:t}=a,s={x:e/t/2,y:.5};n.style=Pa(gt(gt({},r),{},{"transform-origin":"".concat(s.x+i.x/16,"em ").concat(s.y+i.y/16,"em")}))}return[{tag:"svg",attributes:n,children:t}]}(b)}function Ps(e){const{content:t,width:a,height:s,transform:n,title:r,extra:i,watchable:o=!1}=e,l=gt(gt(gt({},i.attributes),r?{title:r}:{}),{},{class:i.classes.join(" ")});o&&(l[Kt]="");const c=gt({},i.styles);Ea(n)&&(c.transform=function(e){let{transform:t,width:a=Xt,height:s=Xt,startCentered:n=!1}=e,r="";return r+=n&&At?"translate(".concat(t.x/wa-a/2,"em, ").concat(t.y/wa-s/2,"em) "):n?"translate(calc(-50% + ".concat(t.x/wa,"em), calc(-50% + ").concat(t.y/wa,"em)) "):"translate(".concat(t.x/wa,"em, ").concat(t.y/wa,"em) "),r+="scale(".concat(t.size/wa*(t.flipX?-1:1),", ").concat(t.size/wa*(t.flipY?-1:1),") "),r+="rotate(".concat(t.rotate,"deg) "),r}({transform:n,startCentered:!0,width:a,height:s}),c["-webkit-transform"]=c.transform);const d=Pa(c);d.length>0&&(l.style=d);const u=[];return u.push({tag:"span",attributes:l,children:[t]}),r&&u.push({tag:"span",attributes:{class:"sr-only"},children:[r]}),u}const{styles:Es}=Ra;function Ls(e){const t=e[0],a=e[1],[s]=e.slice(4);let n=null;return n=Array.isArray(s)?{tag:"g",attributes:{class:"".concat(ja.cssPrefix,"-").concat(ga.GROUP)},children:[{tag:"path",attributes:{class:"".concat(ja.cssPrefix,"-").concat(ga.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(ja.cssPrefix,"-").concat(ga.PRIMARY),fill:"currentColor",d:s[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:t,height:a,icon:n}}const Ds={found:!1,width:512,height:512};function Os(e,t){let a=t;return"fa"===t&&null!==ja.styleDefault&&(t=ls()),new Promise(((s,n)=>{if("fa"===a){const a=os(e)||{};e=a.iconName||e,t=a.prefix||t}if(e&&t&&Es[t]&&Es[t][e]){return s(Ls(Es[t][e]))}!function(e,t){sa||ja.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),s(gt(gt({},Ds),{},{icon:ja.showMissingIcons&&e&&ys("missingIconAbstract")||{}}))}))}const Ts=()=>{},Ms=ja.measurePerformance&&Ct&&Ct.mark&&Ct.measure?Ct:{mark:Ts,measure:Ts},Rs='FA "6.7.2"',Is=e=>{Ms.mark("".concat(Rs," ").concat(e," ends")),Ms.measure("".concat(Rs," ").concat(e),"".concat(Rs," ").concat(e," begins"),"".concat(Rs," ").concat(e," ends"))};var Fs=e=>(Ms.mark("".concat(Rs," ").concat(e," begins")),()=>Is(e));const zs=()=>{};function Bs(e){return"string"===typeof(e.getAttribute?e.getAttribute(Kt):null)}function qs(e){return _t.createElementNS("http://www.w3.org/2000/svg",e)}function Us(e){return _t.createElement(e)}function Hs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{ceFn:a=("svg"===e.tag?qs:Us)}=t;if("string"===typeof e)return _t.createTextNode(e);const s=a(e.tag);Object.keys(e.attributes||[]).forEach((function(t){s.setAttribute(t,e.attributes[t])}));return(e.children||[]).forEach((function(e){s.appendChild(Hs(e,{ceFn:a}))})),s}const Ws={replace:function(e){const t=e[0];if(t.parentNode)if(e[1].forEach((e=>{t.parentNode.insertBefore(Hs(e),t)})),null===t.getAttribute(Kt)&&ja.keepOriginalSource){let e=_t.createComment(function(e){let t=" ".concat(e.outerHTML," ");return t="".concat(t,"Font Awesome fontawesome.com "),t}(t));t.parentNode.replaceChild(e,t)}else t.remove()},nest:function(e){const t=e[0],a=e[1];if(~ka(t).indexOf(ja.replacementClass))return Ws.replace(e);const s=new RegExp("".concat(ja.cssPrefix,"-.*"));if(delete a[0].attributes.id,a[0].attributes.class){const e=a[0].attributes.class.split(" ").reduce(((e,t)=>(t===ja.replacementClass||t.match(s)?e.toSvg.push(t):e.toNode.push(t),e)),{toNode:[],toSvg:[]});a[0].attributes.class=e.toSvg.join(" "),0===e.toNode.length?t.removeAttribute("class"):t.setAttribute("class",e.toNode.join(" "))}const n=a.map((e=>Ba(e))).join("\n");t.setAttribute(Kt,""),t.innerHTML=n}};function Vs(e){e()}function Gs(e,t){const a="function"===typeof t?t:zs;if(0===e.length)a();else{let t=Vs;"async"===ja.mutateApproach&&(t=wt.requestAnimationFrame||Vs),t((()=>{const t=!0===ja.autoReplaceSvg?Ws.replace:Ws[ja.autoReplaceSvg]||Ws.replace,s=Fs("mutate");e.map(t),s(),a()}))}}let Ys=!1;function $s(){Ys=!0}function Xs(){Ys=!1}let Js=null;function Ks(e){if(!St)return;if(!ja.observeMutations)return;const{treeCallback:t=zs,nodeCallback:a=zs,pseudoElementsCallback:s=zs,observeMutationsRoot:n=_t}=e;Js=new St((e=>{if(Ys)return;const n=ls();Ca(e).forEach((e=>{if("childList"===e.type&&e.addedNodes.length>0&&!Bs(e.addedNodes[0])&&(ja.searchPseudoElements&&s(e.target),t(e.target)),"attributes"===e.type&&e.target.parentNode&&ja.searchPseudoElements&&s(e.target.parentNode),"attributes"===e.type&&Bs(e.target)&&~fa.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){const t=e.getAttribute?e.getAttribute(Zt):null,a=e.getAttribute?e.getAttribute(ea):null;return t&&a}(e.target)){const{prefix:t,iconName:a}=us(ka(e.target));e.target.setAttribute(Zt,t||n),a&&e.target.setAttribute(ea,a)}else(r=e.target)&&r.classList&&r.classList.contains&&r.classList.contains(ja.replacementClass)&&a(e.target);var r}))})),kt&&Js.observe(n,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function Qs(e){const t=e.getAttribute("data-prefix"),a=e.getAttribute("data-icon"),s=void 0!==e.innerText?e.innerText.trim():"";let n=us(ka(e));return n.prefix||(n.prefix=ls()),t&&a&&(n.prefix=t,n.iconName=a),n.iconName&&n.prefix||(n.prefix&&s.length>0&&(n.iconName=function(e,t){return(Qa[e]||{})[t]}(n.prefix,e.innerText)||rs(n.prefix,Ha(e.innerText))),!n.iconName&&ja.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(n.iconName=e.firstChild.data)),n}function Zs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0};const{iconName:a,prefix:s,rest:n}=Qs(e),r=function(e){const t=Ca(e.attributes).reduce(((e,t)=>("class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e)),{}),a=e.getAttribute("title"),s=e.getAttribute("data-fa-title-id");return ja.autoA11y&&(a?t["aria-labelledby"]="".concat(ja.replacementClass,"-title-").concat(s||Sa()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),i=bs("parseNodeAttributes",{},e);let o=t.styleParser?function(e){const t=e.getAttribute("style");let a=[];return t&&(a=t.split(";").reduce(((e,t)=>{const a=t.split(":"),s=a[0],n=a.slice(1);return s&&n.length>0&&(e[s]=n.join(":").trim()),e}),{})),a}(e):[];return gt({iconName:a,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:s,transform:_a,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:n,styles:o,attributes:r}},i)}const{styles:en}=Ra;function tn(e){const t="nest"===ja.autoReplaceSvg?Zs(e,{styleParser:!1}):Zs(e);return~t.extra.classes.indexOf(ma)?ys("generateLayersText",e,t):ys("generateSvgReplacementMutation",e,t)}function an(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!kt)return Promise.resolve();const a=_t.documentElement.classList,s=e=>a.add("".concat(ta,"-").concat(e)),n=e=>a.remove("".concat(ta,"-").concat(e)),r=ja.autoFetchSvg?[...Mt,...Wt]:Et.concat(Object.keys(en));r.includes("fa")||r.push("fa");const i=[".".concat(ma,":not([").concat(Kt,"])")].concat(r.map((e=>".".concat(e,":not([").concat(Kt,"])")))).join(", ");if(0===i.length)return Promise.resolve();let o=[];try{o=Ca(e.querySelectorAll(i))}catch(d){}if(!(o.length>0))return Promise.resolve();s("pending"),n("complete");const l=Fs("onTree"),c=o.reduce(((e,t)=>{try{const a=tn(t);a&&e.push(a)}catch(d){sa||"MissingIcon"===d.name&&console.error(d)}return e}),[]);return new Promise(((e,a)=>{Promise.all(c).then((a=>{Gs(a,(()=>{s("active"),s("complete"),n("pending"),"function"===typeof t&&t(),l(),e()}))})).catch((e=>{l(),a(e)}))}))}function sn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;tn(e).then((e=>{e&&Gs([e],t)}))}const nn=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:a=_a,symbol:s=!1,mask:n=null,maskId:r=null,title:i=null,titleId:o=null,classes:l=[],attributes:c={},styles:d={}}=t;if(!e)return;const{prefix:u,iconName:h,icon:m}=e;return ks(gt({type:"icon"},e),(()=>(vs("beforeDOMElementCreation",{iconDefinition:e,params:t}),ja.autoA11y&&(i?c["aria-labelledby"]="".concat(ja.replacementClass,"-title-").concat(o||Sa()):(c["aria-hidden"]="true",c.focusable="false")),As({icons:{main:Ls(m),mask:n?Ls(n.icon):{found:!1,width:null,height:null,icon:{}}},prefix:u,iconName:h,transform:gt(gt({},_a),a),symbol:s,title:i,maskId:r,titleId:o,extra:{attributes:c,styles:d,classes:l}}))))};var rn={mixout(){return{icon:(e=nn,function(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=(t||{}).icon?t:js(t||{});let{mask:n}=a;return n&&(n=(n||{}).icon?n:js(n||{})),e(s,gt(gt({},a),{},{mask:n}))})};var e},hooks:()=>({mutationObserverCallbacks:e=>(e.treeCallback=an,e.nodeCallback=sn,e)}),provides(e){e.i2svg=function(e){const{node:t=_t,callback:a=()=>{}}=e;return an(t,a)},e.generateSvgReplacementMutation=function(e,t){const{iconName:a,title:s,titleId:n,prefix:r,transform:i,symbol:o,mask:l,maskId:c,extra:d}=t;return new Promise(((t,u)=>{Promise.all([Os(a,r),l.iconName?Os(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((l=>{let[u,h]=l;t([e,As({icons:{main:u,mask:h},prefix:r,iconName:a,transform:i,symbol:o,maskId:c,title:s,titleId:n,extra:d,watchable:!0})])})).catch(u)}))},e.generateAbstractIcon=function(e){let{children:t,attributes:a,main:s,transform:n,styles:r}=e;const i=Pa(r);let o;return i.length>0&&(a.style=i),Ea(n)&&(o=ys("generateAbstractTransformGrouping",{main:s,transform:n,containerWidth:s.width,iconWidth:s.width})),t.push(o||s.icon),{children:t,attributes:a}}}},on={mixout:()=>({layer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{classes:a=[]}=t;return ks({type:"layer"},(()=>{vs("beforeDOMElementCreation",{assembler:e,params:t});let s=[];return e((e=>{Array.isArray(e)?e.map((e=>{s=s.concat(e.abstract)})):s=s.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(ja.cssPrefix,"-layers"),...a].join(" ")},children:s}]}))}})},ln={mixout:()=>({counter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{title:a=null,classes:s=[],attributes:n={},styles:r={}}=t;return ks({type:"counter",content:e},(()=>(vs("beforeDOMElementCreation",{content:e,params:t}),function(e){const{content:t,title:a,extra:s}=e,n=gt(gt(gt({},s.attributes),a?{title:a}:{}),{},{class:s.classes.join(" ")}),r=Pa(s.styles);r.length>0&&(n.style=r);const i=[];return i.push({tag:"span",attributes:n,children:[t]}),a&&i.push({tag:"span",attributes:{class:"sr-only"},children:[a]}),i}({content:e.toString(),title:a,extra:{attributes:n,styles:r,classes:["".concat(ja.cssPrefix,"-layers-counter"),...s]}}))))}})},cn={mixout:()=>({text(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:a=_a,title:s=null,classes:n=[],attributes:r={},styles:i={}}=t;return ks({type:"text",content:e},(()=>(vs("beforeDOMElementCreation",{content:e,params:t}),Ps({content:e,transform:gt(gt({},_a),a),title:s,extra:{attributes:r,styles:i,classes:["".concat(ja.cssPrefix,"-layers-text"),...n]}}))))}}),provides(e){e.generateLayersText=function(e,t){const{title:a,transform:s,extra:n}=t;let r=null,i=null;if(At){const t=parseInt(getComputedStyle(e).fontSize,10),a=e.getBoundingClientRect();r=a.width/t,i=a.height/t}return ja.autoA11y&&!a&&(n.attributes["aria-hidden"]="true"),Promise.resolve([e,Ps({content:e.innerHTML,width:r,height:i,transform:s,title:a,extra:n,watchable:!0})])}}};const dn=new RegExp('"',"ug"),un=[1105920,1112319],hn=gt(gt(gt(gt({},{FontAwesome:{normal:"fas",400:"fas"}}),{"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}}),{"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}}),{"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}}),mn=Object.keys(hn).reduce(((e,t)=>(e[t.toLowerCase()]=hn[t],e)),{}),pn=Object.keys(mn).reduce(((e,t)=>{const a=mn[t];return e[t]=a[900]||[...Object.entries(a)][0][1],e}),{});function fn(e,t){const a="".concat("data-fa-pseudo-element-pending").concat(t.replace(":","-"));return new Promise(((s,n)=>{if(null!==e.getAttribute(a))return s();const r=Ca(e.children).filter((e=>e.getAttribute(Qt)===t))[0],i=wt.getComputedStyle(e,t),o=i.getPropertyValue("font-family"),l=o.match(pa),c=i.getPropertyValue("font-weight"),d=i.getPropertyValue("content");if(r&&!l)return e.removeChild(r),s();if(l&&"none"!==d&&""!==d){const d=i.getPropertyValue("content");let u=function(e,t){const a=e.replace(/^['"]|['"]$/g,"").toLowerCase(),s=parseInt(t),n=isNaN(s)?"normal":s;return(mn[a]||{})[n]||pn[a]}(o,c);const{value:h,isSecondary:m}=function(e){const t=e.replace(dn,""),a=function(e,t){const a=e.length;let s,n=e.charCodeAt(t);return n>=55296&&n<=56319&&a>t+1&&(s=e.charCodeAt(t+1),s>=56320&&s<=57343)?1024*(n-55296)+s-56320+65536:n}(t,0),s=a>=un[0]&&a<=un[1],n=2===t.length&&t[0]===t[1];return{value:Ha(n?t[0]:t),isSecondary:s||n}}(d),p=l[0].startsWith("FontAwesome");let f=rs(u,h),g=f;if(p){const e=function(e){const t=es[e],a=rs("fas",e);return t||(a?{prefix:"fas",iconName:a}:null)||{prefix:null,iconName:null}}(h);e.iconName&&e.prefix&&(f=e.iconName,u=e.prefix)}if(!f||m||r&&r.getAttribute(Zt)===u&&r.getAttribute(ea)===g)s();else{e.setAttribute(a,g),r&&e.removeChild(r);const i={iconName:null,title:null,titleId:null,prefix:null,transform:_a,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},{extra:o}=i;o.attributes[Qt]=t,Os(f,u).then((n=>{const r=As(gt(gt({},i),{},{icons:{main:n,mask:{prefix:null,iconName:null,rest:[]}},prefix:u,iconName:g,extra:o,watchable:!0})),l=_t.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(l,e.firstChild):e.appendChild(l),l.outerHTML=r.map((e=>Ba(e))).join("\n"),e.removeAttribute(a),s()})).catch(n)}}else s()}))}function gn(e){return Promise.all([fn(e,"::before"),fn(e,"::after")])}function xn(e){return e.parentNode!==document.head&&!~aa.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(Qt)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function bn(e){if(kt)return new Promise(((t,a)=>{const s=Ca(e.querySelectorAll("*")).filter(xn).map(gn),n=Fs("searchPseudoElements");$s(),Promise.all(s).then((()=>{n(),Xs(),t()})).catch((()=>{n(),Xs(),a()}))}))}var vn={hooks:()=>({mutationObserverCallbacks:e=>(e.pseudoElementsCallback=bn,e)}),provides(e){e.pseudoElements2svg=function(e){const{node:t=_t}=e;ja.searchPseudoElements&&bn(t)}}};let yn=!1;var jn={mixout:()=>({dom:{unwatch(){$s(),yn=!0}}}),hooks:()=>({bootstrap(){Ks(bs("mutationObserverCallbacks",{}))},noAuto(){Js&&Js.disconnect()},watch(e){const{observeMutationsRoot:t}=e;yn?Xs():Ks(bs("mutationObserverCallbacks",{observeMutationsRoot:t}))}})};const Nn=e=>e.toLowerCase().split(" ").reduce(((e,t)=>{const a=t.toLowerCase().split("-"),s=a[0];let n=a.slice(1).join("-");if(s&&"h"===n)return e.flipX=!0,e;if(s&&"v"===n)return e.flipY=!0,e;if(n=parseFloat(n),isNaN(n))return e;switch(s){case"grow":e.size=e.size+n;break;case"shrink":e.size=e.size-n;break;case"left":e.x=e.x-n;break;case"right":e.x=e.x+n;break;case"up":e.y=e.y-n;break;case"down":e.y=e.y+n;break;case"rotate":e.rotate=e.rotate+n}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0});var wn={mixout:()=>({parse:{transform:e=>Nn(e)}}),hooks:()=>({parseNodeAttributes(e,t){const a=t.getAttribute("data-fa-transform");return a&&(e.transform=Nn(a)),e}}),provides(e){e.generateAbstractTransformGrouping=function(e){let{main:t,transform:a,containerWidth:s,iconWidth:n}=e;const r={transform:"translate(".concat(s/2," 256)")},i="translate(".concat(32*a.x,", ").concat(32*a.y,") "),o="scale(".concat(a.size/16*(a.flipX?-1:1),", ").concat(a.size/16*(a.flipY?-1:1),") "),l="rotate(".concat(a.rotate," 0 0)"),c={outer:r,inner:{transform:"".concat(i," ").concat(o," ").concat(l)},path:{transform:"translate(".concat(n/2*-1," -256)")}};return{tag:"g",attributes:gt({},c.outer),children:[{tag:"g",attributes:gt({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:gt(gt({},t.icon.attributes),c.path)}]}]}}}};const _n={x:0,y:0,width:"100%",height:"100%"};function Sn(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var Cn={hooks:()=>({parseNodeAttributes(e,t){const a=t.getAttribute("data-fa-mask"),s=a?us(a.split(" ").map((e=>e.trim()))):{prefix:null,iconName:null,rest:[]};return s.prefix||(s.prefix=ls()),e.mask=s,e.maskId=t.getAttribute("data-fa-mask-id"),e}}),provides(e){e.generateAbstractMask=function(e){let{children:t,attributes:a,main:s,mask:n,maskId:r,transform:i}=e;const{width:o,icon:l}=s,{width:c,icon:d}=n,u=function(e){let{transform:t,containerWidth:a,iconWidth:s}=e;const n={transform:"translate(".concat(a/2," 256)")},r="translate(".concat(32*t.x,", ").concat(32*t.y,") "),i="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),o="rotate(".concat(t.rotate," 0 0)");return{outer:n,inner:{transform:"".concat(r," ").concat(i," ").concat(o)},path:{transform:"translate(".concat(s/2*-1," -256)")}}}({transform:i,containerWidth:c,iconWidth:o}),h={tag:"rect",attributes:gt(gt({},_n),{},{fill:"white"})},m=l.children?{children:l.children.map(Sn)}:{},p={tag:"g",attributes:gt({},u.inner),children:[Sn(gt({tag:l.tag,attributes:gt(gt({},l.attributes),u.path)},m))]},f={tag:"g",attributes:gt({},u.outer),children:[p]},g="mask-".concat(r||Sa()),x="clip-".concat(r||Sa()),b={tag:"mask",attributes:gt(gt({},_n),{},{id:g,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[h,f]},v={tag:"defs",children:[{tag:"clipPath",attributes:{id:x},children:(y=d,"g"===y.tag?y.children:[y])},b]};var y;return t.push(v,{tag:"rect",attributes:gt({fill:"currentColor","clip-path":"url(#".concat(x,")"),mask:"url(#".concat(g,")")},_n)}),{children:t,attributes:a}}}},kn={provides(e){let t=!1;wt.matchMedia&&(t=wt.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){const e=[],a={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:gt(gt({},a),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const n=gt(gt({},s),{},{attributeName:"opacity"}),r={tag:"circle",attributes:gt(gt({},a),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||r.children.push({tag:"animate",attributes:gt(gt({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:gt(gt({},n),{},{values:"1;0;1;1;0;1;"})}),e.push(r),e.push({tag:"path",attributes:gt(gt({},a),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:gt(gt({},n),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:gt(gt({},a),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:gt(gt({},n),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){let{mixoutsTo:a}=t;ps=e,fs={},Object.keys(gs).forEach((e=>{-1===xs.indexOf(e)&&delete gs[e]})),ps.forEach((e=>{const t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((e=>{"function"===typeof t[e]&&(a[e]=t[e]),"object"===typeof t[e]&&Object.keys(t[e]).forEach((s=>{a[e]||(a[e]={}),a[e][s]=t[e][s]}))})),e.hooks){const t=e.hooks();Object.keys(t).forEach((e=>{fs[e]||(fs[e]=[]),fs[e].push(t[e])}))}e.provides&&e.provides(gs)}))}([Ta,rn,on,ln,cn,vn,jn,wn,Cn,kn,{hooks:()=>({parseNodeAttributes(e,t){const a=t.getAttribute("data-fa-symbol"),s=null!==a&&(""===a||a);return e.symbol=s,e}})}],{mixoutsTo:Ss});const An=Ss.parse,Pn=Ss.icon;var En=a(5173),Ln=a.n(En);function Dn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function On(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(a),!0).forEach((function(t){Mn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Dn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Tn(e){return Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(e)}function Mn(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Rn(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a,s,n={},r=Object.keys(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function In(e){return function(e){if(Array.isArray(e))return Fn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Fn(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Fn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=e[a];return s}function zn(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var Bn=["style"];var qn=!1;try{qn=!0}catch(If){}function Un(e){return e&&"object"===Tn(e)&&e.prefix&&e.iconName&&e.icon?e:An.icon?An.icon(e):null===e?null:e&&"object"===Tn(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function Hn(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?Mn({},e,t):{}}var Wn={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Vn=s.forwardRef((function(e,t){var a=On(On({},Wn),e),s=a.icon,n=a.mask,r=a.symbol,i=a.className,o=a.title,l=a.titleId,c=a.maskId,d=Un(s),u=Hn("classes",[].concat(In(function(e){var t,a=e.beat,s=e.fade,n=e.beatFade,r=e.bounce,i=e.shake,o=e.flash,l=e.spin,c=e.spinPulse,d=e.spinReverse,u=e.pulse,h=e.fixedWidth,m=e.inverse,p=e.border,f=e.listItem,g=e.flip,x=e.size,b=e.rotation,v=e.pull,y=(Mn(t={"fa-beat":a,"fa-fade":s,"fa-beat-fade":n,"fa-bounce":r,"fa-shake":i,"fa-flash":o,"fa-spin":l,"fa-spin-reverse":d,"fa-spin-pulse":c,"fa-pulse":u,"fa-fw":h,"fa-inverse":m,"fa-border":p,"fa-li":f,"fa-flip":!0===g,"fa-flip-horizontal":"horizontal"===g||"both"===g,"fa-flip-vertical":"vertical"===g||"both"===g},"fa-".concat(x),"undefined"!==typeof x&&null!==x),Mn(t,"fa-rotate-".concat(b),"undefined"!==typeof b&&null!==b&&0!==b),Mn(t,"fa-pull-".concat(v),"undefined"!==typeof v&&null!==v),Mn(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(y).map((function(e){return y[e]?e:null})).filter((function(e){return e}))}(a)),In((i||"").split(" ")))),h=Hn("transform","string"===typeof a.transform?An.transform(a.transform):a.transform),m=Hn("mask",Un(n)),p=Pn(d,On(On(On(On({},u),h),m),{},{symbol:r,title:o,titleId:l,maskId:c}));if(!p)return function(){var e;!qn&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",d),null;var f=p.abstract,g={ref:t};return Object.keys(a).forEach((function(e){Wn.hasOwnProperty(e)||(g[e]=a[e])})),Gn(f[0],g)}));Vn.displayName="FontAwesomeIcon",Vn.propTypes={beat:Ln().bool,border:Ln().bool,beatFade:Ln().bool,bounce:Ln().bool,className:Ln().string,fade:Ln().bool,flash:Ln().bool,mask:Ln().oneOfType([Ln().object,Ln().array,Ln().string]),maskId:Ln().string,fixedWidth:Ln().bool,inverse:Ln().bool,flip:Ln().oneOf([!0,!1,"horizontal","vertical","both"]),icon:Ln().oneOfType([Ln().object,Ln().array,Ln().string]),listItem:Ln().bool,pull:Ln().oneOf(["right","left"]),pulse:Ln().bool,rotation:Ln().oneOf([0,90,180,270]),shake:Ln().bool,size:Ln().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:Ln().bool,spinPulse:Ln().bool,spinReverse:Ln().bool,symbol:Ln().oneOfType([Ln().bool,Ln().string]),title:Ln().string,titleId:Ln().string,transform:Ln().oneOfType([Ln().string,Ln().object]),swapOpacity:Ln().bool};var Gn=function e(t,a){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof a)return a;var n=(a.children||[]).map((function(a){return e(t,a)})),r=Object.keys(a.attributes||{}).reduce((function(e,t){var s=a.attributes[t];switch(t){case"class":e.attrs.className=s,delete a.attributes.class;break;case"style":e.attrs.style=function(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var a,s=t.indexOf(":"),n=zn(t.slice(0,s)),r=t.slice(s+1).trim();return n.startsWith("webkit")?e[(a=n,a.charAt(0).toUpperCase()+a.slice(1))]=r:e[n]=r,e}),{})}(s);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=s:e.attrs[zn(t)]=s}return e}),{attrs:{}}),i=s.style,o=void 0===i?{}:i,l=Rn(s,Bn);return r.attrs.style=On(On({},r.attrs.style),o),t.apply(void 0,[a.tag,On(On({},r.attrs),l)].concat(In(n)))}.bind(null,s.createElement);const Yn={prefix:"fas",iconName:"trash-can",icon:[448,512,[61460,"trash-alt"],"f2ed","M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3zM32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"]},$n=Yn,Xn={prefix:"fas",iconName:"stethoscope",icon:[576,512,[129658],"f0f1","M142.4 21.9c5.6 16.8-3.5 34.9-20.2 40.5L96 71.1 96 192c0 53 43 96 96 96s96-43 96-96l0-120.9-26.1-8.7c-16.8-5.6-25.8-23.7-20.2-40.5s23.7-25.8 40.5-20.2l26.1 8.7C334.4 19.1 352 43.5 352 71.1L352 192c0 77.2-54.6 141.6-127.3 156.7C231 404.6 278.4 448 336 448c61.9 0 112-50.1 112-112l0-70.7c-28.3-12.3-48-40.5-48-73.3c0-44.2 35.8-80 80-80s80 35.8 80 80c0 32.8-19.7 61-48 73.3l0 70.7c0 97.2-78.8 176-176 176c-92.9 0-168.9-71.9-175.5-163.1C87.2 334.2 32 269.6 32 192L32 71.1c0-27.5 17.6-52 43.8-60.7l26.1-8.7c16.8-5.6 34.9 3.5 40.5 20.2zM480 224a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"]},Jn={prefix:"fas",iconName:"info",icon:[192,512,[],"f129","M48 80a48 48 0 1 1 96 0A48 48 0 1 1 48 80zM0 224c0-17.7 14.3-32 32-32l64 0c17.7 0 32 14.3 32 32l0 224 32 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 512c-17.7 0-32-14.3-32-32s14.3-32 32-32l32 0 0-192-32 0c-17.7 0-32-14.3-32-32z"]},Kn={prefix:"fas",iconName:"file-lines",icon:[384,512,[128441,128462,61686,"file-alt","file-text"],"f15c","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM112 256l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},Qn=Kn,Zn={prefix:"fas",iconName:"calendar-days",icon:[448,512,["calendar-alt"],"f073","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm64 80l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm128 0l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM64 400l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zm112 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16z"]},er=Zn,tr={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},ar=tr,sr={prefix:"fas",iconName:"pencil",icon:[512,512,[9999,61504,"pencil-alt"],"f303","M410.3 231l11.3-11.3-33.9-33.9-62.1-62.1L291.7 89.8l-11.3 11.3-22.6 22.6L58.6 322.9c-10.4 10.4-18 23.3-22.2 37.4L1 480.7c-2.5 8.4-.2 17.5 6.1 23.7s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L387.7 253.7 410.3 231zM160 399.4l-9.1 22.7c-4 3.1-8.5 5.4-13.3 6.9L59.4 452l23-78.1c1.4-4.9 3.8-9.4 6.9-13.3l22.7-9.1 0 32c0 8.8 7.2 16 16 16l32 0zM362.7 18.7L348.3 33.2 325.7 55.8 314.3 67.1l33.9 33.9 62.1 62.1 33.9 33.9 11.3-11.3 22.6-22.6 14.5-14.5c25-25 25-65.5 0-90.5L453.3 18.7c-25-25-65.5-25-90.5 0zm-47.4 168l-144 144c-6.2 6.2-16.4 6.2-22.6 0s-6.2-16.4 0-22.6l144-144c6.2-6.2 16.4-6.2 22.6 0s6.2 16.4 0 22.6z"]},nr=sr,rr={prefix:"fas",iconName:"comments",icon:[640,512,[128490,61670],"f086","M208 352c114.9 0 208-78.8 208-176S322.9 0 208 0S0 78.8 0 176c0 38.6 14.7 74.3 39.6 103.4c-3.5 9.4-8.7 17.7-14.2 24.7c-4.8 6.2-9.7 11-13.3 14.3c-1.8 1.6-3.3 2.9-4.3 3.7c-.5 .4-.9 .7-1.1 .8l-.2 .2s0 0 0 0s0 0 0 0C1 327.2-1.4 334.4 .8 340.9S9.1 352 16 352c21.8 0 43.8-5.6 62.1-12.5c9.2-3.5 17.8-7.4 25.2-11.4C134.1 343.3 169.8 352 208 352zM448 176c0 112.3-99.1 196.9-216.5 207C255.8 457.4 336.4 512 432 512c38.2 0 73.9-8.7 104.7-23.9c7.5 4 16 7.9 25.2 11.4c18.3 6.9 40.3 12.5 62.1 12.5c6.9 0 13.1-4.5 15.2-11.1c2.1-6.6-.2-13.8-5.8-17.9c0 0 0 0 0 0s0 0 0 0l-.2-.2c-.2-.2-.6-.4-1.1-.8c-1-.8-2.5-2-4.3-3.7c-3.6-3.3-8.5-8.1-13.3-14.3c-5.5-7-10.7-15.4-14.2-24.7c24.9-29 39.6-64.7 39.6-103.4c0-92.8-84.9-168.9-192.6-175.5c.4 5.1 .6 10.3 .6 15.5z"]},ir={prefix:"fas",iconName:"clipboard-list",icon:[384,512,[],"f46d","M192 0c-41.8 0-77.4 26.7-90.5 64L64 64C28.7 64 0 92.7 0 128L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64l-37.5 0C269.4 26.7 233.8 0 192 0zm0 64a32 32 0 1 1 0 64 32 32 0 1 1 0-64zM72 272a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm104-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zM72 368a24 24 0 1 1 48 0 24 24 0 1 1 -48 0zm88 0c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16z"]},or={prefix:"fas",iconName:"box-archive",icon:[512,512,["archive"],"f187","M32 32l448 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96L0 64C0 46.3 14.3 32 32 32zm0 128l448 0 0 256c0 35.3-28.7 64-64 64L96 480c-35.3 0-64-28.7-64-64l0-256zm128 80c0 8.8 7.2 16 16 16l160 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-160 0c-8.8 0-16 7.2-16 16z"]},lr=or,cr={prefix:"fas",iconName:"gavel",icon:[512,512,["legal"],"f0e3","M318.6 9.4c-12.5-12.5-32.8-12.5-45.3 0l-120 120c-12.5 12.5-12.5 32.8 0 45.3l16 16c12.5 12.5 32.8 12.5 45.3 0l4-4L325.4 293.4l-4 4c-12.5 12.5-12.5 32.8 0 45.3l16 16c12.5 12.5 32.8 12.5 45.3 0l120-120c12.5-12.5 12.5-32.8 0-45.3l-16-16c-12.5-12.5-32.8-12.5-45.3 0l-4 4L330.6 74.6l4-4c12.5-12.5 12.5-32.8 0-45.3l-16-16zm-152 288c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l48 48c12.5 12.5 32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-1.4-1.4L272 285.3 226.7 240 168 298.7l-1.4-1.4z"]},dr={prefix:"fas",iconName:"table",icon:[512,512,[],"f0ce","M64 256l0-96 160 0 0 96L64 256zm0 64l160 0 0 96L64 416l0-96zm224 96l0-96 160 0 0 96-160 0zM448 256l-160 0 0-96 160 0 0 96zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32z"]},ur={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"]},hr={prefix:"fas",iconName:"lightbulb",icon:[384,512,[128161],"f0eb","M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z"]},mr={prefix:"fas",iconName:"circle-exclamation",icon:[512,512,["exclamation-circle"],"f06a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24l0 112c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-112c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},pr=mr,fr={prefix:"fas",iconName:"square-check",icon:[448,512,[9745,9989,61510,"check-square"],"f14a","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},gr=fr,xr={prefix:"fas",iconName:"list",icon:[512,512,["list-squares"],"f03a","M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"]},br={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"]},vr=br,yr={prefix:"fas",iconName:"users",icon:[640,512,[],"f0c0","M144 0a80 80 0 1 1 0 160A80 80 0 1 1 144 0zM512 0a80 80 0 1 1 0 160A80 80 0 1 1 512 0zM0 298.7C0 239.8 47.8 192 106.7 192l42.7 0c15.9 0 31 3.5 44.6 9.7c-1.3 7.2-1.9 14.7-1.9 22.3c0 38.2 16.8 72.5 43.3 96c-.2 0-.4 0-.7 0L21.3 320C9.6 320 0 310.4 0 298.7zM405.3 320c-.2 0-.4 0-.7 0c26.6-23.5 43.3-57.8 43.3-96c0-7.6-.7-15-1.9-22.3c13.6-6.3 28.7-9.7 44.6-9.7l42.7 0C592.2 192 640 239.8 640 298.7c0 11.8-9.6 21.3-21.3 21.3l-213.3 0zM224 224a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zM128 485.3C128 411.7 187.7 352 261.3 352l117.3 0C452.3 352 512 411.7 512 485.3c0 14.7-11.9 26.7-26.7 26.7l-330.7 0c-14.7 0-26.7-11.9-26.7-26.7z"]},jr={prefix:"fas",iconName:"eye-slash",icon:[640,512,[],"f070","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"]},Nr={prefix:"fas",iconName:"chevron-up",icon:[512,512,[],"f077","M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z"]},wr={prefix:"fas",iconName:"notes-medical",icon:[512,512,[],"f481","M96 352L96 96c0-35.3 28.7-64 64-64l256 0c35.3 0 64 28.7 64 64l0 197.5c0 17-6.7 33.3-18.7 45.3l-58.5 58.5c-12 12-28.3 18.7-45.3 18.7L160 416c-35.3 0-64-28.7-64-64zM272 128c-8.8 0-16 7.2-16 16l0 48-48 0c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l48 0 0 48c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-48 48 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-48 0 0-48c0-8.8-7.2-16-16-16l-32 0zm24 336c13.3 0 24 10.7 24 24s-10.7 24-24 24l-160 0C60.9 512 0 451.1 0 376L0 152c0-13.3 10.7-24 24-24s24 10.7 24 24l0 224c0 48.6 39.4 88 88 88l160 0z"]},_r={prefix:"fas",iconName:"bullseye",icon:[512,512,[],"f140","M448 256A192 192 0 1 0 64 256a192 192 0 1 0 384 0zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 80a80 80 0 1 0 0-160 80 80 0 1 0 0 160zm0-224a144 144 0 1 1 0 288 144 144 0 1 1 0-288zM224 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z"]},Sr={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},Cr={prefix:"fas",iconName:"key",icon:[512,512,[128273],"f084","M336 352c97.2 0 176-78.8 176-176S433.2 0 336 0S160 78.8 160 176c0 18.7 2.9 36.8 8.3 53.7L7 391c-4.5 4.5-7 10.6-7 17l0 80c0 13.3 10.7 24 24 24l80 0c13.3 0 24-10.7 24-24l0-40 40 0c13.3 0 24-10.7 24-24l0-40 40 0c6.4 0 12.5-2.5 17-7l33.3-33.3c16.9 5.4 35 8.3 53.7 8.3zM376 96a40 40 0 1 1 0 80 40 40 0 1 1 0-80z"]},kr={prefix:"fas",iconName:"globe",icon:[512,512,[127760],"f0ac","M352 256c0 22.2-1.2 43.6-3.3 64l-185.3 0c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64l185.3 0c2.2 20.4 3.3 41.8 3.3 64zm28.8-64l123.1 0c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64l-123.1 0c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32l-116.7 0c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0l-176.6 0c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 20.9 58.2 27 94.7zm-209 0L18.6 160C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192l123.1 0c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64L8.1 320C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6l176.6 0c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352l116.7 0zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6l116.7 0z"]},Ar={prefix:"fas",iconName:"money-bill-wave",icon:[576,512,[],"f53a","M0 112.5L0 422.3c0 18 10.1 35 27 41.3c87 32.5 174 10.3 261-11.9c79.8-20.3 159.6-40.7 239.3-18.9c23 6.3 48.7-9.5 48.7-33.4l0-309.9c0-18-10.1-35-27-41.3C462 15.9 375 38.1 288 60.3C208.2 80.6 128.4 100.9 48.7 79.1C25.6 72.8 0 88.6 0 112.5zM288 352c-44.2 0-80-43-80-96s35.8-96 80-96s80 43 80 96s-35.8 96-80 96zM64 352c35.3 0 64 28.7 64 64l-64 0 0-64zm64-208c0 35.3-28.7 64-64 64l0-64 64 0zM512 304l0 64-64 0c0-35.3 28.7-64 64-64zM448 96l64 0 0 64c-35.3 0-64-28.7-64-64z"]},Pr={prefix:"fas",iconName:"ban",icon:[512,512,[128683,"cancel"],"f05e","M367.2 412.5L99.5 144.8C77.1 176.1 64 214.5 64 256c0 106 86 192 192 192c41.5 0 79.9-13.1 111.2-35.5zm45.3-45.3C434.9 335.9 448 297.5 448 256c0-106-86-192-192-192c-41.5 0-79.9 13.1-111.2 35.5L412.5 367.2zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"]},Er={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},Lr={prefix:"fas",iconName:"box",icon:[448,512,[128230],"f466","M50.7 58.5L0 160l208 0 0-128L93.7 32C75.5 32 58.9 42.3 50.7 58.5zM240 160l208 0L397.3 58.5C389.1 42.3 372.5 32 354.3 32L240 32l0 128zm208 32L0 192 0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-224z"]},Dr={prefix:"fas",iconName:"heart-pulse",icon:[512,512,["heartbeat"],"f21e","M228.3 469.1L47.6 300.4c-4.2-3.9-8.2-8.1-11.9-12.4l87 0c22.6 0 43-13.6 51.7-34.5l10.5-25.2 49.3 109.5c3.8 8.5 12.1 14 21.4 14.1s17.8-5 22-13.3L320 253.7l1.7 3.4c9.5 19 28.9 31 50.1 31l104.5 0c-3.7 4.3-7.7 8.5-11.9 12.4L283.7 469.1c-7.5 7-17.4 10.9-27.7 10.9s-20.2-3.9-27.7-10.9zM503.7 240l-132 0c-3 0-5.8-1.7-7.2-4.4l-23.2-46.3c-4.1-8.1-12.4-13.3-21.5-13.3s-17.4 5.1-21.5 13.3l-41.4 82.8L205.9 158.2c-3.9-8.7-12.7-14.3-22.2-14.1s-18.1 5.9-21.8 14.8l-31.8 76.3c-1.2 3-4.2 4.9-7.4 4.9L16 240c-2.6 0-5 .4-7.3 1.1C3 225.2 0 208.2 0 190.9l0-5.8c0-69.9 50.5-129.5 119.4-141C165 36.5 211.4 51.4 244 84l12 12 12-12c32.6-32.6 79-47.5 124.6-39.9C461.5 55.6 512 115.2 512 185.1l0 5.8c0 16.9-2.8 33.5-8.3 49.1z"]},Or=Dr,Tr={prefix:"fas",iconName:"user-group",icon:[640,512,[128101,"user-friends"],"f500","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3zM609.3 512l-137.8 0c5.4-9.4 8.6-20.3 8.6-32l0-8c0-60.7-27.1-115.2-69.8-151.8c2.4-.1 4.7-.2 7.1-.2l61.4 0C567.8 320 640 392.2 640 481.3c0 17-13.8 30.7-30.7 30.7zM432 256c-31 0-59-12.6-79.3-32.9C372.4 196.5 384 163.6 384 128c0-26.8-6.6-52.1-18.3-74.3C384.3 40.1 407.2 32 432 32c61.9 0 112 50.1 112 112s-50.1 112-112 112z"]},Mr=Tr,Rr={prefix:"fas",iconName:"folder-open",icon:[576,512,[128194,128449,61717],"f07c","M88.7 223.8L0 375.8 0 96C0 60.7 28.7 32 64 32l117.5 0c17 0 33.3 6.7 45.3 18.7l26.5 26.5c12 12 28.3 18.7 45.3 18.7L416 96c35.3 0 64 28.7 64 64l0 32-336 0c-22.8 0-43.8 12.1-55.3 31.8zm27.6 16.1C122.1 230 132.6 224 144 224l400 0c11.5 0 22 6.1 27.7 16.1s5.7 22.2-.1 32.1l-112 192C453.9 474 443.4 480 432 480L32 480c-11.5 0-22-6.1-27.7-16.1s-5.7-22.2 .1-32.1l112-192z"]},Ir={prefix:"fas",iconName:"signature",icon:[640,512,[],"f5b7","M192 128c0-17.7 14.3-32 32-32s32 14.3 32 32l0 7.8c0 27.7-2.4 55.3-7.1 82.5l-84.4 25.3c-40.6 12.2-68.4 49.6-68.4 92l0 71.9c0 40 32.5 72.5 72.5 72.5c26 0 50-13.9 62.9-36.5l13.9-24.3c26.8-47 46.5-97.7 58.4-150.5l94.4-28.3-12.5 37.5c-3.3 9.8-1.6 20.5 4.4 28.8s15.7 13.3 26 13.3l128 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-83.6 0 18-53.9c3.8-11.3 .9-23.8-7.4-32.4s-20.7-11.8-32.2-8.4L316.4 198.1c2.4-20.7 3.6-41.4 3.6-62.3l0-7.8c0-53-43-96-96-96s-96 43-96 96l0 32c0 17.7 14.3 32 32 32s32-14.3 32-32l0-32zm-9.2 177l49-14.7c-10.4 33.8-24.5 66.4-42.1 97.2l-13.9 24.3c-1.5 2.6-4.3 4.3-7.4 4.3c-4.7 0-8.5-3.8-8.5-8.5l0-71.9c0-14.1 9.3-26.6 22.8-30.7zM24 368c-13.3 0-24 10.7-24 24s10.7 24 24 24l40.3 0c-.2-2.8-.3-5.6-.3-8.5L64 368l-40 0zm592 48c13.3 0 24-10.7 24-24s-10.7-24-24-24l-310.1 0c-6.7 16.3-14.2 32.3-22.3 48L616 416z"]},Fr={prefix:"fas",iconName:"bold",icon:[384,512,[],"f032","M0 64C0 46.3 14.3 32 32 32l48 0 16 0 128 0c70.7 0 128 57.3 128 128c0 31.3-11.3 60.1-30 82.3c37.1 22.4 62 63.1 62 109.7c0 70.7-57.3 128-128 128L96 480l-16 0-48 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l16 0 0-160L48 96 32 96C14.3 96 0 81.7 0 64zM224 224c35.3 0 64-28.7 64-64s-28.7-64-64-64L112 96l0 128 112 0zM112 288l0 128 144 0c35.3 0 64-28.7 64-64s-28.7-64-64-64l-32 0-112 0z"]},zr={prefix:"fas",iconName:"chart-bar",icon:[512,512,["bar-chart"],"f080","M32 32c17.7 0 32 14.3 32 32l0 336c0 8.8 7.2 16 16 16l400 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L80 480c-44.2 0-80-35.8-80-80L0 64C0 46.3 14.3 32 32 32zm96 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-192 0c-17.7 0-32-14.3-32-32zm32 64l128 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 96l256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},Br={prefix:"fas",iconName:"handshake",icon:[640,512,[],"f2b5","M323.4 85.2l-96.8 78.4c-16.1 13-19.2 36.4-7 53.1c12.9 17.8 38 21.3 55.3 7.8l99.3-77.2c7-5.4 17-4.2 22.5 2.8s4.2 17-2.8 22.5l-20.9 16.2L512 316.8 512 128l-.7 0-3.9-2.5L434.8 79c-15.3-9.8-33.2-15-51.4-15c-21.8 0-43 7.5-60 21.2zm22.8 124.4l-51.7 40.2C263 274.4 217.3 268 193.7 235.6c-22.2-30.5-16.6-73.1 12.7-96.8l83.2-67.3c-11.6-4.9-24.1-7.4-36.8-7.4C234 64 215.7 69.6 200 80l-72 48 0 224 28.2 0 91.4 83.4c19.6 17.9 49.9 16.5 67.8-3.1c5.5-6.1 9.2-13.2 11.1-20.6l17 15.6c19.5 17.9 49.9 16.6 67.8-2.9c4.5-4.9 7.8-10.6 9.9-16.5c19.4 13 45.8 10.3 62.1-7.5c17.9-19.5 16.6-49.9-2.9-67.8l-134.2-123zM16 128c-8.8 0-16 7.2-16 16L0 352c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-224-80 0zM48 320a16 16 0 1 1 0 32 16 16 0 1 1 0-32zM544 128l0 224c0 17.7 14.3 32 32 32l32 0c17.7 0 32-14.3 32-32l0-208c0-8.8-7.2-16-16-16l-80 0zm32 208a16 16 0 1 1 32 0 16 16 0 1 1 -32 0z"]},qr={prefix:"fas",iconName:"circle-check",icon:[512,512,[61533,"check-circle"],"f058","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM369 209L241 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L335 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"]},Ur=qr,Hr={prefix:"fas",iconName:"user-tie",icon:[448,512,[],"f508","M96 128a128 128 0 1 0 256 0A128 128 0 1 0 96 128zm94.5 200.2l18.6 31L175.8 483.1l-36-146.9c-2-8.1-9.8-13.4-17.9-11.3C51.9 342.4 0 405.8 0 481.3c0 17 13.8 30.7 30.7 30.7l131.7 0c0 0 0 0 .1 0l5.5 0 112 0 5.5 0c0 0 0 0 .1 0l131.7 0c17 0 30.7-13.8 30.7-30.7c0-75.5-51.9-138.9-121.9-156.4c-8.1-2-15.9 3.3-17.9 11.3l-36 146.9L238.9 359.2l18.6-31c6.4-10.7-1.3-24.2-13.7-24.2L224 304l-19.7 0c-12.4 0-20.1 13.6-13.7 24.2z"]},Wr={prefix:"fas",iconName:"scroll",icon:[576,512,[128220],"f70e","M0 80l0 48c0 17.7 14.3 32 32 32l16 0 48 0 0-80c0-26.5-21.5-48-48-48S0 53.5 0 80zM112 32c10 13.4 16 30 16 48l0 304c0 35.3 28.7 64 64 64s64-28.7 64-64l0-5.3c0-32.4 26.3-58.7 58.7-58.7L480 320l0-192c0-53-43-96-96-96L112 32zM464 480c61.9 0 112-50.1 112-112c0-8.8-7.2-16-16-16l-245.3 0c-14.7 0-26.7 11.9-26.7 26.7l0 5.3c0 53-43 96-96 96l176 0 96 0z"]},Vr={prefix:"fas",iconName:"pause",icon:[320,512,[9208],"f04c","M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z"]},Gr={prefix:"fas",iconName:"arrows-rotate",icon:[512,512,[128472,"refresh","sync"],"f021","M105.1 202.6c7.7-21.8 20.2-42.3 37.8-59.8c62.5-62.5 163.8-62.5 226.3 0L386.3 160 352 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l111.5 0c0 0 0 0 0 0l.4 0c17.7 0 32-14.3 32-32l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 35.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0C73.2 122 55.6 150.7 44.8 181.4c-5.9 16.7 2.9 34.9 19.5 40.8s34.9-2.9 40.8-19.5zM39 289.3c-5 1.5-9.8 4.2-13.7 8.2c-4 4-6.7 8.8-8.1 14c-.3 1.2-.6 2.5-.8 3.8c-.3 1.7-.4 3.4-.4 5.1L16 432c0 17.7 14.3 32 32 32s32-14.3 32-32l0-35.1 17.6 17.5c0 0 0 0 0 0c87.5 87.4 229.3 87.4 316.7 0c24.4-24.4 42.1-53.1 52.9-83.8c5.9-16.7-2.9-34.9-19.5-40.8s-34.9 2.9-40.8 19.5c-7.7 21.8-20.2 42.3-37.8 59.8c-62.5 62.5-163.8 62.5-226.3 0l-.1-.1L125.6 352l34.4 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L48.4 288c-1.6 0-3.2 .1-4.8 .3s-3.1 .5-4.6 1z"]},Yr=Gr,$r=Gr,Xr={prefix:"fas",iconName:"shield-halved",icon:[512,512,["shield-alt"],"f3ed","M256 0c4.6 0 9.2 1 13.4 2.9L457.7 82.8c22 9.3 38.4 31 38.3 57.2c-.5 99.2-41.3 280.7-213.6 363.2c-16.7 8-36.1 8-52.8 0C57.3 420.7 16.5 239.2 16 140c-.1-26.2 16.3-47.9 38.3-57.2L242.7 2.9C246.8 1 251.4 0 256 0zm0 66.8l0 378.1C394 378 431.1 230.1 432 141.4L256 66.8s0 0 0 0z"]},Jr=Xr,Kr={prefix:"fas",iconName:"layer-group",icon:[576,512,[],"f5fd","M264.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 149.8C37.4 145.8 32 137.3 32 128s5.4-17.9 13.9-21.8L264.5 5.2zM476.9 209.6l53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 277.8C37.4 273.8 32 265.3 32 256s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0l152-70.2zm-152 198.2l152-70.2 53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 405.8C37.4 401.8 32 393.3 32 384s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0z"]},Qr={prefix:"fas",iconName:"square",icon:[448,512,[9632,9723,9724,61590],"f0c8","M0 96C0 60.7 28.7 32 64 32H384c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96z"]},Zr={prefix:"fas",iconName:"italic",icon:[384,512,[],"f033","M128 64c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-58.7 0L160 416l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 480c-17.7 0-32-14.3-32-32s14.3-32 32-32l58.7 0L224 96l-64 0c-17.7 0-32-14.3-32-32z"]},ei={prefix:"fas",iconName:"list-ol",icon:[512,512,["list-1-2","list-numeric"],"f0cb","M24 56c0-13.3 10.7-24 24-24l32 0c13.3 0 24 10.7 24 24l0 120 16 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l16 0 0-96-8 0C34.7 80 24 69.3 24 56zM86.7 341.2c-6.5-7.4-18.3-6.9-24 1.2L51.5 357.9c-7.7 10.8-22.7 13.3-33.5 5.6s-13.3-22.7-5.6-33.5l11.1-15.6c23.7-33.2 72.3-35.6 99.2-4.9c21.3 24.4 20.8 60.9-1.1 84.7L86.8 432l33.2 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-88 0c-9.5 0-18.2-5.6-22-14.4s-2.1-18.9 4.3-25.9l72-78c5.3-5.8 5.4-14.6 .3-20.5zM224 64l256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 160l256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32s14.3-32 32-32zm0 160l256 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-256 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z"]},ti={prefix:"fas",iconName:"filter",icon:[512,512,[],"f0b0","M3.9 54.9C10.5 40.9 24.5 32 40 32l432 0c15.5 0 29.5 8.9 36.1 22.9s4.6 30.5-5.2 42.5L320 320.9 320 448c0 12.1-6.8 23.2-17.7 28.6s-23.8 4.3-33.5-3l-64-48c-8.1-6-12.8-15.5-12.8-25.6l0-79.1L9 97.3C-.7 85.4-2.8 68.8 3.9 54.9z"]},ai={prefix:"fas",iconName:"chart-pie",icon:[576,512,["pie-chart"],"f200","M304 240l0-223.4c0-9 7-16.6 16-16.6C443.7 0 544 100.3 544 224c0 9-7.6 16-16.6 16L304 240zM32 272C32 150.7 122.1 50.3 239 34.3c9.2-1.3 17 6.1 17 15.4L256 288 412.5 444.5c6.7 6.7 6.2 17.7-1.5 23.1C371.8 495.6 323.8 512 272 512C139.5 512 32 404.6 32 272zm526.4 16c9.3 0 16.6 7.8 15.4 17c-7.7 55.9-34.6 105.6-73.9 142.3c-6 5.6-15.4 5.2-21.2-.7L320 288l238.4 0z"]},si={prefix:"fas",iconName:"file-contract",icon:[384,512,[],"f56c","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM80 64l64 0c8.8 0 16 7.2 16 16s-7.2 16-16 16L80 96c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l64 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-64 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm54.2 253.8c-6.1 20.3-24.8 34.2-46 34.2L80 416c-8.8 0-16-7.2-16-16s7.2-16 16-16l8.2 0c7.1 0 13.3-4.6 15.3-11.4l14.9-49.5c3.4-11.3 13.8-19.1 25.6-19.1s22.2 7.7 25.6 19.1l11.6 38.6c7.4-6.2 16.8-9.7 26.8-9.7c15.9 0 30.4 9 37.5 23.2l4.4 8.8 54.1 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-64 0c-6.1 0-11.6-3.4-14.3-8.8l-8.8-17.7c-1.7-3.4-5.1-5.5-8.8-5.5s-7.2 2.1-8.8 5.5l-8.8 17.7c-2.9 5.9-9.2 9.4-15.7 8.8s-12.1-5.1-13.9-11.3L144 349l-9.8 32.8z"]},ni={prefix:"fas",iconName:"chart-line",icon:[512,512,["line-chart"],"f201","M64 64c0-17.7-14.3-32-32-32S0 46.3 0 64L0 400c0 44.2 35.8 80 80 80l400 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 416c-8.8 0-16-7.2-16-16L64 64zm406.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L320 210.7l-57.4-57.4c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L240 221.3l57.4 57.4c12.5 12.5 32.8 12.5 45.3 0l128-128z"]},ri={prefix:"fas",iconName:"arrow-right",icon:[448,512,[8594],"f061","M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z"]},ii={prefix:"fas",iconName:"heart",icon:[512,512,[128153,128154,128155,128156,128420,129293,129294,129505,9829,10084,61578],"f004","M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"]},oi={prefix:"fas",iconName:"circle",icon:[512,512,[128308,128309,128992,128993,128994,128995,128996,9679,9898,9899,11044,61708,61915],"f111","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"]},li={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},ci={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128190,128426,"save"],"f0c7","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-242.7c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32L64 32zm0 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32L96 224c-17.7 0-32-14.3-32-32l0-64zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},di=ci,ui={prefix:"fas",iconName:"arrow-rotate-right",icon:[512,512,[8635,"arrow-right-rotate","arrow-rotate-forward","redo"],"f01e","M386.3 160L336 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l128 0c17.7 0 32-14.3 32-32l0-128c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 51.2L414.4 97.6c-87.5-87.5-229.3-87.5-316.8 0s-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3s163.8-62.5 226.3 0L386.3 160z"]},hi=ui,mi={prefix:"fas",iconName:"phone",icon:[512,512,[128222,128379],"f095","M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"]},pi={prefix:"fas",iconName:"calendar-xmark",icon:[448,512,["calendar-times"],"f273","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zM305 305c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-47 47-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l47 47-47 47c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l47-47 47 47c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-47-47 47-47z"]},fi=pi,gi={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"]},xi={prefix:"fas",iconName:"arrow-left",icon:[448,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},bi={prefix:"fas",iconName:"file-pdf",icon:[512,512,[],"f1c1","M0 64C0 28.7 28.7 0 64 0L224 0l0 128c0 17.7 14.3 32 32 32l128 0 0 144-208 0c-35.3 0-64 28.7-64 64l0 144-48 0c-35.3 0-64-28.7-64-64L0 64zm384 64l-128 0L256 0 384 128zM176 352l32 0c30.9 0 56 25.1 56 56s-25.1 56-56 56l-16 0 0 32c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-48 0-80c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24l-16 0 0 48 16 0zm96-80l32 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-32 0c-8.8 0-16-7.2-16-16l0-128c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16l0-64c0-8.8-7.2-16-16-16l-16 0 0 96 16 0zm80-112c0-8.8 7.2-16 16-16l48 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-32 0 0 32 32 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-32 0 0 48c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-64 0-64z"]},vi={prefix:"fas",iconName:"tag",icon:[448,512,[127991],"f02b","M0 80L0 229.5c0 17 6.7 33.3 18.7 45.3l176 176c25 25 65.5 25 90.5 0L418.7 317.3c25-25 25-65.5 0-90.5l-176-176c-12-12-28.3-18.7-45.3-18.7L48 32C21.5 32 0 53.5 0 80zm112 32a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},yi={prefix:"fas",iconName:"envelope",icon:[512,512,[128386,9993,61443],"f0e0","M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"]},ji={prefix:"fas",iconName:"user-doctor",icon:[448,512,["user-md"],"f0f0","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-96 55.2C54 332.9 0 401.3 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7c0-81-54-149.4-128-171.1l0 50.8c27.6 7.1 48 32.2 48 62l0 40c0 8.8-7.2 16-16 16l-16 0c-8.8 0-16-7.2-16-16s7.2-16 16-16l0-24c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 24c8.8 0 16 7.2 16 16s-7.2 16-16 16l-16 0c-8.8 0-16-7.2-16-16l0-40c0-29.8 20.4-54.9 48-62l0-57.1c-6-.6-12.1-.9-18.3-.9l-91.4 0c-6.2 0-12.3 .3-18.3 .9l0 65.4c23.1 6.9 40 28.3 40 53.7c0 30.9-25.1 56-56 56s-56-25.1-56-56c0-25.4 16.9-46.8 40-53.7l0-59.1zM144 448a24 24 0 1 0 0-48 24 24 0 1 0 0 48z"]},Ni=ji,wi={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},_i=wi,Si={prefix:"fas",iconName:"calendar-check",icon:[448,512,[],"f274","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zM329 305c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-95 95-47-47c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l64 64c9.4 9.4 24.6 9.4 33.9 0L329 305z"]},Ci={prefix:"fas",iconName:"arrow-rotate-left",icon:[512,512,[8634,"arrow-left-rotate","arrow-rotate-back","arrow-rotate-backward","undo"],"f0e2","M125.7 160l50.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L48 224c-17.7 0-32-14.3-32-32L16 64c0-17.7 14.3-32 32-32s32 14.3 32 32l0 51.2L97.6 97.6c87.5-87.5 229.3-87.5 316.8 0s87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3s-163.8-62.5-226.3 0L125.7 160z"]},ki=Ci,Ai={prefix:"fas",iconName:"dumbbell",icon:[640,512,[],"f44b","M96 64c0-17.7 14.3-32 32-32l32 0c17.7 0 32 14.3 32 32l0 160 0 64 0 160c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-64-32 0c-17.7 0-32-14.3-32-32l0-64c-17.7 0-32-14.3-32-32s14.3-32 32-32l0-64c0-17.7 14.3-32 32-32l32 0 0-64zm448 0l0 64 32 0c17.7 0 32 14.3 32 32l0 64c17.7 0 32 14.3 32 32s-14.3 32-32 32l0 64c0 17.7-14.3 32-32 32l-32 0 0 64c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-160 0-64 0-160c0-17.7 14.3-32 32-32l32 0c17.7 0 32 14.3 32 32zM416 224l0 64-192 0 0-64 192 0z"]},Pi={prefix:"fas",iconName:"rectangle-list",icon:[576,512,["list-alt"],"f022","M0 96C0 60.7 28.7 32 64 32l448 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM128 288a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm32-128a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM128 384a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm96-248c-13.3 0-24 10.7-24 24s10.7 24 24 24l224 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-224 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l224 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-224 0zm0 96c-13.3 0-24 10.7-24 24s10.7 24 24 24l224 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-224 0z"]},Ei=Pi,Li={prefix:"fas",iconName:"calendar-plus",icon:[448,512,[],"f271","M96 32l0 32L48 64C21.5 64 0 85.5 0 112l0 48 448 0 0-48c0-26.5-21.5-48-48-48l-48 0 0-32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 32L160 64l0-32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192L0 192 0 464c0 26.5 21.5 48 48 48l352 0c26.5 0 48-21.5 48-48l0-272zM224 248c13.3 0 24 10.7 24 24l0 56 56 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-56 0 0 56c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-56-56 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l56 0 0-56c0-13.3 10.7-24 24-24z"]},Di={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},Oi=Di,Ti={prefix:"fas",iconName:"clock",icon:[512,512,[128339,"clock-four"],"f017","M256 0a256 256 0 1 1 0 512A256 256 0 1 1 256 0zM232 120l0 136c0 8 4 15.5 10.7 20l96 64c11 7.4 25.9 4.4 33.3-6.7s4.4-25.9-6.7-33.3L280 243.2 280 120c0-13.3-10.7-24-24-24s-24 10.7-24 24z"]},Mi={prefix:"fas",iconName:"ellipsis-vertical",icon:[128,512,["ellipsis-v"],"f142","M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"]},Ri=Mi,Ii={prefix:"fas",iconName:"calculator",icon:[384,512,[128425],"f1ec","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM96 64l192 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L96 160c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32zm32 160a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM96 352a32 32 0 1 1 0-64 32 32 0 1 1 0 64zM64 416c0-17.7 14.3-32 32-32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-96 0c-17.7 0-32-14.3-32-32zM192 256a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zm64-64a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm32 64a32 32 0 1 1 -64 0 32 32 0 1 1 64 0zM288 448a32 32 0 1 1 0-64 32 32 0 1 1 0 64z"]},Fi={prefix:"fas",iconName:"id-card",icon:[576,512,[62147,"drivers-license"],"f2c2","M0 96l576 0c0-35.3-28.7-64-64-64L64 32C28.7 32 0 60.7 0 96zm0 32L0 416c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-288L0 128zM64 405.3c0-29.5 23.9-53.3 53.3-53.3l117.3 0c29.5 0 53.3 23.9 53.3 53.3c0 5.9-4.8 10.7-10.7 10.7L74.7 416c-5.9 0-10.7-4.8-10.7-10.7zM176 192a64 64 0 1 1 0 128 64 64 0 1 1 0-128zm176 16c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16zm0 64c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16zm0 64c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16z"]},zi={prefix:"fas",iconName:"house",icon:[576,512,[127968,63498,63500,"home","home-alt","home-lg-alt"],"f015","M575.8 255.5c0 18-15 32.1-32 32.1l-32 0 .7 160.2c0 2.7-.2 5.4-.5 8.1l0 16.2c0 22.1-17.9 40-40 40l-16 0c-1.1 0-2.2 0-3.3-.1c-1.4 .1-2.8 .1-4.2 .1L416 512l-24 0c-22.1 0-40-17.9-40-40l0-24 0-64c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32 14.3-32 32l0 64 0 24c0 22.1-17.9 40-40 40l-24 0-31.9 0c-1.5 0-3-.1-4.5-.2c-1.2 .1-2.4 .2-3.6 .2l-16 0c-22.1 0-40-17.9-40-40l0-112c0-.9 0-1.9 .1-2.8l0-69.7-32 0c-18 0-32-14-32-32.1c0-9 3-17 10-24L266.4 8c7-7 15-8 22-8s15 2 21 7L564.8 231.5c8 7 12 15 11 24z"]},Bi=zi,qi={prefix:"fas",iconName:"calendar-week",icon:[448,512,[],"f784","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm80 64c-8.8 0-16 7.2-16 16l0 64c0 8.8 7.2 16 16 16l288 0c8.8 0 16-7.2 16-16l0-64c0-8.8-7.2-16-16-16L80 256z"]},Ui={prefix:"fas",iconName:"rotate-right",icon:[512,512,["redo-alt","rotate-forward"],"f2f9","M463.5 224l8.5 0c13.3 0 24-10.7 24-24l0-128c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8l119.5 0z"]},Hi=Ui,Wi={prefix:"fas",iconName:"credit-card",icon:[576,512,[128179,62083,"credit-card-alt"],"f09d","M64 32C28.7 32 0 60.7 0 96l0 32 576 0 0-32c0-35.3-28.7-64-64-64L64 32zM576 224L0 224 0 416c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-192zM112 352l64 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-64 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm112 16c0-8.8 7.2-16 16-16l128 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-128 0c-8.8 0-16-7.2-16-16z"]},Vi={prefix:"fas",iconName:"medal",icon:[512,512,[127941],"f5a2","M4.1 38.2C1.4 34.2 0 29.4 0 24.6C0 11 11 0 24.6 0L133.9 0c11.2 0 21.7 5.9 27.4 15.5l68.5 114.1c-48.2 6.1-91.3 28.6-123.4 61.9L4.1 38.2zm503.7 0L405.6 191.5c-32.1-33.3-75.2-55.8-123.4-61.9L350.7 15.5C356.5 5.9 366.9 0 378.1 0L487.4 0C501 0 512 11 512 24.6c0 4.8-1.4 9.6-4.1 13.6zM80 336a176 176 0 1 1 352 0A176 176 0 1 1 80 336zm184.4-94.9c-3.4-7-13.3-7-16.8 0l-22.4 45.4c-1.4 2.8-4 4.7-7 5.1L168 298.9c-7.7 1.1-10.7 10.5-5.2 16l36.3 35.4c2.2 2.2 3.2 5.2 2.7 8.3l-8.6 49.9c-1.3 7.6 6.7 13.5 13.6 9.9l44.8-23.6c2.7-1.4 6-1.4 8.7 0l44.8 23.6c6.9 3.6 14.9-2.2 13.6-9.9l-8.6-49.9c-.5-3 .5-6.1 2.7-8.3l36.3-35.4c5.6-5.4 2.5-14.8-5.2-16l-50.1-7.3c-3-.4-5.7-2.4-7-5.1l-22.4-45.4z"]},Gi={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32l0 19.2C119 66 64 130.6 64 208l0 18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416l384 0c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8l0-18.8c0-77.4-55-142-128-156.8L256 32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3l-64 0-64 0c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},Yi={prefix:"fas",iconName:"gauge-high",icon:[512,512,[62461,"tachometer-alt","tachometer-alt-fast"],"f625","M0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM256 416c35.3 0 64-28.7 64-64c0-17.4-6.9-33.1-18.1-44.6L366 161.7c5.3-12.1-.2-26.3-12.3-31.6s-26.3 .2-31.6 12.3L257.9 288c-.6 0-1.3 0-1.9 0c-35.3 0-64 28.7-64 64s28.7 64 64 64zM176 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zM96 288a32 32 0 1 0 0-64 32 32 0 1 0 0 64zm352-32a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},$i=Yi,Xi={prefix:"fas",iconName:"play",icon:[384,512,[9654],"f04b","M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"]},Ji={prefix:"fas",iconName:"magnifying-glass",icon:[512,512,[128269,"search"],"f002","M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"]},Ki=Ji,Qi={prefix:"fas",iconName:"chevron-down",icon:[512,512,[],"f078","M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z"]},Zi={prefix:"fas",iconName:"list-ul",icon:[512,512,["list-dots"],"f0ca","M64 144a48 48 0 1 0 0-96 48 48 0 1 0 0 96zM192 64c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L192 64zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zm0 160c-17.7 0-32 14.3-32 32s14.3 32 32 32l288 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-288 0zM64 464a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm48-208a48 48 0 1 0 -96 0 48 48 0 1 0 96 0z"]},eo={prefix:"fas",iconName:"list-check",icon:[512,512,["tasks"],"f0ae","M152.1 38.2c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 113C-2.3 103.6-2.3 88.4 7 79s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zm0 160c9.9 8.9 10.7 24 1.8 33.9l-72 80c-4.4 4.9-10.6 7.8-17.2 7.9s-12.9-2.4-17.6-7L7 273c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l22.1 22.1 55.1-61.2c8.9-9.9 24-10.7 33.9-1.8zM224 96c0-17.7 14.3-32 32-32l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32zm0 160c0-17.7 14.3-32 32-32l224 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-224 0c-17.7 0-32-14.3-32-32zM160 416c0-17.7 14.3-32 32-32l288 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-288 0c-17.7 0-32-14.3-32-32zM48 368a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},to=eo,ao={prefix:"fas",iconName:"circle-user",icon:[512,512,[62142,"user-circle"],"f2bd","M399 384.2C376.9 345.8 335.4 320 288 320l-64 0c-47.4 0-88.9 25.8-111 64.2c35.2 39.2 86.2 63.8 143 63.8s107.8-24.7 143-63.8zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zm256 16a72 72 0 1 0 0-144 72 72 0 1 0 0 144z"]},so=ao,no={prefix:"fas",iconName:"user-shield",icon:[640,512,[],"f505","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c1.8 0 3.5-.2 5.3-.5c-76.3-55.1-99.8-141-103.1-200.2c-16.1-4.8-33.1-7.3-50.7-7.3l-91.4 0zm308.8-78.3l-120 48C358 277.4 352 286.2 352 296c0 63.3 25.9 168.8 134.8 214.2c5.9 2.5 12.6 2.5 18.5 0C614.1 464.8 640 359.3 640 296c0-9.8-6-18.6-15.1-22.3l-120-48c-5.7-2.3-12.1-2.3-17.8 0zM591.4 312c-3.9 50.7-27.2 116.7-95.4 149.7l0-187.8L591.4 312z"]},ro={prefix:"fas",iconName:"user-graduate",icon:[448,512,[],"f501","M219.3 .5c3.1-.6 6.3-.6 9.4 0l200 40C439.9 42.7 448 52.6 448 64s-8.1 21.3-19.3 23.5L352 102.9l0 57.1c0 70.7-57.3 128-128 128s-128-57.3-128-128l0-57.1L48 93.3l0 65.1 15.7 78.4c.9 4.7-.3 9.6-3.3 13.3s-7.6 5.9-12.4 5.9l-32 0c-4.8 0-9.3-2.1-12.4-5.9s-4.3-8.6-3.3-13.3L16 158.4l0-71.8C6.5 83.3 0 74.3 0 64C0 52.6 8.1 42.7 19.3 40.5l200-40zM111.9 327.7c10.5-3.4 21.8 .4 29.4 8.5l71 75.5c6.3 6.7 17 6.7 23.3 0l71-75.5c7.6-8.1 18.9-11.9 29.4-8.5C401 348.6 448 409.4 448 481.3c0 17-13.8 30.7-30.7 30.7L30.7 512C13.8 512 0 498.2 0 481.3c0-71.9 47-132.7 111.9-153.6z"]},io={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},oo={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},lo=oo,co={prefix:"fas",iconName:"rocket",icon:[512,512,[],"f135","M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z"]},uo={prefix:"fas",iconName:"arrow-trend-up",icon:[576,512,[],"e098","M384 160c-17.7 0-32-14.3-32-32s14.3-32 32-32l160 0c17.7 0 32 14.3 32 32l0 160c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-82.7L342.6 374.6c-12.5 12.5-32.8 12.5-45.3 0L192 269.3 54.6 406.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160c12.5-12.5 32.8-12.5 45.3 0L320 306.7 466.7 160 384 160z"]},ho={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},mo={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},po={prefix:"fas",iconName:"percent",icon:[384,512,[62101,62785,"percentage"],"25","M374.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-320 320c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l320-320zM128 128A64 64 0 1 0 0 128a64 64 0 1 0 128 0zM384 384a64 64 0 1 0 -128 0 64 64 0 1 0 128 0z"]},fo=po,go={prefix:"fas",iconName:"trophy",icon:[576,512,[127942],"f091","M400 0L176 0c-26.5 0-48.1 21.8-47.1 48.2c.2 5.3 .4 10.6 .7 15.8L24 64C10.7 64 0 74.7 0 88c0 92.6 33.5 157 78.5 200.7c44.3 43.1 98.3 64.8 138.1 75.8c23.4 6.5 39.4 26 39.4 45.6c0 20.9-17 37.9-37.9 37.9L192 448c-17.7 0-32 14.3-32 32s14.3 32 32 32l192 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-26.1 0C337 448 320 431 320 410.1c0-19.6 15.9-39.2 39.4-45.6c39.9-11 93.9-32.7 138.2-75.8C542.5 245 576 180.6 576 88c0-13.3-10.7-24-24-24L446.4 64c.3-5.2 .5-10.4 .7-15.8C448.1 21.8 426.5 0 400 0zM48.9 112l84.4 0c9.1 90.1 29.2 150.3 51.9 190.6c-24.9-11-50.8-26.5-73.2-48.3c-32-31.1-58-76-63-142.3zM464.1 254.3c-22.4 21.8-48.3 37.3-73.2 48.3c22.7-40.3 42.8-100.5 51.9-190.6l84.4 0c-5.1 66.3-31.1 111.2-63 142.3z"]},xo={prefix:"fas",iconName:"spinner",icon:[512,512,[],"f110","M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z"]},bo={prefix:"fas",iconName:"robot",icon:[640,512,[129302],"f544","M320 0c17.7 0 32 14.3 32 32l0 64 120 0c39.8 0 72 32.2 72 72l0 272c0 39.8-32.2 72-72 72l-304 0c-39.8 0-72-32.2-72-72l0-272c0-39.8 32.2-72 72-72l120 0 0-64c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16l32 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-32 0zM264 256a40 40 0 1 0 -80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224l16 0 0 192-16 0c-26.5 0-48-21.5-48-48l0-96c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48l0 96c0 26.5-21.5 48-48 48l-16 0 0-192 16 0z"]},vo={prefix:"fas",iconName:"gears",icon:[640,512,["cogs"],"f085","M308.5 135.3c7.1-6.3 9.9-16.2 6.2-25c-2.3-5.3-4.8-10.5-7.6-15.5L304 89.4c-3-5-6.3-9.9-9.8-14.6c-5.7-7.6-15.7-10.1-24.7-7.1l-28.2 9.3c-10.7-8.8-23-16-36.2-20.9L199 27.1c-1.9-9.3-9.1-16.7-18.5-17.8C173.9 8.4 167.2 8 160.4 8l-.7 0c-6.8 0-13.5 .4-20.1 1.2c-9.4 1.1-16.6 8.6-18.5 17.8L115 56.1c-13.3 5-25.5 12.1-36.2 20.9L50.5 67.8c-9-3-19-.5-24.7 7.1c-3.5 4.7-6.8 9.6-9.9 14.6l-3 5.3c-2.8 5-5.3 10.2-7.6 15.6c-3.7 8.7-.9 18.6 6.2 25l22.2 19.8C32.6 161.9 32 168.9 32 176s.6 14.1 1.7 20.9L11.5 216.7c-7.1 6.3-9.9 16.2-6.2 25c2.3 5.3 4.8 10.5 7.6 15.6l3 5.2c3 5.1 6.3 9.9 9.9 14.6c5.7 7.6 15.7 10.1 24.7 7.1l28.2-9.3c10.7 8.8 23 16 36.2 20.9l6.1 29.1c1.9 9.3 9.1 16.7 18.5 17.8c6.7 .8 13.5 1.2 20.4 1.2s13.7-.4 20.4-1.2c9.4-1.1 16.6-8.6 18.5-17.8l6.1-29.1c13.3-5 25.5-12.1 36.2-20.9l28.2 9.3c9 3 19 .5 24.7-7.1c3.5-4.7 6.8-9.5 9.8-14.6l3.1-5.4c2.8-5 5.3-10.2 7.6-15.5c3.7-8.7 .9-18.6-6.2-25l-22.2-19.8c1.1-6.8 1.7-13.8 1.7-20.9s-.6-14.1-1.7-20.9l22.2-19.8zM112 176a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zM504.7 500.5c6.3 7.1 16.2 9.9 25 6.2c5.3-2.3 10.5-4.8 15.5-7.6l5.4-3.1c5-3 9.9-6.3 14.6-9.8c7.6-5.7 10.1-15.7 7.1-24.7l-9.3-28.2c8.8-10.7 16-23 20.9-36.2l29.1-6.1c9.3-1.9 16.7-9.1 17.8-18.5c.8-6.7 1.2-13.5 1.2-20.4s-.4-13.7-1.2-20.4c-1.1-9.4-8.6-16.6-17.8-18.5L583.9 307c-5-13.3-12.1-25.5-20.9-36.2l9.3-28.2c3-9 .5-19-7.1-24.7c-4.7-3.5-9.6-6.8-14.6-9.9l-5.3-3c-5-2.8-10.2-5.3-15.6-7.6c-8.7-3.7-18.6-.9-25 6.2l-19.8 22.2c-6.8-1.1-13.8-1.7-20.9-1.7s-14.1 .6-20.9 1.7l-19.8-22.2c-6.3-7.1-16.2-9.9-25-6.2c-5.3 2.3-10.5 4.8-15.6 7.6l-5.2 3c-5.1 3-9.9 6.3-14.6 9.9c-7.6 5.7-10.1 15.7-7.1 24.7l9.3 28.2c-8.8 10.7-16 23-20.9 36.2L315.1 313c-9.3 1.9-16.7 9.1-17.8 18.5c-.8 6.7-1.2 13.5-1.2 20.4s.4 13.7 1.2 20.4c1.1 9.4 8.6 16.6 17.8 18.5l29.1 6.1c5 13.3 12.1 25.5 20.9 36.2l-9.3 28.2c-3 9-.5 19 7.1 24.7c4.7 3.5 9.5 6.8 14.6 9.8l5.4 3.1c5 2.8 10.2 5.3 15.5 7.6c8.7 3.7 18.6 .9 25-6.2l19.8-22.2c6.8 1.1 13.8 1.7 20.9 1.7s14.1-.6 20.9-1.7l19.8 22.2zM464 304a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},yo=vo,jo={prefix:"fas",iconName:"award",icon:[384,512,[],"f559","M173.8 5.5c11-7.3 25.4-7.3 36.4 0L228 17.2c6 3.9 13 5.8 20.1 5.4l21.3-1.3c13.2-.8 25.6 6.4 31.5 18.2l9.6 19.1c3.2 6.4 8.4 11.5 14.7 14.7L344.5 83c11.8 5.9 19 18.3 18.2 31.5l-1.3 21.3c-.4 7.1 1.5 14.2 5.4 20.1l11.8 17.8c7.3 11 7.3 25.4 0 36.4L366.8 228c-3.9 6-5.8 13-5.4 20.1l1.3 21.3c.8 13.2-6.4 25.6-18.2 31.5l-19.1 9.6c-6.4 3.2-11.5 8.4-14.7 14.7L301 344.5c-5.9 11.8-18.3 19-31.5 18.2l-21.3-1.3c-7.1-.4-14.2 1.5-20.1 5.4l-17.8 11.8c-11 7.3-25.4 7.3-36.4 0L156 366.8c-6-3.9-13-5.8-20.1-5.4l-21.3 1.3c-13.2 .8-25.6-6.4-31.5-18.2l-9.6-19.1c-3.2-6.4-8.4-11.5-14.7-14.7L39.5 301c-11.8-5.9-19-18.3-18.2-31.5l1.3-21.3c.4-7.1-1.5-14.2-5.4-20.1L5.5 210.2c-7.3-11-7.3-25.4 0-36.4L17.2 156c3.9-6 5.8-13 5.4-20.1l-1.3-21.3c-.8-13.2 6.4-25.6 18.2-31.5l19.1-9.6C65 70.2 70.2 65 73.4 58.6L83 39.5c5.9-11.8 18.3-19 31.5-18.2l21.3 1.3c7.1 .4 14.2-1.5 20.1-5.4L173.8 5.5zM272 192a80 80 0 1 0 -160 0 80 80 0 1 0 160 0zM1.3 441.8L44.4 339.3c.2 .1 .3 .2 .4 .4l9.6 19.1c11.7 23.2 36 37.3 62 35.8l21.3-1.3c.2 0 .5 0 .7 .2l17.8 11.8c5.1 3.3 10.5 5.9 16.1 7.7l-37.6 89.3c-2.3 5.5-7.4 9.2-13.3 9.7s-11.6-2.2-14.8-7.2L74.4 455.5l-56.1 8.3c-5.7 .8-11.4-1.5-15-6s-4.3-10.7-2.1-16zm248 60.4L211.7 413c5.6-1.8 11-4.3 16.1-7.7l17.8-11.8c.2-.1 .4-.2 .7-.2l21.3 1.3c26 1.5 50.3-12.6 62-35.8l9.6-19.1c.1-.2 .2-.3 .4-.4l43.2 102.5c2.2 5.3 1.4 11.4-2.1 16s-9.3 6.9-15 6l-56.1-8.3-32.2 49.2c-3.2 5-8.9 7.7-14.8 7.2s-11-4.3-13.3-9.7z"]},No={prefix:"fas",iconName:"building",icon:[384,512,[127970,61687],"f1ad","M48 0C21.5 0 0 21.5 0 48L0 464c0 26.5 21.5 48 48 48l96 0 0-80c0-26.5 21.5-48 48-48s48 21.5 48 48l0 80 96 0c26.5 0 48-21.5 48-48l0-416c0-26.5-21.5-48-48-48L48 0zM64 240c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zm112-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM80 96l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16zm80 16c0-8.8 7.2-16 16-16l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32zM272 96l32 0c8.8 0 16 7.2 16 16l0 32c0 8.8-7.2 16-16 16l-32 0c-8.8 0-16-7.2-16-16l0-32c0-8.8 7.2-16 16-16z"]},wo={prefix:"fas",iconName:"clock-rotate-left",icon:[512,512,["history"],"f1da","M75 75L41 41C25.9 25.9 0 36.6 0 57.9L0 168c0 13.3 10.7 24 24 24l110.1 0c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24l0 104c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65 0-94.1c0-13.3-10.7-24-24-24z"]},_o=wo,So={prefix:"fas",iconName:"wand-magic",icon:[512,512,["magic"],"f0d0","M14.1 463.3c-18.7-18.7-18.7-49.1 0-67.9L395.4 14.1c18.7-18.7 49.1-18.7 67.9 0l34.6 34.6c18.7 18.7 18.7 49.1 0 67.9L116.5 497.9c-18.7 18.7-49.1 18.7-67.9 0L14.1 463.3zM347.6 187.6l105-105L429.4 59.3l-105 105 23.3 23.3z"]},Co=So,ko={prefix:"fas",iconName:"hashtag",icon:[448,512,[62098],"23","M181.3 32.4c17.4 2.9 29.2 19.4 26.3 36.8L197.8 128l95.1 0 11.5-69.3c2.9-17.4 19.4-29.2 36.8-26.3s29.2 19.4 26.3 36.8L357.8 128l58.2 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-68.9 0L325.8 320l58.2 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-68.9 0-11.5 69.3c-2.9 17.4-19.4 29.2-36.8 26.3s-29.2-19.4-26.3-36.8l9.8-58.7-95.1 0-11.5 69.3c-2.9 17.4-19.4 29.2-36.8 26.3s-29.2-19.4-26.3-36.8L90.2 384 32 384c-17.7 0-32-14.3-32-32s14.3-32 32-32l68.9 0 21.3-128L64 192c-17.7 0-32-14.3-32-32s14.3-32 32-32l68.9 0 11.5-69.3c2.9-17.4 19.4-29.2 36.8-26.3zM187.1 192L165.8 320l95.1 0 21.3-128-95.1 0z"]},Ao={prefix:"fas",iconName:"scale-balanced",icon:[640,512,[9878,"balance-scale"],"f24e","M384 32l128 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L398.4 96c-5.2 25.8-22.9 47.1-46.4 57.3L352 448l160 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-192 0-192 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l160 0 0-294.7c-23.5-10.3-41.2-31.6-46.4-57.3L128 96c-17.7 0-32-14.3-32-32s14.3-32 32-32l128 0c14.6-19.4 37.8-32 64-32s49.4 12.6 64 32zm55.6 288l144.9 0L512 195.8 439.6 320zM512 416c-62.9 0-115.2-34-126-78.9c-2.6-11 1-22.3 6.7-32.1l95.2-163.2c5-8.6 14.2-13.8 24.1-13.8s19.1 5.3 24.1 13.8l95.2 163.2c5.7 9.8 9.3 21.1 6.7 32.1C627.2 382 574.9 416 512 416zM126.8 195.8L54.4 320l144.9 0L126.8 195.8zM.9 337.1c-2.6-11 1-22.3 6.7-32.1l95.2-163.2c5-8.6 14.2-13.8 24.1-13.8s19.1 5.3 24.1 13.8l95.2 163.2c5.7 9.8 9.3 21.1 6.7 32.1C242 382 189.7 416 126.8 416S11.7 382 .9 337.1z"]},Po=Ao,Eo={prefix:"fas",iconName:"book",icon:[448,512,[128212],"f02d","M96 0C43 0 0 43 0 96L0 416c0 53 43 96 96 96l288 0 32 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l0-64c17.7 0 32-14.3 32-32l0-320c0-17.7-14.3-32-32-32L384 0 96 0zm0 384l256 0 0 64L96 448c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16zm16 48l192 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-192 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},Lo={prefix:"fas",iconName:"user-plus",icon:[640,512,[],"f234","M96 128a128 128 0 1 1 256 0A128 128 0 1 1 96 128zM0 482.3C0 383.8 79.8 304 178.3 304l91.4 0C368.2 304 448 383.8 448 482.3c0 16.4-13.3 29.7-29.7 29.7L29.7 512C13.3 512 0 498.7 0 482.3zM504 312l0-64-64 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l64 0 0-64c0-13.3 10.7-24 24-24s24 10.7 24 24l0 64 64 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-64 0 0 64c0 13.3-10.7 24-24 24s-24-10.7-24-24z"]},Do={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},Oo={prefix:"fas",iconName:"triangle-exclamation",icon:[512,512,[9888,"exclamation-triangle","warning"],"f071","M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"]},To=Oo,Mo=Oo,Ro={prefix:"fas",iconName:"calendar-day",icon:[448,512,[],"f783","M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm80 64c-8.8 0-16 7.2-16 16l0 96c0 8.8 7.2 16 16 16l96 0c8.8 0 16-7.2 16-16l0-96c0-8.8-7.2-16-16-16l-96 0z"]},Io={prefix:"fas",iconName:"brain",icon:[512,512,[129504],"f5dc","M184 0c30.9 0 56 25.1 56 56l0 400c0 30.9-25.1 56-56 56c-28.9 0-52.7-21.9-55.7-50.1c-5.2 1.4-10.7 2.1-16.3 2.1c-35.3 0-64-28.7-64-64c0-7.4 1.3-14.6 3.6-21.2C21.4 367.4 0 338.2 0 304c0-31.9 18.7-59.5 45.8-72.3C37.1 220.8 32 207 32 192c0-30.7 21.6-56.3 50.4-62.6C80.8 123.9 80 118 80 112c0-29.9 20.6-55.1 48.3-62.1C131.3 21.9 155.1 0 184 0zM328 0c28.9 0 52.6 21.9 55.7 49.9c27.8 7 48.3 32.1 48.3 62.1c0 6-.8 11.9-2.4 17.4c28.8 6.2 50.4 31.9 50.4 62.6c0 15-5.1 28.8-13.8 39.7C493.3 244.5 512 272.1 512 304c0 34.2-21.4 63.4-51.6 74.8c2.3 6.6 3.6 13.8 3.6 21.2c0 35.3-28.7 64-64 64c-5.6 0-11.1-.7-16.3-2.1c-3 28.2-26.8 50.1-55.7 50.1c-30.9 0-56-25.1-56-56l0-400c0-30.9 25.1-56 56-56z"]},Fo={prefix:"fas",iconName:"circle-xmark",icon:[512,512,[61532,"times-circle","xmark-circle"],"f057","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM175 175c9.4-9.4 24.6-9.4 33.9 0l47 47 47-47c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-47 47 47 47c9.4 9.4 9.4 24.6 0 33.9s-24.6 9.4-33.9 0l-47-47-47 47c-9.4 9.4-24.6 9.4-33.9 0s-9.4-24.6 0-33.9l47-47-47-47c-9.4-9.4-9.4-24.6 0-33.9z"]},zo=Fo,Bo={prefix:"fas",iconName:"note-sticky",icon:[448,512,[62026,"sticky-note"],"f249","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l224 0 0-112c0-26.5 21.5-48 48-48l112 0 0-224c0-35.3-28.7-64-64-64L64 32zM448 352l-45.3 0L336 352c-8.8 0-16 7.2-16 16l0 66.7 0 45.3 32-32 64-64 32-32z"]},qo=Bo,Uo={prefix:"fas",iconName:"dollar-sign",icon:[320,512,[128178,61781,"dollar","usd"],"24","M160 0c17.7 0 32 14.3 32 32l0 35.7c1.6 .2 3.1 .4 4.7 .7c.4 .1 .7 .1 1.1 .2l48 8.8c17.4 3.2 28.9 19.9 25.7 37.2s-19.9 28.9-37.2 25.7l-47.5-8.7c-31.3-4.6-58.9-1.5-78.3 6.2s-27.2 18.3-29 28.1c-2 10.7-.5 16.7 1.2 20.4c1.8 3.9 5.5 8.3 12.8 13.2c16.3 10.7 41.3 17.7 73.7 26.3l2.9 .8c28.6 7.6 63.6 16.8 89.6 33.8c14.2 9.3 27.6 21.9 35.9 39.5c8.5 17.9 10.3 37.9 6.4 59.2c-6.9 38-33.1 63.4-65.6 76.7c-13.7 5.6-28.6 9.2-44.4 11l0 33.4c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-34.9c-.4-.1-.9-.1-1.3-.2l-.2 0s0 0 0 0c-24.4-3.8-64.5-14.3-91.5-26.3c-16.1-7.2-23.4-26.1-16.2-42.2s26.1-23.4 42.2-16.2c20.9 9.3 55.3 18.5 75.2 21.6c31.9 4.7 58.2 2 76-5.3c16.9-6.9 24.6-16.9 26.8-28.9c1.9-10.6 .4-16.7-1.3-20.4c-1.9-4-5.6-8.4-13-13.3c-16.4-10.7-41.5-17.7-74-26.3l-2.8-.7s0 0 0 0C119.4 279.3 84.4 270 58.4 253c-14.2-9.3-27.5-22-35.8-39.6c-8.4-17.9-10.1-37.9-6.1-59.2C23.7 116 52.3 91.2 84.8 78.3c13.3-5.3 27.9-8.9 43.2-11L128 32c0-17.7 14.3-32 32-32z"]},Ho={prefix:"fas",iconName:"graduation-cap",icon:[640,512,[127891,"mortar-board"],"f19d","M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9l0 28.1c0 28.4-10.8 57.7-22.3 80.8c-6.5 13-13.9 25.8-22.5 37.6C0 442.7-.9 448.3 .9 453.4s6 8.9 11.2 10.2l64 16c4.2 1.1 8.7 .3 12.4-2s6.3-6.1 7.1-10.4c8.6-42.8 4.3-81.2-2.1-108.7C90.3 344.3 86 329.8 80 316.5l0-24.6c0-30.2 10.2-58.7 27.9-81.5c12.9-15.5 29.6-28 49.2-35.7l157-61.7c8.2-3.2 17.5 .8 20.7 9s-.8 17.5-9 20.7l-157 61.7c-12.4 4.9-23.3 12.4-32.2 21.6l159.6 57.6c7.6 2.7 15.6 4.1 23.7 4.1s16.1-1.4 23.7-4.1L624.2 182.6c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 314c-11.1 4-22.8 6-34.5 6s-23.5-2-34.5-6L143.3 262.6 128 408z"]};const Wo=e=>{let{isOpen:t,onAccept:a,onDecline:n,isLoading:r=!1,userInfo:i=null}=e;const[o,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1);(0,s.useEffect)((()=>{t&&(l(!1),d(!1))}),[t]);return t?(0,We.jsx)("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col border border-gray-200",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-t-3xl",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,We.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:si,className:"text-white text-xl"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Termos de Servi\xe7o"}),(0,We.jsx)("p",{className:"text-gray-600",children:"AbaPlay - Plataforma de Gest\xe3o Terap\xeautica"})]})]}),(0,We.jsx)("button",{onClick:n,className:"w-10 h-10 rounded-full bg-gray-100 hover:bg-red-100 flex items-center justify-center transition-colors",disabled:r,children:(0,We.jsx)(Vn,{icon:lo,className:"text-gray-500 hover:text-red-600"})})]}),i&&(0,We.jsx)("div",{className:"p-6 bg-green-50 border-b border-green-100",children:(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:Br,className:"text-green-600 text-xl"}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("p",{className:"text-green-800 font-semibold",children:["Bem-vindo(a), ",i.fullName||i.username,"!"]}),(0,We.jsx)("p",{className:"text-green-700 text-sm",children:"Para continuar, \xe9 necess\xe1rio aceitar nossos Termos de Servi\xe7o."})]})]})}),(0,We.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col",children:[!o&&(0,We.jsx)("div",{className:"bg-yellow-50 border-b border-yellow-200 px-6 py-3",children:(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:Wr,className:"text-yellow-600"}),(0,We.jsx)("p",{className:"text-yellow-800 text-sm font-medium",children:"Por favor, role at\xe9 o final para ler todos os termos"})]})}),(0,We.jsx)("div",{className:"flex-1 overflow-y-auto p-6 text-gray-700 leading-relaxed",onScroll:e=>{const{scrollTop:t,scrollHeight:a,clientHeight:s}=e.target;l(t+s>=a-10)},children:(0,We.jsxs)("div",{className:"prose max-w-none",children:[(0,We.jsxs)("div",{className:"text-center mb-8 pb-6 border-b border-gray-200",children:[(0,We.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Termos de Servi\xe7o da Plataforma AbaPlay"}),(0,We.jsx)("p",{className:"text-gray-600",children:"\xdaltima atualiza\xe7\xe3o: 27 de agosto de 2025"})]}),(0,We.jsx)("div",{className:"bg-blue-50 rounded-2xl p-6 mb-8 border border-blue-100",children:(0,We.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,We.jsx)(Vn,{icon:Jr,className:"text-blue-600 text-2xl mt-1"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"Importante"}),(0,We.jsx)("p",{className:"text-blue-700",children:"Bem-vindo \xe0 AbaPlay! Ao criar uma conta ou utilizar nossa Plataforma, voc\xea concorda com estes Termos de Servi\xe7o. Leia-os com aten\xe7\xe3o."}),(0,We.jsx)("p",{className:"text-blue-700 mt-2",children:"Estes Termos representam os pontos essenciais do nosso acordo. Para consultar o Contrato de Presta\xe7\xe3o de Servi\xe7os na vers\xe3o integral, por favor, solicite atrav\xe9s do nosso e-mail de suporte."})]})]})}),(0,We.jsxs)("div",{className:"space-y-8",children:[(0,We.jsxs)("section",{children:[(0,We.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-sm",children:"1"}),(0,We.jsx)("span",{children:"Nossos Servi\xe7os"})]}),(0,We.jsx)("p",{children:'A AbaPlay concede a voc\xea uma licen\xe7a limitada, n\xe3o exclusiva e intransfer\xedvel para usar nosso software de gest\xe3o de pacientes e terapias ("Plataforma"), em regime de Software como Servi\xe7o (SaaS). O objetivo da Plataforma \xe9 auxiliar no gerenciamento dos tratamentos de seus pacientes.'})]}),(0,We.jsxs)("section",{children:[(0,We.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold text-sm",children:"2"}),(0,We.jsx)("span",{children:"Acesso e Seguran\xe7a da Conta"})]}),(0,We.jsx)("p",{children:"Seu acesso ser\xe1 liberado ap\xf3s a confirma\xe7\xe3o do primeiro pagamento. Voc\xea \xe9 o \xfanico respons\xe1vel por todas as atividades em sua conta e pela seguran\xe7a de suas senhas. A senha do usu\xe1rio Administrador s\xf3 poder\xe1 ser redefinida mediante solicita\xe7\xe3o formal ao nosso suporte oficial."})]}),(0,We.jsxs)("section",{children:[(0,We.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-green-600 font-bold text-sm",children:"3"}),(0,We.jsx)("span",{children:"Pagamento e Reajuste"})]}),(0,We.jsx)("p",{children:"O valor mensal do servi\xe7o \xe9 de R$ 34,90 por paciente contratado. O pagamento deve ser feito na data de vencimento acordada. O atraso implicar\xe1 em multa de 2% e juros de 1% ao m\xeas. O valor ser\xe1 reajustado anualmente pelo \xedndice IPCA/IBGE."})]}),(0,We.jsxs)("section",{children:[(0,We.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center text-red-600 font-bold text-sm",children:"4"}),(0,We.jsx)("span",{children:"Inadimpl\xeancia"})]}),(0,We.jsx)("p",{children:"O acesso \xe0 Plataforma ser\xe1 suspenso ap\xf3s 10 dias corridos de atraso no pagamento. Se o atraso persistir por 30 dias corridos, o contrato ser\xe1 rescindido e o acesso cancelado, sem preju\xedzo da cobran\xe7a dos valores devidos."})]}),(0,We.jsxs)("section",{children:[(0,We.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center text-yellow-600 font-bold text-sm",children:"5"}),(0,We.jsx)("span",{children:"Cancelamento"})]}),(0,We.jsx)("p",{children:"N\xe3o h\xe1 fidelidade. Voc\xea pode cancelar sua assinatura a qualquer momento, bastando nos notificar por e-mail com 30 dias de anteced\xeancia. Os servi\xe7os continuar\xe3o ativos e ser\xe3o cobrados normalmente durante este per\xedodo de aviso pr\xe9vio."})]}),(0,We.jsxs)("section",{children:[(0,We.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center text-purple-600 font-bold text-sm",children:"6"}),(0,We.jsx)("span",{children:"Disponibilidade do Servi\xe7o (SLA)"})]}),(0,We.jsx)("p",{children:"Nosso objetivo \xe9 manter a Plataforma dispon\xedvel (uptime) em 99% do tempo. Manuten\xe7\xf5es programadas ser\xe3o avisadas com anteced\xeancia. A medi\xe7\xe3o do uptime \xe9 feita por nossos servidores e exclui fatores externos (como a sua conex\xe3o com a internet)."})]}),(0,We.jsxs)("section",{children:[(0,We.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 font-bold text-sm",children:"7"}),(0,We.jsx)("span",{children:"Prote\xe7\xe3o de Dados (LGPD)"})]}),(0,We.jsx)("p",{children:"Voc\xea, ao utilizar a Plataforma, \xe9 o Controlador dos dados de seus pacientes e usu\xe1rios. A AbaPlay atua como Operadora, processando os dados apenas para o funcionamento do servi\xe7o. Voc\xea garante que possui a base legal necess\xe1ria (como o consentimento) para inserir e tratar quaisquer dados pessoais na Plataforma, isentando a AbaPlay de responsabilidade por uso indevido."})]}),(0,We.jsxs)("section",{children:[(0,We.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"w-8 h-8 bg-teal-100 rounded-full flex items-center justify-center text-teal-600 font-bold text-sm",children:"8"}),(0,We.jsx)("span",{children:"Propriedade Intelectual"})]}),(0,We.jsx)("p",{children:"A Plataforma, seu conte\xfado e a marca AbaPlay s\xe3o de nossa propriedade exclusiva. Voc\xea n\xe3o pode copiar, modificar ou tentar recriar nossa tecnologia."})]}),(0,We.jsxs)("section",{children:[(0,We.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"w-8 h-8 bg-orange-100 rounded-full flex items-center justify-center text-orange-600 font-bold text-sm",children:"9"}),(0,We.jsx)("span",{children:"Limita\xe7\xe3o de Responsabilidade"})]}),(0,We.jsx)("p",{children:"Nossa responsabilidade total por quaisquer danos ou preju\xedzos decorrentes do uso da Plataforma est\xe1 limitada ao valor pago por voc\xea nos \xfaltimos 3 meses."})]}),(0,We.jsxs)("section",{children:[(0,We.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"w-8 h-8 bg-cyan-100 rounded-full flex items-center justify-center text-cyan-600 font-bold text-sm",children:"10"}),(0,We.jsx)("span",{children:"Portabilidade e Exclus\xe3o de Dados"})]}),(0,We.jsx)("p",{children:"Ap\xf3s o cancelamento, voc\xea pode solicitar uma c\xf3pia de seus dados em formato CSV, que ser\xe1 fornecida em at\xe9 15 dias \xfateis. Seus dados ser\xe3o mantidos por 60 dias ap\xf3s o t\xe9rmino do contrato e depois ser\xe3o exclu\xeddos permanentemente."})]}),(0,We.jsxs)("section",{children:[(0,We.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"w-8 h-8 bg-pink-100 rounded-full flex items-center justify-center text-pink-600 font-bold text-sm",children:"11"}),(0,We.jsx)("span",{children:"Encerramento da Plataforma"})]}),(0,We.jsx)("p",{children:"Caso a AbaPlay seja descontinuada, notificaremos todos os usu\xe1rios com no m\xednimo 60 dias de anteced\xeancia, garantindo tempo para a transi\xe7\xe3o e exporta\xe7\xe3o de dados."})]}),(0,We.jsxs)("section",{children:[(0,We.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center text-gray-600 font-bold text-sm",children:"12"}),(0,We.jsx)("span",{children:"Contato e Foro"})]}),(0,We.jsxs)("p",{children:["O canal oficial para comunica\xe7\xf5es \xe9 o e-mail ",(0,We.jsx)("strong",{children:"ABAPLAYOFICIAL@GMAIL.COM"}),". Fica eleito o foro da Comarca de S\xe3o Paulo, SP, para resolver quaisquer disputas."]})]})]}),(0,We.jsx)("div",{className:"mt-12 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl border border-blue-200",children:(0,We.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,We.jsx)(Vn,{icon:cr,className:"text-blue-600 text-2xl mt-1"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"Concord\xe2ncia"}),(0,We.jsx)("p",{className:"text-blue-700",children:'Ao clicar em "Aceitar" ou ao continuar usando a Plataforma, voc\xea confirma que leu, entendeu e concorda em cumprir estes Termos de Servi\xe7o.'})]})]})})]})})]}),(0,We.jsxs)("div",{className:"border-t border-gray-200 p-6 bg-gray-50 rounded-b-3xl",children:[!o&&(0,We.jsx)("div",{className:"mb-4 p-3 bg-yellow-100 border border-yellow-200 rounded-xl",children:(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:To,className:"text-yellow-600"}),(0,We.jsx)("p",{className:"text-yellow-800 text-sm font-medium",children:"Voc\xea precisa ler todos os termos antes de prosseguir"})]})}),(0,We.jsxs)("div",{className:"flex space-x-4",children:[(0,We.jsx)("button",{onClick:n,disabled:r,className:"flex-1 py-3 px-6 bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold rounded-xl transition-colors disabled:opacity-50",children:"N\xe3o Aceito"}),(0,We.jsx)("button",{onClick:async()=>{d(!0);try{await a()}catch(e){console.error("Erro ao aceitar termos:",e)}finally{d(!1)}},disabled:!o||r||c,className:"flex-1 py-3 px-6 font-semibold rounded-xl transition-all flex items-center justify-center space-x-2 ".concat(!o||r||c?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white shadow-lg hover:shadow-xl"),children:c?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin"}),(0,We.jsx)("span",{children:"Processando..."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:Ur}),(0,We.jsx)("span",{children:"Aceito os Termos"})]})})]})]})]})}):null},Vo=()=>(0,We.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,We.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600 via-indigo-700 to-purple-800",children:(0,We.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})}),(0,We.jsxs)("div",{className:"absolute inset-0",children:[(0,We.jsx)("div",{className:"absolute top-1/4 left-1/4 w-32 h-32 bg-white/5 rounded-full blur-xl animate-pulse"}),(0,We.jsx)("div",{className:"absolute top-3/4 right-1/4 w-24 h-24 bg-blue-400/10 rounded-full blur-lg animate-bounce",style:{animationDuration:"3s"}}),(0,We.jsx)("div",{className:"absolute top-1/2 left-1/3 w-16 h-16 bg-purple-400/10 rounded-full blur-md animate-ping",style:{animationDuration:"2s"}}),(0,We.jsx)("div",{className:"absolute top-20 right-20 w-20 h-20 border border-white/10 rotate-45 animate-spin",style:{animationDuration:"20s"}}),(0,We.jsx)("div",{className:"absolute bottom-20 left-20 w-16 h-16 bg-gradient-to-r from-cyan-400/20 to-blue-400/20 transform rotate-12 animate-pulse"})]}),(0,We.jsx)("div",{className:"absolute bottom-0 left-0 w-full h-32",children:(0,We.jsx)("svg",{className:"absolute bottom-0 w-full h-full",viewBox:"0 0 1200 120",preserveAspectRatio:"none",children:(0,We.jsx)("path",{d:"M0,60 C300,100 900,20 1200,60 L1200,120 L0,120 Z",fill:"rgba(255,255,255,0.05)",className:"animate-pulse",children:(0,We.jsx)("animate",{attributeName:"d",dur:"10s",repeatCount:"indefinite",values:"M0,60 C300,100 900,20 1200,60 L1200,120 L0,120 Z; M0,80 C300,40 900,80 1200,40 L1200,120 L0,120 Z; M0,60 C300,100 900,20 1200,60 L1200,120 L0,120 Z"})})})})]}),Go=()=>{const[e,t]=(0,s.useState)(0),a=[{icon:ni,title:"Progresso Vis\xedvel em Tempo Real",description:"Gr\xe1ficos interativos que mostram a evolu\xe7\xe3o de cada crian\xe7a",visual:(0,We.jsxs)("div",{className:"flex space-x-2 items-end justify-center h-16",children:[(0,We.jsx)("div",{className:"w-3 bg-cyan-400 rounded-t animate-pulse",style:{height:"20%",animationDelay:"0s"}}),(0,We.jsx)("div",{className:"w-3 bg-blue-400 rounded-t animate-pulse",style:{height:"40%",animationDelay:"0.2s"}}),(0,We.jsx)("div",{className:"w-3 bg-indigo-400 rounded-t animate-pulse",style:{height:"60%",animationDelay:"0.4s"}}),(0,We.jsx)("div",{className:"w-3 bg-purple-400 rounded-t animate-pulse",style:{height:"80%",animationDelay:"0.6s"}}),(0,We.jsx)("div",{className:"w-3 bg-pink-400 rounded-t animate-pulse",style:{height:"100%",animationDelay:"0.8s"}})]})},{icon:rr,title:"Equipe e Pais Conectados",description:"Comunica\xe7\xe3o instant\xe2nea com sistema de men\xe7\xf5es inteligente",visual:(0,We.jsxs)("div",{className:"flex justify-center items-center space-x-4",children:[(0,We.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-cyan-400 to-blue-400 rounded-full animate-ping"}),(0,We.jsxs)("div",{className:"flex space-x-1",children:[(0,We.jsx)("div",{className:"w-1 h-1 bg-white rounded-full animate-bounce",style:{animationDelay:"0s"}}),(0,We.jsx)("div",{className:"w-1 h-1 bg-white rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,We.jsx)("div",{className:"w-1 h-1 bg-white rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),(0,We.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full animate-ping",style:{animationDelay:"1s"}})]})},{icon:hr,title:"Decis\xf5es Baseadas em Dados",description:"Insights precisos para otimizar as interven\xe7\xf5es terap\xeauticas",visual:(0,We.jsxs)("div",{className:"relative flex justify-center items-center",children:[(0,We.jsx)("div",{className:"w-12 h-12 border-4 border-yellow-400/30 rounded-full animate-spin",style:{animationDuration:"3s"},children:(0,We.jsx)("div",{className:"absolute inset-2 bg-gradient-to-r from-yellow-400 to-orange-400 rounded-full animate-pulse"})}),(0,We.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:hr,className:"text-yellow-300 text-xl animate-pulse"})})]})}];return(0,s.useEffect)((()=>{const e=setInterval((()=>{t((e=>(e+1)%a.length))}),4e3);return()=>clearInterval(e)}),[]),(0,We.jsxs)("div",{className:"relative h-48 flex flex-col items-center justify-center text-center",children:[(0,We.jsx)("div",{className:"mb-6",children:a[e].visual}),(0,We.jsxs)("div",{className:"space-y-3",children:[(0,We.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,We.jsx)(Vn,{icon:a[e].icon,className:"text-cyan-400 text-xl"}),(0,We.jsx)("h3",{className:"text-xl font-bold text-white",children:a[e].title})]}),(0,We.jsx)("p",{className:"text-blue-100 text-sm max-w-xs leading-relaxed",children:a[e].description})]}),(0,We.jsx)("div",{className:"flex space-x-2 mt-6",children:a.map(((a,s)=>(0,We.jsx)("button",{className:"w-2 h-2 rounded-full transition-all duration-300 ".concat(s===e?"bg-cyan-400 w-6":"bg-white/30 hover:bg-white/50"),onClick:()=>t(s)},s)))})]})},Yo=()=>{const[e,t]=(0,s.useState)({sessions:0,therapists:0,improvement:0}),a=15247,n=284,r=87;return(0,s.useEffect)((()=>{const e=setInterval((()=>{t((e=>({sessions:Math.min(e.sessions+Math.ceil(a/60),a),therapists:Math.min(e.therapists+Math.ceil(n/60),n),improvement:Math.min(e.improvement+Math.ceil(r/60),r)})))}),2e3/60);return setTimeout((()=>clearInterval(e)),2e3),()=>clearInterval(e)}),[]),(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,We.jsxs)("span",{className:"text-blue-100 text-sm",children:[(0,We.jsxs)("span",{className:"font-bold text-white",children:["+",e.sessions.toLocaleString()]})," sess\xf5es registradas este m\xeas"]})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-cyan-400 rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),(0,We.jsxs)("span",{className:"text-blue-100 text-sm",children:[(0,We.jsxs)("span",{className:"font-bold text-white",children:["+",e.therapists]})," terapeutas ativos hoje"]})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse",style:{animationDelay:"1s"}}),(0,We.jsxs)("span",{className:"text-blue-100 text-sm",children:[(0,We.jsxs)("span",{className:"font-bold text-white",children:[e.improvement,"%"]})," das crian\xe7as mostram melhoria em 30 dias"]})]})]})},$o=()=>{var e,t;const[a,n]=(0,s.useState)(""),[r,i]=(0,s.useState)(""),[o,l]=(0,s.useState)(""),[c,d]=(0,s.useState)(!1),{login:u}=Ye(),h=Z(),m=K(),[p,f]=(0,s.useState)("enter_username"),[g,x]=(0,s.useState)(null),[b,v]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),[N,w]=(0,s.useState)(!1),[_,S]=(0,s.useState)(!1),[C,k]=(0,s.useState)(null),A=(null===(e=m.state)||void 0===e||null===(t=e.from)||void 0===t||t.pathname,async e=>{e.preventDefault(),d(!0),l("");try{const e=await(async e=>{const t=await fetch("".concat(qe.H,"/auth/check-user"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e})});if(!t.ok){var a,s;const e=await t.json().catch((()=>({})));throw new Error((null===e||void 0===e||null===(a=e.errors)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.msg)||"Erro ao verificar utilizador.")}return t.json()})(a);"SET_PASSWORD"===e.action?(x(e.user),f("set_password")):"REQUIRE_PASSWORD"===e.action&&f("enter_password")}catch(t){console.error("Erro em handleUsernameSubmit:",t.message),l(t.message)}finally{d(!1)}}),P=async e=>{e.preventDefault(),d(!0),l("");try{const e=await(async e=>{const t=await fetch("".concat(qe.H,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){var a,s;const e=await t.json().catch((()=>({})));throw new Error((null===e||void 0===e||null===(a=e.errors)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.msg)||"Erro ao tentar fazer login.")}return t.json()})({username:a,password:r});if(e.user&&e.user.is_admin&&!e.user.terms_accepted_at)return k(e),S(!0),void d(!1);await u(e.token);let t="/";if(e.user&&e.user.role){switch(e.user.role.toLowerCase()){case"admin":case"therapist":t="/dashboard";break;case"pai":t="/parent-dashboard";break;default:t="/"}}h(t,{replace:!0})}catch(t){console.error("Erro em handleLoginSubmit:",t.message),l(t.message)}finally{d(!1)}},E=async e=>{if(e.preventDefault(),b===y)if(b.length<6)l("A senha deve ter pelo menos 6 caracteres.");else{d(!0),l("");try{const e=await(async(e,t)=>{const a=await fetch("".concat(qe.H,"/auth/set-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,password:t})});if(!a.ok){var s,n;const e=await a.json().catch((()=>({})));throw new Error((null===e||void 0===e||null===(s=e.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"N\xe3o foi poss\xedvel definir a senha.")}return a.json()})(g.userId,b);if(e&&e.token){if(e.user&&e.user.is_admin&&!e.user.terms_accepted_at)return k(e),S(!0),void d(!1);await u(e.token);let t="/";if(e.user&&e.user.role){switch(e.user.role.toLowerCase()){case"admin":case"therapist":t="/dashboard";break;case"pai":t="/parent-dashboard";break;default:t="/"}}h(t,{replace:!0})}else l("N\xe3o foi poss\xedvel fazer o login autom\xe1tico. Por favor, tente novamente."),f("enter_username")}catch(t){l((null===t||void 0===t?void 0:t.message)||"Ocorreu um erro desconhecido ao definir a senha.")}finally{d(!1)}}else l("As senhas n\xe3o coincidem.")};return(0,We.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-100 flex items-center justify-center p-4",children:[(0,We.jsx)("div",{className:"w-full max-w-7xl mx-auto",children:(0,We.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden lg:grid lg:grid-cols-5 border border-gray-100",children:[(0,We.jsxs)("div",{className:"relative hidden lg:block lg:col-span-3",children:[(0,We.jsx)(Vo,{}),(0,We.jsxs)("div",{className:"relative z-10 p-12 flex flex-col justify-between h-full min-h-[700px]",children:[(0,We.jsx)("div",{className:"text-center",children:(0,We.jsxs)("div",{className:"flex items-center justify-center space-x-4 mb-6",children:[(0,We.jsx)("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:Io,className:"text-2xl text-white"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h1",{className:"text-3xl font-bold text-white tracking-wide",children:"ABAplay"}),(0,We.jsx)("p",{className:"text-blue-200 text-sm",children:"Transformando Vidas atrav\xe9s da Ci\xeancia"})]})]})}),(0,We.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,We.jsx)(Go,{})}),(0,We.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-6 border border-white/20 mb-8",children:[(0,We.jsx)("h3",{className:"text-white font-semibold mb-4 text-center",children:"Atividade em Tempo Real"}),(0,We.jsx)(Yo,{})]}),(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("p",{className:"text-blue-200 text-sm mb-3",children:"Usado por cl\xednicas l\xedderes em interven\xe7\xe3o infantil"}),(0,We.jsxs)("div",{className:"flex items-center justify-center space-x-6 opacity-60",children:[(0,We.jsx)("div",{className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:jo,className:"text-white text-sm"})}),(0,We.jsx)("div",{className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:ii,className:"text-white text-sm"})}),(0,We.jsx)("div",{className:"w-8 h-8 bg-white/10 rounded-lg flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:Jr,className:"text-white text-sm"})})]}),(0,We.jsxs)("p",{className:"text-blue-300 text-xs mt-4",children:["\xa9 ",(new Date).getFullYear()," ABAplay. Todos os direitos reservados."]})]})]})]}),(0,We.jsx)("div",{className:"lg:col-span-2 p-8 lg:p-12 flex flex-col justify-center",children:(0,We.jsxs)("div",{className:"w-full max-w-md mx-auto",children:[(0,We.jsxs)("div",{className:"text-center mb-10 lg:hidden",children:[(0,We.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,We.jsx)(Vn,{icon:Io,className:"text-2xl text-white"})}),(0,We.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Bem-vindo \xe0 ABAplay"}),(0,We.jsx)("p",{className:"text-gray-600",children:"Sua plataforma de interven\xe7\xe3o infantil"})]}),(0,We.jsxs)("div",{className:"hidden lg:block text-center mb-10",children:[(0,We.jsxs)("h2",{className:"text-3xl font-bold text-gray-800 mb-3",children:["enter_username"===p&&"Bem-vindo de volta","enter_password"===p&&"Quase l\xe1!","set_password"===p&&"Primeiro Acesso"]}),(0,We.jsxs)("p",{className:"text-gray-600 leading-relaxed",children:["enter_username"===p&&"Acesse sua conta e continue transformando vidas","enter_password"===p&&"Digite sua senha para acessar a plataforma","set_password"===p&&"Configure sua conta para come\xe7ar"]})]}),o&&(0,We.jsx)("div",{className:"mb-6 p-4 bg-gradient-to-r from-red-50 to-pink-50 border border-red-200 rounded-2xl",children:(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full flex-shrink-0"}),(0,We.jsx)("p",{className:"text-red-700 text-sm font-medium",children:o})]})}),(0,We.jsx)("div",{className:"space-y-6",children:(()=>{const e="w-full pl-12 pr-4 py-4 bg-gray-50 border border-gray-200 rounded-2xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent focus:bg-white transition-all duration-300 font-medium",t="w-full flex items-center justify-center py-4 px-6 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-2xl hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5";switch(p){case"enter_password":return(0,We.jsxs)("form",{onSubmit:P,className:"space-y-8",children:[(0,We.jsx)("div",{className:"text-left",children:(0,We.jsxs)("button",{type:"button",onClick:()=>{f("enter_username"),l("")},className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 font-medium text-sm transition-colors",children:[(0,We.jsx)(Vn,{icon:ri,className:"rotate-180"}),(0,We.jsx)("span",{children:"Voltar para utilizador"})]})}),(0,We.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100",children:(0,We.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,We.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:Sr,className:"text-white"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-500",children:"Utilizador"}),(0,We.jsx)("p",{className:"font-bold text-xl text-gray-800",children:a})]})]})}),(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsx)("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700",children:"Senha de Acesso"}),(0,We.jsxs)("div",{className:"relative",children:[(0,We.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,We.jsx)(Vn,{icon:Cr,className:"text-gray-400"})}),(0,We.jsx)("input",{id:"password",name:"password",type:N?"text":"password",required:!0,autoFocus:!0,value:r,onChange:e=>i(e.target.value),className:e,placeholder:"Digite sua senha"}),(0,We.jsx)("button",{type:"button",onClick:()=>w(!N),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-blue-600 transition-colors",children:(0,We.jsx)(Vn,{icon:N?jr:li})})]})]}),(0,We.jsx)("button",{type:"submit",disabled:c,className:t,children:c?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin mr-3"}),(0,We.jsx)("span",{children:"Entrando..."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("span",{children:"Entrar na Plataforma"}),(0,We.jsx)(Vn,{icon:ri,className:"ml-3"})]})})]});case"set_password":return(0,We.jsxs)("form",{onSubmit:E,className:"space-y-8",children:[(0,We.jsxs)("div",{className:"text-center bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100",children:[(0,We.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,We.jsx)(Vn,{icon:Ho,className:"text-white text-xl"})}),(0,We.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:["Bem-vindo(a), ",(null===g||void 0===g?void 0:g.fullName)||(null===g||void 0===g?void 0:g.username),"!"]}),(0,We.jsx)("p",{className:"text-gray-600",children:"Este \xe9 o seu primeiro acesso. Vamos criar uma senha segura para proteger sua conta."})]}),(0,We.jsxs)("div",{className:"space-y-6",children:[(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-semibold text-gray-700",children:"Nova Senha"}),(0,We.jsxs)("div",{className:"relative",children:[(0,We.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,We.jsx)(Vn,{icon:Cr,className:"text-gray-400"})}),(0,We.jsx)("input",{id:"newPassword",type:N?"text":"password",required:!0,autoFocus:!0,value:b,onChange:e=>v(e.target.value),className:e,placeholder:"Crie uma senha segura"}),(0,We.jsx)("button",{type:"button",onClick:()=>w(!N),className:"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-blue-600 transition-colors",children:(0,We.jsx)(Vn,{icon:N?jr:li})})]})]}),(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700",children:"Confirmar Senha"}),(0,We.jsxs)("div",{className:"relative",children:[(0,We.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,We.jsx)(Vn,{icon:Jr,className:"text-gray-400"})}),(0,We.jsx)("input",{id:"confirmPassword",type:"password",required:!0,value:y,onChange:e=>j(e.target.value),className:e,placeholder:"Confirme sua senha"})]})]})]}),(0,We.jsx)("button",{type:"submit",disabled:c,className:t,children:c?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin mr-3"}),(0,We.jsx)("span",{children:"Configurando..."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("span",{children:"Definir Senha e Entrar"}),(0,We.jsx)(Vn,{icon:co,className:"ml-3"})]})})]});default:return(0,We.jsxs)("form",{onSubmit:A,className:"space-y-8",children:[(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsx)("label",{htmlFor:"username",className:"block text-sm font-semibold text-gray-700",children:"Utilizador ou Email"}),(0,We.jsxs)("div",{className:"relative",children:[(0,We.jsx)("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:(0,We.jsx)(Vn,{icon:Sr,className:"text-gray-400"})}),(0,We.jsx)("input",{id:"username",name:"username",type:"text",required:!0,autoFocus:!0,value:a,onChange:e=>n(e.target.value),className:e,placeholder:"Digite seu utilizador ou email"})]})]}),(0,We.jsx)("button",{type:"submit",disabled:c,className:t,children:c?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin mr-3"}),(0,We.jsx)("span",{children:"Verificando..."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("span",{children:"Continuar"}),(0,We.jsx)(Vn,{icon:ri,className:"ml-3"})]})})]})}})()}),(0,We.jsxs)("div",{className:"mt-8 text-center space-y-4",children:[(0,We.jsxs)("p",{className:"text-sm text-gray-500",children:["Primeira vez na plataforma?"," ",(0,We.jsx)("a",{href:"mailto:abaplayoficial@gmail.com?subject=Solicitar Acesso - ABAplay",className:"font-semibold text-blue-600 hover:text-blue-700 transition-colors",children:"Solicite seu acesso"})]}),(0,We.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-4 border border-gray-100",children:[(0,We.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Problemas com o acesso?"}),(0,We.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[(0,We.jsxs)("a",{href:"mailto:abaplayoficial@gmail.com?subject=Suporte - Problema de Acesso",className:"flex items-center justify-center space-x-2 px-4 py-2 bg-white border border-gray-200 rounded-xl hover:border-blue-300 hover:bg-blue-50 transition-all duration-200 text-gray-700 hover:text-blue-700 group",children:[(0,We.jsx)(Vn,{icon:yi,className:"text-gray-500 group-hover:text-blue-600 transition-colors"}),(0,We.jsx)("span",{className:"text-sm font-medium",children:"Email Suporte"})]}),(0,We.jsxs)("a",{href:"https://wa.me/5511988543437?text=Ol\xe1! Preciso de ajuda com o acesso \xe0 plataforma ABAplay.",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl transition-all duration-200 shadow-sm hover:shadow-md group",children:[(0,We.jsx)(Vn,{icon:mi,className:"text-green-100 group-hover:text-white transition-colors"}),(0,We.jsx)("span",{className:"text-sm font-medium",children:"WhatsApp"})]})]}),(0,We.jsxs)("p",{className:"text-xs text-gray-500 mt-3",children:[(0,We.jsx)(Vn,{icon:yi,className:"mr-1"}),"abaplayoficial@gmail.com"]})]})]})]})})]})}),(0,We.jsx)(Wo,{isOpen:_,onAccept:async()=>{if(C)try{await(async e=>{const t=await fetch("".concat(qe.H,"/auth/accept-terms"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e})});if(!t.ok){var a,s;const e=await t.json().catch((()=>({})));throw new Error((null===e||void 0===e||null===(a=e.errors)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.msg)||"N\xe3o foi poss\xedvel aceitar os termos.")}return t.json()})(C.user.id),await u(C.token);let e="/";if(C.user&&C.user.role){switch(C.user.role.toLowerCase()){case"admin":case"therapist":e="/dashboard";break;case"pai":e="/parent-dashboard";break;default:e="/"}}S(!1),k(null),h(e,{replace:!0})}catch(o){console.error("Erro ao aceitar termos:",o),l("Erro ao processar aceita\xe7\xe3o dos termos. Tente novamente."),S(!1),k(null)}},onDecline:()=>{S(!1),k(null),l("\xc9 necess\xe1rio aceitar os termos para continuar.")},isLoading:c,userInfo:null===C||void 0===C?void 0:C.user})]})},Xo="".concat(qe.H,"/notifications"),Jo=async e=>{try{console.log("[NOTIFICATION-LOG] getNotifications: Buscando para userId:",e);const t=localStorage.getItem("token"),a=await $e.A.get(Xo,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});return console.log("[NOTIFICATION-LOG] getNotifications: Sucesso"),a.data}catch(a){var t;throw console.error("[NOTIFICATION-LOG] getNotifications: Erro -",(null===(t=a.response)||void 0===t?void 0:t.data)||a.message),a}},Ko=s.forwardRef(((e,t)=>{let{className:a=""}=e;const[n,r]=(0,s.useState)(0),[i,o]=(0,s.useState)(!0),{user:l}=Ye(),c=async()=>{if(null!==l&&void 0!==l&&l.id)try{const e=(await Jo(l.id)).filter((e=>e.unreadCount>0)).length;r(e||0)}catch(e){console.error("Erro ao buscar total de n\xe3o lidas:",e),r(0)}finally{o(!1)}};(0,s.useEffect)((()=>{if(null!==l&&void 0!==l&&l.id){c();const e=setInterval(c,3e4);return window.addEventListener("messageSentOrReceived",c),()=>{clearInterval(e),window.removeEventListener("messageSentOrReceived",c)}}}),[l,c]);const d=()=>{c()};return s.useImperativeHandle(t,(()=>({updateCount:d}))),i?(0,We.jsx)("div",{className:"relative ".concat(a),children:(0,We.jsx)(Vn,{icon:Gi,className:"text-gray-400"})}):(0,We.jsxs)("div",{className:"relative ".concat(a),children:[(0,We.jsx)(Vn,{icon:Gi,className:"transition-colors duration-200 ".concat(n>0?"text-indigo-600":"text-gray-500 hover:text-indigo-600")}),n>0&&(0,We.jsx)("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center min-w-[20px] px-1",children:n>99?"99+":n})]})})),Qo=e=>{let{onClose:t,onProgramCompleted:a}=e;const[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(null),h=()=>{c(!1),setTimeout((()=>{t&&t()}),300)};(0,s.useEffect)((()=>{m(),c(!0);const e=e=>{"Escape"===e.key&&h()};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)}),[]);const m=async()=>{try{o(!0),u(null);const e=localStorage.getItem("token");if(!e)return void u("Token de autentica\xe7\xe3o n\xe3o encontrado");const t=await $e.A.get("".concat(qe.H,"/notifications/progress-alerts"),{headers:{Authorization:"Bearer ".concat(e)}});r(t.data||[])}catch(d){var e,t,a,s;u((null===(e=d.response)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.errors)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.msg)||d.message||"Erro desconhecido"),r([])}finally{o(!1)}};return l?(0,We.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-center bg-black bg-opacity-50 pt-20",onClick:h,children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] transform transition-all duration-300 ".concat(l?"scale-100 opacity-100":"scale-95 opacity-0"),onClick:e=>e.stopPropagation(),children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:_r,className:"text-amber-600 text-lg"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Alertas de Progresso"}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Programas com 80%+ de progresso que podem estar dominados"})]})]}),(0,We.jsx)("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsx)("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(80vh - 200px)"},children:i?(0,We.jsxs)("div",{className:"text-center py-8",children:[(0,We.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,We.jsx)("p",{className:"mt-2 text-gray-600",children:"Carregando alertas..."})]}):d?(0,We.jsxs)("div",{className:"text-center py-8 text-red-600",children:[(0,We.jsx)(Vn,{icon:lo,className:"mx-auto text-4xl text-red-500 mb-4"}),(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsx)("p",{className:"font-semibold",children:"Erro ao carregar alertas"}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:d}),(0,We.jsx)("button",{onClick:m,className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 transition-colors",children:"Tentar Novamente"})]})]}):0===n.length?(0,We.jsxs)("div",{className:"text-center py-8 text-gray-600",children:[(0,We.jsx)(Vn,{icon:Ur,className:"mx-auto text-4xl text-green-500 mb-4"}),(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsx)("p",{className:"font-semibold text-gray-700",children:"Nenhum programa precisa de verifica\xe7\xe3o no momento!"}),(0,We.jsxs)("div",{className:"text-sm text-gray-500 space-y-1",children:[(0,We.jsx)("p",{children:"\u2022 Programas precisam ter \u22655 sess\xf5es registradas"}),(0,We.jsx)("p",{children:"\u2022 Progresso deve estar \u226580% nas \xfaltimas sess\xf5es"}),(0,We.jsx)("p",{children:"\u2022 Continue registrando sess\xf5es para acompanhar o progresso"})]})]})]}):(0,We.jsx)("div",{className:"space-y-4",children:n.map((e=>(0,We.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[(0,We.jsxs)("div",{className:"flex items-start justify-between",children:[(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,We.jsx)(Vn,{icon:Sr,className:"text-blue-600 text-sm"}),(0,We.jsx)("span",{className:"font-medium text-gray-800",children:e.patient_name})]}),(0,We.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:e.program_name}),(0,We.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("span",{children:"Progresso:"}),(0,We.jsxs)("span",{className:"font-semibold text-amber-600",children:[Math.round(e.progress_average),"%"]})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("span",{children:"Sess\xf5es:"}),(0,We.jsx)("span",{className:"font-semibold",children:e.sessions_count})]})]})]}),(0,We.jsx)("div",{className:"flex items-center space-x-2 ml-4",children:(0,We.jsxs)("button",{onClick:()=>(async e=>{try{const t=localStorage.getItem("token");await $e.A.post("".concat(qe.H,"/notifications/mark-completed"),{assignmentId:e.assignment_id,patientId:e.patient_id},{headers:{Authorization:"Bearer ".concat(t)}}),r((t=>t.filter((t=>t.assignment_id!==e.assignment_id)))),a&&a()}catch(d){}})(e),className:"bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors flex items-center space-x-1",children:[(0,We.jsx)(Vn,{icon:Ur}),(0,We.jsx)("span",{children:"Dominado"})]})})]}),(0,We.jsx)("div",{className:"mt-3",children:(0,We.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,We.jsx)("div",{className:"bg-amber-500 h-2 rounded-full transition-all duration-300",style:{width:"".concat(Math.min(e.progress_average,100),"%")}})})})]},e.assignment_id)))})}),!i&&!d&&n.length>0&&(0,We.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:(0,We.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Revise se estes programas j\xe1 foram aprendidos e marque como dominados se necess\xe1rio"})})]})}):null},Zo=e=>{let{isOpen:t,onClose:a,onNotificationClick:n}=e;const{selectedPatient:r,refreshPatientData:i}=dt(),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(!1),m=async()=>{try{d(!0);const e=await Jo();l(e||[])}catch(e){console.error("Erro ao buscar notifica\xe7\xf5es:",e),l([])}finally{d(!1)}};(0,s.useEffect)((()=>(t&&m(),window.addEventListener("messageSentOrReceived",m),()=>{window.removeEventListener("messageSentOrReceived",m)})),[t]);const p=async e=>{try{if("progress_alert"===e.chatType)return void h(!0);await(async(e,t)=>{try{console.log("[NOTIFICATION-LOG] markAsRead: Marcando como lida - patientId:",e,"chatType:",t);const a=localStorage.getItem("token"),s=await $e.A.post("".concat(Xo,"/mark-read"),{patientId:e,chatType:t},{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});return console.log("[NOTIFICATION-LOG] markAsRead: Sucesso"),s.data}catch(s){var a;throw console.error("[NOTIFICATION-LOG] markAsRead: Erro -",(null===(a=s.response)||void 0===a?void 0:a.data)||s.message),s}})(e.patientId,e.chatType),l((t=>t.map((t=>t.userId===e.userId&&t.patientId===e.patientId&&t.chatType===e.chatType?(0,Ie.A)((0,Ie.A)({},t),{},{unreadCount:0}):t)))),n&&n(e)}catch(t){console.error("Erro ao marcar como lida:",t)}},f=e=>{switch(e){case"case_discussion":return"Discuss\xe3o de Caso";case"parent_chat":return"Chat com Pais";case"progress_alert":return"Alerta de Progresso";default:return"Notifica\xe7\xe3o"}},g=e=>{switch(e){case"case_discussion":return yr;case"parent_chat":default:return rr;case"progress_alert":return _r}},x=e=>{if(!e)return"Nunca lida";const t=new Date(e),a=new Date,s=Math.floor((a-t)/36e5);if(s<1)return"H\xe1 poucos minutos";if(s<24)return"H\xe1 ".concat(s," hora").concat(s>1?"s":"");const n=Math.floor(s/24);return"H\xe1 ".concat(n," dia").concat(n>1?"s":"")},b=()=>{h(!1),m()};return t?(0,We.jsxs)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center pt-16",children:[(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4 max-h-[80vh] overflow-hidden",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Notifica\xe7\xf5es"}),(0,We.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsx)("div",{className:"overflow-y-auto max-h-96",children:c?(0,We.jsx)("div",{className:"p-4 text-center text-gray-500",children:"Carregando notifica\xe7\xf5es..."}):0===o.length?(0,We.jsx)("div",{className:"p-4 text-center text-gray-500",children:"Nenhuma notifica\xe7\xe3o encontrada"}):(0,We.jsx)("div",{className:"divide-y divide-gray-200",children:o.map((e=>(0,We.jsxs)("div",{className:"p-4 hover:bg-gray-50 transition-colors cursor-pointer ".concat(e.unreadCount>0?"bg-blue-50":""),onClick:()=>p(e),children:[(0,We.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,We.jsx)("div",{className:"p-2 rounded-full ".concat(e.unreadCount>0?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-600"),children:(0,We.jsx)(Vn,{icon:g(e.chatType)})}),(0,We.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.patient_name}),e.unreadCount>0&&(0,We.jsx)("span",{className:"bg-red-500 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:e.unreadCount>99?"99+":e.unreadCount})]}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:f(e.chatType)}),(0,We.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["\xdaltima leitura: ",x(e.lastReadTimestamp)]})]})]}),e.unreadCount>0&&(0,We.jsxs)("div",{className:"mt-2 flex items-center text-xs text-indigo-600",children:[(0,We.jsx)(Vn,{icon:li,className:"mr-1"}),"Clique para marcar como lida"]})]},"".concat(e.userId,"-").concat(e.patientId,"-").concat(e.chatType))))})}),(0,We.jsx)("div",{className:"p-4 border-t border-gray-200 bg-gray-50",children:(0,We.jsx)("button",{onClick:a,className:"w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Fechar"})})]}),u&&(0,We.jsx)(Qo,{onClose:b,onProgramCompleted:async()=>{null!==r&&void 0!==r&&r.id&&await i(),b()}})]}):null},el=e=>{let{toggleSidebar:t}=e;const{user:a,logout:n}=Ye(),{selectedPatient:r,refreshPatientData:i}=dt(),[o,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1),m=(0,s.useRef)(null),p=(0,s.useRef)(null),f=(0,s.useRef)(null),g=()=>{var e;h(!1),null!==(e=f.current)&&void 0!==e&&e.updateCount&&f.current.updateCount()};(0,s.useEffect)((()=>{const e=e=>{m.current&&!m.current.contains(e.target)&&p.current&&!p.current.contains(e.target)&&l(!1)},t=()=>{h(!0)};return document.addEventListener("mousedown",e),window.addEventListener("checkProgressAlerts",t),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("checkProgressAlerts",t)}}),[]);const x="pai"!==(null===a||void 0===a?void 0:a.role),b=e=>{let{isMobile:t=!1,onLinkClick:s=()=>{}}=e;const n=K(),r="flex items-center font-medium transition-colors duration-200",i=e=>{const a=n.pathname.startsWith(e);return t?"".concat(r," ").concat("px-4 py-3 rounded-lg text-base"," ").concat(a?"bg-gradient-to-r from-indigo-600 to-purple-700 text-white shadow-lg transform scale-105":"text-gray-600 hover:bg-gradient-to-r hover:from-indigo-50 hover:to-purple-50 hover:text-indigo-700 transition-all"):"".concat(r," ").concat("px-3 py-2 rounded-md text-sm"," ").concat(a?"bg-gradient-to-r from-indigo-600 to-purple-700 text-white shadow-lg":"text-gray-600 hover:bg-gradient-to-r hover:from-indigo-50 hover:to-purple-50 hover:text-indigo-700")};return"pai"===(null===a||void 0===a?void 0:a.role)?(0,We.jsxs)(Oe,{to:"/",className:()=>i("/"),onClick:s,children:[(0,We.jsx)(Vn,{icon:$i,className:"fa-fw mr-2"})," Acompanhamento"]}):(0,We.jsxs)(We.Fragment,{children:[(null===a||void 0===a?void 0:a.is_admin)&&(0,We.jsxs)(Oe,{to:"/admin",className:()=>i("/admin"),onClick:s,children:[(0,We.jsx)(Vn,{icon:no,className:"fa-fw mr-2"})," Admin"]}),(0,We.jsxs)(Oe,{to:"/dashboard",className:()=>i("/dashboard"),onClick:s,children:[(0,We.jsx)(Vn,{icon:$i,className:"fa-fw mr-2"})," Dashboard"]}),!(null!==a&&void 0!==a&&a.is_admin)&&(0,We.jsxs)(Oe,{to:"/clients",className:()=>i("/clients"),onClick:s,children:[(0,We.jsx)(Vn,{icon:yr,className:"fa-fw mr-2"})," Clientes"]}),(0,We.jsxs)(Oe,{to:"/programs",className:()=>i("/programs"),onClick:s,children:[(0,We.jsx)(Vn,{icon:Rr,className:"fa-fw mr-2"})," Programas"]}),(null===a||void 0===a?void 0:a.is_admin)&&(0,We.jsxs)(Oe,{to:"/scheduling",className:()=>i("/scheduling"),onClick:s,children:[(0,We.jsx)(Vn,{icon:er,className:"fa-fw mr-2"})," Agendamentos"]}),"terapeuta"===(null===a||void 0===a?void 0:a.role)&&!(null!==a&&void 0!==a&&a.is_admin)&&(0,We.jsxs)(Oe,{to:"/my-schedule",className:()=>i("/my-schedule"),onClick:s,children:[(0,We.jsx)(Vn,{icon:Si,className:"fa-fw mr-2"})," Minha Agenda"]}),(0,We.jsxs)(Oe,{to:"/notes",className:()=>i("/notes"),onClick:s,children:[(0,We.jsx)(Vn,{icon:nr,className:"fa-fw mr-2"})," Anota\xe7\xf5es"]})]})};return(0,We.jsxs)("header",{className:"bg-gradient-to-r from-white via-indigo-50/30 to-purple-50/30 backdrop-blur-md sticky top-0 z-10 w-full flex-shrink-0 border-b border-indigo-200/50 shadow-sm",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between px-4 sm:px-6 h-16",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[x&&(0,We.jsx)("button",{onClick:t,className:"lg:hidden mr-3 p-2 rounded-md text-gray-600 hover:text-white hover:bg-gradient-to-r hover:from-indigo-500 hover:to-purple-600 transition-all transform hover:scale-105","aria-label":"Abrir menu de clientes",children:(0,We.jsx)(Vn,{icon:ur,className:"h-6 w-6"})}),(0,We.jsxs)(Oe,{to:"/",className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-700 bg-clip-text text-transparent flex items-center mr-2 hover:from-indigo-700 hover:to-purple-800 transition-all",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 p-2 rounded-lg mr-3 shadow-sm",children:(0,We.jsx)(Vn,{icon:Io,className:"text-white"})}),(0,We.jsx)("span",{children:"ABAplay"})]}),(0,We.jsx)("div",{className:"hidden lg:flex items-center space-x-1 ml-4",children:(0,We.jsx)(b,{})})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,We.jsxs)("div",{className:"hidden md:block text-sm",children:[r?(0,We.jsx)("div",{className:"bg-gradient-to-r from-indigo-100 to-purple-100 border border-indigo-200 px-3 py-1 rounded-full",children:(0,We.jsxs)("span",{className:"font-medium bg-gradient-to-r from-indigo-700 to-purple-700 bg-clip-text text-transparent",children:["Cliente: ",r.name]})}):"terapeuta"===(null===a||void 0===a?void 0:a.role)&&(0,We.jsx)("div",{className:"bg-gradient-to-r from-gray-100 to-slate-100 border border-gray-200 px-3 py-1 rounded-full",children:(0,We.jsx)("span",{className:"italic text-gray-500",children:"Nenhum cliente selecionado"})}),"pai"===(null===a||void 0===a?void 0:a.role)&&(0,We.jsx)("div",{className:"bg-gradient-to-r from-indigo-100 to-purple-100 border border-indigo-200 px-3 py-1 rounded-full",children:(0,We.jsx)("span",{className:"font-medium bg-gradient-to-r from-indigo-700 to-purple-700 bg-clip-text text-transparent",children:"Acompanhamento"})})]}),(0,We.jsxs)("div",{className:"relative flex items-center space-x-3",children:[a&&"pai"!==a.role&&(0,We.jsx)("button",{onClick:()=>d(!c),className:"p-2 rounded-full hover:bg-gradient-to-r hover:from-indigo-100 hover:to-purple-100 transition-all duration-200 transform hover:scale-110",title:"Notifica\xe7\xf5es",children:(0,We.jsx)(Ko,{ref:f})}),(0,We.jsx)("div",{className:"w-9 h-9 rounded-full bg-gradient-to-r from-indigo-500 to-purple-600 text-white flex items-center justify-center font-bold text-sm border-2 border-white shadow-md hover:shadow-lg transition-all transform hover:scale-110",title:(null===a||void 0===a?void 0:a.full_name)||(null===a||void 0===a?void 0:a.username),children:(v=(null===a||void 0===a?void 0:a.full_name)||(null===a||void 0===a?void 0:a.username),v?v.split(" ").map((e=>e[0])).slice(0,2).join("").toUpperCase():"--")}),(0,We.jsx)("button",{onClick:n,title:"Sair",className:"text-gray-500 hover:text-red-600 transition-all duration-150 p-2 rounded-full hover:bg-gradient-to-r hover:from-red-50 hover:to-pink-50 transform hover:scale-110",children:(0,We.jsx)(Vn,{icon:ar,className:"fa-fw"})})]}),(0,We.jsx)("div",{className:"lg:hidden flex items-center",children:(0,We.jsxs)("button",{ref:p,onClick:()=>l(!o),type:"button",className:"inline-flex items-center justify-center p-2 rounded-md text-gray-600 hover:text-white hover:bg-gradient-to-r hover:from-indigo-500 hover:to-purple-600 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500 transition-all transform hover:scale-105","aria-controls":"mobile-menu","aria-expanded":o,children:[(0,We.jsx)("span",{className:"sr-only",children:"Abrir menu"}),(0,We.jsx)(Vn,{icon:o?lo:ur,className:"h-6 w-6"})]})})]})]}),(0,We.jsxs)("div",{ref:m,className:"lg:hidden absolute top-full left-0 right-0 bg-gradient-to-r from-white via-indigo-50/50 to-purple-50/50 backdrop-blur-md shadow-xl border-t border-indigo-200/50 transition-transform duration-300 ease-in-out ".concat(o?"transform translate-y-0":"transform -translate-y-full"),style:{visibility:o?"visible":"hidden"},id:"mobile-menu",children:[(0,We.jsx)("div",{className:"px-3 pt-3 pb-4 space-y-2",children:(0,We.jsx)(b,{isMobile:!0,onLinkClick:()=>l(!1)})}),(0,We.jsx)("div",{className:"pt-4 pb-4 border-t border-gray-200",children:(0,We.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"text-base font-medium leading-none text-gray-800",children:(null===a||void 0===a?void 0:a.full_name)||(null===a||void 0===a?void 0:a.username)}),(0,We.jsx)("div",{className:"text-sm font-medium leading-none text-gray-500",children:null===a||void 0===a?void 0:a.role})]}),(0,We.jsxs)("button",{onClick:n,className:"ml-auto flex-shrink-0 bg-gradient-to-r from-gray-100 to-slate-100 p-2 rounded-full text-gray-500 hover:text-red-600 hover:bg-gradient-to-r hover:from-red-50 hover:to-pink-50 focus:outline-none transition-all transform hover:scale-110",children:[(0,We.jsx)("span",{className:"sr-only",children:"Sair"}),(0,We.jsx)(Vn,{icon:ar})]})]})})]}),(0,We.jsx)(Zo,{isOpen:c,onClose:()=>d(!1),onNotificationClick:e=>{var t;null!==(t=f.current)&&void 0!==t&&t.updateCount&&f.current.updateCount(),d(!1),console.log("Notifica\xe7\xe3o clicada:",e)}}),u&&(0,We.jsx)(Qo,{onClose:g,onProgramCompleted:async()=>{null!==r&&void 0!==r&&r.id&&await i(),g()}})]});var v},tl=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const[t,a]=(0,s.useState)({}),[n,r]=(0,s.useState)(!1),[i,o]=(0,s.useState)(null),l=(0,s.useCallback)((async()=>{if(e.length)try{r(!0),o(null);const t=localStorage.getItem("token"),s=e.map((async e=>{try{var a,s,n,r;const i=await $e.A.get("".concat(qe.H,"/notifications/patient/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),o=(null===(a=i.data.find((e=>"parent_chat"===e.chatType)))||void 0===a?void 0:a.unreadCount)||0,l=(null===(s=i.data.find((e=>"case_discussion"===e.chatType)))||void 0===s?void 0:s.unreadCount)||0,c=(null===(n=i.data.find((e=>"scheduling_reminder"===e.chatType)))||void 0===n?void 0:n.unreadCount)||0,d=(null===(r=i.data.find((e=>"appointment_cancelled"===e.chatType)))||void 0===r?void 0:r.unreadCount)||0;return{patientId:e,notifications:{parentChat:o,caseDiscussion:l,schedulingReminder:c,appointmentCancelled:d,total:o+l+c+d}}}catch(i){return{patientId:e,notifications:{parentChat:0,caseDiscussion:0,total:0}}}})),n=await Promise.all(s),l={};n.forEach((e=>{let{patientId:t,notifications:a}=e;l[t]=a})),a(l)}catch(i){o(i.message)}finally{r(!1)}}),[]),c=(0,s.useCallback)((async e=>{try{var t,s,n,r;const i=localStorage.getItem("token"),o=await $e.A.get("".concat(qe.H,"/notifications/patient/").concat(e),{headers:{Authorization:"Bearer ".concat(i)}}),l=(null===(t=o.data.find((e=>"parent_chat"===e.chatType)))||void 0===t?void 0:t.unreadCount)||0,c=(null===(s=o.data.find((e=>"case_discussion"===e.chatType)))||void 0===s?void 0:s.unreadCount)||0,d=(null===(n=o.data.find((e=>"scheduling_reminder"===e.chatType)))||void 0===n?void 0:n.unreadCount)||0,u=(null===(r=o.data.find((e=>"appointment_cancelled"===e.chatType)))||void 0===r?void 0:r.unreadCount)||0,h={parentChat:l,caseDiscussion:c,schedulingReminder:d,appointmentCancelled:u,total:l+c+d+u};return a((t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:h}))),h}catch(i){return{parentChat:0,caseDiscussion:0,total:0}}}),[]),d=(0,s.useCallback)((async(e,t)=>{try{const s=localStorage.getItem("token");await $e.A.post("".concat(qe.H,"/notifications/mark-read"),{patientId:e,chatType:t},{headers:{Authorization:"Bearer ".concat(s)}}),a((a=>{const s=a[e]||{parentChat:0,caseDiscussion:0,schedulingReminder:0,appointmentCancelled:0,total:0},n=(0,Ie.A)({},s);return"parent_chat"===t?n.parentChat=0:"case_discussion"===t?n.caseDiscussion=0:"scheduling_reminder"===t?n.schedulingReminder=0:"appointment_cancelled"===t&&(n.appointmentCancelled=0),n.total=n.parentChat+n.caseDiscussion+n.schedulingReminder+n.appointmentCancelled,(0,Ie.A)((0,Ie.A)({},a),{},{[e]:n})})),window.dispatchEvent(new CustomEvent("notificationUpdate"))}catch(i){}}),[]),u=(0,s.useCallback)((e=>[...e].sort(((e,a)=>{var s,n;const r=(null===(s=t[e.id])||void 0===s?void 0:s.total)||0,i=(null===(n=t[a.id])||void 0===n?void 0:n.total)||0;return r!==i?i-r:e.name.localeCompare(a.name)}))),[t]),h=(0,s.useCallback)((e=>{const a=[],s=[],n=[];return e.forEach((e=>{var r;const i=(null===(r=t[e.id])||void 0===r?void 0:r.total)||0;i>=3?a.push(e):i>0?s.push(e):n.push(e)})),a.sort(((e,t)=>t.name.localeCompare(e.name))),s.sort(((e,t)=>e.name.localeCompare(t.name))),n.sort(((e,t)=>e.name.localeCompare(t.name))),{urgent:a,withNotifications:s,normal:n}}),[t]),m=(0,s.useCallback)((async()=>{if(0!==e.length)try{r(!0),o(null);const t=localStorage.getItem("token"),s=e.map((async e=>{try{var a,s,n,r;const i=await $e.A.get("".concat(qe.H,"/notifications/patient/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}}),o=(null===(a=i.data.find((e=>"parent_chat"===e.chatType)))||void 0===a?void 0:a.unreadCount)||0,l=(null===(s=i.data.find((e=>"case_discussion"===e.chatType)))||void 0===s?void 0:s.unreadCount)||0,c=(null===(n=i.data.find((e=>"scheduling_reminder"===e.chatType)))||void 0===n?void 0:n.unreadCount)||0,d=(null===(r=i.data.find((e=>"appointment_cancelled"===e.chatType)))||void 0===r?void 0:r.unreadCount)||0;return{patientId:e,notifications:{parentChat:o,caseDiscussion:l,schedulingReminder:c,appointmentCancelled:d,total:o+l+c+d}}}catch(i){return{patientId:e,notifications:{parentChat:0,caseDiscussion:0,total:0}}}})),n=await Promise.all(s),l={};n.forEach((e=>{let{patientId:t,notifications:a}=e;l[t]=a})),a(l)}catch(i){o(i.message)}finally{r(!1)}else a({})}),[e]);return(0,s.useEffect)((()=>{m()}),[m]),(0,s.useEffect)((()=>{const e=()=>{m()};return window.addEventListener("notificationUpdate",e),()=>{window.removeEventListener("notificationUpdate",e)}}),[m]),{patientNotifications:t,loading:n,error:i,fetchPatientNotifications:c,fetchAllPatientNotifications:l,markAsRead:d,sortPatientsByPriority:u,categorizePatients:h}},al=e=>{let{patientId:t,patientName:a,onNavigateToChat:n,notifications:r={parentChat:0,caseDiscussion:0,schedulingReminder:0,appointmentCancelled:0,total:0},className:i=""}=e;const[o,l]=(0,s.useState)(!1),c=e=>{e.preventDefault(),e.stopPropagation(),l(!0)},d=e=>{l(!1),n&&n(t,e)};return 0===r.total?null:(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("div",{onClick:c,className:"\n          absolute -top-2 -right-2 min-w-[20px] h-5 px-1.5 rounded-full text-xs font-bold cursor-pointer\n          flex items-center justify-center transition-all duration-200 hover:scale-110\n          ".concat(r.total>=3?"bg-red-500 text-white animate-pulse":r.total>0?"bg-blue-500 text-white":"hidden"," ").concat(i,"\n        "),title:"".concat(r.total," notifica\xe7\xe3o").concat(1!==r.total?"\xf5es":""),role:"button",tabIndex:0,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||c(e)},children:r.total>99?"99+":r.total}),o&&(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,We.jsxs)("div",{className:"\n              ".concat(window.innerWidth<768?"fixed inset-x-0 bottom-0 bg-white rounded-t-xl shadow-xl transform transition-transform duration-300":"bg-white rounded-xl shadow-xl max-w-sm w-full mx-4 transform transition-all duration-300","\n            "),onClick:e=>e.stopPropagation(),children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"font-semibold text-gray-800",children:a}),(0,We.jsxs)("p",{className:"text-sm text-gray-600",children:[r.total," notifica\xe7\xe3o",1!==r.total?"\xf5es":""," pendente",1!==r.total?"s":""]})]}),(0,We.jsx)("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsxs)("div",{className:"p-4 space-y-3",children:[r.parentChat>0&&(0,We.jsxs)("button",{onClick:()=>d("parent_chat"),className:"w-full flex items-center justify-between p-3 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:rr,className:"text-white"})}),(0,We.jsxs)("div",{className:"text-left",children:[(0,We.jsx)("p",{className:"font-medium text-gray-800",children:"Chat dos Pais"}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Mensagens da fam\xedlia"})]})]}),(0,We.jsx)("div",{className:"bg-blue-500 text-white rounded-full min-w-[24px] h-6 flex items-center justify-center text-xs font-bold",children:r.parentChat})]}),r.caseDiscussion>0&&(0,We.jsxs)("button",{onClick:()=>d("case_discussion"),className:"w-full flex items-center justify-between p-3 bg-green-50 hover:bg-green-100 rounded-lg transition-colors",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:yr,className:"text-white"})}),(0,We.jsxs)("div",{className:"text-left",children:[(0,We.jsx)("p",{className:"font-medium text-gray-800",children:"Discuss\xe3o de Caso"}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Chat da equipe t\xe9cnica"})]})]}),(0,We.jsx)("div",{className:"bg-green-500 text-white rounded-full min-w-[24px] h-6 flex items-center justify-center text-xs font-bold",children:r.caseDiscussion})]}),r.schedulingReminder>0&&(0,We.jsxs)("button",{onClick:()=>d("scheduling_reminder"),className:"w-full flex items-center justify-between p-3 bg-yellow-50 hover:bg-yellow-100 rounded-lg transition-colors",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"w-10 h-10 bg-yellow-500 rounded-full flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:To,className:"text-white"})}),(0,We.jsxs)("div",{className:"text-left",children:[(0,We.jsx)("p",{className:"font-medium text-gray-800",children:"Sess\xe3o N\xe3o Realizada"}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Pendente de justificativa"})]})]}),(0,We.jsx)("div",{className:"bg-yellow-500 text-white rounded-full min-w-[24px] h-6 flex items-center justify-center text-xs font-bold",children:r.schedulingReminder})]}),r.appointmentCancelled>0&&(0,We.jsxs)("button",{onClick:()=>d("appointment_cancelled"),className:"w-full flex items-center justify-between p-3 bg-orange-50 hover:bg-orange-100 rounded-lg transition-colors",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:fi,className:"text-white"})}),(0,We.jsxs)("div",{className:"text-left",children:[(0,We.jsx)("p",{className:"font-medium text-gray-800",children:"Agendamento Cancelado"}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Cancelado pela administra\xe7\xe3o"})]})]}),(0,We.jsx)("div",{className:"bg-orange-500 text-white rounded-full min-w-[24px] h-6 flex items-center justify-center text-xs font-bold",children:r.appointmentCancelled})]})]}),window.innerWidth<768&&(0,We.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,We.jsx)("button",{onClick:()=>l(!1),className:"w-full py-3 text-gray-600 font-medium",children:"Fechar"})})]})})]})},sl=()=>{const e=Z(),{patients:t,selectedPatient:a,selectPatient:n,isLoading:r}=dt(),{user:i}=Ye(),[o,l]=(0,s.useState)(""),c=(0,s.useMemo)((()=>(t||[]).map((e=>e.id))),[t]),{patientNotifications:d,sortPatientsByPriority:u,markAsRead:h}=tl(c),m=(a,s)=>{const r=t.find((e=>e.id===a));r&&(n(r),h(a,s),"parent_chat"===s?"parent"===(null===i||void 0===i?void 0:i.role)?e("/parent-dashboard"):e("/notes"):"case_discussion"===s?e("/notes"):"scheduling_reminder"!==s&&"appointment_cancelled"!==s||(null!==i&&void 0!==i&&i.is_admin?e("/scheduling"):e("/therapist-schedule")))},p=(0,s.useMemo)((()=>{const e=t||[];let a=e;return o&&(a=e.filter((e=>e.name.toLowerCase().includes(o.toLowerCase())))),u(a)}),[t,o,u]);return"super_admin"===(null===i||void 0===i?void 0:i.role)?null:r?(0,We.jsx)("div",{className:"h-full bg-gradient-to-b from-indigo-50 to-purple-50 border-r border-indigo-200 flex justify-center items-center",children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-indigo-100 to-purple-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-indigo-600 text-2xl"})}),(0,We.jsx)("p",{className:"text-indigo-600 text-sm font-medium",children:"Carregando clientes..."})]})}):(0,We.jsxs)("div",{className:"h-full flex flex-col bg-gradient-to-b from-white to-indigo-50/30 border-r border-indigo-200 shadow-sm",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-700 p-6",children:[(0,We.jsxs)("div",{className:"flex items-center mb-4",children:[(0,We.jsx)("div",{className:"bg-white bg-opacity-20 p-2 rounded-full mr-3",children:(0,We.jsx)(Vn,{icon:Mr,className:"text-white"})}),(0,We.jsx)("h2",{className:"text-xl font-bold text-white",children:"Clientes"})]}),(0,We.jsx)("div",{className:"bg-white bg-opacity-20 rounded-lg p-3 mb-4",children:(0,We.jsxs)("div",{className:"text-white text-sm",children:[(null===i||void 0===i?void 0:i.is_admin)&&(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsx)("span",{children:"Total de clientes:"}),(0,We.jsxs)("span",{className:"font-bold",children:[(null===t||void 0===t?void 0:t.length)||0," / ",(null===i||void 0===i?void 0:i.max_patients)||0]})]}),"terapeuta"===(null===i||void 0===i?void 0:i.role)&&(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsx)("span",{children:"Clientes atribu\xeddos:"}),(0,We.jsx)("span",{className:"font-bold",children:(null===t||void 0===t?void 0:t.length)||0})]})]})}),(0,We.jsxs)("div",{className:"relative",children:[(0,We.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:(0,We.jsx)(Vn,{icon:Ki,className:"text-indigo-300"})}),(0,We.jsx)("input",{type:"text",placeholder:"Buscar cliente...",value:o,onChange:e=>l(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-white bg-opacity-90 border-2 border-white border-opacity-30 rounded-lg placeholder-indigo-400 text-gray-800 focus:outline-none focus:ring-2 focus:ring-white focus:ring-opacity-50 focus:border-white focus:border-opacity-50 text-sm transition-all"})]})]}),(0,We.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:p&&p.length>0?(0,We.jsx)("div",{className:"space-y-2",children:p.map(((e,t)=>{var s;const r=(null===a||void 0===a?void 0:a.id)===e.id;return(0,We.jsx)("div",{className:"relative",children:(0,We.jsxs)("button",{onClick:()=>(e=>{n(e)})(e),className:"\n                      w-full text-left p-4 rounded-lg flex items-center transition-all duration-200 transform\n                      ".concat(r?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg scale-105 border-2 border-white":"bg-white text-gray-700 hover:bg-gradient-to-r hover:from-indigo-50 hover:to-purple-50 hover:text-indigo-700 hover:shadow-md hover:scale-102 border-2 border-gray-200 hover:border-indigo-300","\n                    "),children:[(0,We.jsxs)("div",{className:"\n                      p-2 rounded-full mr-3 flex-shrink-0 relative\n                      ".concat(r?"bg-white bg-opacity-20":"bg-gradient-to-r from-indigo-100 to-purple-100","\n                    "),children:[(0,We.jsx)(Vn,{icon:so,className:"\n                          ".concat(r?"text-white":"text-indigo-600","\n                        ")}),(0,We.jsx)(al,{patientId:e.id,patientName:e.name,notifications:d[e.id],onNavigateToChat:m,className:"z-10"})]}),(0,We.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,We.jsx)("p",{className:"\n                        font-medium truncate\n                        ".concat(r?"text-white":"text-gray-800","\n                      "),children:e.name}),r&&(0,We.jsx)("p",{className:"text-indigo-100 text-xs mt-1",children:"\u2705 Cliente selecionado"}),(null===(s=d[e.id])||void 0===s?void 0:s.total)>0&&!r&&(0,We.jsxs)("p",{className:"text-blue-600 text-xs mt-1 font-medium",children:["\ud83d\udd14 ",d[e.id].total," nova",1!==d[e.id].total?"s":""," mensagem",1!==d[e.id].total?"ns":""]})]}),r&&(0,We.jsx)("div",{className:"absolute top-2 right-2",children:(0,We.jsx)("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"})})]})},e.id)}))}):(0,We.jsxs)("div",{className:"flex flex-col items-center justify-center text-center py-8",children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 p-6 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:o?Ki:Mr,className:"text-2xl text-indigo-600"})}),(0,We.jsx)("h3",{className:"font-semibold text-gray-700 mb-2",children:o?"Nenhum resultado":"Nenhum cliente"}),(0,We.jsx)("p",{className:"text-sm text-gray-500 leading-relaxed",children:o?"Tente ajustar os termos da busca":"Nenhum cliente foi atribu\xeddo ainda"}),o&&(0,We.jsx)("button",{onClick:()=>l(""),className:"mt-4 px-4 py-2 bg-gradient-to-r from-indigo-500 to-purple-600 text-white text-sm rounded-lg hover:from-indigo-600 hover:to-purple-700 transition-all transform hover:scale-105",children:"Limpar busca"})]})}),p&&p.length>0&&(0,We.jsx)("div",{className:"border-t border-indigo-200 bg-gradient-to-r from-indigo-50 to-purple-50 px-4 py-3",children:(0,We.jsxs)("div",{className:"flex items-center justify-between text-xs text-indigo-600",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:_i,className:"text-indigo-500"}),(0,We.jsxs)("span",{children:["Total: ",p.length," cliente",1!==p.length?"s":""]})]}),o&&(0,We.jsxs)("span",{className:"text-indigo-500",children:['Filtrado por: "',o,'"']})]})})]})},nl=()=>{const e=K(),{user:t,isAuthenticated:a,isLoading:n}=Ye(),[r,i]=(0,s.useState)(!1),o=e.pathname.startsWith("/admin"),l="pai"!==(null===t||void 0===t?void 0:t.role);return(0,s.useEffect)((()=>{i(!1)}),[e]),"super_admin"===(null===t||void 0===t?void 0:t.role)?(0,We.jsx)(fe,{to:"/super-admin",replace:!0}):n?(0,We.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-4xl text-indigo-500"})}):a?(0,We.jsxs)("div",{className:"relative h-screen flex flex-col bg-gray-50",children:[(0,We.jsx)(el,{toggleSidebar:()=>i(!r)}),(0,We.jsxs)("div",{className:"flex-1 flex overflow-hidden lg:grid ".concat(o||!l?"lg:grid-cols-1":"lg:grid-cols-[280px_1fr]"),children:[l&&(0,We.jsxs)(We.Fragment,{children:[r&&(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-20 lg:hidden",onClick:()=>i(!1),"aria-hidden":"true"}),(0,We.jsx)("aside",{className:"\n                                fixed inset-y-0 left-0 z-30 w-72 bg-white border-r border-gray-200 transform transition-transform duration-300 ease-in-out\n                                ".concat(o?"lg:hidden":"lg:static lg:translate-x-0","\n                                ").concat(r?"translate-x-0":"-translate-x-full","\n                            "),children:(0,We.jsx)(sl,{})})]}),(0,We.jsx)("main",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:(0,We.jsx)(ge,{})})]})]}):(0,We.jsx)(fe,{to:"/login",state:{from:e},replace:!0})},rl=()=>{const{user:e,isLoading:t}=Ye();return t?(0,We.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-3xl text-indigo-500"})}):e?"super_admin"===e.role?(0,We.jsx)(fe,{to:"/super-admin",replace:!0}):e.is_admin?(0,We.jsx)(fe,{to:"/admin",replace:!0}):"pai"===e.role?(0,We.jsx)(fe,{to:"/parent-dashboard",replace:!0}):(0,We.jsx)(fe,{to:"/clients",replace:!0}):(0,We.jsx)(fe,{to:"/login",replace:!0})};var il=a(1971);const ol=Object.create(null);ol.open="0",ol.close="1",ol.ping="2",ol.pong="3",ol.message="4",ol.upgrade="5",ol.noop="6";const ll=Object.create(null);Object.keys(ol).forEach((e=>{ll[ol[e]]=e}));const cl={type:"error",data:"parser error"},dl="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),ul="function"===typeof ArrayBuffer,hl=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,ml=(e,t,a)=>{let{type:s,data:n}=e;return dl&&n instanceof Blob?t?a(n):pl(n,a):ul&&(n instanceof ArrayBuffer||hl(n))?t?a(n):pl(new Blob([n]),a):a(ol[s]+(n||""))},pl=(e,t)=>{const a=new FileReader;return a.onload=function(){const e=a.result.split(",")[1];t("b"+(e||""))},a.readAsDataURL(e)};function fl(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let gl;const xl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bl="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let a=0;a<64;a++)bl[xl.charCodeAt(a)]=a;const vl="function"===typeof ArrayBuffer,yl=(e,t)=>{if("string"!==typeof e)return{type:"message",data:Nl(e,t)};const a=e.charAt(0);if("b"===a)return{type:"message",data:jl(e.substring(1),t)};return ll[a]?e.length>1?{type:ll[a],data:e.substring(1)}:{type:ll[a]}:cl},jl=(e,t)=>{if(vl){const a=(e=>{let t,a,s,n,r,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const c=new ArrayBuffer(i),d=new Uint8Array(c);for(t=0;t<o;t+=4)a=bl[e.charCodeAt(t)],s=bl[e.charCodeAt(t+1)],n=bl[e.charCodeAt(t+2)],r=bl[e.charCodeAt(t+3)],d[l++]=a<<2|s>>4,d[l++]=(15&s)<<4|n>>2,d[l++]=(3&n)<<6|63&r;return c})(e);return Nl(a,t)}return{base64:!0,data:e}},Nl=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,wl=String.fromCharCode(30);function _l(){return new TransformStream({transform(e,t){!function(e,t){dl&&e.data instanceof Blob?e.data.arrayBuffer().then(fl).then(t):ul&&(e.data instanceof ArrayBuffer||hl(e.data))?t(fl(e.data)):ml(e,!1,(e=>{gl||(gl=new TextEncoder),t(gl.encode(e))}))}(e,(a=>{const s=a.length;let n;if(s<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,s);else if(s<65536){n=new Uint8Array(3);const e=new DataView(n.buffer);e.setUint8(0,126),e.setUint16(1,s)}else{n=new Uint8Array(9);const e=new DataView(n.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(s))}e.data&&"string"!==typeof e.data&&(n[0]|=128),t.enqueue(n),t.enqueue(a)}))}})}let Sl;function Cl(e){return e.reduce(((e,t)=>e+t.length),0)}function kl(e,t){if(e[0].length===t)return e.shift();const a=new Uint8Array(t);let s=0;for(let n=0;n<t;n++)a[n]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),a}function Al(e){if(e)return function(e){for(var t in Al.prototype)e[t]=Al.prototype[t];return e}(e)}Al.prototype.on=Al.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Al.prototype.once=function(e,t){function a(){this.off(e,a),t.apply(this,arguments)}return a.fn=t,this.on(e,a),this},Al.prototype.off=Al.prototype.removeListener=Al.prototype.removeAllListeners=Al.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var a,s=this._callbacks["$"+e];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<s.length;n++)if((a=s[n])===t||a.fn===t){s.splice(n,1);break}return 0===s.length&&delete this._callbacks["$"+e],this},Al.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),a=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(a){s=0;for(var n=(a=a.slice(0)).length;s<n;++s)a[s].apply(this,t)}return this},Al.prototype.emitReserved=Al.prototype.emit,Al.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Al.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Pl="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),El="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function Ll(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return a.reduce(((t,a)=>(e.hasOwnProperty(a)&&(t[a]=e[a]),t)),{})}const Dl=El.setTimeout,Ol=El.clearTimeout;function Tl(e,t){t.useNativeTimers?(e.setTimeoutFn=Dl.bind(El),e.clearTimeoutFn=Ol.bind(El)):(e.setTimeoutFn=El.setTimeout.bind(El),e.clearTimeoutFn=El.clearTimeout.bind(El))}function Ml(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Rl extends Error{constructor(e,t,a){super(e),this.description=t,this.context=a,this.type="TransportError"}}class Il extends Al{constructor(e){super(),this.writable=!1,Tl(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,a){return super.emitReserved("error",new Rl(e,t,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=yl(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let a in e)e.hasOwnProperty(a)&&(t.length&&(t+="&"),t+=encodeURIComponent(a)+"="+encodeURIComponent(e[a]));return t}(e);return t.length?"?"+t:""}}class Fl extends Il{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const a=e.split(wl),s=[];for(let n=0;n<a.length;n++){const e=yl(a[n],t);if(s.push(e),"error"===e.type)break}return s})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const a=e.length,s=new Array(a);let n=0;e.forEach(((e,r)=>{ml(e,!1,(e=>{s[r]=e,++n===a&&t(s.join(wl))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Ml()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let zl=!1;try{zl="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Ff){}const Bl=zl;function ql(){}class Ul extends Fl{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let a=location.port;a||(a=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||a!==e.port}}doWrite(e,t){const a=this.request({method:"POST",data:e});a.on("success",t),a.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class Hl extends Al{constructor(e,t,a){super(),this.createRequest=e,Tl(this,a),this._opts=a,this._method=a.method||"GET",this._uri=t,this._data=void 0!==a.data?a.data:null,this._create()}_create(){var e;const t=Ll(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(t);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&a.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(If){}if("POST"===this._method)try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(If){}try{a.setRequestHeader("Accept","*/*")}catch(If){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var e;3===a.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(a.getResponseHeader("set-cookie"))),4===a.readyState&&(200===a.status||1223===a.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"===typeof a.status?a.status:0)}),0))},a.send(this._data)}catch(If){return void this.setTimeoutFn((()=>{this._onError(If)}),0)}"undefined"!==typeof document&&(this._index=Hl.requestsCount++,Hl.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=ql,e)try{this._xhr.abort()}catch(If){}"undefined"!==typeof document&&delete Hl.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(Hl.requestsCount=0,Hl.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",Wl);else if("function"===typeof addEventListener){addEventListener("onpagehide"in El?"pagehide":"unload",Wl,!1)}function Wl(){for(let e in Hl.requests)Hl.requests.hasOwnProperty(e)&&Hl.requests[e].abort()}const Vl=function(){const e=Gl({xdomain:!1});return e&&null!==e.responseType}();function Gl(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||Bl))return new XMLHttpRequest}catch(If){}if(!t)try{return new(El[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(If){}}const Yl="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class $l extends Il{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,a=Yl?{}:Ll(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,a)}catch(Ff){return this.emitReserved("error",Ff)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const a=e[t],s=t===e.length-1;ml(a,this.supportsBinary,(e=>{try{this.doWrite(a,e)}catch(If){}s&&Pl((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Ml()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Xl=El.WebSocket||El.MozWebSocket;const Jl={websocket:class extends $l{createSocket(e,t,a){return Yl?new Xl(e,t,a):t?new Xl(e,t):new Xl(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends Il{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(Ff){return this.emitReserved("error",Ff)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){Sl||(Sl=new TextDecoder);const a=[];let s=0,n=-1,r=!1;return new TransformStream({transform(i,o){for(a.push(i);;){if(0===s){if(Cl(a)<1)break;const e=kl(a,1);r=128===(128&e[0]),n=127&e[0],s=n<126?3:126===n?1:2}else if(1===s){if(Cl(a)<2)break;const e=kl(a,2);n=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),s=3}else if(2===s){if(Cl(a)<8)break;const e=kl(a,8),t=new DataView(e.buffer,e.byteOffset,e.length),r=t.getUint32(0);if(r>Math.pow(2,21)-1){o.enqueue(cl);break}n=r*Math.pow(2,32)+t.getUint32(4),s=3}else{if(Cl(a)<n)break;const e=kl(a,n);o.enqueue(yl(r?e:Sl.decode(e),t)),s=0}if(0===n||n>e){o.enqueue(cl);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=e.readable.pipeThrough(t).getReader(),s=_l();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const n=()=>{a.read().then((e=>{let{done:t,value:a}=e;t||(this.onPacket(a),n())})).catch((e=>{}))};n();const r={type:"open"};this.query.sid&&(r.data='{"sid":"'.concat(this.query.sid,'"}')),this._writer.write(r).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const a=e[t],s=t===e.length-1;this._writer.write(a).then((()=>{s&&Pl((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends Ul{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Vl&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new Hl(Gl,this.uri(),e)}}},Kl=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Ql=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Zl(e){if(e.length>8e3)throw"URI too long";const t=e,a=e.indexOf("["),s=e.indexOf("]");-1!=a&&-1!=s&&(e=e.substring(0,a)+e.substring(a,s).replace(/:/g,";")+e.substring(s,e.length));let n=Kl.exec(e||""),r={},i=14;for(;i--;)r[Ql[i]]=n[i]||"";return-1!=a&&-1!=s&&(r.source=t,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=function(e,t){const a=/\/{2,9}/g,s=t.replace(a,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||s.splice(0,1);"/"==t.slice(-1)&&s.splice(s.length-1,1);return s}(0,r.path),r.queryKey=function(e,t){const a={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,s){t&&(a[t]=s)})),a}(0,r.query),r}const ec="function"===typeof addEventListener&&"function"===typeof removeEventListener,tc=[];ec&&addEventListener("offline",(()=>{tc.forEach((e=>e()))}),!1);class ac extends Al{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const a=Zl(e);t.hostname=a.host,t.secure="https"===a.protocol||"wss"===a.protocol,t.port=a.port,a.query&&(t.query=a.query)}else t.host&&(t.hostname=Zl(t.host).host);Tl(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},a=e.split("&");for(let s=0,n=a.length;s<n;s++){let e=a[s].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),ec&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},tc.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const a=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](a)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&ac.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",ac.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let a=0;a<this.writeBuffer.length;a++){const s=this.writeBuffer[a].data;if(s&&(e+="string"===typeof(t=s)?function(e){let t=0,a=0;for(let s=0,n=e.length;s<n;s++)t=e.charCodeAt(s),t<128?a+=1:t<2048?a+=2:t<55296||t>=57344?a+=3:(s++,a+=4);return a}(t):Math.ceil(1.33*(t.byteLength||t.size))),a>0&&e>this._maxPayload)return this.writeBuffer.slice(0,a);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Pl((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,a){return this._sendPacket("message",e,t,a),this}send(e,t,a){return this._sendPacket("message",e,t,a),this}_sendPacket(e,t,a,s){if("function"===typeof t&&(s=t,t=void 0),"function"===typeof a&&(s=a,a=null),"closing"===this.readyState||"closed"===this.readyState)return;(a=a||{}).compress=!1!==a.compress;const n={type:e,data:t,options:a};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},a=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?a():e()})):this.upgrading?a():e()),this}_onError(e){if(ac.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ec&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=tc.indexOf(this._offlineEventListener);-1!==e&&tc.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}ac.protocol=4;class sc extends ac{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),a=!1;ac.priorWebsocketSuccess=!1;const s=()=>{a||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!a)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;ac.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{a||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function n(){a||(a=!0,c(),t.close(),t=null)}const r=e=>{const a=new Error("probe error: "+e);a.transport=t.name,n(),this.emitReserved("upgradeError",a)};function i(){r("transport closed")}function o(){r("socket closed")}function l(e){t&&e.name!==t.name&&n()}const c=()=>{t.removeListener("open",s),t.removeListener("error",r),t.removeListener("close",i),this.off("close",o),this.off("upgrading",l)};t.once("open",s),t.once("error",r),t.once("close",i),this.once("close",o),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{a||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let a=0;a<e.length;a++)~this.transports.indexOf(e[a])&&t.push(e[a]);return t}}class nc extends sc{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map((e=>Jl[e])).filter((e=>!!e))),super(e,t)}}const rc="function"===typeof ArrayBuffer,ic=Object.prototype.toString,oc="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===ic.call(Blob),lc="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===ic.call(File);function cc(e){return rc&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||oc&&e instanceof Blob||lc&&e instanceof File}function dc(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,a=e.length;t<a;t++)if(dc(e[t]))return!0;return!1}if(cc(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return dc(e.toJSON(),!0);for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&dc(e[a]))return!0;return!1}function uc(e){const t=[],a=e.data,s=e;return s.data=hc(a,t),s.attachments=t.length,{packet:s,buffers:t}}function hc(e,t){if(!e)return e;if(cc(e)){const a={_placeholder:!0,num:t.length};return t.push(e),a}if(Array.isArray(e)){const a=new Array(e.length);for(let s=0;s<e.length;s++)a[s]=hc(e[s],t);return a}if("object"===typeof e&&!(e instanceof Date)){const a={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(a[s]=hc(e[s],t));return a}return e}function mc(e,t){return e.data=pc(e.data,t),delete e.attachments,e}function pc(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let a=0;a<e.length;a++)e[a]=pc(e[a],t);else if("object"===typeof e)for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(e[a]=pc(e[a],t));return e}const fc=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],gc=5;var xc;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(xc||(xc={}));class bc{constructor(e){this.replacer=e}encode(e){return e.type!==xc.EVENT&&e.type!==xc.ACK||!dc(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===xc.EVENT?xc.BINARY_EVENT:xc.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==xc.BINARY_EVENT&&e.type!==xc.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=uc(e),a=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(a),s}}function vc(e){return"[object Object]"===Object.prototype.toString.call(e)}class yc extends Al{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const a=t.type===xc.BINARY_EVENT;a||t.type===xc.BINARY_ACK?(t.type=a?xc.EVENT:xc.ACK,this.reconstructor=new jc(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!cc(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const a={type:Number(e.charAt(0))};if(void 0===xc[a.type])throw new Error("unknown packet type "+a.type);if(a.type===xc.BINARY_EVENT||a.type===xc.BINARY_ACK){const s=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const n=e.substring(s,t);if(n!=Number(n)||"-"!==e.charAt(t))throw new Error("Illegal attachments");a.attachments=Number(n)}if("/"===e.charAt(t+1)){const s=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}a.nsp=e.substring(s,t)}else a.nsp="/";const s=e.charAt(t+1);if(""!==s&&Number(s)==s){const s=t+1;for(;++t;){const a=e.charAt(t);if(null==a||Number(a)!=a){--t;break}if(t===e.length)break}a.id=Number(e.substring(s,t+1))}if(e.charAt(++t)){const s=this.tryParse(e.substr(t));if(!yc.isPayloadValid(a.type,s))throw new Error("invalid payload");a.data=s}return a}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(If){return!1}}static isPayloadValid(e,t){switch(e){case xc.CONNECT:return vc(t);case xc.DISCONNECT:return void 0===t;case xc.CONNECT_ERROR:return"string"===typeof t||vc(t);case xc.EVENT:case xc.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===fc.indexOf(t[0]));case xc.ACK:case xc.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class jc{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=mc(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Nc(e,t,a){return e.on(t,a),function(){e.off(t,a)}}const wc=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class _c extends Al{constructor(e,t,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Nc(e,"open",this.onopen.bind(this)),Nc(e,"packet",this.onpacket.bind(this)),Nc(e,"error",this.onerror.bind(this)),Nc(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,a,s;if(wc.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(r.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const o={type:xc.EVENT,data:r,options:{}};if(o.options.compress=!1!==this.flags.compress,"function"===typeof r[r.length-1]){const e=this.ids++,t=r.pop();this._registerAckCallback(e,t),o.id=e}const l=null===(a=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===a?void 0:a.writable,c=this.connected&&!(null===(s=this.io.engine)||void 0===s?void 0:s._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var a,s=this;const n=null!==(a=this.flags.timeout)&&void 0!==a?a:this._opts.ackTimeout;if(void 0===n)return void(this.acks[e]=t);const r=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),n),i=function(){s.io.clearTimeoutFn(r);for(var e=arguments.length,a=new Array(e),n=0;n<e;n++)a[n]=arguments[n];t.apply(s,a)};i.withError=!0,this.acks[e]=i}emitWithAck(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),s=1;s<t;s++)a[s-1]=arguments[s];return new Promise(((t,s)=>{const n=(e,a)=>e?s(e):t(a);n.withError=!0,a.push(n),this.emit(e,...a)}))}_addToQueue(e){var t=this;let a;"function"===typeof e[e.length-1]&&(a=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(s!==t._queue[0])return;if(null!==e)s.tryCount>t._opts.retries&&(t._queue.shift(),a&&a(e));else if(t._queue.shift(),a){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];a(null,...r)}return s.pending=!1,t._drainQueue()})),this._queue.push(s),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:xc.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case xc.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case xc.EVENT:case xc.BINARY_EVENT:this.onevent(e);break;case xc.ACK:case xc.BINARY_ACK:this.onack(e);break;case xc.DISCONNECT:this.ondisconnect();break;case xc.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const a of t)a.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let a=!1;return function(){if(!a){a=!0;for(var s=arguments.length,n=new Array(s),r=0;r<s;r++)n[r]=arguments[r];t.packet({type:xc.ACK,id:e,data:n})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:xc.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let a=0;a<t.length;a++)if(e===t[a])return t.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let a=0;a<t.length;a++)if(e===t[a])return t.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const a of t)a.apply(this,e.data)}}}function Sc(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Sc.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),a=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-a:e+a}return 0|Math.min(e,this.max)},Sc.prototype.reset=function(){this.attempts=0},Sc.prototype.setMin=function(e){this.ms=e},Sc.prototype.setMax=function(e){this.max=e},Sc.prototype.setJitter=function(e){this.jitter=e};class Cc extends Al{constructor(t,a){var s;super(),this.nsps={},this.subs=[],t&&"object"===typeof t&&(a=t,t=void 0),(a=a||{}).path=a.path||"/socket.io",this.opts=a,Tl(this,a),this.reconnection(!1!==a.reconnection),this.reconnectionAttempts(a.reconnectionAttempts||1/0),this.reconnectionDelay(a.reconnectionDelay||1e3),this.reconnectionDelayMax(a.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(s=a.randomizationFactor)&&void 0!==s?s:.5),this.backoff=new Sc({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==a.timeout?2e4:a.timeout),this._readyState="closed",this.uri=t;const n=a.parser||e;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==a.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new nc(this.uri,this.opts);const t=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const s=Nc(t,"open",(function(){a.onopen(),e&&e()})),n=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},r=Nc(t,"error",n);if(!1!==this._timeout){const e=this._timeout,a=this.setTimeoutFn((()=>{s(),n(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&a.unref(),this.subs.push((()=>{this.clearTimeoutFn(a)}))}return this.subs.push(s),this.subs.push(r),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Nc(e,"ping",this.onping.bind(this)),Nc(e,"data",this.ondata.bind(this)),Nc(e,"error",this.onerror.bind(this)),Nc(e,"close",this.onclose.bind(this)),Nc(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(If){this.onclose("parse error",If)}}ondecoded(e){Pl((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let a=this.nsps[e];return a?this._autoConnect&&!a.active&&a.connect():(a=new _c(this,e,t),this.nsps[e]=a),a}_destroy(e){const t=Object.keys(this.nsps);for(const a of t){if(this.nsps[a].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let a=0;a<t.length;a++)this.engine.write(t[a],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var a;this.cleanup(),null===(a=this.engine)||void 0===a||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&a.unref(),this.subs.push((()=>{this.clearTimeoutFn(a)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const kc={};function Ac(e,t){"object"===typeof e&&(t=e,e=void 0);const a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,s=e;a=a||"undefined"!==typeof location&&location,null==e&&(e=a.protocol+"//"+a.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?a.protocol+e:a.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof a?a.protocol+"//"+e:"https://"+e),s=Zl(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const n=-1!==s.host.indexOf(":")?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+n+":"+s.port+t,s.href=s.protocol+"://"+n+(a&&a.port===s.port?"":":"+s.port),s}(e,(t=t||{}).path||"/socket.io"),s=a.source,n=a.id,r=a.path,i=kc[n]&&r in kc[n].nsps;let o;return t.forceNew||t["force new connection"]||!1===t.multiplex||i?o=new Cc(s,t):(kc[n]||(kc[n]=new Cc(s,t)),o=kc[n]),a.query&&!t.query&&(t.query=a.queryKey),o.socket(a.path,t)}Object.assign(Ac,{Manager:Cc,Socket:_c,io:Ac,connect:Ac});const Pc="".concat(qe.H,"/parent-chat"),Ec="".concat(qe.H,"/contacts"),Lc=async e=>{try{var t;console.log("[CONTACT-API] getTherapistContacts: Buscando para patientId:",e);const a=localStorage.getItem("token"),s=await $e.A.get("".concat(Ec,"/therapists/").concat(e),{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});return console.log("[CONTACT-API] getTherapistContacts: Sucesso - terapeutas encontrados:",(null===(t=s.data.therapists)||void 0===t?void 0:t.length)||0),s.data}catch(s){var a;throw console.error("[CONTACT-API] getTherapistContacts: Erro -",(null===(a=s.response)||void 0===a?void 0:a.data)||s.message),s}},Dc=async e=>{try{var t;console.log("[CONTACT-API] getColleagueContacts: Buscando para patientId:",e);const a=localStorage.getItem("token"),s=await $e.A.get("".concat(Ec,"/colleagues/").concat(e),{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}});return console.log("[CONTACT-API] getColleagueContacts: Sucesso - colegas encontrados:",(null===(t=s.data.colleagues)||void 0===t?void 0:t.length)||0),s.data}catch(s){var a;throw console.error("[CONTACT-API] getColleagueContacts: Erro -",(null===(a=s.response)||void 0===a?void 0:a.data)||s.message),s}},Oc=()=>(0,We.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,We.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),Tc=e=>{let{double:t=!1,read:a=!1,onDarkBackground:s=!1}=e;const n=()=>s?a?"#00ff88":"#ffffff":a?"#00c851":"#666666";return(0,We.jsxs)("svg",{width:"18",height:"12",viewBox:"0 0 18 12",fill:"none",style:{display:"inline-block",filter:s&&a?"drop-shadow(0 0 2px rgba(0, 255, 136, 0.5))":"none"},children:[(0,We.jsx)("path",{d:"M3.5 6L6 8.5L14.5 0",stroke:n(),strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),t&&(0,We.jsx)("path",{d:"M6.5 6L9 8.5L17.5 0",stroke:n(),strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})]})},Mc=(e,t)=>{const a={fono:{badge:"\ud83d\udde3\ufe0f Fono",color:"#3498db",avatar:"FO"},fonoaudiologia:{badge:"\ud83d\udde3\ufe0f Fono",color:"#3498db",avatar:"FO"},psico:{badge:"\ud83e\udde0 Psico",color:"#e74c3c",avatar:"PS"},psicologia:{badge:"\ud83e\udde0 Psico",color:"#e74c3c",avatar:"PS"},music:{badge:"\ud83c\udfb5 Music",color:"#9b59b6",avatar:"MU"},musicoterapia:{badge:"\ud83c\udfb5 Music",color:"#9b59b6",avatar:"MU"},to:{badge:"\ud83c\udfe5 TO",color:"#f39c12",avatar:"TO"},terapiaocupacional:{badge:"\ud83c\udfe5 TO",color:"#f39c12",avatar:"TO"},fisio:{badge:"\ud83e\udd38 Fisio",color:"#27ae60",avatar:"FI"},fisioterapia:{badge:"\ud83e\udd38 Fisio",color:"#27ae60",avatar:"FI"},psicomotricidade:{badge:"\ud83e\udd38 Psico",color:"#27ae60",avatar:"PM"},psicopedagogia:{badge:"\ud83d\udcda Psicoped",color:"#e67e22",avatar:"PP"}};if("pai"===t||"parent"===t)return{badge:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 Fam\xedlia",color:"#2ecc71",avatar:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"};if("admin"===t||"administrador"===t)return{badge:"\u2699\ufe0f Admin",color:"#34495e",avatar:"AD"};if(e){const t=e.toLowerCase();for(const[e,s]of Object.entries(a))if(t.includes(e))return s}return{badge:"\ud83d\udc68\u200d\u2695\ufe0f Terapeuta",color:"#3498db",avatar:e?e.split(" ").map((e=>e[0])).join("").substring(0,2).toUpperCase():"TR"}},Rc=(e,t,a)=>{if(e===t)return"current";const s=(a||"").toLowerCase();return s.includes("fono")?"fono":s.includes("psico")&&!s.includes("psicomotricidade")?"psico":s.includes("music")?"music":s.includes("to")||s.includes("terapiaocupacional")?"to":s.includes("fisio")||s.includes("psicomotricidade")?"fisio":s.includes("psicopedagogia")?"psicoped":s.includes("pai")||s.includes("m\xe3e")||s.includes("mae")||s.includes("familia")||s.includes("responsavel")?"parent":s.includes("admin")?"admin":"therapist"},Ic=e=>{let{patientId:t,patientName:a}=e;const[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)(""),[l,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null),[h,m]=(0,s.useState)([]),[p,f]=(0,s.useState)(!1),[g,x]=(0,s.useState)(""),[b,v]=(0,s.useState)(0),{user:y}=Ye(),j=(0,s.useRef)(null),N=(0,s.useRef)(null),[,w]=(0,s.useState)(0);(0,s.useEffect)((()=>{var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),n.length>0&&window.dispatchEvent(new CustomEvent("notificationUpdate"))}),[n]),(0,s.useEffect)((()=>{const e=setInterval((()=>{w((e=>e+1))}),1e3);return()=>clearInterval(e)}),[]),(0,s.useEffect)((()=>{t?(console.log("[PARENT-CHAT] Iniciando carregamento de terapeutas"),(async()=>{try{console.log("[PARENT-CHAT] Carregando terapeutas para men\xe7\xf5es:",{patientId:t,userRole:null===y||void 0===y?void 0:y.role});const e=await Lc(t);console.log("[PARENT-CHAT] Terapeutas carregados:",e.therapists),m(e.therapists||[])}catch(d){console.error("[PARENT-CHAT] Erro ao carregar terapeutas:",d),m([])}})()):console.log("[PARENT-CHAT] N\xe3o carregando terapeutas - patientId:",t)}),[t,y]),(0,s.useEffect)((()=>{if(!t)return;const e=Ac(qe.G),a="patient-".concat(t);e.emit("joinRoom",a),e.on("newMessage",(e=>{console.log("Mensagem recebida via Socket.IO:",e),r((t=>e.clientId?t.map((t=>t.id===e.clientId?(0,Ie.A)((0,Ie.A)({},e),{},{isOptimistic:!1}):t)):t.some((t=>t.id===e.id))?t:[...t,e]))}));return(async()=>{try{c(!0);const e=await(async e=>{try{const t=localStorage.getItem("token");return(await $e.A.get("".concat(Pc,"/").concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).data}catch(d){throw d}})(t);r(e),u(null)}catch(Ff){u("N\xe3o foi poss\xedvel carregar as mensagens."),console.error(Ff)}finally{c(!1)}})(),()=>{e.disconnect()}}),[t]);const _=e=>{var t;const a=i.lastIndexOf("@");if(-1!==a){const t=i.substring(0,a),s="@".concat(e.full_name," ");o(t+s)}f(!1),null===(t=N.current)||void 0===t||t.focus()},S=h.filter((e=>{if(!g)return!0;const t=g.toLowerCase(),a=e.full_name.toLowerCase(),s=a.split(" "),n=s.map((e=>e[0])).join("");return a.includes(t)||n.includes(t)||s.some((e=>e.startsWith(t)))}));return(0,We.jsxs)("div",{className:"chat-container",children:[(0,We.jsx)("header",{className:"chat-header",children:(0,We.jsxs)("h3",{children:["Conversa sobre ",a]})}),(0,We.jsxs)("main",{className:"chat-messages",children:[l&&(0,We.jsx)("p",{className:"chat-info",children:"Carregando mensagens..."}),d&&(0,We.jsx)("p",{className:"chat-info error",children:d}),!l&&0===n.length&&(0,We.jsx)("p",{className:"chat-info",children:"Nenhuma mensagem ainda. Seja o primeiro a come\xe7ar!"}),y&&n.map((e=>{const t=e.sender_id===y.id,a=Rc(e.sender_id,y.id,e.sender_name),s=Mc(e.sender_name,a),n=((e,t)=>{if(!t)return null;if(e.isOptimistic)return{type:"sending",icon:(0,We.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"2px",fontSize:"0.7rem",opacity:.8},children:(0,We.jsx)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:(0,We.jsx)("circle",{cx:"6",cy:"6",r:"1.5",fill:"#ffffff",opacity:"0.7",children:(0,We.jsx)("animate",{attributeName:"opacity",values:"0.3;1;0.3",dur:"1.5s",repeatCount:"indefinite"})})})}),text:"Enviando..."};if(e.id&&!e.isOptimistic)return Date.now()-new Date(e.created_at).getTime()>5e3?{type:"read",icon:(0,We.jsx)(Tc,{double:!0,read:!0,onDarkBackground:!0}),text:"Lido"}:{type:"delivered",icon:(0,We.jsx)(Tc,{double:!0,read:!1,onDarkBackground:!0}),text:"Entregue"};return{type:"sent",icon:(0,We.jsx)(Tc,{double:!1,read:!1,onDarkBackground:!0}),text:"Enviado"}})(e,t);return(0,We.jsxs)("div",{className:"message-wrapper ".concat(t?"sent":"received"),children:[!t&&(0,We.jsx)("div",{className:"message-avatar received",style:{backgroundColor:s.color},children:s.avatar}),(0,We.jsxs)("div",{className:"message-bubble ".concat(t?"sent":"received"," ").concat(a),children:[(0,We.jsx)("div",{className:"message-sender",children:t?"Voc\xea":(0,We.jsxs)("span",{children:[e.sender_name,(0,We.jsx)("span",{className:"specialty-badge",style:{backgroundColor:s.color,color:"white",fontSize:"0.7rem",padding:"2px 6px",borderRadius:"10px",marginLeft:"8px",fontWeight:"500"},children:s.badge})]})}),(0,We.jsx)("div",{className:"message-content",children:(i=e.message,i.split(/@(\w+(?:\s+\w+)*)/g).map(((e,t)=>{if(t%2===1){var a;const s=y&&e.toLowerCase().includes(null===(a=y.full_name)||void 0===a?void 0:a.toLowerCase());return(0,We.jsxs)("span",{className:"px-2 py-1 rounded-md font-semibold ".concat(s?"bg-blue-100 text-blue-800 border border-blue-200":"bg-gray-100 text-gray-800 border border-gray-200"),children:["@",e]},t)}return e})))}),(0,We.jsxs)("div",{className:"message-timestamp",children:[(r=e.created_at,new Date(r).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})),n&&(0,We.jsx)("span",{className:"message-status",style:{marginLeft:"8px",opacity:.7},children:n.icon})]})]}),t&&(0,We.jsx)("div",{className:"message-avatar sent",style:{backgroundColor:"#007bff"},children:"EU"})]},e.id);var r,i})),(0,We.jsx)("div",{ref:j})]}),(0,We.jsxs)("footer",{className:"chat-input-area",children:[(0,We.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),""===i.trim()||!y)return;let a;try{a=Date.now().toString();const e={id:a,sender_id:y.id,sender_name:y.full_name,message:i,created_at:(new Date).toISOString(),patient_id:t,isOptimistic:!0};r((t=>[...t,e])),o("");await(async e=>{try{const t=localStorage.getItem("token");return(await $e.A.post("".concat(Pc,"/").concat(e.patient_id),e,{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).data}catch(d){throw d}})({patient_id:t,message:i,sender_id:y.id,clientId:a});window.dispatchEvent(new CustomEvent("messageSentOrReceived"))}catch(Ff){u("Falha ao enviar mensagem."),a&&r((e=>e.filter((e=>e.id!==a))))}},className:"chat-form",children:[(0,We.jsxs)("div",{className:"relative flex-grow",children:[(0,We.jsx)("input",{ref:N,type:"text",value:i,onChange:e=>{const t=e.target.value;o(t),console.log("[PARENT-CHAT] Input mudou:",t),console.log("[PARENT-CHAT] Terapeutas dispon\xedveis:",h.length);const a=t.lastIndexOf("@");if(-1!==a){const e=t.substring(a+1),s=e.indexOf(" ");console.log("[PARENT-CHAT] Detectou @:",{lastAtIndex:a,textAfterAt:e,spaceIndex:s}),-1===s?(x(e.toLowerCase()),f(!0),v(0),console.log("[PARENT-CHAT] Mostrando dropdown - busca:",e.toLowerCase())):(f(!1),console.log("[PARENT-CHAT] Escondendo dropdown - espa\xe7o encontrado"))}else f(!1),console.log("[PARENT-CHAT] Escondendo dropdown - sem @")},onKeyDown:e=>{if(p&&0!==S.length)switch(e.key){case"ArrowDown":e.preventDefault(),v((e=>e<S.length-1?e+1:0));break;case"ArrowUp":e.preventDefault(),v((e=>e>0?e-1:S.length-1));break;case"Enter":p&&S[b]&&(e.preventDefault(),_(S[b]));break;case"Escape":f(!1)}},placeholder:"Digite sua mensagem... (use @nome para mencionar um terapeuta)",className:"chat-input",disabled:l}),p&&S.length>0&&(0,We.jsxs)("div",{className:"absolute bottom-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto z-10 mb-2",children:[(0,We.jsxs)("div",{className:"p-2 bg-gray-50 border-b border-gray-200 text-xs font-medium text-gray-600",children:["\ud83d\udcac Mencionar terapeuta (",S.length," ",1===S.length?"encontrado":"encontrados",")"]}),S.map(((e,t)=>{const a=Mc(e.full_name,Rc(e.id,y.id,e.full_name)),s=t===b;return(0,We.jsxs)("div",{onClick:()=>_(e),className:"flex items-center p-3 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors ".concat(s?"bg-blue-50 border-blue-200":"hover:bg-gray-50"),children:[(0,We.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-xs mr-3 shadow-sm",style:{backgroundColor:a.color},children:a.avatar}),(0,We.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,We.jsx)("p",{className:"text-sm font-medium truncate ".concat(s?"text-blue-900":"text-gray-900"),children:e.full_name}),(0,We.jsxs)("div",{className:"flex items-center mt-1",children:[(0,We.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full text-white mr-2",style:{backgroundColor:a.color},children:a.badge}),s&&(0,We.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:"\u21b5 Enter para mencionar"})]})]})]},e.id)})),(0,We.jsx)("div",{className:"p-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-500",children:"\ud83d\udca1 Use \u2191\u2193 para navegar, Enter para selecionar, Esc para fechar"})]})]}),(0,We.jsx)("button",{type:"submit",className:"send-button",disabled:!i.trim(),children:(0,We.jsx)(Oc,{})})]}),h.length>0&&(0,We.jsxs)("div",{className:"text-xs text-gray-500 mt-1 px-3 flex items-center justify-between",children:[(0,We.jsxs)("span",{children:["\ud83d\udca1 Digite @",h.length>3?"nome":h.map((e=>e.full_name.split(" ")[0].toLowerCase())).join(", @")," para mencionar um terapeuta espec\xedfico"]}),(0,We.jsxs)("span",{className:"text-gray-400",children:[h.length," terapeuta",1!==h.length?"s":""," dispon\xedvel",1!==h.length?"is":""]})]})]})]})},Fc="".concat(qe.H,"/discussions"),zc=()=>(0,We.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",width:"24",height:"24",children:(0,We.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})}),Bc=e=>{let{double:t=!1,read:a=!1,onDarkBackground:s=!1}=e;const n=()=>s?a?"#00ff88":"#ffffff":a?"#00c851":"#666666";return(0,We.jsxs)("svg",{width:"18",height:"12",viewBox:"0 0 18 12",fill:"none",style:{display:"inline-block",filter:s&&a?"drop-shadow(0 0 2px rgba(0, 255, 136, 0.5))":"none"},children:[(0,We.jsx)("path",{d:"M3.5 6L6 8.5L14.5 0",stroke:n(),strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"}),t&&(0,We.jsx)("path",{d:"M6.5 6L9 8.5L17.5 0",stroke:n(),strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round"})]})},qc=(e,t)=>{const a={fono:{badge:"\ud83d\udde3\ufe0f Fono",color:"#3498db",avatar:"FO"},fonoaudiologia:{badge:"\ud83d\udde3\ufe0f Fono",color:"#3498db",avatar:"FO"},psico:{badge:"\ud83e\udde0 Psico",color:"#e74c3c",avatar:"PS"},psicologia:{badge:"\ud83e\udde0 Psico",color:"#e74c3c",avatar:"PS"},music:{badge:"\ud83c\udfb5 Music",color:"#9b59b6",avatar:"MU"},musicoterapia:{badge:"\ud83c\udfb5 Music",color:"#9b59b6",avatar:"MU"},to:{badge:"\ud83c\udfe5 TO",color:"#f39c12",avatar:"TO"},terapiaocupacional:{badge:"\ud83c\udfe5 TO",color:"#f39c12",avatar:"TO"},fisio:{badge:"\ud83e\udd38 Fisio",color:"#27ae60",avatar:"FI"},fisioterapia:{badge:"\ud83e\udd38 Fisio",color:"#27ae60",avatar:"FI"},psicomotricidade:{badge:"\ud83e\udd38 Psico",color:"#27ae60",avatar:"PM"},psicopedagogia:{badge:"\ud83d\udcda Psicoped",color:"#e67e22",avatar:"PP"}};if("pai"===t||"parent"===t)return{badge:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66 Fam\xedlia",color:"#2ecc71",avatar:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d\udc66"};if("admin"===t||"administrador"===t)return{badge:"\u2699\ufe0f Admin",color:"#34495e",avatar:"AD"};if(e){const t=e.toLowerCase();for(const[e,s]of Object.entries(a))if(t.includes(e))return s}return{badge:"\ud83d\udc68\u200d\u2695\ufe0f Terapeuta",color:"#3498db",avatar:e?e.split(" ").map((e=>e[0])).join("").substring(0,2).toUpperCase():"TR"}},Uc=(e,t,a)=>{if(e===t)return"current";const s=(a||"").toLowerCase();return s.includes("fono")?"fono":s.includes("psico")&&!s.includes("psicomotricidade")?"psico":s.includes("music")?"music":s.includes("to")||s.includes("terapiaocupacional")?"to":s.includes("fisio")||s.includes("psicomotricidade")?"fisio":s.includes("psicopedagogia")?"psicoped":s.includes("pai")||s.includes("m\xe3e")||s.includes("mae")||s.includes("familia")||s.includes("responsavel")?"parent":s.includes("admin")?"admin":"therapist"},Hc=e=>{let{patientId:t,patientName:a}=e;const[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)(""),[l,c]=(0,s.useState)(!0),[d,u]=(0,s.useState)(null),[h,m]=(0,s.useState)([]),[p,f]=(0,s.useState)(!1),[g,x]=(0,s.useState)(""),[b,v]=(0,s.useState)(0),{user:y}=Ye(),j=(0,s.useRef)(null),N=(0,s.useRef)(null),[,w]=(0,s.useState)(0);(0,s.useEffect)((()=>{var e;null===(e=j.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),n.length>0&&window.dispatchEvent(new CustomEvent("notificationUpdate"))}),[n]),(0,s.useEffect)((()=>{const e=setInterval((()=>{w((e=>e+1))}),1e3);return()=>clearInterval(e)}),[]),(0,s.useEffect)((()=>{!t||"therapist"!==(null===y||void 0===y?void 0:y.role)&&"terapeuta"!==(null===y||void 0===y?void 0:y.role)?console.log("[CASE-DISCUSSION] N\xe3o carregando colegas - patientId:",t,"userRole:",null===y||void 0===y?void 0:y.role):(console.log("[CASE-DISCUSSION] Iniciando carregamento de colegas para terapeuta"),(async()=>{try{console.log("[CASE-DISCUSSION] Carregando colegas para men\xe7\xf5es:",{patientId:t,userRole:null===y||void 0===y?void 0:y.role});const e=await Dc(t);console.log("[CASE-DISCUSSION] Colegas carregados:",e.colleagues),m(e.colleagues||[])}catch(d){console.error("[CASE-DISCUSSION] Erro ao carregar colegas:",d),m([])}})())}),[t,y]),(0,s.useEffect)((()=>{if(!t)return;const e=Ac(qe.G),a="discussion-".concat(t);e.emit("joinRoom",a),e.on("newDiscussionMessage",(e=>{r((t=>[...t,e]))}));return(async()=>{try{c(!0);const e=await(async e=>{try{const t=localStorage.getItem("token");return(await $e.A.get("".concat(Fc,"/patient/").concat(e),{headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}})).data}catch(d){throw d}})(t);r(e),u(null)}catch(Ff){u("N\xe3o foi poss\xedvel carregar as mensagens da discuss\xe3o."),console.error(Ff)}finally{c(!1)}})(),()=>{e.disconnect()}}),[t]);const _=e=>{var t;const a=i.lastIndexOf("@");if(-1!==a){const t=i.substring(0,a),s="@".concat(e.full_name," ");o(t+s)}f(!1),null===(t=N.current)||void 0===t||t.focus()},S=h.filter((e=>{if(!g)return!0;const t=g.toLowerCase(),a=e.full_name.toLowerCase(),s=a.split(" "),n=s.map((e=>e[0])).join("");return a.includes(t)||n.includes(t)||s.some((e=>e.startsWith(t)))}));return(0,We.jsxs)("div",{className:"chat-container",children:[(0,We.jsx)("header",{className:"chat-header",children:(0,We.jsxs)("h3",{children:["Discuss\xe3o de Caso sobre ",a]})}),(0,We.jsxs)("main",{className:"chat-messages",children:[l&&(0,We.jsx)("p",{className:"chat-info",children:"Carregando mensagens..."}),d&&(0,We.jsx)("p",{className:"chat-info error",children:d}),!l&&0===n.length&&(0,We.jsx)("p",{className:"chat-info",children:"Nenhuma mensagem ainda. Seja o primeiro a come\xe7ar!"}),y&&n.map((e=>{const t=e.user_id===y.id,a=Uc(e.user_id,y.id,e.user_name),s=qc(e.user_name,a),n=((e,t)=>{if(!t)return null;const a=Date.now()-new Date(e.created_at).getTime();return a>5e3?{type:"read",icon:(0,We.jsx)(Bc,{double:!0,read:!0,onDarkBackground:!0}),text:"Lido"}:a>1e3?{type:"delivered",icon:(0,We.jsx)(Bc,{double:!0,read:!1,onDarkBackground:!0}),text:"Entregue"}:{type:"sent",icon:(0,We.jsx)(Bc,{double:!1,read:!1,onDarkBackground:!0}),text:"Enviado"}})(e,t);return(0,We.jsxs)("div",{className:"message-wrapper ".concat(t?"sent":"received"),children:[!t&&(0,We.jsx)("div",{className:"message-avatar received",style:{backgroundColor:s.color},children:s.avatar}),(0,We.jsxs)("div",{className:"message-bubble ".concat(t?"sent":"received"," ").concat(a),children:[(0,We.jsx)("div",{className:"message-sender",children:t?"Voc\xea":(0,We.jsxs)("span",{children:[e.user_name,(0,We.jsx)("span",{className:"specialty-badge",style:{backgroundColor:s.color,color:"white",fontSize:"0.7rem",padding:"2px 6px",borderRadius:"10px",marginLeft:"8px",fontWeight:"500"},children:s.badge})]})}),(0,We.jsx)("div",{className:"message-content",children:(i=e.content,i.split(/@(\w+(?:\s+\w+)*)/g).map(((e,t)=>{if(t%2===1){var a;const s=y&&e.toLowerCase().includes(null===(a=y.full_name)||void 0===a?void 0:a.toLowerCase());return(0,We.jsxs)("span",{className:"px-2 py-1 rounded-md font-semibold ".concat(s?"bg-blue-100 text-blue-800 border border-blue-200":"bg-gray-100 text-gray-800 border border-gray-200"),children:["@",e]},t)}return e})))}),(0,We.jsxs)("div",{className:"message-timestamp",children:[(r=e.created_at,new Date(r).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})),n&&(0,We.jsx)("span",{className:"message-status",style:{marginLeft:"8px",opacity:.7},children:n.icon})]})]}),t&&(0,We.jsx)("div",{className:"message-avatar sent",style:{backgroundColor:"#007bff"},children:"EU"})]},e.id);var r,i})),(0,We.jsx)("div",{ref:j})]}),(0,We.jsxs)("footer",{className:"chat-input-area",children:[(0,We.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),""!==i.trim()&&y)try{await(async(e,t)=>{try{const a=localStorage.getItem("token");return(await $e.A.post("".concat(Fc,"/patient/").concat(e),{content:t},{headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"}})).data}catch(d){throw d}})(t,i),o("")}catch(Ff){u("Falha ao enviar mensagem.")}},className:"chat-form",children:[(0,We.jsxs)("div",{className:"relative flex-grow",children:[(0,We.jsx)("input",{ref:N,type:"text",value:i,onChange:e=>{const t=e.target.value;o(t),console.log("[CASE-DISCUSSION] Input mudou:",t),console.log("[CASE-DISCUSSION] Colegas dispon\xedveis:",h.length);const a=t.lastIndexOf("@");if(-1!==a){const e=t.substring(a+1),s=e.indexOf(" ");console.log("[CASE-DISCUSSION] Detectou @:",{lastAtIndex:a,textAfterAt:e,spaceIndex:s}),-1===s?(x(e.toLowerCase()),f(!0),v(0),console.log("[CASE-DISCUSSION] Mostrando dropdown - busca:",e.toLowerCase())):(f(!1),console.log("[CASE-DISCUSSION] Escondendo dropdown - espa\xe7o encontrado"))}else f(!1),console.log("[CASE-DISCUSSION] Escondendo dropdown - sem @")},onKeyDown:e=>{if(p&&0!==S.length)switch(e.key){case"ArrowDown":e.preventDefault(),v((e=>e<S.length-1?e+1:0));break;case"ArrowUp":e.preventDefault(),v((e=>e>0?e-1:S.length-1));break;case"Enter":p&&S[b]&&(e.preventDefault(),_(S[b]));break;case"Escape":f(!1)}},placeholder:"Digite sua mensagem... (use @nome para mencionar um colega)",className:"chat-input",disabled:l}),p&&S.length>0&&(0,We.jsxs)("div",{className:"absolute bottom-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg max-h-48 overflow-y-auto z-10 mb-2",children:[(0,We.jsxs)("div",{className:"p-2 bg-gray-50 border-b border-gray-200 text-xs font-medium text-gray-600",children:["\ud83d\udcac Mencionar colega (",S.length," ",1===S.length?"encontrado":"encontrados",")"]}),S.map(((e,t)=>{const a=qc(e.full_name,Uc(e.id,y.id,e.full_name)),s=t===b;return(0,We.jsxs)("div",{onClick:()=>_(e),className:"flex items-center p-3 cursor-pointer border-b border-gray-100 last:border-b-0 transition-colors ".concat(s?"bg-blue-50 border-blue-200":"hover:bg-gray-50"),children:[(0,We.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-white font-bold text-xs mr-3 shadow-sm",style:{backgroundColor:a.color},children:a.avatar}),(0,We.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,We.jsx)("p",{className:"text-sm font-medium truncate ".concat(s?"text-blue-900":"text-gray-900"),children:e.full_name}),(0,We.jsxs)("div",{className:"flex items-center mt-1",children:[(0,We.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full text-white mr-2",style:{backgroundColor:a.color},children:a.badge}),s&&(0,We.jsx)("span",{className:"text-xs text-blue-600 font-medium",children:"\u21b5 Enter para mencionar"})]})]})]},e.id)})),(0,We.jsx)("div",{className:"p-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-500",children:"\ud83d\udca1 Use \u2191\u2193 para navegar, Enter para selecionar, Esc para fechar"})]})]}),(0,We.jsx)("button",{type:"submit",className:"send-button",disabled:!i.trim(),children:(0,We.jsx)(zc,{})})]}),h.length>0&&(0,We.jsxs)("div",{className:"text-xs text-gray-500 mt-1 px-3 flex items-center justify-between",children:[(0,We.jsxs)("span",{children:["\ud83d\udca1 Digite @",h.length>3?"nome":h.map((e=>e.full_name.split(" ")[0].toLowerCase())).join(", @")," para mencionar um colega espec\xedfico"]}),(0,We.jsxs)("span",{className:"text-gray-400",children:[h.length," colega",1!==h.length?"s":""," dispon\xedvel",1!==h.length?"is":""]})]})]})]})},Wc=e=>{if(!e)return"N\xe3o informado";try{return new Date(e).toLocaleDateString("pt-BR")}catch(t){return"Data inv\xe1lida"}},Vc=e=>{var t,a,n,r,i,o,l,c,d,u,h;let{isOpen:m,onClose:p,reportData:f,analysisData:g,patientData:x,professionalData:b,onEditSection:v,customizations:y={},onUpdateCustomizations:j}=e;const[N,w]=(0,s.useState)(null),[_,S]=(0,s.useState)({}),[C,k]=(0,s.useState)(!1);if((0,s.useEffect)((()=>{S(y)}),[y]),!m)return null;const A=e=>{w(e)},P=e=>{j((0,Ie.A)((0,Ie.A)({},y),{},{[e]:_[e]})),w(null)},E=()=>{S(y),w(null)},L=async()=>{k(!0);try{await(0,il.Lr)({reportData:f,analysisData:g,patientData:x,professionalData:b,customizations:y})}catch(e){console.error("Erro ao gerar PDF:",e),alert("Erro ao gerar PDF. Tente novamente.")}finally{k(!1)}},D=e=>{switch(e){case"positive":return{icon:Ur,color:"text-green-600"};case"attention":return{icon:To,color:"text-yellow-600"};default:return{icon:_i,color:"text-blue-600"}}};return(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 flex justify-between items-center",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("h2",{className:"text-xl font-bold text-white",children:"Preview - Relat\xf3rio de Evolu\xe7\xe3o Terap\xeautica"}),(0,We.jsxs)("p",{className:"text-indigo-100 text-sm",children:[null===f||void 0===f?void 0:f.name," \u2022 Revise e personalize antes de gerar o PDF"]})]}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[(0,We.jsx)("button",{onClick:L,disabled:C,className:"bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg transition-all disabled:opacity-50 flex items-center space-x-2",children:C?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin"}),(0,We.jsx)("span",{children:"Gerando..."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:bi}),(0,We.jsx)("span",{children:"Gerar PDF"})]})}),(0,We.jsx)("button",{onClick:p,className:"text-white hover:text-indigo-200 transition-colors text-xl",children:(0,We.jsx)(Vn,{icon:lo})})]})]}),(0,We.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,We.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:Sr,className:"text-indigo-600 text-lg"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"1. Identifica\xe7\xe3o do Usu\xe1rio"})]}),(0,We.jsx)("button",{onClick:()=>A("identification"),className:"text-indigo-600 hover:text-indigo-800 transition-colors",children:(0,We.jsx)(Vn,{icon:vr})})]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-600",children:"Nome:"}),(0,We.jsx)("p",{className:"text-gray-800",children:null===f||void 0===f?void 0:f.name})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-600",children:"Data de Nascimento:"}),(0,We.jsx)("p",{className:"text-gray-800",children:Wc(null===f||void 0===f?void 0:f.dob)})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-600",children:"Diagn\xf3stico:"}),(0,We.jsx)("p",{className:"text-gray-800",children:(null===f||void 0===f?void 0:f.diagnosis)||"N\xe3o informado"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-600",children:"Ocupa\xe7\xe3o:"}),(0,We.jsx)("p",{className:"text-gray-800",children:(null===x||void 0===x?void 0:x.patient_occupation)||"N\xe3o informado"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-600",children:"Respons\xe1vel:"}),(0,We.jsxs)("p",{className:"text-gray-800",children:[null===x||void 0===x?void 0:x.guardian_name," (",null===x||void 0===x?void 0:x.guardian_relationship,")"]})]})]})]}),(0,We.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:wr,className:"text-blue-600 text-lg"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"2. Descri\xe7\xe3o da Demanda"})]}),(0,We.jsx)("button",{onClick:()=>A("demand"),className:"text-blue-600 hover:text-blue-800 transition-colors",children:(0,We.jsx)(Vn,{icon:vr})})]}),"demand"===N?(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Queixa Principal:"}),(0,We.jsx)("textarea",{value:(null===(t=_.demand)||void 0===t?void 0:t.main_complaint)||(null===x||void 0===x?void 0:x.main_complaint)||"",onChange:e=>S((t=>(0,Ie.A)((0,Ie.A)({},t),{},{demand:(0,Ie.A)((0,Ie.A)({},t.demand),{},{main_complaint:e.target.value})}))),className:"w-full p-3 border border-gray-300 rounded-lg resize-none",rows:"3"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Objetivos do Tratamento:"}),(0,We.jsx)("textarea",{value:(null===(a=_.demand)||void 0===a?void 0:a.treatment_objectives)||(null===x||void 0===x?void 0:x.treatment_objectives)||"",onChange:e=>S((t=>(0,Ie.A)((0,Ie.A)({},t),{},{demand:(0,Ie.A)((0,Ie.A)({},t.demand),{},{treatment_objectives:e.target.value})}))),className:"w-full p-3 border border-gray-300 rounded-lg resize-none",rows:"3"})]}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[(0,We.jsxs)("button",{onClick:()=>P("demand"),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:Do}),(0,We.jsx)("span",{children:"Salvar"})]}),(0,We.jsx)("button",{onClick:E,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]}):(0,We.jsxs)("div",{className:"space-y-3",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-600",children:"Queixa Principal:"}),(0,We.jsx)("p",{className:"text-gray-800 mt-1",children:(null===(n=y.demand)||void 0===n?void 0:n.main_complaint)||(null===x||void 0===x?void 0:x.main_complaint)||"N\xe3o informado"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-600",children:"Objetivos do Tratamento:"}),(0,We.jsx)("p",{className:"text-gray-800 mt-1",children:(null===(r=y.demand)||void 0===r?void 0:r.treatment_objectives)||(null===x||void 0===x?void 0:x.treatment_objectives)||"N\xe3o informado"})]})]})]}),(0,We.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:ni,className:"text-purple-600 text-lg"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"3. Registro da Evolu\xe7\xe3o das Sess\xf5es"})]}),(0,We.jsx)("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded",children:"Dados objetivos - N\xe3o edit\xe1vel"})]}),(null===g||void 0===g?void 0:g.statistics)&&(0,We.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:g.statistics.total_sessions}),(0,We.jsx)("div",{className:"text-gray-600",children:"Sess\xf5es Realizadas"})]}),(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[g.statistics.avg_score.toFixed(1),"%"]}),(0,We.jsx)("div",{className:"text-gray-600",children:"M\xe9dia de Acertos"})]}),(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[g.statistics.independence_percentage.toFixed(1),"%"]}),(0,We.jsx)("div",{className:"text-gray-600",children:"Independ\xeancia"})]})]}),(null===g||void 0===g?void 0:g.frequent_observations)&&g.frequent_observations.length>0&&(0,We.jsxs)("div",{className:"mt-4",children:[(0,We.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Observa\xe7\xf5es Mais Frequentes:"}),(0,We.jsx)("ul",{className:"space-y-1 text-sm",children:g.frequent_observations.slice(0,5).map(((e,t)=>(0,We.jsxs)("li",{className:"flex justify-between",children:[(0,We.jsxs)("span",{className:"text-gray-800",children:['"',e.note,'"']}),(0,We.jsxs)("span",{className:"text-gray-500",children:["(",e.frequency,"x)"]})]},t)))})]})]}),(0,We.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:hr,className:"text-yellow-600 text-lg"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"4. An\xe1lise"})]}),(0,We.jsx)("button",{onClick:()=>A("analysis"),className:"text-yellow-600 hover:text-yellow-800 transition-colors",children:(0,We.jsx)(Vn,{icon:vr})})]}),"analysis"===N?(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"An\xe1lise Comportamental:"}),(0,We.jsx)("textarea",{value:(null===(i=_.analysis)||void 0===i?void 0:i.clinical_interpretation)||"",onChange:e=>S((t=>(0,Ie.A)((0,Ie.A)({},t),{},{analysis:(0,Ie.A)((0,Ie.A)({},t.analysis),{},{clinical_interpretation:e.target.value})}))),placeholder:"Interpreta\xe7\xe3o dos dados baseada nos princ\xedpios da An\xe1lise do Comportamento...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none",rows:"5"})]}),(null===g||void 0===g?void 0:g.insights)&&(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3 mb-4",children:(0,We.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,We.jsx)("span",{className:"text-amber-600 mt-0.5 flex-shrink-0",children:"\u26a0\ufe0f"}),(0,We.jsxs)("div",{className:"text-xs text-amber-800",children:[(0,We.jsx)("p",{className:"font-medium mb-1",children:"Responsabilidade Profissional:"}),(0,We.jsxs)("p",{children:["Os insights abaixo s\xe3o ",(0,We.jsx)("strong",{children:"sugest\xf5es autom\xe1ticas baseadas apenas em dados quantitativos"}),". \xc9 ",(0,We.jsx)("strong",{children:"imprescind\xedvel"})," que voc\xea analise, adapte e complemente com sua expertise cl\xednica, considerando aspectos comportamentais e contextuais espec\xedficos do caso."]})]})]})}),(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Insights Sugeridos (clique para adicionar):"}),(0,We.jsx)("div",{className:"space-y-2",children:g.insights.map(((e,t)=>{const{icon:a,color:s}=D(e.type);return(0,We.jsx)("button",{onClick:()=>{var t;const a=(null===(t=_.analysis)||void 0===t?void 0:t.clinical_interpretation)||"",s=a?"".concat(a,"\n\n\u2022 ").concat(e.text):"\u2022 ".concat(e.text);S((e=>(0,Ie.A)((0,Ie.A)({},e),{},{analysis:(0,Ie.A)((0,Ie.A)({},e.analysis),{},{clinical_interpretation:s})})))},className:"w-full text-left p-3 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:(0,We.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,We.jsx)(Vn,{icon:a,className:"".concat(s," mt-1")}),(0,We.jsx)("span",{className:"text-sm text-gray-800",children:e.text})]})},t)}))})]}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[(0,We.jsxs)("button",{onClick:()=>P("analysis"),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:Do}),(0,We.jsx)("span",{children:"Salvar"})]}),(0,We.jsx)("button",{onClick:E,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]}):(0,We.jsxs)("div",{className:"space-y-4",children:[null!==(o=y.analysis)&&void 0!==o&&o.clinical_interpretation?(0,We.jsx)("div",{children:(0,We.jsx)("p",{className:"text-gray-800 whitespace-pre-wrap",children:y.analysis.clinical_interpretation})}):(0,We.jsx)("div",{className:"text-gray-500 italic",children:'Clique em "Editar" para adicionar sua interpreta\xe7\xe3o cl\xednica baseada nos dados apresentados.'}),(null===g||void 0===g?void 0:g.insights)&&!(null!==(l=y.analysis)&&void 0!==l&&l.clinical_interpretation)&&(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3 mb-4",children:(0,We.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,We.jsx)("span",{className:"text-amber-600 mt-0.5 flex-shrink-0",children:"\u26a0\ufe0f"}),(0,We.jsxs)("div",{className:"text-xs text-amber-800",children:[(0,We.jsx)("p",{className:"font-medium mb-1",children:"Insights Autom\xe1ticos Dispon\xedveis:"}),(0,We.jsxs)("p",{children:["Estes insights s\xe3o baseados ",(0,We.jsx)("strong",{children:"apenas em m\xe9tricas quantitativas"}),'. Clique em "Editar" para adicionar sua interpreta\xe7\xe3o cl\xednica profissional.']})]})]})}),(0,We.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Sugest\xf5es Baseadas em Dados:"}),(0,We.jsx)("div",{className:"space-y-2",children:g.insights.map(((e,t)=>{const{icon:a,color:s}=D(e.type);return(0,We.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-white rounded-lg border border-gray-200",children:[(0,We.jsx)(Vn,{icon:a,className:"".concat(s," mt-1")}),(0,We.jsx)("span",{className:"text-sm text-gray-800",children:e.text})]},t)}))})]})]})]}),(0,We.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:ir,className:"text-green-600 text-lg"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"5. Conclus\xe3o e Encaminhamentos"})]}),(0,We.jsx)("button",{onClick:()=>A("conclusions"),className:"text-green-600 hover:text-green-800 transition-colors",children:(0,We.jsx)(Vn,{icon:vr})})]}),"conclusions"===N?(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"S\xedntese e Conclus\xf5es:"}),(0,We.jsx)("textarea",{value:(null===(c=_.conclusions)||void 0===c?void 0:c.summary)||"",onChange:e=>S((t=>(0,Ie.A)((0,Ie.A)({},t),{},{conclusions:(0,Ie.A)((0,Ie.A)({},t.conclusions),{},{summary:e.target.value})}))),placeholder:"S\xedntese do trabalho realizado e resultados alcan\xe7ados...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none",rows:"4"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Recomenda\xe7\xf5es e Encaminhamentos:"}),(0,We.jsx)("textarea",{value:(null===(d=_.conclusions)||void 0===d?void 0:d.recommendations)||"",onChange:e=>S((t=>(0,Ie.A)((0,Ie.A)({},t),{},{conclusions:(0,Ie.A)((0,Ie.A)({},t.conclusions),{},{recommendations:e.target.value})}))),placeholder:"Recomenda\xe7\xf5es para continuidade do tratamento e pr\xf3ximos passos...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none",rows:"4"})]}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[(0,We.jsxs)("button",{onClick:()=>P("conclusions"),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:Do}),(0,We.jsx)("span",{children:"Salvar"})]}),(0,We.jsx)("button",{onClick:E,className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]}):(0,We.jsxs)("div",{className:"space-y-3",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-600",children:"S\xedntese:"}),(0,We.jsx)("p",{className:"text-gray-800 mt-1",children:(null===(u=y.conclusions)||void 0===u?void 0:u.summary)||'Clique em "Editar" para adicionar s\xedntese do per\xedodo.'})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-600",children:"Recomenda\xe7\xf5es:"}),(0,We.jsx)("p",{className:"text-gray-800 mt-1",children:(null===(h=y.conclusions)||void 0===h?void 0:h.recommendations)||'Clique em "Editar" para adicionar recomenda\xe7\xf5es.'})]})]})]}),(0,We.jsxs)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,We.jsx)(Vn,{icon:Ni,className:"text-indigo-600"}),(0,We.jsx)("h4",{className:"font-medium text-indigo-800",children:"Dados Profissionais"})]}),(0,We.jsxs)("div",{className:"text-sm text-indigo-700",children:[(0,We.jsxs)("p",{children:[(0,We.jsx)("strong",{children:"Profissional:"})," ",null===b||void 0===b?void 0:b.professional_name]}),(0,We.jsxs)("p",{children:[(0,We.jsx)("strong",{children:"Registro:"})," ",null===b||void 0===b?void 0:b.professional_id]}),(0,We.jsxs)("p",{children:[(0,We.jsx)("strong",{children:"Qualifica\xe7\xf5es:"})," ",null===b||void 0===b?void 0:b.qualifications]})]})]})]}),(0,We.jsxs)("div",{className:"border-t border-gray-200 px-6 py-4 flex justify-between items-center",children:[(0,We.jsx)("div",{className:"text-sm text-gray-600",children:"Preview do relat\xf3rio \u2022 Todas as edi\xe7\xf5es ser\xe3o inclu\xeddas no PDF final"}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[(0,We.jsx)("button",{onClick:p,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Fechar Preview"}),(0,We.jsx)("button",{onClick:L,disabled:C,className:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 flex items-center space-x-2",children:C?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin"}),(0,We.jsx)("span",{children:"Gerando PDF..."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:bi}),(0,We.jsx)("span",{children:"Gerar PDF Final"})]})})]})]})]})})},Gc=e=>{let{isOpen:t,onClose:a,patient:n}=e;const{user:r,updateUser:i}=Ye(),{refreshAndReselectPatient:o}=dt(),[l,c]=(0,s.useState)({professional_id:"",qualifications:"",professional_signature:""}),[d,u]=(0,s.useState)({guardian_name:"",guardian_relationship:"",patient_occupation:"",main_complaint:"",treatment_objectives:""}),[h,m]=(0,s.useState)(1),[p,f]=(0,s.useState)(!1),[g,x]=(0,s.useState)({}),[b,v]=(0,s.useState)(!1),[y,j]=(0,s.useState)(""),[N,w]=(0,s.useState)(!1),[_,S]=(0,s.useState)(null),[C,k]=(0,s.useState)(null),[A,P]=(0,s.useState)(null),[E,L]=(0,s.useState)(null),[D,O]=(0,s.useState)({}),[T,M]=(0,s.useState)({period_type:"last_30_days",start_date:"",end_date:"",program_filter:"all"});(0,s.useEffect)((()=>{if(t){if(j(""),x({}),v(!1),w(!1),S(null),k(null),P(null),L(null),O({}),M({period_type:"last_30_days",start_date:"",end_date:"",program_filter:"all"}),r){const t=r.professional_id&&r.professional_id.trim().length>0,n=r.qualifications&&r.qualifications.trim().length>0,o=!t||!n;var e,a,s,i;if(f(o),o)m(1),c({professional_id:(null===(e=r.professional_id)||void 0===e?void 0:e.trim())||"",qualifications:(null===(a=r.qualifications)||void 0===a?void 0:a.trim())||"",professional_signature:(null===(s=r.professional_signature)||void 0===s?void 0:s.trim())||""});else c({professional_id:r.professional_id.trim(),qualifications:r.qualifications.trim(),professional_signature:(null===(i=r.professional_signature)||void 0===i?void 0:i.trim())||""}),m(2)}n&&u({guardian_name:n.guardian_name||"",guardian_relationship:n.guardian_relationship||"",patient_occupation:n.patient_occupation||"",main_complaint:n.main_complaint||"",treatment_objectives:n.treatment_objectives||""})}}),[t,r,n]);const R=async()=>{if(!b){v(!0),j("");try{if(p&&l&&(await Ue(l),i({professional_id:l.professional_id,qualifications:l.qualifications,professional_signature:l.professional_signature}),o))try{await o(n.id)}catch(e){}L({professional_name:(null===r||void 0===r?void 0:r.name)||(null===r||void 0===r?void 0:r.full_name),professional_id:(null===r||void 0===r?void 0:r.professional_id)||(null===l||void 0===l?void 0:l.professional_id),qualifications:(null===r||void 0===r?void 0:r.qualifications)||(null===l||void 0===l?void 0:l.qualifications),professional_signature:(null===r||void 0===r?void 0:r.professional_signature)||(null===l||void 0===l?void 0:l.professional_signature)}),await(async(e,t)=>{const a=localStorage.getItem("token"),s=await fetch("".concat(qe.H,"/reports/patient-data/").concat(e),{method:"PUT",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok){const e=await s.json().catch((()=>({})));throw new Error(e.error||"Erro ao atualizar dados do paciente")}return s.json()})(n.id,d),P(d);const t=await(async e=>{const t=localStorage.getItem("token"),a=await fetch("".concat(qe.H,"/reports/evolution-data/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok){const e=await a.json().catch((()=>({})));throw new Error(e.error||"Erro ao buscar dados do relat\xf3rio")}return a.json()})(n.id);S(t);const a=(e=>{const t=new Date;let a,s;switch(e.period_type){case"last_30_days":default:a=new Date(t),a.setDate(t.getDate()-30),s=t;break;case"last_60_days":a=new Date(t),a.setDate(t.getDate()-60),s=t;break;case"last_90_days":a=new Date(t),a.setDate(t.getDate()-90),s=t;break;case"custom":a=e.start_date?new Date(e.start_date):null,s=e.end_date?new Date(e.end_date):null}return{startDate:a?a.toISOString().split("T")[0]:null,endDate:s?s.toISOString().split("T")[0]:null}})(T),s=await He(n.id,a);k(s),w(!0)}catch(y){console.error("\u274c Erro ao processar configura\xe7\xe3o:",y),j("Erro ao processar dados: ".concat(y.message||"Erro desconhecido",". Verifique os dados e tente novamente."))}finally{v(!1)}}},I=()=>{w(!1),a()};return t&&n?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 rounded-t-2xl",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("h2",{className:"text-xl font-bold text-white",children:"Relat\xf3rio de Evolu\xe7\xe3o Terap\xeautica"}),(0,We.jsx)("p",{className:"text-indigo-100 text-sm",children:1===h?"Configura\xe7\xe3o Profissional":"Dados Complementares - ".concat(null===n||void 0===n?void 0:n.name)})]}),(0,We.jsx)("button",{onClick:I,className:"text-white hover:text-indigo-200 transition-colors",children:(0,We.jsx)(Vn,{icon:lo,className:"text-xl"})})]})}),(0,We.jsx)("div",{className:"px-6 py-3 border-b border-gray-200",children:(0,We.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2 ".concat(h>=1?"text-indigo-600":"text-gray-400"),children:[(0,We.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(h>=1?"bg-indigo-600 text-white":"bg-gray-200"),children:p?(0,We.jsx)(Vn,{icon:Ni,className:"text-sm"}):(0,We.jsx)(Vn,{icon:Do,className:"text-sm"})}),(0,We.jsx)("span",{className:"font-medium",children:"Dados Profissionais"})]}),(0,We.jsx)("div",{className:"flex-1 h-1 ".concat(h>=2?"bg-indigo-600":"bg-gray-200"," rounded")}),(0,We.jsxs)("div",{className:"flex items-center space-x-2 ".concat(h>=2?"text-indigo-600":"text-gray-400"),children:[(0,We.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat(h>=2?"bg-indigo-600 text-white":"bg-gray-200"),children:(0,We.jsx)(Vn,{icon:Sr,className:"text-sm"})}),(0,We.jsx)("span",{className:"font-medium",children:"Dados do Paciente"})]})]})}),(0,We.jsxs)("div",{className:"p-6",children:[y&&(0,We.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:lo,className:"text-red-500 mr-2"}),(0,We.jsx)("span",{className:"text-red-700 text-sm font-medium",children:"Erro ao processar relat\xf3rio"})]}),(0,We.jsx)("p",{className:"text-red-600 text-sm mt-2",children:y})]}),1===h&&p&&(0,We.jsxs)("div",{className:"space-y-6",children:[(0,We.jsxs)("div",{className:"text-center mb-6",children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,We.jsx)(Vn,{icon:Ni,className:"text-2xl text-indigo-600"})}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Configura\xe7\xe3o Profissional"}),(0,We.jsx)("p",{className:"text-gray-600 text-sm mb-3",children:"Para gerar relat\xf3rios profissionais completos, precisamos dos seus dados profissionais. Estes dados ser\xe3o reutilizados automaticamente."}),(0,We.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-3 text-center",children:(0,We.jsxs)("div",{className:"text-xs text-amber-800",children:[(0,We.jsx)("p",{className:"font-medium mb-1",children:"\u26a0\ufe0f Sobre os Relat\xf3rios de Evolu\xe7\xe3o"}),(0,We.jsxs)("p",{children:["Este sistema gera ",(0,We.jsx)("strong",{children:"an\xe1lises autom\xe1ticas baseadas em dados quantitativos"})," como suporte ao seu trabalho. \xc9 ",(0,We.jsx)("strong",{children:"imprescind\xedvel"})," que voc\xea revise, adapte e complemente com sua expertise cl\xednica profissional."]})]})})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Fi,className:"mr-2 text-indigo-500"}),"Registro Profissional *"]}),(0,We.jsx)("input",{type:"text",value:l.professional_id,onChange:e=>c((t=>(0,Ie.A)((0,Ie.A)({},t),{},{professional_id:e.target.value}))),placeholder:"Ex: CRP 06/12345-6",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 ".concat(g.professional_id?"border-red-500":"border-gray-300")}),g.professional_id&&(0,We.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.professional_id})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Ho,className:"mr-2 text-indigo-500"}),"Qualifica\xe7\xf5es e Forma\xe7\xe3o *"]}),(0,We.jsx)("textarea",{value:l.qualifications,onChange:e=>c((t=>(0,Ie.A)((0,Ie.A)({},t),{},{qualifications:e.target.value}))),placeholder:"Ex: Psic\xf3logo, Especialista em ABA (BACB-BCaBA), Mestre em An\xe1lise do Comportamento",rows:"3",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none ".concat(g.qualifications?"border-red-500":"border-gray-300")}),g.qualifications&&(0,We.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.qualifications})]})]}),(0,We.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,We.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,We.jsx)(Vn,{icon:Do,className:"text-blue-600 mt-1"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h4",{className:"font-medium text-blue-800",children:"Configura\xe7\xe3o \xdanica"}),(0,We.jsx)("p",{className:"text-blue-700 text-sm",children:"Estes dados ser\xe3o salvos no seu perfil e reutilizados automaticamente em todos os futuros relat\xf3rios, sem necessidade de reconfigura\xe7\xe3o."})]})]})})]}),2===h&&(0,We.jsxs)("div",{className:"space-y-6",children:[!p&&l&&(0,We.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4 mb-6",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,We.jsxs)("h4",{className:"text-sm font-semibold text-green-800 flex items-center",children:[(0,We.jsx)(Vn,{icon:Ni,className:"mr-2"}),"Dados Profissionais Configurados"]}),(0,We.jsxs)("button",{type:"button",onClick:()=>{f(!0),m(1)},className:"text-xs text-green-600 hover:text-green-800 flex items-center transition-colors bg-green-100 hover:bg-green-200 px-2 py-1 rounded",children:[(0,We.jsx)(Vn,{icon:vr,className:"mr-1"}),"Editar"]})]}),(0,We.jsxs)("div",{className:"text-sm text-green-700 space-y-1",children:[(0,We.jsxs)("p",{children:[(0,We.jsx)("strong",{children:"Nome:"})," ",(null===r||void 0===r?void 0:r.full_name)||(null===r||void 0===r?void 0:r.name)]}),(0,We.jsxs)("p",{children:[(0,We.jsx)("strong",{children:"Registro:"})," ",l.professional_id]}),(0,We.jsxs)("p",{children:[(0,We.jsx)("strong",{children:"Qualifica\xe7\xf5es:"})," ",l.qualifications]})]})]}),(0,We.jsxs)("div",{className:"text-center mb-6",children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-blue-100 to-cyan-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,We.jsx)(Vn,{icon:Sr,className:"text-2xl text-blue-600"})}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Dados Complementares do Paciente"}),(0,We.jsx)("p",{className:"text-gray-600 text-sm",children:"Informa\xe7\xf5es complementares necess\xe1rias para relat\xf3rio profissional completo"})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:yr,className:"mr-2 text-blue-500"}),"Nome do Respons\xe1vel *"]}),(0,We.jsx)("input",{type:"text",value:d.guardian_name,onChange:e=>u((t=>(0,Ie.A)((0,Ie.A)({},t),{},{guardian_name:e.target.value}))),placeholder:"Nome completo",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.guardian_name?"border-red-500":"border-gray-300")}),g.guardian_name&&(0,We.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.guardian_name})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Rela\xe7\xe3o com o Paciente *"}),(0,We.jsxs)("select",{value:d.guardian_relationship,onChange:e=>u((t=>(0,Ie.A)((0,Ie.A)({},t),{},{guardian_relationship:e.target.value}))),className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.guardian_relationship?"border-red-500":"border-gray-300"),children:[(0,We.jsx)("option",{value:"",children:"Selecionar rela\xe7\xe3o"}),(0,We.jsx)("option",{value:"m\xe3e",children:"M\xe3e"}),(0,We.jsx)("option",{value:"pai",children:"Pai"}),(0,We.jsx)("option",{value:"av\xf3",children:"Av\xf3"}),(0,We.jsx)("option",{value:"av\xf4",children:"Av\xf4"}),(0,We.jsx)("option",{value:"tia",children:"Tia"}),(0,We.jsx)("option",{value:"tio",children:"Tio"}),(0,We.jsx)("option",{value:"respons\xe1vel legal",children:"Respons\xe1vel Legal"}),(0,We.jsx)("option",{value:"outro",children:"Outro"})]}),g.guardian_relationship&&(0,We.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.guardian_relationship})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ocupa\xe7\xe3o do Paciente"}),(0,We.jsx)("input",{type:"text",value:d.patient_occupation,onChange:e=>u((t=>(0,Ie.A)((0,Ie.A)({},t),{},{patient_occupation:e.target.value}))),placeholder:"Ex: Estudante, Pr\xe9-escolar, etc.",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:wr,className:"mr-2 text-blue-500"}),"Queixa Principal *"]}),(0,We.jsx)("textarea",{value:d.main_complaint,onChange:e=>u((t=>(0,Ie.A)((0,Ie.A)({},t),{},{main_complaint:e.target.value}))),placeholder:"Descreva a queixa principal que motivou o atendimento",rows:"3",className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none ".concat(g.main_complaint?"border-red-500":"border-gray-300")}),g.main_complaint&&(0,We.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.main_complaint})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Objetivos Gerais do Tratamento"}),(0,We.jsx)("textarea",{value:d.treatment_objectives,onChange:e=>u((t=>(0,Ie.A)((0,Ie.A)({},t),{},{treatment_objectives:e.target.value}))),placeholder:"Descreva os objetivos gerais e metas do tratamento",rows:"3",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})]}),(0,We.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,We.jsxs)("div",{className:"mb-4",children:[(0,We.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2 text-blue-500"}),"Per\xedodo para An\xe1lise"]}),(0,We.jsxs)("select",{value:T.period_type,onChange:e=>M((t=>(0,Ie.A)((0,Ie.A)({},t),{},{period_type:e.target.value,start_date:"",end_date:""}))),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,We.jsx)("option",{value:"last_30_days",children:"\xdaltimos 30 dias"}),(0,We.jsx)("option",{value:"last_60_days",children:"\xdaltimos 60 dias"}),(0,We.jsx)("option",{value:"last_90_days",children:"\xdaltimos 90 dias"}),(0,We.jsx)("option",{value:"custom",children:"Per\xedodo personalizado"})]})]}),"custom"===T.period_type&&(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de In\xedcio"}),(0,We.jsx)("input",{type:"date",value:T.start_date,onChange:e=>M((t=>(0,Ie.A)((0,Ie.A)({},t),{},{start_date:e.target.value}))),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Fim"}),(0,We.jsx)("input",{type:"date",value:T.end_date,onChange:e=>M((t=>(0,Ie.A)((0,Ie.A)({},t),{},{end_date:e.target.value}))),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,We.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,We.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,We.jsx)(Vn,{icon:er,className:"text-blue-600 mt-1"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h4",{className:"font-medium text-blue-800",children:"An\xe1lise Baseada em Per\xedodo"}),(0,We.jsx)("p",{className:"text-blue-700 text-sm",children:"O relat\xf3rio incluir\xe1 apenas sess\xf5es realizadas no per\xedodo selecionado. Per\xedodos maiores fornecem an\xe1lises mais abrangentes."})]})]})})]}),(0,We.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,We.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,We.jsx)(Vn,{icon:Do,className:"text-green-600 mt-1"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h4",{className:"font-medium text-green-800",children:"Dados Reutiliz\xe1veis"}),(0,We.jsx)("p",{className:"text-green-700 text-sm",children:"Essas informa\xe7\xf5es ser\xe3o salvas e reutilizadas automaticamente nos pr\xf3ximos relat\xf3rios deste paciente."})]})]})})]})]}),(0,We.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-between",children:[(0,We.jsx)("div",{children:2===h&&p&&(0,We.jsx)("button",{onClick:()=>{2===h&&p&&m(1)},className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Voltar"})}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[(0,We.jsx)("button",{onClick:I,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,We.jsx)("button",{onClick:async()=>{1===h?(()=>{const e={};return l.professional_id.trim()||(e.professional_id="Registro profissional \xe9 obrigat\xf3rio"),l.qualifications.trim()||(e.qualifications="Qualifica\xe7\xf5es s\xe3o obrigat\xf3rias"),x(e),0===Object.keys(e).length})()&&m(2):(()=>{const e={};return d.guardian_name.trim()||(e.guardian_name="Nome do respons\xe1vel \xe9 obrigat\xf3rio"),d.guardian_relationship.trim()||(e.guardian_relationship="Rela\xe7\xe3o \xe9 obrigat\xf3ria"),d.main_complaint.trim()||(e.main_complaint="Queixa principal \xe9 obrigat\xf3ria"),x(e),0===Object.keys(e).length})()&&await R()},disabled:b,className:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 flex items-center space-x-2",children:b?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin"}),(0,We.jsx)("span",{children:"Processando..."})]}):(0,We.jsx)("span",{children:2===h?"Gerar Relat\xf3rio":"Continuar"})})]})]})]})}),N&&(0,We.jsx)(Vc,{isOpen:N,onClose:()=>{w(!1)},reportData:_,analysisData:C,patientData:A,professionalData:E,customizations:D,onUpdateCustomizations:e=>{O(e)}})]}):null},Yc=$e.A.create({baseURL:qe.H});Yc.interceptors.request.use((e=>{const t=localStorage.getItem("token");return console.log("[EXPANDED-API] Token do localStorage:",t?"".concat(t.substring(0,20),"..."):"null"),t&&"test"!==t&&t.length>10?(e.headers.Authorization="Bearer ".concat(t),e):(console.error("[EXPANDED-API] Token inv\xe1lido detectado:",t),localStorage.removeItem("token"),window.location.href="/login",Promise.reject(new Error("Token inv\xe1lido")))}),(e=>Promise.reject(e))),Yc.interceptors.response.use((e=>e.data),(e=>{var t,a,s,n,r,i,o;throw console.error("[EXPANDED-API] Erro na requisi\xe7\xe3o:",{url:null===(t=e.config)||void 0===t?void 0:t.url,method:null===(a=e.config)||void 0===a?void 0:a.method,status:null===(s=e.response)||void 0===s?void 0:s.status,message:(null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||e.message}),401===(null===(i=e.response)||void 0===i?void 0:i.status)&&(localStorage.removeItem("token"),window.location.href="/login"),(null===(o=e.response)||void 0===o?void 0:o.data)||e}));const $c={async getExpandedData(e){try{console.log("[EXPANDED-API] Buscando dados expandidos para paciente ".concat(e));const t=await Yc.get("/patients/".concat(e,"/expanded"));return console.log("[EXPANDED-API] Dados expandidos carregados com sucesso"),t}catch(t){throw console.error("[EXPANDED-API] Erro ao buscar dados expandidos:",t),t}},async updateExpandedData(e,t){try{console.log("[EXPANDED-API] Atualizando dados expandidos para paciente ".concat(e));const a=this.validateExpandedData(t);if(a.length>0)throw{errors:a.map((e=>({msg:e})))};const s=await Yc.put("/patients/".concat(e,"/expanded"),t);return console.log("[EXPANDED-API] Dados expandidos atualizados com sucesso"),s}catch(a){throw console.error("[EXPANDED-API] Erro ao atualizar dados expandidos:",a),a}},validateExpandedData(e){var t,a,s,n,r,i,o;const l=[];return null!==(t=e.main)&&void 0!==t&&t.guardian_email&&""!==e.main.guardian_email.trim()&&!this.isValidEmail(e.main.guardian_email)&&l.push("Email do respons\xe1vel inv\xe1lido"),null!==(a=e.main)&&void 0!==a&&a.second_guardian_email&&""!==e.main.second_guardian_email.trim()&&!this.isValidEmail(e.main.second_guardian_email)&&l.push("Email do segundo respons\xe1vel inv\xe1lido"),null!==(s=e.main)&&void 0!==s&&s.pediatrician_email&&""!==e.main.pediatrician_email.trim()&&!this.isValidEmail(e.main.pediatrician_email)&&l.push("Email do pediatra inv\xe1lido"),null!==(n=e.main)&&void 0!==n&&n.school_email&&""!==e.main.school_email.trim()&&!this.isValidEmail(e.main.school_email)&&l.push("Email da escola inv\xe1lido"),null!==(r=e.main)&&void 0!==r&&r.address_state&&""!==e.main.address_state.trim()&&!this.isValidBrazilianState(e.main.address_state)&&l.push("Estado inv\xe1lido"),null!==(i=e.main)&&void 0!==i&&i.school_period&&""!==e.main.school_period.trim()&&!["manh\xe3","tarde","integral","noite"].includes(e.main.school_period)&&l.push("Per\xedodo escolar inv\xe1lido"),null!==(o=e.main)&&void 0!==o&&o.delivery_type&&""!==e.main.delivery_type.trim()&&!["normal","cesariana","f\xf3rceps","v\xe1cuo"].includes(e.main.delivery_type)&&l.push("Tipo de parto inv\xe1lido"),l},isValidEmail:e=>/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$/.test(e),isValidBrazilianState:e=>["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"].includes(e),createEmptyExpandedData:()=>({main:{guardian_phone:"",guardian_email:"",guardian_occupation:"",guardian_education:"",second_guardian_name:"",second_guardian_relationship:"",second_guardian_phone:"",second_guardian_email:"",second_guardian_occupation:"",address_street:"",address_number:"",address_complement:"",address_neighborhood:"",address_city:"",address_state:"",address_zip:"",school_name:"",school_phone:"",school_email:"",school_teacher:"",school_teacher_phone:"",school_grade:"",school_period:"",school_special_needs:!1,school_adaptations:"",birth_weight:"",birth_height:"",birth_complications:"",gestational_age:"",delivery_type:"",development_concerns:"",early_intervention:!1,pediatrician_name:"",pediatrician_phone:"",pediatrician_email:"",health_insurance:"",health_insurance_number:"",allergies:"",dietary_restrictions:"",behavioral_notes:"",communication_preferences:""},medications:[],emergencyContacts:[],medicalHistory:[],professionalContacts:[]}),formatDataForDisplay:e=>(0,Ie.A)((0,Ie.A)({},e),{},{birth_weight:e.birth_weight?"".concat(e.birth_weight," kg"):"",birth_height:e.birth_height?"".concat(e.birth_height," cm"):"",gestational_age:e.gestational_age?"".concat(e.gestational_age," semanas"):""}),async generateRegistrationPDF(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;try{console.log("[EXPANDED-API] Gerando PDF de cadastro completo para paciente ".concat(e));const n=await this.getExpandedData(e);console.log("[PDF-DEBUG] Dados recebidos da API:",n),console.log("[PDF-DEBUG] expandedData.main:",n.main),console.log("[PDF-DEBUG] expandedData.patient:",n.patient);const r=n.patient||{},i=(0,Ie.A)((0,Ie.A)((0,Ie.A)({},t),r),{},{medications:n.medications||[],emergencyContacts:n.emergencyContacts||[],medicalHistory:n.medicalHistory||[],professionalContacts:n.professionalContacts||[]});console.log("[PDF-DEBUG] Dados completos para PDF:",i);const{generatePatientRegistrationPDF:o}=await Promise.resolve().then(a.bind(a,1971));await o(i,s),console.log("[EXPANDED-API] PDF gerado com sucesso")}catch(n){throw console.error("[EXPANDED-API] Erro ao gerar PDF de cadastro completo:",n),n}}},Xc=e=>{let{formData:t,onChange:a}=e;return(0,We.jsxs)("div",{className:"space-y-6",children:[(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Nome Completo ",(0,We.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,We.jsx)("input",{type:"text",required:!0,value:t.name,onChange:e=>a("name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome completo do paciente"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Data de Nascimento"}),(0,We.jsx)("input",{type:"date",value:t.dob,onChange:e=>a("dob",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Diagn\xf3stico"}),(0,We.jsx)("input",{type:"text",value:t.diagnosis,onChange:e=>a("diagnosis",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Diagn\xf3stico principal"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observa\xe7\xf5es Gerais"}),(0,We.jsx)("textarea",{rows:4,value:t.general_notes,onChange:e=>a("general_notes",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Observa\xe7\xf5es gerais sobre o paciente..."})]})]})},Jc=e=>{let{formData:t,onChange:a}=e;return(0,We.jsx)("div",{className:"space-y-6",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dados dos Respons\xe1veis"}),(0,We.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:[(0,We.jsx)("h4",{className:"font-medium text-blue-900 mb-3",children:"Respons\xe1vel Principal"}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),(0,We.jsx)("input",{type:"text",value:t.main.guardian_name,onChange:e=>a("guardian_name",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome completo do respons\xe1vel"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relacionamento"}),(0,We.jsxs)("select",{value:t.main.guardian_relationship,onChange:e=>a("guardian_relationship",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"",children:"Selecionar..."}),(0,We.jsx)("option",{value:"pai",children:"Pai"}),(0,We.jsx)("option",{value:"mae",children:"M\xe3e"}),(0,We.jsx)("option",{value:"avo_avoa",children:"Av\xf4/Av\xf3"}),(0,We.jsx)("option",{value:"tio_tia",children:"Tio/Tia"}),(0,We.jsx)("option",{value:"responsavel_legal",children:"Respons\xe1vel Legal"}),(0,We.jsx)("option",{value:"outro",children:"Outro"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),(0,We.jsx)("input",{type:"tel",value:t.main.guardian_phone,onChange:e=>a("guardian_phone",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(11) 99999-9999"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,We.jsx)("input",{type:"email",value:t.main.guardian_email,onChange:e=>a("guardian_email",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"email@exemplo.com"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profiss\xe3o"}),(0,We.jsx)("input",{type:"text",value:t.main.guardian_occupation,onChange:e=>a("guardian_occupation",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Profiss\xe3o"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Escolaridade"}),(0,We.jsxs)("select",{value:t.main.guardian_education,onChange:e=>a("guardian_education",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"",children:"Selecionar..."}),(0,We.jsx)("option",{value:"fundamental",children:"Ensino Fundamental"}),(0,We.jsx)("option",{value:"medio",children:"Ensino M\xe9dio"}),(0,We.jsx)("option",{value:"superior",children:"Ensino Superior"}),(0,We.jsx)("option",{value:"pos_graduacao",children:"P\xf3s-gradua\xe7\xe3o"})]})]})]})]}),(0,We.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,We.jsx)("h4",{className:"font-medium text-green-900 mb-3",children:"Segundo Respons\xe1vel"}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),(0,We.jsx)("input",{type:"text",value:t.main.second_guardian_name,onChange:e=>a("second_guardian_name",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome do segundo respons\xe1vel"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relacionamento"}),(0,We.jsxs)("select",{value:t.main.second_guardian_relationship,onChange:e=>a("second_guardian_relationship",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"",children:"Selecionar..."}),(0,We.jsx)("option",{value:"pai",children:"Pai"}),(0,We.jsx)("option",{value:"mae",children:"M\xe3e"}),(0,We.jsx)("option",{value:"avo",children:"Av\xf4/Av\xf3"}),(0,We.jsx)("option",{value:"tio",children:"Tio/Tia"}),(0,We.jsx)("option",{value:"tutor",children:"Tutor Legal"}),(0,We.jsx)("option",{value:"outro",children:"Outro"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),(0,We.jsx)("input",{type:"tel",value:t.main.second_guardian_phone,onChange:e=>a("second_guardian_phone",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(11) 99999-9999"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,We.jsx)("input",{type:"email",value:t.main.second_guardian_email,onChange:e=>a("second_guardian_email",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"email@exemplo.com"})]}),(0,We.jsxs)("div",{className:"col-span-2",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profiss\xe3o"}),(0,We.jsx)("input",{type:"text",value:t.main.second_guardian_occupation,onChange:e=>a("second_guardian_occupation",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Profiss\xe3o do segundo respons\xe1vel"})]})]})]})]})})},Kc=e=>{let{formData:t,onChange:a}=e;return(0,We.jsx)("div",{className:"space-y-6",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Endere\xe7o Residencial"}),(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,We.jsxs)("div",{className:"col-span-2",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logradouro"}),(0,We.jsx)("input",{type:"text",value:t.main.address_street,onChange:e=>a("address_street",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Rua, Avenida, etc."})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xfamero"}),(0,We.jsx)("input",{type:"text",value:t.main.address_number,onChange:e=>a("address_number",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"123"})]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Complemento"}),(0,We.jsx)("input",{type:"text",value:t.main.address_complement,onChange:e=>a("address_complement",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Apto, Bloco, etc."})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bairro"}),(0,We.jsx)("input",{type:"text",value:t.main.address_neighborhood,onChange:e=>a("address_neighborhood",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome do bairro"})]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cidade"}),(0,We.jsx)("input",{type:"text",value:t.main.address_city,onChange:e=>a("address_city",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome da cidade"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),(0,We.jsxs)("select",{value:t.main.address_state,onChange:e=>a("address_state",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"",children:"Selecionar..."}),(0,We.jsx)("option",{value:"AC",children:"Acre"}),(0,We.jsx)("option",{value:"AL",children:"Alagoas"}),(0,We.jsx)("option",{value:"AP",children:"Amap\xe1"}),(0,We.jsx)("option",{value:"AM",children:"Amazonas"}),(0,We.jsx)("option",{value:"BA",children:"Bahia"}),(0,We.jsx)("option",{value:"CE",children:"Cear\xe1"}),(0,We.jsx)("option",{value:"DF",children:"Distrito Federal"}),(0,We.jsx)("option",{value:"ES",children:"Esp\xedrito Santo"}),(0,We.jsx)("option",{value:"GO",children:"Goi\xe1s"}),(0,We.jsx)("option",{value:"MA",children:"Maranh\xe3o"}),(0,We.jsx)("option",{value:"MT",children:"Mato Grosso"}),(0,We.jsx)("option",{value:"MS",children:"Mato Grosso do Sul"}),(0,We.jsx)("option",{value:"MG",children:"Minas Gerais"}),(0,We.jsx)("option",{value:"PA",children:"Par\xe1"}),(0,We.jsx)("option",{value:"PB",children:"Para\xedba"}),(0,We.jsx)("option",{value:"PR",children:"Paran\xe1"}),(0,We.jsx)("option",{value:"PE",children:"Pernambuco"}),(0,We.jsx)("option",{value:"PI",children:"Piau\xed"}),(0,We.jsx)("option",{value:"RJ",children:"Rio de Janeiro"}),(0,We.jsx)("option",{value:"RN",children:"Rio Grande do Norte"}),(0,We.jsx)("option",{value:"RS",children:"Rio Grande do Sul"}),(0,We.jsx)("option",{value:"RO",children:"Rond\xf4nia"}),(0,We.jsx)("option",{value:"RR",children:"Roraima"}),(0,We.jsx)("option",{value:"SC",children:"Santa Catarina"}),(0,We.jsx)("option",{value:"SP",children:"S\xe3o Paulo"}),(0,We.jsx)("option",{value:"SE",children:"Sergipe"}),(0,We.jsx)("option",{value:"TO",children:"Tocantins"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CEP"}),(0,We.jsx)("input",{type:"text",value:t.main.address_zip,onChange:e=>a("address_zip",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"00000-000"})]})]})]})]})})},Qc=e=>{let{formData:t,onChange:a}=e;return(0,We.jsx)("div",{className:"space-y-6",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informa\xe7\xf5es Educacionais"}),(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Escola"}),(0,We.jsx)("input",{type:"text",value:t.main.school_name,onChange:e=>a("school_name",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome da institui\xe7\xe3o de ensino"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone da Escola"}),(0,We.jsx)("input",{type:"tel",value:t.main.school_phone,onChange:e=>a("school_phone",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(11) 9999-9999"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email da Escola"}),(0,We.jsx)("input",{type:"email",value:t.main.school_email,onChange:e=>a("school_email",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"contato@escola.com"})]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Professor(a) Respons\xe1vel"}),(0,We.jsx)("input",{type:"text",value:t.main.school_teacher,onChange:e=>a("school_teacher",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome do professor"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone do Professor"}),(0,We.jsx)("input",{type:"tel",value:t.main.school_teacher_phone,onChange:e=>a("school_teacher_phone",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(11) 99999-9999"})]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"S\xe9rie/Ano"}),(0,We.jsx)("input",{type:"text",value:t.main.school_grade,onChange:e=>a("school_grade",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: 2\xba ano, 5\xaa s\xe9rie"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Per\xedodo"}),(0,We.jsxs)("select",{value:t.main.school_period,onChange:e=>a("school_period",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"manh\xe3",children:"Manh\xe3"}),(0,We.jsx)("option",{value:"tarde",children:"Tarde"}),(0,We.jsx)("option",{value:"integral",children:"Integral"}),(0,We.jsx)("option",{value:"noite",children:"Noite"})]})]})]}),(0,We.jsxs)("div",{className:"space-y-3",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)("input",{type:"checkbox",id:"school_special_needs",checked:t.main.school_special_needs,onChange:e=>a("school_special_needs",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,We.jsx)("label",{htmlFor:"school_special_needs",className:"ml-2 block text-sm text-gray-700",children:"Possui necessidades especiais na escola"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Adapta\xe7\xf5es Necess\xe1rias"}),(0,We.jsx)("textarea",{value:t.main.school_adaptations,onChange:e=>a("school_adaptations",e.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descreva as adapta\xe7\xf5es necess\xe1rias no ambiente escolar..."})]})]})]})]})})},Zc=e=>{let{formData:t,onChange:a}=e;return(0,We.jsx)("div",{className:"space-y-6",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dados de Nascimento e Desenvolvimento"}),(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,We.jsx)("h4",{className:"font-medium text-blue-900 mb-3",children:"Nascimento"}),(0,We.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Peso ao Nascer (kg)"}),(0,We.jsx)("input",{type:"number",step:"0.001",value:t.main.birth_weight,onChange:e=>a("birth_weight",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"3.500"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Altura ao Nascer (cm)"}),(0,We.jsx)("input",{type:"number",step:"0.1",value:t.main.birth_height,onChange:e=>a("birth_height",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"50.0"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Idade Gestacional (semanas)"}),(0,We.jsx)("input",{type:"number",value:t.main.gestational_age,onChange:e=>a("gestational_age",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"40"})]})]}),(0,We.jsxs)("div",{className:"mt-4",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Parto"}),(0,We.jsxs)("select",{value:t.main.delivery_type,onChange:e=>a("delivery_type",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"",children:"Selecionar..."}),(0,We.jsx)("option",{value:"normal",children:"Normal"}),(0,We.jsx)("option",{value:"cesariana",children:"Cesariana"}),(0,We.jsx)("option",{value:"f\xf3rceps",children:"F\xf3rceps"}),(0,We.jsx)("option",{value:"v\xe1cuo",children:"V\xe1cuo"})]})]}),(0,We.jsxs)("div",{className:"mt-4",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Complica\xe7\xf5es no Parto"}),(0,We.jsx)("textarea",{value:t.main.birth_complications,onChange:e=>a("birth_complications",e.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descreva quaisquer complica\xe7\xf5es durante o parto..."})]})]}),(0,We.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,We.jsx)("h4",{className:"font-medium text-green-900 mb-3",children:"Desenvolvimento"}),(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Preocupa\xe7\xf5es com o Desenvolvimento"}),(0,We.jsx)("textarea",{value:t.main.development_concerns,onChange:e=>a("development_concerns",e.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Marcos do desenvolvimento, preocupa\xe7\xf5es, observa\xe7\xf5es..."})]}),(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)("input",{type:"checkbox",id:"early_intervention",checked:t.main.early_intervention,onChange:e=>a("early_intervention",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,We.jsx)("label",{htmlFor:"early_intervention",className:"ml-2 block text-sm text-gray-700",children:"Participou de programa de interven\xe7\xe3o precoce"})]})]})]})]})]})})},ed=e=>{let{formData:t,onChange:a}=e;return(0,We.jsx)("div",{className:"space-y-6",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Informa\xe7\xf5es M\xe9dicas Gerais"}),(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,We.jsx)("h4",{className:"font-medium text-blue-900 mb-3",children:"Pediatra"}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Pediatra"}),(0,We.jsx)("input",{type:"text",value:t.main.pediatrician_name,onChange:e=>a("pediatrician_name",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Dr. Jo\xe3o Silva"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone do Pediatra"}),(0,We.jsx)("input",{type:"tel",value:t.main.pediatrician_phone,onChange:e=>a("pediatrician_phone",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(11) 9999-9999"})]})]}),(0,We.jsxs)("div",{className:"mt-4",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email do Pediatra"}),(0,We.jsx)("input",{type:"email",value:t.main.pediatrician_email,onChange:e=>a("pediatrician_email",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"dr.joao@clinica.com"})]})]}),(0,We.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,We.jsx)("h4",{className:"font-medium text-purple-900 mb-3",children:"Plano de Sa\xfade"}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Plano"}),(0,We.jsx)("input",{type:"text",value:t.main.health_insurance,onChange:e=>a("health_insurance",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome do plano de sa\xfade"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"N\xfamero da Carteirinha"}),(0,We.jsx)("input",{type:"text",value:t.main.health_insurance_number,onChange:e=>a("health_insurance_number",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"N\xfamero da carteirinha"})]})]})]}),(0,We.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,We.jsx)("h4",{className:"font-medium text-red-900 mb-3",children:"Alergias e Restri\xe7\xf5es"}),(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alergias"}),(0,We.jsx)("textarea",{value:t.main.allergies,onChange:e=>a("allergies",e.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Descreva alergias conhecidas (medicamentos, alimentos, etc.)..."})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Restri\xe7\xf5es Alimentares"}),(0,We.jsx)("textarea",{value:t.main.dietary_restrictions,onChange:e=>a("dietary_restrictions",e.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Restri\xe7\xf5es alimentares, dietas especiais, etc..."})]})]})]}),(0,We.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,We.jsx)("h4",{className:"font-medium text-yellow-900 mb-3",children:"Observa\xe7\xf5es Adicionais"}),(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notas Comportamentais"}),(0,We.jsx)("textarea",{value:t.main.behavioral_notes,onChange:e=>a("behavioral_notes",e.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Observa\xe7\xf5es sobre comportamento, prefer\xeancias, etc..."})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prefer\xeancias de Comunica\xe7\xe3o"}),(0,We.jsx)("textarea",{value:t.main.communication_preferences,onChange:e=>a("communication_preferences",e.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Como prefere receber comunicados, hor\xe1rios de contato, etc..."})]})]})]})]})]})})},td=e=>{let{medications:t,onChange:a}=e;const s=(e,s,n)=>{const r=t.map(((t,a)=>a===e?(0,Ie.A)((0,Ie.A)({},t),{},{[s]:n}):t));a(r)};return(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center",children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Medica\xe7\xf5es Atuais"}),(0,We.jsxs)("button",{onClick:()=>{const e={id:Date.now(),medication_name:"",dosage:"",frequency:"",administration_time:"",prescribing_doctor:"",doctor_phone:"",doctor_email:"",doctor_specialty:"",notes:"",is_current:!0};a([...t,e])},className:"px-3 py-1 bg-green-500 text-white rounded-md text-sm hover:bg-green-600 transition-colors",children:[(0,We.jsx)(Vn,{icon:io,className:"mr-1"}),"Adicionar Medica\xe7\xe3o"]})]}),0===t.length?(0,We.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,We.jsx)(Vn,{icon:Or,size:"2x",className:"mb-3 opacity-50"}),(0,We.jsx)("p",{children:"Nenhuma medica\xe7\xe3o cadastrada"}),(0,We.jsx)("p",{className:"text-sm",children:'Clique em "Adicionar Medica\xe7\xe3o" para come\xe7ar'})]}):t.map(((e,n)=>(0,We.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[(0,We.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,We.jsxs)("h4",{className:"font-medium text-gray-900",children:["Medica\xe7\xe3o ",n+1]}),(0,We.jsx)("button",{onClick:()=>(e=>{a(t.filter(((t,a)=>a!==e)))})(n),className:"text-red-500 hover:text-red-700 text-sm",children:(0,We.jsx)(Vn,{icon:gi})})]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Medica\xe7\xe3o"}),(0,We.jsx)("input",{type:"text",value:e.medication_name,onChange:e=>s(n,"medication_name",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome da medica\xe7\xe3o"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dosagem"}),(0,We.jsx)("input",{type:"text",value:e.dosage,onChange:e=>s(n,"dosage",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: 10mg, 1 comprimido"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequ\xeancia"}),(0,We.jsx)("input",{type:"text",value:e.frequency,onChange:e=>s(n,"frequency",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: 2x ao dia, 1x pela manh\xe3"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hor\xe1rio de Administra\xe7\xe3o"}),(0,We.jsx)("input",{type:"text",value:e.administration_time,onChange:e=>s(n,"administration_time",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: 8h e 20h, junto \xe0s refei\xe7\xf5es"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe9dico Prescritor"}),(0,We.jsx)("input",{type:"text",value:e.prescribing_doctor,onChange:e=>s(n,"prescribing_doctor",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome do m\xe9dico"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Especialidade do M\xe9dico"}),(0,We.jsx)("input",{type:"text",value:e.doctor_specialty,onChange:e=>s(n,"doctor_specialty",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ex: Neurologista, Psiquiatra"})]})]}),(0,We.jsxs)("div",{className:"mt-4",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observa\xe7\xf5es"}),(0,We.jsx)("textarea",{value:e.notes,onChange:e=>s(n,"notes",e.target.value),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Observa\xe7\xf5es importantes sobre a medica\xe7\xe3o..."})]}),(0,We.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,We.jsx)("input",{type:"checkbox",id:"is_current_".concat(n),checked:e.is_current,onChange:e=>s(n,"is_current",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,We.jsx)("label",{htmlFor:"is_current_".concat(n),className:"ml-2 block text-sm text-gray-700",children:"Medica\xe7\xe3o em uso atualmente"})]})]},e.id||n)))]})},ad=e=>{let{contacts:t,onChange:a}=e;const s=(e,s,n)=>{const r=t.map(((t,a)=>a===e?(0,Ie.A)((0,Ie.A)({},t),{},{[s]:n}):t));a(r)};return(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center",children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Contatos de Emerg\xeancia"}),(0,We.jsxs)("button",{onClick:()=>{const e={id:Date.now(),contact_name:"",relationship:"",phone_primary:"",phone_secondary:"",email:"",address:"",priority_order:t.length+1,can_authorize_treatment:!1,can_pick_up_patient:!1,notes:""};a([...t,e])},className:"px-3 py-1 bg-red-500 text-white rounded-md text-sm hover:bg-red-600 transition-colors",children:[(0,We.jsx)(Vn,{icon:io,className:"mr-1"}),"Adicionar Contato"]})]}),0===t.length?(0,We.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,We.jsx)(Vn,{icon:To,size:"2x",className:"mb-3 opacity-50"}),(0,We.jsx)("p",{children:"Nenhum contato de emerg\xeancia cadastrado"}),(0,We.jsx)("p",{className:"text-sm",children:"\xc9 importante ter pelo menos um contato de emerg\xeancia"})]}):t.map(((e,n)=>(0,We.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[(0,We.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,We.jsxs)("h4",{className:"font-medium text-gray-900",children:["Contato de Emerg\xeancia ",n+1,0===n&&(0,We.jsx)("span",{className:"text-red-500 text-sm ml-2",children:"(Priorit\xe1rio)"})]}),(0,We.jsx)("button",{onClick:()=>(e=>{a(t.filter(((t,a)=>a!==e)))})(n),className:"text-red-500 hover:text-red-700 text-sm",children:(0,We.jsx)(Vn,{icon:gi})})]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo                                "}),(0,We.jsx)("input",{type:"text",value:e.contact_name,onChange:e=>s(n,"contact_name",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome do contato"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Relacionamento                                "}),(0,We.jsxs)("select",{value:e.relationship,onChange:e=>s(n,"relationship",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"",children:"Selecionar..."}),(0,We.jsx)("option",{value:"pai",children:"Pai"}),(0,We.jsx)("option",{value:"mae",children:"M\xe3e"}),(0,We.jsx)("option",{value:"avo",children:"Av\xf4/Av\xf3"}),(0,We.jsx)("option",{value:"tio",children:"Tio/Tia"}),(0,We.jsx)("option",{value:"primo",children:"Primo/Prima"}),(0,We.jsx)("option",{value:"vizinho",children:"Vizinho"}),(0,We.jsx)("option",{value:"amigo",children:"Amigo da Fam\xedlia"}),(0,We.jsx)("option",{value:"outro",children:"Outro"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone Principal                                "}),(0,We.jsx)("input",{type:"tel",value:e.phone_primary,onChange:e=>s(n,"phone_primary",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(11) 99999-9999"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone Secund\xe1rio"}),(0,We.jsx)("input",{type:"tel",value:e.phone_secondary,onChange:e=>s(n,"phone_secondary",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(11) 9999-9999"})]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,We.jsx)("input",{type:"email",value:e.email,onChange:e=>s(n,"email",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"email@exemplo.com"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Endere\xe7o"}),(0,We.jsx)("input",{type:"text",value:e.address,onChange:e=>s(n,"address",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Endere\xe7o completo"})]})]}),(0,We.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)("input",{type:"checkbox",id:"can_authorize_".concat(n),checked:e.can_authorize_treatment,onChange:e=>s(n,"can_authorize_treatment",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,We.jsx)("label",{htmlFor:"can_authorize_".concat(n),className:"ml-2 block text-sm text-gray-700",children:"Pode autorizar tratamentos m\xe9dicos"})]}),(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)("input",{type:"checkbox",id:"can_pick_up_".concat(n),checked:e.can_pick_up_patient,onChange:e=>s(n,"can_pick_up_patient",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,We.jsx)("label",{htmlFor:"can_pick_up_".concat(n),className:"ml-2 block text-sm text-gray-700",children:"Pode buscar o paciente"})]})]}),(0,We.jsxs)("div",{className:"mt-4",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observa\xe7\xf5es"}),(0,We.jsx)("textarea",{value:e.notes,onChange:e=>s(n,"notes",e.target.value),rows:2,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Informa\xe7\xf5es adicionais sobre este contato..."})]})]},e.id||n)))]})},sd=e=>{let{history:t,onChange:a}=e;const s=(e,s,n)=>{const r=t.map(((t,a)=>a===e?(0,Ie.A)((0,Ie.A)({},t),{},{[s]:n}):t));a(r)};return(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center",children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Hist\xf3rico M\xe9dico"}),(0,We.jsxs)("button",{onClick:()=>{const e={id:Date.now(),condition_name:"",condition_type:"",diagnosis_date:"",treating_physician:"",physician_specialty:"",physician_phone:"",physician_email:"",treatment_status:"ativo",notes:"",relevant_for_therapy:!1};a([...t,e])},className:"px-3 py-1 bg-purple-500 text-white rounded-md text-sm hover:bg-purple-600 transition-colors",children:[(0,We.jsx)(Vn,{icon:io,className:"mr-1"}),"Adicionar Condi\xe7\xe3o"]})]}),0===t.length?(0,We.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,We.jsx)(Vn,{icon:Ni,size:"2x",className:"mb-3 opacity-50"}),(0,We.jsx)("p",{children:"Nenhuma condi\xe7\xe3o m\xe9dica cadastrada"}),(0,We.jsx)("p",{className:"text-sm",children:"Adicione diagn\xf3sticos, cirurgias ou tratamentos relevantes"})]}):t.map(((e,n)=>(0,We.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[(0,We.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,We.jsxs)("h4",{className:"font-medium text-gray-900",children:["Condi\xe7\xe3o M\xe9dica ",n+1]}),(0,We.jsx)("button",{onClick:()=>(e=>{a(t.filter(((t,a)=>a!==e)))})(n),className:"text-red-500 hover:text-red-700 text-sm",children:(0,We.jsx)(Vn,{icon:gi})})]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Condi\xe7\xe3o/Diagn\xf3stico                                "}),(0,We.jsx)("input",{type:"text",value:e.condition_name,onChange:e=>s(n,"condition_name",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome da condi\xe7\xe3o ou diagn\xf3stico"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),(0,We.jsxs)("select",{value:e.condition_type,onChange:e=>s(n,"condition_type",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"",children:"Selecionar..."}),(0,We.jsx)("option",{value:"diagn\xf3stico",children:"Diagn\xf3stico"}),(0,We.jsx)("option",{value:"cirurgia",children:"Cirurgia"}),(0,We.jsx)("option",{value:"interna\xe7\xe3o",children:"Interna\xe7\xe3o"}),(0,We.jsx)("option",{value:"exame",children:"Exame"}),(0,We.jsx)("option",{value:"tratamento",children:"Tratamento"}),(0,We.jsx)("option",{value:"acompanhamento",children:"Acompanhamento"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data do Diagn\xf3stico"}),(0,We.jsx)("input",{type:"date",value:e.diagnosis_date,onChange:e=>s(n,"diagnosis_date",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status do Tratamento"}),(0,We.jsxs)("select",{value:e.treatment_status,onChange:e=>s(n,"treatment_status",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"ativo",children:"Ativo"}),(0,We.jsx)("option",{value:"finalizado",children:"Finalizado"}),(0,We.jsx)("option",{value:"suspenso",children:"Suspenso"}),(0,We.jsx)("option",{value:"monitoramento",children:"Em Monitoramento"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xe9dico Respons\xe1vel"}),(0,We.jsx)("input",{type:"text",value:e.treating_physician,onChange:e=>s(n,"treating_physician",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome do m\xe9dico respons\xe1vel"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Especialidade"}),(0,We.jsx)("input",{type:"text",value:e.physician_specialty,onChange:e=>s(n,"physician_specialty",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Especialidade m\xe9dica"})]})]}),(0,We.jsxs)("div",{className:"mt-4",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observa\xe7\xf5es Detalhadas"}),(0,We.jsx)("textarea",{value:e.notes,onChange:e=>s(n,"notes",e.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Detalhes sobre a condi\xe7\xe3o, tratamentos, resultados, etc..."})]}),(0,We.jsxs)("div",{className:"mt-4 flex items-center",children:[(0,We.jsx)("input",{type:"checkbox",id:"relevant_".concat(n),checked:e.relevant_for_therapy,onChange:e=>s(n,"relevant_for_therapy",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,We.jsx)("label",{htmlFor:"relevant_".concat(n),className:"ml-2 block text-sm text-gray-700",children:"Relevante para o tratamento terap\xeautico atual"})]})]},e.id||n)))]})},nd=e=>{let{contacts:t,onChange:a}=e;const s=(e,s,n)=>{const r=t.map(((t,a)=>a===e?(0,Ie.A)((0,Ie.A)({},t),{},{[s]:n}):t));a(r)};return(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center",children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Outros Profissionais"}),(0,We.jsxs)("button",{onClick:()=>{const e={id:Date.now(),professional_type:"",professional_name:"",clinic_name:"",phone:"",email:"",specialty:"",frequency_of_visits:"",last_appointment:"",next_appointment:"",notes:""};a([...t,e])},className:"px-3 py-1 bg-indigo-500 text-white rounded-md text-sm hover:bg-indigo-600 transition-colors",children:[(0,We.jsx)(Vn,{icon:io,className:"mr-1"}),"Adicionar Profissional"]})]}),0===t.length?(0,We.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,We.jsx)(Vn,{icon:mi,size:"2x",className:"mb-3 opacity-50"}),(0,We.jsx)("p",{children:"Nenhum profissional cadastrado"}),(0,We.jsx)("p",{className:"text-sm",children:"Adicione psiquiatras, neurologistas, psic\xf3logos, etc."})]}):t.map(((e,n)=>(0,We.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[(0,We.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,We.jsxs)("h4",{className:"font-medium text-gray-900",children:["Profissional ",n+1]}),(0,We.jsx)("button",{onClick:()=>(e=>{a(t.filter(((t,a)=>a!==e)))})(n),className:"text-red-500 hover:text-red-700 text-sm",children:(0,We.jsx)(Vn,{icon:gi})})]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo de Profissional                                "}),(0,We.jsxs)("select",{value:e.professional_type,onChange:e=>s(n,"professional_type",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"",children:"Selecionar..."}),(0,We.jsx)("option",{value:"psiquiatra",children:"Psiquiatra"}),(0,We.jsx)("option",{value:"neurologista",children:"Neurologista"}),(0,We.jsx)("option",{value:"psicologo",children:"Psic\xf3logo"}),(0,We.jsx)("option",{value:"fonoaudiologo",children:"Fonoaudi\xf3logo"}),(0,We.jsx)("option",{value:"terapeuta_ocupacional",children:"Terapeuta Ocupacional"}),(0,We.jsx)("option",{value:"fisioterapeuta",children:"Fisioterapeuta"}),(0,We.jsx)("option",{value:"nutricionista",children:"Nutricionista"}),(0,We.jsx)("option",{value:"outro",children:"Outro"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Profissional                                "}),(0,We.jsx)("input",{type:"text",value:e.professional_name,onChange:e=>s(n,"professional_name",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome completo do profissional"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cl\xednica/Institui\xe7\xe3o"}),(0,We.jsx)("input",{type:"text",value:e.clinic_name,onChange:e=>s(n,"clinic_name",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Nome da cl\xednica ou institui\xe7\xe3o"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Especialidade"}),(0,We.jsx)("input",{type:"text",value:e.specialty,onChange:e=>s(n,"specialty",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Especialidade espec\xedfica"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),(0,We.jsx)("input",{type:"tel",value:e.phone,onChange:e=>s(n,"phone",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"(11) 9999-9999"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,We.jsx)("input",{type:"email",value:e.email,onChange:e=>s(n,"email",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"email@clinica.com"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequ\xeancia das Consultas"}),(0,We.jsxs)("select",{value:e.frequency_of_visits,onChange:e=>s(n,"frequency_of_visits",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"",children:"Selecionar..."}),(0,We.jsx)("option",{value:"semanal",children:"Semanal"}),(0,We.jsx)("option",{value:"quinzenal",children:"Quinzenal"}),(0,We.jsx)("option",{value:"mensal",children:"Mensal"}),(0,We.jsx)("option",{value:"bimestral",children:"Bimestral"}),(0,We.jsx)("option",{value:"semestral",children:"Semestral"}),(0,We.jsx)("option",{value:"anual",children:"Anual"}),(0,We.jsx)("option",{value:"conforme_necessario",children:"Conforme necess\xe1rio"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\xdaltima Consulta"}),(0,We.jsx)("input",{type:"date",value:e.last_appointment,onChange:e=>s(n,"last_appointment",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,We.jsxs)("div",{className:"mt-4",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pr\xf3xima Consulta Agendada"}),(0,We.jsx)("input",{type:"date",value:e.next_appointment,onChange:e=>s(n,"next_appointment",e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,We.jsxs)("div",{className:"mt-4",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observa\xe7\xf5es"}),(0,We.jsx)("textarea",{value:e.notes,onChange:e=>s(n,"notes",e.target.value),rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Informa\xe7\xf5es importantes sobre o acompanhamento com este profissional..."})]})]},e.id||n)))]})},rd=e=>{let{isOpen:t,onClose:a,onSave:n,patient:r}=e;const{user:i}=Ye(),[o,l]=(0,s.useState)("basic"),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)([]),[x,b]=(0,s.useState)(!1);(0,s.useEffect)((()=>{console.log("[PDF-BUTTON-DEBUG] Verificando condi\xe7\xf5es:"),console.log("- user?.role:",null===i||void 0===i?void 0:i.role),console.log("- user?.is_admin:",null===i||void 0===i?void 0:i.is_admin),console.log("- patient?.id:",null===r||void 0===r?void 0:r.id),console.log("- Deve mostrar bot\xe3o:",(null===i||void 0===i?void 0:i.is_admin)&&(null===r||void 0===r?void 0:r.id))}),[i,r]);const[v,y]=(0,s.useState)({name:"",dob:"",diagnosis:"",general_notes:"",main:{guardian_name:"",guardian_relationship:"",guardian_phone:"",guardian_email:"",guardian_occupation:"",guardian_education:"",second_guardian_name:"",second_guardian_relationship:"",second_guardian_phone:"",second_guardian_email:"",second_guardian_occupation:"",address_street:"",address_number:"",address_complement:"",address_neighborhood:"",address_city:"",address_state:"",address_zip:"",school_name:"",school_phone:"",school_email:"",school_teacher:"",school_teacher_phone:"",school_grade:"",school_period:"manh\xe3",school_special_needs:!1,school_adaptations:"",birth_weight:"",birth_height:"",birth_complications:"",gestational_age:"",delivery_type:"",development_concerns:"",early_intervention:!1,pediatrician_name:"",pediatrician_phone:"",pediatrician_email:"",health_insurance:"",health_insurance_number:"",allergies:"",dietary_restrictions:"",behavioral_notes:"",communication_preferences:""},medications:[],emergencyContacts:[],medicalHistory:[],professionalContacts:[]}),j=[{id:"basic",name:"Dados B\xe1sicos",icon:Sr,description:"Nome, data nascimento, diagn\xf3stico"},{id:"personal",name:"Respons\xe1veis",icon:Sr,description:"Dados dos respons\xe1veis"},{id:"address",name:"Endere\xe7o",icon:Bi,description:"Localiza\xe7\xe3o e contato"},{id:"education",name:"Educa\xe7\xe3o",icon:Ho,description:"Escola e adapta\xe7\xf5es"},{id:"development",name:"Desenvolvimento",icon:Or,description:"Nascimento e marcos"},{id:"medical",name:"Dados M\xe9dicos",icon:Ni,description:"Informa\xe7\xf5es m\xe9dicas gerais"},{id:"medications",name:"Medica\xe7\xf5es",icon:Or,description:"Medica\xe7\xf5es atuais"},{id:"emergency",name:"Emerg\xeancia",icon:To,description:"Contatos de emerg\xeancia"},{id:"history",name:"Hist\xf3rico M\xe9dico",icon:Ni,description:"Condi\xe7\xf5es e tratamentos"},{id:"professionals",name:"Profissionais",icon:mi,description:"Outros profissionais"}];(0,s.useEffect)((()=>{t&&(null!==r&&void 0!==r&&r.id?w():N())}),[t,null===r||void 0===r?void 0:r.id]);const N=()=>{y({name:"",dob:"",diagnosis:"",general_notes:"",main:$c.createEmptyExpandedData().main,medications:[],emergencyContacts:[],medicalHistory:[],professionalContacts:[]}),b(!1),g([])},w=async()=>{try{d(!0),g([]);const e=await $c.getExpandedData(r.id);if(e.success&&e.patient){const t=e.patient;y({name:t.name||"",dob:t.dob?t.dob.split("T")[0]:"",diagnosis:t.diagnosis||"",general_notes:t.general_notes||"",main:{guardian_name:t.guardian_name||"",guardian_relationship:t.guardian_relationship||"",guardian_phone:t.guardian_phone||"",guardian_email:t.guardian_email||"",guardian_occupation:t.guardian_occupation||"",guardian_education:t.guardian_education||"",second_guardian_name:t.second_guardian_name||"",second_guardian_relationship:t.second_guardian_relationship||"",second_guardian_phone:t.second_guardian_phone||"",second_guardian_email:t.second_guardian_email||"",second_guardian_occupation:t.second_guardian_occupation||"",address_street:t.address_street||"",address_number:t.address_number||"",address_complement:t.address_complement||"",address_neighborhood:t.address_neighborhood||"",address_city:t.address_city||"",address_state:t.address_state||"",address_zip:t.address_zip||"",school_name:t.school_name||"",school_phone:t.school_phone||"",school_email:t.school_email||"",school_teacher:t.school_teacher||"",school_teacher_phone:t.school_teacher_phone||"",school_grade:t.school_grade||"",school_period:t.school_period||"manh\xe3",school_special_needs:t.school_special_needs||!1,school_adaptations:t.school_adaptations||"",birth_weight:t.birth_weight||"",birth_height:t.birth_height||"",birth_complications:t.birth_complications||"",gestational_age:t.gestational_age||"",delivery_type:t.delivery_type||"",development_concerns:t.development_concerns||"",early_intervention:t.early_intervention||!1,pediatrician_name:t.pediatrician_name||"",pediatrician_phone:t.pediatrician_phone||"",pediatrician_email:t.pediatrician_email||"",health_insurance:t.health_insurance||"",health_insurance_number:t.health_insurance_number||"",allergies:t.allergies||"",dietary_restrictions:t.dietary_restrictions||"",behavioral_notes:t.behavioral_notes||"",communication_preferences:t.communication_preferences||""},medications:t.medications||[],emergencyContacts:t.emergencyContacts||[],medicalHistory:t.medicalHistory||[],professionalContacts:t.professionalContacts||[]})}}catch(e){console.error("Erro ao carregar dados expandidos:",e),e.errors?g(e.errors):g([{msg:"Erro ao carregar dados expandidos"}])}finally{d(!1)}},_=(e,t)=>{y((a=>(0,Ie.A)((0,Ie.A)({},a),{},{[e]:t}))),b(!0)},S=(e,t)=>{y((a=>(0,Ie.A)((0,Ie.A)({},a),{},{main:(0,Ie.A)((0,Ie.A)({},a.main),{},{[e]:t})}))),b(!0)},C=()=>{x?window.confirm("Existem altera\xe7\xf5es n\xe3o salvas. Deseja sair mesmo assim?")&&(b(!1),a()):a()};(0,s.useEffect)((()=>{if(!x)return;const e=setInterval((async()=>{try{await $c.updateExpandedData(r.id,v),b(!1),console.log("[AUTO-SAVE] Dados salvos automaticamente")}catch(e){console.error("[AUTO-SAVE] Erro no salvamento autom\xe1tico:",e)}}),3e4);return()=>clearInterval(e)}),[x,v,null===r||void 0===r?void 0:r.id]);return t?(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-7xl w-full max-h-[95vh] overflow-hidden",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white p-6",children:(0,We.jsxs)("div",{className:"flex justify-between items-center",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("h2",{className:"text-2xl font-bold",children:["Cadastro Expandido - ",null===r||void 0===r?void 0:r.name]}),(0,We.jsx)("p",{className:"text-blue-100 mt-1",children:"Complete os dados para um cadastro profissional"}),x&&(0,We.jsxs)("div",{className:"flex items-center mt-2 text-yellow-200",children:[(0,We.jsx)(Vn,{icon:pr,className:"mr-2"}),(0,We.jsx)("span",{className:"text-sm",children:"Altera\xe7\xf5es n\xe3o salvas"})]})]}),(0,We.jsx)("button",{onClick:C,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-full transition-colors",children:(0,We.jsx)(Vn,{icon:lo,size:"lg"})})]})}),f.length>0&&(0,We.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 m-4",children:(0,We.jsxs)("div",{className:"flex",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-400 mr-3 mt-1"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Erros encontrados:"}),(0,We.jsx)("ul",{className:"mt-2 text-sm text-red-700 list-disc list-inside",children:f.map(((e,t)=>(0,We.jsx)("li",{children:e.msg},t)))})]})]})}),(0,We.jsxs)("div",{className:"flex h-[calc(95vh-180px)]",children:[(0,We.jsx)("div",{className:"w-80 bg-gray-50 border-r overflow-y-auto",children:(0,We.jsx)("nav",{className:"p-4",children:j.map((e=>(0,We.jsxs)("button",{onClick:()=>l(e.id),className:"w-full text-left p-4 rounded-lg mb-2 flex items-center transition-colors ".concat(o===e.id?"bg-blue-500 text-white shadow-md":"hover:bg-gray-200 text-gray-700"),children:[(0,We.jsx)(Vn,{icon:e.icon,className:"mr-3"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"font-medium",children:e.name}),(0,We.jsx)("div",{className:"text-xs ".concat(o===e.id?"text-blue-100":"text-gray-500"),children:e.description})]})]},e.id)))})}),(0,We.jsx)("div",{className:"flex-1 overflow-y-auto p-6",children:c?(0,We.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,We.jsx)(Vn,{icon:xo,spin:!0,size:"2x",className:"text-blue-500"}),(0,We.jsx)("span",{className:"ml-3 text-gray-600",children:"Carregando dados..."})]}):(()=>{switch(o){case"basic":return(0,We.jsx)(Xc,{formData:v,onChange:_});case"personal":return(0,We.jsx)(Jc,{formData:v,onChange:S});case"address":return(0,We.jsx)(Kc,{formData:v,onChange:S});case"education":return(0,We.jsx)(Qc,{formData:v,onChange:S});case"development":return(0,We.jsx)(Zc,{formData:v,onChange:S});case"medical":return(0,We.jsx)(ed,{formData:v,onChange:S});case"medications":return(0,We.jsx)(td,{medications:v.medications,onChange:e=>{y((t=>(0,Ie.A)((0,Ie.A)({},t),{},{medications:e}))),b(!0)}});case"emergency":return(0,We.jsx)(ad,{contacts:v.emergencyContacts,onChange:e=>{y((t=>(0,Ie.A)((0,Ie.A)({},t),{},{emergencyContacts:e}))),b(!0)}});case"history":return(0,We.jsx)(sd,{history:v.medicalHistory,onChange:e=>{y((t=>(0,Ie.A)((0,Ie.A)({},t),{},{medicalHistory:e}))),b(!0)}});case"professionals":return(0,We.jsx)(nd,{contacts:v.professionalContacts,onChange:e=>{y((t=>(0,Ie.A)((0,Ie.A)({},t),{},{professionalContacts:e}))),b(!0)}});default:return null}})()})]}),(0,We.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex justify-between items-center border-t",children:[(0,We.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,We.jsx)(Vn,{icon:_i,className:"mr-2"}),x?"Salvamento autom\xe1tico ativo":"Todas as altera\xe7\xf5es foram salvas"]}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[(null===i||void 0===i?void 0:i.is_admin)&&(null===r||void 0===r?void 0:r.id)&&(0,We.jsx)("button",{onClick:async()=>{if(null!==r&&void 0!==r&&r.id)if(x)alert("Existem altera\xe7\xf5es n\xe3o salvas. Por favor, salve antes de gerar o PDF.");else try{p(!0);const e={name:v.name,dob:v.dob,diagnosis:v.diagnosis},t=null!==i&&void 0!==i&&i.clinic_name?{name:i.clinic_name}:null;await $c.generateRegistrationPDF(r.id,e,t)}catch(e){console.error("Erro ao gerar PDF:",e),alert("Erro ao gerar o PDF. Por favor, tente novamente.")}finally{p(!1)}else alert("\xc9 necess\xe1rio salvar o paciente antes de gerar o PDF.")},className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",disabled:m||u||x,title:x?"Salve as altera\xe7\xf5es antes de gerar o PDF":"Gerar PDF do Cadastro Completo",children:m?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,spin:!0,className:"mr-2"}),"Gerando PDF..."]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:bi,className:"mr-2"}),"Gerar PDF"]})}),(0,We.jsxs)("button",{onClick:C,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors",disabled:u,children:[(0,We.jsx)(Vn,{icon:lo,className:"mr-2"}),x?"Cancelar":"Fechar"]}),(0,We.jsx)("button",{onClick:async()=>{try{var e;if(h(!0),g([]),null===(e=v.name)||void 0===e||!e.trim())return void g([{msg:"Nome \xe9 obrigat\xf3rio"}]);const t={name:v.name,dob:v.dob||null,diagnosis:v.diagnosis||"",general_notes:v.general_notes||""},s={main:v.main,medications:v.medications||[],emergencyContacts:v.emergencyContacts||[],medicalHistory:v.medicalHistory||[],professionalContacts:v.professionalContacts||[]};if(null!==r&&void 0!==r&&r.id)await $c.updateExpandedData(r.id,s);else{const e=localStorage.getItem("token");await et(t,e)}b(!1),n&&n(),window.location.reload&&window.location.reload(),a()}catch(t){console.error("Erro ao salvar:",t),t.errors?g(t.errors):g([{msg:t.message||"Erro ao salvar dados"}])}finally{h(!1)}},className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:u,children:u?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,spin:!0,className:"mr-2"}),"Salvando..."]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:di,className:"mr-2"}),"Salvar e Finalizar"]})})]})]})]})}):null},id=e=>{if(!e)return"N\xe3o informado";try{const t=new Date(e),a=6e4*t.getTimezoneOffset();return new Date(t.getTime()+a).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(t){return e.split("T")[0]||"Data inv\xe1lida"}},od=e=>{let{icon:t,label:a,value:s,colorClass:n="indigo"}=e;const r={indigo:{bg:"bg-indigo-100",border:"border-indigo-200",icon:"text-indigo-600",text:"text-indigo-800"},purple:{bg:"bg-purple-100",border:"border-purple-200",icon:"text-purple-600",text:"text-purple-800"},blue:{bg:"bg-blue-100",border:"border-blue-200",icon:"text-blue-600",text:"text-blue-800"}},i=r[n]||r.indigo;return(0,We.jsxs)("div",{className:"".concat(i.bg," ").concat(i.border," border-l-4 p-4 rounded-r-lg"),children:[(0,We.jsxs)("div",{className:"flex items-center mb-2",children:[(0,We.jsx)(Vn,{icon:t,className:"mr-3 ".concat(i.icon)}),(0,We.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:a})]}),(0,We.jsx)("p",{className:"text-sm ".concat(i.text," font-medium"),children:s||"N\xe3o informado"})]})},ld=e=>{let{icon:t,title:a,description:s,onClick:n,disabled:r,colorClass:i="gray"}=e;const o={red:{bg:"bg-gradient-to-br from-red-50 to-red-100",hover:"hover:from-red-100 hover:to-red-200",border:"border-red-200",icon:"text-red-600"},blue:{bg:"bg-gradient-to-br from-blue-50 to-blue-100",hover:"hover:from-blue-100 hover:to-blue-200",border:"border-blue-200",icon:"text-blue-600"},green:{bg:"bg-gradient-to-br from-green-50 to-green-100",hover:"hover:from-green-100 hover:to-green-200",border:"border-green-200",icon:"text-green-600"},purple:{bg:"bg-gradient-to-br from-purple-50 to-purple-100",hover:"hover:from-purple-100 hover:to-purple-200",border:"border-purple-200",icon:"text-purple-600"},gray:{bg:"bg-gradient-to-br from-gray-50 to-gray-100",hover:"hover:from-gray-100 hover:to-gray-200",border:"border-gray-200",icon:"text-gray-600"}},l=o[i]||o.gray;return(0,We.jsxs)("button",{onClick:n,disabled:r,className:"text-left p-4 flex items-start space-x-4 ".concat(l.bg," ").concat(l.hover," rounded-lg border-2 ").concat(l.border," w-full transition-all duration-200 disabled:opacity-50 disabled:cursor-wait transform hover:scale-105 shadow-sm hover:shadow-md"),children:[(0,We.jsx)("div",{className:"bg-white p-3 rounded-full shadow-sm",children:(0,We.jsx)(Vn,{icon:t,className:"text-lg ".concat(l.icon)})}),(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsx)("h5",{className:"font-semibold text-sm text-gray-800 mb-1",children:a}),(0,We.jsx)("p",{className:"text-xs text-gray-600 leading-relaxed",children:s})]})]})},cd=()=>{const{selectedPatient:e,openPatientForm:t,removePatient:a,openReportModal:n}=dt(),{user:r}=Ye(),[i,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(!1);if(!e)return(0,We.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md border border-gray-200 text-center",children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-700",children:"Nenhum Cliente Selecionado"}),(0,We.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Por favor, selecione um cliente na lista \xe0 esquerda para ver os detalhes."})]});return(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden flex flex-col",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-6",children:(0,We.jsxs)("div",{className:"flex justify-between items-start",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:e.name}),(0,We.jsx)("div",{className:"flex items-center space-x-4",children:(0,We.jsxs)("span",{className:"text-indigo-100 text-sm font-mono bg-white bg-opacity-20 px-3 py-1 rounded-full",children:["ID: ",e.id]})})]}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[(0,We.jsx)("button",{onClick:()=>t(e),className:"p-3 rounded-full bg-white bg-opacity-20 hover:bg-opacity-30 transition-all text-white transform hover:scale-105",title:"Editar Cliente",children:(0,We.jsx)(Vn,{icon:vr})}),(0,We.jsx)("button",{onClick:()=>a(e.id),className:"p-3 rounded-full bg-red-500 bg-opacity-80 hover:bg-opacity-100 transition-all text-white transform hover:scale-105",title:"Excluir Cliente",children:(0,We.jsx)(Vn,{icon:$n})})]})]})}),(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsxs)("div",{className:"mb-6",children:[(0,We.jsxs)("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full mr-3"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udccb Informa\xe7\xf5es B\xe1sicas"})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,We.jsx)(od,{icon:er,label:"Data de Nascimento",value:id(e.dob),colorClass:"indigo"}),(0,We.jsx)(od,{icon:wr,label:"Diagn\xf3stico",value:e.diagnosis,colorClass:"purple"})]})]}),e.general_notes&&(0,We.jsxs)("div",{className:"mb-6",children:[(0,We.jsxs)("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udcdd Anota\xe7\xf5es Gerais"})]}),(0,We.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 border-l-4 border-blue-400 p-4 rounded-r-lg",children:(0,We.jsx)("p",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-wrap",children:e.general_notes})})]}),(0,We.jsxs)("div",{className:"mb-6",children:[(0,We.jsxs)("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udcac Comunica\xe7\xe3o"})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 border-2 border-indigo-200 p-4 rounded-lg",children:[(0,We.jsxs)("button",{onClick:()=>{o(!1),c((e=>!e))},className:"w-full flex items-center justify-center px-4 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg shadow-sm hover:from-indigo-700 hover:to-purple-700 transition-all transform hover:scale-105",children:[(0,We.jsx)(Vn,{icon:yr,className:"mr-2"}),(0,We.jsx)("span",{className:"font-medium text-sm",children:"Discuss\xe3o de Caso"})]}),(0,We.jsx)("p",{className:"text-xs text-gray-600 mt-2 text-center leading-relaxed",children:l?"\u2705 Chat da equipe aberto":"Chat interno entre terapeutas"})]}),(0,We.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-cyan-50 border-2 border-blue-200 p-4 rounded-lg",children:[(0,We.jsxs)("button",{onClick:()=>{c(!1),o((e=>!e))},className:"w-full flex items-center justify-center px-4 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-lg shadow-sm hover:from-blue-700 hover:to-cyan-700 transition-all transform hover:scale-105",children:[(0,We.jsx)(Vn,{icon:rr,className:"mr-2"}),(0,We.jsx)("span",{className:"font-medium text-sm",children:"Comunica\xe7\xe3o com os Pais"})]}),(0,We.jsx)("p",{className:"text-xs text-gray-600 mt-2 text-center leading-relaxed",children:i?"\u2705 Chat com pais aberto":"Comunica\xe7\xe3o com respons\xe1veis"})]})]})]}),l&&(0,We.jsx)("div",{className:"my-5 animate-fade-in max-w-4xl mx-auto w-full",children:(0,We.jsx)(Hc,{patientId:e.id,patientName:e.name})}),i&&(0,We.jsx)("div",{className:"my-5 animate-fade-in max-w-4xl mx-auto w-full",children:(0,We.jsx)(Ic,{patientId:e.id,patientName:e.name})}),(null===r||void 0===r?void 0:r.is_admin)&&(0,We.jsxs)("div",{className:"mb-6",children:[(0,We.jsxs)("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-3"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udc51 Administra\xe7\xe3o"})]}),(0,We.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-pink-50 border-2 border-red-200 p-4 rounded-lg",children:[(0,We.jsxs)("button",{onClick:()=>m(!0),className:"w-full flex items-center justify-center px-4 py-3 bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-lg shadow-sm hover:from-red-700 hover:to-pink-700 transition-all transform hover:scale-105",children:[(0,We.jsx)(Vn,{icon:Lo,className:"mr-2"}),(0,We.jsx)("span",{className:"font-medium text-sm",children:"Editar Dados Expandidos"})]}),(0,We.jsx)("p",{className:"text-xs text-gray-600 mt-2 text-center leading-relaxed",children:"Acesso completo aos dados expandidos (respons\xe1veis, escola, m\xe9dicos, contatos de emerg\xeancia)"})]})]}),(0,We.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,We.jsxs)("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-orange-500 rounded-full mr-3"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udcc4 Documentos e Relat\xf3rios"})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,We.jsx)(ld,{icon:bi,title:"Grade de Programas",description:"Gera um PDF detalhado com a lista dos programas atribu\xeddos ao cliente.",onClick:()=>(0,il.nR)(e),colorClass:"red"}),(0,We.jsx)(ld,{icon:ir,title:"Folha de Registro",description:"Cria uma folha de registro em branco para anota\xe7\xf5es manuais durante as sess\xf5es.",onClick:()=>(0,il.XQ)(e),colorClass:"blue"}),(0,We.jsx)(ld,{icon:Xn,title:"Evolu\xe7\xe3o Terap\xeautica",description:"Gera relat\xf3rio de evolu\xe7\xe3o profissional detalhado com an\xe1lise do progresso do paciente.",onClick:()=>u(!0),colorClass:"green"}),(0,We.jsx)(ld,{icon:ai,title:"Relat\xf3rio Consolidado",description:"Gera um relat\xf3rio completo com an\xe1lise do progresso e gr\xe1ficos.",onClick:n,colorClass:"purple"})]})]})]})]}),(0,We.jsx)(Gc,{patient:e,isOpen:d,onClose:()=>u(!1)}),(null===r||void 0===r?void 0:r.is_admin)&&(0,We.jsx)(rd,{patient:e,isOpen:h,onClose:()=>m(!1)})]})},dd=document.createElement("style");dd.textContent="\n  @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n  .fade-in { animation: fadeIn 0.3s ease-out forwards; }\n  @keyframes fadeInUp { from { opacity: 0; transform: scale(0.95) translateY(10px); } to { opacity: 1; transform: scale(1) translateY(0); } }\n  .animate-fade-in-up { animation: fadeInUp 0.3s ease-out forwards; }\n",document.head.appendChild(dd);const ud=e=>{let{isOpen:t,onClose:a,onSave:n,patientToEdit:r}=e;const[i,o]=(0,s.useState)(""),[l,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[p,f]=(0,s.useState)(!1),[g,x]=(0,s.useState)(""),b=Boolean(r);(0,s.useEffect)((()=>{b&&r?(o(r.name||""),c((e=>{if(!e)return"";try{const t=new Date(e),a=t.getUTCFullYear(),s=(t.getUTCMonth()+1).toString().padStart(2,"0"),n=t.getUTCDate().toString().padStart(2,"0");return"".concat(a,"-").concat(s,"-").concat(n)}catch(t){return""}})(r.dob)),u(r.diagnosis||""),m(r.general_notes||"")):(o(""),c(""),u(""),m(""))}),[r,b,t]);const v=async e=>{e.preventDefault(),f(!0),x("");const t={name:i,dob:l,diagnosis:d,general_notes:h};l||(t.dob=null);try{await n(t),a()}catch(Ff){x(Ff.message||"Ocorreu um erro ao salvar.")}finally{f(!1)}};return t?(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 fade-in",children:(0,We.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col transform transition-all duration-300 scale-95 opacity-0 animate-fade-in-up",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center p-5 border-b border-gray-200",children:[(0,We.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:b?"Editar Cliente":"Adicionar Novo Cliente"}),(0,We.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,We.jsx)(Vn,{icon:lo,className:"text-lg"})})]}),(0,We.jsxs)("form",{onSubmit:v,className:"p-6 space-y-6 overflow-y-auto",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{htmlFor:"patient-name",className:"block text-sm font-medium text-gray-700 mb-1.5",children:["Nome Completo ",(0,We.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,We.jsx)("input",{type:"text",id:"patient-name",required:!0,value:i,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-shadow text-sm"})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{htmlFor:"patient-dob",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Data de Nascimento"}),(0,We.jsx)("input",{type:"date",id:"patient-dob",value:l,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-shadow text-sm"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{htmlFor:"patient-diagnosis",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Diagn\xf3stico"}),(0,We.jsx)("input",{type:"text",id:"patient-diagnosis",placeholder:"Ex: TEA N\xedvel 1",value:d,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-shadow text-sm"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{htmlFor:"patient-notes",className:"block text-sm font-medium text-gray-700 mb-1.5",children:"Anota\xe7\xf5es Gerais"}),(0,We.jsx)("textarea",{id:"patient-notes",rows:"4",placeholder:"Informa\xe7\xf5es relevantes sobre o cliente...",value:h,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-shadow text-sm resize-vertical"})]}),g&&(0,We.jsx)("p",{className:"text-red-600 text-sm text-center",children:g})]}),(0,We.jsx)("div",{className:"p-4 bg-gray-50 border-t border-gray-200 mt-auto text-right",children:(0,We.jsxs)("button",{type:"submit",onClick:v,disabled:p,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2.5 px-6 rounded-lg text-sm transition-all duration-200 shadow hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-60 active:scale-95",children:[(0,We.jsx)(Vn,{icon:p?xo:di,className:"mr-2 ".concat(p&&"fa-spin")}),p?"A Guardar...":b?"Guardar Altera\xe7\xf5es":"Criar Cliente"]})})]})}):null},hd=e=>{let{program:t,onUpdate:a,isLoading:n=!1,disabled:r=!1}=e;const[i,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),h=t.trials||t.default_trials||"N/A",m=null!==t.custom_trials&&void 0!==t.custom_trials,p=async()=>{try{u("");const e=""===l.trim()?null:parseInt(l);if(null!==e&&(isNaN(e)||e<1||e>999))return void u("Digite um n\xfamero entre 1 e 999, ou deixe vazio para usar o padr\xe3o.");await a(t.assignment_id,e),o(!1)}catch(d){u("Erro ao salvar tentativas. Tente novamente."),console.error("Erro ao atualizar tentativas:",d)}},f=()=>{o(!1),c(""),u("")},g=e=>{"Enter"===e.key?p():"Escape"===e.key&&f()};return i?(0,We.jsxs)("div",{className:"flex flex-col",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("input",{type:"number",value:l,onChange:e=>c(e.target.value),onKeyPress:g,className:"w-20 px-2 py-1 text-sm border rounded focus:outline-none focus:ring-2 ".concat(d?"border-red-300 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"),placeholder:"Auto",min:"1",max:"999",autoFocus:!0,disabled:n}),(0,We.jsx)("button",{onClick:p,disabled:n,className:"p-1 text-green-600 hover:text-green-800 disabled:opacity-50",title:"Salvar",children:n?(0,We.jsx)(Vn,{icon:xo,className:"fa-spin"}):(0,We.jsx)(Vn,{icon:di})}),(0,We.jsx)("button",{onClick:f,disabled:n,className:"p-1 text-gray-600 hover:text-gray-800 disabled:opacity-50",title:"Cancelar",children:(0,We.jsx)(Vn,{icon:lo})})]}),d&&(0,We.jsx)("span",{className:"text-xs text-red-500 mt-1",children:d}),(0,We.jsxs)("span",{className:"text-xs text-gray-500 mt-1",children:["Padr\xe3o: ",t.default_trials," \u2022 Enter: Salvar \u2022 Esc: Cancelar"]})]}):(0,We.jsx)("div",{className:"flex items-center space-x-2",children:(0,We.jsxs)("div",{className:"flex flex-col",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsxs)("span",{className:"text-sm font-medium ".concat(m?"text-blue-600":"text-gray-700"),children:[h," tentativas"]}),!r&&(0,We.jsx)("button",{onClick:()=>{c(h.toString()),o(!0),u("")},disabled:n,className:"p-1 text-gray-400 hover:text-blue-600 disabled:opacity-50 transition-colors",title:"Editar tentativas",children:(0,We.jsx)(Vn,{icon:vr,className:"text-xs"})})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[m&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("span",{className:"text-xs text-blue-500",children:"Customizado"}),!r&&(0,We.jsx)("button",{onClick:async()=>{try{u(""),await a(t.assignment_id,null)}catch(d){u("Erro ao restaurar padr\xe3o. Tente novamente."),console.error("Erro ao restaurar tentativas padr\xe3o:",d)}},disabled:n,className:"text-xs text-gray-400 hover:text-orange-600 disabled:opacity-50",title:"Restaurar padr\xe3o (".concat(t.default_trials,")"),children:(0,We.jsx)(Vn,{icon:ki})})]}),!m&&t.default_trials&&(0,We.jsx)("span",{className:"text-xs text-gray-400",children:"Padr\xe3o"})]})]})})},md=async(e,t)=>{const a=await fetch("".concat(qe.H).concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(t)});if(!a.ok){const e=await a.json().catch((()=>({message:"Erro desconhecido"})));throw new Error(e.message||"Erro na requisi\xe7\xe3o")}return a.json()},pd=e=>{let{onProgramSelect:t,selectedProgramId:a}=e;const{selectedPatient:n,toggleProgramStatus:r,removeProgram:i,isLoading:o}=dt(),[l,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(null),[h,m]=(0,s.useState)(!1),[p,f]=(0,s.useState)(null),g=async(e,t)=>{f(e);try{await(async(e,t)=>{try{return await md("/assignments/".concat(e,"/custom-trials"),{customTrials:t})}catch(a){throw console.error("Erro ao atualizar tentativas customizadas (Assignment ".concat(e,"):"),a.message),a}})(e,t),null!==n&&void 0!==n&&n.id&&window.location.reload()}catch(a){throw console.error("Falha ao atualizar tentativas:",a),a}finally{f(null)}},x=(0,s.useMemo)((()=>(null===n||void 0===n?void 0:n.assigned_programs)||[]),[n]),b=(0,s.useMemo)((()=>h?x:x.filter((e=>"archived"!==e.status))),[x,h]),v=(0,s.useMemo)((()=>b.reduce(((e,t)=>{const a=t.discipline_name||"Geral";return e[a]||(e[a]=[]),e[a].push(t),e}),{})),[b]),y=Object.keys(v).sort(),j=b.length,N=(0,s.useMemo)((()=>j<=3?"max-h-[50vh]":j<=6?"max-h-[65vh]":"max-h-[80vh]"),[j]);return o?(0,We.jsx)("div",{className:"text-center py-4",children:(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-indigo-500"})}):(0,We.jsxs)("div",{className:"md:col-span-1 lg:col-span-1 bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden flex flex-col ".concat(N),children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 px-6 py-4",children:(0,We.jsx)("div",{className:"flex justify-between items-center",children:(0,We.jsxs)("div",{children:[(0,We.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center",children:[(0,We.jsx)(Vn,{icon:lr,className:"mr-3"}),"Programas Atribu\xeddos",(0,We.jsxs)("span",{className:"ml-auto bg-white bg-opacity-20 px-3 py-1 rounded-full text-sm",children:[j," programa",1!==j?"s":""]})]}),(0,We.jsxs)("p",{className:"text-emerald-100 text-sm mt-1",children:["Lista de programas de interven\xe7\xe3o do cliente",j>6&&(0,We.jsx)("span",{className:"ml-2 text-emerald-200",children:"\u2022 Painel expandido automaticamente"})]})]})})}),(0,We.jsx)("div",{className:"px-6 py-4 bg-gradient-to-r from-emerald-50 to-teal-50 border-b border-emerald-200",children:(0,We.jsx)("div",{className:"flex items-center justify-center",children:(0,We.jsxs)("div",{className:"bg-white border-2 border-emerald-200 rounded-lg p-3 flex items-center space-x-3",children:[(0,We.jsx)("input",{type:"checkbox",id:"show-archived",checked:h,onChange:()=>m(!h),className:"h-4 w-4 rounded border-gray-300 text-emerald-600 focus:ring-emerald-500"}),(0,We.jsxs)("label",{htmlFor:"show-archived",className:"text-sm font-medium text-gray-700 flex items-center",children:[(0,We.jsx)(Vn,{icon:jr,className:"mr-2 text-gray-500"}),"Mostrar Programas Arquivados"]})]})})}),(0,We.jsx)("div",{className:"p-6 overflow-y-auto flex-1",children:b.length>0?(0,We.jsx)("div",{className:"space-y-6",children:y.map((e=>{const s={Fonoaudiologia:{bg:"from-blue-500 to-indigo-600",light:"from-blue-50 to-indigo-50",border:"border-blue-200"},Psicologia:{bg:"from-red-500 to-pink-600",light:"from-red-50 to-pink-50",border:"border-red-200"},Musicoterapia:{bg:"from-purple-500 to-violet-600",light:"from-purple-50 to-violet-50",border:"border-purple-200"},TerapiaOcupacional:{bg:"from-orange-500 to-amber-600",light:"from-orange-50 to-amber-50",border:"border-orange-200"},Psicomotricidade:{bg:"from-green-500 to-emerald-600",light:"from-green-50 to-emerald-50",border:"border-green-200"},Psicopedagogia:{bg:"from-yellow-500 to-orange-600",light:"from-yellow-50 to-orange-50",border:"border-yellow-200"}}[e]||{bg:"from-gray-500 to-slate-600",light:"from-gray-50 to-slate-50",border:"border-gray-200"};return(0,We.jsxs)("div",{className:"bg-gradient-to-r ".concat(s.light," border-2 ").concat(s.border," rounded-lg overflow-hidden"),children:[(0,We.jsx)("div",{className:"bg-gradient-to-r ".concat(s.bg," px-4 py-3"),children:(0,We.jsxs)("h4",{className:"text-white font-bold flex items-center",children:[(0,We.jsx)(Vn,{icon:Kr,className:"mr-2"}),e,(0,We.jsxs)("span",{className:"ml-auto bg-white bg-opacity-20 px-2 py-1 rounded-full text-xs",children:[v[e].length," programa",1!==v[e].length?"s":""]})]})}),(0,We.jsx)("div",{className:"p-4 space-y-3",children:v[e].map((e=>{const s="archived"===e.status,n=e.assignment_id===a;return(0,We.jsx)("div",{onClick:()=>!s&&t(e),className:"\n                              p-4 rounded-lg border-2 transition-all duration-200 cursor-pointer transform\n                              ".concat(n?"bg-white border-emerald-400 shadow-lg scale-105":"bg-white border-gray-200 hover:border-emerald-300 hover:shadow-md hover:scale-102"," \n                              ").concat(s?"opacity-60 cursor-not-allowed bg-gray-50":"","\n                            "),children:(0,We.jsxs)("div",{className:"flex justify-between items-center",children:[(0,We.jsxs)("div",{className:"flex-1 mr-4 ".concat(s?"italic text-gray-500":""),children:[(0,We.jsx)("p",{className:"text-sm font-semibold text-gray-800 mb-1",title:e.program_name,children:e.program_name}),(0,We.jsx)("div",{className:"flex items-center justify-between mt-2",children:(0,We.jsx)(hd,{program:e,onUpdate:g,isLoading:p===e.assignment_id,disabled:s})}),n&&(0,We.jsxs)("div",{className:"flex items-center text-xs text-emerald-600 mt-1",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-emerald-500 rounded-full mr-2 animate-pulse"}),"Programa selecionado"]})]}),(0,We.jsxs)("div",{className:"flex space-x-2 flex-shrink-0",children:[(0,We.jsx)(De,{to:"/session/".concat(e.assignment_id),title:"Iniciar Sess\xe3o",onClick:e=>e.stopPropagation(),className:"\n                                  p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all transform hover:scale-110\n                                  ".concat(s?"text-gray-400 bg-gray-100 cursor-not-allowed pointer-events-none":"text-indigo-600 bg-indigo-100 hover:bg-indigo-200","\n                                "),children:(0,We.jsx)(Vn,{icon:ni,className:"fa-fw"})}),(0,We.jsx)("button",{title:s?"Reativar Programa":"Arquivar Programa",onClick:t=>{t.stopPropagation(),(async(e,t)=>{c(e);try{await r(e,t)}catch(a){console.error("Falha ao mudar status do programa:",a)}finally{c(null)}})(e.assignment_id,e.status)},disabled:l===e.assignment_id,className:"p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all text-yellow-600 bg-yellow-100 hover:bg-yellow-200 disabled:opacity-50 transform hover:scale-110",children:l===e.assignment_id?(0,We.jsx)(Vn,{icon:xo,className:"fa-spin fa-fw"}):(0,We.jsx)(Vn,{icon:s?li:jr,className:"fa-fw"})}),(0,We.jsx)("button",{title:"Remover Programa Permanentemente",onClick:t=>{t.stopPropagation(),(async e=>{u(e);try{await i(e)}catch(t){console.error("Falha ao remover programa:",t)}finally{u(null)}})(e.program_id)},disabled:d===e.program_id,className:"p-2 rounded-full w-10 h-10 flex items-center justify-center transition-all text-red-500 bg-red-100 hover:bg-red-200 disabled:opacity-50 transform hover:scale-110",children:d===e.program_id?(0,We.jsx)(Vn,{icon:xo,className:"fa-spin fa-fw"}):(0,We.jsx)(Vn,{icon:$n,className:"fa-fw"})})]})]})},e.assignment_id)}))})]},e)}))}):(0,We.jsx)("div",{className:"text-center py-8",children:(0,We.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-dashed border-gray-300 rounded-lg p-6",children:[(0,We.jsx)(Vn,{icon:lr,className:"text-4xl text-gray-300 mb-3"}),(0,We.jsx)("p",{className:"text-gray-500 font-medium",children:0===x.length?"Nenhum programa atribu\xeddo":"Nenhum programa ativo para exibir"}),(0,We.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:0===x.length?"Adicione programas na p\xe1gina de Programas":'Ative a op\xe7\xe3o "Mostrar Arquivados" para ver todos'})]})})})]})};var fd=a(6361);const gd=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],xd="label";function bd(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function vd(e,t){e.labels=t}function yd(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:xd;const s=[];e.datasets=t.map((t=>{const n=e.datasets.find((e=>e[a]===t[a]));return n&&t.data&&!s.includes(n)?(s.push(n),Object.assign(n,t),n):(0,Ie.A)({},t)}))}function jd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:xd;const a={labels:[],datasets:[]};return vd(a,e.labels),yd(a,e.datasets,t),a}function Nd(e,t){const{height:a=150,width:n=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h}=e,m=function(e,t){if(null==e)return{};var a,s,n=function(e,t){if(null==e)return{};var a={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)a=r[s],-1===t.indexOf(a)&&{}.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}(e,gd),p=(0,s.useRef)(null),f=(0,s.useRef)(null),g=()=>{p.current&&(f.current=new fd.t1(p.current,{type:o,data:jd(l,i),options:c&&(0,Ie.A)({},c),plugins:d}),bd(t,f.current))},x=()=>{bd(t,null),f.current&&(f.current.destroy(),f.current=null)};return(0,s.useEffect)((()=>{!r&&f.current&&c&&function(e,t){const a=e.options;a&&t&&Object.assign(a,t)}(f.current,c)}),[r,c]),(0,s.useEffect)((()=>{!r&&f.current&&vd(f.current.config.data,l.labels)}),[r,l.labels]),(0,s.useEffect)((()=>{!r&&f.current&&l.datasets&&yd(f.current.config.data,l.datasets,i)}),[r,l.datasets]),(0,s.useEffect)((()=>{f.current&&(r?(x(),setTimeout(g)):f.current.update(h))}),[r,c,l.labels,l.datasets,h]),(0,s.useEffect)((()=>{f.current&&(x(),setTimeout(g))}),[o]),(0,s.useEffect)((()=>(g(),()=>x())),[]),s.createElement("canvas",(0,Ie.A)({ref:p,role:"img",height:a,width:n},m),u)}const wd=(0,s.forwardRef)(Nd);function _d(e,t){return fd.t1.register(t),(0,s.forwardRef)(((t,a)=>s.createElement(wd,(0,Ie.A)((0,Ie.A)({},t),{},{ref:a,type:e}))))}const Sd=_d("line",fd.ZT),Cd=_d("bar",fd.A6),kd=_d("doughnut",fd.ju);var Ad=a(2926);const Pd={modes:{point:(e,t)=>Ld(e,t,{intersect:!0}),nearest:(e,t,a)=>function(e,t,a){let s=Number.POSITIVE_INFINITY;return Ld(e,t,a).reduce(((e,n)=>{const r=n.getCenterPoint(),i=function(e,t,a){if("x"===a)return{x:e.x,y:t.y};if("y"===a)return{x:t.x,y:e.y};return t}(t,r,a.axis),o=(0,Ad.aF)(t,i);return o<s?(e=[n],s=o):o===s&&e.push(n),e}),[]).sort(((e,t)=>e._index-t._index)).slice(0,1)}(e,t,a),x:(e,t,a)=>Ld(e,t,{intersect:a.intersect,axis:"x"}),y:(e,t,a)=>Ld(e,t,{intersect:a.intersect,axis:"y"})}};function Ed(e,t,a){return(Pd.modes[a.mode]||Pd.modes.nearest)(e,t,a)}function Ld(e,t,a){return e.filter((e=>a.intersect?e.inRange(t.x,t.y):function(e,t,a){return"x"!==a&&"y"!==a?e.inRange(t.x,t.y,"x",!0)||e.inRange(t.x,t.y,"y",!0):e.inRange(t.x,t.y,a,!0)}(e,t,a.axis)))}function Dd(e,t,a){const s=Math.cos(a),n=Math.sin(a),r=t.x,i=t.y;return{x:r+s*(e.x-r)-n*(e.y-i),y:i+n*(e.x-r)+s*(e.y-i)}}const Od=(e,t)=>t>e||e.length>t.length&&e.slice(0,t.length)===t,Td=.001,Md=(e,t,a)=>Math.min(a,Math.max(t,e)),Rd=(e,t)=>e.value>=e.start-t&&e.value<=e.end+t;function Id(e,t,a){for(const s of Object.keys(e))e[s]=Md(e[s],t,a);return e}function Fd(e,t,a,s){let{x:n,y:r,x2:i,y2:o}=t,{borderWidth:l,hitTolerance:c}=s;const d=(l+c)/2,u=e.x>=n-d-Td&&e.x<=i+d+Td,h=e.y>=r-d-Td&&e.y<=o+d+Td;return"x"===a?u:("y"===a||u)&&h}function zd(e,t,a,s){let{rect:n,center:r}=t,{rotation:i,borderWidth:o,hitTolerance:l}=s;return Fd(Dd(e,r,(0,Ad.t)(-i)),n,a,{borderWidth:o,hitTolerance:l})}function Bd(e,t){const{centerX:a,centerY:s}=e.getProps(["centerX","centerY"],t);return{x:a,y:s}}const qd=e=>"string"===typeof e&&e.endsWith("%"),Ud=e=>parseFloat(e)/100,Hd=e=>Md(Ud(e),0,1),Wd=(e,t)=>({x:e,y:t,x2:e,y2:t,width:0,height:0}),Vd={box:e=>Wd(e.centerX,e.centerY),doughnutLabel:e=>Wd(e.centerX,e.centerY),ellipse:e=>({centerX:e.centerX,centerY:e.centerX,radius:0,width:0,height:0}),label:e=>Wd(e.centerX,e.centerY),line:e=>Wd(e.x,e.y),point:e=>({centerX:e.centerX,centerY:e.centerY,radius:0,width:0,height:0}),polygon:e=>Wd(e.centerX,e.centerY)};function Gd(e,t){return"start"===t?0:"end"===t?e:qd(t)?Hd(t)*e:e/2}function Yd(e,t){let a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return"number"===typeof t?t:qd(t)?(a?Hd(t):Ud(t))*e:e}function $d(e,t,a,s){let{borderWidth:n,position:r,xAdjust:i,yAdjust:o}=a;const l=(0,Ad.i)(s),c=t.width+(l?s.width:0)+n,d=t.height+(l?s.height:0)+n,u=Xd(r),h=Zd(e.x,c,i,u.x),m=Zd(e.y,d,o,u.y);return{x:h,y:m,x2:h+c,y2:m+d,width:c,height:d,centerX:h+c/2,centerY:m+d/2}}function Xd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center";return(0,Ad.i)(e)?{x:(0,Ad.v)(e.x,t),y:(0,Ad.v)(e.y,t)}:{x:e=(0,Ad.v)(e,t),y:e}}const Jd=(e,t)=>e&&e.autoFit&&t<1;function Kd(e,t){const a=e.font,s=(0,Ad.b)(a)?a:[a];return Jd(e,t)?s.map((function(e){const a=(0,Ad.a0)(e);return a.size=Math.floor(e.size*t),a.lineHeight=e.lineHeight,(0,Ad.a0)(a)})):s.map((e=>(0,Ad.a0)(e)))}function Qd(e){return e&&((0,Ad.h)(e.xValue)||(0,Ad.h)(e.yValue))}function Zd(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e-Gd(t,arguments.length>3?arguments[3]:void 0)+a}function eu(e,t,a){const s=a.init;if(s)return!0===s?au(t,a):function(e,t,a){const s=(0,Ad.Q)(a.init,[{chart:e,properties:t,options:a}]);if(!0===s)return au(t,a);if((0,Ad.i)(s))return s}(e,t,a)}function tu(e,t,a){let s=!1;return t.forEach((t=>{(0,Ad.a7)(e[t])?(s=!0,a[t]=e[t]):(0,Ad.h)(a[t])&&delete a[t]})),s}function au(e,t){const a=t.type||"line";return Vd[a](e)}const su=new Map;function nu(e){if(e&&"object"===typeof e){const t=e.toString();return"[object HTMLImageElement]"===t||"[object HTMLCanvasElement]"===t}}function ru(e,t,a){let{x:s,y:n}=t;a&&(e.translate(s,n),e.rotate((0,Ad.t)(a)),e.translate(-s,-n))}function iu(e,t){if(t&&t.borderWidth)return e.lineCap=t.borderCapStyle||"butt",e.setLineDash(t.borderDash),e.lineDashOffset=t.borderDashOffset,e.lineJoin=t.borderJoinStyle||"miter",e.lineWidth=t.borderWidth,e.strokeStyle=t.borderColor,!0}function ou(e,t){e.shadowColor=t.backgroundShadowColor,e.shadowBlur=t.shadowBlur,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY}function lu(e,t){const a=t.content;if(nu(a)){return{width:Yd(a.width,t.width),height:Yd(a.height,t.height)}}const s=Kd(t),n=t.textStrokeWidth,r=(0,Ad.b)(a)?a:[a],i=r.join()+(e=>e.reduce((function(e,t){return e+t.string}),""))(s)+n+(e._measureText?"-spriting":"");return su.has(i)||su.set(i,function(e,t,a,s){e.save();const n=t.length;let r=0,i=s;for(let o=0;o<n;o++){const n=a[Math.min(o,a.length-1)];e.font=n.string;const l=t[o];r=Math.max(r,e.measureText(l).width+s),i+=n.lineHeight}return e.restore(),{width:r,height:i}}(e,r,s,n)),su.get(i)}function cu(e,t,a){const{x:s,y:n,width:r,height:i}=t;e.save(),ou(e,a);const o=iu(e,a);e.fillStyle=a.backgroundColor,e.beginPath(),(0,Ad.av)(e,{x:s,y:n,w:r,h:i,radius:Id((0,Ad.ax)(a.borderRadius),0,Math.min(r,i)/2)}),e.closePath(),e.fill(),o&&(e.shadowColor=a.borderShadowColor,e.stroke()),e.restore()}function du(e,t,a,s){const n=a.content;if(nu(n))return e.save(),e.globalAlpha=function(e,t){const a=(0,Ad.x)(e)?e:t;return(0,Ad.x)(a)?Md(a,0,1):1}(a.opacity,n.style.opacity),e.drawImage(n,t.x,t.y,t.width,t.height),void e.restore();const r=(0,Ad.b)(n)?n:[n],i=Kd(a,s),o=a.color,l=(0,Ad.b)(o)?o:[o],c=function(e,t){const{x:a,width:s}=e,n=t.textAlign;return"center"===n?a+s/2:"end"===n||"right"===n?a+s:a}(t,a),d=t.y+a.textStrokeWidth/2;e.save(),e.textBaseline="middle",e.textAlign=a.textAlign,function(e,t){if(t.textStrokeWidth>0)return e.lineJoin="round",e.miterLimit=2,e.lineWidth=t.textStrokeWidth,e.strokeStyle=t.textStrokeColor,!0}(e,a)&&function(e,t,a,s){let{x:n,y:r}=t;e.beginPath();let i=0;a.forEach((function(t,a){const o=s[Math.min(a,s.length-1)],l=o.lineHeight;e.font=o.string,e.strokeText(t,n,r+l/2+i),i+=l})),e.stroke()}(e,{x:c,y:d},r,i),function(e,t,a,s){let{x:n,y:r}=t,{fonts:i,colors:o}=s,l=0;a.forEach((function(t,a){const s=o[Math.min(a,o.length-1)],c=i[Math.min(a,i.length-1)],d=c.lineHeight;e.beginPath(),e.font=c.string,e.fillStyle=s,e.fillText(t,n,r+d/2+l),l+=d,e.fill()}))}(e,{x:c,y:d},r,{fonts:i,colors:l}),e.restore()}function uu(e,t,a,s){const{radius:n,options:r}=t,i=r.pointStyle,o=r.rotation;let l=(o||0)*Ad.b4;if(nu(i))return e.save(),e.translate(a,s),e.rotate(l),e.drawImage(i,-i.width/2,-i.height/2,i.width,i.height),void e.restore();(e=>isNaN(e)||e<=0)(n)||function(e,t){let a,s,n,r,{x:i,y:o,radius:l,rotation:c,style:d,rad:u}=t;switch(e.beginPath(),d){default:e.arc(i,o,l,0,Ad.T),e.closePath();break;case"triangle":e.moveTo(i+Math.sin(u)*l,o-Math.cos(u)*l),u+=Ad.b6,e.lineTo(i+Math.sin(u)*l,o-Math.cos(u)*l),u+=Ad.b6,e.lineTo(i+Math.sin(u)*l,o-Math.cos(u)*l),e.closePath();break;case"rectRounded":r=.516*l,n=l-r,a=Math.cos(u+Ad.b5)*n,s=Math.sin(u+Ad.b5)*n,e.arc(i-a,o-s,r,u-Ad.P,u-Ad.H),e.arc(i+s,o-a,r,u-Ad.H,u),e.arc(i+a,o+s,r,u,u+Ad.H),e.arc(i-s,o+a,r,u+Ad.H,u+Ad.P),e.closePath();break;case"rect":if(!c){n=Math.SQRT1_2*l,e.rect(i-n,o-n,2*n,2*n);break}u+=Ad.b5;case"rectRot":a=Math.cos(u)*l,s=Math.sin(u)*l,e.moveTo(i-a,o-s),e.lineTo(i+s,o-a),e.lineTo(i+a,o+s),e.lineTo(i-s,o+a),e.closePath();break;case"crossRot":u+=Ad.b5;case"cross":a=Math.cos(u)*l,s=Math.sin(u)*l,e.moveTo(i-a,o-s),e.lineTo(i+a,o+s),e.moveTo(i+s,o-a),e.lineTo(i-s,o+a);break;case"star":a=Math.cos(u)*l,s=Math.sin(u)*l,e.moveTo(i-a,o-s),e.lineTo(i+a,o+s),e.moveTo(i+s,o-a),e.lineTo(i-s,o+a),u+=Ad.b5,a=Math.cos(u)*l,s=Math.sin(u)*l,e.moveTo(i-a,o-s),e.lineTo(i+a,o+s),e.moveTo(i+s,o-a),e.lineTo(i-s,o+a);break;case"line":a=Math.cos(u)*l,s=Math.sin(u)*l,e.moveTo(i-a,o-s),e.lineTo(i+a,o+s);break;case"dash":e.moveTo(i,o),e.lineTo(i+Math.cos(u)*l,o+Math.sin(u)*l)}e.fill()}(e,{x:a,y:s,radius:n,rotation:o,style:i,rad:l})}const hu=["left","bottom","top","right"];function mu(e,t){const{pointX:a,pointY:s,options:n}=t,r=n.callout,i=r&&r.display&&function(e,t){const a=t.position;if(hu.includes(a))return a;return function(e,t){const{x:a,y:s,x2:n,y2:r,width:i,height:o,pointX:l,pointY:c,centerX:d,centerY:u,rotation:h}=e,m={x:d,y:u},p=t.start,f=Yd(i,p),g=Yd(o,p),x=[a,a+f,a+f,n],b=[s+g,r,s,r],v=[];for(let y=0;y<4;y++){const e=Dd({x:x[y],y:b[y]},m,(0,Ad.t)(h));v.push({position:hu[y],distance:(0,Ad.aF)(e,{x:l,y:c})})}return v.sort(((e,t)=>e.distance-t.distance))[0].position}(e,t)}(t,r);if(!i||function(e,t,a){const{pointX:s,pointY:n}=e,r=t.margin;let i=s,o=n;"left"===a?i+=r:"right"===a?i-=r:"top"===a?o+=r:"bottom"===a&&(o-=r);return e.inRange(i,o)}(t,r,i))return;e.save(),e.beginPath();if(!iu(e,r))return e.restore();const{separatorStart:o,separatorEnd:l}=function(e,t){const{x:a,y:s,x2:n,y2:r}=e,i=function(e,t){const{width:a,height:s,options:n}=e,r=n.callout.margin+n.borderWidth/2;if("right"===t)return a+r;if("bottom"===t)return s+r;return-r}(e,t);let o,l;"left"===t||"right"===t?(o={x:a+i,y:s},l={x:o.x,y:r}):(o={x:a,y:s+i},l={x:n,y:o.y});return{separatorStart:o,separatorEnd:l}}(t,i),{sideStart:c,sideEnd:d}=function(e,t,a){const{y:s,width:n,height:r,options:i}=e,o=i.callout.start,l=function(e,t){const a=t.side;if("left"===e||"top"===e)return-a;return a}(t,i.callout);let c,d;"left"===t||"right"===t?(c={x:a.x,y:s+Yd(r,o)},d={x:c.x+l,y:c.y}):(c={x:a.x+Yd(n,o),y:a.y},d={x:c.x,y:c.y+l});return{sideStart:c,sideEnd:d}}(t,i,o);(r.margin>0||0===n.borderWidth)&&(e.moveTo(o.x,o.y),e.lineTo(l.x,l.y)),e.moveTo(c.x,c.y),e.lineTo(d.x,d.y);const u=Dd({x:a,y:s},t.getCenterPoint(),(0,Ad.t)(-t.rotation));e.lineTo(u.x,u.y),e.stroke(),e.restore()}const pu={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function fu(e,t,a){return t="number"===typeof t?t:e.parse(t),(0,Ad.g)(t)?e.getPixelForValue(t):a}function gu(e,t,a){const s=t[a];if(s||"scaleID"===a)return s;const n=a.charAt(0),r=Object.values(e).filter((e=>e.axis&&e.axis===n));return r.length?r[0].id:n}function xu(e,t){if(e){const a=e.options.reverse;return{start:fu(e,t.min,a?t.end:t.start),end:fu(e,t.max,a?t.start:t.end)}}}function bu(e,t){const{chartArea:a,scales:s}=e,n=s[gu(s,t,"xScaleID")],r=s[gu(s,t,"yScaleID")];let i=a.width/2,o=a.height/2;return n&&(i=fu(n,t.xValue,n.left+n.width/2)),r&&(o=fu(r,t.yValue,r.top+r.height/2)),{x:i,y:o}}function vu(e,t){const a=e.scales,s=a[gu(a,t,"xScaleID")],n=a[gu(a,t,"yScaleID")];if(!s&&!n)return{};let{left:r,right:i}=s||e.chartArea,{top:o,bottom:l}=n||e.chartArea;const c=wu(s,{min:t.xMin,max:t.xMax,start:r,end:i});r=c.start,i=c.end;const d=wu(n,{min:t.yMin,max:t.yMax,start:l,end:o});return o=d.start,l=d.end,{x:r,y:o,x2:i,y2:l,width:i-r,height:l-o,centerX:r+(i-r)/2,centerY:o+(l-o)/2}}function yu(e,t){if(!Qd(t)){const a=vu(e,t);let s=t.radius;s&&!isNaN(s)||(s=Math.min(a.width,a.height)/2,t.radius=s);const n=2*s,r=a.centerX+t.xAdjust,i=a.centerY+t.yAdjust;return{x:r-s,y:i-s,x2:r+s,y2:i+s,centerX:r,centerY:i,width:n,height:n,radius:s}}return function(e,t){const a=bu(e,t),s=2*t.radius;return{x:a.x-t.radius+t.xAdjust,y:a.y-t.radius+t.yAdjust,x2:a.x+t.radius+t.xAdjust,y2:a.y+t.radius+t.yAdjust,centerX:a.x+t.xAdjust,centerY:a.y+t.yAdjust,radius:t.radius,width:s,height:s}}(e,t)}function ju(e,t){const{scales:a,chartArea:s}=e,n=a[t.scaleID],r={x:s.left,y:s.top,x2:s.right,y2:s.bottom};return n?function(e,t,a){const s=fu(e,a.value,NaN),n=fu(e,a.endValue,s);e.isHorizontal()?(t.x=s,t.x2=n):(t.y=s,t.y2=n)}(n,r,t):function(e,t,a){for(const s of Object.keys(pu)){const n=e[gu(e,a,s)];if(n){const{min:e,max:r,start:i,end:o,startProp:l,endProp:c}=pu[s],d=xu(n,{min:a[e],max:a[r],start:n[i],end:n[o]});t[l]=d.start,t[c]=d.end}}}(a,r,t),r}function Nu(e,t){const a=vu(e,t);return a.initProperties=eu(e,a,t),a.elements=[{type:"label",optionScope:"label",properties:Su(e,a,t),initProperties:a.initProperties}],a}function wu(e,t){const a=xu(e,t)||t;return{start:Math.min(a.start,a.end),end:Math.max(a.start,a.end)}}function _u(e,t){const{start:a,end:s,borderWidth:n}=e,{position:r,padding:{start:i,end:o},adjust:l}=t;return a+n/2+l+Gd(s-n-a-i-o-t.size,r)}function Su(e,t,a){const s=a.label;s.backgroundColor="transparent",s.callout.display=!1;const n=Xd(s.position),r=(0,Ad.E)(s.padding),i=lu(e.ctx,s),o=function(e,t,a,s){let{properties:n,options:r}=e;const{x:i,x2:o,width:l}=n;return _u({start:i,end:o,size:l,borderWidth:r.borderWidth},{position:a.x,padding:{start:s.left,end:s.right},adjust:r.label.xAdjust,size:t.width})}({properties:t,options:a},i,n,r),l=function(e,t,a,s){let{properties:n,options:r}=e;const{y:i,y2:o,height:l}=n;return _u({start:i,end:o,size:l,borderWidth:r.borderWidth},{position:a.y,padding:{start:s.top,end:s.bottom},adjust:r.label.yAdjust,size:t.height})}({properties:t,options:a},i,n,r),c=i.width+r.width,d=i.height+r.height;return{x:o,y:l,x2:o+c,y2:l+d,width:c,height:d,centerX:o+c/2,centerY:l+d/2,rotation:s.rotation}}const Cu=["enter","leave"],ku=Cu.concat("click");function Au(e,t,a){if(e.listened)switch(t.type){case"mousemove":case"mouseout":return function(e,t,a){if(!e.moveListened)return;let s;s="mousemove"===t.type?Ed(e.visibleElements,t,a.interaction):[];const n=e.hovered;e.hovered=s;const r={state:e,event:t};let i=Pu(r,"leave",n,s);return Pu(r,"enter",s,n)||i}(e,t,a);case"click":return function(e,t,a){const s=e.listeners,n=Ed(e.visibleElements,t,a.interaction);let r;for(const i of n)r=Eu(i.options.click||s.click,i,t)||r;return r}(e,t,a)}}function Pu(e,t,a,s){let n,{state:r,event:i}=e;for(const o of a)s.indexOf(o)<0&&(n=Eu(o.options[t]||r.listeners[t],o,i)||n);return n}function Eu(e,t,a){return!0===(0,Ad.Q)(e,[t.$context,a])}const Lu=["afterDraw","beforeDraw"];function Du(e,t,a){if(e.hooked){const s=t.options[a]||e.hooks[a];return(0,Ad.Q)(s,[t.$context])}}function Ou(e,t,a){const s=function(e,t,a){const s=t.axis,n=t.id,r=s+"ScaleID",i={min:(0,Ad.v)(t.min,Number.NEGATIVE_INFINITY),max:(0,Ad.v)(t.max,Number.POSITIVE_INFINITY)};for(const o of a)o.scaleID===n?Iu(o,t,["value","endValue"],i):gu(e,o,r)===n&&Iu(o,t,[s+"Min",s+"Max",s+"Value"],i);return i}(e.scales,t,a);let n=Tu(t,s,"min","suggestedMin");n=Tu(t,s,"max","suggestedMax")||n,n&&(0,Ad.a7)(t.handleTickRangeOptions)&&t.handleTickRangeOptions()}function Tu(e,t,a,s){if((0,Ad.g)(t[a])&&!function(e,t,a){return(0,Ad.h)(e[t])||(0,Ad.h)(e[a])}(e.options,a,s)){const s=e[a]!==t[a];return e[a]=t[a],s}}function Mu(e,t){for(const a of["scaleID","xScaleID","yScaleID"]){const s=gu(t,e,a);s&&!t[s]&&Ru(e,a)&&console.warn("No scale found with id '".concat(s,"' for annotation '").concat(e.id,"'"))}}function Ru(e,t){if("scaleID"===t)return!0;const a=t.charAt(0);for(const s of["Min","Max","Value"])if((0,Ad.h)(e[a+s]))return!0;return!1}function Iu(e,t,a,s){for(const n of a){const a=e[n];if((0,Ad.h)(a)){const e=t.parse(a);s.min=Math.min(s.min,e),s.max=Math.max(s.max,e)}}}class Fu extends fd.Hg{inRange(e,t,a,s){const{x:n,y:r}=Dd({x:e,y:t},this.getCenterPoint(s),(0,Ad.t)(-this.options.rotation));return Fd({x:n,y:r},this.getProps(["x","y","x2","y2"],s),a,this.options)}getCenterPoint(e){return Bd(this,e)}draw(e){e.save(),ru(e,this.getCenterPoint(),this.options.rotation),cu(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,t){return Nu(e,t)}}Fu.id="boxAnnotation",Fu.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,hitTolerance:0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},Fu.defaultRoutes={borderColor:"color",backgroundColor:"color"},Fu.descriptors={label:{_fallback:!0}};class zu extends fd.Hg{inRange(e,t,a,s){return zd({x:e,y:t},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},a,{rotation:this.rotation,borderWidth:0,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Bd(this,e)}draw(e){const t=this.options;t.display&&t.content&&(!function(e,t){const{_centerX:a,_centerY:s,_radius:n,_startAngle:r,_endAngle:i,_counterclockwise:o,options:l}=t;e.save();const c=iu(e,l);e.fillStyle=l.backgroundColor,e.beginPath(),e.arc(a,s,n,r,i,o),e.closePath(),e.fill(),c&&e.stroke();e.restore()}(e,this),e.save(),ru(e,this.getCenterPoint(),this.rotation),du(e,this,t,this._fitRatio),e.restore())}resolveElementProperties(e,t){const a=function(e,t){return e.getSortedVisibleDatasetMetas().reduce((function(a,s){const n=s.controller;return n instanceof fd.ju&&function(e,t,a){if(!t.autoHide)return!0;for(let s=0;s<a.length;s++)if(!a[s].hidden&&e.getDataVisibility(s))return!0}(e,t,s.data)&&(!a||n.innerRadius<a.controller.innerRadius)&&n.options.circumference>=90?s:a}),void 0)}(e,t);if(!a)return{};const{controllerMeta:s,point:n,radius:r}=function(e,t,a){let{chartArea:s}=e;const{left:n,top:r,right:i,bottom:o}=s,{innerRadius:l,offsetX:c,offsetY:d}=a.controller,u=(n+i)/2+c,h=(r+o)/2+d,m={left:Math.max(u-l,n),right:Math.min(u+l,i),top:Math.max(h-l,r),bottom:Math.min(h+l,o)},p={x:(m.left+m.right)/2,y:(m.top+m.bottom)/2},f=t.spacing+t.borderWidth/2,g=l-f,x=p.y>h,b=function(e,t,a,s){const n=Math.pow(a-e,2),r=Math.pow(s,2),i=-2*t,o=Math.pow(t,2)+n-r,l=Math.pow(i,2)-4*o;if(l<=0)return{_startAngle:0,_endAngle:Ad.T};const c=(-i-Math.sqrt(l))/2,d=(-i+Math.sqrt(l))/2;return{_startAngle:(0,Ad.D)({x:t,y:a},{x:c,y:e}).angle,_endAngle:(0,Ad.D)({x:t,y:a},{x:d,y:e}).angle}}(x?r+f:o-f,u,h,g),v=(0,Ie.A)({_centerX:u,_centerY:h,_radius:g,_counterclockwise:x},b);return{controllerMeta:v,point:p,radius:Math.min(l,Math.min(m.right-m.left,m.bottom-m.top)/2)}}(e,t,a);let i=lu(e.ctx,t);const o=function(e,t){let{width:a,height:s}=e;const n=Math.sqrt(Math.pow(a,2)+Math.pow(s,2));return 2*t/n}(i,r);Jd(t,o)&&(i={width:i.width*o,height:i.height*o});const{position:l,xAdjust:c,yAdjust:d}=t,u=$d(n,i,{borderWidth:0,position:l,xAdjust:c,yAdjust:d});return(0,Ie.A)((0,Ie.A)((0,Ie.A)({initProperties:eu(e,u,t)},u),s),{},{rotation:t.rotation,_fitRatio:o})}}zu.id="doughnutLabelAnnotation",zu.defaults={autoFit:!0,autoHide:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderColor:"transparent",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:0,color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,spacing:1,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0},zu.defaultRoutes={};class Bu extends fd.Hg{inRange(e,t,a,s){return zd({x:e,y:t},{rect:this.getProps(["x","y","x2","y2"],s),center:this.getCenterPoint(s)},a,{rotation:this.rotation,borderWidth:this.options.borderWidth,hitTolerance:this.options.hitTolerance})}getCenterPoint(e){return Bd(this,e)}draw(e){const t=this.options,a=!(0,Ad.h)(this._visible)||this._visible;t.display&&t.content&&a&&(e.save(),ru(e,this.getCenterPoint(),this.rotation),mu(e,this),cu(e,this,t),du(e,function(e){let{x:t,y:a,width:s,height:n,options:r}=e;const i=r.borderWidth/2,o=(0,Ad.E)(r.padding);return{x:t+o.left+i,y:a+o.top+i,width:s-o.left-o.right-r.borderWidth,height:n-o.top-o.bottom-r.borderWidth}}(this),t),e.restore())}resolveElementProperties(e,t){let a;if(Qd(t))a=bu(e,t);else{const{centerX:s,centerY:n}=vu(e,t);a={x:s,y:n}}const s=(0,Ad.E)(t.padding),n=$d(a,lu(e.ctx,t),t,s);return(0,Ie.A)((0,Ie.A)({initProperties:eu(e,n,t),pointX:a.x,pointY:a.y},n),{},{rotation:t.rotation})}}Bu.id="labelAnnotation",Bu.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,hitTolerance:0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},Bu.defaultRoutes={borderColor:"color"};const qu=(e,t,a)=>({x:e.x+a*(t.x-e.x),y:e.y+a*(t.y-e.y)}),Uu=(e,t,a)=>qu(t,a,Math.abs((e-t.y)/(a.y-t.y))).x,Hu=(e,t,a)=>qu(t,a,Math.abs((e-t.x)/(a.x-t.x))).y,Wu=e=>e*e,Vu=(e,t,a,s)=>(1-s)*(1-s)*e+2*(1-s)*s*t+s*s*a,Gu=(e,t,a,s)=>({x:Vu(e.x,t.x,a.x,s),y:Vu(e.y,t.y,a.y,s)}),Yu=(e,t,a,s)=>2*(1-s)*(t-e)+2*s*(a-t),$u=(e,t,a,s)=>-Math.atan2(Yu(e.x,t.x,a.x,s),Yu(e.y,t.y,a.y,s))+.5*Ad.P;class Xu extends fd.Hg{inRange(e,t,a,s){const n=(this.options.borderWidth+this.options.hitTolerance)/2;if("x"!==a&&"y"!==a){const a={mouseX:e,mouseY:t},{path:r,ctx:i}=this;if(r){iu(i,this.options),i.lineWidth+=this.options.hitTolerance;const{chart:n}=this.$context,o=e*n.currentDevicePixelRatio,l=t*n.currentDevicePixelRatio,c=i.isPointInStroke(r,o,l)||Qu(this,a,s);return i.restore(),c}return function(e,t){let{mouseX:a,mouseY:s}=t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Td,r=arguments.length>3?arguments[3]:void 0;const{x:i,y:o,x2:l,y2:c}=e.getProps(["x","y","x2","y2"],r),d=l-i,u=c-o,h=Wu(d)+Wu(u),m=0===h?-1:((a-i)*d+(s-o)*u)/h;let p,f;m<0?(p=i,f=o):m>1?(p=l,f=c):(p=i+m*d,f=o+m*u);return Wu(a-p)+Wu(s-f)<=n}(this,a,Wu(n),s)||Qu(this,a,s)}return function(e,t,a,s){let{mouseX:n,mouseY:r}=t,{hitSize:i,useFinalPosition:o}=s;const l=((e,t,a,s)=>{let{x:n,y:r,x2:i,y2:o}=a;return"y"===s?{start:Math.min(r,o),end:Math.max(r,o),value:t}:{start:Math.min(n,i),end:Math.max(n,i),value:e}})(n,r,e.getProps(["x","y","x2","y2"],o),a);return Rd(l,i)||Qu(e,{mouseX:n,mouseY:r},o,a)}(this,{mouseX:e,mouseY:t},a,{hitSize:n,useFinalPosition:s})}getCenterPoint(e){return Bd(this,e)}draw(e){const{x:t,y:a,x2:s,y2:n,cp:r,options:i}=this;if(e.save(),!iu(e,i))return e.restore();ou(e,i);const o=Math.sqrt(Math.pow(s-t,2)+Math.pow(n-a,2));if(i.curve&&r)return function(e,t,a,s){const{x:n,y:r,x2:i,y2:o,options:l}=t,{startOpts:c,endOpts:d,startAdjust:u,endAdjust:h}=th(t),m={x:n,y:r},p={x:i,y:o},f=$u(m,a,p,0),g=$u(m,a,p,1)-Ad.P,x=Gu(m,a,p,u/s),b=Gu(m,a,p,1-h/s),v=new Path2D;e.beginPath(),v.moveTo(x.x,x.y),v.quadraticCurveTo(a.x,a.y,b.x,b.y),e.shadowColor=l.borderShadowColor,e.stroke(v),t.path=v,t.ctx=e,nh(e,x,{angle:f,adjust:u},c),nh(e,b,{angle:g,adjust:h},d)}(e,this,r,o),e.restore();const{startOpts:l,endOpts:c,startAdjust:d,endAdjust:u}=th(this),h=Math.atan2(n-a,s-t);e.translate(t,a),e.rotate(h),e.beginPath(),e.moveTo(0+d,0),e.lineTo(o-u,0),e.shadowColor=i.borderShadowColor,e.stroke(),sh(e,0,d,l),sh(e,o,-u,c),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,t){const a=ju(e,t),{x:s,y:n,x2:r,y2:i}=a,o=function(e,t){let{x:a,y:s,x2:n,y2:r}=e,{top:i,right:o,bottom:l,left:c}=t;return!(a<c&&n<c||a>o&&n>o||s<i&&r<i||s>l&&r>l)}(a,e.chartArea),l=o?function(e,t,a){const{x:s,y:n}=Ku(e,t,a),{x:r,y:i}=Ku(t,e,a);return{x:s,y:n,x2:r,y2:i,width:Math.abs(r-s),height:Math.abs(i-n)}}({x:s,y:n},{x:r,y:i},e.chartArea):{x:s,y:n,x2:r,y2:i,width:Math.abs(r-s),height:Math.abs(i-n)};if(l.centerX=(r+s)/2,l.centerY=(i+n)/2,l.initProperties=eu(e,l,t),t.curve){const e={x:l.x,y:l.y},a={x:l.x2,y:l.y2};l.cp=function(e,t,a){const{x:s,y:n,x2:r,y2:i,centerX:o,centerY:l}=e,c=Math.atan2(i-n,r-s),d=Xd(t.controlPoint,0);return Dd({x:o+Yd(a,d.x,!1),y:l+Yd(a,d.y,!1)},{x:o,y:l},c)}(l,t,(0,Ad.aF)(e,a))}const c=function(e,t,a){const s=a.borderWidth,n=(0,Ad.E)(a.padding),r=lu(e.ctx,a),i=r.width+n.width+s,o=r.height+n.height+s;return function(e,t,a,s){const{width:n,height:r,padding:i}=a,{xAdjust:o,yAdjust:l}=t,c={x:e.x,y:e.y},d={x:e.x2,y:e.y2},u="auto"===t.rotation?function(e){const{x:t,y:a,x2:s,y2:n}=e,r=Math.atan2(n-a,s-t);return r>Ad.P/2?r-Ad.P:r<Ad.P/-2?r+Ad.P:r}(e):(0,Ad.t)(t.rotation),h=function(e,t,a){const s=Math.cos(a),n=Math.sin(a);return{w:Math.abs(e*s)+Math.abs(t*n),h:Math.abs(e*n)+Math.abs(t*s)}}(n,r,u),m=function(e,t,a,s){let n;const r=function(e,t){const{x:a,x2:s,y:n,y2:r}=e,i=Math.min(n,r)-t.top,o=Math.min(a,s)-t.left,l=t.bottom-Math.max(n,r),c=t.right-Math.max(a,s);return{x:Math.min(o,c),y:Math.min(i,l),dx:o<=c?1:-1,dy:i<=l?1:-1}}(e,s);n="start"===t.position?Zu({w:e.x2-e.x,h:e.y2-e.y},a,t,r):"end"===t.position?1-Zu({w:e.x-e.x2,h:e.y-e.y2},a,t,r):Gd(1,t.position);return n}(e,t,{labelSize:h,padding:i},s),p=e.cp?Gu(c,e.cp,d,m):qu(c,d,m),f={size:h.w,min:s.left,max:s.right,padding:i.left},g={size:h.h,min:s.top,max:s.bottom,padding:i.top},x=eh(p.x,f)+o,b=eh(p.y,g)+l;return{x:x-n/2,y:b-r/2,x2:x+n/2,y2:b+r/2,centerX:x,centerY:b,pointX:p.x,pointY:p.y,width:n,height:r,rotation:(0,Ad.U)(u)}}(t,a,{width:i,height:o,padding:n},e.chartArea)}(e,l,t.label);return c._visible=o,l.elements=[{type:"label",optionScope:"label",properties:c,initProperties:l.initProperties}],l}}Xu.id="lineAnnotation";const Ju={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};function Ku(e,t,a){let{x:s,y:n}=e,{top:r,right:i,bottom:o,left:l}=a;return s<l&&(n=Hu(l,{x:s,y:n},t),s=l),s>i&&(n=Hu(i,{x:s,y:n},t),s=i),n<r&&(s=Uu(r,{x:s,y:n},t),n=r),n>o&&(s=Uu(o,{x:s,y:n},t),n=o),{x:s,y:n}}function Qu(e,t,a,s){let{mouseX:n,mouseY:r}=t;const i=e.label;return i.options.display&&i.inRange(n,r,s,a)}function Zu(e,t,a,s){const{labelSize:n,padding:r}=t,i=e.w*s.dx,o=e.h*s.dy,l=i>0&&(n.w/2+r.left-s.x)/i,c=o>0&&(n.h/2+r.top-s.y)/o;return Md(Math.max(l,c),0,.25)}function eh(e,t){const{size:a,min:s,max:n,padding:r}=t,i=a/2;return a>n-s?(n+s)/2:(s>=e-r-i&&(e=s+r+i),n<=e+r+i&&(e=n-r-i),e)}function th(e){const t=e.options,a=t.arrowHeads&&t.arrowHeads.start,s=t.arrowHeads&&t.arrowHeads.end;return{startOpts:a,endOpts:s,startAdjust:ah(e,a),endAdjust:ah(e,s)}}function ah(e,t){if(!t||!t.display)return 0;const{length:a,width:s}=t,n=e.options.borderWidth/2,r={x:a,y:s+n},i={x:0,y:n};return Math.abs(Uu(0,r,i))}function sh(e,t,a,s){if(!s||!s.display)return;const{length:n,width:r,fill:i,backgroundColor:o,borderColor:l}=s,c=Math.abs(t-n)+a;e.beginPath(),ou(e,s),iu(e,s),e.moveTo(c,-r),e.lineTo(t+a,0),e.lineTo(c,r),!0===i?(e.fillStyle=o||l,e.closePath(),e.fill(),e.shadowColor="transparent"):e.shadowColor=s.borderShadowColor,e.stroke()}function nh(e,t,a,s){let{x:n,y:r}=t,{angle:i,adjust:o}=a;s&&s.display&&(e.save(),e.translate(n,r),e.rotate(i),sh(e,0,-o,s),e.restore())}Xu.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},Ju),fill:!1,length:12,start:Object.assign({},Ju),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,hitTolerance:0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Bu.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,hitTolerance:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},Xu.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}},Xu.defaultRoutes={borderColor:"color"};class rh extends fd.Hg{inRange(e,t,a,s){const n=this.options.rotation,r=(this.options.borderWidth+this.options.hitTolerance)/2;if("x"!==a&&"y"!==a)return function(e,t,a,s){const{width:n,height:r,centerX:i,centerY:o}=t,l=n/2,c=r/2;if(l<=0||c<=0)return!1;const d=(0,Ad.t)(a||0),u=Math.cos(d),h=Math.sin(d),m=Math.pow(u*(e.x-i)+h*(e.y-o),2),p=Math.pow(h*(e.x-i)-u*(e.y-o),2);return m/Math.pow(l+s,2)+p/Math.pow(c+s,2)<=1.0001}({x:e,y:t},this.getProps(["width","height","centerX","centerY"],s),n,r);const{x:i,y:o,x2:l,y2:c}=this.getProps(["x","y","x2","y2"],s),d="y"===a?{start:o,end:c}:{start:i,end:l},u=Dd({x:e,y:t},this.getCenterPoint(s),(0,Ad.t)(-n));return u[a]>=d.start-r-Td&&u[a]<=d.end+r+Td}getCenterPoint(e){return Bd(this,e)}draw(e){const{width:t,height:a,centerX:s,centerY:n,options:r}=this;e.save(),ru(e,this.getCenterPoint(),r.rotation),ou(e,this.options),e.beginPath(),e.fillStyle=r.backgroundColor;const i=iu(e,r);e.ellipse(s,n,a/2,t/2,Ad.P/2,0,2*Ad.P),e.fill(),i&&(e.shadowColor=r.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,t){return Nu(e,t)}}rh.id="ellipseAnnotation",rh.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,label:Object.assign({},Fu.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0},rh.defaultRoutes={borderColor:"color",backgroundColor:"color"},rh.descriptors={label:{_fallback:!0}};class ih extends fd.Hg{inRange(e,t,a,s){const{x:n,y:r,x2:i,y2:o,width:l}=this.getProps(["x","y","x2","y2","width"],s),c=(this.options.borderWidth+this.options.hitTolerance)/2;if("x"!==a&&"y"!==a)return function(e,t,a,s){return!(!e||!t||a<=0)&&Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<=Math.pow(a+s,2)}({x:e,y:t},this.getCenterPoint(s),l/2,c);return Rd("y"===a?{start:r,end:o,value:t}:{start:n,end:i,value:e},c)}getCenterPoint(e){return Bd(this,e)}draw(e){const t=this.options,a=t.borderWidth;if(t.radius<.1)return;e.save(),e.fillStyle=t.backgroundColor,ou(e,t);const s=iu(e,t);uu(e,this,this.centerX,this.centerY),s&&!nu(t.pointStyle)&&(e.shadowColor=t.borderShadowColor,e.stroke()),e.restore(),t.borderWidth=a}resolveElementProperties(e,t){const a=yu(e,t);return a.initProperties=eu(e,a,t),a}}ih.id="pointAnnotation",ih.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},ih.defaultRoutes={borderColor:"color",backgroundColor:"color"};class oh extends fd.Hg{inRange(e,t,a,s){if("x"!==a&&"y"!==a)return this.options.radius>=.1&&this.elements.length>1&&function(e,t,a,s){let n=!1,r=e[e.length-1].getProps(["bX","bY"],s);for(const i of e){const e=i.getProps(["bX","bY"],s);e.bY>a!==r.bY>a&&t<(r.bX-e.bX)*(a-e.bY)/(r.bY-e.bY)+e.bX&&(n=!n),r=e}return n}(this.elements,e,t,s);const n=Dd({x:e,y:t},this.getCenterPoint(s),(0,Ad.t)(-this.options.rotation)),r=this.elements.map((e=>"y"===a?e.bY:e.bX)),i=Math.min(...r),o=Math.max(...r);return n[a]>=i&&n[a]<=o}getCenterPoint(e){return Bd(this,e)}draw(e){const{elements:t,options:a}=this;e.save(),e.beginPath(),e.fillStyle=a.backgroundColor,ou(e,a);const s=iu(e,a);let n=!0;for(const r of t)n?(e.moveTo(r.x,r.y),n=!1):e.lineTo(r.x,r.y);e.closePath(),e.fill(),s&&(e.shadowColor=a.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,t){const a=yu(e,t),{sides:s,rotation:n}=t,r=[],i=2*Ad.P/s;let o=n*Ad.b4;for(let l=0;l<s;l++,o+=i){const s=lh(a,t,o);s.initProperties=eu(e,a,t),r.push(s)}return a.elements=r,a}}function lh(e,t,a){let{centerX:s,centerY:n}=e,{radius:r,borderWidth:i,hitTolerance:o}=t;const l=(i+o)/2,c=Math.sin(a),d=Math.cos(a),u={x:s+c*r,y:n-d*r};return{type:"point",optionScope:"point",properties:{x:u.x,y:u.y,centerX:u.x,centerY:u.y,bX:s+c*(r+l),bY:n-d*(r+l)}}}oh.id="polygonAnnotation",oh.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,hitTolerance:0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0},oh.defaultRoutes={borderColor:"color",backgroundColor:"color"};const ch={box:Fu,doughnutLabel:zu,ellipse:rh,label:Bu,line:Xu,point:ih,polygon:oh};Object.keys(ch).forEach((e=>{Ad.d.describe("elements.".concat(ch[e].id),{_fallback:"plugins.annotation.common"})}));const dh={update:Object.assign},uh=ku.concat(Lu),hh=(e,t)=>(0,Ad.i)(t)?yh(e,t):e,mh=e=>"color"===e||"font"===e;function ph(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"line";return ch[e]?e:(console.warn("Unknown annotation type: '".concat(e,"', defaulting to 'line'")),"line")}function fh(e,t,a,s){const n=function(e,t,a){if("reset"===a||"none"===a||"resize"===a)return dh;return new fd.Qw(e,t)}(e,a.animations,s),r=t.annotations,i=function(e,t){const a=t.length,s=e.length;if(s<a){const t=a-s;e.splice(s,0,...new Array(t))}else s>a&&e.splice(a,s-a);return e}(t.elements,r);for(let o=0;o<r.length;o++){const t=r[o],a=bh(i,o,t.type),s=t.setContext(jh(e,a,i,t)),l=a.resolveElementProperties(e,s);l.skip=gh(l),"elements"in l&&(xh(a,l.elements,s,n),delete l.elements),(0,Ad.h)(a.x)||Object.assign(a,l),Object.assign(a,l.initProperties),l.options=vh(s),n.update(a,l)}}function gh(e){return isNaN(e.x)||isNaN(e.y)}function xh(e,t,a,s){const n=e.elements||(e.elements=[]);n.length=t.length;for(let r=0;r<t.length;r++){const e=t[r],i=e.properties,o=bh(n,r,e.type,e.initProperties),l=a[e.optionScope].override(e);i.options=vh(l),s.update(o,i)}}function bh(e,t,a,s){const n=ch[ph(a)];let r=e[t];return r&&r instanceof n||(r=e[t]=new n,Object.assign(r,s)),r}function vh(e){const t=ch[ph(e.type)],a={};a.id=e.id,a.type=e.type,a.drawTime=e.drawTime,Object.assign(a,yh(e,t.defaults),yh(e,t.defaultRoutes));for(const s of uh)a[s]=e[s];return a}function yh(e,t){const a={};for(const s of Object.keys(t)){const n=t[s],r=e[s];mh(s)&&(0,Ad.b)(r)?a[s]=r.map((e=>hh(e,n))):a[s]=hh(r,n)}return a}function jh(e,t,a,s){return t.$context||(t.$context=Object.assign(Object.create(e.getContext()),{element:t,get elements(){return a.filter((e=>e&&e.options))},id:s.id,type:"annotation"}))}const Nh=new Map,wh=e=>"doughnutLabel"!==e.type,_h=ku.concat(Lu);var Sh={id:"annotation",version:"3.1.0",beforeRegister(){!function(e,t,a){let s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const n=a.split(".");let r=0;for(const i of t.split(".")){const o=n[r++];if(parseInt(i,10)<parseInt(o,10))break;if(Od(o,i)){if(s)throw new Error("".concat(e," v").concat(a," is not supported. v").concat(t," or newer is required."));return!1}}}("chart.js","4.0",fd.t1.version)},afterRegister(){fd.t1.register(ch)},afterUnregister(){fd.t1.unregister(ch)},beforeInit(e){Nh.set(e,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(e,t,a){const s=Nh.get(e).annotations=[];let n=a.annotations;(0,Ad.i)(n)?Object.keys(n).forEach((e=>{const t=n[e];(0,Ad.i)(t)&&(t.id=e,s.push(t))})):(0,Ad.b)(n)&&s.push(...n),function(e,t){for(const a of e)Mu(a,t)}(s.filter(wh),e.scales)},afterDataLimits(e,t){const a=Nh.get(e);Ou(e,t.scale,a.annotations.filter(wh).filter((e=>e.display&&e.adjustScaleRange)))},afterUpdate(e,t,a){const s=Nh.get(e);!function(e,t,a){t.listened=tu(a,ku,t.listeners),t.moveListened=!1,Cu.forEach((e=>{(0,Ad.a7)(a[e])&&(t.moveListened=!0)})),t.listened&&t.moveListened||t.annotations.forEach((e=>{!t.listened&&(0,Ad.a7)(e.click)&&(t.listened=!0),t.moveListened||Cu.forEach((a=>{(0,Ad.a7)(e[a])&&(t.listened=!0,t.moveListened=!0)}))}))}(0,s,a),fh(e,s,a,t.mode),s.visibleElements=s.elements.filter((e=>!e.skip&&e.options.display)),function(e,t,a){const s=t.visibleElements;t.hooked=tu(a,Lu,t.hooks),t.hooked||s.forEach((e=>{t.hooked||Lu.forEach((a=>{(0,Ad.a7)(e.options[a])&&(t.hooked=!0)}))}))}(0,s,a)},beforeDatasetsDraw(e,t,a){Ch(e,"beforeDatasetsDraw",a.clip)},afterDatasetsDraw(e,t,a){Ch(e,"afterDatasetsDraw",a.clip)},beforeDatasetDraw(e,t,a){Ch(e,t.index,a.clip)},beforeDraw(e,t,a){Ch(e,"beforeDraw",a.clip)},afterDraw(e,t,a){Ch(e,"afterDraw",a.clip)},beforeEvent(e,t,a){Au(Nh.get(e),t.event,a)&&(t.changed=!0)},afterDestroy(e){Nh.delete(e)},getAnnotations(e){const t=Nh.get(e);return t?t.elements:[]},_getAnnotationElementsAtEventForMode:(e,t,a)=>Ed(e,t,a),defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"},colors:{properties:["backgroundColor","borderColor"],type:"color"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:e=>!_h.includes(e)&&"init"!==e,annotations:{_allKeys:!1,_fallback:(e,t)=>"elements.".concat(ch[ph(t.type)].id)},interaction:{_fallback:!0},common:{label:{_indexable:mh,_fallback:!0},_indexable:mh}},additionalOptionScopes:[""]};function Ch(e,t,a){const{ctx:s,chartArea:n}=e,r=Nh.get(e);a&&(0,Ad.Y)(s,n);const i=function(e,t){const a=[];for(const s of e)if(s.options.drawTime===t&&a.push({element:s,main:!0}),s.elements&&s.elements.length)for(const e of s.elements)e.options.display&&e.options.drawTime===t&&a.push({element:e});return a}(r.visibleElements,t).sort(((e,t)=>e.element.options.z-t.element.options.z));for(const o of i)kh(s,n,r,o);a&&(0,Ad.$)(s)}function kh(e,t,a,s){const n=s.element;s.main?(Du(a,n,"beforeDraw"),n.draw(e,t),Du(a,n,"afterDraw")):n.draw(e,t)}const Ah=e=>{let{selectedLevel:t,onLevelChange:a,disabled:n=!1}=e;const[r,i]=(0,s.useState)([]),[o,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null);(0,s.useEffect)((()=>{m()}),[]);const m=async()=>{try{d(!0);const e=await(0,st.O9)();i(e)}catch(Ff){console.error("Erro ao carregar n\xedveis de prompting:",Ff),h("Erro ao carregar n\xedveis de prompting")}finally{d(!1)}};if(c)return(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xedvel de Prompting"}),(0,We.jsx)("div",{className:"animate-pulse bg-gray-200 h-10 rounded-lg"})]});if(u)return(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xedvel de Prompting"}),(0,We.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-red-700 text-sm",children:u})]});const p=r.find((e=>e.id===t));return(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xedvel de Prompting Atual"}),(0,We.jsxs)("div",{className:"group relative",children:[(0,We.jsx)(Vn,{icon:_i,className:"text-blue-500 text-xs cursor-help"}),(0,We.jsx)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none w-48 z-10",children:"Define o n\xedvel de ajuda necess\xe1rio para a crian\xe7a realizar a tarefa"})]})]}),(0,We.jsxs)("div",{className:"relative",children:[(0,We.jsxs)("button",{type:"button",onClick:()=>!n&&l(!o),disabled:n,className:"w-full px-3 py-2 border rounded-lg shadow-sm text-left flex items-center justify-between transition-colors ".concat(n?"bg-gray-100 border-gray-300 text-gray-500 cursor-not-allowed":"bg-white border-gray-300 hover:border-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"),children:[(0,We.jsx)("div",{className:"flex items-center space-x-3",children:p&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:p.color}}),(0,We.jsx)("span",{className:"font-medium",children:p.name}),(0,We.jsxs)("span",{className:"text-gray-500 text-sm",children:["(N\xedvel ",p.id,")"]})]})}),(0,We.jsx)(Vn,{icon:Qi,className:"text-gray-400 transition-transform ".concat(o?"rotate-180":"")})]}),o&&!n&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>l(!1)}),(0,We.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-lg shadow-lg z-20 max-h-64 overflow-y-auto",children:r.map((e=>(0,We.jsx)("button",{type:"button",onClick:()=>{return t=e.id,a(t),void l(!1);var t},className:"w-full px-3 py-3 text-left hover:bg-gray-50 transition-colors border-b border-gray-100 last:border-b-0 ".concat(t===e.id?"bg-indigo-50 text-indigo-700":""),children:(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,We.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"font-medium",children:e.name}),(0,We.jsxs)("span",{className:"text-gray-500 text-sm",children:["(N\xedvel ",e.id,")"]}),5===e.id&&(0,We.jsx)("span",{className:"text-yellow-500",children:"\u2b50"})]}),(0,We.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:e.description})]})]})},e.id)))})]})]}),p&&(0,We.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[(0,We.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,We.jsx)("strong",{children:"Descri\xe7\xe3o:"})," ",p.description]}),5===p.id&&(0,We.jsxs)("div",{className:"text-xs text-amber-600 mt-1 flex items-center space-x-1",children:[(0,We.jsx)("span",{children:"\u2b50"}),(0,We.jsx)("span",{children:"Apenas este n\xedvel conta para crit\xe9rio de dom\xednio (80%+)"})]})]})]})},Ph=[{value:"dtt",label:"DTT (Discrete Trial Training)",description:"Tentativas Discretas"},{value:"net",label:"NET (Natural Environment Teaching)",description:"Ensino no Ambiente Natural"},{value:"incidental",label:"Incidental Teaching",description:"Ensino Incidental"},{value:"structured_play",label:"Structured Play",description:"Brincadeira Estruturada"},{value:"group_instruction",label:"Group Instruction",description:"Instru\xe7\xe3o em Grupo"}];fd.t1.register(fd.PP,fd.kc,fd.FN,fd.No,fd.hE,fd.m_,fd.s$,fd.dN,Sh);const Eh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long";if(!e)return"N/A";const a=new Date(e);if(isNaN(a.getTime()))return"Data inv\xe1lida";const s=6e4*a.getTimezoneOffset(),n="short"===t?{day:"2-digit",month:"2-digit"}:{day:"2-digit",month:"2-digit",year:"numeric"};return new Date(a.getTime()+s).toLocaleDateString("pt-BR",n)},Lh=e=>{let{program:t,assignment:a}=e;const{user:n}=Ye(),{selectedPatient:r,getPromptLevelForProgram:i,setPromptLevelForProgram:o}=dt(),[l,c]=(0,s.useState)((new Date).toISOString().split("T")[0]),[d,u]=(0,s.useState)((null===t||void 0===t?void 0:t.trials)||(null===t||void 0===t?void 0:t.default_trials)||""),[h,m]=(0,s.useState)(""),[p,f]=(0,s.useState)(""),[g,x]=(0,s.useState)(!1),[b,v]=(0,s.useState)(""),[y,j]=(0,s.useState)(null),[N,w]=(0,s.useState)(!0);(0,s.useEffect)((()=>{(async()=>{if(r&&t){const e=t.program_id||t.id;if(e){w(!0);try{console.log("[SESSION-PROGRESS] Carregando prompt level para paciente ".concat(r.id,", programa ").concat(e));const t=await i(r.id,e);j(t),console.log("[SESSION-PROGRESS] Prompt level carregado: ".concat(t))}catch(A){console.error("[SESSION-PROGRESS] Erro ao carregar prompt level:",A),j(5)}finally{w(!1)}}}})()}),[r,t,i]);const[_,S]=(0,s.useState)(!1),[C,k]=(0,s.useState)(!1),[A,P]=(0,s.useState)(""),[E,L]=(0,s.useState)([]),[D,O]=(0,s.useState)(!0),[T,M]=(0,s.useState)({objective:!0,skill:!1,materials:!1,procedure:!1,advancement:!1}),R=e=>{M((t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:!t[e]})))},I=(0,s.useMemo)((()=>{if(null===t||void 0===t||!t.procedure)return[];try{return"string"===typeof t.procedure?JSON.parse(t.procedure):t.procedure}catch(If){return[]}}),[t]),F=(0,s.useCallback)((async()=>{if(null!==a&&void 0!==a&&a.assignment_id){O(!0);try{const e=await(0,st.v2)(a.assignment_id),t=Array.isArray(e)?e:[];L(t)}catch(Ff){P("N\xe3o foi poss\xedvel carregar o hist\xf3rico de progresso.")}finally{O(!1)}}}),[a]),z=(0,s.useCallback)((async e=>{const s=(null===t||void 0===t?void 0:t.program_id)||(null===t||void 0===t?void 0:t.id),n=(null===a||void 0===a?void 0:a.assignment_id)||(null===a||void 0===a?void 0:a.id);if(r&&t&&s&&n){j(e);try{console.log("[SESSION-PROGRESS] Atualizando prompt level para ".concat(e)),await o(r.id,s,e,n),console.log("[SESSION-PROGRESS] Prompt level ".concat(e," salvo com sucesso"))}catch(A){console.error("[SESSION-PROGRESS] Erro ao salvar prompt level:",A);try{const e=await i(r.id,s);j(e),console.log("[SESSION-PROGRESS] Prompt level revertido para valor do banco: ".concat(e))}catch(l){console.error("[SESSION-PROGRESS] Erro ao recarregar prompt level:",l),j(5)}}}else console.error("[SESSION-PROGRESS] Dados insuficientes para atualizar prompt level")}),[r,t,a,o,i]);(0,s.useEffect)((()=>{if(!t||!a)return L([]),void O(!1);F(),u(t.trials||t.default_trials||"")}),[t,a,F,I,r,i]);const B={labels:E.map((e=>e.session_date)),datasets:[{label:"Pontua\xe7\xe3o (%)",data:E.map((e=>{const t=parseFloat(e.score);return isNaN(t)?0:t})),borderColor:"#4f46e5",backgroundColor:e=>{const t=e.chart,{ctx:a,chartArea:s}=t;if(!s)return"rgba(79, 70, 229, 0.1)";const n=a.createLinearGradient(0,s.top,0,s.bottom);return n.addColorStop(0,"rgba(99, 102, 241, 0.3)"),n.addColorStop(.5,"rgba(79, 70, 229, 0.2)"),n.addColorStop(1,"rgba(67, 56, 202, 0.1)"),n},borderWidth:3,pointRadius:E.map((e=>{var t;return null!==(t=e.details)&&void 0!==t&&t.isBaseline?8:6})),pointBackgroundColor:E.map((e=>{var t,a;return null!==(t=e.details)&&void 0!==t&&t.isBaseline?"#f59e0b":null!==(a=e.details)&&void 0!==a&&a.promptLevelColor?e.details.promptLevelColor:"#4f46e5"})),pointBorderColor:E.map((e=>{var t;return null!==(t=e.details)&&void 0!==t&&t.isBaseline?"#f59e0b":"#ffffff"})),pointBorderWidth:E.map((e=>{var t;return null!==(t=e.details)&&void 0!==t&&t.isBaseline?4:2})),pointHoverRadius:E.map((e=>{var t;return null!==(t=e.details)&&void 0!==t&&t.isBaseline?10:8})),pointHoverBorderWidth:3,pointStyle:E.map((e=>{var t;return null!==(t=e.details)&&void 0!==t&&t.isBaseline?"star":"circle"})),fill:!0,tension:.4,shadowColor:"rgba(79, 70, 229, 0.3)",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:4}]},q={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#e5e7eb",borderColor:"#4f46e5",borderWidth:2,padding:16,cornerRadius:12,displayColors:!1,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{title:e=>{var t;const a=e[0].dataIndex,s=E[a],n=null===s||void 0===s||null===(t=s.details)||void 0===t?void 0:t.isBaseline,r=Eh(e[0].label);let i="Sess\xe3o de ".concat(r);return i=n?"\ud83d\udccb [LINHA DE BASE] ".concat(i):"\ud83d\udcc8 ".concat(i),i},label:e=>{const t=e.parsed.y.toFixed(1);return"\ud83c\udfaf Pontua\xe7\xe3o: ".concat(t,"%")},afterLabel:e=>{var t;if(!e||void 0===e.dataIndex)return"";const a=e.dataIndex,s=E[a],n=(null===s||void 0===s?void 0:s.attempts)||0,r=(null===s||void 0===s?void 0:s.successes)||0;let i=["\ud83d\udcca Acertos: ".concat(r,"/").concat(n)];return null!==s&&void 0!==s&&null!==(t=s.details)&&void 0!==t&&t.promptLevelName&&i.push("\ud83c\udfaf N\xedvel: ".concat(s.details.promptLevelName)),s&&s.therapist_name&&""!==s.therapist_name.trim()?i.push("\ud83d\udc68\u200d\u2695\ufe0f Terapeuta: ".concat(s.therapist_name)):s&&s.therapist_id&&null!==s.therapist_id&&i.push("\ud83d\udc68\u200d\u2695\ufe0f Terapeuta ID: ".concat(s.therapist_id)),i},afterBody:e=>{var t;if(!e||!e[0]||void 0===e[0].dataIndex)return"";const a=e[0].dataIndex,s=E[a],r=null===s||void 0===s||null===(t=s.details)||void 0===t?void 0:t.notes;let i=[];if(r&&(i.push("\n\ud83d\udcdd Observa\xe7\xf5es:"),i.push("".concat(r))),n&&("therapist"===n.role||"terapeuta"===n.role||"admin"===n.role||"administrador"===n.role)&&null!==s&&void 0!==s&&s.created_at){const e=new Date(s.created_at).toLocaleString("pt-BR");i.push("\n\ud83d\udcc5 Registrado: ".concat(e))}return i.length>0?i:""}}},annotation:{annotations:{goalLine:{type:"line",yMin:80,yMax:80,borderColor:"#10b981",borderWidth:3,borderDash:[8,4],label:{content:"\ud83c\udfaf Meta (80%)",position:"end",backgroundColor:"rgba(16, 185, 129, 0.9)",font:{size:12,weight:"bold"},color:"white",padding:8,borderRadius:6,yAdjust:-10}}}}},scales:{x:{display:!0,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:11,weight:500},maxTicksLimit:8,callback:function(e){const t=this.getLabelForValue(e);return Eh(t,"short")}},border:{display:!1}},y:{display:!0,beginAtZero:!0,max:105,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{color:"#6b7280",font:{size:11,weight:500},stepSize:20,callback:e=>e>=0&&e<=100?"".concat(e,"%"):""},border:{display:!1}}}};return t&&a?(0,We.jsxs)("div",{children:[(0,We.jsxs)("div",{className:"mb-6 space-y-3",children:[(null===t||void 0===t?void 0:t.objective)&&(0,We.jsxs)("div",{className:"bg-white border-2 border-blue-200 rounded-xl shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md",children:[(0,We.jsxs)("button",{onClick:()=>R("objective"),className:"w-full bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-4 flex items-center justify-between transition-colors hover:from-blue-100 hover:to-indigo-100",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-2 rounded-full",children:(0,We.jsx)(Vn,{icon:_r,className:"text-white text-sm"})}),(0,We.jsx)("h5",{className:"font-bold text-blue-800 text-sm sm:text-base",children:"Objetivo do Programa"})]}),(0,We.jsx)(Vn,{icon:T.objective?Nr:Qi,className:"text-blue-600 text-sm"})]}),T.objective&&(0,We.jsx)("div",{className:"px-4 py-4 bg-gradient-to-r from-blue-50/30 to-indigo-50/30 border-t-2 border-blue-100",children:(0,We.jsx)("p",{className:"text-blue-900 leading-relaxed text-sm sm:text-base",children:t.objective})})]}),(null===t||void 0===t?void 0:t.skill)&&(0,We.jsxs)("div",{className:"bg-white border-2 border-purple-200 rounded-xl shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md",children:[(0,We.jsxs)("button",{onClick:()=>R("skill"),className:"w-full bg-gradient-to-r from-purple-50 to-violet-50 px-4 py-4 flex items-center justify-between transition-colors hover:from-purple-100 hover:to-violet-100",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-purple-500 to-violet-600 p-2 rounded-full",children:(0,We.jsx)(Vn,{icon:Ai,className:"text-white text-sm"})}),(0,We.jsx)("h5",{className:"font-bold text-purple-800 text-sm sm:text-base",children:"Habilidade Trabalhada"})]}),(0,We.jsx)(Vn,{icon:T.skill?Nr:Qi,className:"text-purple-600 text-sm"})]}),T.skill&&(0,We.jsx)("div",{className:"px-4 py-4 bg-gradient-to-r from-purple-50/30 to-violet-50/30 border-t-2 border-purple-100",children:(0,We.jsx)("p",{className:"text-purple-900 leading-relaxed text-sm sm:text-base whitespace-pre-wrap",children:t.skill})})]}),(null===t||void 0===t?void 0:t.materials)&&t.materials.length>0&&(0,We.jsxs)("div",{className:"bg-white border-2 border-amber-200 rounded-xl shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md",children:[(0,We.jsxs)("button",{onClick:()=>R("materials"),className:"w-full bg-gradient-to-r from-amber-50 to-orange-50 px-4 py-4 flex items-center justify-between transition-colors hover:from-amber-100 hover:to-orange-100",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-amber-500 to-orange-600 p-2 rounded-full",children:(0,We.jsx)(Vn,{icon:Lr,className:"text-white text-sm"})}),(0,We.jsxs)("h5",{className:"font-bold text-amber-800 text-sm sm:text-base",children:["Materiais Necess\xe1rios",(0,We.jsx)("span",{className:"ml-2 bg-amber-100 text-amber-700 px-2 py-0.5 rounded-full text-xs font-semibold",children:Array.isArray(t.materials)?t.materials.length:JSON.parse(t.materials||"[]").length})]})]}),(0,We.jsx)(Vn,{icon:T.materials?Nr:Qi,className:"text-amber-600 text-sm"})]}),T.materials&&(0,We.jsx)("div",{className:"px-4 py-4 bg-gradient-to-r from-amber-50/30 to-orange-50/30 border-t-2 border-amber-100",children:(0,We.jsx)("ul",{className:"space-y-2",children:(Array.isArray(t.materials)?t.materials:JSON.parse(t.materials||"[]")).map(((e,t)=>(0,We.jsxs)("li",{className:"flex items-start text-sm sm:text-base",children:[(0,We.jsx)("span",{className:"inline-block w-2 h-2 bg-amber-500 rounded-full mt-2 mr-3 flex-shrink-0"}),(0,We.jsx)("span",{className:"text-amber-900 leading-relaxed",children:e})]},t)))})})]}),I&&I.length>0&&(0,We.jsxs)("div",{className:"bg-white border-2 border-emerald-200 rounded-xl shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md",children:[(0,We.jsxs)("button",{onClick:()=>R("procedure"),className:"w-full bg-gradient-to-r from-emerald-50 to-teal-50 px-4 py-4 flex items-center justify-between transition-colors hover:from-emerald-100 hover:to-teal-100",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 p-2 rounded-full",children:(0,We.jsx)(Vn,{icon:ei,className:"text-white text-sm"})}),(0,We.jsxs)("h5",{className:"font-bold text-emerald-800 text-sm sm:text-base",children:["Procedimento",(0,We.jsxs)("span",{className:"ml-2 bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full text-xs font-semibold",children:[I.length," ",1===I.length?"passo":"passos"]})]})]}),(0,We.jsx)(Vn,{icon:T.procedure?Nr:Qi,className:"text-emerald-600 text-sm"})]}),T.procedure&&(0,We.jsx)("div",{className:"px-4 py-4 bg-gradient-to-r from-emerald-50/30 to-teal-50/30 border-t-2 border-emerald-100",children:(0,We.jsx)("div",{className:"space-y-4",children:I.map(((e,t)=>(0,We.jsx)("div",{className:"bg-white border-l-4 border-emerald-400 rounded-r-lg p-4 shadow-sm",children:(0,We.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0",children:t+1}),(0,We.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,We.jsx)("h6",{className:"font-bold text-emerald-900 mb-2 text-sm sm:text-base break-words",children:e.name||e.step_name||"Passo ".concat(t+1)}),(0,We.jsx)("p",{className:"text-emerald-800 leading-relaxed text-sm whitespace-pre-wrap break-words",children:e.description||e.step_description||"Sem descri\xe7\xe3o"})]})]})},t)))})})]}),(null===t||void 0===t?void 0:t.advancement_criterion)&&(0,We.jsxs)("div",{className:"bg-white border-2 border-green-200 rounded-xl shadow-sm overflow-hidden transition-all duration-200 hover:shadow-md",children:[(0,We.jsxs)("button",{onClick:()=>R("advancement"),className:"w-full bg-gradient-to-r from-green-50 to-emerald-50 px-4 py-4 flex items-center justify-between transition-colors hover:from-green-100 hover:to-emerald-100",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-2 rounded-full",children:(0,We.jsx)(Vn,{icon:go,className:"text-white text-sm"})}),(0,We.jsx)("h5",{className:"font-bold text-green-800 text-sm sm:text-base",children:"Crit\xe9rio de Avan\xe7o"})]}),(0,We.jsx)(Vn,{icon:T.advancement?Nr:Qi,className:"text-green-600 text-sm"})]}),T.advancement&&(0,We.jsx)("div",{className:"px-4 py-4 bg-gradient-to-r from-green-50/30 to-emerald-50/30 border-t-2 border-green-100",children:(0,We.jsx)("p",{className:"text-green-900 leading-relaxed text-sm sm:text-base whitespace-pre-wrap",children:t.advancement_criterion})})]})]}),(0,We.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden mb-8",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-indigo-200 px-6 py-4",children:[(0,We.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,We.jsx)("div",{className:"bg-indigo-100 p-2 rounded-full mr-3",children:(0,We.jsx)(Vn,{icon:di,className:"text-indigo-600"})}),"Registrar Nova Sess\xe3o"]}),(0,We.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Insira os dados da sess\xe3o para acompanhar o progresso"})]}),(0,We.jsxs)("form",{onSubmit:async e=>{e.preventDefault();const t=parseInt(d,10),s=parseInt(h,10);if(isNaN(t)||t<=0)return void P("O n\xfamero de tentativas \xe9 inv\xe1lido.");if(isNaN(s)||s<0||s>t)return void P("O n\xfamero de acertos deve ser entre 0 e ".concat(t,"."));if(!b)return void P("Por favor, selecione uma modalidade de ensino.");P(""),S(!0),k(!1);const n=t>0?s/t*100:0,r={assignment_id:a.assignment_id,step_id:null,session_date:l,attempts:t,successes:s,score:parseFloat(n.toFixed(2)),details:{notes:p,isBaseline:g,promptLevel:y,teachingModality:b}};try{await(0,st.lF)(r),m(""),f(""),x(!1),v(""),k(!0),F(),setTimeout((()=>k(!1)),2e3)}catch(Ff){var i,o;P((null===(i=Ff.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||"Ocorreu um erro ao salvar a sess\xe3o.")}finally{S(!1)}},className:"p-6 space-y-6",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-6",children:[(0,We.jsxs)("h4",{className:"text-sm font-semibold text-blue-700 mb-4 flex items-center",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full mr-2"}),"Informa\xe7\xf5es da Sess\xe3o"]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{htmlFor:"session-date",className:"block text-sm font-medium text-blue-700 mb-2",children:"Data da Sess\xe3o"}),(0,We.jsx)("input",{type:"date",id:"session-date",required:!0,value:l,onChange:e=>c(e.target.value),className:"w-full px-4 py-3 border border-blue-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{htmlFor:"teaching-modality",className:"block text-sm font-medium text-blue-700 mb-2",children:"Modalidade de Ensino"}),(0,We.jsxs)("select",{id:"teaching-modality",value:b,onChange:e=>v(e.target.value),required:!0,className:"w-full px-4 py-3 border border-blue-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all bg-white",children:[(0,We.jsx)("option",{value:"",disabled:!0,children:"Selecione a modalidade"}),Ph.map((e=>(0,We.jsx)("option",{value:e.value,title:e.description,children:e.label},e.value)))]})]})]})]}),(0,We.jsxs)("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl p-6",children:[(0,We.jsxs)("h4",{className:"text-sm font-semibold text-emerald-700 mb-4 flex items-center",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-emerald-500 to-teal-600 rounded-full mr-2"}),"Dados da Sess\xe3o"]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{htmlFor:"session-attempts",className:"block text-sm font-medium text-emerald-700 mb-2",children:"Tentativas"}),(0,We.jsx)("input",{type:"number",id:"session-attempts",value:d,readOnly:!0,className:"w-full px-4 py-3 border border-emerald-200 rounded-xl shadow-sm bg-emerald-100/50 cursor-not-allowed text-emerald-800 font-medium"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{htmlFor:"session-successes",className:"block text-sm font-medium text-emerald-700 mb-2",children:"Acertos"}),(0,We.jsx)("input",{type:"number",id:"session-successes",value:h,onChange:e=>m(e.target.value),min:"0",step:"1",required:!0,placeholder:"Ex: 8",className:"w-full px-4 py-3 border border-emerald-300 rounded-xl shadow-sm focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500 transition-all bg-white"})]})]})]}),(0,We.jsxs)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-6",children:[(0,We.jsxs)("label",{htmlFor:"session-notes",className:"block text-sm font-medium text-amber-700 mb-3 flex items-center",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-amber-500 to-orange-600 rounded-full mr-2"}),"Observa\xe7\xf5es da Sess\xe3o"]}),(0,We.jsx)("textarea",{id:"session-notes",value:p,onChange:e=>f(e.target.value),rows:"4",placeholder:"Registre observa\xe7\xf5es importantes sobre a sess\xe3o: comportamento, estrat\xe9gias utilizadas, contexto, etc...",className:"w-full px-4 py-3 border border-amber-300 rounded-xl shadow-sm focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-all bg-white resize-none"})]}),(0,We.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-xl p-6",children:[(0,We.jsxs)("h4",{className:"text-sm font-semibold text-purple-700 mb-4 flex items-center",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-full mr-2"}),"N\xedvel de Suporte e Configura\xe7\xf5es"]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,We.jsx)("div",{children:N?(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"N\xedvel de Prompting"}),(0,We.jsx)("div",{className:"animate-pulse bg-gray-200 h-10 rounded-lg flex items-center justify-center",children:(0,We.jsx)("span",{className:"text-gray-500 text-sm",children:"Carregando..."})})]}):(0,We.jsx)(Ah,{selectedLevel:y,onLevelChange:z,disabled:_})}),(0,We.jsx)("div",{className:"flex items-center justify-start lg:justify-center pt-2 lg:pt-8",children:(0,We.jsxs)("div",{className:"flex items-center space-x-3 bg-white border border-purple-200 rounded-xl px-4 py-3 shadow-sm",children:[(0,We.jsx)("input",{type:"checkbox",id:"is-baseline",checked:g,onChange:e=>x(e.target.checked),className:"h-4 w-4 text-purple-600 border-purple-300 rounded focus:ring-purple-500 transition-all"}),(0,We.jsx)("label",{htmlFor:"is-baseline",className:"block text-sm font-medium text-purple-700 cursor-pointer",children:"Marcar como Linha de Base"})]})})]})]}),(0,We.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border border-gray-200 rounded-xl p-6",children:(0,We.jsx)("div",{className:"flex items-center justify-end",children:(0,We.jsxs)("button",{type:"submit",disabled:_,className:"\n                  font-semibold py-4 px-8 rounded-xl text-sm transition-all duration-300 flex items-center justify-center min-w-[200px] shadow-lg transform hover:scale-105 disabled:hover:scale-100 border-2\n                  ".concat(C?"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white shadow-green-200 border-green-300":"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white shadow-indigo-200 border-indigo-300 disabled:from-gray-300 disabled:to-gray-400 disabled:border-gray-300","\n                "),children:[(0,We.jsx)("div",{className:"bg-white bg-opacity-20 p-2 rounded-full mr-3",children:(0,We.jsx)(Vn,{icon:_?xo:C?Do:di,className:"text-base ".concat(_&&"fa-spin")})}),(0,We.jsx)("span",{className:"text-base",children:_?"Salvando...":C?"Salvo com Sucesso!":"Salvar Sess\xe3o"})]})})}),A&&(0,We.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-500 p-4 rounded-r-lg",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:_r,className:"text-red-600 mt-1 mr-3"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-red-800 font-medium mb-1",children:"Erro na Sess\xe3o"}),(0,We.jsx)("p",{className:"text-red-700 text-sm",children:A})]})]})})]})]}),(0,We.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border-b border-emerald-200 px-6 py-4",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,We.jsx)("div",{className:"bg-emerald-100 p-2 rounded-full mr-3",children:(0,We.jsx)(Vn,{icon:ni,className:"text-emerald-600"})}),"Gr\xe1fico de Evolu\xe7\xe3o"]}),(0,We.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Hist\xf3rico de desempenho ao longo das sess\xf5es"})]}),E.length>0&&(0,We.jsxs)("div",{className:"text-right",children:[(0,We.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,We.jsx)("span",{className:"font-medium",children:E.length})," sess\xf5es registradas"]}),(0,We.jsx)("div",{className:"text-xs text-emerald-600 mt-1",children:(()=>{const e=E.filter((e=>null!==e.score&&void 0!==e.score&&!isNaN(e.score))),t=e.length<E.length;if(0===e.length)return"M\xe9dia: N/A";const a=e.reduce(((e,t)=>e+parseFloat(t.score)),0)/e.length,s="M\xe9dia: ".concat(a.toFixed(1),"%");return t&&E.length>0?(0,We.jsxs)(We.Fragment,{children:[s,(0,We.jsxs)("span",{className:"text-xs text-gray-500 ml-1",children:["(",e.length," de ",E.length," com pontua\xe7\xe3o)"]})]}):s})()})]})]})}),(0,We.jsx)("div",{className:"p-6",children:(0,We.jsx)("div",{className:"relative h-80 md:h-96",children:D?(0,We.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-indigo-100 to-purple-100 p-4 rounded-full w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-2xl text-indigo-600"})}),(0,We.jsx)("p",{className:"text-gray-600 font-medium",children:"Carregando hist\xf3rico..."})]})}):E.length>0?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("div",{className:"h-full bg-gradient-to-br from-gray-50 to-indigo-50 rounded-lg p-4",children:(0,We.jsx)(Sd,{options:q,data:B})}),(0,We.jsxs)("div",{className:"mt-4 bg-gray-50 rounded-lg p-3 border border-gray-200",children:[(0,We.jsxs)("div",{className:"mb-3",children:[(0,We.jsx)("h6",{className:"text-xs font-medium text-gray-700 mb-2",children:"Legenda dos N\xedveis de Prompting:"}),(0,We.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#10b981"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"Independente"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#8b5cf6"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"Dica Verbal"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#f59e0b"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"Dica Gestual"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#ef4444"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"Ajuda F\xedsica Parcial"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#dc2626"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"Ajuda F\xedsica Total"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#6b7280"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"N\xe3o Executado"})]})]})]}),(0,We.jsxs)("div",{className:"border-t border-gray-200 pt-2",children:[(0,We.jsx)("h6",{className:"text-xs font-medium text-gray-700 mb-2",children:"Formas dos Pontos:"}),(0,We.jsxs)("div",{className:"flex flex-wrap gap-4 text-xs",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("div",{className:"relative",children:(0,We.jsx)("span",{className:"text-amber-500 text-sm",children:"\u2b50"})}),(0,We.jsx)("span",{className:"text-gray-600",children:"Linha de Base"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full bg-indigo-500"}),(0,We.jsx)("span",{className:"text-gray-600",children:"Sess\xe3o Regular"})]})]})]}),(0,We.jsxs)("div",{className:"mt-2 text-xs text-amber-700 flex items-center space-x-1",children:[(0,We.jsx)("span",{children:"\ud83d\udca1"}),(0,We.jsx)("span",{children:'Apenas sess\xf5es "Independente" contam para crit\xe9rio de dom\xednio (80%+)'})]})]})]}):(0,We.jsx)("div",{className:"flex items-center justify-center h-full text-center bg-gradient-to-br from-gray-50 to-slate-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-gray-100 to-slate-100 p-6 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:ni,className:"text-3xl text-gray-400"})}),(0,We.jsx)("h5",{className:"font-semibold text-gray-600 mb-2",children:"Nenhum Hist\xf3rico"}),(0,We.jsx)("p",{className:"text-gray-500 text-sm leading-relaxed max-w-sm",children:"Registre a primeira sess\xe3o para come\xe7ar a visualizar o progresso no gr\xe1fico."})]})})})})]})]}):(0,We.jsxs)("div",{className:"flex flex-col items-center justify-center text-center p-12 h-full",children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 p-8 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:ni,className:"text-4xl text-indigo-600"})}),(0,We.jsx)("h4",{className:"font-semibold text-xl text-gray-700 mb-3",children:"Nenhum Programa Selecionado"}),(0,We.jsx)("p",{className:"text-gray-500 leading-relaxed max-w-md",children:"Selecione um programa na lista ao lado para visualizar gr\xe1ficos de progresso e registrar sess\xf5es."}),(0,We.jsx)("div",{className:"mt-6 bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-dashed border-indigo-300 rounded-lg p-4",children:(0,We.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-indigo-600",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"}),(0,We.jsx)("span",{className:"text-sm font-medium",children:"Aguardando sele\xe7\xe3o"})]})})]})},Dh=e=>{let{startDate:t,endDate:a,onStartDateChange:n,onEndDateChange:r,onClear:i,showPresets:o=!0,showInfo:l=!0}=e;const[c,d]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(!t&&!a){const e=(()=>{const e=new Date,t=new Date;return t.setMonth(t.getMonth()-1),{startDate:t.toISOString().split("T")[0],endDate:e.toISOString().split("T")[0]}})();n(e.startDate),r(e.endDate)}}),[t,a,n,r]);const u=[{label:"7 dias",icon:qi,color:"text-blue-600",bgColor:"bg-blue-50 hover:bg-blue-100",borderColor:"border-blue-200",days:7,description:"\xdaltima semana"},{label:"1 m\xeas",icon:er,color:"text-green-600",bgColor:"bg-green-50 hover:bg-green-100",borderColor:"border-green-200",days:30,description:"\xdaltimo m\xeas (padr\xe3o)",isDefault:!0},{label:"3 meses",icon:ni,color:"text-purple-600",bgColor:"bg-purple-50 hover:bg-purple-100",borderColor:"border-purple-200",days:90,description:"\xdaltimos 3 meses"},{label:"6 meses",icon:Ti,color:"text-orange-600",bgColor:"bg-orange-50 hover:bg-orange-100",borderColor:"border-orange-200",days:180,description:"\xdaltimos 6 meses"}],h=(()=>{if(!t||!a)return null;const e=new Date(t),s=new Date(a),n=new Date;if(Math.abs(s-n)<864e5){const t=Math.abs(s-e),a=Math.ceil(t/864e5),n=u.find((e=>Math.abs(e.days-a)<=1));return n}return null})();return(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:er,className:"text-indigo-600"}),(0,We.jsx)("h3",{className:"text-sm font-medium text-gray-800",children:"Per\xedodo dos Gr\xe1ficos"}),l&&(0,We.jsxs)("div",{className:"relative",children:[(0,We.jsx)("button",{onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,We.jsx)(Vn,{icon:_i,className:"text-xs"})}),c&&(0,We.jsxs)("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-gray-800 text-white text-xs rounded-lg px-3 py-2 whitespace-nowrap z-10",children:["Selecione o per\xedodo para visualizar os dados dos gr\xe1ficos",(0,We.jsx)("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-800"})]})]})]}),(t||a)&&(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[h&&(0,We.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(h.bgColor," ").concat(h.color," border ").concat(h.borderColor),children:h.label}),(0,We.jsx)("span",{className:"text-xs text-gray-500",children:(()=>{if(!t||!a)return"";const e=new Date(t),s=new Date(a),n=Math.abs(s-e),r=Math.ceil(n/864e5)+1;return"".concat(r," dia").concat(1!==r?"s":""," selecionado").concat(1!==r?"s":"")})()})]})]}),o&&(0,We.jsxs)("div",{className:"mb-4",children:[(0,We.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Sele\xe7\xf5es r\xe1pidas:"}),(0,We.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:u.map(((e,t)=>(0,We.jsxs)("button",{onClick:()=>(e=>{const t=new Date,a=new Date;a.setDate(a.getDate()-e);const s=a.toISOString().split("T")[0],i=t.toISOString().split("T")[0];n(s),r(i)})(e.days),className:"\n                  flex flex-col items-center p-3 rounded-lg border transition-all duration-200\n                  ".concat((null===h||void 0===h?void 0:h.days)===e.days?"".concat(e.bgColor," ").concat(e.borderColor," border-2"):"bg-gray-50 hover:bg-gray-100 border-gray-200 hover:border-gray-300","\n                "),title:e.description,children:[(0,We.jsx)(Vn,{icon:e.icon,className:"text-lg mb-1 ".concat((null===h||void 0===h?void 0:h.days)===e.days?e.color:"text-gray-600")}),(0,We.jsx)("span",{className:"text-xs font-medium ".concat((null===h||void 0===h?void 0:h.days)===e.days?e.color:"text-gray-700"),children:e.label}),e.isDefault&&(0,We.jsx)("span",{className:"text-[10px] text-gray-500 mt-1",children:"padr\xe3o"})]},t)))})]}),(0,We.jsxs)("div",{className:"border-t border-gray-100 pt-4",children:[(0,We.jsx)("p",{className:"text-xs text-gray-600 mb-3",children:"Ou selecione um per\xedodo personalizado:"}),(0,We.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("label",{className:"text-sm text-gray-600",children:"De:"}),(0,We.jsx)("input",{type:"date",value:t,onChange:e=>n(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("label",{className:"text-sm text-gray-600",children:"At\xe9:"}),(0,We.jsx)("input",{type:"date",value:a,onChange:e=>r(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),(t||a)&&(0,We.jsxs)("button",{onClick:()=>{n(""),r(""),i&&i()},className:"flex items-center space-x-1 px-3 py-2 text-sm text-red-600 hover:text-red-800 hover:bg-red-50 rounded-md transition-colors",title:"Limpar filtros",children:[(0,We.jsx)(Vn,{icon:zo}),(0,We.jsx)("span",{children:"Limpar"})]})]})]})]})};var Oh=a(2154);const Th=e=>{var t;let{isOpen:a,onClose:n,suggestedText:r,currentText:i,onUseSuggestion:o,onAppendSuggestion:l,isGenerating:c=!1}=e;const[d,u]=(0,s.useState)(r),[h,m]=(0,s.useState)(!1);s.useEffect((()=>{u(r),m(!1)}),[r]);return a?(0,We.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col transform transition-all",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:Co,className:"text-indigo-600 mr-3"}),(0,We.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Sugest\xe3o de Texto Autom\xe1tica"})]}),(0,We.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:c,children:(0,We.jsx)(Vn,{icon:lo,className:"text-lg"})})]}),(0,We.jsxs)("div",{className:"flex-1 overflow-hidden flex flex-col",children:[(0,We.jsx)("div",{className:"p-4 bg-blue-50 border-b border-blue-200",children:(0,We.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,We.jsx)(Vn,{icon:li,className:"text-blue-600 mt-1 flex-shrink-0"}),(0,We.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,We.jsx)("p",{className:"font-medium mb-1",children:"Como usar esta sugest\xe3o:"}),(0,We.jsxs)("ul",{className:"text-xs space-y-1",children:[(0,We.jsxs)("li",{children:["\u2022 ",(0,We.jsx)("strong",{children:"Substituir:"})," Remove o texto atual e usa apenas a sugest\xe3o"]}),(0,We.jsxs)("li",{children:["\u2022 ",(0,We.jsx)("strong",{children:"Adicionar:"})," Mant\xe9m o texto atual e adiciona a sugest\xe3o ao final"]}),(0,We.jsxs)("li",{children:["\u2022 ",(0,We.jsx)("strong",{children:"Editar:"})," Permite modificar a sugest\xe3o antes de usar"]})]})]})]})}),(0,We.jsx)("div",{className:"p-4 bg-amber-50 border-b border-amber-200",children:(0,We.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,We.jsx)("span",{className:"text-amber-600 mt-1 flex-shrink-0",children:"\u26a0\ufe0f"}),(0,We.jsxs)("div",{className:"text-sm text-amber-800",children:[(0,We.jsx)("p",{className:"font-medium mb-1",children:"Importante - Responsabilidade Profissional:"}),(0,We.jsxs)("p",{className:"text-xs",children:["Esta sugest\xe3o \xe9 gerada automaticamente baseada ",(0,We.jsx)("strong",{children:"apenas em dados quantitativos"})," (pontua\xe7\xf5es, sess\xf5es, etc.). \xc9 ",(0,We.jsx)("strong",{children:"imprescind\xedvel"})," que voc\xea, como profissional respons\xe1vel, revise, adapte e complemente este texto com:"]}),(0,We.jsxs)("ul",{className:"text-xs mt-2 space-y-1",children:[(0,We.jsx)("li",{children:"\u2022 An\xe1lise comportamental qualitativa"}),(0,We.jsx)("li",{children:"\u2022 Observa\xe7\xf5es cl\xednicas espec\xedficas"}),(0,We.jsx)("li",{children:"\u2022 Contexto individual do paciente"}),(0,We.jsx)("li",{children:"\u2022 Aspectos n\xe3o capturados pelos dados num\xe9ricos"})]}),(0,We.jsx)("p",{className:"text-xs mt-2 font-medium",children:"A ferramenta \xe9 um suporte para agilizar seu trabalho, n\xe3o um substituto para sua expertise profissional."})]})]})}),(0,We.jsx)("div",{className:"flex-1 p-5 overflow-y-auto",children:c?(0,We.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),(0,We.jsx)("p",{className:"text-gray-600",children:"Gerando sugest\xe3o baseada nos dados do paciente..."})]})}):(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center",children:[(0,We.jsx)("h3",{className:"text-lg font-medium text-gray-700",children:h?"Editando Sugest\xe3o":"Texto Sugerido"}),(0,We.jsxs)("button",{onClick:()=>{m(!h)},className:"flex items-center px-3 py-1.5 text-sm border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:[(0,We.jsx)(Vn,{icon:h?Do:vr,className:"mr-2"}),h?"Salvar Edi\xe7\xf5es":"Editar Texto"]})]}),h?(0,We.jsx)("textarea",{value:d,onChange:e=>u(e.target.value),rows:"20",className:"w-full px-3 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm font-mono resize-none",placeholder:"Edite o texto sugerido..."}):(0,We.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 max-h-96 overflow-y-auto",children:(0,We.jsx)("pre",{className:"whitespace-pre-wrap text-sm text-gray-700 font-sans leading-relaxed",children:r||"Nenhuma sugest\xe3o dispon\xedvel"})}),(0,We.jsxs)("div",{className:"text-xs text-gray-500 text-right",children:[(null===(t=h?d:r)||void 0===t?void 0:t.length)||0," caracteres"]})]})})]}),(0,We.jsxs)("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex justify-between items-center",children:[(0,We.jsx)("button",{onClick:n,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",disabled:c,children:"Cancelar"}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[(0,We.jsxs)("button",{onClick:()=>{const e=h?d:r,t=i.trim()?"\n\n":"";l(i+t+e),n()},disabled:c||!r,className:"flex items-center px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-md text-sm transition duration-150 ease-in-out shadow hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,We.jsx)(Vn,{icon:io,className:"mr-2"}),"Adicionar ao Texto"]}),(0,We.jsxs)("button",{onClick:()=>{o(h?d:r),n()},disabled:c||!r,className:"flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-md text-sm transition duration-150 ease-in-out shadow hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,We.jsx)(Vn,{icon:Do,className:"mr-2"}),"Substituir Texto"]})]})]})]})}):null},Mh=e=>{let{isOpen:t,onClose:a,onSave:n,currentUser:r,title:i="Dados Profissionais"}=e;const[o,l]=(0,s.useState)({professional_id:"",qualifications:"",professional_signature:""}),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)({});(0,s.useEffect)((()=>{t&&r&&(l({professional_id:r.professional_id||"",qualifications:r.qualifications||"",professional_signature:r.professional_signature||""}),h({}))}),[t,r]);const m=(e,t)=>{l((a=>(0,Ie.A)((0,Ie.A)({},a),{},{[e]:t}))),u[e]&&h((t=>{const a=(0,Ie.A)({},t);return delete a[e],a}))};return t?(0,We.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md transform transition-all",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center p-5 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-purple-50",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:Ni,className:"text-indigo-600 mr-3"}),(0,We.jsx)("h2",{className:"text-lg font-semibold text-gray-800",children:i})]}),(0,We.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:c,children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsxs)("div",{className:"p-5",children:[(0,We.jsx)("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,We.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,We.jsx)(Vn,{icon:Jn,className:"text-blue-600 mt-0.5 flex-shrink-0"}),(0,We.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,We.jsx)("p",{className:"font-medium mb-1",children:"Configura\xe7\xe3o \xfanica"}),(0,We.jsx)("p",{className:"text-xs",children:"Estes dados ser\xe3o salvos uma vez e reutilizados em todos os relat\xf3rios futuros. Voc\xea pode edit\xe1-los a qualquer momento."})]})]})}),u.general&&(0,We.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,We.jsx)("p",{className:"text-sm text-red-600",children:u.general})}),(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,We.jsx)(Vn,{icon:Fi,className:"mr-2 text-indigo-500"}),"Registro Profissional *"]}),(0,We.jsx)("input",{type:"text",value:o.professional_id,onChange:e=>m("professional_id",e.target.value),placeholder:"Ex: CRP 12345, CRO 67890, CREFITO 11111",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm ".concat(u.professional_id?"border-red-300":"border-gray-300"),disabled:c}),u.professional_id&&(0,We.jsx)("p",{className:"mt-1 text-xs text-red-600",children:u.professional_id})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,We.jsx)(Vn,{icon:Ho,className:"mr-2 text-indigo-500"}),"Qualifica\xe7\xf5es e Forma\xe7\xe3o *"]}),(0,We.jsx)("textarea",{value:o.qualifications,onChange:e=>m("qualifications",e.target.value),placeholder:"Ex: Psic\xf3logo Cl\xednico, Especialista em ABA, Mestre em Psicologia do Desenvolvimento",rows:"3",className:"w-full px-3 py-2 border rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm resize-vertical ".concat(u.qualifications?"border-red-300":"border-gray-300"),disabled:c}),u.qualifications&&(0,We.jsx)("p",{className:"mt-1 text-xs text-red-600",children:u.qualifications})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,We.jsx)(Vn,{icon:Ir,className:"mr-2 text-indigo-500"}),"Assinatura Digital (Opcional)"]}),(0,We.jsx)("input",{type:"text",value:o.professional_signature,onChange:e=>m("professional_signature",e.target.value),placeholder:"URL da assinatura digitalizada ou texto personalizado",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",disabled:c}),(0,We.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Deixe em branco se n\xe3o possuir assinatura digital"})]})]})]}),(0,We.jsxs)("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3",children:[(0,We.jsx)("button",{onClick:a,disabled:c,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors disabled:opacity-50",children:"Cancelar"}),(0,We.jsxs)("button",{onClick:async()=>{if((()=>{const e={};return o.professional_id.trim()||(e.professional_id="Registro profissional \xe9 obrigat\xf3rio"),o.qualifications.trim()||(e.qualifications="Qualifica\xe7\xf5es s\xe3o obrigat\xf3rias"),h(e),0===Object.keys(e).length})()){d(!0);try{const e=await Ue(o);n(e.user||o),a()}catch(e){console.error("Erro ao salvar dados profissionais:",e);let t="Erro ao salvar dados. Tente novamente.";e.message&&(t=e.message),h({general:t}),n&&"function"===typeof n&&n(null,e)}finally{d(!1)}}},disabled:c,className:"flex items-center px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-md text-sm transition duration-150 ease-in-out shadow hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,We.jsx)(Vn,{icon:c?xo:Do,className:"mr-2 ".concat(c?"fa-spin":"")}),c?"Salvando...":"Salvar Dados"]})]})]})}):null},Rh=e=>{let{value:t,onChange:a,placeholder:n="Digite sua an\xe1lise...",rows:r=6,disabled:i=!1}=e;const o=(0,s.useRef)(null),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)([t||""]),[h,m]=(0,s.useState)(0);(0,s.useEffect)((()=>{if(t!==d[h]){const e=d.slice(0,h+1);e.push(t||""),u(e),m(e.length-1)}}),[t]);const p=function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=o.current;if(!n)return;const r=n.selectionStart,i=n.selectionEnd,l=t.substring(r,i);let c,d;s&&l?(c=t.substring(0,r)+e+l+e+t.substring(i),d=i+2*e.length):(c=t.substring(0,r)+e+t.substring(i),d=r+e.length),a(c),setTimeout((()=>{n.focus(),n.setSelectionRange(d,d)}),0)},f=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bullet";const s=o.current;if(!s)return;const n=s.selectionStart,r=t.split("\n");let i=0,l=0;for(let t=0;t<r.length;t++){if(l+r[t].length>=n){i=t;break}l+=r[t].length+1}const c=r[i],d="bullet"===e?"\u2022 ":"1. ",u=c.trim().startsWith("\u2022 "),h=/^\d+\.\s/.test(c.trim());if(u||h)r[i]=c.replace(/^(\s*)(\u2022\s|\d+\.\s)/,"$1");else{const e=c.match(/^\s*/)[0];r[i]=e+d+c.trim()}const m=r.join("\n");a(m),setTimeout((()=>{s.focus()}),0)},g=()=>p("**",!0),x=()=>p("*",!0),b=()=>{if(h>0){const e=h-1;m(e),a(d[e])}},v=()=>{if(h<d.length-1){const e=h+1;m(e),a(d[e])}},y=[{icon:Fr,onClick:g,title:"Negrito (Ctrl+B)",active:!1},{icon:Zr,onClick:x,title:"It\xe1lico (Ctrl+I)",active:!1},{divider:!0},{icon:Zi,onClick:()=>f("bullet"),title:"Lista com marcadores",active:!1},{icon:ei,onClick:()=>f("numbered"),title:"Lista numerada",active:!1},{divider:!0},{icon:ki,onClick:b,title:"Desfazer (Ctrl+Z)",disabled:h<=0},{icon:hi,onClick:v,title:"Refazer (Ctrl+Y)",disabled:h>=d.length-1},{divider:!0},{icon:l?jr:li,onClick:()=>c(!l),title:l?"Ocultar preview":"Mostrar preview",active:l}];return(0,We.jsxs)("div",{className:"border border-gray-300 rounded-lg shadow-sm overflow-hidden bg-white",children:[(0,We.jsx)("div",{className:"border-b border-gray-200 bg-gray-50 px-3 py-2",children:(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[y.map(((e,t)=>e.divider?(0,We.jsx)("div",{className:"w-px h-4 bg-gray-300 mx-1"},t):(0,We.jsx)("button",{onClick:e.onClick,disabled:i||e.disabled,title:e.title,className:"\n                  p-1.5 rounded text-sm transition-all duration-200 hover:bg-gray-200\n                  ".concat(e.active?"bg-indigo-100 text-indigo-700":"text-gray-600 hover:text-gray-800","\n                  ").concat(e.disabled?"opacity-40 cursor-not-allowed":"cursor-pointer","\n                  ").concat(i?"opacity-50 cursor-not-allowed":"","\n                "),children:(0,We.jsx)(Vn,{icon:e.icon,className:"w-3 h-3"})},t))),(0,We.jsxs)("div",{className:"ml-auto text-xs text-gray-500",children:[t.length," caracteres"]})]})}),(0,We.jsx)("div",{className:"relative",children:l?(0,We.jsx)("div",{className:"p-3 min-h-[150px] max-h-64 overflow-y-auto bg-gray-50 border-2 border-dashed border-gray-200",style:{minHeight:"".concat(1.5*r,"rem")},children:(0,We.jsx)("div",{className:"text-sm text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:t?(j=t,j.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/^\u2022 (.*$)/gim,"<li>$1</li>").replace(/^(\d+)\. (.*$)/gim,"<li>$1. $2</li>").replace(/\n/g,"<br/>")):'<span class="text-gray-400">Nada para mostrar</span>'}})}):(0,We.jsx)("textarea",{ref:o,value:t,onChange:e=>a(e.target.value),onKeyDown:e=>{if(e.ctrlKey||e.metaKey)switch(e.key){case"b":e.preventDefault(),g();break;case"i":e.preventDefault(),x();break;case"z":e.shiftKey||(e.preventDefault(),b());break;case"y":e.preventDefault(),v()}},placeholder:n,rows:r,disabled:i,className:"w-full px-3 py-3 border-0 resize-none focus:outline-none focus:ring-0 text-sm leading-relaxed",style:{minHeight:"".concat(1.5*r,"rem")}})}),(0,We.jsx)("div",{className:"border-t border-gray-200 bg-gray-50 px-3 py-2",children:(0,We.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,We.jsxs)("span",{children:["**texto** = ",(0,We.jsx)("strong",{children:"negrito"})]}),(0,We.jsxs)("span",{children:["*texto* = ",(0,We.jsx)("em",{children:"it\xe1lico"})]}),(0,We.jsx)("span",{children:"\u2022 = lista"})]}),(0,We.jsx)("div",{children:l?"Modo Preview":"Modo Edi\xe7\xe3o"})]})})]});var j},Ih=e=>{let{sessionData:t,startDate:a,endDate:n,assignedPrograms:r,className:i="",collapsible:o=!0}=e;const[l,c]=s.useState(!1),d=s.useMemo((()=>{if(!t||0===t.length)return{totalSessions:0,avgScore:0,programsCount:0,periodText:"Per\xedodo n\xe3o definido",hasData:!1};const e=t.length,s=t.reduce(((e,t)=>e+(t.score||0)),0)/e,i=r?r.length:0;let o="Per\xedodo completo";if(a&&n){const e=new Date(a),t=new Date(n);o="".concat(e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})," - ").concat(t.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}))}else if(a||n){const e=new Date(a||n);o="A partir de ".concat(e.toLocaleDateString("pt-BR"))}return{totalSessions:e,avgScore:Math.round(10*s)/10,programsCount:i,periodText:o,hasData:!0}}),[t,a,n,r]),u=e=>e>=80?"text-green-600":e>=60?"text-yellow-600":"text-red-500",h=[{icon:er,label:"Per\xedodo",value:d.periodText,color:"text-indigo-600",bgColor:"bg-indigo-50"},{icon:to,label:"Sess\xf5es",value:d.totalSessions,color:"text-blue-600",bgColor:"bg-blue-50"},{icon:ni,label:"M\xe9dia",value:d.hasData?"".concat(d.avgScore,"%"):"-",color:d.hasData?u(d.avgScore):"text-gray-500",bgColor:"bg-gray-50"},{icon:po,label:"Programas",value:d.programsCount,color:"text-purple-600",bgColor:"bg-purple-50"}];return(0,We.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm ".concat(i),children:[(0,We.jsx)("div",{className:"p-3 border-b border-gray-200 bg-gradient-to-r from-gray-50 to-indigo-50",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:"\ud83d\udcca M\xe9tricas do Per\xedodo"}),o&&(0,We.jsx)("button",{onClick:()=>c(!l),className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:(0,We.jsx)(Vn,{icon:l?Qi:Nr,className:"w-3 h-3"})})]})}),(0,We.jsxs)("div",{className:"transition-all duration-300 ".concat(l?"hidden":"block"),children:[d.hasData?(0,We.jsx)("div",{className:"p-3 space-y-3",children:h.map(((e,t)=>(0,We.jsxs)("div",{className:"flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"p-1.5 rounded-full ".concat(e.bgColor),children:(0,We.jsx)(Vn,{icon:e.icon,className:"w-3 h-3 ".concat(e.color)})}),(0,We.jsx)("span",{className:"text-sm text-gray-600",children:e.label})]}),(0,We.jsx)("span",{className:"text-sm font-medium ".concat(e.color),children:e.value})]},t)))}):(0,We.jsx)("div",{className:"p-4 text-center",children:(0,We.jsx)("p",{className:"text-sm text-gray-500",children:"Nenhum dado dispon\xedvel para o per\xedodo selecionado"})}),d.hasData&&d.avgScore>0&&(0,We.jsx)("div",{className:"p-3 border-t border-gray-200 bg-gray-50",children:(0,We.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,We.jsx)("span",{className:"text-gray-500",children:"Indicador de Performance:"}),(0,We.jsx)("span",{className:"font-medium ".concat(u(d.avgScore)),children:d.avgScore>=80?"Excelente":d.avgScore>=60?"Satisfat\xf3rio":"Requer Aten\xe7\xe3o"})]})})]})]})},Fh=e=>{if(!e)return"N\xe3o informado";try{return new Date(e).toLocaleDateString("pt-BR")}catch(t){return"Data inv\xe1lida"}},zh=e=>{let{isOpen:t,onClose:a,patientData:n,reportText:r,professionalData:i,sessionData:o,assignedPrograms:l,onUpdateReportText:c}=e;const[d,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(""),[p,f]=(0,s.useState)(!1);if((0,s.useEffect)((()=>{m(r)}),[r]),!t)return null;const g=async()=>{f(!0);try{const e=(0,Ie.A)((0,Ie.A)({},n),{},{sessionData:o}),t=i?(0,Ie.A)((0,Ie.A)({},i),{},{professional_name:i.professional_name||"Profissional"}):null;await(0,il.J5)(e,r,t)}catch(e){console.error("Erro ao gerar PDF:",e),alert("Erro ao gerar PDF. Tente novamente.")}finally{f(!1)}},x=(null===o||void 0===o?void 0:o.length)||0,b=x>0?(o.reduce(((e,t)=>e+(t.score||0)),0)/x).toFixed(1):0,v=(null===o||void 0===o?void 0:o.reduce(((e,t)=>{const a=t.program_id;if(!a)return e;const s=null===l||void 0===l?void 0:l.find((e=>e.program_id===a)),n=e.find((e=>e.id===a));if(!n){const t=o.filter((e=>e.program_id===a)).length;e.push({id:a,name:(null===s||void 0===s?void 0:s.program_name)||"Programa ".concat(a),discipline:(null===s||void 0===s?void 0:s.discipline_name)||"\xc1rea n\xe3o informada",sessionsCount:t})}return e}),[]))||[];return v.sort(((e,t)=>e.name.localeCompare(t.name))),(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 flex justify-between items-center",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("h2",{className:"text-xl font-bold text-white",children:"Preview - Relat\xf3rio Consolidado"}),(0,We.jsxs)("p",{className:"text-indigo-100 text-sm",children:[null===n||void 0===n?void 0:n.name," \u2022 Revise e personalize antes de gerar o PDF"]})]}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[(0,We.jsx)("button",{onClick:g,disabled:p,className:"bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-lg transition-all disabled:opacity-50 flex items-center space-x-2",children:p?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin"}),(0,We.jsx)("span",{children:"Gerando..."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:bi}),(0,We.jsx)("span",{children:"Gerar PDF"})]})}),(0,We.jsx)("button",{onClick:a,className:"text-white hover:text-indigo-200 transition-colors text-xl",children:(0,We.jsx)(Vn,{icon:lo})})]})]}),(0,We.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[(0,We.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,We.jsx)(Vn,{icon:Sr,className:"text-indigo-600 text-lg"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Identifica\xe7\xe3o do Usu\xe1rio"})]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 text-sm",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-600",children:"Nome:"}),(0,We.jsx)("p",{className:"text-gray-800",children:null===n||void 0===n?void 0:n.name})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-600",children:"Cl\xednica:"}),(0,We.jsx)("p",{className:"text-gray-800",children:(null===n||void 0===n?void 0:n.clinic_name)||"N\xe3o informado"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-600",children:"Data de Nascimento:"}),(0,We.jsx)("p",{className:"text-gray-800",children:Fh(null===n||void 0===n?void 0:n.dob)})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-600",children:"Diagn\xf3stico:"}),(0,We.jsx)("p",{className:"text-gray-800",children:(null===n||void 0===n?void 0:n.diagnosis)||"N\xe3o informado"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-600",children:"Respons\xe1vel:"}),(0,We.jsx)("p",{className:"text-gray-800",children:null!==n&&void 0!==n&&n.guardian_name?"".concat(n.guardian_name," (").concat(n.guardian_relationship,")"):"N\xe3o informado"})]})]})]}),(0,We.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,We.jsx)(Vn,{icon:ni,className:"text-blue-600 text-lg"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Resumo do Per\xedodo"})]}),(0,We.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:x}),(0,We.jsx)("div",{className:"text-gray-600 text-sm",children:"Sess\xf5es Realizadas"})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:[b,"%"]}),(0,We.jsx)("div",{className:"text-gray-600 text-sm",children:"M\xe9dia Geral"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:v.length}),(0,We.jsx)("div",{className:"text-gray-600 text-sm",children:"Programas Trabalhados"})]})]}),(0,We.jsxs)("div",{className:"mt-4",children:[(0,We.jsx)("h4",{className:"font-medium text-gray-700 mb-3",children:"Programas Trabalhados:"}),v.length>0?(0,We.jsx)("div",{className:"space-y-2",children:v.map(((e,t)=>(0,We.jsxs)("div",{className:"flex justify-between items-center p-2 bg-white border border-gray-200 rounded-md",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-gray-800 text-sm",children:e.name}),(0,We.jsx)("div",{className:"text-xs text-gray-500",children:e.discipline})]}),(0,We.jsxs)("div",{className:"text-xs text-gray-600 bg-gray-100 px-2 py-1 rounded",children:[e.sessionsCount," ",1===e.sessionsCount?"sess\xe3o":"sess\xf5es"]})]},t)))}):(0,We.jsx)("div",{className:"text-sm text-gray-500 italic p-2 bg-gray-100 rounded-md",children:"Nenhum programa encontrado para o per\xedodo selecionado"})]})]}),(0,We.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:wr,className:"text-green-600 text-lg"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"An\xe1lise e Observa\xe7\xf5es"})]}),(0,We.jsx)("button",{onClick:()=>{u(!0)},className:"text-green-600 hover:text-green-800 transition-colors",children:(0,We.jsx)(Vn,{icon:vr})})]}),d?(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"An\xe1lise Qualitativa:"}),(0,We.jsx)("textarea",{value:h,onChange:e=>m(e.target.value),placeholder:"Digite sua an\xe1lise qualitativa sobre o per\xedodo...",className:"w-full p-3 border border-gray-300 rounded-lg resize-none",rows:"8"})]}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[(0,We.jsxs)("button",{onClick:()=>{c(h),u(!1)},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:Do}),(0,We.jsx)("span",{children:"Salvar"})]}),(0,We.jsx)("button",{onClick:()=>{m(r),u(!1)},className:"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancelar"})]})]}):(0,We.jsx)("div",{children:r?(0,We.jsx)("div",{className:"text-gray-800 leading-relaxed",dangerouslySetInnerHTML:{__html:(y=r,y?y.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/^\u2022 (.*$)/gim,"&bull; $1").replace(/^(\d+)\. (.*$)/gim,"$1. $2").replace(/\n/g,"<br/>"):"")}}):(0,We.jsx)("div",{className:"text-gray-500 italic",children:'Clique em "Editar" para adicionar sua an\xe1lise qualitativa sobre o per\xedodo.'})})]}),(0,We.jsxs)("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,We.jsx)(Vn,{icon:Ni,className:"text-indigo-600"}),(0,We.jsx)("h4",{className:"font-medium text-indigo-800",children:"Dados Profissionais"})]}),(0,We.jsxs)("div",{className:"text-sm text-indigo-700",children:[(0,We.jsxs)("p",{children:[(0,We.jsx)("strong",{children:"Profissional:"})," ",null===i||void 0===i?void 0:i.professional_name]}),(0,We.jsxs)("p",{children:[(0,We.jsx)("strong",{children:"Registro:"})," ",null===i||void 0===i?void 0:i.professional_id]}),(0,We.jsxs)("p",{children:[(0,We.jsx)("strong",{children:"Qualifica\xe7\xf5es:"})," ",null===i||void 0===i?void 0:i.qualifications]})]})]}),(0,We.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,We.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,We.jsx)(Vn,{icon:_i,className:"text-blue-600 mt-1"}),(0,We.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,We.jsx)("p",{className:"font-medium mb-1",children:"Gr\xe1ficos de Progresso"}),(0,We.jsx)("p",{children:"Os gr\xe1ficos detalhados de cada programa ser\xe3o inclu\xeddos automaticamente no PDF final, organizados por \xe1rea de interven\xe7\xe3o conforme visualizado na pr\xe9-visualiza\xe7\xe3o do modal."})]})]})}),(0,We.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:(0,We.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,We.jsx)("span",{className:"text-amber-600 mt-1 flex-shrink-0",children:"\u26a0\ufe0f"}),(0,We.jsxs)("div",{className:"text-sm text-amber-800",children:[(0,We.jsx)("p",{className:"font-medium mb-1",children:"Responsabilidade Profissional"}),(0,We.jsx)("p",{children:"Este relat\xf3rio cont\xe9m dados quantitativos e an\xe1lises autom\xe1ticas baseadas em m\xe9tricas de sess\xf5es. Como profissional respons\xe1vel, voc\xea deve assegurar que:"}),(0,We.jsxs)("ul",{className:"text-xs mt-2 space-y-1",children:[(0,We.jsx)("li",{children:"\u2022 O texto reflita adequadamente a condi\xe7\xe3o e progresso individual do paciente"}),(0,We.jsx)("li",{children:"\u2022 Aspectos comportamentais e contextuais relevantes estejam inclu\xeddos"}),(0,We.jsx)("li",{children:"\u2022 As interpreta\xe7\xf5es estejam alinhadas com sua avalia\xe7\xe3o cl\xednica"}),(0,We.jsx)("li",{children:"\u2022 O conte\xfado esteja adequado ao p\xfablico-alvo (escola, fam\xedlia, outros profissionais)"})]}),(0,We.jsx)("p",{className:"text-xs mt-2 font-medium",children:"A responsabilidade t\xe9cnica e \xe9tica pelo conte\xfado final \xe9 sempre do profissional emissor."})]})]})})]}),(0,We.jsxs)("div",{className:"border-t border-gray-200 px-6 py-4 flex justify-between items-center",children:[(0,We.jsx)("div",{className:"text-sm text-gray-600",children:"Preview do relat\xf3rio \u2022 Edite o texto se necess\xe1rio antes de gerar o PDF final"}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[(0,We.jsx)("button",{onClick:a,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Fechar Preview"}),(0,We.jsx)("button",{onClick:g,disabled:p,className:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all disabled:opacity-50 flex items-center space-x-2",children:p?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin"}),(0,We.jsx)("span",{children:"Gerando PDF..."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:bi}),(0,We.jsx)("span",{children:"Gerar PDF Final"})]})})]})]})]})});var y},Bh={async generateConventionalReportSuggestion(e,t,a){try{const s=await He(e,a);return this.generateSuggestedText(s,t,a)}catch(s){throw console.error("Erro ao gerar sugest\xe3o de relat\xf3rio:",s),new Error("N\xe3o foi poss\xedvel gerar a sugest\xe3o de texto. Tente novamente.")}},generateSuggestedText(e,t,a){const{statistics:s,insights:n,area_performance:r}=e;let i=this.generateDisclaimer();return i+=this.generatePeriodSummary(s,a),i+=this.generateAreaAnalysis(r),i+=this.generateIndependenceAnalysis(s),i+=this.generateInsightsSection(n),i+=this.generateRecommendations(s,n),i},generateDisclaimer:()=>"**[IMPORTANTE: Esta an\xe1lise \xe9 baseada em dados quantitativos. Como profissional respons\xe1vel, revise, adapte e complemente com suas observa\xe7\xf5es cl\xednicas qualitativas antes de utilizar.]**\n\n",generatePeriodSummary(e,t){const a=this.formatPeriodText(t);let s="RESUMO DO PER\xcdODO ANALISADO\n\n";return s+="".concat(a," foram realizadas ").concat(e.total_sessions," sess\xf5es terap\xeauticas, "),e.total_sessions>0?(s+="com m\xe9dia de desempenho de ".concat(e.avg_score.toFixed(1),"%. "),null!==e.independence_percentage&&(s+="O n\xedvel de independ\xeancia alcan\xe7ado foi de ".concat(e.independence_percentage.toFixed(1),"%, "),s+="indicando ".concat(this.getIndependenceDescription(e.independence_percentage),". ")),s+="O paciente trabalhou em ".concat(e.programs_worked," programa(s) diferentes "),s+="durante este per\xedodo.\n\n"):s+="por\xe9m n\xe3o h\xe1 dados de desempenho dispon\xedveis para an\xe1lise.\n\n",s},generateAreaAnalysis(e){if(!e||0===e.length)return"AN\xc1LISE POR \xc1REA DE INTERVEN\xc7\xc3O\n\nN\xe3o h\xe1 dados suficientes para an\xe1lise por \xe1rea de interven\xe7\xe3o.\n\n";let t="AN\xc1LISE POR \xc1REA DE INTERVEN\xc7\xc3O\n\n";const a=[...e].sort(((e,t)=>t.avg_score-e.avg_score));return a.forEach(((e,s)=>{const n=this.getPerformanceDescription(e.avg_score);t+="".concat(e.area_name,": M\xe9dia de ").concat(e.avg_score.toFixed(1),"% em ").concat(e.session_count," sess\xe3o(\xf5es), "),t+="demonstrando ".concat(n),0===s&&a.length>1?t+=" (\xe1rea de melhor desempenho)":s===a.length-1&&a.length>1&&(t+=" (\xe1rea que requer maior aten\xe7\xe3o)"),t+=".\n"})),t+="\n",t},generateIndependenceAnalysis(e){if(null===e.independence_percentage)return"N\xcdVEIS DE INDEPEND\xcaNCIA\n\nDados de prompt level n\xe3o dispon\xedveis para an\xe1lise.\n\n";let t="N\xcdVEIS DE INDEPEND\xcaNCIA\n\n";const a=e.independence_percentage,s=this.getDetailedIndependenceAnalysis(a);return t+="Durante o per\xedodo analisado, o paciente apresentou ".concat(a.toFixed(1),"% de "),t+="respostas independentes. ".concat(s,"\n\n"),t},generateInsightsSection(e){if(!e||0===e.length)return"OBSERVA\xc7\xd5ES RELEVANTES\n\nN\xe3o h\xe1 insights espec\xedficos gerados para este per\xedodo.\n\n";let t="OBSERVA\xc7\xd5ES RELEVANTES\n\n";const a=e.filter((e=>"positive"===e.type)),s=e.filter((e=>"attention"===e.type)),n=e.filter((e=>"neutral"===e.type));return a.length>0&&(t+="Aspectos Positivos:\n",a.forEach((e=>{t+="\u2022 ".concat(e.text,"\n")})),t+="\n"),s.length>0&&(t+="Pontos de Aten\xe7\xe3o:\n",s.forEach((e=>{t+="\u2022 ".concat(e.text,"\n")})),t+="\n"),n.length>0&&(t+="Observa\xe7\xf5es Gerais:\n",n.forEach((e=>{t+="\u2022 ".concat(e.text,"\n")})),t+="\n"),t},generateRecommendations(e,t){let a="RECOMENDA\xc7\xd5ES\n\n";e.avg_score<60?(a+="\u2022 Considerar revis\xe3o das estrat\xe9gias de ensino, dado que a m\xe9dia de desempenho est\xe1 abaixo de 60%.\n",a+="\u2022 Avaliar poss\xedvel necessidade de ajuste nos n\xedveis de prompting utilizados.\n"):e.avg_score>85?(a+="\u2022 Excelente desempenho observado. Considerar progress\xe3o para objetivos mais avan\xe7ados.\n",a+="\u2022 Avaliar possibilidade de redu\xe7\xe3o gradual dos n\xedveis de prompting.\n"):a+="\u2022 Desempenho satisfat\xf3rio observado. Manter estrat\xe9gias atuais de interven\xe7\xe3o.\n",null!==e.independence_percentage&&(e.independence_percentage<30?a+="\u2022 Focar no desenvolvimento da independ\xeancia atrav\xe9s de estrat\xe9gias de fading de prompts.\n":e.independence_percentage>70&&(a+="\u2022 Alto n\xedvel de independ\xeancia alcan\xe7ado. Considerar introdu\xe7\xe3o de novos desafios.\n"));return((null===t||void 0===t?void 0:t.filter((e=>"attention"===e.type)))||[]).length>0&&(a+="\u2022 Aten\xe7\xe3o especial aos pontos identificados na an\xe1lise autom\xe1tica.\n"),a+="\u2022 Continuar monitoramento regular do progresso atrav\xe9s dos dados de sess\xe3o.\n",a+="\n",a},formatPeriodText(e){if(e.startDate&&e.endDate){const t=new Date(e.startDate),a=new Date(e.endDate);return"No per\xedodo de ".concat(t.toLocaleDateString("pt-BR")," a ").concat(a.toLocaleDateString("pt-BR"),",")}return"Durante o per\xedodo analisado,"},getPerformanceDescription:e=>e>=90?"excelente desempenho":e>=80?"bom desempenho":e>=70?"desempenho satisfat\xf3rio":e>=60?"desempenho adequado":e>=50?"desempenho moderado":"desempenho que requer aten\xe7\xe3o",getIndependenceDescription:e=>e>=80?"alto n\xedvel de autonomia":e>=60?"bom n\xedvel de independ\xeancia":e>=40?"n\xedvel moderado de independ\xeancia":e>=20?"baixo n\xedvel de independ\xeancia":"necessidade de apoio significativo",getDetailedIndependenceAnalysis:e=>e>=80?"Isso indica que o paciente est\xe1 demonstrando excelente capacidade de resposta aut\xf4noma, sugerindo boa consolida\xe7\xe3o das habilidades trabalhadas.":e>=60?"Isso demonstra boa evolu\xe7\xe3o na dire\xe7\xe3o da independ\xeancia, com potencial para progress\xe3o cont\xednua.":e>=40?"Isso indica progresso moderado na dire\xe7\xe3o da autonomia, com necessidade de manuten\xe7\xe3o das estrat\xe9gias atuais.":e>=20?"Isso sugere que o paciente ainda requer apoio significativo, sendo recomend\xe1vel foco no desenvolvimento da independ\xeancia.":"Isso indica necessidade de apoio intensivo e poss\xedvel revis\xe3o das estrat\xe9gias de ensino para promover maior autonomia."},qh=Bh;fd.t1.register(fd.PP,fd.kc,fd.FN,fd.No,fd.hE,fd.m_,fd.s$,fd.dN);const Uh=e=>{let{program:t,sessionData:a}=e;const s=(a||[]).filter((e=>e.program_id===t.program_id));if(0===s.length)return null;const n={labels:s.map((e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long";if(!e)return"N/A";const a=new Date(e);if(isNaN(a.getTime()))return"Data inv\xe1lida";const s=6e4*a.getTimezoneOffset(),n="short"===t?{day:"2-digit",month:"2-digit"}:{day:"2-digit",month:"2-digit",year:"numeric"};return new Date(a.getTime()+s).toLocaleDateString("pt-BR",n)}(e.session_date,"short"))),datasets:[{label:"Pontua\xe7\xe3o (%)",data:s.map((e=>e.score)),borderColor:"#4f46e5",backgroundColor:e=>{const t=e.chart,{ctx:a,chartArea:s}=t;if(!s)return"rgba(79, 70, 229, 0.1)";const n=a.createLinearGradient(0,s.top,0,s.bottom);return n.addColorStop(0,"rgba(99, 102, 241, 0.3)"),n.addColorStop(.5,"rgba(79, 70, 229, 0.2)"),n.addColorStop(1,"rgba(67, 56, 202, 0.1)"),n},borderWidth:2.5,pointRadius:s.map((e=>e.is_baseline?6:5)),pointBackgroundColor:s.map((e=>{var t;return e.is_baseline?"#f59e0b":null!==(t=e.details)&&void 0!==t&&t.promptLevelColor?e.details.promptLevelColor:"#4f46e5"})),pointBorderColor:s.map((e=>e.is_baseline?"#f59e0b":"#ffffff")),pointBorderWidth:s.map((e=>e.is_baseline?3:2)),pointStyle:s.map((e=>e.is_baseline?"star":"circle")),pointHoverRadius:7,pointHoverBorderWidth:3,fill:!0,tension:.4}]};return(0,We.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-indigo-200 px-4 py-3",children:[(0,We.jsx)("h5",{className:"text-sm font-semibold text-gray-800 text-center",children:t.program_name}),(0,We.jsx)("p",{className:"text-xs text-indigo-600 text-center mt-1",children:t.discipline_name})]}),(0,We.jsxs)("div",{className:"p-4",children:[(0,We.jsx)("div",{className:"w-full h-56 relative bg-gradient-to-br from-gray-50 to-indigo-50 rounded-lg p-2",children:(0,We.jsx)(Sd,{options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{y:{display:!0,beginAtZero:!0,max:105,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{font:{size:10,weight:500},color:"#6b7280",callback:e=>e+"%"},border:{display:!1}},x:{display:!0,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{font:{size:10,weight:500},color:"#6b7280"},border:{display:!1}}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}},data:n})}),(0,We.jsxs)("div",{className:"mt-3 bg-gray-50 rounded-lg p-2 border border-gray-200",children:[(0,We.jsxs)("div",{className:"mb-2",children:[(0,We.jsx)("h6",{className:"text-xs font-medium text-gray-700 mb-1",children:"N\xedveis de Prompting:"}),(0,We.jsx)("div",{className:"flex flex-wrap gap-2 text-xs",children:(0,Oh.$F)().map((e=>(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:e.hex}}),(0,We.jsx)("span",{className:"text-gray-600",children:e.name})]},e.id)))})]}),(0,We.jsx)("div",{className:"border-t border-gray-200 pt-1",children:(0,We.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("span",{className:"text-amber-500 text-sm",children:"\u2b50"}),(0,We.jsx)("span",{className:"text-gray-600",children:"Linha de Base"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("div",{className:"w-2 h-2 rounded-full bg-indigo-500"}),(0,We.jsx)("span",{className:"text-gray-600",children:"Sess\xe3o Regular"})]})]})})]})]})]})},Hh=e=>{let{isOpen:t,onClose:a}=e;const{selectedPatient:n,refreshAndReselectPatient:r}=dt(),{user:i,updateUser:o}=Ye(),[l,c]=(0,s.useState)(""),[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[p,f]=(0,s.useState)(""),[g,x]=(0,s.useState)(!1),[b,v]=(0,s.useState)(""),[y,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(""),[_,S]=(0,s.useState)(!1),[C,k]=(0,s.useState)(null),[A,P]=(0,s.useState)(!1),[E,L]=(0,s.useState)(!1);(0,s.useEffect)((()=>{if(t&&(c(""),m(""),f(""),u(""),v(""),w(""),x(!1),L(!1),i)){const t=i.professional_id&&i.professional_id.trim().length>0,a=i.qualifications&&i.qualifications.trim().length>0,s=!t||!a;var e;if(P(s),s)k(null);else k({professional_id:i.professional_id.trim(),qualifications:i.qualifications.trim(),professional_signature:(null===(e=i.professional_signature)||void 0===e?void 0:e.trim())||""})}}),[t,i]);const D=(0,s.useMemo)((()=>{if(null===n||void 0===n||!n.sessionData)return[];const e=h?new Date(h+"T00:00:00"):null,t=p?new Date(p+"T23:59:59"):null;return(n.sessionData||[]).filter((a=>{const s=new Date(a.session_date);return!(e&&s<e)&&!(t&&s>t)}))}),[n,h,p]),O=(0,s.useMemo)((()=>null!==n&&void 0!==n&&n.assigned_programs?n.assigned_programs:[]),[n]);return t&&n?(0,We.jsxs)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center z-50 p-4",children:[(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col transform transition-all",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center p-5 border-b border-gray-200",children:[(0,We.jsxs)("h2",{className:"text-xl font-semibold text-gray-800",children:["Gerar Relat\xf3rio Consolidado para: ",(0,We.jsx)("span",{className:"text-indigo-600",children:n.name})]}),(0,We.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,We.jsx)(Vn,{icon:lo,className:"text-lg"})})]}),(0,We.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,We.jsxs)("div",{className:"p-6 space-y-6",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-4",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,We.jsxs)("h3",{className:"text-sm font-semibold text-indigo-800 flex items-center",children:[(0,We.jsx)(Vn,{icon:Ni,className:"mr-2"}),"Dados Profissionais"]}),(0,We.jsxs)("button",{onClick:()=>{S(!0)},className:"text-xs text-indigo-600 hover:text-indigo-800 flex items-center transition-colors",children:[(0,We.jsx)(Vn,{icon:vr,className:"mr-1"}),A?"Configurar":"Editar"]})]}),A?(0,We.jsx)("div",{className:"text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded p-2",children:"\u26a0\ufe0f \xc9 necess\xe1rio configurar seus dados profissionais antes de gerar o relat\xf3rio."}):C?(0,We.jsxs)("div",{className:"text-sm text-indigo-700 space-y-1",children:[(0,We.jsxs)("p",{children:[(0,We.jsx)("strong",{children:"Nome:"})," ",(null===i||void 0===i?void 0:i.full_name)||(null===i||void 0===i?void 0:i.name)]}),(0,We.jsxs)("p",{children:[(0,We.jsx)("strong",{children:"Registro:"})," ",C.professional_id]}),(0,We.jsxs)("p",{children:[(0,We.jsx)("strong",{children:"Qualifica\xe7\xf5es:"})," ",C.qualifications]})]}):(0,We.jsx)("div",{className:"text-sm text-gray-500",children:"Carregando dados profissionais..."})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Per\xedodo do Relat\xf3rio"}),(0,We.jsx)(Dh,{startDate:h,endDate:p,onStartDateChange:m,onEndDateChange:f,onClear:()=>{m(""),f("")},showInfo:!1}),(0,We.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Padr\xe3o: \xfaltimo m\xeas. Limpe os filtros para incluir todos os dados."})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[(0,We.jsxs)("div",{className:"lg:col-span-3",children:[(0,We.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-3 gap-2",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"An\xe1lise e Observa\xe7\xf5es do Terapeuta"}),(0,We.jsxs)("button",{onClick:async()=>{if(n){j(!0),w("");try{const e={startDate:h||null,endDate:p||null},t=await qh.generateConventionalReportSuggestion(n.id,D,e);v(t),x(!0)}catch(Ff){console.error("Erro ao gerar sugest\xe3o:",Ff),w(Ff.message||"Erro ao gerar sugest\xe3o de texto.")}finally{j(!1)}}},disabled:y||!n||A,className:"flex items-center px-3 py-1.5 text-xs bg-gradient-to-r from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700 text-white font-medium rounded-md transition duration-150 ease-in-out shadow hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,We.jsx)(Vn,{icon:y?xo:Co,className:"mr-1.5 ".concat(y?"fa-spin":"")}),y?"Gerando...":"Sugerir Texto"]})]}),(0,We.jsxs)("div",{className:"mb-3 space-y-2",children:[(0,We.jsxs)("p",{className:"text-xs text-gray-500",children:['Este texto ser\xe1 inclu\xeddo no in\xedcio do relat\xf3rio em PDF. Use o bot\xe3o "Sugerir Texto" para gerar automaticamente uma an\xe1lise baseada nos dados do paciente.',(0,We.jsx)("span",{className:"hidden sm:inline",children:" Melhor experi\xeancia em desktop para formata\xe7\xe3o avan\xe7ada."})]}),(0,We.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-md p-2",children:(0,We.jsxs)("p",{className:"text-xs text-amber-800",children:[(0,We.jsx)("strong",{children:"\u26a0\ufe0f Responsabilidade Profissional:"})," A sugest\xe3o autom\xe1tica \xe9 baseada apenas em m\xe9tricas quantitativas. \xc9 ",(0,We.jsx)("strong",{children:"imprescind\xedvel"})," que o terapeuta revise, adapte e complemente o texto com sua an\xe1lise cl\xednica qualitativa, considerando aspectos comportamentais, contextuais e individuais do paciente que n\xe3o s\xe3o capturados pelos dados num\xe9ricos."]})})]}),N&&(0,We.jsx)("div",{className:"mb-3 p-2 bg-red-50 border border-red-200 rounded-md",children:(0,We.jsx)("p",{className:"text-xs text-red-600",children:N})}),(0,We.jsx)(Rh,{value:l,onChange:c,placeholder:"Escreva aqui a sua an\xe1lise qualitativa ou use o bot\xe3o 'Sugerir Texto' para gerar automaticamente...",rows:8,disabled:A})]}),(0,We.jsx)("div",{className:"lg:col-span-1",children:(0,We.jsx)(Ih,{sessionData:D,startDate:h,endDate:p,assignedPrograms:O,className:"sticky top-4"})})]}),(0,We.jsxs)("div",{className:"border-t pt-6",children:[(0,We.jsxs)("h3",{className:"text-lg font-semibold text-gray-700 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:ni,className:"mr-3 text-indigo-500"}),"Pr\xe9-visualiza\xe7\xe3o do Progresso no Per\xedodo"]}),(0,We.jsx)("div",{className:"space-y-4",children:O.length>0?(()=>{const e=O.reduce(((e,t)=>{const a=t.discipline_name;return e[a]||(e[a]=[]),e[a].push(t),e}),{});return Object.keys(e).sort().map((t=>(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border border-indigo-200 rounded-lg p-3 mb-3",children:(0,We.jsx)("h4",{className:"text-sm font-semibold text-indigo-800",children:t})}),(0,We.jsx)("div",{className:"space-y-3 mb-6",children:e[t].map((e=>(0,We.jsx)(Uh,{program:e,sessionData:D},e.program_id)))})]},t)))})():(0,We.jsx)("p",{className:"text-center text-gray-500 py-4",children:"Nenhum programa para exibir."})})]}),d&&(0,We.jsx)("p",{className:"text-red-500 text-sm text-center",children:d})]})}),(0,We.jsxs)("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3 mt-auto",children:[(0,We.jsx)("button",{onClick:a,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancelar"}),(0,We.jsxs)("button",{onClick:()=>{n&&l.trim()&&!A&&L(!0)},disabled:A||!l.trim(),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-6 rounded-md text-sm transition duration-150 ease-in-out shadow hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-60 flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:li}),(0,We.jsx)("span",{children:A?"Configure Dados Profissionais":l.trim()?"Visualizar PDF":"Adicione Texto para Visualizar"})]})]})]}),(0,We.jsx)(Th,{isOpen:g,onClose:()=>{x(!1),v(""),w("")},suggestedText:b,currentText:l,onUseSuggestion:e=>{c(e)},onAppendSuggestion:e=>{c(e)},isGenerating:y}),(0,We.jsx)(Mh,{isOpen:_,onClose:()=>S(!1),onSave:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)return console.error("Erro ao salvar dados profissionais:",t),void P(!0);if(e&&(k(e),P(!1),S(!1),o({professional_id:e.professional_id,qualifications:e.qualifications,professional_signature:e.professional_signature}),r&&n))try{console.log("\ud83d\udd04 Re-selecionando paciente ap\xf3s salvar dados profissionais..."),await r(n.id),console.log("\u2705 Paciente re-selecionado com sucesso no consolidado")}catch(Ff){console.warn("\u26a0\ufe0f Aviso: N\xe3o foi poss\xedvel re-selecionar paciente:",Ff)}},currentUser:i,title:"Configurar Dados Profissionais para Relat\xf3rio"}),(0,We.jsx)(zh,{isOpen:E,onClose:()=>{L(!1)},patientData:n,reportText:l,professionalData:C?(0,Ie.A)((0,Ie.A)({},C),{},{professional_name:(null===i||void 0===i?void 0:i.full_name)||(null===i||void 0===i?void 0:i.name)||"Profissional"}):null,sessionData:D,assignedPrograms:O,onUpdateReportText:e=>{c(e)}})]}):null};if("undefined"!==typeof document&&!document.querySelector("#clients-page-styles")){const e=document.createElement("style");e.id="clients-page-styles",e.textContent="\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  .animate-fade-in {\n    animation: fadeIn 0.6s ease-out;\n  }\n",document.head.appendChild(e)}const Wh=()=>{const{selectedPatient:e,isLoading:t,isPatientFormOpen:a,closePatientForm:n,patientToEdit:r,addPatient:i,editPatient:o,isReportModalOpen:l,closeReportModal:c}=dt(),[d,u]=(0,s.useState)(null);(0,s.useEffect)((()=>{u(null)}),[e]);return t?(0,We.jsx)("div",{className:"flex items-center justify-center h-full text-center p-10",children:(0,We.jsxs)("div",{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-4xl text-indigo-500 mb-4"}),(0,We.jsx)("p",{className:"text-gray-500",children:"A carregar dados dos clientes..."})]})}):(0,We.jsxs)(We.Fragment,{children:[e?(0,We.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:(0,We.jsxs)("div",{className:"space-y-8 p-6",children:[(0,We.jsx)("div",{className:"animate-fade-in",children:(0,We.jsx)(cd,{})}),(0,We.jsxs)("div",{className:"animate-fade-in",children:[(0,We.jsx)("div",{className:"mb-6",children:(0,We.jsxs)("div",{className:"flex items-center mb-4",children:[(0,We.jsx)("div",{className:"w-1 h-8 bg-gradient-to-b from-indigo-500 to-purple-600 rounded-full mr-4"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83c\udfaf Gest\xe3o de Programas"}),(0,We.jsx)("p",{className:"text-gray-600 text-sm",children:"Selecione um programa \xe0 esquerda para visualizar o progresso detalhado"})]})]})}),(0,We.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[(0,We.jsx)("div",{className:"lg:col-span-2",children:(0,We.jsx)(pd,{onProgramSelect:e=>{u(e)},selectedProgramId:null===d||void 0===d?void 0:d.assignment_id})}),(0,We.jsx)("div",{className:"lg:col-span-3",children:(0,We.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden min-h-[600px]",children:d?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 px-6 py-4",children:[(0,We.jsx)("h3",{className:"text-xl font-bold text-white flex items-center",children:"\ud83d\udcc8 Progresso do Programa"}),(0,We.jsx)("p",{className:"text-blue-100 text-sm mt-1 truncate",children:d.program_name})]}),(0,We.jsx)("div",{className:"p-6",children:(0,We.jsx)(Lh,{program:d,assignment:d})})]}):(0,We.jsx)("div",{className:"flex items-center justify-center h-full text-center p-8",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-blue-100 to-indigo-100 p-6 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:(0,We.jsx)("span",{className:"text-4xl",children:"\ud83d\udcc8"})}),(0,We.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-3",children:"Selecione um Programa"}),(0,We.jsx)("p",{className:"text-gray-500 leading-relaxed max-w-md mx-auto",children:"Escolha um programa na lista ao lado para visualizar gr\xe1ficos de progresso, hist\xf3rico de sess\xf5es e dados detalhados de desempenho."}),(0,We.jsxs)("div",{className:"mt-6 flex items-center justify-center space-x-2 text-sm text-gray-400",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse"}),(0,We.jsx)("span",{children:"Aguardando sele\xe7\xe3o"})]})]})})})})]})]})]})}):(0,We.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 flex items-center justify-center p-8",children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 p-8 rounded-full w-32 h-32 mx-auto mb-8 flex items-center justify-center shadow-lg",children:(0,We.jsx)(Vn,{icon:so,className:"text-6xl text-indigo-600"})}),(0,We.jsx)("h2",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Bem-vindo \xe0 Gest\xe3o de Clientes"}),(0,We.jsx)("p",{className:"text-lg text-gray-600 mb-6 max-w-lg mx-auto leading-relaxed",children:"Selecione um cliente na barra lateral para acessar informa\xe7\xf5es detalhadas, gerenciar programas de interven\xe7\xe3o e acompanhar o progresso."}),(0,We.jsx)("div",{className:"bg-white border-2 border-dashed border-indigo-300 rounded-lg p-6 max-w-md mx-auto",children:(0,We.jsxs)("div",{className:"flex items-center justify-center space-x-3 text-indigo-600",children:[(0,We.jsx)("div",{className:"w-3 h-3 bg-indigo-500 rounded-full animate-pulse"}),(0,We.jsx)("span",{className:"font-medium",children:"Aguardando sele\xe7\xe3o de cliente"})]})})]})}),(0,We.jsx)(ud,{isOpen:a,onClose:n,onSave:async e=>{r?await o(e):await i(e)},patientToEdit:r}),(0,We.jsx)(Hh,{isOpen:l,onClose:c})]})},Vh=e=>{let{program:t,onAssign:a,isAssigning:s,isPatientSelected:n,isAssigned:r}=e;const i=t.objective?t.objective:"Nenhum objetivo definido.",o=(e=>e.skill&&e.skill.includes("vbmapp"))(t);return(0,We.jsxs)("div",{className:"\n      bg-white border-2 rounded-xl shadow-sm flex flex-col justify-between transition-all duration-300 hover:shadow-lg transform hover:-translate-y-1\n      ".concat(r?"border-green-200 bg-gradient-to-br from-green-50 to-emerald-50":"border-gray-200 hover:border-indigo-300","\n    "),children:[(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,We.jsxs)("div",{className:"flex-1 pr-3",children:[(0,We.jsx)("h3",{className:"text-lg font-bold leading-tight ".concat(r?"text-green-800":"text-gray-800"),children:t.name}),o&&(0,We.jsx)("div",{className:"mt-2",children:(0,We.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-teal-100 to-cyan-100 text-teal-800 border border-teal-200",children:[(0,We.jsx)(Vn,{icon:Er,className:"mr-1 text-teal-600"}),"VB-MAPP"]})})]}),r&&(0,We.jsx)("div",{className:"bg-green-100 p-2 rounded-full",children:(0,We.jsx)(Vn,{icon:Do,className:"text-green-600 text-sm"})})]}),(0,We.jsxs)("div",{className:"mb-4",children:[(0,We.jsxs)("div",{className:"flex items-center mb-2",children:[(0,We.jsx)(Vn,{icon:_r,className:"text-indigo-500 mr-2"}),(0,We.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:"Objetivos"})]}),(0,We.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",title:i,children:i.length>120?"".concat(i.substring(0,120),"..."):i})]}),(()=>{const e=(e=>{if(!e)return null;try{const t="string"===typeof e?JSON.parse(e):e,a=new Set;return t.forEach((e=>{e.sd&&a.add("SD"),(e.r||e.R)&&a.add("R"),(e.c||e.C)&&a.add("C"),e.dica&&a.add("Dica")})),a.size>0?Array.from(a).sort():null}catch(If){return null}})(t.procedure);return e&&(0,We.jsxs)("div",{className:"mb-4",children:[(0,We.jsxs)("div",{className:"flex items-center mb-2",children:[(0,We.jsx)(Vn,{icon:_i,className:"text-emerald-500 mr-2"}),(0,We.jsx)("h4",{className:"text-sm font-semibold text-gray-700",children:"Componentes ABA"})]}),(0,We.jsx)("div",{className:"flex flex-wrap gap-1",children:e.map((e=>(0,We.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",title:"SD"===e?"Est\xedmulo Discriminativo":"R"===e?"Resposta":"C"===e?"Consequ\xeancia":"Dica"===e?"Prompt":e,children:e},e)))})]})})(),t.tags&&t.tags.length>0&&(0,We.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[t.tags.slice(0,3).map(((e,t)=>{const a=(e=>({Mando:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"},Tato:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"},Ecoico:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200"},Intraverbal:{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-200"}}[e]||{bg:"bg-gray-100",text:"text-gray-800",border:"border-gray-200"}))(e);return(0,We.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ".concat(a.bg," ").concat(a.text," ").concat(a.border),children:[(0,We.jsx)(Vn,{icon:vi,className:"mr-1"}),e]},t)})),t.tags.length>3&&(0,We.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 border border-gray-200",children:["+",t.tags.length-3," mais"]})]})]}),(0,We.jsx)("div",{className:"border-t p-4 ".concat(r?"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200":"bg-gray-50 border-gray-200"),children:r?(0,We.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 py-3 rounded-lg flex items-center justify-center space-x-2 shadow-sm",children:[(0,We.jsx)("div",{className:"bg-white bg-opacity-20 p-1 rounded-full",children:(0,We.jsx)(Vn,{icon:Do,className:"text-sm"})}),(0,We.jsx)("span",{className:"font-semibold text-sm",children:"J\xe1 Atribu\xeddo"})]}):(0,We.jsx)("button",{onClick:()=>a(t.id),disabled:!n||s,title:n?"Atribuir ao cliente":"Selecione um cliente para atribuir",className:"\n            px-4 py-3 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center justify-center space-x-2 w-full shadow-sm transform\n            ".concat(n?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white hover:from-indigo-600 hover:to-purple-700 hover:scale-105 active:scale-95":"bg-gray-200 text-gray-500 cursor-not-allowed","\n          "),children:s?(0,We.jsx)(Vn,{icon:xo,className:"fa-spin"}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("div",{className:"p-1 rounded-full ".concat(n?"bg-white bg-opacity-20":"bg-gray-300"),children:(0,We.jsx)(Vn,{icon:io,className:"text-sm"})}),(0,We.jsx)("span",{children:"Atribuir Programa"})]})})})]})},Gh=e=>{let{program:t,onEdit:a,onDelete:n,onAssign:r,isDeleting:i,hasAssignments:o=!1,assignmentCount:l=0,progressCount:c=0,userIsAdmin:d=!1,isAssigned:u=!1,isAssigning:h=!1,isPatientSelected:m=!1}=e;const[p,f]=(0,s.useState)(!1),[g,x]=(0,s.useState)(1),b=t.created_by||!0,v=!o&&0===c;return(0,We.jsxs)("div",{className:"bg-white border border-purple-200 rounded-lg shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border-b border-purple-100 p-4",children:(0,We.jsxs)("div",{className:"flex justify-between items-start",children:[(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,We.jsxs)("span",{className:"bg-purple-100 text-purple-800 text-xs font-medium px-2 py-1 rounded-full",children:[(0,We.jsx)(Vn,{icon:Oi,className:"mr-1"}),"Customizado"]}),t.program_slug&&(0,We.jsxs)("span",{className:"bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded-full",children:[(0,We.jsx)(Vn,{icon:vi,className:"mr-1"}),t.program_slug]})]}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800 leading-tight",children:t.name})]}),(0,We.jsxs)("div",{className:"flex space-x-2 ml-4",children:[b&&(0,We.jsx)("button",{onClick:()=>null===a||void 0===a?void 0:a(t),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar programa",children:(0,We.jsx)(Vn,{icon:vr})}),d&&(0,We.jsx)("button",{onClick:()=>{f(!0),x(1)},disabled:i,className:"p-2 rounded-lg transition-colors ".concat(v?"text-red-600 hover:bg-red-50":"text-gray-400 cursor-not-allowed"),title:v?"Remover programa":"N\xe3o \xe9 poss\xedvel remover: h\xe1 dados associados",children:i?(0,We.jsx)(Vn,{icon:xo,className:"fa-spin"}):(0,We.jsx)(Vn,{icon:gi})})]})]})}),(0,We.jsxs)("div",{className:"p-4",children:[t.objective&&(0,We.jsxs)("div",{className:"mb-4",children:[(0,We.jsxs)("div",{className:"flex items-center text-gray-600 text-sm mb-1",children:[(0,We.jsx)(Vn,{icon:_r,className:"mr-2"}),(0,We.jsx)("span",{className:"font-medium",children:"Objetivo"})]}),(0,We.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:t.objective})]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.trials&&(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-gray-500",children:"Tentativas:"}),(0,We.jsx)("span",{className:"ml-1 font-medium",children:t.trials})]}),t.created_by_name&&(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:Sr,className:"text-gray-400 mr-1"}),(0,We.jsx)("span",{className:"text-gray-600 truncate",children:t.created_by_name})]})]}),(l>0||c>0)&&(0,We.jsxs)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,We.jsxs)("div",{className:"flex items-center text-yellow-800 text-sm",children:[(0,We.jsx)(Vn,{icon:Mo,className:"mr-2"}),(0,We.jsx)("span",{className:"font-medium",children:"Programa em uso"})]}),(0,We.jsxs)("div",{className:"mt-1 text-yellow-700 text-xs",children:[l>0&&"".concat(l," atribui\xe7\xe3o(\xf5es)"),l>0&&c>0&&" \u2022 ",c>0&&"".concat(c," registro(s) de progresso")]})]}),m&&r&&(0,We.jsx)("div",{className:"mt-4",children:u?(0,We.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 py-3 rounded-lg flex items-center justify-center space-x-2 shadow-sm",children:[(0,We.jsx)("div",{className:"bg-white bg-opacity-20 p-1 rounded-full",children:(0,We.jsx)(Vn,{icon:Do,className:"text-sm"})}),(0,We.jsx)("span",{className:"font-semibold text-sm",children:"J\xe1 Atribu\xeddo"})]}):(0,We.jsx)("button",{onClick:()=>r(t),disabled:!m||h,title:m?"Atribuir ao cliente":"Selecione um cliente para atribuir",className:"\n                  px-4 py-3 rounded-lg font-semibold text-sm transition-all duration-200 flex items-center justify-center space-x-2 w-full shadow-sm transform\n                  ".concat(m?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white hover:from-indigo-600 hover:to-purple-700 hover:scale-105 active:scale-95":"bg-gray-200 text-gray-500 cursor-not-allowed","\n                "),children:h?(0,We.jsx)(Vn,{icon:xo,className:"fa-spin"}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("div",{className:"p-1 rounded-full ".concat(m?"bg-white bg-opacity-20":"bg-gray-300"),children:(0,We.jsx)(Vn,{icon:io,className:"text-sm"})}),(0,We.jsx)("span",{children:"Atribuir Programa"})]})})})]}),p&&(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,We.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsxs)("div",{className:"flex items-center mb-4",children:[(0,We.jsx)("div",{className:"bg-red-100 p-3 rounded-full mr-4",children:(0,We.jsx)(Vn,{icon:To,className:"text-red-600 text-xl"})}),(0,We.jsx)("div",{children:(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:1===g?"Confirmar Remo\xe7\xe3o":"ATEN\xc7\xc3O: Perda de Dados"})})]}),1===g?(0,We.jsxs)("div",{className:"mb-6",children:[(0,We.jsx)("p",{className:"text-gray-700 mb-4",children:"Tem certeza que deseja remover o programa:"}),(0,We.jsxs)("p",{className:"font-medium text-gray-900 bg-gray-50 p-3 rounded border-l-4 border-purple-500",children:['"',t.name,'"']}),o||c>0?(0,We.jsxs)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,We.jsxs)("div",{className:"flex items-center text-red-800 mb-2",children:[(0,We.jsx)(Vn,{icon:To,className:"mr-2"}),(0,We.jsx)("span",{className:"font-semibold",children:"CUIDADO!"})]}),(0,We.jsx)("p",{className:"text-red-700 text-sm",children:"Este programa possui dados associados que ser\xe3o PERMANENTEMENTE perdidos:"}),(0,We.jsxs)("ul",{className:"mt-2 text-red-700 text-sm list-disc list-inside",children:[l>0&&(0,We.jsxs)("li",{children:[l," atribui\xe7\xe3o(\xf5es) a pacientes"]}),c>0&&(0,We.jsxs)("li",{children:[c," registro(s) de progresso/sess\xf5es"]})]})]}):(0,We.jsx)("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:(0,We.jsx)("p",{className:"text-green-700 text-sm",children:"\u2713 Este programa n\xe3o possui dados associados. \xc9 seguro remov\xea-lo."})})]}):(0,We.jsxs)("div",{className:"mb-6",children:[(0,We.jsx)("p",{className:"text-red-700 font-medium mb-4",children:"\ud83d\udea8 \xdaLTIMA CONFIRMA\xc7\xc3O"}),(0,We.jsx)("p",{className:"text-gray-700 mb-4",children:"Ao continuar, TODOS os dados abaixo ser\xe3o PERMANENTEMENTE perdidos:"}),(0,We.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,We.jsxs)("ul",{className:"text-red-800 text-sm space-y-1",children:[(0,We.jsx)("li",{children:"\u2022 O programa customizado"}),(0,We.jsx)("li",{children:"\u2022 Todas as atribui\xe7\xf5es aos pacientes"}),(0,We.jsx)("li",{children:"\u2022 Todo o hist\xf3rico de progresso/sess\xf5es"}),(0,We.jsx)("li",{children:"\u2022 Relat\xf3rios e dados anal\xedticos"})]})}),(0,We.jsx)("p",{className:"text-gray-700 mt-4 text-sm",children:(0,We.jsx)("strong",{children:"Esta a\xe7\xe3o N\xc3O pode ser desfeita!"})})]}),(0,We.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,We.jsx)("button",{onClick:()=>{f(!1),x(1)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),1===g&&(o||c>0)?(0,We.jsx)("button",{onClick:()=>x(2),className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:"Continuar Mesmo Assim"}):(0,We.jsx)("button",{onClick:async()=>{if(1===g&&(o||c>0))x(2);else try{await(0,st.VX)(t.id),null===n||void 0===n||n(t.id),f(!1)}catch(e){console.error("Erro ao deletar programa:",e)}},className:"px-4 py-2 text-white rounded-lg ".concat(v?"bg-red-600 hover:bg-red-700":"bg-red-800 hover:bg-red-900"),children:2===g?"CONFIRMAR REMO\xc7\xc3O":"Remover Programa"})]})]})})})]})},Yh=e=>{let{onProgramSelect:t,onAssign:a,assigningId:n,assignedPrograms:r=[],isPatientSelected:i=!1,disciplineName:o="",disciplineDisplayName:l="",disciplineColors:c={}}=e;const[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(!1),[p,f]=(0,s.useState)([]),[g,x]=(0,s.useState)(!1),[b,v]=(0,s.useState)(null),[y,j]=(0,s.useState)(!1),N=(0,s.useRef)(null),w=(0,s.useRef)(null),_=(0,s.useCallback)((async e=>{if(e.trim()){x(!0);try{const t=await(0,st.sp)(e,o);f(t.slice(0,8))}catch(t){console.error("Erro na busca:",t),f([])}finally{x(!1)}}else f([])}),[o]);(0,s.useEffect)((()=>{const e=setTimeout((()=>{_(d)}),300);return()=>clearTimeout(e)}),[d,_]),(0,s.useEffect)((()=>{m(d.length>0&&(p.length>0||g))}),[d,p,g]),(0,s.useEffect)((()=>{const e=e=>{N.current&&!N.current.contains(e.target)&&w.current&&!w.current.contains(e.target)&&m(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);const S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"view",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;"assign"===t&&a?(a(e.id),u(""),m(!1)):"view"===t&&(s&&s.stopPropagation(),v(e),j(!0))},C=e=>Array.isArray(r)&&r.some((t=>t.program_id===e)),k=e=>{const t=[];return e.area_name&&e.area_name!==e.sub_area_name&&t.push(e.area_name),e.sub_area_name&&t.push(e.sub_area_name),t.join(" \u2192 ")};return(0,We.jsxs)("div",{className:"relative mb-6",children:[(0,We.jsxs)("div",{className:"relative",ref:N,children:[(0,We.jsx)("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 z-10",children:(0,We.jsx)(Vn,{icon:Ki,className:"".concat(c.text||"text-gray-400"," transition-colors")})}),(0,We.jsx)("input",{type:"text",placeholder:"Buscar programas de ".concat(l||o,"..."),value:d,onChange:e=>u(e.target.value),className:"\n            w-full pl-10 pr-12 py-3 \n            border-2 rounded-lg \n            placeholder-gray-400 text-gray-800 \n            focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50 \n            transition-all duration-200 border-gray-300 focus:border-blue-500\n            ".concat(h?"rounded-b-none":"","\n          ")}),d&&(0,We.jsx)("button",{onClick:()=>{var e;u(""),m(!1),null===(e=N.current)||void 0===e||e.focus()},className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,We.jsx)(Vn,{icon:lo})})]}),h&&(0,We.jsx)("div",{ref:w,className:"\n            absolute top-full left-0 right-0 z-50 \n            bg-white border-2 border-t-0 rounded-b-lg shadow-xl\n            max-h-96 overflow-y-auto border-gray-300\n          ",children:g?(0,We.jsxs)("div",{className:"px-4 py-6 text-center text-gray-500",children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-2xl mb-2 opacity-50"}),(0,We.jsx)("p",{children:"Buscando programas..."})]}):p.length>0?(0,We.jsx)("div",{className:"py-2",children:p.map(((e,t)=>{const a=C(e.id),s=n===e.id;return(0,We.jsx)("div",{className:"\n                      px-4 py-3 hover:bg-gray-50 transition-colors\n                      ".concat(t<p.length-1?"border-b border-gray-100":"","\n                    "),children:(0,We.jsxs)("div",{className:"flex items-start justify-between",children:[(0,We.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,We.jsx)(Vn,{icon:Eo,className:"text-sm ".concat(c.text||"text-gray-500")}),(0,We.jsx)("h4",{className:"font-semibold text-gray-800 truncate",children:e.name}),a&&(0,We.jsx)("span",{className:"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full",children:"Atribu\xeddo"})]}),(0,We.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:k(e)}),(0,We.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:e.objective||"Sem objetivo definido"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-2 ml-3",children:[(0,We.jsx)("button",{onClick:t=>S(e,"view",t),className:"p-2 text-gray-500 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Visualizar programa",children:(0,We.jsx)(Vn,{icon:li,className:"text-sm"})}),i&&!a&&(0,We.jsx)("button",{onClick:()=>S(e,"assign"),disabled:s,className:"\n                              p-2 rounded-lg transition-colors text-sm\n                              ".concat(s?"text-gray-400 cursor-not-allowed":"text-white bg-blue-600 hover:bg-blue-700","\n                            "),title:"Atribuir programa",children:(0,We.jsx)(Vn,{icon:s?xo:io,className:s?"fa-spin":""})})]})]})},e.id)}))}):(0,We.jsxs)("div",{className:"px-4 py-6 text-center text-gray-500",children:[(0,We.jsx)(Vn,{icon:Ki,className:"text-2xl mb-2 opacity-50"}),(0,We.jsx)("p",{children:"Nenhum programa encontrado"}),(0,We.jsx)("p",{className:"text-xs mt-1",children:"Tente buscar por nome, objetivo ou \xe1rea"})]})}),y&&b&&(0,We.jsx)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black bg-opacity-50 p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,We.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-1",children:b.name}),(0,We.jsxs)("p",{className:"text-sm text-gray-500",children:[b.discipline_name," \u2192 ",b.area_name," \u2192 ",b.sub_area_name]})]}),(0,We.jsx)("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600 p-2",children:(0,We.jsx)(Vn,{icon:lo})})]})}),(0,We.jsxs)("div",{className:"p-6 space-y-4",children:[b.objective&&(0,We.jsxs)("div",{children:[(0,We.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"Objetivo:"}),(0,We.jsx)("p",{className:"text-gray-600 leading-relaxed",children:b.objective})]}),b.skill&&(0,We.jsxs)("div",{children:[(0,We.jsx)("h4",{className:"font-semibold text-gray-700 mb-2",children:"Habilidade:"}),(0,We.jsx)("p",{className:"text-gray-600 leading-relaxed",children:b.skill})]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[b.program_slug&&(0,We.jsxs)("div",{children:[(0,We.jsx)("h4",{className:"font-semibold text-gray-700 mb-1",children:"Tag:"}),(0,We.jsx)("p",{className:"text-gray-600",children:b.program_slug})]}),b.trials&&(0,We.jsxs)("div",{children:[(0,We.jsx)("h4",{className:"font-semibold text-gray-700 mb-1",children:"Tentativas:"}),(0,We.jsx)("p",{className:"text-gray-600",children:b.trials})]})]})]}),(0,We.jsx)("div",{className:"p-6 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsx)("button",{onClick:()=>j(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Fechar"}),i&&!C(b.id)&&(0,We.jsx)("button",{onClick:()=>{S(b,"assign"),j(!1)},disabled:n===b.id,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:n===b.id?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin mr-2"}),"Atribuindo..."]}):"Atribuir Programa"})]})})]})})]})},$h=e=>{let{isOpen:t,onClose:a,onSuccess:n}=e;const[r,i]=(0,s.useState)({discipline:"",area:"",sub_area_id:"",name:"",objective:"",program_slug:"",skill:"",materials:[""],procedure:[{step:"",description:""}],criteria_for_advancement:"",trials:5}),[o,l]=(0,s.useState)({}),[c,d]=(0,s.useState)({}),[u,h]=(0,s.useState)({}),[m,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!0),[x,b]=(0,s.useState)("");(0,s.useEffect)((()=>{t&&v()}),[t]);const v=async()=>{try{g(!0);const e=await(0,st.uc)();l(e)}catch(x){console.error("Erro ao buscar hierarquia:",x),b("Erro ao carregar disciplinas. Tente novamente.")}finally{g(!1)}},y=(e,t,a)=>{const s=[...r.procedure];s[e]=(0,Ie.A)((0,Ie.A)({},s[e]),{},{[t]:a}),i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:s})))},j=async e=>{if(e.preventDefault(),r.sub_area_id?r.name.trim()?r.objective.trim()?r.program_slug.trim()?r.skill.trim()?r.materials.every((e=>!e.trim()))?(b("Adicione pelo menos um material."),0):r.procedure.every((e=>!e.step.trim()&&!e.description.trim()))?(b("Adicione pelo menos um passo do procedimento."),0):r.criteria_for_advancement.trim()?!(!r.trials||r.trials<1||r.trials>999)||(b("N\xfamero de tentativas deve ser entre 1 e 999."),0):(b("Crit\xe9rios para avan\xe7o s\xe3o obrigat\xf3rios."),0):(b("Habilidade ABA \xe9 obrigat\xf3ria."),0):(b("Tag do programa \xe9 obrigat\xf3ria."),0):(b("Objetivo \xe9 obrigat\xf3rio."),0):(b("Nome do programa \xe9 obrigat\xf3rio."),0):(b("Selecione uma disciplina, \xe1rea e sub-\xe1rea."),0)){p(!0),b("");try{const e={sub_area_id:r.sub_area_id,name:r.name.trim(),objective:r.objective.trim(),program_slug:r.program_slug.trim(),skill:r.skill.trim(),materials:r.materials.filter((e=>e.trim())),procedure:r.procedure.filter((e=>e.step.trim()||e.description.trim())),criteria_for_advancement:r.criteria_for_advancement.trim(),trials:parseInt(r.trials)};await(0,st.og)(e),i({discipline:"",area:"",sub_area_id:"",name:"",objective:"",program_slug:"",skill:"",materials:[""],procedure:[{step:"",description:""}],criteria_for_advancement:"",trials:5}),null===n||void 0===n||n(),a()}catch(x){var t,s;console.error("Erro ao criar programa:",x),b((null===(t=x.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Erro ao criar programa customizado.")}finally{p(!1)}}},N=()=>{m||(b(""),a())};return t?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("style",{children:"\n        .modal-scroll-content {\n          scrollbar-width: thin;\n          scrollbar-color: #cbd5e0 #f7fafc;\n        }\n        .modal-scroll-content::-webkit-scrollbar {\n          width: 8px;\n        }\n        .modal-scroll-content::-webkit-scrollbar-track {\n          background: #f7fafc;\n          border-radius: 4px;\n        }\n        .modal-scroll-content::-webkit-scrollbar-thumb {\n          background: #cbd5e0;\n          border-radius: 4px;\n        }\n        .modal-scroll-content::-webkit-scrollbar-thumb:hover {\n          background: #a0aec0;\n        }\n      "}),(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl h-[95vh] sm:h-[90vh] flex flex-col overflow-hidden",style:{maxHeight:window.innerHeight>600?"90vh":"95vh",minHeight:window.innerHeight>600?"500px":"300px",height:window.innerHeight>600?"90vh":"95vh"},children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 flex justify-between items-center",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:(0,We.jsx)(Vn,{icon:io,className:"text-xl"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h2",{className:"text-xl font-bold",children:"Criar Programa Customizado"}),(0,We.jsx)("p",{className:"text-purple-100 text-sm",children:"Programa espec\xedfico para sua cl\xednica"})]})]}),(0,We.jsx)("button",{onClick:N,disabled:m,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors disabled:opacity-50",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsx)("div",{className:"flex-1 overflow-y-auto p-6 modal-scroll-content",style:{minHeight:0,maxHeight:window.innerHeight>600?"calc(90vh - 140px)":"calc(95vh - 120px)",overflowY:"auto",WebkitOverflowScrolling:"touch"},children:f?(0,We.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-3xl text-purple-500 mb-4"}),(0,We.jsx)("p",{className:"text-gray-600",children:"Carregando disciplinas..."})]})}):(0,We.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[x&&(0,We.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,We.jsx)("p",{className:"text-red-800 text-sm",children:x})}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Kr,className:"mr-2 text-purple-500"}),"Disciplina *"]}),(0,We.jsxs)("select",{value:r.discipline,onChange:e=>{return t=e.target.value,i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{discipline:t,area:"",sub_area_id:""}))),void(t&&o[t]?(d(o[t].areas),h({})):(d({}),h({})));var t},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[(0,We.jsx)("option",{value:"",children:"Selecione uma disciplina"}),Object.keys(o).map((e=>(0,We.jsx)("option",{value:e,children:e},e)))]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\xc1rea *"}),(0,We.jsxs)("select",{value:r.area,onChange:e=>{return t=e.target.value,i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{area:t,sub_area_id:""}))),void(t&&c[t]?h(c[t].sub_areas):h({}));var t},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:!r.discipline,required:!0,children:[(0,We.jsx)("option",{value:"",children:"Selecione uma \xe1rea"}),Object.keys(c).map((e=>(0,We.jsx)("option",{value:e,children:e},e)))]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sub-\xe1rea *"}),(0,We.jsxs)("select",{value:Object.keys(u).find((e=>u[e].id===r.sub_area_id))||"",onChange:e=>(e=>{var t;const a=null===(t=u[e])||void 0===t?void 0:t.id;i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{sub_area_id:a})))})(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:!r.area,required:!0,children:[(0,We.jsx)("option",{value:"",children:"Selecione uma sub-\xe1rea"}),Object.keys(u).map((e=>(0,We.jsx)("option",{value:e,children:e},e)))]})]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:vi,className:"mr-2 text-purple-500"}),"Nome do Programa *"]}),(0,We.jsx)("input",{type:"text",value:r.name,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{name:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: Identifica\xe7\xe3o de Objetos",required:!0})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:ko,className:"mr-2 text-purple-500"}),"Tag/Slug *"]}),(0,We.jsx)("input",{type:"text",value:r.program_slug,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{program_slug:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: Mando, Tato, Ecoico",required:!0})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:_r,className:"mr-2 text-purple-500"}),"Objetivo *"]}),(0,We.jsx)("textarea",{value:r.objective,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{objective:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:"3",placeholder:"Descreva o objetivo terap\xeautico deste programa...",required:!0})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Oi,className:"mr-2 text-purple-500"}),"Habilidade ABA *"]}),(0,We.jsx)("input",{type:"text",value:r.skill,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{skill:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: Linguagem Receptiva, Habilidades Motoras",required:!0})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:xr,className:"mr-2 text-purple-500"}),"Materiais *"]}),(0,We.jsxs)("div",{className:"space-y-2",children:[r.materials.map(((e,t)=>(0,We.jsxs)("div",{className:"flex gap-2",children:[(0,We.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const a=[...r.materials];a[e]=t,i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:a})))})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Material ".concat(t+1)}),r.materials.length>1&&(0,We.jsx)("button",{type:"button",onClick:()=>(e=>{if(r.materials.length>1){const t=r.materials.filter(((t,a)=>a!==e));i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:t})))}})(t),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:(0,We.jsx)(Vn,{icon:lo})})]},t))),(0,We.jsxs)("button",{type:"button",onClick:()=>{i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:[...e.materials,""]})))},className:"w-full py-2 text-purple-600 border-2 border-dashed border-purple-300 rounded-lg hover:border-purple-500 hover:bg-purple-50",children:[(0,We.jsx)(Vn,{icon:io,className:"mr-2"}),"Adicionar Material"]})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:ir,className:"mr-2 text-purple-500"}),"Procedimentos *"]}),(0,We.jsxs)("div",{className:"space-y-3",children:[r.procedure.map(((e,t)=>(0,We.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,We.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:["Passo ",t+1]}),r.procedure.length>1&&(0,We.jsx)("button",{type:"button",onClick:()=>(e=>{if(r.procedure.length>1){const t=r.procedure.filter(((t,a)=>a!==e));i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:t})))}})(t),className:"text-red-600 hover:bg-red-50 p-1 rounded",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,We.jsx)("input",{type:"text",value:e.step,onChange:e=>y(t,"step",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Nome do passo"}),(0,We.jsx)("input",{type:"text",value:e.description,onChange:e=>y(t,"description",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Descri\xe7\xe3o do passo"})]})]},t))),(0,We.jsxs)("button",{type:"button",onClick:()=>{i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:[...e.procedure,{step:"",description:""}]})))},className:"w-full py-2 text-purple-600 border-2 border-dashed border-purple-300 rounded-lg hover:border-purple-500 hover:bg-purple-50",children:[(0,We.jsx)(Vn,{icon:io,className:"mr-2"}),"Adicionar Passo"]})]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Crit\xe9rios para Avan\xe7o *"}),(0,We.jsx)("textarea",{value:r.criteria_for_advancement,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{criteria_for_advancement:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",rows:"3",placeholder:"Ex: 80% de acertos em 3 sess\xf5es consecutivas",required:!0})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tentativas Padr\xe3o *"}),(0,We.jsx)("input",{type:"number",min:"1",max:"999",value:r.trials,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{trials:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),(0,We.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"N\xfamero padr\xe3o de tentativas por sess\xe3o"})]})]})]})}),!f&&(0,We.jsxs)("div",{className:"border-t border-gray-200 p-6 flex justify-end space-x-3 flex-shrink-0",children:[(0,We.jsx)("button",{type:"button",onClick:N,disabled:m,className:"px-6 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Cancelar"}),(0,We.jsx)("button",{onClick:j,disabled:m,className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-lg hover:from-purple-700 hover:to-indigo-700 disabled:opacity-50 flex items-center space-x-2",children:m?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin"}),(0,We.jsx)("span",{children:"Criando..."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:di}),(0,We.jsx)("span",{children:"Criar Programa"})]})})]})]})})]}):null},Xh=e=>{let{isOpen:t,onClose:a,onSuccess:n,program:r}=e;const[i,o]=(0,s.useState)({discipline:"",area:"",sub_area_id:"",name:"",objective:"",program_slug:"",skill:"",materials:[""],procedure:[{step:"",description:""}],criteria_for_advancement:"",trials:5}),[l,c]=(0,s.useState)({}),[d,u]=(0,s.useState)({}),[h,m]=(0,s.useState)({}),[p,f]=(0,s.useState)(!1),[g,x]=(0,s.useState)(!0),[b,v]=(0,s.useState)(""),[y,j]=(0,s.useState)(!1);(0,s.useEffect)((()=>{t&&r&&(_(),N(),w())}),[t,r]);const N=()=>{if(r)try{const e="string"===typeof r.materials?JSON.parse(r.materials):r.materials||[""],t="string"===typeof r.procedure?JSON.parse(r.procedure):r.procedure||[{step:"",description:""}];o({discipline:"",area:"",sub_area_id:r.sub_area_id||"",name:r.name||"",objective:r.objective||"",program_slug:r.program_slug||"",skill:r.skill||"",materials:e.length>0?e:[""],procedure:t.length>0?t:[{step:"",description:""}],criteria_for_advancement:r.criteria_for_advancement||"",trials:r.trials||5})}catch(b){console.error("Erro ao parsear dados do programa:",b),v("Erro ao carregar dados do programa.")}},w=async()=>{j(!0)},_=async()=>{try{x(!0);const e=await(0,st.uc)();c(e)}catch(b){console.error("Erro ao buscar hierarquia:",b),v("Erro ao carregar disciplinas. Tente novamente.")}finally{x(!1)}},S=(e,t,a)=>{const s=[...i.procedure];s[e]=(0,Ie.A)((0,Ie.A)({},s[e]),{},{[t]:a}),o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:s})))},C=async e=>{if(e.preventDefault(),i.name.trim()?i.objective.trim()?i.program_slug.trim()?i.skill.trim()?i.materials.every((e=>!e.trim()))?(v("Adicione pelo menos um material."),0):i.procedure.every((e=>!e.step.trim()&&!e.description.trim()))?(v("Adicione pelo menos um passo do procedimento."),0):i.criteria_for_advancement.trim()?!(!i.trials||i.trials<1||i.trials>999)||(v("N\xfamero de tentativas deve ser entre 1 e 999."),0):(v("Crit\xe9rios para avan\xe7o s\xe3o obrigat\xf3rios."),0):(v("Habilidade ABA \xe9 obrigat\xf3ria."),0):(v("Tag do programa \xe9 obrigat\xf3ria."),0):(v("Objetivo \xe9 obrigat\xf3rio."),0):(v("Nome do programa \xe9 obrigat\xf3rio."),0)){f(!0),v("");try{const e={name:i.name.trim(),objective:i.objective.trim(),program_slug:i.program_slug.trim(),skill:i.skill.trim(),materials:i.materials.filter((e=>e.trim())),procedure:i.procedure.filter((e=>e.step.trim()||e.description.trim())),criteria_for_advancement:i.criteria_for_advancement.trim(),trials:parseInt(i.trials)};await(0,st.VU)(r.id,e),null===n||void 0===n||n(),a()}catch(b){var t,s;console.error("Erro ao atualizar programa:",b),v((null===(t=b.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||"Erro ao atualizar programa customizado.")}finally{f(!1)}}},k=()=>{p||(v(""),a())};return t&&r?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("style",{children:"\n        .modal-scroll-content {\n          scrollbar-width: thin;\n          scrollbar-color: #cbd5e0 #f7fafc;\n        }\n        .modal-scroll-content::-webkit-scrollbar {\n          width: 8px;\n        }\n        .modal-scroll-content::-webkit-scrollbar-track {\n          background: #f7fafc;\n          border-radius: 4px;\n        }\n        .modal-scroll-content::-webkit-scrollbar-thumb {\n          background: #cbd5e0;\n          border-radius: 4px;\n        }\n        .modal-scroll-content::-webkit-scrollbar-thumb:hover {\n          background: #a0aec0;\n        }\n      "}),(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl h-[95vh] sm:h-[90vh] flex flex-col overflow-hidden",style:{maxHeight:window.innerHeight>600?"90vh":"95vh",minHeight:window.innerHeight>600?"500px":"300px",height:window.innerHeight>600?"90vh":"95vh"},children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white p-6 flex justify-between items-center",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"bg-white bg-opacity-20 p-2 rounded-lg",children:(0,We.jsx)(Vn,{icon:vr,className:"text-xl"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h2",{className:"text-xl font-bold",children:"Editar Programa Customizado"}),(0,We.jsx)("p",{className:"text-blue-100 text-sm",children:"Modifique os dados do programa"})]})]}),(0,We.jsx)("button",{onClick:k,disabled:p,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors disabled:opacity-50",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 modal-scroll-content",style:{minHeight:0,maxHeight:window.innerHeight>600?"calc(90vh - 140px)":"calc(95vh - 120px)",overflowY:"auto",WebkitOverflowScrolling:"touch"},children:[y&&(0,We.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:(0,We.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,We.jsx)(Vn,{icon:To,className:"text-yellow-600 mt-1"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"font-semibold text-yellow-800",children:"Cuidado ao Editar"}),(0,We.jsx)("p",{className:"text-yellow-700 text-sm mt-1",children:"Altera\xe7\xf5es neste programa podem afetar:"}),(0,We.jsxs)("ul",{className:"text-yellow-700 text-sm mt-2 list-disc list-inside",children:[(0,We.jsx)("li",{children:"Relat\xf3rios existentes dos pacientes"}),(0,We.jsx)("li",{children:"Dados de progresso j\xe1 registrados"}),(0,We.jsx)("li",{children:"An\xe1lises e gr\xe1ficos hist\xf3ricos"})]}),(0,We.jsx)("p",{className:"text-yellow-700 text-sm mt-2 font-medium",children:"\u2139\ufe0f Os dados j\xe1 registrados ser\xe3o preservados, mas podem parecer inconsistentes."})]})]})}),g?(0,We.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-3xl text-blue-500 mb-4"}),(0,We.jsx)("p",{className:"text-gray-600",children:"Carregando dados..."})]})}):(0,We.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[b&&(0,We.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,We.jsx)("p",{className:"text-red-800 text-sm",children:b})}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:vi,className:"mr-2 text-blue-500"}),"Nome do Programa *"]}),(0,We.jsx)("input",{type:"text",value:i.name,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{name:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Identifica\xe7\xe3o de Objetos",required:!0})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:ko,className:"mr-2 text-blue-500"}),"Tag/Slug *"]}),(0,We.jsx)("input",{type:"text",value:i.program_slug,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{program_slug:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Mando, Tato, Ecoico",required:!0})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:_r,className:"mr-2 text-blue-500"}),"Objetivo *"]}),(0,We.jsx)("textarea",{value:i.objective,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{objective:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Descreva o objetivo terap\xeautico deste programa...",required:!0})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Oi,className:"mr-2 text-blue-500"}),"Habilidade ABA *"]}),(0,We.jsx)("input",{type:"text",value:i.skill,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{skill:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Linguagem Receptiva, Habilidades Motoras",required:!0})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:xr,className:"mr-2 text-blue-500"}),"Materiais *"]}),(0,We.jsxs)("div",{className:"space-y-2",children:[i.materials.map(((e,t)=>(0,We.jsxs)("div",{className:"flex gap-2",children:[(0,We.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const a=[...i.materials];a[e]=t,o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:a})))})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Material ".concat(t+1)}),i.materials.length>1&&(0,We.jsx)("button",{type:"button",onClick:()=>(e=>{if(i.materials.length>1){const t=i.materials.filter(((t,a)=>a!==e));o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:t})))}})(t),className:"px-3 py-2 text-red-600 hover:bg-red-50 rounded-lg",children:(0,We.jsx)(Vn,{icon:lo})})]},t))),(0,We.jsxs)("button",{type:"button",onClick:()=>{o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:[...e.materials,""]})))},className:"w-full py-2 text-blue-600 border-2 border-dashed border-blue-300 rounded-lg hover:border-blue-500 hover:bg-blue-50",children:[(0,We.jsx)(Vn,{icon:vr,className:"mr-2"}),"Adicionar Material"]})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:ir,className:"mr-2 text-blue-500"}),"Procedimentos *"]}),(0,We.jsxs)("div",{className:"space-y-3",children:[i.procedure.map(((e,t)=>(0,We.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,We.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:["Passo ",t+1]}),i.procedure.length>1&&(0,We.jsx)("button",{type:"button",onClick:()=>(e=>{if(i.procedure.length>1){const t=i.procedure.filter(((t,a)=>a!==e));o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:t})))}})(t),className:"text-red-600 hover:bg-red-50 p-1 rounded",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,We.jsx)("input",{type:"text",value:e.step,onChange:e=>S(t,"step",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Nome do passo"}),(0,We.jsx)("input",{type:"text",value:e.description,onChange:e=>S(t,"description",e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descri\xe7\xe3o do passo"})]})]},t))),(0,We.jsxs)("button",{type:"button",onClick:()=>{o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:[...e.procedure,{step:"",description:""}]})))},className:"w-full py-2 text-blue-600 border-2 border-dashed border-blue-300 rounded-lg hover:border-blue-500 hover:bg-blue-50",children:[(0,We.jsx)(Vn,{icon:vr,className:"mr-2"}),"Adicionar Passo"]})]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Crit\xe9rios para Avan\xe7o *"}),(0,We.jsx)("textarea",{value:i.criteria_for_advancement,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{criteria_for_advancement:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Ex: 80% de acertos em 3 sess\xf5es consecutivas",required:!0})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tentativas Padr\xe3o *"}),(0,We.jsx)("input",{type:"number",min:"1",max:"999",value:i.trials,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{trials:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),(0,We.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"N\xfamero padr\xe3o de tentativas por sess\xe3o"})]})]})]})]}),!g&&(0,We.jsxs)("div",{className:"border-t border-gray-200 p-6 flex justify-end space-x-3 flex-shrink-0",children:[(0,We.jsx)("button",{type:"button",onClick:k,disabled:p,className:"px-6 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Cancelar"}),(0,We.jsx)("button",{onClick:C,disabled:p,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 flex items-center space-x-2",children:p?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin"}),(0,We.jsx)("span",{children:"Salvando..."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:di}),(0,We.jsx)("span",{children:"Salvar Altera\xe7\xf5es"})]})})]})]})})]}):null},Jh=e=>{let{onAssign:t,assigningId:a,assignedPrograms:n,isPatientSelected:r}=e;const{disciplines:i,isLoading:o,error:l,refreshPrograms:c}=mt(),{user:d}=Ye(),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)("global"),[f,g]=(0,s.useState)({}),[x,b]=(0,s.useState)(!1),[v,y]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),[w,_]=(0,s.useState)(null),[S,C]=(0,s.useState)(null);(0,s.useEffect)((()=>{i&&Object.keys(i).length>0&&h(Object.keys(i)[0])}),[i]),(0,s.useEffect)((()=>{"custom"===m&&k()}),[m]);const k=async()=>{b(!0);try{const e=await(0,st.rx)();g(e),Object.keys(e).length>0&&!u&&h(Object.keys(e)[0])}catch(l){console.error("Erro ao buscar programas customizados:",l)}finally{b(!1)}},A=e=>{_(e),N(!0)},P=e=>{C(e),k(),C(null)};if(o)return(0,We.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-4xl text-purple-500 mb-4"}),(0,We.jsx)("p",{className:"text-gray-600",children:"Carregando biblioteca de programas..."})]})});if(l)return(0,We.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-500 p-6 rounded-r-lg",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-600 mt-1 mr-3"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-red-800 font-medium mb-1",children:"Erro ao Carregar Programas"}),(0,We.jsx)("p",{className:"text-red-700 text-sm",children:l})]})]})});if(!i||0===Object.keys(i).length)return(0,We.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm p-8 text-center",children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-gray-100 to-slate-100 p-6 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:Ki,className:"text-4xl text-gray-400"})}),(0,We.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Biblioteca Vazia"}),(0,We.jsx)("p",{className:"text-gray-500",children:"Nenhum programa encontrado na biblioteca."})]});const E="global"===m?i:f,L=u?E[u]:{},D=Object.keys(f).length>0,O=e=>({Fonoaudiologia:{bg:"from-blue-500 to-indigo-600",light:"from-blue-50 to-indigo-50",border:"border-blue-300",text:"text-blue-700"},Psicologia:{bg:"from-red-500 to-pink-600",light:"from-red-50 to-pink-50",border:"border-red-300",text:"text-red-700"},Musicoterapia:{bg:"from-purple-500 to-violet-600",light:"from-purple-50 to-violet-50",border:"border-purple-300",text:"text-purple-700"},TerapiaOcupacional:{bg:"from-orange-500 to-amber-600",light:"from-orange-50 to-amber-50",border:"border-orange-300",text:"text-orange-700"},Psicomotricidade:{bg:"from-green-500 to-emerald-600",light:"from-green-50 to-emerald-50",border:"border-green-300",text:"text-green-700"},Psicopedagogia:{bg:"from-yellow-500 to-orange-600",light:"from-yellow-50 to-orange-50",border:"border-yellow-300",text:"text-yellow-700"},"VB-MAPP":{bg:"from-teal-500 to-cyan-600",light:"from-teal-50 to-cyan-50",border:"border-teal-300",text:"text-teal-700"}}[e]||{bg:"from-gray-500 to-slate-600",light:"from-gray-50 to-slate-50",border:"border-gray-300",text:"text-gray-700"}),T=e=>e.replace(/([A-Z])/g," $1").trim();return(0,We.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[(0,We.jsx)("div",{className:"border-b border-gray-200",children:(0,We.jsxs)("div",{className:"flex",children:[(0,We.jsxs)("button",{className:"\n              flex-1 px-6 py-3 font-semibold text-sm transition-all duration-200 flex items-center justify-center space-x-2\n              ".concat("global"===m?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white":"bg-gray-50 text-gray-600 hover:bg-gray-100","\n            "),onClick:()=>p("global"),children:[(0,We.jsx)(Vn,{icon:kr}),(0,We.jsx)("span",{children:"Programas Globais"})]}),(0,We.jsxs)("button",{className:"\n              flex-1 px-6 py-3 font-semibold text-sm transition-all duration-200 flex items-center justify-center space-x-2\n              ".concat("custom"===m?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white":"bg-gray-50 text-gray-600 hover:bg-gray-100","\n            "),onClick:()=>p("custom"),children:[(0,We.jsx)(Vn,{icon:No}),(0,We.jsx)("span",{children:"Programas da Cl\xednica"}),D&&(0,We.jsx)("span",{className:"bg-white bg-opacity-20 text-xs px-2 py-1 rounded-full",children:Object.values(f).reduce(((e,t)=>e+Object.values(t).reduce(((e,t)=>e+Object.values(t).reduce(((e,t)=>e+(Array.isArray(t)?t.length:0)),0)),0)),0)})]})]})}),"custom"===m&&(null===d||void 0===d?void 0:d.is_admin)&&(0,We.jsx)("div",{className:"border-b border-gray-200 p-4",children:(0,We.jsxs)("button",{onClick:()=>y(!0),className:"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-4 py-3 rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 flex items-center justify-center space-x-2 shadow-md",children:[(0,We.jsx)(Vn,{icon:io}),(0,We.jsx)("span",{children:"Criar Programa Customizado"})]})}),(0,We.jsx)("div",{className:"border-b border-gray-200",children:(0,We.jsx)("div",{className:"flex flex-wrap",children:Object.keys(E).map(((e,t)=>{const a=O(e),s=u===e;return(0,We.jsxs)("button",{className:"\n                  flex-1 min-w-0 px-6 py-4 font-semibold text-sm transition-all duration-200 relative\n                  ".concat(s?"bg-gradient-to-r ".concat(a.bg," text-white shadow-lg"):"bg-gradient-to-r ".concat(a.light," ").concat(a.text," hover:shadow-md"),"\n                "),onClick:()=>(e=>{h(e)})(e),children:[(0,We.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,We.jsx)(Vn,{icon:"custom"===m?Oi:Ho,className:"flex-shrink-0"}),(0,We.jsx)("span",{className:"truncate",children:T(e)}),"custom"===m&&(0,We.jsx)("span",{className:"bg-white bg-opacity-20 text-xs px-2 py-1 rounded-full",children:"Custom"})]}),s&&(0,We.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white bg-opacity-30 rounded-full"})]},e)}))})}),(0,We.jsx)("div",{className:"p-6",children:o||x?(0,We.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-4xl text-purple-500 mb-4"}),(0,We.jsx)("p",{className:"text-gray-600",children:"custom"===m?"Carregando programas customizados...":"Carregando biblioteca de programas..."})]})}):"custom"!==m||D?u&&Object.keys(L).length>0?(0,We.jsxs)("div",{className:"space-y-8",children:["global"===m&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Yh,{onProgramSelect:()=>{},onAssign:t,assigningId:a,assignedPrograms:n,isPatientSelected:r,disciplineName:u,disciplineDisplayName:T(u),disciplineColors:O(u)}),(0,We.jsx)("div",{className:"border-b border-gray-200 my-6"})]}),"custom"===m&&(0,We.jsx)("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg p-4 mb-6",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:No,className:"text-purple-600"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"font-semibold text-purple-800",children:"Programas da Cl\xednica"}),(0,We.jsx)("p",{className:"text-sm text-purple-600",children:"Programas criados especificamente para sua cl\xednica"})]})]}),(null===d||void 0===d?void 0:d.is_admin)&&(0,We.jsxs)("button",{onClick:()=>y(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:io}),(0,We.jsx)("span",{children:"Novo"})]})]})}),Object.keys(L).map((e=>{const s=L[e],i=O(u);return(0,We.jsxs)("div",{className:"space-y-6",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r ".concat(i.light," border-l-4 ").concat(i.border," p-4 rounded-r-lg"),children:(0,We.jsxs)("h3",{className:"text-xl font-bold ".concat(i.text," flex items-center"),children:[(0,We.jsx)(Vn,{icon:Kr,className:"mr-3"}),e]})}),Object.keys(s).map((i=>{const o=s[i],l=(null===o||void 0===o?void 0:o.length)||0;if(0===l)return null;const c=(null===o||void 0===o?void 0:o.filter((e=>Array.isArray(n)&&n.some((t=>t.program_id===e.id)))).length)||0;return(0,We.jsxs)("div",{className:"space-y-4",children:[i!==e&&(0,We.jsxs)("div",{className:"flex items-center justify-between border-b border-gray-200 pb-3",children:[(0,We.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:i}),(0,We.jsxs)("div",{className:"flex space-x-4 text-sm",children:[(0,We.jsxs)("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full",children:[l," programa",1!==l?"s":""]}),c>0&&(0,We.jsxs)("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full",children:[c," atribu\xeddo",1!==c?"s":""]})]})]}),(0,We.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6",children:null===o||void 0===o?void 0:o.map((e=>{const s=Array.isArray(n)&&n.some((t=>t.program_id===e.id));return"custom"===m?(0,We.jsx)(Gh,{program:e,onEdit:A,onDelete:P,onAssign:t,isDeleting:S===e.id,hasAssignments:e.assignment_count>0,assignmentCount:e.assignment_count||0,progressCount:e.progress_count||0,userIsAdmin:(null===d||void 0===d?void 0:d.is_admin)||!1,isAssigned:s,isAssigning:a===e.id,isPatientSelected:r},e.id):(0,We.jsx)(Vh,{program:e,onAssign:t,isAssigned:s,isAssigning:a===e.id,isPatientSelected:r},e.id)}))})]},i)}))]},e)}))]}):(0,We.jsxs)("div",{className:"text-center py-12",children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-gray-100 to-slate-100 p-6 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:Ki,className:"text-3xl text-gray-400"})}),(0,We.jsx)("p",{className:"text-gray-500 text-lg",children:"Selecione uma disciplina para explorar os programas"})]}):(0,We.jsxs)("div",{className:"text-center py-12",children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-purple-100 to-indigo-100 p-6 rounded-full w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:No,className:"text-4xl text-purple-400"})}),(0,We.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:"Nenhum Programa Customizado"}),(0,We.jsx)("p",{className:"text-gray-500 mb-6",children:"Sua cl\xednica ainda n\xe3o criou programas customizados."}),(null===d||void 0===d?void 0:d.is_admin)&&(0,We.jsxs)("button",{onClick:()=>y(!0),className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-6 py-3 rounded-lg hover:from-purple-700 hover:to-indigo-700 transition-all duration-200 flex items-center space-x-2 mx-auto",children:[(0,We.jsx)(Vn,{icon:io}),(0,We.jsx)("span",{children:"Criar Primeiro Programa"})]})]})}),(0,We.jsx)($h,{isOpen:v,onClose:()=>y(!1),onSuccess:()=>{k(),c()}}),(0,We.jsx)(Xh,{isOpen:j,program:w,onClose:()=>{N(!1),_(null)},onSuccess:()=>{k(),N(!1),_(null)}})]})};if("undefined"!==typeof document&&!document.querySelector("#programs-page-styles")){const e=document.createElement("style");e.id="programs-page-styles",e.textContent="\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  .animate-fade-in {\n    animation: fadeIn 0.6s ease-out;\n  }\n",document.head.appendChild(e)}const Kh=()=>{const{selectedPatient:e,refreshPatientData:t}=dt(),{isLoading:a,error:n}=mt(),{token:r}=Ye(),[i,o]=(0,s.useState)(null),[l,c]=(0,s.useState)("");return a?(0,We.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-purple-50 flex items-center justify-center",children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-purple-100 to-indigo-100 p-8 rounded-full w-32 h-32 mx-auto mb-8 flex items-center justify-center shadow-lg",children:(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-4xl text-purple-600"})}),(0,We.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Carregando Biblioteca"}),(0,We.jsx)("p",{className:"text-gray-600",children:"Preparando os programas de interven\xe7\xe3o..."})]})}):n?(0,We.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-red-50 flex items-center justify-center p-8",children:(0,We.jsxs)("div",{className:"bg-white border border-red-200 rounded-xl shadow-sm overflow-hidden max-w-lg w-full",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-red-500 to-pink-600 px-6 py-4",children:[(0,We.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"mr-3"}),"Erro ao Carregar"]}),(0,We.jsx)("p",{className:"text-red-100 text-sm mt-1",children:"N\xe3o foi poss\xedvel acessar a biblioteca de programas"})]}),(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsx)("p",{className:"text-red-800 mb-4",children:n||"N\xe3o foi poss\xedvel carregar os programas."}),(0,We.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Tentar Novamente"})]})]})}):(0,We.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-purple-50",children:(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsx)("div",{className:"animate-fade-in mb-8",children:(0,We.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-700 px-8 py-6",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center",children:[(0,We.jsx)(Vn,{icon:Eo,className:"mr-4"}),"Biblioteca de Programas"]}),(0,We.jsx)("p",{className:"text-purple-100 text-lg mt-2",children:"Explore e atribua programas de interven\xe7\xe3o especializados"})]}),e&&(0,We.jsxs)("div",{className:"bg-white bg-opacity-20 rounded-lg p-4 text-center",children:[(0,We.jsx)(Vn,{icon:so,className:"text-white text-2xl mb-2"}),(0,We.jsx)("p",{className:"text-white text-sm font-medium",children:e.name}),(0,We.jsx)("p",{className:"text-purple-100 text-xs",children:"Cliente selecionado"})]})]})}),(0,We.jsxs)("div",{className:"p-6",children:[l&&(0,We.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-500 p-4 mb-4 rounded-r-lg",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-600 mt-1 mr-3"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-red-800 font-medium mb-1",children:"Erro na Opera\xe7\xe3o"}),(0,We.jsx)("p",{className:"text-red-700 text-sm",children:l})]})]})}),!e&&(0,We.jsx)("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border-l-4 border-amber-400 p-4 rounded-r-lg",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:_i,className:"text-amber-600 mt-1 mr-3"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-amber-800 font-medium mb-1",children:"\ud83d\udc65 Selecione um Cliente"}),(0,We.jsx)("p",{className:"text-amber-700 text-sm leading-relaxed",children:"Para visualizar os programas e realizar atribui\xe7\xf5es, \xe9 necess\xe1rio primeiro selecionar um cliente na barra lateral."})]})]})})]})]})}),(0,We.jsx)("div",{className:"animate-fade-in",children:e?(0,We.jsx)(Jh,{onAssign:async a=>{if(e)if(r){o(a),c("");try{await it(e.id,a,r),t&&await t(e.id)}catch(s){console.error("Falha ao atribuir programa:",s),c(s.message||"Ocorreu um erro ao atribuir o programa.")}finally{o(null)}}else c("Erro de autentica\xe7\xe3o. Por favor, fa\xe7a login novamente.");else c("Nenhum cliente selecionado para atribuir o programa.")},isPatientSelected:!!e,assigningId:i,assignedPrograms:e.assigned_programs||[]}):(0,We.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:(0,We.jsx)("div",{className:"flex items-center justify-center h-96 text-center p-8",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 p-8 rounded-full w-32 h-32 mx-auto mb-8 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:Eo,className:"text-5xl text-indigo-600"})}),(0,We.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Biblioteca Pronta para Uso"}),(0,We.jsx)("p",{className:"text-gray-600 leading-relaxed max-w-md mx-auto mb-6",children:"Nossa biblioteca cont\xe9m centenas de programas organizados por disciplinas e \xe1reas de interven\xe7\xe3o. Selecione um cliente para come\xe7ar a explorar."}),(0,We.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-dashed border-indigo-300 rounded-lg p-4 max-w-sm mx-auto",children:(0,We.jsxs)("div",{className:"flex items-center justify-center space-x-3 text-indigo-600",children:[(0,We.jsx)("div",{className:"w-3 h-3 bg-indigo-500 rounded-full animate-pulse"}),(0,We.jsx)("span",{className:"font-medium",children:"Aguardando sele\xe7\xe3o de cliente"})]})})]})})})})]})})};if("undefined"!==typeof document&&!document.querySelector("#notes-page-styles")){const e=document.createElement("style");e.id="notes-page-styles",e.textContent="\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n  .animate-fade-in {\n    animation: fadeIn 0.6s ease-out;\n  }\n",document.head.appendChild(e)}const Qh=()=>{const{selectedPatient:e,saveNotes:t}=dt(),[a,n]=(0,s.useState)(""),[r,i]=(0,s.useState)(!1),[o,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(""),[u,h]=(0,s.useState)(null);(0,s.useEffect)((()=>{if(e){const t=e.general_notes||"";n(t)}else n("");l(!1),d(""),h(null)}),[e]);return(0,We.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-indigo-50",children:(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsx)("div",{className:"animate-fade-in mb-8",children:(0,We.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:(0,We.jsx)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-700 px-8 py-6",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center",children:[(0,We.jsx)(Vn,{icon:nr,className:"mr-4"}),"Anota\xe7\xf5es Gerais"]}),(0,We.jsx)("p",{className:"text-indigo-100 text-lg mt-2",children:"Registre observa\xe7\xf5es, progresso e informa\xe7\xf5es importantes"})]}),e&&(0,We.jsxs)("div",{className:"bg-white bg-opacity-20 rounded-lg p-4 text-center",children:[(0,We.jsx)(Vn,{icon:so,className:"text-white text-2xl mb-2"}),(0,We.jsx)("p",{className:"text-white text-sm font-medium",children:e.name}),(0,We.jsx)("p",{className:"text-indigo-100 text-xs",children:"Cliente selecionado"})]})]})})})}),(0,We.jsx)("div",{className:"animate-fade-in",children:e?(0,We.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-indigo-200 px-6 py-4",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,We.jsx)("div",{className:"bg-indigo-100 p-2 rounded-full",children:(0,We.jsx)(Vn,{icon:Qn,className:"text-indigo-600"})}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("h2",{className:"text-lg font-semibold text-gray-800",children:["Anota\xe7\xf5es para ",e.name]}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Documente informa\xe7\xf5es relevantes sobre o cliente"})]})]}),(0,We.jsx)("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:u&&(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:Ti,className:"text-green-500"}),(0,We.jsxs)("span",{className:"text-green-600",children:["Salvo em ",(m=u,m?m.toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"")]})]})})]})}),(0,We.jsxs)("div",{className:"p-6",children:[c&&(0,We.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-500 p-4 mb-6 rounded-r-lg",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-600 mt-1 mr-3"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-red-800 font-medium mb-1",children:"Erro ao Salvar"}),(0,We.jsx)("p",{className:"text-red-700 text-sm",children:c})]})]})}),o&&(0,We.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-l-4 border-green-500 p-4 mb-6 rounded-r-lg",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:Do,className:"text-green-600 mt-1 mr-3"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-green-800 font-medium mb-1",children:"Anota\xe7\xf5es Salvas"}),(0,We.jsx)("p",{className:"text-green-700 text-sm",children:"As informa\xe7\xf5es foram salvas com sucesso"})]})]})}),(0,We.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-400 p-4 mb-6 rounded-r-lg",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:_i,className:"text-blue-600 mt-1 mr-3"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-blue-800 font-medium mb-1",children:"\ud83d\udcdd Dicas para Anota\xe7\xf5es Eficazes"}),(0,We.jsxs)("ul",{className:"text-blue-700 text-sm space-y-1",children:[(0,We.jsx)("li",{children:"\u2022 Registre comportamentos observados e padr\xf5es identificados"}),(0,We.jsx)("li",{children:"\u2022 Documente progress\xf5es, regress\xf5es e marcos importantes"}),(0,We.jsx)("li",{children:"\u2022 Inclua informa\xe7\xf5es sobre resposta aos programas de interven\xe7\xe3o"}),(0,We.jsx)("li",{children:"\u2022 Anote considera\xe7\xf5es para planejamento futuro"})]})]})]})}),(0,We.jsx)("div",{className:"border-2 border-gray-200 rounded-lg focus-within:border-amber-400 focus-within:ring-4 focus-within:ring-amber-100 transition-all",children:(0,We.jsx)("textarea",{id:"notes-textarea",placeholder:"Comece a escrever suas anota\xe7\xf5es sobre o cliente aqui... Exemplos do que incluir:\n\u2022 Observa\xe7\xf5es comportamentais\n\u2022 Resposta aos programas de interven\xe7\xe3o\n\u2022 Intera\xe7\xf5es sociais e comunicativas\n\u2022 Marcos e progress\xf5es importantes\n\u2022 Desafios identificados\n\u2022 Recomenda\xe7\xf5es para sess\xf5es futuras",rows:"20",value:a,onChange:e=>n(e.target.value),className:"w-full px-6 py-4 border-none rounded-lg resize-vertical text-base leading-relaxed focus:outline-none placeholder:text-gray-400 placeholder:text-sm"})}),(0,We.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-4 border-t border-gray-200",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:er,className:"text-amber-500"}),(0,We.jsx)("span",{children:"Editado hoje"})]}),(0,We.jsx)("div",{className:"w-px h-4 bg-gray-300"}),(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(a!==(e.general_notes||"")?"bg-yellow-500 animate-pulse":"bg-green-500")}),(0,We.jsx)("span",{children:a!==(e.general_notes||"")?"Altera\xe7\xf5es n\xe3o salvas":"Tudo salvo"})]})]}),(0,We.jsxs)("button",{onClick:async()=>{if(e){i(!0),l(!1),d("");try{await t(a),l(!0),h(new Date),setTimeout((()=>l(!1)),3e3)}catch(Ff){d(Ff.message||"Ocorreu um erro ao guardar as anota\xe7\xf5es.")}finally{i(!1)}}else d("Nenhum cliente selecionado.")},disabled:r||!e||a===(e.general_notes||""),className:"\n                      font-semibold py-3 px-8 rounded-lg text-sm transition-all duration-200 flex items-center justify-center min-w-[160px] shadow-sm transform hover:scale-105 disabled:hover:scale-100\n                      ".concat(o?"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white shadow-green-200":"bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-600 hover:to-purple-700 text-white shadow-indigo-200 disabled:from-gray-300 disabled:to-gray-400 disabled:shadow-gray-200","\n                    "),children:[(0,We.jsx)("div",{className:"bg-white bg-opacity-20 p-1 rounded-full mr-3",children:(0,We.jsx)(Vn,{icon:r?xo:o?Do:di,className:"text-sm ".concat(r&&"fa-spin")})}),r?"Salvando...":o?"Salvo com Sucesso!":"Salvar Anota\xe7\xf5es"]})]})]})]}):(0,We.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:(0,We.jsx)("div",{className:"flex items-center justify-center h-96 text-center p-8",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 p-8 rounded-full w-32 h-32 mx-auto mb-8 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:nr,className:"text-5xl text-indigo-600"})}),(0,We.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Editor de Anota\xe7\xf5es"}),(0,We.jsx)("p",{className:"text-gray-600 leading-relaxed max-w-md mx-auto mb-6",children:"Selecione um cliente na barra lateral para come\xe7ar a registrar anota\xe7\xf5es importantes sobre seu progresso e desenvolvimento."}),(0,We.jsx)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-dashed border-indigo-300 rounded-lg p-4 max-w-sm mx-auto",children:(0,We.jsxs)("div",{className:"flex items-center justify-center space-x-3 text-indigo-600",children:[(0,We.jsx)("div",{className:"w-3 h-3 bg-indigo-500 rounded-full animate-pulse"}),(0,We.jsx)("span",{className:"font-medium",children:"Aguardando sele\xe7\xe3o de cliente"})]})})]})})})})]})});var m};var Zh=a(5351);Zh.t1.register(Zh.PP,Zh.kc,Zh.FN,Zh.No,Zh.hE,Zh.m_,Zh.s$,Zh.dN,Sh);const em=e=>{let{title:t,value:a,icon:s,colorClass:n,interpretation:r}=e;const i=r?(e=>{switch(e){case"good":return{bg:"bg-green-100",border:"border-green-200",icon:Ur,color:"text-green-600"};case"attention":return{bg:"bg-yellow-100",border:"border-yellow-200",icon:To,color:"text-yellow-600"};case"critical":return{bg:"bg-red-100",border:"border-red-200",icon:To,color:"text-red-600"};default:return{bg:"bg-gray-100",border:"border-gray-200",icon:_i,color:"text-gray-600"}}})(r):null;return(0,We.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border ".concat(i?i.border:"border-gray-200"," flex items-start space-x-4 relative"),children:[(0,We.jsx)("div",{className:"text-xl p-3 rounded-full ".concat(n.bg," ").concat(n.text),children:(0,We.jsx)(Vn,{icon:s,className:"fa-fw"})}),(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:t}),(0,We.jsx)("p",{className:"text-3xl font-semibold ".concat(n.text),children:a})]}),i&&(0,We.jsx)("div",{className:"absolute top-2 right-2 w-6 h-6 rounded-full ".concat(i.bg," flex items-center justify-center"),children:(0,We.jsx)(Vn,{icon:i.icon,className:"text-xs ".concat(i.color)})})]})},tm=()=>(0,We.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm mb-8 overflow-hidden",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 px-6 py-4",children:[(0,We.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center",children:[(0,We.jsx)(Vn,{icon:_i,className:"mr-3"}),"Guia de M\xe9tricas ABA"]}),(0,We.jsx)("p",{className:"text-blue-100 text-sm mt-1",children:"Compreenda os indicadores e interpreta\xe7\xf5es utilizados"})]}),(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsxs)("div",{className:"mb-8",children:[(0,We.jsxs)("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),(0,We.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"\ud83d\udcca Defini\xe7\xf5es das M\xe9tricas"})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border-l-4 border-blue-500",children:[(0,We.jsxs)("h5",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,We.jsx)("span",{className:"text-blue-600 mr-2",children:"\ud83d\udcca"})," Progresso M\xe9dio"]}),(0,We.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"M\xe9dia de todas as sess\xf5es de interven\xe7\xe3o no per\xedodo selecionado."}),(0,We.jsx)("div",{className:"mt-2 text-xs text-blue-700 bg-blue-100 px-2 py-1 rounded-full inline-block",children:"Meta: \u226570%"})]}),(0,We.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border-l-4 border-purple-500",children:[(0,We.jsxs)("h5",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,We.jsx)("span",{className:"text-purple-600 mr-2",children:"\ud83c\udfaf"})," Taxa de Aquisi\xe7\xe3o"]}),(0,We.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"Percentual de programas que atingiram crit\xe9rio (\u226580%) recentemente."}),(0,We.jsx)("div",{className:"mt-2 text-xs text-purple-700 bg-purple-100 px-2 py-1 rounded-full inline-block",children:"Meta: \u226530%"})]}),(0,We.jsxs)("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-4 rounded-lg border-l-4 border-amber-500",children:[(0,We.jsxs)("h5",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,We.jsx)("span",{className:"text-amber-600 mr-2",children:"\u23f1\ufe0f"})," Frequ\xeancia Semanal"]}),(0,We.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"N\xfamero de dias \xfanicos com sess\xf5es por semana em m\xe9dia."}),(0,We.jsx)("div",{className:"mt-2 text-xs text-amber-700 bg-amber-100 px-2 py-1 rounded-full inline-block",children:"Ideal ABA: 3-5 dias/semana"})]}),(0,We.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border-l-4 border-green-500",children:[(0,We.jsxs)("h5",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,We.jsx)("span",{className:"text-green-600 mr-2",children:"\ud83d\udcc8"})," Estabilidade"]}),(0,We.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"Consist\xeancia da performance (0-100). Alta estabilidade indica manuten\xe7\xe3o."}),(0,We.jsx)("div",{className:"mt-2 text-xs text-green-700 bg-green-100 px-2 py-1 rounded-full inline-block",children:"Alta: \u226580%"})]}),(0,We.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 to-emerald-100 p-4 rounded-lg border-l-4 border-emerald-500",children:[(0,We.jsxs)("h5",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,We.jsx)("span",{className:"text-emerald-600 mr-2",children:"\ud83c\udfc6"})," Programas na Meta"]}),(0,We.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"Quantidade de programas que atingiram \u226580% de desempenho m\xe9dio."}),(0,We.jsx)("div",{className:"mt-2 text-xs text-emerald-700 bg-emerald-100 px-2 py-1 rounded-full inline-block",children:"Objetivo: Maioria"})]}),(0,We.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 p-4 rounded-lg border-l-4 border-indigo-500",children:[(0,We.jsxs)("h5",{className:"font-semibold text-gray-800 mb-2 flex items-center",children:[(0,We.jsx)("span",{className:"text-indigo-600 mr-2",children:"\ud83d\udcc5"})," Dias at\xe9 Crit\xe9rio"]}),(0,We.jsx)("p",{className:"text-gray-700 text-sm leading-relaxed",children:"Tempo m\xe9dio para dominar habilidades. Varia por complexidade da tarefa."}),(0,We.jsx)("div",{className:"mt-2 text-xs text-indigo-700 bg-indigo-100 px-2 py-1 rounded-full inline-block",children:"Vari\xe1vel"})]})]})]}),(0,We.jsxs)("div",{className:"mb-6",children:[(0,We.jsxs)("div",{className:"flex items-center mb-4 pb-2 border-b border-gray-200",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),(0,We.jsx)("h4",{className:"text-lg font-semibold text-gray-800",children:"\ud83c\udfa8 Sistema de Interpreta\xe7\xe3o"})]}),(0,We.jsxs)("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-lg",children:[(0,We.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"Os indicadores visuais nas m\xe9tricas seguem este sistema de cores:"}),(0,We.jsxs)("div",{className:"flex flex-wrap gap-6",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3 bg-white px-4 py-2 rounded-lg shadow-sm",children:[(0,We.jsx)("div",{className:"w-4 h-4 bg-green-500 rounded-full shadow-sm"}),(0,We.jsx)("span",{className:"text-green-700 font-medium",children:"Bom desempenho"}),(0,We.jsx)("span",{className:"text-gray-500 text-sm",children:"- Dentro das metas"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-3 bg-white px-4 py-2 rounded-lg shadow-sm",children:[(0,We.jsx)("div",{className:"w-4 h-4 bg-yellow-500 rounded-full shadow-sm"}),(0,We.jsx)("span",{className:"text-yellow-700 font-medium",children:"Requer aten\xe7\xe3o"}),(0,We.jsx)("span",{className:"text-gray-500 text-sm",children:"- Monitoramento necess\xe1rio"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-3 bg-white px-4 py-2 rounded-lg shadow-sm",children:[(0,We.jsx)("div",{className:"w-4 h-4 bg-red-500 rounded-full shadow-sm"}),(0,We.jsx)("span",{className:"text-red-700 font-medium",children:"Cr\xedtico"}),(0,We.jsx)("span",{className:"text-gray-500 text-sm",children:"- A\xe7\xe3o imediata necess\xe1ria"})]})]})]})]}),(0,We.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 rounded-r-lg",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:hr,className:"text-blue-600 mt-1 mr-3"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-blue-800 font-medium mb-1",children:"Dica Profissional"}),(0,We.jsx)("p",{className:"text-blue-700 text-sm leading-relaxed",children:"Use estas m\xe9tricas em conjunto para uma an\xe1lise completa do progresso. M\xe9tricas isoladas podem n\xe3o refletir o quadro completo do desenvolvimento."})]})]})})]})]}),am=e=>{let{recommendations:t,regressionAlerts:a}=e;return 0===t.length&&0===a?null:(0,We.jsxs)("div",{className:"bg-white border border-orange-200 rounded-xl shadow-sm mb-8 overflow-hidden",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-orange-500 to-amber-500 px-6 py-4",children:[(0,We.jsxs)("h3",{className:"text-xl font-bold text-white flex items-center",children:[(0,We.jsx)(Vn,{icon:hr,className:"mr-3"}),"Recomenda\xe7\xf5es Cl\xednicas"]}),(0,We.jsx)("p",{className:"text-orange-100 text-sm mt-1",children:"Sugest\xf5es baseadas na an\xe1lise dos dados"})]}),(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsxs)("div",{className:"space-y-4",children:[a>0&&(0,We.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 border-l-4 border-red-500 p-4 rounded-r-lg",children:(0,We.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,We.jsx)("div",{className:"bg-red-100 p-2 rounded-full",children:(0,We.jsx)(Vn,{icon:To,className:"text-red-600"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"font-semibold text-red-800 mb-1",children:"\u26a0\ufe0f Alerta de Regress\xe3o"}),(0,We.jsxs)("p",{className:"text-red-700 text-sm",children:[a," programa",a>1?"s apresentam":" apresenta"," decl\xednio na performance. Revis\xe3o imediata recomendada."]})]})]})}),t.length>0&&(0,We.jsx)("div",{className:"space-y-3",children:t.map(((e,t)=>(0,We.jsx)("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 border-l-4 border-amber-400 p-4 rounded-r-lg",children:(0,We.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,We.jsx)("div",{className:"bg-amber-100 p-2 rounded-full flex-shrink-0",children:(0,We.jsx)(Vn,{icon:hr,className:"text-amber-600"})}),(0,We.jsx)("div",{className:"min-w-0 flex-1",children:(0,We.jsx)("p",{className:"text-gray-800 text-sm leading-relaxed",children:e})})]})},t)))})]}),(t.length>0||a>0)&&(0,We.jsx)("div",{className:"mt-6 bg-orange-50 border border-orange-200 p-4 rounded-lg",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:_i,className:"text-orange-600 mt-1 mr-3"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-orange-800 font-medium mb-1",children:"\ud83d\udca1 Dica"}),(0,We.jsx)("p",{className:"text-orange-700 text-sm leading-relaxed",children:"Estas recomenda\xe7\xf5es s\xe3o geradas automaticamente com base nas m\xe9tricas atuais. Considere o contexto cl\xednico individual ao implementar mudan\xe7as."})]})]})})]})]})},sm=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long";if(!e)return"N/A";const a=new Date(e);if(isNaN(a.getTime()))return"Data inv\xe1lida";const s=6e4*a.getTimezoneOffset(),n=new Date(a.getTime()+s),r={day:"2-digit",month:"2-digit",year:"numeric"};return"short"===t?n.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}):("datetime"===t&&(r.hour="2-digit",r.minute="2-digit"),n.toLocaleDateString("pt-BR",r))},nm=e=>{let{sessionData:t,activePrograms:a,analytics:s}=e;const n=(()=>{if(!t||0===t.length||!a||0===a.length)return[];const e={};a.forEach((t=>{const a=t.discipline_name||"Outros";e[a]||(e[a]={name:a,programIds:new Set,sessions:[],totalScore:0,sessionCount:0}),e[a].programIds.add(t.program_id)}));const s=t.filter((e=>!e.is_baseline));return s.forEach((t=>{Object.values(e).forEach((e=>{e.programIds.has(t.program_id)&&(e.sessions.push(t),e.totalScore+=t.score,e.sessionCount+=1)}))})),Object.values(e).filter((e=>e.sessionCount>0)).map((e=>{const t=e.totalScore/e.sessionCount,a=e.sessions;let s="stable";if(a.length>=6){const e=a.slice(0,Math.floor(a.length/2)),t=a.slice(Math.floor(a.length/2)),n=e.reduce(((e,t)=>e+t.score),0)/e.length,r=t.reduce(((e,t)=>e+t.score),0)/t.length,i=r-n;i>5?s="improving":i<-5&&(s="declining")}return{name:e.name,average:Math.round(10*t)/10,sessionCount:e.sessionCount,trend:s,programCount:e.programIds.size}})).sort(((e,t)=>t.average-e.average))})();if(0===n.length)return(0,We.jsx)("div",{className:"flex items-center justify-center h-full text-center text-gray-400 bg-gray-50 rounded-lg p-6",children:(0,We.jsxs)("div",{children:[(0,We.jsx)(Vn,{icon:ni,className:"text-4xl mb-3"}),(0,We.jsx)("p",{children:"N\xe3o h\xe1 dados suficientes no per\xedodo selecionado para gerar o resumo por disciplina."})]})});return(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-indigo-50 to-blue-50 rounded-lg border border-indigo-200",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"font-semibold text-gray-800",children:"Resumo Geral"}),(0,We.jsxs)("p",{className:"text-sm text-gray-600",children:[n.length," disciplina",1!==n.length?"s":""," \u2022 "," ","M\xe9dia geral: ",Math.round(n.reduce(((e,t)=>e+t.average),0)/n.length*10)/10,"%"]})]}),(0,We.jsxs)("div",{className:"text-right",children:[(0,We.jsxs)("div",{className:"text-2xl font-bold text-indigo-600",children:[s.overallAverage,"%"]}),(0,We.jsx)("div",{className:"text-xs text-gray-500",children:"Progresso m\xe9dio geral"})]})]}),(0,We.jsx)("div",{className:"space-y-3",children:n.map((e=>{const t={Fonoaudiologia:{bg:"bg-blue-500",light:"bg-blue-100",text:"text-blue-600"},Psicologia:{bg:"bg-red-500",light:"bg-red-100",text:"text-red-600"},Musicoterapia:{bg:"bg-purple-500",light:"bg-purple-100",text:"text-purple-600"},TerapiaOcupacional:{bg:"bg-orange-500",light:"bg-orange-100",text:"text-orange-600"},Psicomotricidade:{bg:"bg-green-500",light:"bg-green-100",text:"text-green-600"},Psicopedagogia:{bg:"bg-yellow-500",light:"bg-yellow-100",text:"text-yellow-600"}}[e.name]||{bg:"bg-gray-500",light:"bg-gray-100",text:"text-gray-600"};const a=(e=>{switch(e){case"improving":return{icon:"\ud83d\udcc8",color:"text-green-600",text:"Melhorando"};case"declining":return{icon:"\ud83d\udcc9",color:"text-red-600",text:"Em queda"};default:return{icon:"\u27a1\ufe0f",color:"text-gray-600",text:"Est\xe1vel"}}})(e.trend),s=Math.min(e.average,100);return(0,We.jsxs)("div",{className:"p-4 bg-white border border-gray-200 rounded-lg hover:shadow-md transition-shadow",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"w-4 h-4 rounded ".concat(t.bg)}),(0,We.jsx)("h4",{className:"font-medium text-gray-800",children:e.name}),(0,We.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs ".concat(t.light," ").concat(t.text),children:[e.programCount," programa",1!==e.programCount?"s":""]})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsxs)("span",{className:"text-sm ".concat(a.color," flex items-center space-x-1"),children:[(0,We.jsx)("span",{children:a.icon}),(0,We.jsx)("span",{children:a.text})]}),(0,We.jsxs)("div",{className:"text-right",children:[(0,We.jsxs)("div",{className:"text-xl font-bold text-gray-800",children:[e.average,"%"]}),(0,We.jsxs)("div",{className:"text-xs text-gray-500",children:[e.sessionCount," sess\xf5es"]})]})]})]}),(0,We.jsxs)("div",{className:"relative",children:[(0,We.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,We.jsx)("div",{className:"h-3 rounded-full transition-all duration-500 ".concat(t.bg),style:{width:"".concat(s,"%")}})}),(0,We.jsx)("div",{className:"absolute top-0 h-3 w-0.5 bg-green-600",style:{left:"80%"},title:"Meta: 80%"})]})]},e.name)}))}),(0,We.jsxs)("div",{className:"text-xs text-gray-500 p-3 bg-gray-50 rounded-lg",children:["\ud83d\udca1 ",(0,We.jsx)("strong",{children:"Dica:"})," A linha verde nas barras indica a meta de 80%. Tend\xeancias s\xe3o calculadas comparando primeira e segunda metade das sess\xf5es."]})]})},rm=e=>{let{activePrograms:t,sessionData:a}=e;const{user:s}=Ye();if(!t||0===t.length)return null;const n={};t.forEach((e=>{const t=e.discipline_name||"Outros";n[t]||(n[t]=[]),n[t].push(e)}));const r=Object.keys(n).sort(),i=e=>{let{program:t}=e;const n=(a||[]).filter((e=>e.program_id===t.program_id));if(0===n.length)return(0,We.jsx)("div",{className:"flex items-center justify-center h-48 text-center bg-gradient-to-br from-gray-50 to-slate-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-gray-100 to-slate-100 p-4 rounded-full w-16 h-16 mx-auto mb-3 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:ni,className:"text-2xl text-gray-400"})}),(0,We.jsx)("p",{className:"text-xs text-gray-500",children:"Sem dados neste per\xedodo"})]})});const r={labels:n.map((e=>sm(e.session_date,"short"))),datasets:[{data:n.map((e=>e.score)),borderColor:"#4f46e5",backgroundColor:e=>{const t=e.chart,{ctx:a,chartArea:s}=t;if(!s)return"rgba(79, 70, 229, 0.1)";const n=a.createLinearGradient(0,s.top,0,s.bottom);return n.addColorStop(0,"rgba(99, 102, 241, 0.2)"),n.addColorStop(.5,"rgba(79, 70, 229, 0.15)"),n.addColorStop(1,"rgba(67, 56, 202, 0.05)"),n},borderWidth:2.5,pointRadius:n.map((e=>e.is_baseline?6:5)),pointBackgroundColor:n.map((e=>{var t;return e.is_baseline?"#f59e0b":null!==(t=e.details)&&void 0!==t&&t.promptLevelColor?e.details.promptLevelColor:"#4f46e5"})),pointBorderColor:n.map((e=>e.is_baseline?"#f59e0b":"#ffffff")),pointBorderWidth:n.map((e=>e.is_baseline?3:2)),pointStyle:n.map((e=>e.is_baseline?"star":"circle")),pointHoverRadius:8,pointHoverBorderWidth:3,fill:!0,tension:.35,shadowColor:"rgba(79, 70, 229, 0.2)",shadowBlur:8,shadowOffsetX:0,shadowOffsetY:3}]},i={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{y:{display:!0,min:0,max:105,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{font:{size:9,weight:500},color:"#6b7280",callback:e=>e+"%"},border:{display:!1}},x:{display:!0,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{font:{size:9,weight:500},color:"#6b7280"},border:{display:!1}}},plugins:{legend:{display:!1},tooltip:{enabled:!0,backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#e5e7eb",borderColor:"#4f46e5",borderWidth:2,padding:12,cornerRadius:8,displayColors:!1,titleFont:{size:12,weight:"bold"},bodyFont:{size:11},callbacks:{title:e=>{if(!e||!e[0]||void 0===e[0].dataIndex)return"Sess\xe3o";const t=n[e[0].dataIndex],a=null===t||void 0===t?void 0:t.is_baseline,s=sm(t.session_date);let r="Sess\xe3o de ".concat(s);return r=a?"\ud83d\udccb [BASELINE] ".concat(r):"\ud83d\udcc8 ".concat(r),r},label:e=>{const t=e.parsed.y.toFixed(1);return"\ud83c\udfaf Pontua\xe7\xe3o: ".concat(t,"%")},afterLabel:e=>{var t;if(!e||void 0===e.dataIndex)return"";const a=e.dataIndex,s=n[a];0===a&&(console.log("Dashboard data - attempts:",null===s||void 0===s?void 0:s.attempts),console.log("Dashboard data - successes:",null===s||void 0===s?void 0:s.successes),console.log("Dashboard data - created_at:",null===s||void 0===s?void 0:s.created_at),console.log("Dashboard data - therapist_name:",null===s||void 0===s?void 0:s.therapist_name),console.log("Dashboard data - FULL OBJECT:",JSON.stringify(s,null,2)));const r=(null===s||void 0===s?void 0:s.attempts)||0,i=(null===s||void 0===s?void 0:s.successes)||0;let o=["\ud83d\udcca Acertos: ".concat(i,"/").concat(r)];return null!==s&&void 0!==s&&null!==(t=s.details)&&void 0!==t&&t.promptLevelName&&o.push("\ud83c\udfaf N\xedvel: ".concat(s.details.promptLevelName)),s&&s.therapist_name&&""!==s.therapist_name.trim()?o.push("\ud83d\udc68\u200d\u2695\ufe0f Terapeuta: ".concat(s.therapist_name)):s&&s.therapist_id&&null!==s.therapist_id&&o.push("\ud83d\udc68\u200d\u2695\ufe0f Terapeuta ID: ".concat(s.therapist_id)),o},afterBody:e=>{if(!e||!e[0]||void 0===e[0].dataIndex)return"";const t=n[e[0].dataIndex];let a=[];if(null!==t&&void 0!==t&&t.notes&&(a.push("\n\ud83d\udcdd Observa\xe7\xf5es:"),a.push("".concat(t.notes))),e[0].dataIndex,s&&("therapist"===s.role||"terapeuta"===s.role||"admin"===s.role||"administrador"===s.role)&&null!==t&&void 0!==t&&t.created_at){const e=new Date(t.created_at).toLocaleString("pt-BR");a.push("\n\ud83d\udcc5 Registrado: ".concat(e))}return a}}},annotation:{annotations:{goalLine:{type:"line",yMin:80,yMax:80,borderColor:"#10b981",borderWidth:2,borderDash:[6,6],label:{content:"\ud83c\udfaf Meta (80%)",enabled:!0,position:"end",backgroundColor:"rgba(16, 185, 129, 0.9)",font:{size:9,weight:"bold"},color:"white",padding:4,borderRadius:4,yAdjust:-8}}}}}};return(0,We.jsxs)("div",{className:"w-full",children:[(0,We.jsx)("div",{className:"h-48 w-full",children:(0,We.jsx)(Sd,{options:i,data:r})}),(0,We.jsxs)("div",{className:"mt-3 bg-gray-50 rounded-lg p-2 border border-gray-200",children:[(0,We.jsxs)("div",{className:"mb-2",children:[(0,We.jsx)("h6",{className:"text-xs font-medium text-gray-700 mb-1",children:"N\xedveis de Prompting:"}),(0,We.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#10b981"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"Independente"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#8b5cf6"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"Verbal"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#f59e0b"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"Gestual"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#ef4444"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"F\xedsica Parcial"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:"#dc2626"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"F\xedsica Total"})]})]})]}),(0,We.jsx)("div",{className:"border-t border-gray-200 pt-1",children:(0,We.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("span",{className:"text-amber-500 text-sm",children:"\u2b50"}),(0,We.jsx)("span",{className:"text-gray-600",children:"Linha de Base"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,We.jsx)("div",{className:"w-2 h-2 rounded-full bg-indigo-500"}),(0,We.jsx)("span",{className:"text-gray-600",children:"Sess\xe3o Regular"})]})]})})]})]})};return(0,We.jsx)("div",{className:"mt-8",children:r.map((e=>n[e]&&0!==n[e].length?(0,We.jsxs)("div",{className:"mb-8",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-l-4 border-indigo-500 p-4 rounded-r-lg mb-6",children:[(0,We.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[(0,We.jsx)("div",{className:"bg-indigo-100 p-2 rounded-full mr-3",children:(0,We.jsx)(Vn,{icon:Rr,className:"text-indigo-600"})}),e]}),(0,We.jsx)("p",{className:"text-sm text-indigo-700 mt-1",children:"Gr\xe1ficos de progresso individual por programa"})]}),(0,We.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n[e].map((e=>(0,We.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-indigo-200 px-4 py-3",children:[(0,We.jsx)("p",{className:"text-sm font-semibold text-gray-800 truncate",title:e.program_name,children:e.program_name}),(0,We.jsxs)("p",{className:"text-xs text-indigo-600 mt-1",children:["Tentativas: ",e.trials||"N/A",null!==e.custom_trials&&void 0!==e.custom_trials&&(0,We.jsx)("span",{className:"ml-1 text-blue-500 text-xs",children:"(customizado)"})]})]}),(0,We.jsx)("div",{className:"p-4",children:(0,We.jsx)("div",{className:"bg-gradient-to-br from-gray-50 to-indigo-50 rounded-lg p-2",children:(0,We.jsx)(i,{program:e})})})]},e.program_id)))})]},e):null))})},im=()=>{const{user:e}=Ye(),{patients:t,selectedPatient:a,isLoading:n}=dt(),[r,i]=(0,s.useState)(""),[o,l]=(0,s.useState)(""),c=(0,s.useMemo)((()=>null!==a&&void 0!==a&&a.assigned_programs?a.assigned_programs:[]),[a]),d=(0,s.useMemo)((()=>new Set(c.map((e=>e.program_id)))),[c]),u=(0,s.useMemo)((()=>{if(null===a||void 0===a||!a.sessionData)return[];const e=r?new Date(r+"T00:00:00"):null,t=o?new Date(o+"T23:59:59"):null;return a.sessionData.filter((a=>{if(!d.has(a.program_id))return!1;const s=new Date(a.session_date);return!(e&&s<e)&&!(t&&s>t)}))}),[a,r,o,d]);if(n)return(0,We.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-3xl text-indigo-500"})});const h=(null===t||void 0===t?void 0:t.length)||0,m=(null===e||void 0===e?void 0:e.max_patients)||0,p=(null===t||void 0===t?void 0:t.reduce(((e,t)=>{var a;return e+((null===(a=t.sessionData)||void 0===a?void 0:a.length)||0)}),0))||0,f=(()=>{if(!u||0===u.length)return{assignedProgramsCount:c.length,overallAverage:"--",programsAboveGoal:"--",sessionFrequency:"--",acquisitionRate:"--",averageDaysToMastery:"--",stabilityIndex:"--",regressionAlerts:0,interpretations:{},recommendations:[]};const e=u.filter((e=>!e.is_baseline&&"number"===typeof e.score)).map((e=>e.score)),t=e.length>0?(e.reduce(((e,t)=>e+t),0)/e.length).toFixed(1):"--",a={};u.filter((e=>!e.is_baseline)).forEach((e=>{a[e.program_id]||(a[e.program_id]={scores:[],dates:[],sessions:[]}),a[e.program_id].scores.push(e.score),a[e.program_id].dates.push(new Date(e.session_date)),a[e.program_id].sessions.push(e)}));const s=Object.values(a).map((e=>e.scores.reduce(((e,t)=>e+t),0)/e.scores.length)),n=s.filter((e=>e>=80)).length,r=Math.max(s.length,c.length);let i=0,o=0,l=0,d=0;Object.values(a).forEach((e=>{e.dates.sort(((e,t)=>e-t));const t=e.sessions.slice(-5),a=t.reduce(((e,t)=>e+t.score),0)/t.length;if(a>=80&&t.length>=3){i++;const t=e.dates[0],a=e.dates[e.dates.length-1];o+=(a-t)/864e5,l++}if(e.sessions.length>=6){const t=e.sessions.slice(0,Math.floor(e.sessions.length/3)),a=e.sessions.slice(-Math.floor(e.sessions.length/3)),s=t.reduce(((e,t)=>e+t.score),0)/t.length,n=a.reduce(((e,t)=>e+t.score),0)/a.length;s-n>10&&d++}}));const h=r>0?(i/r*100).toFixed(1):"--",m=l>0?(o/l).toFixed(0):"--";let p=0,f=0;Object.values(a).forEach((e=>{if(e.scores.length>=5){const t=e.scores.slice(-5),a=t.reduce(((e,t)=>e+t),0)/t.length,s=t.reduce(((e,t)=>e+Math.pow(t-a,2)),0)/t.length,n=Math.sqrt(s),r=Math.max(0,100-2*n);p+=r,f++}}));const g=f>0?(p/f).toFixed(1):"--",x=u.map((e=>new Date(e.session_date))).sort(((e,t)=>e-t));let b="--";if(x.length>=2){const e=[...new Set(x.map((e=>e.toDateString())))],t=Math.max((x[x.length-1]-x[0])/864e5,1),a=Math.max(t/7,1);b=a>0?(e.length/a).toFixed(1):"--"}const v={overallAverage:parseFloat(t)>=70?"good":parseFloat(t)>=50?"attention":"critical",sessionFrequency:parseFloat(b)>=3?"good":parseFloat(b)>=2?"attention":"critical",acquisitionRate:parseFloat(h)>=30?"good":parseFloat(h)>=15?"attention":"critical",stabilityIndex:parseFloat(g)>=80?"good":parseFloat(g)>=60?"attention":"critical"},y=[];return"critical"===v.overallAverage&&y.push("Revisar estrat\xe9gias de interven\xe7\xe3o - progresso abaixo do esperado"),"critical"===v.sessionFrequency&&y.push("Aumentar frequ\xeancia de atendimentos para acelerar aquisi\xe7\xf5es"),parseFloat(h)<20&&y.push("Analisar crit\xe9rios de dom\xednio - poucos programas atingindo metas"),d>0&&y.push("Aten\xe7\xe3o: ".concat(d," programa(s) apresentando regress\xe3o")),"critical"===v.stabilityIndex&&y.push("Focar na manuten\xe7\xe3o - performance inconsistente"),{assignedProgramsCount:c.length,overallAverage:t,programsAboveGoal:"".concat(n,"/").concat(r),sessionFrequency:"--"===b?"--":b,acquisitionRate:h,averageDaysToMastery:m,stabilityIndex:g,regressionAlerts:d,interpretations:v,recommendations:y}})();return(0,We.jsx)("div",{children:a?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-4",children:[(0,We.jsxs)("h1",{className:"text-2xl font-semibold text-gray-800",children:["Dashboard: ",a.name]}),(0,We.jsx)("div",{className:"flex items-center gap-3",children:!(null!==e&&void 0!==e&&e.is_admin)&&(0,We.jsxs)("button",{onClick:()=>window.dispatchEvent(new CustomEvent("checkProgressAlerts")),className:"bg-amber-600 text-white px-3 py-2 rounded-lg text-sm font-medium hover:bg-amber-700 transition-colors flex items-center space-x-1",title:"Verificar se h\xe1 programas prontos para serem marcados como dominados",children:[(0,We.jsx)(Vn,{icon:_r}),(0,We.jsx)("span",{className:"hidden sm:inline",children:"Verificar Progresso"})]})})]}),(0,We.jsx)(tm,{}),(0,We.jsx)(am,{recommendations:f.recommendations,regressionAlerts:f.regressionAlerts}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-6",children:[(0,We.jsx)(em,{title:"Programas Ativos",value:f.assignedProgramsCount,icon:to,colorClass:{bg:"bg-indigo-100",text:"text-indigo-600"}}),(0,We.jsx)(em,{title:"Programas Acima da Meta (\u226580%)",value:f.programsAboveGoal,icon:_r,colorClass:{bg:"bg-emerald-100",text:"text-emerald-600"},interpretation:f.interpretations.overallAverage}),(0,We.jsx)(em,{title:"Frequ\xeancia Semanal de Sess\xf5es",value:"".concat(f.sessionFrequency).concat("--"!==f.sessionFrequency?"/sem":""),icon:ir,colorClass:{bg:"bg-amber-100",text:"text-amber-600"},interpretation:f.interpretations.sessionFrequency})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,We.jsx)(em,{title:"Taxa de Aquisi\xe7\xe3o (%)",value:"".concat(f.acquisitionRate,"%"),icon:fo,colorClass:{bg:"bg-purple-100",text:"text-purple-600"},interpretation:f.interpretations.acquisitionRate}),(0,We.jsx)(em,{title:"Tempo M\xe9dio at\xe9 Crit\xe9rio",value:"".concat(f.averageDaysToMastery).concat("--"!==f.averageDaysToMastery?" dias":""),icon:Ti,colorClass:{bg:"bg-blue-100",text:"text-blue-600"}}),(0,We.jsx)(em,{title:"\xcdndice de Estabilidade",value:"".concat(f.stabilityIndex).concat("--"!==f.stabilityIndex?"%":""),icon:Po,colorClass:{bg:"bg-green-100",text:"text-green-600"},interpretation:f.interpretations.stabilityIndex})]}),(0,We.jsxs)("div",{className:"mt-8 bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,We.jsxs)("h2",{className:"text-lg font-semibold text-gray-700 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:ni,className:"mr-3 text-emerald-500"}),"Progresso por \xc1rea de Interven\xe7\xe3o"]}),(0,We.jsx)("div",{className:"relative",children:(0,We.jsx)(nm,{sessionData:u,activePrograms:c,analytics:f})})]}),(0,We.jsx)("div",{className:"mt-6",children:(0,We.jsx)(Dh,{startDate:r,endDate:o,onStartDateChange:i,onEndDateChange:l,onClear:()=>{i(""),l("")}})}),(0,We.jsx)(rm,{activePrograms:c,sessionData:u})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,We.jsx)("h1",{className:"text-2xl font-semibold text-gray-800",children:null!==e&&void 0!==e&&e.is_admin?"Dashboard da Cl\xednica":"Dashboard Geral"}),!(null!==e&&void 0!==e&&e.is_admin)&&(0,We.jsxs)("button",{onClick:()=>window.dispatchEvent(new CustomEvent("checkProgressAlerts")),className:"bg-amber-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-amber-700 transition-colors flex items-center space-x-2",title:"Verificar se h\xe1 programas prontos para serem marcados como dominados",children:[(0,We.jsx)(Vn,{icon:_r}),(0,We.jsx)("span",{children:"Verificar Progresso"})]})]}),(0,We.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:null!==e&&void 0!==e&&e.is_admin?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(em,{title:"Pacientes Cadastrados",value:h,icon:yr,colorClass:{bg:"bg-indigo-100",text:"text-indigo-600"}}),(0,We.jsx)(em,{title:"Limite Contratado",value:m,icon:ir,colorClass:{bg:"bg-blue-100",text:"text-blue-600"}}),(0,We.jsx)(em,{title:"Utiliza\xe7\xe3o da Licen\xe7a",value:"".concat(m>0?Math.round(h/m*100):0,"%"),icon:fo,colorClass:{bg:"bg-emerald-100",text:"text-emerald-600"},interpretation:m>0?h>=m?"critical":h>=.9*m?"attention":"good":"critical"})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(em,{title:"Clientes Atribu\xeddos a Mim",value:h,icon:yr,colorClass:{bg:"bg-indigo-100",text:"text-indigo-600"}}),(0,We.jsx)(em,{title:"Total de Sess\xf5es (Meus Clientes)",value:p,icon:ir,colorClass:{bg:"bg-emerald-100",text:"text-emerald-600"}})]})}),(null===e||void 0===e?void 0:e.is_admin)&&(0,We.jsxs)("div",{className:"mt-6 bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,We.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,We.jsx)(Vn,{icon:yr,className:"mr-3 text-indigo-500"}),"Status da Assinatura"]}),(0,We.jsx)("div",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(h>=m?"bg-red-100 text-red-800":h>=.9*m?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:h>=m?"\ud83d\udeab Limite Atingido":h>=.9*m?"\u26a0\ufe0f Pr\xf3ximo do Limite":"\u2705 Dentro do Limite"})]}),(0,We.jsxs)("div",{className:"relative",children:[(0,We.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4",children:(0,We.jsx)("div",{className:"h-4 rounded-full transition-all duration-500 ".concat(h>=m?"bg-red-500":h>=.9*m?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(h/Math.max(m,1)*100,100),"%")}})}),(0,We.jsxs)("div",{className:"flex justify-between text-sm text-gray-600 mt-2",children:[(0,We.jsx)("span",{children:"0 pacientes"}),(0,We.jsxs)("span",{className:"font-medium",children:[h," / ",m," pacientes"]}),(0,We.jsxs)("span",{children:[m," pacientes (limite)"]})]})]}),h>=.8*m&&(0,We.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border-l-4 border-yellow-400 rounded-r-lg",children:(0,We.jsxs)("p",{className:"text-yellow-800 text-sm",children:[(0,We.jsx)(Vn,{icon:To,className:"mr-2"}),h>=m?"Voc\xea atingiu o limite de pacientes da sua assinatura. Entre em contato para atualizar seu plano.":"Voc\xea est\xe1 pr\xf3ximo do limite de pacientes. Considere atualizar sua assinatura."]})})]}),(0,We.jsxs)("div",{className:"mt-8 text-center text-gray-500 p-8 border-2 border-dashed rounded-lg bg-gray-50",children:[(0,We.jsx)(Vn,{icon:$i,className:"text-4xl text-gray-300 mb-3"}),(0,We.jsx)("p",{children:"Selecione um cliente para ver um dashboard mais detalhado."})]})]})})};fd.t1.register(fd.PP,fd.kc,fd.FN,fd.No,fd.hE,fd.m_,fd.s$,fd.dN,Sh);const om=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long";if(!e)return"N/A";const a=new Date(e);if(isNaN(a.getTime()))return"Data inv\xe1lida";const s=6e4*a.getTimezoneOffset(),n="short"===t?{day:"2-digit",month:"2-digit"}:{day:"2-digit",month:"2-digit",year:"numeric"};return new Date(a.getTime()+s).toLocaleDateString("pt-BR",n)},lm=e=>{let{program:t,sessionData:a}=e;const s=(a||[]).filter((e=>e.program_id===t.id));if(0===s.length)return(0,We.jsx)("div",{className:"flex items-center justify-center h-48 text-center bg-gradient-to-br from-gray-50 to-slate-50 rounded-lg border-2 border-dashed border-gray-300",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-gray-100 to-slate-100 p-4 rounded-full w-16 h-16 mx-auto mb-3 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:ni,className:"text-2xl text-gray-400"})}),(0,We.jsx)("p",{className:"text-xs text-gray-500",children:"Sem dados de sess\xe3o"})]})});const n={labels:s.map((e=>om(e.session_date,"short"))),datasets:[{label:"Pontua\xe7\xe3o (%)",data:s.map((e=>e.score)),borderColor:"#4f46e5",backgroundColor:e=>{const t=e.chart,{ctx:a,chartArea:s}=t;if(!s)return"rgba(79, 70, 229, 0.1)";const n=a.createLinearGradient(0,s.top,0,s.bottom);return n.addColorStop(0,"rgba(99, 102, 241, 0.3)"),n.addColorStop(.5,"rgba(79, 70, 229, 0.2)"),n.addColorStop(1,"rgba(67, 56, 202, 0.1)"),n},borderWidth:3,pointRadius:s.map((e=>e.is_baseline?8:6)),pointBackgroundColor:s.map((e=>e.is_baseline?"#f59e0b":e.details&&e.details.promptLevelColor?e.details.promptLevelColor:"#4f46e5")),pointBorderColor:s.map((e=>e.is_baseline?"#f59e0b":"#ffffff")),pointBorderWidth:s.map((e=>e.is_baseline?4:2)),pointHoverRadius:s.map((e=>e.is_baseline?10:8)),pointHoverBorderWidth:3,pointStyle:s.map((e=>e.is_baseline?"star":"circle")),fill:!0,tension:.4,shadowColor:"rgba(79, 70, 229, 0.3)",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:4}]},r={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},scales:{y:{display:!0,beginAtZero:!0,max:105,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{font:{size:11,weight:500},color:"#6b7280",callback:e=>e+"%"},border:{display:!1}},x:{display:!0,grid:{display:!0,color:"rgba(156, 163, 175, 0.2)",drawBorder:!1},ticks:{font:{size:11,weight:500},color:"#6b7280"},border:{display:!1}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(17, 24, 39, 0.95)",titleColor:"#ffffff",bodyColor:"#e5e7eb",borderColor:"#4f46e5",borderWidth:2,padding:16,cornerRadius:12,displayColors:!1,titleFont:{size:14,weight:"bold"},bodyFont:{size:13},callbacks:{title:e=>{var t;const a=e[0].dataIndex,n=null===(t=s[a])||void 0===t?void 0:t.is_baseline,r="Sess\xe3o de ".concat(om(s[a].session_date));return n?"\ud83d\udccb [LINHA DE BASE] ".concat(r):"\ud83d\udcc8 ".concat(r)},label:e=>"Pontua\xe7\xe3o: ".concat(e.parsed.y.toFixed(1),"%"),afterLabel:e=>{const t=e.dataIndex,a=s[t],n=(null===a||void 0===a?void 0:a.attempts)||0,r=(null===a||void 0===a?void 0:a.successes)||0;return n>0?"Acertos: ".concat(r,"/").concat(n):""},afterBody:e=>{var t;if(!e||!e[0]||void 0===e[0].dataIndex)return"";const a=e[0].dataIndex,n=null===(t=s[a])||void 0===t?void 0:t.notes;return n?"\n\ud83d\udcdd Observa\xe7\xf5es:\n".concat(n):""}}}}};return(0,We.jsxs)("div",{className:"w-full relative bg-gradient-to-br from-gray-50 to-indigo-50 rounded-lg p-2",children:[(0,We.jsx)("div",{className:"h-48 sm:h-56 mb-4",children:(0,We.jsx)(Sd,{options:r,data:n})}),(0,We.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[(0,We.jsx)("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:"N\xedveis de Prompting:"}),(0,We.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 text-xs",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#10b981"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"Independente"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#8b5cf6"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"Verbal"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#f59e0b"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"Gestual"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#ef4444"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"F\xedsica Parcial"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#dc2626"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"F\xedsica Total"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#6b7280"}}),(0,We.jsx)("span",{className:"text-gray-600",children:"Sem Resposta"})]})]}),(0,We.jsxs)("div",{className:"mt-3 pt-2 border-t border-gray-100",children:[(0,We.jsx)("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:"S\xedmbolos:"}),(0,We.jsxs)("div",{className:"flex items-center space-x-4 text-xs",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"text-yellow-500 text-base",children:"\u2b50"}),(0,We.jsx)("span",{className:"text-gray-600",children:"Linha de Base"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"text-indigo-500 text-base",children:"\u25cf"}),(0,We.jsx)("span",{className:"text-gray-600",children:"Sess\xe3o Regular"})]})]})]})]})]})},cm=()=>{Z();const{selectedPatient:e,isLoading:t,error:a}=dt(),{getProgramById:n,isLoading:r}=mt(),[i,o]=(0,s.useState)(""),[l,c]=(0,s.useState)(""),d=(0,s.useMemo)((()=>{if(null===e||void 0===e||!e.sessionData)return[];const t=i?new Date(i+"T00:00:00"):null,a=l?new Date(l+"T23:59:59"):null;return e.sessionData.filter((e=>{const s=new Date(e.session_date);return!(t&&s<t)&&!(a&&s>a)}))}),[e,i,l]);if(t||r)return(0,We.jsx)("div",{className:"flex items-center justify-center h-full text-center p-10",children:(0,We.jsxs)("div",{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-4xl text-indigo-500 mb-4"}),(0,We.jsx)("p",{className:"text-gray-500",children:"A carregar dados de acompanhamento..."})]})});if(a)return(0,We.jsxs)("div",{className:"flex flex-col items-center justify-center text-center text-red-500 p-10 border-2 border-dashed border-red-200 rounded-lg bg-red-50 h-full",children:[(0,We.jsx)(Vn,{icon:pr,className:"text-5xl text-red-400 mb-4"}),(0,We.jsx)("p",{className:"text-lg font-medium text-red-700",children:"Ocorreu um erro"}),(0,We.jsx)("p",{className:"mt-1 text-sm",children:a})]});if(!e)return(0,We.jsxs)("div",{className:"flex flex-col items-center justify-center text-center text-gray-500 p-10 border-2 border-dashed border-gray-200 rounded-lg bg-gray-50 h-full",children:[(0,We.jsx)(Vn,{icon:pr,className:"text-5xl text-gray-400 mb-4"}),(0,We.jsx)("p",{className:"text-lg font-medium text-gray-700",children:"Paciente n\xe3o encontrado"}),(0,We.jsx)("p",{className:"mt-1 text-sm",children:"N\xe3o foi poss\xedvel carregar os dados do paciente associado."})]});const u=(e.assigned_programs||[]).map((e=>{const t=e.id||e.program_id||e.programId;return n(t)})).filter((e=>e)),h=u.reduce(((e,t)=>{const a=t.discipline||"Outros";return e[a]||(e[a]=[]),e[a].push(t),e}),{});return(0,We.jsxs)("div",{className:"p-4 md:p-6",children:[(0,We.jsx)("div",{className:"flex flex-wrap justify-between items-start mb-6 gap-4",children:(0,We.jsxs)("div",{children:[(0,We.jsxs)("h1",{className:"text-2xl font-semibold text-gray-800 mb-2",children:["Acompanhamento de ",e.name]}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Progresso nos programas de interven\xe7\xe3o."})]})}),(0,We.jsx)("div",{className:"mb-8 max-w-5xl mx-auto",children:(0,We.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden border border-gray-100",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-700 px-8 py-8 relative overflow-hidden",children:[(0,We.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"}),(0,We.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-bl from-white/5 to-transparent rounded-full -translate-y-32 translate-x-32"}),(0,We.jsx)("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-gradient-to-tr from-white/5 to-transparent rounded-full translate-y-24 -translate-x-24"}),(0,We.jsxs)("div",{className:"relative z-10 text-center",children:[(0,We.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-white/20 backdrop-blur-sm rounded-2xl mb-4",children:(0,We.jsx)(Vn,{icon:rr,className:"text-3xl text-white"})}),(0,We.jsx)("h3",{className:"text-2xl font-bold text-white mb-3 tracking-wide",children:"Comunica\xe7\xe3o com a Equipe Terap\xeautica"}),(0,We.jsxs)("div",{className:"max-w-2xl mx-auto space-y-3",children:[(0,We.jsx)("p",{className:"text-blue-100 font-medium text-lg leading-relaxed",children:"\ud83d\udcac Converse diretamente com todos os terapeutas do seu filho"}),(0,We.jsx)("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl px-6 py-4 border border-white/20",children:(0,We.jsxs)("p",{className:"text-white text-sm leading-relaxed",children:["\u2728 Use ",(0,We.jsx)("span",{className:"bg-white/20 text-white px-3 py-1 rounded-lg font-mono font-semibold mx-1 border border-white/30",children:"@nome"})," para mencionar um terapeuta espec\xedfico"]})}),(0,We.jsxs)("div",{className:"flex items-center justify-center space-x-6 text-blue-100 text-sm",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),(0,We.jsx)("span",{className:"font-medium",children:"\ud83d\udcf1 Tempo Real"})]}),(0,We.jsx)("div",{className:"w-px h-4 bg-white/30"}),(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"w-2 h-2 bg-yellow-400 rounded-full animate-pulse"}),(0,We.jsx)("span",{className:"font-medium",children:"\ud83d\udd14 Notifica\xe7\xf5es"})]})]})]})]})]}),(0,We.jsx)("div",{className:"p-4",children:(0,We.jsx)(Ic,{patientId:e.id,patientName:e.name})})]})}),(0,We.jsx)("div",{className:"mb-6",children:(0,We.jsx)(Dh,{startDate:i,endDate:l,onStartDateChange:o,onEndDateChange:c,onClear:()=>{o(""),c("")}})}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("h3",{className:"text-xl font-semibold text-gray-700 mb-3 pb-2 border-b border-gray-200 flex items-center",children:[(0,We.jsx)(Vn,{icon:ni,className:"mr-3 text-indigo-500"}),"Progresso por \xc1rea de Interven\xe7\xe3o"]}),Object.keys(h).length>0?Object.keys(h).sort().map((e=>(0,We.jsxs)("div",{className:"mb-8 bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-indigo-200 px-6 py-4",children:[(0,We.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,We.jsx)("div",{className:"bg-indigo-100 p-2 rounded-full mr-3",children:(0,We.jsx)(Vn,{icon:ni,className:"text-indigo-600"})}),e]}),(0,We.jsx)("p",{className:"text-sm text-indigo-700 mt-1",children:"Gr\xe1ficos de progresso individual"})]}),(0,We.jsx)("div",{className:"p-6",children:(0,We.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h[e].map((e=>(0,We.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 border-b border-gray-200 px-4 py-3",children:(0,We.jsx)("h5",{className:"text-sm font-semibold text-gray-800 text-center",children:e.name})}),(0,We.jsx)("div",{className:"p-4",children:(0,We.jsx)(lm,{program:e,sessionData:d})})]},e.id)))})})]},e))):(0,We.jsx)("p",{className:"text-center text-gray-500 py-6 col-span-full",children:"Nenhum programa atribu\xeddo para visualiza\xe7\xe3o."})]})]})},dm=e=>{let{isOpen:t,onClose:a,onSave:n,userToEdit:r=null,patients:i=[]}=e;const[o,l]=(0,s.useState)({fullName:"",username:"",password:"",role:"terapeuta",associated_patient_id:""}),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(""),m=Boolean(r);(0,s.useEffect)((()=>{l(m?{fullName:r.full_name||"",username:r.username||"",password:"",role:r.role||"terapeuta",associated_patient_id:r.associated_patient_id||""}:{fullName:"",username:"",password:"",role:"terapeuta",associated_patient_id:""}),h("")}),[t,r,m]);const p=e=>{const{name:t,value:a}=e.target;l((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:a})))},f=async e=>{if(e.preventDefault(),h(""),m||o.password)if("pai"!==o.role||o.associated_patient_id){d(!0);try{await n(o),a()}catch(Ff){h(Ff.message||"Ocorreu um erro desconhecido.")}finally{d(!1)}}else h("\xc9 obrigat\xf3rio selecionar um paciente para o papel 'Pai/Respons\xe1vel'.");else h("O campo 'senha' \xe9 obrigat\xf3rio para novos utilizadores.")};return t?(0,We.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center z-50 p-4 transition-opacity",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col transform transition-all",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center p-5 border-b border-gray-200",children:[(0,We.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:m?"Editar Utilizador":"Adicionar Novo Utilizador"}),(0,We.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,We.jsx)(Vn,{icon:lo,className:"text-lg"})})]}),(0,We.jsxs)("form",{onSubmit:f,className:"p-6 space-y-4 overflow-y-auto",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),(0,We.jsx)("input",{type:"text",id:"fullName",name:"fullName",value:o.fullName,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome de Utilizador (login)"}),(0,We.jsx)("input",{type:"text",id:"username",name:"username",value:o.username,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha"}),(0,We.jsx)("input",{type:"password",id:"password",name:"password",value:o.password,onChange:p,placeholder:m?"Deixe em branco para n\xe3o alterar":"M\xednimo 6 caracteres",required:!m,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fun\xe7\xe3o"}),(0,We.jsxs)("select",{id:"role",name:"role",value:o.role,onChange:e=>{const{value:t}=e.target;l((e=>(0,Ie.A)((0,Ie.A)({},e),{},{role:t,associated_patient_id:""})))},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white",children:[(0,We.jsx)("option",{value:"terapeuta",children:"Terapeuta"}),(0,We.jsx)("option",{value:"pai",children:"Pai/Respons\xe1vel"})]})]}),"pai"===o.role&&(0,We.jsxs)("div",{className:"transition-all duration-300 ease-in-out",children:[(0,We.jsx)("label",{htmlFor:"associated_patient_id",className:"block text-sm font-medium text-gray-700 mb-1",children:"Paciente Associado"}),(0,We.jsxs)("select",{id:"associated_patient_id",name:"associated_patient_id",value:o.associated_patient_id,onChange:p,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 bg-white",children:[(0,We.jsx)("option",{value:"",children:"-- Selecione um paciente --"}),i.length>0?i.map((e=>(0,We.jsxs)("option",{value:e.id,children:[e.name," (ID: ",e.id,")"]},e.id))):(0,We.jsx)("option",{disabled:!0,children:"Nenhum paciente cadastrado na cl\xednica"})]})]}),u&&(0,We.jsx)("p",{className:"text-red-500 text-sm text-center bg-red-50 p-3 rounded-md",children:u})]}),(0,We.jsxs)("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex justify-end",children:[(0,We.jsx)("button",{onClick:a,type:"button",className:"bg-white hover:bg-gray-100 text-gray-700 font-medium py-2 px-4 rounded-md border border-gray-300 mr-3",children:"Cancelar"}),(0,We.jsxs)("button",{onClick:f,disabled:c,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md transition-colors shadow flex items-center disabled:opacity-60",children:[(0,We.jsx)(Vn,{icon:c?xo:di,className:"mr-2 ".concat(c&&"fa-spin")}),c?"A guardar...":"Guardar"]})]})]})}):null},um=e=>{let{isOpen:t,onClose:a,patient:n,allTherapists:r=[]}=e;const{token:i}=Ye(),[o,l]=(0,s.useState)(new Set),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)("");(0,s.useEffect)((()=>{if(t&&n){const e=async()=>{d(!0),p("");try{const e=await(async(e,t)=>{try{return(await $e.A.get("".concat(Xe,"/admin/assignments/").concat(e),Je(t))).data.therapists||[]}catch(m){var a,s,n,r;throw new Error((null===(a=m.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"N\xe3o foi poss\xedvel carregar as atribui\xe7\xf5es.")}})(n.id,i);l(new Set(e.map((e=>e.id))))}catch(Ff){p(Ff.message||"N\xe3o foi poss\xedvel carregar as atribui\xe7\xf5es.")}finally{d(!1)}};e()}}),[t,n,i]);return t?(0,We.jsx)("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-60 flex items-center justify-center z-50 p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[90vh] flex flex-col",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center p-5 border-b border-gray-200",children:[(0,We.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[(0,We.jsx)(Vn,{icon:yr,className:"mr-3 text-indigo-500"}),"Gerir Terapeutas para: ",(0,We.jsx)("span",{className:"font-bold ml-2",children:null===n||void 0===n?void 0:n.name})]}),(0,We.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,We.jsx)(Vn,{icon:lo,className:"text-lg"})})]}),(0,We.jsx)("div",{className:"p-6 overflow-y-auto",children:c?(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-2xl text-indigo-500"}),(0,We.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"A carregar atribui\xe7\xf5es..."})]}):m?(0,We.jsx)("p",{className:"text-red-500 text-sm text-center bg-red-50 p-3 rounded-md",children:m}):(0,We.jsxs)("fieldset",{className:"space-y-3",children:[(0,We.jsx)("legend",{className:"text-sm font-medium text-gray-900 mb-2",children:"Selecione os terapeutas a serem atribu\xeddos:"}),r.length>0?r.map((e=>(0,We.jsxs)("div",{className:"relative flex items-start",children:[(0,We.jsx)("div",{className:"flex items-center h-5",children:(0,We.jsx)("input",{id:"therapist-".concat(e.id),name:"therapist-".concat(e.id),type:"checkbox",checked:o.has(e.id),onChange:()=>{return t=e.id,void l((e=>{const a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a}));var t},className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),(0,We.jsxs)("div",{className:"ml-3 text-sm",children:[(0,We.jsx)("label",{htmlFor:"therapist-".concat(e.id),className:"font-medium text-gray-700 cursor-pointer",children:e.full_name}),(0,We.jsxs)("p",{className:"text-gray-500 text-xs",children:["ID: ",e.id," | Username: ",e.username]})]})]},e.id))):(0,We.jsx)("p",{className:"text-sm text-gray-500 italic",children:"Nenhum terapeuta encontrado na cl\xednica."})]})}),(0,We.jsxs)("div",{className:"p-4 bg-gray-50 border-t border-gray-200 flex justify-end",children:[(0,We.jsx)("button",{onClick:a,type:"button",className:"bg-white hover:bg-gray-100 text-gray-700 font-medium py-2 px-4 rounded-md border border-gray-300 mr-3",children:"Cancelar"}),(0,We.jsxs)("button",{onClick:async()=>{if(n){h(!0),p("");try{const e=Array.from(o);await(async(e,t,a)=>{try{return(await $e.A.put("".concat(Xe,"/admin/assignments/").concat(e),{therapistIds:t},Je(a))).data}catch(m){var s,n,r,i;throw new Error((null===(s=m.response)||void 0===s||null===(n=s.data)||void 0===n||null===(r=n.errors)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.msg)||"N\xe3o foi poss\xedvel atualizar as atribui\xe7\xf5es.")}})(n.id,e,i),a()}catch(Ff){p(Ff.message||"N\xe3o foi poss\xedvel guardar as atribui\xe7\xf5es.")}finally{h(!1)}}},disabled:u||c,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-md transition-colors shadow flex items-center disabled:opacity-60",children:[(0,We.jsx)(Vn,{icon:u?xo:di,className:"mr-2 ".concat(u&&"fa-spin")}),u?"A guardar...":"Guardar Atribui\xe7\xf5es"]})]})]})}):null},hm=e=>{let{isOpen:t,onClose:a,title:s,children:n,size:r="max-w-3xl"}=e;return t?(0,We.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,We.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,We.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:a}),(0,We.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle ".concat(r," w-full"),children:(0,We.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,We.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:s}),(0,We.jsxs)("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:a,children:[(0,We.jsx)("span",{className:"sr-only",children:"Fechar"}),(0,We.jsx)(Vn,{icon:lo,className:"h-6 w-6"})]})]}),(0,We.jsx)("div",{className:"mt-3",children:n})]})})]})}):null},mm=e=>{let{isOpen:t,onClose:a,therapistToDelete:n,availableTherapists:r,onTransferComplete:i}=e;const{token:o}=Ye(),[l,c]=(0,s.useState)(null),[d,u]=(0,s.useState)([]),[h,m]=(0,s.useState)(!1),[p,f]=(0,s.useState)("");(0,s.useEffect)((()=>{t&&n&&g()}),[t,n]);const g=async()=>{try{m(!0),f("");const e=await(async(e,t)=>{try{return(await $e.A.get("".concat(Xe,"/admin/users/").concat(e,"/assignments"),Je(t))).data}catch(p){var a,s,n,r;throw new Error((null===(a=p.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"N\xe3o foi poss\xedvel carregar as atribui\xe7\xf5es.")}})(n.id,o);c(e);const t=[];e.patients.forEach((e=>{e.programs.forEach((a=>{t.push({assignment_id:a.assignment_id,patient_name:e.patient_name,program_name:a.program_name,session_count:a.session_count,to_therapist_id:r.length>0?r[0].id:""})}))})),u(t)}catch(Ff){f("Erro ao carregar atribui\xe7\xf5es do terapeuta."),console.error("Erro ao buscar atribui\xe7\xf5es:",Ff)}finally{m(!1)}};return t?(0,We.jsx)(hm,{isOpen:t,onClose:a,title:"\ud83d\udd04 Transferir Atribui\xe7\xf5es",children:(0,We.jsxs)("div",{className:"max-w-4xl mx-auto",children:[h&&!l&&(0,We.jsxs)("div",{className:"text-center py-4",children:[(0,We.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),(0,We.jsx)("p",{className:"mt-2 text-gray-600",children:"Carregando atribui\xe7\xf5es..."})]}),p&&(0,We.jsx)("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded",children:p}),l&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)("div",{className:"flex-shrink-0",children:"\ud83d\udea8"}),(0,We.jsxs)("div",{className:"ml-3",children:[(0,We.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"ATEN\xc7\xc3O: Transfer\xeancia Obrigat\xf3ria"}),(0,We.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,We.jsxs)("p",{children:[(0,We.jsx)("strong",{children:n.full_name})," possui atribui\xe7\xf5es ativas. Para manter a continuidade do tratamento, \xe9 necess\xe1rio transferir todas as atribui\xe7\xf5es antes da remo\xe7\xe3o."]})})]})]})}),(0,We.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,We.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"\ud83d\udccb Resumo das Atribui\xe7\xf5es:"}),(0,We.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium",children:l.summary.total_patients})," pacientes ativos"]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium",children:l.summary.total_programs})," programas em andamento"]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium",children:l.summary.total_sessions})," sess\xf5es registradas (preservadas no hist\xf3rico)"]})]})]}),(0,We.jsxs)("div",{className:"mb-6",children:[(0,We.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\ud83d\udc64 Selecione o terapeuta substituto para cada programa:"}),(0,We.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:l.patients.map((e=>(0,We.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,We.jsxs)("h4",{className:"font-medium text-gray-900 mb-3",children:["\ud83d\udccb ",e.patient_name]}),(0,We.jsx)("div",{className:"space-y-2",children:e.programs.map((e=>{const t=d.find((t=>t.assignment_id===e.assignment_id));return(0,We.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsx)("span",{className:"text-sm font-medium",children:e.program_name}),(0,We.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["(",e.session_count," sess\xf5es)"]})]}),(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)("span",{className:"text-sm text-gray-500 mr-2",children:"\u2192"}),(0,We.jsxs)("select",{value:(null===t||void 0===t?void 0:t.to_therapist_id)||"",onChange:t=>{return a=e.assignment_id,s=t.target.value,void u((e=>e.map((e=>e.assignment_id===a?(0,Ie.A)((0,Ie.A)({},e),{},{to_therapist_id:parseInt(s)}):e))));var a,s},className:"block w-48 px-3 py-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,We.jsx)("option",{value:"",children:"Selecione um terapeuta"}),r.filter((e=>e.id!==n.id)).map((e=>(0,We.jsx)("option",{value:e.id,children:e.full_name},e.id)))]})]})]},e.assignment_id)}))})]},e.patient_id)))})]}),(0,We.jsxs)("div",{className:"mb-6 p-3 bg-gray-50 border border-gray-200 rounded",children:[(0,We.jsxs)("p",{className:"text-sm text-gray-600",children:["\u26a0\ufe0f ",(0,We.jsx)("strong",{children:"Importante:"})]}),(0,We.jsxs)("ul",{className:"text-sm text-gray-600 mt-1 ml-4 list-disc",children:[(0,We.jsx)("li",{children:"O hist\xf3rico de evolu\xe7\xe3o ser\xe1 preservado"}),(0,We.jsx)("li",{children:"As sess\xf5es j\xe1 realizadas permanecer\xe3o no nome do terapeuta original"}),(0,We.jsx)("li",{children:"O novo terapeuta assumir\xe1 a responsabilidade a partir de hoje"})]})]}),(0,We.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,We.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:a,disabled:h,children:"Cancelar"}),(0,We.jsx)("button",{type:"button",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",onClick:async()=>{try{m(!0),f("");if(d.filter((e=>!e.to_therapist_id)).length>0)return void f("Por favor, selecione um terapeuta para todas as atribui\xe7\xf5es.");const e=d.map((e=>({assignment_id:e.assignment_id,to_therapist_id:e.to_therapist_id})));await(async(e,t,a)=>{try{return(await $e.A.post("".concat(Xe,"/admin/users/").concat(e,"/transfer"),{transferList:t},Je(a))).data}catch(p){var s,n,r,i;throw new Error((null===(s=p.response)||void 0===s||null===(n=s.data)||void 0===n||null===(r=n.errors)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.msg)||"N\xe3o foi poss\xedvel transferir as atribui\xe7\xf5es.")}})(n.id,e,o),i()}catch(Ff){f("Erro ao transferir atribui\xe7\xf5es. Tente novamente."),console.error("Erro na transfer\xeancia:",Ff)}finally{m(!1)}},disabled:h||d.some((e=>!e.to_therapist_id)),children:h?"Transferindo...":"Transferir e Remover"})]})]})]})}):null},pm=e=>{let{users:t,onEditClick:a,onDeleteClick:s}=e;return(0,We.jsxs)("div",{className:"overflow-x-auto",children:[(0,We.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,We.jsx)("thead",{className:"bg-gradient-to-r from-gray-50 to-slate-50",children:(0,We.jsxs)("tr",{children:[(0,We.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Nome Completo"}),(0,We.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Username"}),(0,We.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Fun\xe7\xe3o"}),(0,We.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Data de Cria\xe7\xe3o"}),(0,We.jsx)("th",{scope:"col",className:"relative px-6 py-4 border-b border-gray-200",children:(0,We.jsx)("span",{className:"sr-only",children:"A\xe7\xf5es"})})]})}),(0,We.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:t.map(((e,t)=>{return(0,We.jsxs)("tr",{className:"hover:bg-gradient-to-r hover:from-gray-50 hover:to-slate-50 transition-all duration-200 ".concat(t%2===0?"bg-white":"bg-gray-50/30"),children:[(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)("div",{className:"flex-shrink-0 h-8 w-8",children:(0,We.jsx)("div",{className:"h-8 w-8 rounded-full flex items-center justify-center ".concat(e.is_admin?"bg-purple-100 text-purple-600":"pai"===e.role?"bg-amber-100 text-amber-600":"bg-blue-100 text-blue-600"),children:(0,We.jsx)(Vn,{icon:e.is_admin?no:"pai"===e.role?yr:ro,className:"text-sm"})})}),(0,We.jsx)("div",{className:"ml-3",children:(0,We.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.full_name})})]})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:e.username})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_admin?"bg-purple-100 text-purple-800":"pai"===e.role?"bg-amber-100 text-amber-800":"bg-blue-100 text-blue-800"),children:e.is_admin?"Admin":"pai"===e.role?"Pai/M\xe3e":"Terapeuta"})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(n=e.created_at,n?new Date(n).toLocaleDateString("pt-BR"):"-")}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:!e.is_admin&&(0,We.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,We.jsxs)("button",{onClick:()=>a(e),className:"text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 px-2 py-1 rounded-md transition-colors duration-200",children:[(0,We.jsx)(Vn,{icon:vr,className:"mr-1 h-3 w-3"})," Editar"]}),(0,We.jsxs)("button",{onClick:()=>s(e),className:"text-red-600 hover:text-red-900 hover:bg-red-50 px-2 py-1 rounded-md transition-colors duration-200",children:[(0,We.jsx)(Vn,{icon:$n,className:"mr-1 h-3 w-3"})," Apagar"]})]})})]},e.id);var n}))})]}),0===t.length&&(0,We.jsxs)("div",{className:"text-center py-12 bg-gradient-to-br from-gray-50 to-slate-50",children:[(0,We.jsx)(Vn,{icon:To,className:"text-3xl text-gray-400 mb-3"}),(0,We.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Nenhum utilizador encontrado"}),(0,We.jsx)("p",{className:"text-sm text-gray-500",children:"N\xe3o h\xe1 utilizadores que correspondam aos crit\xe9rios de busca."})]})]})},fm=e=>{let{patients:t,onManageClick:a,onEditClick:s,onDeleteClick:n}=e;return(0,We.jsxs)("div",{className:"overflow-x-auto",children:[(0,We.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,We.jsx)("thead",{className:"bg-gradient-to-r from-green-50 to-emerald-50",children:(0,We.jsxs)("tr",{children:[(0,We.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Paciente"}),(0,We.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Idade"}),(0,We.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Data de Nasc."}),(0,We.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Diagn\xf3stico"}),(0,We.jsx)("th",{scope:"col",className:"relative px-6 py-4 border-b border-gray-200",children:(0,We.jsx)("span",{className:"sr-only",children:"A\xe7\xf5es"})})]})}),(0,We.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:t.map(((e,t)=>{const r=(e=>{if(!e)return null;const t=new Date(e),a=new Date;let s=a.getFullYear()-t.getFullYear();const n=a.getMonth()-t.getMonth();return(n<0||0===n&&a.getDate()<t.getDate())&&s--,s})(e.dob);return(0,We.jsxs)("tr",{className:"hover:bg-gradient-to-r hover:from-green-50 hover:to-emerald-50 transition-all duration-200 ".concat(t%2===0?"bg-white":"bg-gray-50/30"),children:[(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)("div",{className:"flex-shrink-0 h-8 w-8",children:(0,We.jsx)("div",{className:"h-8 w-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:ro,className:"text-sm"})})}),(0,We.jsx)("div",{className:"ml-3",children:(0,We.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})})]})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:null!==r?(0,We.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[r," anos"]}):(0,We.jsx)("span",{className:"text-sm text-gray-500",children:"-"})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(i=e.dob,i?new Date(i).toLocaleDateString("pt-BR"):"-")}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.diagnosis?"bg-amber-100 text-amber-800":"bg-gray-100 text-gray-600"),children:e.diagnosis||"N\xe3o informado"})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,We.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,We.jsxs)("button",{onClick:()=>s(e),className:"text-green-600 hover:text-green-900 hover:bg-green-50 px-2 py-1 rounded-md transition-colors duration-200",children:[(0,We.jsx)(Vn,{icon:vr,className:"mr-1 h-3 w-3"})," Editar"]}),(0,We.jsxs)("button",{onClick:()=>a(e),className:"text-indigo-600 hover:text-indigo-900 hover:bg-indigo-50 px-2 py-1 rounded-md transition-colors duration-200",children:[(0,We.jsx)(Vn,{icon:yo,className:"mr-1 h-3 w-3"})," Gerir Terapeutas"]}),(0,We.jsxs)("button",{onClick:()=>n(e),className:"text-red-600 hover:text-red-900 hover:bg-red-50 px-2 py-1 rounded-md transition-colors duration-200",children:[(0,We.jsx)(Vn,{icon:$n,className:"mr-1 h-3 w-3"})," Apagar"]})]})})]},e.id);var i}))})]}),0===t.length&&(0,We.jsxs)("div",{className:"text-center py-12 bg-gradient-to-br from-green-50 to-emerald-50",children:[(0,We.jsx)(Vn,{icon:ro,className:"text-3xl text-green-400 mb-3"}),(0,We.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Nenhum paciente encontrado"}),(0,We.jsx)("p",{className:"text-sm text-gray-500",children:"N\xe3o h\xe1 pacientes nesta cl\xednica que correspondam aos crit\xe9rios de busca."})]})]})},gm=e=>{let{assignments:t,onArchiveClick:a,onDeleteClick:s,onRestoreClick:n,onPauseClick:r,onResumeClick:i}=e;const o=e=>{switch(e){case"active":return(0,We.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Ativo"});case"archived":return(0,We.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Arquivado"});case"paused":return(0,We.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pausado"});default:return(0,We.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:"Desconhecido"})}},l=e=>{const t=[];switch(e.status){case"active":t.push((0,We.jsxs)("button",{onClick:()=>a(e),className:"text-amber-600 hover:text-amber-900 hover:bg-amber-50 px-2 py-1 rounded-md text-xs transition-colors duration-200",title:"Arquivar programa",children:[(0,We.jsx)(Vn,{icon:lr,className:"mr-1"})," Arquivar"]},"archive"),(0,We.jsxs)("button",{onClick:()=>r(e),className:"text-blue-600 hover:text-blue-900 hover:bg-blue-50 px-2 py-1 rounded-md text-xs transition-colors duration-200",title:"Pausar programa",children:[(0,We.jsx)(Vn,{icon:Vr,className:"mr-1"})," Pausar"]},"pause"));break;case"archived":t.push((0,We.jsxs)("button",{onClick:()=>n(e),className:"text-green-600 hover:text-green-900 hover:bg-green-50 px-2 py-1 rounded-md text-xs transition-colors duration-200",title:"Restaurar programa",children:[(0,We.jsx)(Vn,{icon:ki,className:"mr-1"})," Restaurar"]},"restore"),(0,We.jsxs)("button",{onClick:()=>s(e),className:"text-red-600 hover:text-red-900 hover:bg-red-50 px-2 py-1 rounded-md text-xs transition-colors duration-200",title:"Deletar permanentemente",children:[(0,We.jsx)(Vn,{icon:$n,className:"mr-1"})," Deletar"]},"delete"));break;case"paused":t.push((0,We.jsxs)("button",{onClick:()=>i(e),className:"text-green-600 hover:text-green-900 hover:bg-green-50 px-2 py-1 rounded-md text-xs transition-colors duration-200",title:"Retomar programa",children:[(0,We.jsx)(Vn,{icon:Xi,className:"mr-1"})," Retomar"]},"resume"),(0,We.jsxs)("button",{onClick:()=>a(e),className:"text-amber-600 hover:text-amber-900 hover:bg-amber-50 px-2 py-1 rounded-md text-xs transition-colors duration-200",title:"Arquivar programa",children:[(0,We.jsx)(Vn,{icon:lr,className:"mr-1"})," Arquivar"]},"archive2"))}return(0,We.jsx)("div",{className:"flex flex-col space-y-1",children:t})};return(0,We.jsxs)("div",{className:"overflow-x-auto",children:[(0,We.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,We.jsx)("thead",{className:"bg-gradient-to-r from-indigo-50 to-purple-50",children:(0,We.jsxs)("tr",{children:[(0,We.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Paciente"}),(0,We.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Programa"}),(0,We.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Terapeuta"}),(0,We.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Status"}),(0,We.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"Sess\xf5es"}),(0,We.jsx)("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider border-b border-gray-200",children:"\xdaltima Sess\xe3o"}),(0,We.jsx)("th",{scope:"col",className:"relative px-6 py-4 border-b border-gray-200",children:(0,We.jsx)("span",{className:"sr-only",children:"A\xe7\xf5es"})})]})}),(0,We.jsx)("tbody",{className:"bg-white divide-y divide-gray-100",children:t.map(((e,t)=>{return(0,We.jsxs)("tr",{className:"hover:bg-gradient-to-r hover:from-indigo-50 hover:to-purple-50 transition-all duration-200 ".concat(t%2===0?"bg-white":"bg-gray-50/30"),children:[(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)("div",{className:"flex-shrink-0 h-8 w-8",children:(0,We.jsx)("div",{className:"h-8 w-8 rounded-full bg-indigo-100 text-indigo-600 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:ro,className:"text-sm"})})}),(0,We.jsx)("div",{className:"ml-3",children:(0,We.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.patient_name})})]})}),(0,We.jsx)("td",{className:"px-6 py-4",children:(0,We.jsxs)("div",{className:"text-sm text-gray-900",children:[(0,We.jsx)("div",{className:"max-w-xs truncate font-medium",title:e.program_name,children:e.program_name}),e.has_custom_trials&&(0,We.jsxs)("div",{className:"text-xs text-blue-600 mt-1",children:[(0,We.jsx)(Vn,{icon:yo,className:"mr-1"}),"Tentativas customizadas"]})]})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.therapist_name}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:o(e.status)}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"font-medium",children:e.total_sessions}),e.total_sessions>0&&e.average_score>0&&(0,We.jsxs)("div",{className:"text-xs text-green-600",children:[e.average_score.toFixed(1),"% m\xe9dia"]})]})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(a=e.last_session_date,a?new Date(a).toLocaleDateString("pt-BR"):"-")}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:l(e)})]},e.assignment_id);var a}))})]}),0===t.length&&(0,We.jsxs)("div",{className:"text-center py-12 bg-gradient-to-br from-indigo-50 to-purple-50",children:[(0,We.jsx)(Vn,{icon:yo,className:"text-3xl text-indigo-400 mb-3"}),(0,We.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-1",children:"Nenhuma atribui\xe7\xe3o encontrada"}),(0,We.jsx)("p",{className:"text-sm text-gray-500",children:"N\xe3o h\xe1 programas atribu\xeddos que correspondam aos crit\xe9rios de busca."})]})]})},xm=()=>{const{token:e}=Ye(),[t,a]=(0,s.useState)([]),[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)([]),[l,c]=(0,s.useState)("users"),[d,u]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[p,f]=(0,s.useState)(""),[g,x]=(0,s.useState)("all"),[b,v]=(0,s.useState)(!0),[y,j]=(0,s.useState)(""),[N,w]=(0,s.useState)(!1),[_,S]=(0,s.useState)(!1),[C,k]=(0,s.useState)(!1),[A,P]=(0,s.useState)(!1),[E,L]=(0,s.useState)(null),[D,O]=(0,s.useState)(null),[T,M]=(0,s.useState)(null),[R,I]=(0,s.useState)(null),F=(0,s.useCallback)((async()=>{if(e){v(!0),j("");try{const[t,s,n]=await Promise.all([Ke(e),Ze(e),tt(e)]);a(t),r(s),o(n)}catch(Ff){j(Ff.message||"Ocorreu um erro ao carregar os dados.")}finally{v(!1)}}}),[e]);(0,s.useEffect)((()=>{F()}),[F]);const z=(0,s.useMemo)((()=>t.filter((e=>e.full_name.toLowerCase().includes(d.toLowerCase())||e.username.toLowerCase().includes(d.toLowerCase())))),[t,d]),B=(0,s.useMemo)((()=>n.filter((e=>e.name.toLowerCase().includes(h.toLowerCase())))),[n,h]),q=(0,s.useMemo)((()=>i.filter((e=>{const t=e.patient_name.toLowerCase().includes(p.toLowerCase())||e.program_name.toLowerCase().includes(p.toLowerCase())||e.therapist_name.toLowerCase().includes(p.toLowerCase()),a="all"===g||e.status===g;return t&&a}))),[i,p,g]),U=(0,s.useCallback)((async t=>{try{R?await(async(e,t,a)=>{try{return(await $e.A.put("".concat(Xe,"/admin/users/").concat(e),t,Je(a))).data}catch(y){var s,n,r,i;throw new Error((null===(s=y.response)||void 0===s||null===(n=s.data)||void 0===n||null===(r=n.errors)||void 0===r||null===(i=r[0])||void 0===i?void 0:i.msg)||"N\xe3o foi poss\xedvel atualizar o utilizador.")}})(R.id,t,e):await(async(e,t)=>{try{return(await $e.A.post("".concat(Xe,"/admin/users"),e,Je(t))).data}catch(y){var a,s,n,r;throw new Error((null===(a=y.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"N\xe3o foi poss\xedvel criar o utilizador.")}})(t,e),await F()}catch(Ff){throw Ff}}),[e,F,R]),H=((0,s.useCallback)((async t=>{try{await et(t,e),await F()}catch(Ff){throw Ff}}),[e,F]),(0,s.useCallback)((e=>{M(e),S(!0)}),[])),W=(0,s.useCallback)((async t=>{if("pai"!==t.role){if("terapeuta"===t.role)try{await Qe(t.id,e),await F()}catch(Ff){Ff.requiresTransfer?(L(t),P(!0)):alert("Erro ao apagar utilizador: ".concat(Ff.message))}}else if(window.confirm('Tem a certeza que deseja apagar o utilizador "'.concat(t.full_name,'"? Esta a\xe7\xe3o n\xe3o pode ser desfeita.')))try{await Qe(t.id,e),await F()}catch(Ff){alert("Erro ao apagar utilizador: ".concat(Ff.message))}}),[e,F]),V=(0,s.useCallback)((async()=>{try{await Qe(E.id,e),await F(),P(!1),L(null),alert("Terapeuta removido com sucesso ap\xf3s transfer\xeancia das atribui\xe7\xf5es!")}catch(Ff){alert("Erro ao remover terapeuta ap\xf3s transfer\xeancia: ".concat(Ff.message))}}),[E,e,F]),G=(0,s.useCallback)((async t=>{if(window.confirm('Tem a certeza que deseja apagar o paciente "'.concat(t.name,'"? Esta a\xe7\xe3o n\xe3o pode ser desfeita e ir\xe1 remover todos os dados associados.')))try{await(async(e,t)=>{try{return(await $e.A.delete("".concat(Xe,"/admin/patients/").concat(e),Je(t))).data}catch(y){var a,s,n,r;throw new Error((null===(a=y.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"N\xe3o foi poss\xedvel apagar o paciente.")}})(t.id,e),await F()}catch(Ff){alert("Erro ao apagar paciente: ".concat(Ff.message))}}),[e,F]),Y=(0,s.useCallback)((async e=>{if(window.confirm('Arquivar programa "'.concat(e.program_name,'" do paciente "').concat(e.patient_name,'"?')))try{await(0,st.xT)(e.assignment_id,"archived"),await F()}catch(Ff){alert("Erro ao arquivar: ".concat(Ff.message))}}),[F]),$=(0,s.useCallback)((async t=>{if(window.confirm('DELETAR PERMANENTEMENTE programa "'.concat(t.program_name,'" do paciente "').concat(t.patient_name,'"? Esta a\xe7\xe3o N\xc3O pode ser desfeita!')))try{await ot(t.assignment_id,e),await F()}catch(Ff){alert("Erro ao deletar: ".concat(Ff.message))}}),[e,F]),X=(0,s.useCallback)((async e=>{if(window.confirm('Restaurar programa "'.concat(e.program_name,'" do paciente "').concat(e.patient_name,'"?')))try{await(0,st.xT)(e.assignment_id,"active"),await F()}catch(Ff){alert("Erro ao restaurar: ".concat(Ff.message))}}),[F]),J=(0,s.useCallback)((async e=>{if(window.confirm('Pausar programa "'.concat(e.program_name,'" do paciente "').concat(e.patient_name,'"?')))try{await(0,st.xT)(e.assignment_id,"paused"),await F()}catch(Ff){alert("Erro ao pausar: ".concat(Ff.message))}}),[F]),K=(0,s.useCallback)((async e=>{if(window.confirm('Retomar programa "'.concat(e.program_name,'" do paciente "').concat(e.patient_name,'"?')))try{await(0,st.xT)(e.assignment_id,"active"),await F()}catch(Ff){alert("Erro ao retomar: ".concat(Ff.message))}}),[F]),Q=(0,s.useMemo)((()=>t.filter((e=>"terapeuta"===e.role&&!e.is_admin))),[t]),Z=e=>{let{tabName:t,activeTab:a,setTab:s,icon:n,children:r}=e;return(0,We.jsxs)("button",{onClick:()=>s(t),className:"flex items-center px-4 py-2 text-sm font-medium rounded-md transition-colors ".concat(a===t?"bg-indigo-100 text-indigo-700":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[(0,We.jsx)(Vn,{icon:n,className:"mr-2"}),r]})};return(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("div",{className:"fade-in",children:[(()=>{const e="users"===l,t=e||"patients"===l;return(0,We.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[(0,We.jsxs)("h1",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[(0,We.jsx)(Vn,{icon:no,className:"mr-3 text-indigo-500"}),"Painel de Administra\xe7\xe3o"]}),t&&(0,We.jsxs)("button",{onClick:()=>e?(I(null),void w(!0)):S(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-lg text-sm transition-colors shadow hover:shadow-md flex items-center",children:[(0,We.jsx)(Vn,{icon:Lo,className:"mr-2"}),e?"Adicionar Utilizador":"Adicionar Paciente"]})]})})(),(0,We.jsx)("div",{className:"mb-4 border-b border-gray-200",children:(0,We.jsxs)("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[(0,We.jsx)(Z,{tabName:"users",activeTab:l,setTab:c,icon:yr,children:"Utilizadores"}),(0,We.jsx)(Z,{tabName:"patients",activeTab:l,setTab:c,icon:ro,children:"Pacientes"}),(0,We.jsx)(Z,{tabName:"assignments",activeTab:l,setTab:c,icon:yo,children:"Programas Atribu\xeddos"})]})}),(0,We.jsx)("div",{className:"mb-4",children:"users"===l?(0,We.jsxs)("div",{className:"relative",children:[(0,We.jsx)(Vn,{icon:Ki,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,We.jsx)("input",{type:"text",placeholder:"Buscar por nome ou username...",value:d,onChange:e=>u(e.target.value),className:"w-full sm:w-72 pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}):"patients"===l?(0,We.jsxs)("div",{className:"relative",children:[(0,We.jsx)(Vn,{icon:Ki,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,We.jsx)("input",{type:"text",placeholder:"Buscar por nome de paciente...",value:h,onChange:e=>m(e.target.value),className:"w-full sm:w-72 pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}):"assignments"===l?(0,We.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,We.jsxs)("div",{className:"relative flex-1",children:[(0,We.jsx)(Vn,{icon:Ki,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,We.jsx)("input",{type:"text",placeholder:"Buscar paciente, programa ou terapeuta...",value:p,onChange:e=>f(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),(0,We.jsxs)("select",{value:g,onChange:e=>x(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[(0,We.jsx)("option",{value:"all",children:"Todos os Status"}),(0,We.jsx)("option",{value:"active",children:"Ativos"}),(0,We.jsx)("option",{value:"archived",children:"Arquivados"}),(0,We.jsx)("option",{value:"paused",children:"Pausados"})]})]}):null}),b?(0,We.jsxs)("div",{className:"flex justify-center items-center h-64",children:[" ",(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-4xl text-indigo-500"})," "]}):y?(0,We.jsxs)("div",{className:"bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md",children:[" ",(0,We.jsx)("p",{className:"font-bold",children:"Erro"})," ",(0,We.jsx)("p",{children:y})," "]}):(0,We.jsxs)("div",{className:"bg-white shadow-md rounded-lg overflow-hidden border border-gray-200",children:["users"===l&&(0,We.jsx)(pm,{users:z,onEditClick:e=>{I(e),w(!0)},onDeleteClick:W}),"patients"===l&&(0,We.jsx)(fm,{patients:B,onManageClick:e=>{O(e),k(!0)},onEditClick:H,onDeleteClick:G}),"assignments"===l&&(0,We.jsx)(gm,{assignments:q,onArchiveClick:Y,onDeleteClick:$,onRestoreClick:X,onPauseClick:J,onResumeClick:K})]})]}),(0,We.jsx)(dm,{isOpen:N,onClose:()=>w(!1),onSave:U,userToEdit:R,patients:n}),(0,We.jsx)(rd,{isOpen:_,onClose:()=>{S(!1),M(null)},patient:T}),(0,We.jsx)(um,{isOpen:C,onClose:()=>k(!1),patient:D,allTherapists:Q}),(0,We.jsx)(mm,{isOpen:A,onClose:()=>{P(!1),L(null)},therapistToDelete:E,availableTherapists:Q,onTransferComplete:V})]})},bm=()=>{const{assignmentId:e}=function(){let{matches:e}=s.useContext($),t=e[e.length-1];return t?t.params:{}}(),[t,a]=(0,s.useState)(null),[n,r]=(0,s.useState)(!0),[i,o]=(0,s.useState)("");if((0,s.useEffect)((()=>{if(!e)return o("ID da designa\xe7\xe3o n\xe3o fornecido."),void r(!1);(async()=>{try{r(!0),o("");const t=await(0,st.Ow)(e);if(!t)throw new Error("Designa\xe7\xe3o de programa n\xe3o encontrada.");a(t)}catch(Ff){var t,s;console.error("Erro ao carregar dados da sess\xe3o:",Ff),o((null===(t=Ff.response)||void 0===t||null===(s=t.data)||void 0===s?void 0:s.message)||Ff.message||"Ocorreu um erro ao carregar a sess\xe3o.")}finally{r(!1)}})()}),[e]),n)return(0,We.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-8",children:(0,We.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-12 text-center max-w-md w-full border border-gray-100",children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 p-6 rounded-2xl w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-3xl text-indigo-600"})}),(0,We.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"Carregando Sess\xe3o"}),(0,We.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"Preparando os dados da sess\xe3o terap\xeautica..."}),(0,We.jsxs)("div",{className:"mt-6 flex items-center justify-center space-x-2",children:[(0,We.jsx)("div",{className:"w-2 h-2 bg-indigo-500 rounded-full animate-pulse"}),(0,We.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"0.2s"}}),(0,We.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0.4s"}})]})]})});if(i)return(0,We.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-pink-50 to-rose-50 flex items-center justify-center p-8",children:(0,We.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-12 text-center max-w-lg w-full border border-red-100",children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-red-100 to-pink-100 p-6 rounded-2xl w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:To,className:"text-3xl text-red-600"})}),(0,We.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:i.includes("arquivado")?"Programa Arquivado":"Erro ao Carregar Sess\xe3o"}),(0,We.jsx)("p",{className:"text-gray-600 mb-8 leading-relaxed",children:i}),i.includes("arquivado")&&(0,We.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:(0,We.jsx)("p",{className:"text-green-700 text-sm",children:"\ud83c\udf89 Este programa foi marcado como dominado com sucesso! Volte \xe0 lista de programas para selecionar outro."})}),(0,We.jsxs)(De,{to:"/clients",className:"inline-flex items-center space-x-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-xl font-medium hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,We.jsx)(Vn,{icon:xi}),(0,We.jsx)("span",{children:"Voltar aos Clientes"})]})]})});if(!t)return(0,We.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-slate-50 to-gray-100 flex items-center justify-center p-8",children:(0,We.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-12 text-center max-w-md w-full border border-gray-100",children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-gray-100 to-slate-100 p-6 rounded-2xl w-20 h-20 mx-auto mb-6 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:ir,className:"text-3xl text-gray-600"})}),(0,We.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"Dados Indispon\xedveis"}),(0,We.jsx)("p",{className:"text-gray-600 leading-relaxed",children:"N\xe3o foi poss\xedvel carregar os dados da sess\xe3o."})]})});const{program:l,patient:c,assignment_id:d}=t;return(0,We.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:[(0,We.jsx)("div",{className:"bg-white shadow-xl border-b border-gray-100",children:(0,We.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,We.jsxs)(De,{to:"/clients/".concat(null===c||void 0===c?void 0:c.id),className:"inline-flex items-center space-x-2 text-indigo-600 hover:text-indigo-700 bg-indigo-50 hover:bg-indigo-100 px-4 py-2 rounded-xl font-medium transition-all duration-200",children:[(0,We.jsx)(Vn,{icon:xi}),(0,We.jsx)("span",{children:"Voltar ao Paciente"})]}),(0,We.jsx)("div",{className:"h-8 w-px bg-gray-300"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-1",children:(null===l||void 0===l?void 0:l.name)||"Carregando programa..."}),(0,We.jsxs)("div",{className:"flex items-center space-x-3 text-gray-600",children:[(0,We.jsx)(Vn,{icon:Ni,className:"text-indigo-500"}),(0,We.jsx)("span",{className:"font-medium",children:"Sess\xe3o de Terapia para:"}),(0,We.jsx)("span",{className:"font-bold text-gray-800",children:null===c||void 0===c?void 0:c.name})]})]})]}),(0,We.jsx)("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 px-6 py-3 rounded-2xl border border-green-200",children:(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),(0,We.jsx)("span",{className:"text-green-800 font-semibold text-sm",children:"Sess\xe3o Ativa"})]})})]})})}),(0,We.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-12",children:(0,We.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden",children:l&&t?(0,We.jsx)(Lh,{program:l,assignment:t}):(0,We.jsxs)("div",{className:"p-16 text-center",children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-indigo-100 to-purple-100 p-8 rounded-2xl w-24 h-24 mx-auto mb-8 flex items-center justify-center",children:(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-4xl text-indigo-600"})}),(0,We.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Preparando Sess\xe3o"}),(0,We.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed max-w-md mx-auto",children:"A carregar detalhes do registo de progresso..."}),(0,We.jsxs)("div",{className:"mt-8 flex items-center justify-center space-x-3",children:[(0,We.jsx)("div",{className:"w-3 h-3 bg-indigo-500 rounded-full animate-pulse"}),(0,We.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full animate-pulse",style:{animationDelay:"0.3s"}}),(0,We.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full animate-pulse",style:{animationDelay:"0.6s"}})]})]})})})]})},vm=e=>{let{contact:t,onClick:a,isLoading:s}=e;const n=(e=>{if(!e)return{badge:"\ud83d\udc68\u200d\u2695\ufe0f Terapeuta",color:"#3498db",avatar:"TR"};const t=e.toLowerCase(),a={fono:{badge:"\ud83d\udde3\ufe0f Fono",color:"#3498db",avatar:"FO"},fonoaudiologia:{badge:"\ud83d\udde3\ufe0f Fono",color:"#3498db",avatar:"FO"},psico:{badge:"\ud83e\udde0 Psico",color:"#e74c3c",avatar:"PS"},psicologia:{badge:"\ud83e\udde0 Psico",color:"#e74c3c",avatar:"PS"},music:{badge:"\ud83c\udfb5 Music",color:"#9b59b6",avatar:"MU"},musicoterapia:{badge:"\ud83c\udfb5 Music",color:"#9b59b6",avatar:"MU"},to:{badge:"\ud83c\udfe5 TO",color:"#f39c12",avatar:"TO"},terapiaocupacional:{badge:"\ud83c\udfe5 TO",color:"#f39c12",avatar:"TO"},fisio:{badge:"\ud83e\udd38 Fisio",color:"#27ae60",avatar:"FI"},fisioterapia:{badge:"\ud83e\udd38 Fisio",color:"#27ae60",avatar:"FI"},psicomotricidade:{badge:"\ud83e\udd38 Psico",color:"#27ae60",avatar:"PM"},psicopedagogia:{badge:"\ud83d\udcda Psicoped",color:"#e67e22",avatar:"PP"}};for(const[s,n]of Object.entries(a))if(t.includes(s))return n;return{badge:"\ud83d\udc68\u200d\u2695\ufe0f Terapeuta",color:"#3498db",avatar:e.split(" ").map((e=>e[0])).join("").substring(0,2).toUpperCase()}})(t.full_name);return(0,We.jsx)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer border-l-4 ".concat(s?"opacity-50":"hover:transform hover:scale-105"),style:{borderLeftColor:n.color},onClick:()=>!s&&a(t),children:(0,We.jsx)("div",{className:"p-4",children:(0,We.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,We.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-sm shadow-md",style:{backgroundColor:n.color},children:n.avatar}),(0,We.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:t.full_name}),(0,We.jsx)("span",{className:"inline-block px-2 py-1 text-xs font-medium text-white rounded-full",style:{backgroundColor:n.color},children:n.badge}),t.total_patients&&(0,We.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[t.total_patients," paciente",1!==t.total_patients?"s":""]})]}),(0,We.jsx)("div",{className:"text-gray-400",children:s?(0,We.jsx)(Vn,{icon:xo,spin:!0}):(0,We.jsx)(Vn,{icon:rr})})]})})})},ym=e=>{let{patientId:t,patientName:a,type:n="therapists",onContactSelect:r,className:i=""}=e;const[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)(null);(0,s.useEffect)((()=>{f()}),[t,n]);const f=async()=>{try{let e;d(!0),h(null),"therapists"===n?(e=await Lc(t),l(e.therapists||[])):"colleagues"===n&&(e=await Dc(t),l(e.colleagues||[]))}catch(Ff){var e,a,s,r;console.error("Erro ao buscar contatos:",Ff),h((null===(e=Ff.response)||void 0===e||null===(a=e.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(r=s[0])||void 0===r?void 0:r.msg)||"Erro ao carregar contatos"),l([])}finally{d(!1)}},g=async e=>{p(e.id);try{r&&await r(e)}catch(u){console.error("Erro ao selecionar contato:",u)}finally{p(null)}};return c?(0,We.jsx)("div",{className:"flex items-center justify-center p-8 ".concat(i),children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)(Vn,{icon:xo,spin:!0,className:"text-3xl text-blue-500 mb-2"}),(0,We.jsx)("p",{className:"text-gray-500",children:"Carregando contatos..."})]})}):u?(0,We.jsx)("div",{className:"flex items-center justify-center p-8 ".concat(i),children:(0,We.jsxs)("div",{className:"text-center text-red-500",children:[(0,We.jsx)(Vn,{icon:To,className:"text-3xl mb-2"}),(0,We.jsx)("p",{children:u}),(0,We.jsx)("button",{onClick:f,className:"mt-2 px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 transition-colors",children:"Tentar novamente"})]})}):0===o.length?(0,We.jsx)("div",{className:"flex items-center justify-center p-8 ".concat(i),children:(0,We.jsxs)("div",{className:"text-center text-gray-500",children:[(0,We.jsx)(Vn,{icon:"colleagues"===n?yr:rr,className:"text-3xl mb-2"}),(0,We.jsx)("p",{className:"text-lg font-medium mb-2",children:"colleagues"===n?"Nenhum colega encontrado":"Equipe individual"}),(0,We.jsx)("p",{className:"text-sm",children:"colleagues"===n?"Este paciente n\xe3o tem outros terapeutas atribu\xeddos para discuss\xe3o.":"Este paciente \xe9 atendido por apenas um profissional. As mensagens no chat geral chegam diretamente ao terapeuta respons\xe1vel."}),"therapists"===n&&(0,We.jsx)("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:(0,We.jsxs)("p",{className:"text-sm text-blue-700",children:["\ud83d\udca1 ",(0,We.jsx)("strong",{children:"Dica:"})," Continue usando o chat geral abaixo para se comunicar com o terapeuta."]})})]})}):(0,We.jsxs)("div",{className:i,children:[(0,We.jsxs)("div",{className:"mb-4",children:[(0,We.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"colleagues"===n?"Colegas Terapeutas":"Meus Terapeutas"}),(0,We.jsxs)("p",{className:"text-gray-600",children:["Paciente: ",(0,We.jsx)("span",{className:"font-medium",children:a})]}),(0,We.jsxs)("p",{className:"text-sm text-gray-500",children:[o.length," ","colleagues"===n?"colega":"terapeuta",1!==o.length?"s":"","colleagues"===n?" para discuss\xe3o":" na equipe"]}),1===o.length&&"therapists"===n&&(0,We.jsx)("div",{className:"mt-2 p-2 bg-yellow-50 border border-yellow-200 rounded",children:(0,We.jsx)("p",{className:"text-xs text-yellow-700",children:"\u2139\ufe0f Como h\xe1 apenas um terapeuta, as mensagens no chat geral chegam diretamente a ele."})})]}),(0,We.jsx)("div",{className:"space-y-3",children:o.map((e=>(0,We.jsx)(vm,{contact:e,onClick:g,isLoading:m===e.id},e.id)))})]})},jm=()=>{const e=Z(),{selectedPatient:t}=dt(),[a,n]=(0,s.useState)(!1);if(!t)return(0,We.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Nenhum paciente selecionado"}),(0,We.jsx)("p",{className:"text-gray-600 mb-4",children:"Selecione um paciente para ver os colegas da equipe."}),(0,We.jsx)("button",{onClick:()=>e("/clients"),className:"px-6 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:"Voltar aos Clientes"})]})});return(0,We.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,We.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,We.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,We.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,We.jsx)("button",{onClick:()=>e("/clients"),className:"text-gray-600 hover:text-gray-800 transition-colors",children:(0,We.jsx)(Vn,{icon:xi,className:"w-5 h-5"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Discuss\xe3o de Casos"}),(0,We.jsxs)("p",{className:"text-gray-600",children:["Converse com colegas sobre ",t.name]})]})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-2 text-indigo-600",children:[(0,We.jsx)(Vn,{icon:yr}),(0,We.jsx)("span",{className:"font-medium",children:"Equipe Multidisciplinar"})]})]})})}),(0,We.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,We.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,We.jsx)(ym,{patientId:t.id,patientName:t.name,type:"colleagues",onContactSelect:async a=>{try{n(!0),console.log("Iniciando discuss\xe3o com colega:",a),e("/case-discussion?patient=".concat(t.id,"&colleague=").concat(a.id,"&colleagueName=").concat(encodeURIComponent(a.full_name)))}catch(s){console.error("Erro ao iniciar discuss\xe3o:",s),alert("Erro ao iniciar discuss\xe3o. Tente novamente.")}finally{n(!1)}},className:"w-full"})}),(0,We.jsx)("div",{className:"mt-6 bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:(0,We.jsxs)("div",{className:"flex",children:[(0,We.jsx)("div",{className:"flex-shrink-0",children:(0,We.jsx)(Vn,{icon:rr,className:"text-indigo-400 w-5 h-5"})}),(0,We.jsxs)("div",{className:"ml-3",children:[(0,We.jsx)("h3",{className:"text-sm font-medium text-indigo-800",children:"Discuss\xe3o de Casos"}),(0,We.jsx)("div",{className:"mt-2 text-sm text-indigo-700",children:(0,We.jsxs)("ul",{className:"list-disc list-inside space-y-1",children:[(0,We.jsx)("li",{children:"Clique em qualquer colega para iniciar uma discuss\xe3o sobre o caso"}),(0,We.jsx)("li",{children:"Compartilhe observa\xe7\xf5es, estrat\xe9gias e progressos do paciente"}),(0,We.jsx)("li",{children:"Colabore de forma integrada para otimizar o tratamento"}),(0,We.jsx)("li",{children:"Todas as discuss\xf5es ficam registradas para consulta futura"})]})})]})]})}),(0,We.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,We.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-center",children:[(0,We.jsx)("div",{className:"text-green-500 mb-2",children:(0,We.jsx)(Vn,{icon:yr,className:"w-6 h-6"})}),(0,We.jsx)("h4",{className:"font-semibold text-green-800",children:"Colabora\xe7\xe3o"}),(0,We.jsx)("p",{className:"text-sm text-green-700 mt-1",children:"Trabalho em equipe integrado"})]}),(0,We.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-center",children:[(0,We.jsx)("div",{className:"text-blue-500 mb-2",children:(0,We.jsx)(Vn,{icon:rr,className:"w-6 h-6"})}),(0,We.jsx)("h4",{className:"font-semibold text-blue-800",children:"Comunica\xe7\xe3o"}),(0,We.jsx)("p",{className:"text-sm text-blue-700 mt-1",children:"Troca de experi\xeancias"})]}),(0,We.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-center",children:[(0,We.jsx)("div",{className:"text-purple-500 mb-2",children:(0,We.jsx)(Vn,{icon:rr,className:"w-6 h-6"})}),(0,We.jsx)("h4",{className:"font-semibold text-purple-800",children:"Resultados"}),(0,We.jsx)("p",{className:"text-sm text-purple-700 mt-1",children:"Melhores outcomes"})]})]})]}),a&&(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg p-6 text-center",children:[(0,We.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-500 mx-auto mb-4"}),(0,We.jsx)("p",{className:"text-gray-700",children:"Iniciando discuss\xe3o..."})]})})]})},Nm=qe.H||"http://localhost:3000",wm=$e.A.create({baseURL:"".concat(Nm,"/super-admin"),headers:{"Content-Type":"application/json"}});wm.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),wm.interceptors.response.use((e=>e),(e=>{var t;return console.error("Erro na API Super Admin:",e),401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)}));const _m=async()=>{try{return(await wm.get("/metrics")).data}catch(e){throw e}},Sm=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;try{return(await wm.get("/growth-stats?months=".concat(e))).data}catch(t){throw t}},Cm=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;e.status&&t.append("status",e.status),e.search&&t.append("search",e.search);return(await wm.get("/clinics?".concat(t.toString()))).data}catch(t){throw t}},km=async e=>{try{return(await wm.post("/clinics",e)).data}catch(t){throw t}},Am=async(e,t)=>{try{return(await wm.put("/clinics/".concat(e,"/suspend"),{reason:t})).data}catch(a){throw a}},Pm=async e=>{try{return(await wm.put("/clinics/".concat(e,"/reactivate"))).data}catch(t){throw t}},Em=async(e,t)=>{try{return(await wm.put("/clinics/".concat(e,"/patient-limit"),{maxPatients:t})).data}catch(a){throw a}},Lm=async e=>{try{return(await wm.put("/clinics/".concat(e,"/reset-admin-password"))).data}catch(t){throw console.error("Erro ao resetar senha:",t),t}},Dm=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;e.status&&t.append("status",e.status),e.clinic_id&&t.append("clinic_id",e.clinic_id),e.overdue_only&&t.append("overdue_only","true"),e.due_soon&&t.append("due_soon","true");return(await wm.get("/billing?".concat(t.toString()))).data}catch(t){throw t}},Om=async e=>{try{return(await wm.post("/billing",e)).data}catch(t){throw t}},Tm=async(e,t)=>{try{return(await wm.put("/billing/".concat(e,"/payment"),t)).data}catch(a){throw a}},Mm=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;try{return(await wm.get("/billing/revenue-evolution?months=".concat(e))).data}catch(t){throw t}},Rm=async e=>{try{return(await wm.delete("/clinics/".concat(e))).data}catch(t){throw t}},Im=async(e,t)=>{try{return(await wm.put("/billing/".concat(e,"/due-date"),t)).data}catch(a){throw a}},Fm=$e.A.create({baseURL:"".concat(Nm,"/programs"),headers:{"Content-Type":"application/json"}});Fm.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),Fm.interceptors.response.use((e=>e),(e=>{var t;return console.error("Erro na API Programas Globais:",e),401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)}));const zm=async()=>{try{return(await Fm.get("/hierarchy")).data}catch(e){throw e}},Bm=async e=>{try{return(await Fm.post("/global",e)).data}catch(t){throw t}},qm=async()=>{try{return(await Fm.get("/global")).data}catch(e){throw e}},Um=async e=>{try{return(await Fm.delete("/global/".concat(e))).data}catch(t){throw t}},Hm=async e=>{try{return(await Fm.get("/".concat(e,"/usage"))).data}catch(t){throw t}},Wm=qe.H||"http://localhost:3000/api",Vm=$e.A.create({baseURL:"".concat(Wm,"/super-admin/enterprise"),timeout:3e4,headers:{"Content-Type":"application/json"}});Vm.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),Vm.interceptors.response.use((e=>e),(e=>{var t;return console.error("Erro na API Enterprise:",e),401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(localStorage.removeItem("token"),window.location.href="/login"),Promise.reject(e)}));const Gm=async()=>{try{return(await Vm.get("/dashboard")).data}catch(e){throw console.error("Erro ao buscar dashboard executivo:",e),e}},Ym=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;e.segment&&t.append("segment",e.segment),e.risk_level&&t.append("risk_level",e.risk_level),e.sort_by&&t.append("sort_by",e.sort_by),e.order&&t.append("order",e.order);return(await Vm.get("/customer-health?".concat(t.toString()))).data}catch(t){throw console.error("Erro ao buscar customer health:",t),t}},$m=async()=>{try{return(await Vm.get("/cohort-analysis")).data}catch(e){throw console.error("Erro ao buscar an\xe1lise de coortes:",e),e}},Xm=async()=>{try{return(await Vm.get("/churn-prediction")).data}catch(e){throw console.error("Erro ao buscar predi\xe7\xe3o de churn:",e),e}},Jm=async()=>{try{return(await Vm.get("/expansion-opportunities")).data}catch(e){throw console.error("Erro ao buscar oportunidades de expans\xe3o:",e),e}},Km=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const t=e?"?month=".concat(e):"";return(await Vm.get("/executive-report".concat(t))).data}catch(t){throw console.error("Erro ao buscar relat\xf3rio executivo:",t),t}},Qm=e=>{let{isOpen:t,onClose:a,onSubmit:n}=e;const[r,i]=(0,s.useState)({clinic_name:"",max_patients:50,admin_name:"",admin_username:""}),[o,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)({}),u=e=>{const{name:t,value:a}=e.target;i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:"max_patients"===t?parseInt(a)||0:a}))),c[t]&&d((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:""})))},h=async e=>{e.preventDefault();const t=(()=>{const e={};return r.clinic_name.trim()||(e.clinic_name="Nome da cl\xednica \xe9 obrigat\xf3rio"),r.admin_name.trim()||(e.admin_name="Nome do administrador \xe9 obrigat\xf3rio"),r.admin_username.trim()?r.admin_username.length<3&&(e.admin_username="Username deve ter pelo menos 3 caracteres"):e.admin_username="Username \xe9 obrigat\xf3rio",(!r.max_patients||r.max_patients<1)&&(e.max_patients="Limite de pacientes deve ser maior que 0"),e})();if(Object.keys(t).length>0)d(t);else{l(!0);try{await n(r),i({clinic_name:"",max_patients:50,admin_name:"",admin_username:""}),d({})}catch(o){var a,s;if(console.error("Erro ao criar cl\xednica:",o),null!==(a=o.response)&&void 0!==a&&null!==(s=a.data)&&void 0!==s&&s.errors){const e={};o.response.data.errors.forEach((t=>{t.msg.includes("Nome de usu\xe1rio")&&(e.admin_username="Este username j\xe1 est\xe1 em uso")})),d(e)}}finally{l(!1)}}};return t?(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:No,className:"text-2xl text-blue-600 mr-3"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Nova Cl\xednica"})]}),(0,We.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsxs)("form",{onSubmit:h,className:"p-6 space-y-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Cl\xednica *"}),(0,We.jsx)("input",{type:"text",name:"clinic_name",value:r.clinic_name,onChange:u,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(c.clinic_name?"border-red-500":"border-gray-300"),placeholder:"Ex: Cl\xednica ABA Plus"}),c.clinic_name&&(0,We.jsx)("p",{className:"text-red-500 text-xs mt-1",children:c.clinic_name})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Limite de Pacientes *"}),(0,We.jsx)("input",{type:"number",name:"max_patients",value:r.max_patients,onChange:u,min:"1",max:"1000",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(c.max_patients?"border-red-500":"border-gray-300")}),c.max_patients&&(0,We.jsx)("p",{className:"text-red-500 text-xs mt-1",children:c.max_patients})]}),(0,We.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,We.jsx)("div",{className:"flex items-center justify-center",children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-1",children:"Modelo de Cobran\xe7a"}),(0,We.jsx)("div",{className:"text-lg font-bold text-green-600",children:"R$ 34,90 por paciente/m\xeas"}),(0,We.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Exemplo: ",r.max_patients," pacientes = R$ ",(34.9*r.max_patients).toLocaleString("pt-BR",{minimumFractionDigits:2})," m\xe1ximo/m\xeas"]})]})})}),(0,We.jsx)("div",{className:"border-t border-gray-200 my-4 pt-4",children:(0,We.jsxs)("div",{className:"flex items-center mb-4",children:[(0,We.jsx)(Vn,{icon:Sr,className:"text-blue-600 mr-2"}),(0,We.jsx)("h4",{className:"text-sm font-semibold text-gray-900",children:"Dados do Administrador"})]})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo *"}),(0,We.jsx)("input",{type:"text",name:"admin_name",value:r.admin_name,onChange:u,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(c.admin_name?"border-red-500":"border-gray-300"),placeholder:"Ex: Jo\xe3o Silva"}),c.admin_name&&(0,We.jsx)("p",{className:"text-red-500 text-xs mt-1",children:c.admin_name})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username de Login *"}),(0,We.jsx)("input",{type:"text",name:"admin_username",value:r.admin_username,onChange:u,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(c.admin_username?"border-red-500":"border-gray-300"),placeholder:"Ex: clinica.abaplus"}),c.admin_username&&(0,We.jsx)("p",{className:"text-red-500 text-xs mt-1",children:c.admin_username}),(0,We.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"O administrador definir\xe1 a senha no primeiro acesso"})]})]}),(0,We.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,We.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:o,children:"Cancelar"}),(0,We.jsx)("button",{onClick:h,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50",children:o?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"animate-spin mr-2"}),"Criando..."]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:Do,className:"mr-2"}),"Criar Cl\xednica"]})})]})]})}):null},Zm=e=>{let{isOpen:t,onClose:a,clinic:n,onSubmit:r,onResetPassword:i}=e;const[o,l]=(0,s.useState)(""),[c,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(""),[m,p]=(0,s.useState)("limit"),[f,g]=(0,s.useState)(!1);(0,s.useEffect)((()=>{var e;t&&n&&(l((null===(e=n.max_patients)||void 0===e?void 0:e.toString())||""),h(""),p("limit"))}),[t,n]);const x=async e=>{e.preventDefault();const t=parseInt(o),a=parseInt((null===n||void 0===n?void 0:n.patients_count)||0);if(!t||t<1)h("Limite deve ser um n\xfamero maior que 0");else if(t<a)h("Limite n\xe3o pode ser menor que ".concat(a," (pacientes atuais)"));else if(t!==n.max_patients){d(!0),h("");try{await r(t)}catch(u){console.error("Erro ao atualizar limite:",u),h("Erro ao atualizar limite de pacientes")}finally{d(!1)}}else h("O limite informado \xe9 igual ao atual")};if(!t||!n)return null;const b=parseInt(n.patients_count||0),v=parseInt(n.max_patients||0),y=parseInt(o)||0,j=y-v;return(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,We.jsxs)("div",{className:"border-b border-gray-200",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:vr,className:"text-2xl text-blue-600 mr-3"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Gerenciar Cl\xednica"})]}),(0,We.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsxs)("div",{className:"flex border-t",children:[(0,We.jsxs)("button",{onClick:()=>p("limit"),className:"flex-1 py-3 px-4 text-sm font-medium text-center border-b-2 transition-colors ".concat("limit"===m?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[(0,We.jsx)(Vn,{icon:yr,className:"mr-2"}),"Limite de Pacientes"]}),(0,We.jsxs)("button",{onClick:()=>p("password"),className:"flex-1 py-3 px-4 text-sm font-medium text-center border-b-2 transition-colors ".concat("password"===m?"border-blue-500 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:bg-gray-50"),children:[(0,We.jsx)(Vn,{icon:Cr,className:"mr-2"}),"Resetar Senha Admin"]})]})]}),(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,We.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:n.name}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-gray-500",children:"Admin:"}),(0,We.jsx)("div",{className:"font-semibold text-gray-900",children:n.admin_name})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-gray-500",children:"E-mail:"}),(0,We.jsx)("div",{className:"font-semibold text-gray-900 text-xs",children:n.admin_email})]}),"limit"===m&&(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-gray-500",children:"Pacientes atuais:"}),(0,We.jsx)("div",{className:"font-semibold text-gray-900",children:b})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-gray-500",children:"Limite atual:"}),(0,We.jsx)("div",{className:"font-semibold text-gray-900",children:v})]})]})]}),"limit"===m&&(0,We.jsxs)("div",{className:"mt-3",children:[(0,We.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[(0,We.jsx)("span",{children:"Ocupa\xe7\xe3o atual"}),(0,We.jsxs)("span",{children:[Math.round(b/v*100),"%"]})]}),(0,We.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,We.jsx)("div",{className:"h-2 rounded-full ".concat(b/v>.8?"bg-red-500":b/v>.6?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(Math.min(100,b/v*100),"%")}})})]})]}),"limit"===m&&(0,We.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:yr,className:"mr-2 text-blue-600"}),"Novo Limite de Pacientes"]}),(0,We.jsx)("input",{type:"number",value:o,onChange:e=>{const t=e.target.value;l(t),u&&h("")},min:b,max:"1000",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg font-semibold ".concat(u?"border-red-500":"border-gray-300"),placeholder:"Digite o novo limite"}),y&&y!==v&&!u&&(0,We.jsxs)("div",{className:"mt-2 p-3 bg-blue-50 rounded-lg",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:j>0?Do:To,className:"mr-2 ".concat(j>0?"text-green-600":"text-yellow-600")}),(0,We.jsx)("span",{className:"text-sm",children:j>0?"Aumento de ".concat(j," paciente").concat(j>1?"s":""):"Redu\xe7\xe3o de ".concat(Math.abs(j)," paciente").concat(Math.abs(j)>1?"s":"")})]}),(0,We.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:["Nova ocupa\xe7\xe3o: ",Math.round(b/y*100),"%"]})]})]}),u&&(0,We.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,We.jsxs)("div",{className:"flex",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-600 mr-2 mt-0.5"}),(0,We.jsx)("span",{className:"text-red-700 text-sm",children:u})]})}),(0,We.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg text-xs text-gray-600",children:[(0,We.jsx)("strong",{children:"Dicas:"}),(0,We.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,We.jsx)("li",{children:"O limite n\xe3o pode ser menor que o n\xfamero atual de pacientes"}),(0,We.jsx)("li",{children:"Recomenda-se manter uma margem de 10-20% para crescimento"}),(0,We.jsx)("li",{children:"Cl\xednicas com mais de 80% de ocupa\xe7\xe3o podem precisar expandir"})]})]})]}),"password"===m&&(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-4",children:(0,We.jsxs)("div",{className:"flex",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-600 mr-2 mt-0.5"}),(0,We.jsxs)("div",{className:"text-red-800 text-sm",children:[(0,We.jsx)("strong",{children:"Aten\xe7\xe3o!"})," Esta a\xe7\xe3o ir\xe1 resetar a senha do administrador da cl\xednica para NULL. O administrador ser\xe1 obrigado a cadastrar uma nova senha no pr\xf3ximo login."]})]})}),(0,We.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,We.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Como funciona:"}),(0,We.jsxs)("ul",{className:"text-blue-800 text-sm space-y-1",children:[(0,We.jsx)("li",{children:"\u2022 A senha atual ser\xe1 removida do sistema"}),(0,We.jsx)("li",{children:"\u2022 O administrador n\xe3o conseguir\xe1 fazer login com a senha atual"}),(0,We.jsx)("li",{children:"\u2022 No pr\xf3ximo acesso, ser\xe1 solicitada a cria\xe7\xe3o de uma nova senha"}),(0,We.jsx)("li",{children:"\u2022 Apenas o pr\xf3prio administrador definir\xe1 a nova senha"})]})]}),(0,We.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg text-xs text-gray-600",children:[(0,We.jsx)("strong",{children:"Seguran\xe7a:"}),(0,We.jsxs)("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[(0,We.jsx)("li",{children:"O super admin nunca tem acesso \xe0s senhas dos usu\xe1rios"}),(0,We.jsx)("li",{children:"Esta \xe9 uma opera\xe7\xe3o de seguran\xe7a que remove credenciais"}),(0,We.jsx)("li",{children:"Informe o administrador sobre a necessidade de criar nova senha"})]})]})]})]}),(0,We.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,We.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:c||f,children:"Cancelar"}),"limit"===m&&(0,We.jsx)("button",{onClick:x,disabled:c||!o||u,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50",children:c?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"animate-spin mr-2"}),"Atualizando..."]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:Do,className:"mr-2"}),"Atualizar Limite"]})}),"password"===m&&(0,We.jsx)("button",{onClick:async()=>{if(window.confirm("Tem certeza que deseja resetar a senha do administrador? Ele precisar\xe1 cadastrar uma nova senha no pr\xf3ximo login.")){g(!0);try{await i(n.id),alert("Senha resetada! O administrador dever\xe1 cadastrar nova senha no pr\xf3ximo login.")}catch(u){console.error("Erro ao resetar senha:",u),alert("Erro ao resetar senha do administrador")}finally{g(!1)}}},disabled:f,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center disabled:opacity-50",children:f?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"animate-spin mr-2"}),"Resetando..."]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:Cr,className:"mr-2"}),"Resetar Senha"]})})]})]})})},ep=e=>{let{isOpen:t,onClose:a,clinic:n,onSubmit:r}=e;const[i,o]=(0,s.useState)(""),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(""),h=async e=>{if(e.preventDefault(),i.trim())if(i.trim().length<10)u("Motivo deve ter pelo menos 10 caracteres");else{c(!0),u("");try{await r(i.trim()),o("")}catch(d){console.error("Erro ao suspender cl\xednica:",d),u("Erro ao suspender cl\xednica")}finally{c(!1)}}else u("Motivo da suspens\xe3o \xe9 obrigat\xf3rio")},m=()=>{o(""),u(""),a()};if(!t||!n)return null;const p=new Date(n.created_at).toLocaleDateString("pt-BR"),f=parseInt(n.therapists_count||0)+parseInt(n.parents_count||0);return(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"text-2xl text-red-600 mr-3"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Suspender Cl\xednica"})]}),(0,We.jsx)("button",{onClick:m,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,We.jsxs)("div",{className:"flex",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-600 mr-3 mt-0.5"}),(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("h4",{className:"font-semibold text-red-800 mb-2",children:"Aten\xe7\xe3o!"}),(0,We.jsx)("p",{className:"text-red-700",children:"Esta a\xe7\xe3o suspender\xe1 completamente o acesso da cl\xednica ao sistema. Todos os usu\xe1rios (terapeutas e pais) ser\xe3o bloqueados, exceto o administrador que ter\xe1 acesso limitado apenas para regulariza\xe7\xe3o."})]})]})}),(0,We.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,We.jsxs)("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[(0,We.jsx)(Vn,{icon:No,className:"mr-2 text-blue-600"}),n.name]}),(0,We.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("div",{className:"text-gray-500",children:"Pacientes"}),(0,We.jsx)("div",{className:"font-semibold text-gray-900",children:n.patients_count||0})]}),(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("div",{className:"text-gray-500",children:"Usu\xe1rios"}),(0,We.jsx)("div",{className:"font-semibold text-gray-900",children:f})]}),(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("div",{className:"text-gray-500",children:"Criada em"}),(0,We.jsx)("div",{className:"font-semibold text-gray-900",children:p})]})]}),(0,We.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,We.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,We.jsx)("span",{className:"text-gray-500",children:"Administrador:"}),(0,We.jsxs)("div",{className:"text-right",children:[(0,We.jsx)("div",{className:"font-medium text-gray-900",children:n.admin_name}),(0,We.jsxs)("div",{className:"text-gray-500",children:["@",n.admin_username]})]})]})})]}),(0,We.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo da Suspens\xe3o *"}),(0,We.jsxs)("div",{className:"mb-3",children:[(0,We.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Motivos comuns (clique para selecionar):"}),(0,We.jsx)("div",{className:"space-y-1",children:["Inadimpl\xeancia - Pagamento em atraso h\xe1 mais de 10 dias","Inadimpl\xeancia - M\xfaltiplas faturas em aberto","Viola\xe7\xe3o dos termos de uso","Inatividade prolongada - Mais de 60 dias sem acesso","Solicita\xe7\xe3o da pr\xf3pria cl\xednica","Problemas t\xe9cnicos ou de seguran\xe7a"].map(((e,t)=>(0,We.jsx)("button",{type:"button",onClick:()=>o(e),className:"text-left w-full px-3 py-2 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",children:e},t)))})]}),(0,We.jsx)("textarea",{value:i,onChange:e=>{o(e.target.value),d&&u("")},rows:"4",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent resize-none ".concat(d?"border-red-500":"border-gray-300"),placeholder:"Descreva o motivo detalhado da suspens\xe3o..."}),(0,We.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[d&&(0,We.jsx)("span",{className:"text-red-500 text-xs",children:d}),(0,We.jsxs)("div",{className:"text-xs text-gray-500 ml-auto",children:[i.length,"/500 caracteres"]})]})]}),(0,We.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:[(0,We.jsx)("h5",{className:"font-medium text-yellow-800 mb-2",children:"Consequ\xeancias da Suspens\xe3o:"}),(0,We.jsxs)("ul",{className:"text-xs text-yellow-700 space-y-1",children:[(0,We.jsx)("li",{children:"\u2022 Terapeutas n\xe3o conseguir\xe3o fazer login"}),(0,We.jsx)("li",{children:"\u2022 Pais n\xe3o ter\xe3o acesso aos dados dos filhos"}),(0,We.jsx)("li",{children:"\u2022 Administrador ter\xe1 acesso limitado para regulariza\xe7\xe3o"}),(0,We.jsx)("li",{children:"\u2022 Dados permanecem seguros e podem ser reativados"}),(0,We.jsx)("li",{children:"\u2022 Cobran\xe7a continua ativa at\xe9 regulariza\xe7\xe3o"})]})]})]})]}),(0,We.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,We.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:l,children:"Cancelar"}),(0,We.jsx)("button",{onClick:h,disabled:l||!i.trim()||i.trim().length<10,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors flex items-center disabled:opacity-50",children:l?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"animate-spin mr-2"}),"Suspendendo..."]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:Pr,className:"mr-2"}),"Suspender Cl\xednica"]})})]})]})})},tp=e=>{var t,a;let{isOpen:n,onClose:r,billing:i,onSubmit:o}=e;const[l,c]=(0,s.useState)({payment_date:(new Date).toISOString().split("T")[0],payment_method:"credit_card",notes:""}),[d,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)("");(0,s.useEffect)((()=>{n&&i&&(c({payment_date:(new Date).toISOString().split("T")[0],payment_method:"credit_card",notes:""}),m(""))}),[n,i]);const p=async e=>{if(e.preventDefault(),!l.payment_date)return void m("Data de pagamento \xe9 obrigat\xf3ria");const t=new Date(l.payment_date),a=new Date;if(a.setHours(23,59,59,999),t>a)m("Data de pagamento n\xe3o pode ser futura");else{u(!0),m("");try{await o(l)}catch(h){console.error("Erro ao registrar pagamento:",h),m("Erro ao registrar pagamento")}finally{u(!1)}}},f=()=>{c({payment_date:(new Date).toISOString().split("T")[0],payment_method:"credit_card",notes:""}),m(""),r()},g=e=>{const{name:t,value:a}=e.target;c((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:a}))),h&&m("")};if(!n||!i)return null;const x=Math.floor((new Date-new Date(i.due_date))/864e5),b=x>0&&"pending"===i.status;return(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:Wi,className:"text-2xl text-green-600 mr-3"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Registrar Pagamento"})]}),(0,We.jsx)("button",{onClick:f,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,We.jsxs)("h4",{className:"font-medium text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:No,className:"mr-2 text-blue-600"}),i.clinic_name]}),(0,We.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat("premium"===i.plan_type?"bg-purple-100 text-purple-800":"enterprise"===i.plan_type?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:(null===(t=i.plan_type)||void 0===t?void 0:t.charAt(0).toUpperCase())+(null===(a=i.plan_type)||void 0===a?void 0:a.slice(1))})]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-gray-500",children:"Valor:"}),(0,We.jsx)("div",{className:"font-bold text-lg text-green-600",children:(e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat(e)||0))(i.amount)})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-gray-500",children:"Vencimento:"}),(0,We.jsx)("div",{className:"font-semibold ".concat(b?"text-red-600":"text-gray-900"),children:(v=i.due_date,new Date(v).toLocaleDateString("pt-BR"))}),b&&(0,We.jsxs)("div",{className:"text-xs text-red-500",children:[x," dia",x>1?"s":""," em atraso"]})]})]})]}),b&&(0,We.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:(0,We.jsxs)("div",{className:"flex",children:[(0,We.jsx)(Vn,{icon:_i,className:"text-red-600 mr-2 mt-0.5"}),(0,We.jsxs)("div",{className:"text-sm text-red-700",children:[(0,We.jsx)("strong",{children:"Pagamento em Atraso:"})," Esta cobran\xe7a est\xe1 vencida h\xe1 ",x," dia",x>1?"s":"",". Ap\xf3s confirmar o pagamento, a cl\xednica ser\xe1 automaticamente reativada."]})]})}),(0,We.jsxs)("form",{onSubmit:p,className:"space-y-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2 text-blue-600"}),"Data do Pagamento *"]}),(0,We.jsx)("input",{type:"date",name:"payment_date",value:l.payment_date,onChange:g,max:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent ".concat(h&&h.includes("Data")?"border-red-500":"border-gray-300")})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Ar,className:"mr-2 text-blue-600"}),"M\xe9todo de Pagamento *"]}),(0,We.jsx)("select",{name:"payment_method",value:l.payment_method,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[{value:"credit_card",label:"\ud83d\udcb3 Cart\xe3o de Cr\xe9dito"},{value:"debit_card",label:"\ud83d\udcb3 Cart\xe3o de D\xe9bito"},{value:"bank_transfer",label:"\ud83c\udfe6 Transfer\xeancia Banc\xe1ria"},{value:"pix",label:"\ud83d\udcf1 PIX"},{value:"bank_slip",label:"\ud83d\udcc4 Boleto Banc\xe1rio"},{value:"cash",label:"\ud83d\udcb5 Dinheiro"},{value:"other",label:"\ud83d\udd27 Outros"}].map((e=>(0,We.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observa\xe7\xf5es (opcional)"}),(0,We.jsx)("textarea",{name:"notes",value:l.notes,onChange:g,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none",placeholder:"Ex: N\xfamero da transa\xe7\xe3o, observa\xe7\xf5es sobre o pagamento..."}),(0,We.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[l.notes.length,"/200 caracteres"]})]})]}),h&&(0,We.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:(0,We.jsxs)("div",{className:"flex",children:[(0,We.jsx)(Vn,{icon:_i,className:"text-red-600 mr-2 mt-0.5"}),(0,We.jsx)("span",{className:"text-red-700 text-sm",children:h})]})}),(0,We.jsxs)("div",{className:"mt-4 bg-green-50 border border-green-200 rounded-lg p-3",children:[(0,We.jsx)("h5",{className:"font-medium text-green-800 mb-2",children:"Ap\xf3s confirmar o pagamento:"}),(0,We.jsxs)("ul",{className:"text-xs text-green-700 space-y-1",children:[(0,We.jsx)("li",{children:'\u2022 Status da cobran\xe7a ser\xe1 alterado para "Pago"'}),"suspended"===i.clinic_status&&(0,We.jsx)("li",{children:"\u2022 Cl\xednica ser\xe1 automaticamente reativada"}),(0,We.jsx)("li",{children:"\u2022 M\xe9tricas financeiras ser\xe3o atualizadas"}),(0,We.jsx)("li",{children:"\u2022 Registro ficar\xe1 dispon\xedvel no hist\xf3rico"})]})]})]}),(0,We.jsxs)("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200",children:[(0,We.jsx)("button",{type:"button",onClick:f,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:d,children:"Cancelar"}),(0,We.jsx)("button",{onClick:p,disabled:d||!l.payment_date,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center disabled:opacity-50",children:d?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"animate-spin mr-2"}),"Registrando..."]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:Do,className:"mr-2"}),"Confirmar Pagamento"]})})]})]})});var v},ap=e=>{let{days:t,currentDate:a,today:s,billingsByDate:n,weekDays:r,getDateStatus:i,getStatusStyles:o,formatCurrency:l,onViewBilling:c,onEditDueDate:d,onRecordPayment:u}=e;return(0,We.jsxs)("div",{className:"grid grid-cols-7 gap-0",children:[r.map((e=>(0,We.jsx)("div",{className:"bg-gray-100 p-3 text-center font-medium text-gray-700 border-b border-gray-200",children:e},e))),t.map(((e,t)=>{const r=e.toDateString(),h=n[r]||[],m=e.toDateString()===s.toDateString(),p=e.getMonth()===a.getMonth(),f=i(e,h);return(0,We.jsxs)("div",{className:o(f,m,p),children:[(0,We.jsx)("div",{className:"p-2",children:(0,We.jsx)("div",{className:"text-sm font-medium ".concat(m?"bg-blue-600 text-white w-6 h-6 rounded-full flex items-center justify-center":""),children:e.getDate()})}),h.length>0&&(0,We.jsxs)("div",{className:"absolute inset-x-1 bottom-1 space-y-1 max-h-20 overflow-y-auto",children:[h.slice(0,3).map((e=>(0,We.jsx)(rp,{billing:e,formatCurrency:l,onViewBilling:c,onEditDueDate:d,onRecordPayment:u},e.id))),h.length>3&&(0,We.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["+",h.length-3," mais"]})]})]},t)}))]})},sp=e=>{let{days:t,today:a,billingsByDate:s,weekDays:n,formatCurrency:r,onViewBilling:i,onEditDueDate:o,onRecordPayment:l}=e;return(0,We.jsx)("div",{className:"grid grid-cols-7 gap-4",children:t.map(((e,t)=>{const c=e.toDateString(),d=s[c]||[],u=e.toDateString()===a.toDateString();return(0,We.jsxs)("div",{className:"bg-white border rounded-lg p-4 min-h-64 ".concat(u?"ring-2 ring-blue-500":"border-gray-200"),children:[(0,We.jsxs)("div",{className:"text-center mb-3",children:[(0,We.jsx)("div",{className:"text-sm font-medium text-gray-600",children:n[e.getDay()]}),(0,We.jsx)("div",{className:"text-lg font-bold ".concat(u?"bg-blue-600 text-white w-8 h-8 rounded-full flex items-center justify-center mx-auto":"text-gray-900"),children:e.getDate()})]}),(0,We.jsx)("div",{className:"space-y-2",children:d.map((e=>(0,We.jsx)(rp,{billing:e,formatCurrency:r,onViewBilling:i,onEditDueDate:o,onRecordPayment:l,compact:!1},e.id)))})]},t)}))})},np=e=>{let{date:t,today:a,billingsByDate:s,formatCurrency:n,onViewBilling:r,onEditDueDate:i,onRecordPayment:o}=e;const l=s[t.toDateString()]||[],c=t.toDateString()===a.toDateString();return(0,We.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200",children:[(0,We.jsxs)("div",{className:"p-6 border-b border-gray-200 ".concat(c?"bg-blue-50":"bg-gray-50"),children:[(0,We.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:t.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,We.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[l.length," cobran\xe7a",1!==l.length?"s":""," ",l.length>0?"programada"+(l.length>1?"s":""):"programadas"]})]}),(0,We.jsx)("div",{className:"p-6",children:l.length>0?(0,We.jsx)("div",{className:"space-y-4",children:l.map((e=>(0,We.jsx)("div",{className:"p-4 rounded-lg border ".concat("paid"===e.status?"bg-green-50 border-green-200":"overdue"===e.status?"bg-red-50 border-red-200":"bg-yellow-50 border-yellow-200"),children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("h4",{className:"font-semibold text-gray-900",children:e.clinic_name}),(0,We.jsx)("p",{className:"text-lg font-bold text-gray-800",children:n(e.amount)}),(0,We.jsxs)("p",{className:"text-sm text-gray-600",children:["Status: ","paid"===e.status?"Pago":"overdue"===e.status?"Vencido":"Pendente"]})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("button",{onClick:()=>r&&r(e),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-white rounded transition-colors",title:"Ver detalhes",children:(0,We.jsx)(Vn,{icon:li})}),(0,We.jsx)("button",{onClick:()=>i&&i(e),className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-white rounded transition-colors",title:"Editar data de vencimento",children:(0,We.jsx)(Vn,{icon:vr})}),"paid"!==e.status&&(0,We.jsx)("button",{onClick:()=>o&&o(e),className:"p-2 text-gray-600 hover:text-green-600 hover:bg-white rounded transition-colors",title:"Registrar pagamento",children:(0,We.jsx)(Vn,{icon:Wi})})]})]})},e.id)))}):(0,We.jsxs)("div",{className:"text-center py-12",children:[(0,We.jsx)(Vn,{icon:er,className:"text-4xl text-gray-400 mb-4"}),(0,We.jsx)("p",{className:"text-gray-500",children:"Nenhuma cobran\xe7a programada para este dia."})]})})]})},rp=e=>{let{billing:t,formatCurrency:a,onViewBilling:s,onEditDueDate:n,onRecordPayment:r,compact:i=!0}=e;return(0,We.jsxs)("div",{className:"".concat(i?"text-xs":"text-sm"," p-").concat(i?"1":"3"," rounded cursor-pointer group relative ").concat("paid"===t.status?"bg-green-100 text-green-800":"overdue"===t.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),onClick:()=>s&&s(t),children:[(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsx)("span",{className:"truncate font-medium ".concat(i?"":"text-base"),children:t.clinic_name}),(0,We.jsxs)("div",{className:"flex items-center space-x-1 ".concat(i?"opacity-0 group-hover:opacity-100":""," transition-opacity"),children:[(0,We.jsx)("button",{onClick:e=>{e.stopPropagation(),s&&s(t)},className:"text-gray-600 hover:text-blue-600",title:"Ver detalhes",children:(0,We.jsx)(Vn,{icon:li,className:i?"w-3 h-3":"w-4 h-4"})}),(0,We.jsx)("button",{onClick:e=>{e.stopPropagation(),n&&n(t)},className:"text-gray-600 hover:text-blue-600",title:"Editar data de vencimento",children:(0,We.jsx)(Vn,{icon:vr,className:i?"w-3 h-3":"w-4 h-4"})}),"paid"!==t.status&&(0,We.jsx)("button",{onClick:e=>{e.stopPropagation(),r&&r(t)},className:"text-gray-600 hover:text-green-600",title:"Registrar pagamento",children:(0,We.jsx)(Vn,{icon:Wi,className:i?"w-3 h-3":"w-4 h-4"})})]})]}),(0,We.jsx)("div",{className:"".concat(i?"text-xs":"text-sm"," opacity-75"),children:a(t.amount)})]})},ip=e=>{let{billings:t,onViewBilling:a,onRecordPayment:n,onEditDueDate:r}=e;const[i,o]=(0,s.useState)(new Date),[l,c]=(0,s.useState)("month"),d=e=>{const t=new Date(i);"month"===l?t.setMonth(i.getMonth()+e):"week"===l?t.setDate(i.getDate()+7*e):"day"===l&&t.setDate(i.getDate()+e),o(t)},u=(0,s.useMemo)((()=>{const e={};return t.forEach((t=>{const a=new Date(t.due_date).toDateString();e[a]||(e[a]=[]),e[a].push(t)})),e}),[t]),h=(e,t)=>{if(!t||0===t.length)return"normal";const a=e<new Date,s=t.every((e=>"paid"===e.status)),n=t.some((e=>"pending"===e.status)),r=t.some((e=>"overdue"===e.status));return s?"paid":r||a&&n?"overdue":n?"pending":"normal"},m=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0),p=new Date,f=["Dom","Seg","Ter","Qua","Qui","Sex","S\xe1b"];return(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,We.jsx)("div",{className:"bg-gray-50 border-b border-gray-200 p-4",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,We.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2 text-blue-600"}),"Calend\xe1rio de Cobran\xe7as"]}),(0,We.jsx)("button",{onClick:()=>{o(new Date)},className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Hoje"})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,We.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg overflow-hidden",children:[(0,We.jsxs)("button",{onClick:()=>c("month"),className:"px-3 py-1 text-sm flex items-center transition-colors ".concat("month"===l?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:[(0,We.jsx)(Vn,{icon:dr,className:"mr-1"}),"M\xeas"]}),(0,We.jsxs)("button",{onClick:()=>c("week"),className:"px-3 py-1 text-sm flex items-center transition-colors ".concat("week"===l?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:[(0,We.jsx)(Vn,{icon:er,className:"mr-1"}),"Semana"]}),(0,We.jsxs)("button",{onClick:()=>c("day"),className:"px-3 py-1 text-sm flex items-center transition-colors ".concat("day"===l?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:[(0,We.jsx)(Vn,{icon:xr,className:"mr-1"}),"Dia"]})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:oi,className:"text-green-500 mr-1"}),(0,We.jsx)("span",{children:"Pago"})]}),(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:oi,className:"text-yellow-500 mr-1"}),(0,We.jsx)("span",{children:"Pendente"})]}),(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:oi,className:"text-red-500 mr-1"}),(0,We.jsx)("span",{children:"Vencido"})]})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("button",{onClick:()=>d(-1),className:"p-2 hover:bg-gray-200 rounded transition-colors",children:(0,We.jsx)(Vn,{icon:ho})}),(0,We.jsxs)("span",{className:"font-medium text-gray-900 min-w-48 text-center",children:["month"===l&&"".concat(["Janeiro","Fevereiro","Mar\xe7o","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"][i.getMonth()]," ").concat(i.getFullYear()),"week"===l&&"Semana de ".concat(i.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})),"day"===l&&i.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),(0,We.jsx)("button",{onClick:()=>d(1),className:"p-2 hover:bg-gray-200 rounded transition-colors",children:(0,We.jsx)(Vn,{icon:mo})})]})]})]})}),"month"===l&&(0,We.jsx)(ap,{days:(()=>{const e=i.getFullYear(),t=i.getMonth(),a=new Date(e,t,1),s=new Date(a);s.setDate(s.getDate()-a.getDay());const n=[],r=new Date(s);r.setDate(r.getDate()+42);for(let i=new Date(s);i<r;i.setDate(i.getDate()+1))n.push(new Date(i));return n})(),currentDate:i,today:p,billingsByDate:u,weekDays:f,getDateStatus:h,getStatusStyles:(e,t,a)=>{const s="relative w-full h-32 border border-gray-200 hover:bg-gray-50 transition-colors ".concat(a?"bg-white":"bg-gray-50 text-gray-400");let n="";switch(t&&(n="ring-2 ring-blue-500"),e){case"paid":n+=" bg-green-50 border-green-200";break;case"overdue":n+=" bg-red-50 border-red-300";break;case"pending":n+=" bg-yellow-50 border-yellow-200"}return"".concat(s," ").concat(n)},formatCurrency:m,onViewBilling:a,onEditDueDate:r,onRecordPayment:n}),"week"===l&&(0,We.jsx)(sp,{days:(()=>{const e=new Date(i),t=e.getDay(),a=e.getDate()-t;e.setDate(a);const s=[];for(let n=0;n<7;n++){const t=new Date(e);t.setDate(e.getDate()+n),s.push(t)}return s})(),currentDate:i,today:p,billingsByDate:u,weekDays:f,getDateStatus:h,formatCurrency:m,onViewBilling:a,onEditDueDate:r,onRecordPayment:n}),"day"===l&&(0,We.jsx)(np,{date:i,today:p,billingsByDate:u,formatCurrency:m,onViewBilling:a,onEditDueDate:r,onRecordPayment:n}),(0,We.jsx)("div",{className:"bg-gray-50 border-t border-gray-200 p-4",children:(0,We.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-center",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"text-sm text-gray-600",children:"Total de Cobran\xe7as"}),(0,We.jsx)("div",{className:"font-bold text-lg text-gray-900",children:t.length})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"text-sm text-gray-600",children:"Pagas"}),(0,We.jsx)("div",{className:"font-bold text-lg text-green-600",children:t.filter((e=>"paid"===e.status)).length})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"text-sm text-gray-600",children:"Pendentes"}),(0,We.jsx)("div",{className:"font-bold text-lg text-yellow-600",children:t.filter((e=>"pending"===e.status)).length})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"text-sm text-gray-600",children:"Vencidas"}),(0,We.jsx)("div",{className:"font-bold text-lg text-red-600",children:t.filter((e=>"overdue"===e.status)).length})]})]})})]})},op=e=>{let{isOpen:t,onClose:a,onSubmit:n}=e;const[r,i]=(0,s.useState)({clinic_id:"",due_date:"",notes:""}),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)(null),[u,h]=(0,s.useState)(0),[m,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)("");(0,s.useEffect)((()=>{if(t){x();const e=new Date;e.setDate(e.getDate()+30),i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{due_date:e.toISOString().split("T")[0]})))}}),[t]);const x=async()=>{try{const e=await Cm();l(e.data||[])}catch(f){console.error("Erro ao carregar cl\xednicas:",f),g("Erro ao carregar cl\xednicas")}},b=()=>{i({clinic_id:"",due_date:"",notes:""}),d(null),h(0),g(""),a()},v=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0);return t?(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:Uo,className:"text-2xl text-green-600 mr-3"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Nova Cobran\xe7a"})]}),(0,We.jsx)("button",{onClick:b,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r.clinic_id&&r.due_date)if(c&&0!==c.current_patients){p(!0),g("");try{await n({clinic_id:parseInt(r.clinic_id),due_date:r.due_date,notes:r.notes||"Cobran\xe7a autom\xe1tica - ".concat((null===c||void 0===c?void 0:c.current_patients)||0," pacientes")}),i({clinic_id:"",due_date:"",notes:""}),d(null),h(0)}catch(f){console.error("Erro ao criar cobran\xe7a:",f),g("Erro ao criar cobran\xe7a")}finally{p(!1)}}else g("A cl\xednica selecionada deve ter pelo menos 1 paciente para cobran\xe7a");else g("Cl\xednica e data de vencimento s\xe3o obrigat\xf3rios")},className:"p-6 space-y-6",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:No,className:"mr-2"}),"Cl\xednica *"]}),(0,We.jsxs)("select",{value:r.clinic_id,onChange:e=>{const t=e.target.value,a=o.find((e=>e.id===parseInt(t)));if(i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{clinic_id:t}))),d(a),a){const e=34.9,t=(a.current_patients||0)*e;h(t)}else h(0)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[(0,We.jsx)("option",{value:"",children:"Selecione uma cl\xednica"}),o.map((e=>(0,We.jsxs)("option",{value:e.id,children:[e.name," (",e.current_patients||0," pacientes)"]},e.id)))]})]}),c&&(0,We.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,We.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Informa\xe7\xf5es da Cl\xednica"}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-blue-700 font-medium",children:"Status:"}),(0,We.jsx)("span",{className:"ml-2 px-2 py-1 rounded text-xs ".concat("active"===c.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:"active"===c.status?"Ativa":"Suspensa"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-blue-700 font-medium",children:"Pacientes:"}),(0,We.jsxs)("span",{className:"ml-2 text-blue-900",children:[c.current_patients||0," / ",c.max_patients]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-blue-700 font-medium",children:"Terapeutas:"}),(0,We.jsx)("span",{className:"ml-2 text-blue-900",children:c.therapists_count||0})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-blue-700 font-medium",children:"Administrador:"}),(0,We.jsx)("span",{className:"ml-2 text-blue-900",children:c.admin_name||"N/A"})]})]})]}),u>0&&(0,We.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,We.jsxs)("h4",{className:"font-medium text-green-900 mb-2 flex items-center",children:[(0,We.jsx)(Vn,{icon:Ii,className:"mr-2"}),"C\xe1lculo da Cobran\xe7a"]}),(0,We.jsxs)("div",{className:"text-sm text-green-800",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center",children:[(0,We.jsxs)("span",{children:[(null===c||void 0===c?void 0:c.current_patients)||0," pacientes \xd7 R$ 34,90"]}),(0,We.jsx)("span",{className:"font-bold text-lg",children:v(u)})]}),(0,We.jsx)("p",{className:"text-xs text-green-600 mt-2",children:"* Valor calculado automaticamente baseado no n\xfamero atual de pacientes"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2"}),"Data de Vencimento *"]}),(0,We.jsx)("input",{type:"date",value:r.due_date,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{due_date:e.target.value}))),min:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:_i,className:"mr-2"}),"Observa\xe7\xf5es"]}),(0,We.jsx)("textarea",{value:r.notes,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{notes:e.target.value}))),placeholder:"Observa\xe7\xf5es sobre esta cobran\xe7a (opcional)",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),f&&(0,We.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,We.jsx)("p",{className:"text-sm text-red-800",children:f})}),(0,We.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,We.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",disabled:m,children:"Cancelar"}),(0,We.jsxs)("button",{type:"submit",disabled:m||!r.clinic_id||!r.due_date||0===u,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 rounded-md transition-colors flex items-center",children:[m&&(0,We.jsx)(Vn,{icon:xo,className:"mr-2 animate-spin"}),m?"Criando...":"Criar Cobran\xe7a ".concat(v(u))]})]})]})]})}):null},lp=e=>{let{isOpen:t,onClose:a,billing:n,onSubmit:r}=e;const[i,o]=(0,s.useState)({due_date:"",reason:""}),[l,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)("");(0,s.useEffect)((()=>{t&&n&&(o({due_date:new Date(n.due_date).toISOString().split("T")[0],reason:""}),u(""))}),[t,n]);const h=()=>{o({due_date:"",reason:""}),u(""),a()},m=e=>new Date(e).toLocaleDateString("pt-BR");return t&&n?(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:vr,className:"text-2xl text-blue-600 mr-3"}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Editar Data de Vencimento"})]}),(0,We.jsx)("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:[(0,We.jsxs)("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[(0,We.jsx)(Vn,{icon:No,className:"mr-2 text-gray-600"}),"Informa\xe7\xf5es da Cobran\xe7a"]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-gray-600 font-medium",children:"Cl\xednica:"}),(0,We.jsx)("span",{className:"ml-2 text-gray-900",children:n.clinic_name})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-gray-600 font-medium",children:"Valor:"}),(0,We.jsx)("span",{className:"ml-2 text-gray-900 font-semibold",children:(e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e||0))(n.amount)})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-gray-600 font-medium",children:"Status:"}),(0,We.jsx)("span",{className:"ml-2 px-2 py-1 rounded text-xs ".concat("paid"===n.status?"bg-green-100 text-green-800":"overdue"===n.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:"paid"===n.status?"Pago":"overdue"===n.status?"Vencido":"Pendente"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-gray-600 font-medium",children:"Vencimento Atual:"}),(0,We.jsx)("span",{className:"ml-2 text-gray-900 font-semibold",children:m(n.due_date)})]})]})]}),"paid"===n.status&&(0,We.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"text-amber-500 mr-2"}),(0,We.jsx)("span",{className:"text-amber-800 text-sm font-medium",children:"Aten\xe7\xe3o: Esta cobran\xe7a j\xe1 foi paga. Alterar a data pode afetar relat\xf3rios financeiros."})]})}),(0,We.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!i.due_date)return void u("Nova data de vencimento \xe9 obrigat\xf3ria");const t=new Date(i.due_date),a=new Date(n.due_date);if(t.getTime()!==a.getTime()){c(!0),u("");try{await r({billing_id:n.id,old_due_date:n.due_date,new_due_date:i.due_date,reason:i.reason||"Altera\xe7\xe3o solicitada pelo super admin"}),o({due_date:"",reason:""})}catch(d){console.error("Erro ao editar data de vencimento:",d),u("Erro ao salvar altera\xe7\xe3o")}finally{c(!1)}}else u("A nova data deve ser diferente da data atual")},className:"space-y-6",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2"}),"Nova Data de Vencimento *"]}),(0,We.jsx)("input",{type:"date",value:i.due_date,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{due_date:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),(0,We.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Data atual: ",m(n.due_date)]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo da Altera\xe7\xe3o (opcional)"}),(0,We.jsx)("textarea",{value:i.reason,onChange:e=>o((t=>(0,Ie.A)((0,Ie.A)({},t),{},{reason:e.target.value}))),placeholder:"Descreva o motivo da altera\xe7\xe3o da data de vencimento...",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"}),(0,We.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Este motivo ser\xe1 registrado no hist\xf3rico de altera\xe7\xf5es."})]}),i.due_date&&i.due_date!==n.due_date&&(0,We.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,We.jsx)("h5",{className:"font-medium text-blue-900 mb-2",children:"Resumo da Altera\xe7\xe3o"}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-blue-700 font-medium",children:"Data Original:"}),(0,We.jsx)("br",{}),(0,We.jsx)("span",{className:"text-blue-900",children:m(n.due_date)})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"text-blue-700 font-medium",children:"Nova Data:"}),(0,We.jsx)("br",{}),(0,We.jsx)("span",{className:"text-blue-900 font-semibold",children:m(i.due_date)})]})]}),(0,We.jsx)("div",{className:"mt-3 pt-3 border-t border-blue-300",children:(0,We.jsx)("span",{className:"text-blue-700 text-sm",children:new Date(i.due_date)>new Date(n.due_date)?"\ud83d\udcc5 Prazo ser\xe1 estendido":"\u26a1 Prazo ser\xe1 antecipado"})})]}),d&&(0,We.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,We.jsxs)("p",{className:"text-sm text-red-800 flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"mr-2"}),d]})}),(0,We.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,We.jsx)("button",{type:"button",onClick:h,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",disabled:l,children:"Cancelar"}),(0,We.jsxs)("button",{type:"submit",disabled:l||!i.due_date||i.due_date===n.due_date,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 rounded-md transition-colors flex items-center",children:[l&&(0,We.jsx)(Vn,{icon:xo,className:"mr-2 animate-spin"}),l?"Salvando...":"Salvar Altera\xe7\xe3o"]})]})]})]})]})}):null},cp=e=>{let{isOpen:t,onClose:a,onSuccess:n}=e;const[r,i]=(0,s.useState)({discipline:"",area:"",sub_area_id:"",name:"",objective:"",program_slug:"",skill:"",materials:[""],procedure:[{step:"",description:""}],criteria_for_advancement:"",trials:5}),[o,l]=(0,s.useState)({}),[c,d]=(0,s.useState)({}),[u,h]=(0,s.useState)({}),[m,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!0),[x,b]=(0,s.useState)("");(0,s.useEffect)((()=>{t&&(y(),v())}),[t]);const v=()=>{i({discipline:"",area:"",sub_area_id:"",name:"",objective:"",program_slug:"",skill:"",materials:[""],procedure:[{step:"",description:""}],criteria_for_advancement:"",trials:5}),d({}),h({}),b("")},y=async()=>{try{g(!0);const e=await zm();l(e)}catch(x){console.error("Erro ao buscar hierarquia:",x),b("Erro ao carregar disciplinas. Tente novamente.")}finally{g(!1)}},j=(e,t,a)=>{const s=[...r.procedure];s[e][t]=a,i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:s})))};return t?(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:kr,className:"text-green-600 text-xl"}),(0,We.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Criar Programa Global"})]}),(0,We.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,We.jsx)(Vn,{icon:lo,size:"lg"})})]}),(0,We.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r.sub_area_id?r.name.trim()?r.objective.trim()?r.skill.trim()?r.materials.some((e=>!e.trim()))?(b("Todos os materiais devem ser preenchidos."),0):r.procedure.some((e=>!e.step.trim()||!e.description.trim()))?(b("Todos os passos do procedimento devem ser preenchidos."),0):r.criteria_for_advancement.trim()?!(!r.trials||r.trials<1||r.trials>999)||(b("N\xfamero de tentativas deve estar entre 1 e 999."),0):(b("Crit\xe9rio de avan\xe7o \xe9 obrigat\xf3rio."),0):(b("Habilidade \xe9 obrigat\xf3ria."),0):(b("Objetivo \xe9 obrigat\xf3rio."),0):(b("Nome do programa \xe9 obrigat\xf3rio."),0):(b("Por favor, selecione uma sub-\xe1rea."),0)){p(!0),b("");try{const e=r.materials.filter((e=>e.trim())),t=r.procedure.filter((e=>e.step.trim()&&e.description.trim())),s={sub_area_id:r.sub_area_id,name:r.name.trim(),objective:r.objective.trim(),program_slug:r.program_slug.trim()||r.name.trim().toLowerCase().replace(/\s+/g,"-"),skill:r.skill.trim(),materials:e,procedure:t,criteria_for_advancement:r.criteria_for_advancement.trim(),trials:parseInt(r.trials)};await Bm(s),n(),a()}catch(x){var t;console.error("Erro ao criar programa global:",x),409===(null===(t=x.response)||void 0===t?void 0:t.status)?b("J\xe1 existe um programa global com este nome."):b("Erro ao criar programa global. Tente novamente.")}finally{p(!1)}}},className:"p-6 space-y-6",children:[x&&(0,We.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:x}),f?(0,We.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,We.jsx)(Vn,{icon:xo,spin:!0,className:"text-2xl text-blue-600"}),(0,We.jsx)("span",{className:"ml-3 text-gray-600",children:"Carregando hierarquia..."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Kr,className:"mr-2 text-blue-600"}),"Disciplina *"]}),(0,We.jsxs)("select",{value:r.discipline,onChange:e=>{return t=e.target.value,i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{discipline:t,area:"",sub_area_id:""}))),void(t&&o[t]?(d(o[t].areas),h({})):(d({}),h({})));var t},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,We.jsx)("option",{value:"",children:"Selecione uma disciplina"}),Object.keys(o).map((e=>(0,We.jsx)("option",{value:e,children:e},e)))]})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Kr,className:"mr-2 text-blue-600"}),"\xc1rea *"]}),(0,We.jsxs)("select",{value:r.area,onChange:e=>{return t=e.target.value,i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{area:t,sub_area_id:""}))),void(t&&c[t]?h(c[t].sub_areas):h({}));var t},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:!r.discipline,children:[(0,We.jsx)("option",{value:"",children:"Selecione uma \xe1rea"}),Object.keys(c).map((e=>(0,We.jsx)("option",{value:e,children:e},e)))]})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Kr,className:"mr-2 text-blue-600"}),"Sub-\xe1rea *"]}),(0,We.jsxs)("select",{value:Object.keys(u).find((e=>u[e].id===r.sub_area_id))||"",onChange:e=>(e=>{var t;const a=null===(t=u[e])||void 0===t?void 0:t.id;i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{sub_area_id:a})))})(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:!r.area,children:[(0,We.jsx)("option",{value:"",children:"Selecione uma sub-\xe1rea"}),Object.keys(u).map((e=>(0,We.jsx)("option",{value:e,children:e},e)))]})]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:vi,className:"mr-2 text-green-600"}),"Nome do Programa *"]}),(0,We.jsx)("input",{type:"text",value:r.name,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{name:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Identifica\xe7\xe3o de Cores",required:!0})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:ko,className:"mr-2 text-purple-600"}),"Slug do Programa"]}),(0,We.jsx)("input",{type:"text",value:r.program_slug,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{program_slug:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: identificacao-cores (opcional)"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:_r,className:"mr-2 text-red-600"}),"Objetivo *"]}),(0,We.jsx)("textarea",{value:r.objective,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{objective:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Descreva o objetivo do programa...",required:!0})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Oi,className:"mr-2 text-yellow-600"}),"Habilidade *"]}),(0,We.jsx)("input",{type:"text",value:r.skill,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{skill:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: Discrimina\xe7\xe3o visual",required:!0})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:xr,className:"mr-2 text-indigo-600"}),"Materiais *"]}),r.materials.map(((e,t)=>(0,We.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,We.jsx)("input",{type:"text",value:e,onChange:e=>((e,t)=>{const a=[...r.materials];a[e]=t,i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:a})))})(t,e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Material ".concat(t+1),required:!0}),r.materials.length>1&&(0,We.jsx)("button",{type:"button",onClick:()=>(e=>{if(r.materials.length>1){const t=r.materials.filter(((t,a)=>a!==e));i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:t})))}})(t),className:"px-3 py-2 text-red-600 hover:text-red-800",children:(0,We.jsx)(Vn,{icon:lo})})]},t))),(0,We.jsxs)("button",{type:"button",onClick:()=>{i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{materials:[...e.materials,""]})))},className:"flex items-center text-blue-600 hover:text-blue-800",children:[(0,We.jsx)(Vn,{icon:io,className:"mr-1"}),"Adicionar Material"]})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:ir,className:"mr-2 text-orange-600"}),"Procedimento *"]}),r.procedure.map(((e,t)=>(0,We.jsxs)("div",{className:"border border-gray-200 rounded-md p-4 mb-4",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,We.jsxs)("h4",{className:"font-medium text-gray-700",children:["Passo ",t+1]}),r.procedure.length>1&&(0,We.jsx)("button",{type:"button",onClick:()=>(e=>{if(r.procedure.length>1){const t=r.procedure.filter(((t,a)=>a!==e));i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:t})))}})(t),className:"text-red-600 hover:text-red-800",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsx)("input",{type:"text",value:e.step,onChange:e=>j(t,"step",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Nome do passo",required:!0}),(0,We.jsx)("textarea",{value:e.description,onChange:e=>j(t,"description",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:"2",placeholder:"Descri\xe7\xe3o do passo",required:!0})]})]},t))),(0,We.jsxs)("button",{type:"button",onClick:()=>{i((e=>(0,Ie.A)((0,Ie.A)({},e),{},{procedure:[...e.procedure,{step:"",description:""}]})))},className:"flex items-center text-blue-600 hover:text-blue-800",children:[(0,We.jsx)(Vn,{icon:io,className:"mr-1"}),"Adicionar Passo"]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:_r,className:"mr-2 text-green-600"}),"Crit\xe9rio de Avan\xe7o *"]}),(0,We.jsx)("input",{type:"text",value:r.criteria_for_advancement,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{criteria_for_advancement:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ex: 80% de acertos em 3 sess\xf5es consecutivas",required:!0})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"flex items-center text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:ko,className:"mr-2 text-purple-600"}),"N\xfamero de Tentativas *"]}),(0,We.jsx)("input",{type:"number",value:r.trials,onChange:e=>i((t=>(0,Ie.A)((0,Ie.A)({},t),{},{trials:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"999",required:!0})]})]})]}),(0,We.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,We.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",disabled:m,children:"Cancelar"}),(0,We.jsx)("button",{type:"submit",disabled:m||f,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center",children:m?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,spin:!0,className:"mr-2"}),"Criando..."]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:di,className:"mr-2"}),"Criar Programa Global"]})})]})]})]})}):null},dp=()=>{const[e,t]=(0,s.useState)({}),[a,n]=(0,s.useState)(!0),[r,i]=(0,s.useState)(!1),[o,l]=(0,s.useState)({}),[c,d]=(0,s.useState)({}),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)(null),[x,b]=(0,s.useState)(!1),[v,y]=(0,s.useState)(""),[j,N]=(0,s.useState)("");(0,s.useEffect)((()=>{w()}),[]);const w=async()=>{try{n(!0),y("");const e=await qm();t(e)}catch(v){console.error("Erro ao buscar programas globais:",v),y("Erro ao carregar programas globais.")}finally{n(!1)}},_=(e,t,a,s)=>(0,We.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,We.jsxs)("div",{className:"flex items-start justify-between",children:[(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,We.jsx)(Vn,{icon:kr,className:"text-green-600"}),(0,We.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(0,We.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("global_admin"===e.program_type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"global_admin"===e.program_type?"Super Admin":"Global Original"})]}),(0,We.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.objective}),(0,We.jsxs)("div",{className:"text-xs text-gray-500 space-y-1",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("strong",{children:"Habilidade:"})," ",e.skill]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("strong",{children:"Tentativas:"})," ",e.trials]}),e.created_by_name&&(0,We.jsxs)("div",{children:[(0,We.jsx)("strong",{children:"Criado por:"})," ",e.created_by_name]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("strong",{children:"Criado em:"})," ",new Date(e.created_at).toLocaleDateString("pt-BR")]})]})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,We.jsx)("button",{onClick:()=>(async e=>{try{b(!0),h(e);const t=await Hm(e.id);g(t),p(!0)}catch(v){console.error("Erro ao buscar estat\xedsticas:",v),y("Erro ao carregar estat\xedsticas do programa.")}finally{b(!1)}})(e),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-full transition-colors",title:"Ver estat\xedsticas de uso",disabled:x,children:(0,We.jsx)(Vn,{icon:x?xo:li,spin:x})}),(0,We.jsx)("button",{onClick:()=>(async e=>{if(window.confirm('Tem certeza que deseja excluir o programa "'.concat(e.name,'"?\n\nEsta a\xe7\xe3o n\xe3o pode ser desfeita e o programa ser\xe1 removido de todas as cl\xednicas.')))try{await Um(e.id),N("Programa global exclu\xeddo com sucesso!"),w(),setTimeout((()=>N("")),5e3)}catch(v){var t;console.error("Erro ao excluir programa:",v),400===(null===(t=v.response)||void 0===t?void 0:t.status)?y("N\xe3o \xe9 poss\xedvel excluir um programa que est\xe1 sendo usado por cl\xednicas."):y("Erro ao excluir programa global.")}})(e),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-full transition-colors",title:"Excluir programa",children:(0,We.jsx)(Vn,{icon:gi})})]})]})},e.id),S=(e,t,a)=>{const s="".concat(a,"-").concat(e),n=c[s];return(0,We.jsxs)("div",{className:"ml-4",children:[(0,We.jsxs)("button",{onClick:()=>{return e=s,void d((t=>(0,Ie.A)((0,Ie.A)({},t),{},{[e]:!t[e]})));var e},className:"flex items-center space-x-2 text-left w-full py-2 px-3 hover:bg-gray-50 rounded-md transition-colors",children:[(0,We.jsx)(Vn,{icon:n?Qi:mo,className:"text-gray-400 text-sm"}),(0,We.jsx)("h3",{className:"font-medium text-gray-800",children:e}),(0,We.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full ml-auto",children:[Object.values(t).reduce(((e,t)=>e+t.length),0)," programas"]})]}),n&&(0,We.jsx)("div",{className:"mt-3 space-y-4",children:Object.entries(t).map((e=>{let[t,a]=e;return((e,t)=>(0,We.jsxs)("div",{className:"ml-8",children:[(0,We.jsx)("h4",{className:"font-medium text-gray-700 mb-3 text-sm",children:e}),(0,We.jsx)("div",{className:"space-y-3",children:t.map((e=>_(e)))})]},e))(t,a)}))})]},e)},C=(e,t)=>{const a=o[e],s=Object.values(t).reduce(((e,t)=>e+Object.values(t).reduce(((e,t)=>e+t.length),0)),0);return(0,We.jsxs)("div",{className:"border border-gray-200 rounded-lg bg-gray-50",children:[(0,We.jsxs)("button",{onClick:()=>{return t=e,void l((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!e[t]})));var t},className:"flex items-center justify-between w-full p-4 text-left hover:bg-gray-100 rounded-lg transition-colors",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:a?Qi:mo,className:"text-gray-500"}),(0,We.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:e})]}),(0,We.jsxs)("span",{className:"text-sm bg-gray-200 text-gray-700 px-3 py-1 rounded-full",children:[s," programas"]})]}),a&&(0,We.jsx)("div",{className:"px-4 pb-4 space-y-3",children:Object.entries(t).map((t=>{let[a,s]=t;return S(a,s,e)}))})]},e)};if(a)return(0,We.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,We.jsx)(Vn,{icon:xo,spin:!0,className:"text-2xl text-blue-600 mr-3"}),(0,We.jsx)("span",{className:"text-gray-600",children:"Carregando programas globais..."})]});const k=Object.values(e).reduce(((e,t)=>e+Object.values(t).reduce(((e,t)=>e+Object.values(t).reduce(((e,t)=>e+t.length),0)),0)),0);return(0,We.jsxs)("div",{className:"space-y-6",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:kr,className:"text-green-600 text-xl"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Biblioteca Global de Programas"}),(0,We.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Total: ",(0,We.jsxs)("span",{className:"font-medium text-green-600",children:[k," programas"]})]})]})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsxs)("button",{onClick:w,className:"flex items-center px-4 py-2 text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",disabled:a,children:[(0,We.jsx)(Vn,{icon:Yr,className:"mr-2"}),"Atualizar"]}),(0,We.jsxs)("button",{onClick:()=>i(!0),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:[(0,We.jsx)(Vn,{icon:io,className:"mr-2"}),"Criar Programa Global"]})]})]}),v&&(0,We.jsxs)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:[(0,We.jsx)(Vn,{icon:To,className:"mr-2"}),v]}),j&&(0,We.jsxs)("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md",children:[(0,We.jsx)(Vn,{icon:Ur,className:"mr-2"}),j]}),0===Object.keys(e).length?(0,We.jsxs)("div",{className:"text-center py-12",children:[(0,We.jsx)(Vn,{icon:kr,className:"text-4xl text-gray-300 mb-4"}),(0,We.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhum programa global encontrado"}),(0,We.jsx)("p",{className:"text-gray-600 mb-4",children:"Comece criando seu primeiro programa global que ficar\xe1 dispon\xedvel para todas as cl\xednicas."}),(0,We.jsxs)("button",{onClick:()=>i(!0),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors mx-auto",children:[(0,We.jsx)(Vn,{icon:io,className:"mr-2"}),"Criar Programa Global"]})]}):(0,We.jsx)("div",{className:"space-y-4",children:Object.entries(e).map((e=>{let[t,a]=e;return C(t,a)}))}),(0,We.jsx)(cp,{isOpen:r,onClose:()=>i(!1),onSuccess:()=>{N("Programa global criado com sucesso!"),w(),setTimeout((()=>N("")),5e3)}}),m&&f&&(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Estat\xedsticas de Uso"}),(0,We.jsx)("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsx)("h4",{className:"font-medium text-gray-900 mb-4",children:null===u||void 0===u?void 0:u.name}),(0,We.jsxs)("div",{className:"space-y-3",children:[(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Atribui\xe7\xf5es:"}),(0,We.jsx)("span",{className:"font-medium",children:f.assignment_count})]}),(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Pacientes:"}),(0,We.jsx)("span",{className:"font-medium",children:f.patient_count})]}),(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Sess\xf5es:"}),(0,We.jsx)("span",{className:"font-medium",children:f.progress_count})]}),f.first_session&&(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Primeira sess\xe3o:"}),(0,We.jsx)("span",{className:"font-medium",children:new Date(f.first_session).toLocaleDateString("pt-BR")})]}),f.last_session&&(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"\xdaltima sess\xe3o:"}),(0,We.jsx)("span",{className:"font-medium",children:new Date(f.last_session).toLocaleDateString("pt-BR")})]})]}),f.assignment_count>0&&(0,We.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,We.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,We.jsx)(Vn,{icon:To,className:"mr-2"}),"Este programa est\xe1 sendo usado por cl\xednicas e n\xe3o pode ser exclu\xeddo."]})})]}),(0,We.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-200",children:(0,We.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Fechar"})})]})})]})};fd.t1.register(fd.PP,fd.kc,fd.FN,fd.No,fd.hE,fd.m_,fd.s$,fd.dN,fd.Bs,fd.E8);const up=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(parseFloat(e)||0).toFixed(t)},hp=e=>{let{title:t,value:a,icon:s,colorClass:n,interpretation:r,trend:i}=e;const o=r?(e=>{switch(e){case"good":return{bg:"bg-green-100",border:"border-green-200",icon:Ur,color:"text-green-600"};case"attention":return{bg:"bg-yellow-100",border:"border-yellow-200",icon:To,color:"text-yellow-600"};case"critical":return{bg:"bg-red-100",border:"border-red-200",icon:To,color:"text-red-600"};default:return{bg:"bg-gray-100",border:"border-gray-200",icon:_i,color:"text-gray-600"}}})(r):null;return(0,We.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow border ".concat(o?o.border:"border-gray-200"," flex items-start space-x-4 relative transition-all hover:shadow-md"),children:[(0,We.jsx)("div",{className:"text-xl p-3 rounded-full ".concat(n.bg," ").concat(n.text),children:(0,We.jsx)(Vn,{icon:s,className:"fa-fw"})}),(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:t}),(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("p",{className:"text-3xl font-semibold ".concat(n.text),children:a}),i&&(0,We.jsxs)("span",{className:"text-sm font-medium ".concat(i>0?"text-green-500":"text-red-500"),children:[i>0?"\u2197":"\u2198"," ",Math.abs(i),"%"]})]})]}),o&&(0,We.jsx)("div",{className:"absolute top-2 right-2 w-6 h-6 rounded-full ".concat(o.bg," flex items-center justify-center"),children:(0,We.jsx)(Vn,{icon:o.icon,className:"text-xs ".concat(o.color)})})]})},mp=e=>{let{metrics:t,processedRevenueChart:a,processedGrowthChart:s,statusChart:n}=e;return(0,We.jsxs)("div",{className:"space-y-8",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center",children:[(0,We.jsx)(Vn,{icon:ni,className:"mr-3 text-blue-600"}),"M\xe9tricas do Sistema"]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[(0,We.jsx)(hp,{title:"Total de Cl\xednicas",value:t.total_clinics||"0",icon:No,colorClass:{bg:"bg-blue-100",text:"text-blue-600"},interpretation:parseInt(t.total_clinics||0)>20?"good":"attention"}),(0,We.jsx)(hp,{title:"Receita Mensal (MRR)",value:"R$ ".concat(parseFloat(t.monthly_revenue||0).toLocaleString("pt-BR")),icon:Ar,colorClass:{bg:"bg-green-100",text:"text-green-600"},interpretation:"good"}),(0,We.jsx)(hp,{title:"Total de Usu\xe1rios",value:t.total_users||"0",icon:yr,colorClass:{bg:"bg-purple-100",text:"text-purple-600"}}),(0,We.jsx)(hp,{title:"Taxa de Inadimpl\xeancia",value:"".concat(up(t.default_rate,1),"%"),icon:To,colorClass:{bg:"bg-orange-100",text:"text-orange-600"},interpretation:parseFloat(t.default_rate||0)<5?"good":parseFloat(t.default_rate||0)<15?"attention":"critical"})]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,We.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,We.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:uo,className:"mr-2 text-green-600"}),"Evolu\xe7\xe3o da Receita"]}),a?(0,We.jsx)(Sd,{data:a,options:{responsive:!0,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",callbacks:{label:e=>"R$ ".concat(e.parsed.y.toLocaleString("pt-BR"))}}},scales:{y:{beginAtZero:!0,ticks:{callback:e=>"R$ ".concat(e.toLocaleString("pt-BR"))}}}}}):(0,We.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,We.jsx)(Vn,{icon:xo,className:"text-2xl text-gray-400 animate-spin"})})]}),(0,We.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,We.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:ai,className:"mr-2 text-blue-600"}),"Status das Cl\xednicas"]}),n?(0,We.jsx)(kd,{data:n,options:{responsive:!0,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:e=>"".concat(e.label,": ").concat(e.parsed)}}}}}):(0,We.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,We.jsx)(Vn,{icon:xo,className:"text-2xl text-gray-400 animate-spin"})})]})]}),s&&(0,We.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow border border-gray-200",children:[(0,We.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:Lo,className:"mr-2 text-purple-600"}),"Crescimento por M\xeas"]}),(0,We.jsx)(Cd,{data:s,options:{responsive:!0,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0}}}})]})]})},pp=e=>{let{clinics:t,filters:a,setFilters:s,onCreateClinic:n,onEditLimit:r,onSuspend:i,onReactivate:o,onViewDetails:l,onDeleteClinic:c}=e;const d=e=>{switch(e){case"active":return"Ativa";case"suspended":return"Suspensa";case"inactive":return"Inativa";default:return"Desconhecido"}};return(0,We.jsxs)("div",{className:"space-y-6",children:[(0,We.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[(0,We.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-4 lg:mb-0 flex items-center",children:[(0,We.jsx)(Vn,{icon:No,className:"mr-3 text-blue-600"}),"Gest\xe3o de Cl\xednicas"]}),(0,We.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:ti,className:"text-gray-400"}),["active","suspended","inactive"].map((e=>(0,We.jsx)("button",{onClick:()=>(e=>{s((0,Ie.A)((0,Ie.A)({},a),{},{status:e===a.status?"":e}))})(e),className:"px-3 py-1 rounded-full text-xs font-medium ".concat(a.status===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:d(e)},e)))]}),(0,We.jsxs)("div",{className:"relative",children:[(0,We.jsx)(Vn,{icon:Ki,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,We.jsx)("input",{type:"text",placeholder:"Buscar cl\xednicas...",value:a.search,onChange:e=>{return t=e.target.value,void s((0,Ie.A)((0,Ie.A)({},a),{},{search:t}));var t},className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,We.jsxs)("button",{onClick:n,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[(0,We.jsx)(Vn,{icon:io,className:"mr-2"}),"Nova Cl\xednica"]})]})]}),(0,We.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,We.jsx)("div",{className:"overflow-x-auto",children:(0,We.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,We.jsx)("thead",{className:"bg-gray-50",children:(0,We.jsxs)("tr",{children:[(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cl\xednica"}),(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pacientes"}),(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usu\xe1rios"}),(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Administrador"}),(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,We.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e=>{const t=(e=>{switch(e){case"active":return{icon:Ur,color:"text-green-500"};case"suspended":return{icon:To,color:"text-red-500"};default:return{icon:_i,color:"text-gray-500"}}})(e.status);return(0,We.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,We.jsxs)("div",{className:"text-sm text-gray-500",children:["Criada em ",new Date(e.created_at).toLocaleDateString("pt-BR")]})]})}),(0,We.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:t.icon,className:"mr-2 ".concat(t.color)}),(0,We.jsx)("span",{className:"text-sm font-medium",children:d(e.status)})]}),e.suspension_reason&&(0,We.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.suspension_reason})]}),(0,We.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,We.jsxs)("div",{className:"text-sm text-gray-900",children:[e.patients_count||0," / ",e.max_patients]}),(0,We.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:(0,We.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(Math.min(100,(e.patients_count||0)/e.max_patients*100),"%")}})})]}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:(0,We.jsxs)("div",{className:"space-y-1",children:[(0,We.jsxs)("div",{children:[e.therapists_count||0," terapeutas"]}),(0,We.jsxs)("div",{className:"text-gray-500",children:[e.parents_count||0," pais"]})]})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.admin_name}),(0,We.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.admin_username]})]})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)("button",{onClick:()=>r(e),className:"text-blue-600 hover:text-blue-900",title:"Editar limite de pacientes",children:(0,We.jsx)(Vn,{icon:vr})}),"active"===e.status?(0,We.jsx)("button",{onClick:()=>i(e),className:"text-red-600 hover:text-red-900",title:"Suspender cl\xednica",children:(0,We.jsx)(Vn,{icon:Pr})}):(0,We.jsx)("button",{onClick:()=>o(e.id),className:"text-green-600 hover:text-green-900",title:"Reativar cl\xednica",children:(0,We.jsx)(Vn,{icon:Xi})}),(0,We.jsx)("button",{onClick:()=>l(e),className:"text-gray-600 hover:text-gray-900",title:"Ver detalhes",children:(0,We.jsx)(Vn,{icon:li})}),(0,We.jsx)("button",{onClick:()=>{window.confirm('Tem certeza que deseja ELIMINAR permanentemente a cl\xednica "'.concat(e.name,'"?\n\nEsta a\xe7\xe3o ir\xe1:\n- Remover todos os usu\xe1rios da cl\xednica\n- Remover todos os pacientes e dados associados\n- Remover todas as cobran\xe7as\n- Esta a\xe7\xe3o \xc9 IRREVERS\xcdVEL!'))&&c(e.id)},className:"text-gray-600 hover:text-red-600",title:"Eliminar cl\xednica (IRREVERS\xcdVEL)",children:(0,We.jsx)(Vn,{icon:gi})})]})})]},e.id)}))})]})}),0===t.length&&(0,We.jsxs)("div",{className:"text-center py-12",children:[(0,We.jsx)(Vn,{icon:No,className:"text-4xl text-gray-400 mb-4"}),(0,We.jsx)("p",{className:"text-gray-500",children:"Nenhuma cl\xednica encontrada."})]})]})]})},fp=e=>{let{billings:t,metrics:a,filters:s,setFilters:n,onRecordPayment:r,onCreateBilling:i,loadInitialData:o}=e;const l=e=>{switch(e){case"paid":return{bg:"bg-green-100",text:"text-green-800",label:"Pago"};case"pending":return{bg:"bg-yellow-100",text:"text-yellow-800",label:"Pendente"};case"overdue":return{bg:"bg-red-100",text:"text-red-800",label:"Vencida"};default:return{bg:"bg-gray-100",text:"text-gray-800",label:"Desconhecido"}}},c=e=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(parseFloat(e)||0),d=e=>new Date(e).toLocaleDateString("pt-BR"),u=(()=>{const e={suspend_now:[],overdue:[],due_soon:[]};return t.forEach((t=>{const a=new Date,s=new Date(t.due_date),n=Math.ceil((s-a)/864e5);"paid"!==t.status&&(n<-10?e.suspend_now.push(t):n<0?e.overdue.push(t):n<=3&&e.due_soon.push(t))})),e})(),h=u.suspend_now.length>0||u.overdue.length>0||u.due_soon.length>0;return(0,We.jsxs)("div",{className:"space-y-6",children:[h&&(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,We.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"mr-2 text-amber-500"}),"Alertas de Cobran\xe7a"]}),u.suspend_now.length>0&&(0,We.jsxs)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:[(0,We.jsxs)("h4",{className:"font-medium text-red-800 mb-2",children:["\u26a0\ufe0f Suspender Agora (",u.suspend_now.length,")"]}),(0,We.jsx)("p",{className:"text-sm text-red-700 mb-2",children:"Cl\xednicas com mais de 10 dias de atraso. Prazo de suspens\xe3o atingido."}),u.suspend_now.slice(0,3).map((e=>(0,We.jsxs)("div",{className:"text-sm text-red-600",children:["\u2022 ",e.clinic_name," - ",c(e.amount)," - Venceu em ",d(e.due_date)]},e.id))),u.suspend_now.length>3&&(0,We.jsxs)("div",{className:"text-sm text-red-600 mt-1",children:["... e mais ",u.suspend_now.length-3," cl\xednicas"]})]}),u.overdue.length>0&&(0,We.jsxs)("div",{className:"mb-4 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[(0,We.jsxs)("h4",{className:"font-medium text-orange-800 mb-2",children:["\ud83d\udd36 Em Atraso (",u.overdue.length,")"]}),(0,We.jsx)("p",{className:"text-sm text-orange-700 mb-2",children:"Cobran\xe7as vencidas. Monitorar para eventual suspens\xe3o."}),u.overdue.slice(0,3).map((e=>(0,We.jsxs)("div",{className:"text-sm text-orange-600",children:["\u2022 ",e.clinic_name," - ",c(e.amount)," - Venceu em ",d(e.due_date)]},e.id))),u.overdue.length>3&&(0,We.jsxs)("div",{className:"text-sm text-orange-600 mt-1",children:["... e mais ",u.overdue.length-3," cl\xednicas"]})]}),u.due_soon.length>0&&(0,We.jsxs)("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,We.jsxs)("h4",{className:"font-medium text-yellow-800 mb-2",children:["\ud83d\udcc5 Vencem em Breve (",u.due_soon.length,")"]}),(0,We.jsx)("p",{className:"text-sm text-yellow-700 mb-2",children:"Cobran\xe7as que vencem nos pr\xf3ximos 3 dias. Acompanhar de perto."}),u.due_soon.slice(0,3).map((e=>(0,We.jsxs)("div",{className:"text-sm text-yellow-600",children:["\u2022 ",e.clinic_name," - ",c(e.amount)," - Vence em ",d(e.due_date)]},e.id))),u.due_soon.length>3&&(0,We.jsxs)("div",{className:"text-sm text-yellow-600 mt-1",children:["... e mais ",u.due_soon.length-3," cl\xednicas"]})]})]}),(0,We.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6 mb-6",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)("div",{className:"bg-green-100 p-3 rounded-full mr-4",children:(0,We.jsx)(Vn,{icon:yr,className:"text-green-600 text-xl"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:"Modelo de Assinatura ABAplay"}),(0,We.jsxs)("p",{className:"text-gray-600",children:[(0,We.jsx)("span",{className:"font-bold text-green-600",children:"R$ 34,90"})," por slot contratado \u2022 Cobran\xe7a mensal pelos slots assinados (independente do uso)"]}),(0,We.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"\ud83d\udca1 Cl\xednica assina X slots, paga por X slots mesmo se usar menos"})]})]}),(0,We.jsxs)("div",{className:"text-right",children:[(0,We.jsx)("div",{className:"text-sm text-gray-500",children:"Exemplo"}),(0,We.jsx)("div",{className:"text-lg font-bold text-green-600",children:"100 slots = R$ 3.490,00/m\xeas"}),(0,We.jsx)("div",{className:"text-xs text-gray-500",children:"(mesmo usando s\xf3 80 pacientes)"})]})]})}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,We.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:Uo,className:"mr-3 text-green-600"}),"Gest\xe3o Financeira",h&&(0,We.jsxs)("span",{className:"ml-2 px-2 py-1 bg-red-100 text-red-800 text-sm rounded-full",children:[u.suspend_now.length+u.overdue.length+u.due_soon.length," alertas"]})]}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[(0,We.jsxs)("button",{onClick:async()=>{if(window.confirm("Esta a\xe7\xe3o ir\xe1 recalcular todas as cobran\xe7as pendentes para o modelo por slots contratados.\n\nDeseja continuar?"))try{const e=await fetch("/api/super-admin/billing/migrate-to-slot-model",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}}),t=await e.json();t.success&&(alert("Migra\xe7\xe3o conclu\xedda!\n\n".concat(t.data.updated_count," cobran\xe7as atualizadas\nDiferen\xe7a total: R$ ").concat(up(t.data.difference,2),"\nVaria\xe7\xe3o: ").concat(t.data.percentage_change,"%")),o())}catch(e){alert("Erro na migra\xe7\xe3o: "+e.message)}},className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg flex items-center text-sm",children:[(0,We.jsx)(Vn,{icon:vr,className:"mr-1"}),"Migrar Cobran\xe7as"]}),(0,We.jsxs)("button",{onClick:i,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center",children:[(0,We.jsx)(Vn,{icon:io,className:"mr-2"}),"Nova Cobran\xe7a"]})]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8",children:[(0,We.jsx)(hp,{title:"Receita Mensal (MRR)",value:c(a.monthly_revenue||0),icon:Ar,colorClass:{bg:"bg-green-100",text:"text-green-600"},interpretation:"good"}),(0,We.jsx)(hp,{title:"Valores Pendentes",value:c(a.pending_amount||0),icon:ir,colorClass:{bg:"bg-yellow-100",text:"text-yellow-600"}}),(0,We.jsx)(hp,{title:"Valores Vencidos",value:c(a.overdue_amount||0),icon:To,colorClass:{bg:"bg-red-100",text:"text-red-600"},interpretation:0===parseFloat(a.overdue_amount||0)?"good":"critical"}),(0,We.jsx)(hp,{title:"Taxa Inadimpl\xeancia",value:"".concat(up(a.default_rate,1),"%"),icon:ni,colorClass:{bg:"bg-purple-100",text:"text-purple-600"},interpretation:parseFloat(a.default_rate||0)<5?"good":parseFloat(a.default_rate||0)<15?"attention":"critical"})]})]}),(0,We.jsx)("div",{className:"flex items-center space-x-4",children:(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:ti,className:"text-gray-400"}),["pending","overdue","paid"].map((e=>(0,We.jsx)("button",{onClick:()=>(e=>{n((0,Ie.A)((0,Ie.A)({},s),{},{status:e===s.status?"":e}))})(e),className:"px-3 py-1 rounded-full text-xs font-medium ".concat(s.status===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:l(e).label},e)))]})}),(0,We.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,We.jsx)("div",{className:"overflow-x-auto",children:(0,We.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,We.jsx)("thead",{className:"bg-gray-50",children:(0,We.jsxs)("tr",{children:[(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cl\xednica"}),(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vencimento"}),(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pacientes"}),(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Real"}),(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,We.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((e=>{const t=l(e.status),a=new Date(e.due_date)<new Date&&"pending"===e.status;return(0,We.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.clinic_name}),(0,We.jsxs)("div",{className:"text-sm text-gray-500",children:[e.current_patients," pacientes / ",e.max_patients," limite"]})]})}),(0,We.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,We.jsx)("div",{className:"text-sm font-medium text-gray-900",children:c(34.9*e.max_patients)}),(0,We.jsxs)("div",{className:"text-xs text-blue-600 font-medium",children:[e.max_patients," slots \xd7 R$ 34,90"]}),(e.current_patients||0)<e.max_patients&&(0,We.jsxs)("div",{className:"text-xs text-gray-500",children:["Usando ",e.current_patients||0," de ",e.max_patients," slots"]})]}),(0,We.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,We.jsx)("div",{className:"text-sm ".concat(a?"text-red-600 font-medium":"text-gray-900"),children:d(e.due_date)}),e.payment_date&&(0,We.jsxs)("div",{className:"text-xs text-green-600",children:["Pago em ",d(e.payment_date)]})]}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(t.bg," ").concat(t.text),children:t.label})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("div",{className:"text-lg font-bold text-blue-600",children:e.current_patients||0}),(0,We.jsxs)("div",{className:"text-xs text-gray-500",children:["de ",e.max_patients," m\xe1x"]}),(0,We.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-1.5 mt-1",children:(0,We.jsx)("div",{className:"bg-blue-600 h-1.5 rounded-full",style:{width:"".concat(Math.min(100,(e.current_patients||0)/e.max_patients*100),"%")}})})]})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("div",{className:"text-sm font-bold text-purple-600",children:c(34.9*e.max_patients)}),(0,We.jsxs)("div",{className:"text-xs text-gray-500",children:[e.max_patients," \xd7 R$ 34,90"]}),e.max_patients-(e.current_patients||0)>0&&(0,We.jsxs)("div",{className:"text-xs text-amber-600 font-medium mt-1",children:["+",e.max_patients-(e.current_patients||0)," slots livres"]})]})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:["paid"!==e.status&&(0,We.jsx)("button",{onClick:()=>r(e),className:"text-green-600 hover:text-green-900",title:"Registrar pagamento",children:(0,We.jsx)(Vn,{icon:Wi})}),(0,We.jsx)("button",{className:"text-blue-600 hover:text-blue-900",title:"Ver hist\xf3rico",children:(0,We.jsx)(Vn,{icon:_o})})]})})]},e.id)}))})]})}),0===t.length&&(0,We.jsxs)("div",{className:"text-center py-12",children:[(0,We.jsx)(Vn,{icon:Uo,className:"text-4xl text-gray-400 mb-4"}),(0,We.jsx)("p",{className:"text-gray-500",children:"Nenhuma cobran\xe7a encontrada."})]})]})]})},gp=e=>{let{billings:t,onViewBilling:a,onRecordPayment:s,onEditDueDate:n,onCreateBilling:r}=e;return(0,We.jsxs)("div",{className:"space-y-6",children:[(0,We.jsxs)("div",{className:"flex justify-between items-center",children:[(0,We.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-3 text-blue-600"}),"Calend\xe1rio de Vencimentos"]}),(0,We.jsxs)("button",{onClick:r,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[(0,We.jsx)(Vn,{icon:io,className:"mr-2"}),"Nova Cobran\xe7a"]})]}),(0,We.jsx)(ip,{billings:t,onViewBilling:a,onRecordPayment:s,onEditDueDate:n})]})},xp=()=>{const[e,t]=(0,s.useState)(!0),[a,n]=(0,s.useState)(""),[r,i]=(0,s.useState)("executive"),[o,l]=(0,s.useState)({executiveDashboard:null,customerHealth:null,cohortAnalysis:null,churnPrediction:null,expansionOpportunities:null,executiveReport:null});(0,s.useEffect)((()=>{c()}),[]);const c=async()=>{try{t(!0),n("");const[e,a,s,r,i,o]=await Promise.all([Gm().catch((e=>({data:null,error:e}))),Ym().catch((e=>({data:null,error:e}))),$m().catch((e=>({data:null,error:e}))),Xm().catch((e=>({data:null,error:e}))),Jm().catch((e=>({data:null,error:e}))),Km().catch((e=>({data:null,error:e})))]);l({executiveDashboard:e.data,customerHealth:a.data,cohortAnalysis:s.data,churnPrediction:r.data,expansionOpportunities:i.data,executiveReport:o.data})}catch(a){console.error("Erro ao carregar dados empresariais:",a),n("Erro ao carregar dados empresariais. Alguns recursos podem n\xe3o estar dispon\xedveis.")}finally{t(!1)}};return e?(0,We.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,We.jsx)(Vn,{icon:xo,className:"text-4xl text-blue-500 animate-spin mr-3"}),(0,We.jsx)("span",{className:"text-lg",children:"Carregando Business Intelligence..."})]}):(0,We.jsxs)("div",{className:"space-y-8",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("h2",{className:"text-3xl font-bold mb-2 flex items-center",children:[(0,We.jsx)(Vn,{icon:Io,className:"mr-3"}),"Business Intelligence & Analytics"]}),(0,We.jsx)("p",{className:"text-blue-100 text-lg",children:"Insights avan\xe7ados para decis\xf5es estrat\xe9gicas baseadas em dados"})]}),(0,We.jsxs)("div",{className:"text-right",children:[(0,We.jsx)("div",{className:"text-blue-100 text-sm",children:"\xdaltima atualiza\xe7\xe3o"}),(0,We.jsx)("div",{className:"text-white font-semibold",children:(new Date).toLocaleString("pt-BR")})]})]})}),a&&(0,We.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"text-yellow-600 mr-2"}),(0,We.jsx)("p",{className:"text-yellow-800",children:a})]})}),(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow border border-gray-200",children:[(0,We.jsx)("div",{className:"border-b border-gray-200",children:(0,We.jsx)("nav",{className:"flex space-x-8 px-6",children:[{key:"executive",label:"Dashboard Executivo",icon:Hr,color:"blue"},{key:"health",label:"Customer Health",icon:Or,color:"green"},{key:"churn",label:"An\xe1lise de Churn",icon:_r,color:"red"},{key:"growth",label:"Oportunidades",icon:co,color:"purple"},{key:"cohort",label:"An\xe1lise de Coortes",icon:yo,color:"orange"}].map((e=>(0,We.jsxs)("button",{onClick:()=>i(e.key),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center ".concat(r===e.key?"border-".concat(e.color,"-500 text-").concat(e.color,"-600"):"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,We.jsx)(Vn,{icon:e.icon,className:"mr-2"}),e.label]},e.key)))})}),(0,We.jsxs)("div",{className:"p-6",children:["executive"===r&&(0,We.jsx)(bp,{data:o.executiveDashboard}),"health"===r&&(0,We.jsx)(vp,{data:o.customerHealth}),"churn"===r&&(0,We.jsx)(yp,{data:o.churnPrediction}),"growth"===r&&(0,We.jsx)(jp,{data:o.expansionOpportunities}),"cohort"===r&&(0,We.jsx)(Np,{data:o.cohortAnalysis})]})]})]})},bp=e=>{var t,a,s,n;let{data:r}=e;if(!r)return(0,We.jsxs)("div",{className:"text-center py-12",children:[(0,We.jsx)(Vn,{icon:hr,className:"text-4xl text-gray-400 mb-4"}),(0,We.jsx)("p",{className:"text-gray-500",children:"Dados do dashboard executivo n\xe3o dispon\xedveis."}),(0,We.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Verifique se o modelo EnterpriseMetricsModel est\xe1 configurado corretamente."})]});const{financial_kpis:i,insights:o}=r;return(0,We.jsxs)("div",{className:"space-y-8",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"KPIs Executivos"}),(0,We.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:"C-Level Dashboard"})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[(0,We.jsx)(hp,{title:"MRR (Monthly Recurring Revenue)",value:"R$ ".concat(((null===i||void 0===i?void 0:i.current_mrr)||0).toLocaleString("pt-BR")),icon:Ar,colorClass:{bg:"bg-green-100",text:"text-green-600"},trend:null===i||void 0===i?void 0:i.mrr_growth_rate,interpretation:(null===i||void 0===i?void 0:i.mrr_growth_rate)>0?"good":"attention"}),(0,We.jsx)(hp,{title:"ARR (Annual Recurring Revenue)",value:"R$ ".concat(((null===i||void 0===i?void 0:i.arr)||0).toLocaleString("pt-BR")),icon:ni,colorClass:{bg:"bg-blue-100",text:"text-blue-600"}}),(0,We.jsx)(hp,{title:"LTV (Lifetime Value)",value:"R$ ".concat(((null===i||void 0===i?void 0:i.ltv)||0).toLocaleString("pt-BR")),icon:Vi,colorClass:{bg:"bg-purple-100",text:"text-purple-600"}}),(0,We.jsx)(hp,{title:"Churn Rate",value:"".concat(up(null===i||void 0===i?void 0:i.churn_rate,1),"%"),icon:To,colorClass:{bg:"bg-red-100",text:"text-red-600"},interpretation:(null===i||void 0===i?void 0:i.churn_rate)<5?"good":"critical"})]}),o&&(0,We.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6",children:[(0,We.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:hr,className:"mr-2 text-yellow-500"}),"Insights Estrat\xe9gicos"]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,We.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,We.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Sa\xfade do Neg\xf3cio"}),(0,We.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Tend\xeancia MRR:"}),(0,We.jsx)("span",{className:"font-medium ".concat("growing"===o.mrr_trend?"text-green-600":"text-red-600"),children:"growing"===o.mrr_trend?"Crescendo":"Declining"})]}),(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Receita por Cliente:"}),(0,We.jsxs)("span",{className:"font-medium",children:["R$ ",up(o.avg_revenue_per_user,2)]})]}),(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Proje\xe7\xe3o ARR:"}),(0,We.jsxs)("span",{className:"font-medium",children:["R$ ",(o.arr_projection||0).toLocaleString("pt-BR")]})]})]})]}),(0,We.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,We.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Segmenta\xe7\xe3o de Clientes"}),(0,We.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Micro:"}),(0,We.jsx)("span",{className:"font-medium",children:(null===(t=o.customer_segments)||void 0===t?void 0:t.micro)||0})]}),(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Pequeno:"}),(0,We.jsx)("span",{className:"font-medium",children:(null===(a=o.customer_segments)||void 0===a?void 0:a.small)||0})]}),(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"M\xe9dio:"}),(0,We.jsx)("span",{className:"font-medium",children:(null===(s=o.customer_segments)||void 0===s?void 0:s.medium)||0})]}),(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Grande:"}),(0,We.jsx)("span",{className:"font-medium",children:(null===(n=o.customer_segments)||void 0===n?void 0:n.large)||0})]})]})]}),(0,We.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,We.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Riscos e Oportunidades"}),(0,We.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Clientes em Risco:"}),(0,We.jsx)("span",{className:"font-medium text-red-600",children:o.total_customers_at_risk||0})]}),(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Receita em Risco:"}),(0,We.jsxs)("span",{className:"font-medium text-red-600",children:["R$ ",up(o.revenue_at_risk,2)]})]}),(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Oportunidades Expans\xe3o:"}),(0,We.jsx)("span",{className:"font-medium text-green-600",children:o.expansion_opportunities||0})]})]})]})]})]})]})},vp=e=>{let{data:t}=e;if(!t)return(0,We.jsxs)("div",{className:"text-center py-12",children:[(0,We.jsx)(Vn,{icon:Or,className:"text-4xl text-gray-400 mb-4"}),(0,We.jsx)("p",{className:"text-gray-500",children:"Dados de Customer Health n\xe3o dispon\xedveis."})]});const{summary:a}=t;return(0,We.jsxs)("div",{className:"space-y-6",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Customer Health Score"}),(0,We.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"An\xe1lise Comportamental"})]}),a&&(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,We.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:Ur,className:"text-green-500 mr-2"}),(0,We.jsx)("span",{className:"text-green-800 font-medium",children:"Saud\xe1veis"})]}),(0,We.jsx)("div",{className:"text-2xl font-bold text-green-600 mt-2",children:a.healthy_customers||0}),(0,We.jsx)("div",{className:"text-sm text-green-600",children:"Health Score \u2265 80"})]}),(0,We.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"text-yellow-500 mr-2"}),(0,We.jsx)("span",{className:"text-yellow-800 font-medium",children:"Em Risco"})]}),(0,We.jsx)("div",{className:"text-2xl font-bold text-yellow-600 mt-2",children:a.at_risk_customers||0}),(0,We.jsx)("div",{className:"text-sm text-yellow-600",children:"Health Score < 60"})]}),(0,We.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:yr,className:"text-blue-500 mr-2"}),(0,We.jsx)("span",{className:"text-blue-800 font-medium",children:"Total Clientes"})]}),(0,We.jsx)("div",{className:"text-2xl font-bold text-blue-600 mt-2",children:a.total_customers||0}),(0,We.jsxs)("div",{className:"text-sm text-blue-600",children:["M\xe9dia: ",up(a.avg_health_score,1)]})]}),(0,We.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:Ar,className:"text-purple-500 mr-2"}),(0,We.jsx)("span",{className:"text-purple-800 font-medium",children:"Receita Total"})]}),(0,We.jsxs)("div",{className:"text-2xl font-bold text-purple-600 mt-2",children:["R$ ",(a.total_revenue||0).toLocaleString("pt-BR")]}),(0,We.jsxs)("div",{className:"text-sm text-purple-600",children:["Idade m\xe9dia: ",Math.round(a.avg_customer_age||0)," meses"]})]})]}),(0,We.jsx)("p",{className:"text-gray-600",children:"O Customer Health Score \xe9 calculado com base em m\xfaltiplos fatores incluindo utiliza\xe7\xe3o da plataforma, hist\xf3rico de pagamentos, engajamento e crescimento do neg\xf3cio do cliente."})]})},yp=e=>{let{data:t}=e;return t?(0,We.jsxs)("div",{className:"space-y-8",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"An\xe1lise Preditiva de Churn"}),(0,We.jsx)("span",{className:"px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm font-medium",children:"Preven\xe7\xe3o de Churn"})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,We.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex items-center mb-4",children:[(0,We.jsx)("div",{className:"bg-red-100 rounded-full p-3 mr-4",children:(0,We.jsx)(Vn,{icon:To,className:"text-red-600 text-xl"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h4",{className:"text-lg font-semibold text-red-900",children:"Alto Risco"}),(0,We.jsx)("p",{className:"text-red-600 text-sm",children:"A\xe7\xe3o imediata necess\xe1ria"})]})]}),(0,We.jsx)("div",{className:"text-3xl font-bold text-red-700 mb-2",children:t.high_risk_count||0}),(0,We.jsx)("p",{className:"text-red-600 text-sm",children:"cl\xednicas em risco cr\xedtico"})]}),(0,We.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex items-center mb-4",children:[(0,We.jsx)("div",{className:"bg-yellow-100 rounded-full p-3 mr-4",children:(0,We.jsx)(Vn,{icon:pr,className:"text-yellow-600 text-xl"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h4",{className:"text-lg font-semibold text-yellow-900",children:"M\xe9dio Risco"}),(0,We.jsx)("p",{className:"text-yellow-600 text-sm",children:"Monitoramento ativo"})]})]}),(0,We.jsx)("div",{className:"text-3xl font-bold text-yellow-700 mb-2",children:t.medium_risk_count||0}),(0,We.jsx)("p",{className:"text-yellow-600 text-sm",children:"cl\xednicas para acompanhar"})]}),(0,We.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex items-center mb-4",children:[(0,We.jsx)("div",{className:"bg-green-100 rounded-full p-3 mr-4",children:(0,We.jsx)(Vn,{icon:Ur,className:"text-green-600 text-xl"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h4",{className:"text-lg font-semibold text-green-900",children:"Baixo Risco"}),(0,We.jsx)("p",{className:"text-green-600 text-sm",children:"Clientes saud\xe1veis"})]})]}),(0,We.jsx)("div",{className:"text-3xl font-bold text-green-700 mb-2",children:t.low_risk_count||0}),(0,We.jsx)("p",{className:"text-green-600 text-sm",children:"cl\xednicas est\xe1veis"})]})]}),(0,We.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,We.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Principais Fatores de Churn"}),(0,We.jsxs)("div",{className:"space-y-3",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[(0,We.jsx)("span",{className:"text-gray-700",children:"Inadimpl\xeancia prolongada"}),(0,We.jsx)("span",{className:"bg-red-100 text-red-800 px-2 py-1 rounded text-sm",children:"Alto impacto"})]}),(0,We.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[(0,We.jsx)("span",{className:"text-gray-700",children:"Baixa utiliza\xe7\xe3o da plataforma"}),(0,We.jsx)("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-sm",children:"M\xe9dio impacto"})]}),(0,We.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[(0,We.jsx)("span",{className:"text-gray-700",children:"Aus\xeancia de crescimento"}),(0,We.jsx)("span",{className:"bg-orange-100 text-orange-800 px-2 py-1 rounded text-sm",children:"M\xe9dio impacto"})]})]})]}),(0,We.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,We.jsxs)("h4",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:hr,className:"mr-2"}),"Recomenda\xe7\xf5es de A\xe7\xe3o"]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,We.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Contato Proativo"}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Entre em contato com cl\xednicas de alto risco para entender dificuldades"})]}),(0,We.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,We.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Ofertas Personalizadas"}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Crie planos especiais para clientes em risco m\xe9dio"})]}),(0,We.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,We.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Treinamento & Suporte"}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Ofere\xe7a sess\xf5es de treinamento para melhorar a ado\xe7\xe3o"})]}),(0,We.jsxs)("div",{className:"bg-white p-4 rounded border",children:[(0,We.jsx)("h5",{className:"font-medium text-gray-900 mb-2",children:"Monitoramento Cont\xednuo"}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Acompanhe m\xe9tricas de uso e engagement regularmente"})]})]})]})]}):(0,We.jsxs)("div",{className:"text-center py-12",children:[(0,We.jsx)(Vn,{icon:_r,className:"text-4xl text-gray-400 mb-4"}),(0,We.jsx)("p",{className:"text-gray-500",children:"An\xe1lise Preditiva de Churn"}),(0,We.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Dados n\xe3o dispon\xedveis"})]})},jp=e=>{let{data:t}=e;return t?(0,We.jsxs)("div",{className:"space-y-8",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"Oportunidades de Crescimento"}),(0,We.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:"Expans\xe3o de Receita"})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[(0,We.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,We.jsx)("div",{className:"bg-blue-100 rounded-full p-3",children:(0,We.jsx)(Vn,{icon:uo,className:"text-blue-600 text-xl"})}),(0,We.jsx)("span",{className:"text-xs bg-blue-200 text-blue-800 px-2 py-1 rounded-full",children:"Expans\xe3o"})]}),(0,We.jsxs)("div",{className:"text-2xl font-bold text-blue-700 mb-1",children:["R$ ",up((t.expansion_potential||0)/1e3,1),"K"]}),(0,We.jsx)("p",{className:"text-blue-600 text-sm",children:"Receita potencial de expans\xe3o"})]}),(0,We.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,We.jsx)("div",{className:"bg-green-100 rounded-full p-3",children:(0,We.jsx)(Vn,{icon:Lo,className:"text-green-600 text-xl"})}),(0,We.jsx)("span",{className:"text-xs bg-green-200 text-green-800 px-2 py-1 rounded-full",children:"Pronto"})]}),(0,We.jsx)("div",{className:"text-2xl font-bold text-green-700 mb-1",children:t.ready_for_expansion||0}),(0,We.jsx)("p",{className:"text-green-600 text-sm",children:"Clientes prontos para expans\xe3o"})]})]}),(0,We.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,We.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:Ar,className:"mr-2 text-green-600"}),"Principais Candidatos \xe0 Expans\xe3o"]}),(0,We.jsx)("div",{className:"space-y-4",children:(0,We.jsxs)("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("h5",{className:"font-medium text-gray-900",children:"Cl\xednicas com Alta Utiliza\xe7\xe3o"}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Utilizando > 85% dos slots contratados"})]}),(0,We.jsxs)("div",{className:"text-right",children:[(0,We.jsx)("div",{className:"text-2xl font-bold text-green-600",children:t.high_utilization_clinics||0}),(0,We.jsx)("p",{className:"text-sm text-green-600",children:"cl\xednicas"})]})]})})]}),(0,We.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-6",children:[(0,We.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:co,className:"mr-2 text-blue-600"}),"Estrat\xe9gias de Expans\xe3o Recomendadas"]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,We.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,We.jsx)("h5",{className:"font-medium text-gray-900 mb-3",children:"Outreach Proativo"}),(0,We.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,We.jsx)("li",{children:"\u2022 Contatar cl\xednicas com alta utiliza\xe7\xe3o"}),(0,We.jsx)("li",{children:"\u2022 Oferecer consulta gratuita de expans\xe3o"}),(0,We.jsx)("li",{children:"\u2022 Demonstrar ROI de slots adicionais"})]})]}),(0,We.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:[(0,We.jsx)("h5",{className:"font-medium text-gray-900 mb-3",children:"Incentivos de Upgrades"}),(0,We.jsxs)("ul",{className:"text-sm text-gray-600 space-y-1",children:[(0,We.jsx)("li",{children:"\u2022 Desconto de 15% no primeiro m\xeas"}),(0,We.jsx)("li",{children:"\u2022 Per\xedodo de teste de 30 dias"}),(0,We.jsx)("li",{children:"\u2022 Suporte premium inclu\xeddo"})]})]})]})]})]}):(0,We.jsxs)("div",{className:"text-center py-12",children:[(0,We.jsx)(Vn,{icon:co,className:"text-4xl text-gray-400 mb-4"}),(0,We.jsx)("p",{className:"text-gray-500",children:"Oportunidades de Crescimento"}),(0,We.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Dados n\xe3o dispon\xedveis"})]})},Np=e=>{let{data:t}=e;return t?(0,We.jsxs)("div",{className:"space-y-8",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"An\xe1lise de Coortes"}),(0,We.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium",children:"Reten\xe7\xe3o de Clientes"})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,We.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,We.jsx)("h4",{className:"text-lg font-semibold text-blue-900",children:"Taxa de Reten\xe7\xe3o Global"}),(0,We.jsx)(Vn,{icon:yr,className:"text-blue-600 text-xl"})]}),(0,We.jsxs)("div",{className:"text-3xl font-bold text-blue-700 mb-2",children:[up(100*(t.global_retention_rate||0),1),"%"]}),(0,We.jsx)("p",{className:"text-blue-600 text-sm",children:"Clientes ativos ap\xf3s 12 meses"})]}),(0,We.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,We.jsx)("h4",{className:"text-lg font-semibold text-green-900",children:"Melhor Coorte"}),(0,We.jsx)(Vn,{icon:go,className:"text-green-600 text-xl"})]}),(0,We.jsx)("div",{className:"text-3xl font-bold text-green-700 mb-2",children:t.best_cohort_period||"Jun/24"}),(0,We.jsxs)("p",{className:"text-green-600 text-sm",children:[up(100*(t.best_cohort_retention||0),1),"% de reten\xe7\xe3o"]})]}),(0,We.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-6",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,We.jsx)("h4",{className:"text-lg font-semibold text-orange-900",children:"Tend\xeancia"}),(0,We.jsx)(Vn,{icon:ni,className:"text-orange-600 text-xl"})]}),(0,We.jsxs)("div",{className:"text-3xl font-bold text-orange-700 mb-2",children:["+",up(100*(t.retention_trend||0),1),"%"]}),(0,We.jsx)("p",{className:"text-orange-600 text-sm",children:"Melhoria \xfaltimos 3 meses"})]})]}),(0,We.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,We.jsxs)("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:dr,className:"mr-2 text-purple-600"}),"Matriz de Reten\xe7\xe3o por Coorte"]}),(0,We.jsx)("div",{className:"overflow-x-auto",children:(0,We.jsxs)("table",{className:"w-full text-sm",children:[(0,We.jsx)("thead",{children:(0,We.jsxs)("tr",{className:"bg-gray-50",children:[(0,We.jsx)("th",{className:"text-left p-3 text-gray-600",children:"Per\xedodo"}),(0,We.jsx)("th",{className:"text-center p-3 text-gray-600",children:"Novos Clientes"}),(0,We.jsx)("th",{className:"text-center p-3 text-gray-600",children:"M\xeas 1"}),(0,We.jsx)("th",{className:"text-center p-3 text-gray-600",children:"M\xeas 3"}),(0,We.jsx)("th",{className:"text-center p-3 text-gray-600",children:"M\xeas 6"}),(0,We.jsx)("th",{className:"text-center p-3 text-gray-600",children:"M\xeas 12"})]})}),(0,We.jsxs)("tbody",{className:"space-y-2",children:[(0,We.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,We.jsx)("td",{className:"p-3 font-medium",children:"Jan/24"}),(0,We.jsx)("td",{className:"text-center p-3",children:"15"}),(0,We.jsx)("td",{className:"text-center p-3",children:(0,We.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:"93%"})}),(0,We.jsx)("td",{className:"text-center p-3",children:(0,We.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:"87%"})}),(0,We.jsx)("td",{className:"text-center p-3",children:(0,We.jsx)("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:"73%"})}),(0,We.jsx)("td",{className:"text-center p-3",children:(0,We.jsx)("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:"67%"})})]}),(0,We.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,We.jsx)("td",{className:"p-3 font-medium",children:"Jun/24"}),(0,We.jsx)("td",{className:"text-center p-3",children:"23"}),(0,We.jsx)("td",{className:"text-center p-3",children:(0,We.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:"96%"})}),(0,We.jsx)("td",{className:"text-center p-3",children:(0,We.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:"91%"})}),(0,We.jsx)("td",{className:"text-center p-3",children:(0,We.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:"87%"})}),(0,We.jsx)("td",{className:"text-center p-3",children:(0,We.jsx)("span",{className:"text-gray-400",children:"-"})})]}),(0,We.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,We.jsx)("td",{className:"p-3 font-medium",children:"Set/24"}),(0,We.jsx)("td",{className:"text-center p-3",children:"18"}),(0,We.jsx)("td",{className:"text-center p-3",children:(0,We.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-xs",children:"89%"})}),(0,We.jsx)("td",{className:"text-center p-3",children:(0,We.jsx)("span",{className:"bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs",children:"78%"})}),(0,We.jsx)("td",{className:"text-center p-3",children:(0,We.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,We.jsx)("td",{className:"text-center p-3",children:(0,We.jsx)("span",{className:"text-gray-400",children:"-"})})]})]})]})})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,We.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,We.jsxs)("h4",{className:"text-lg font-semibold text-blue-900 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:hr,className:"mr-2"}),"Insights de Reten\xe7\xe3o"]}),(0,We.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)("div",{className:"bg-green-100 rounded-full p-1 mr-3 mt-1",children:(0,We.jsx)(Vn,{icon:Ur,className:"text-green-600 text-xs"})}),(0,We.jsx)("p",{className:"text-blue-800",children:"Clientes do primeiro semestre apresentam maior taxa de reten\xe7\xe3o a longo prazo"})]}),(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)("div",{className:"bg-yellow-100 rounded-full p-1 mr-3 mt-1",children:(0,We.jsx)(Vn,{icon:To,className:"text-yellow-600 text-xs"})}),(0,We.jsx)("p",{className:"text-blue-800",children:"Per\xedodo cr\xedtico de churn ocorre entre o 3\xba e 6\xba m\xeas"})]}),(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)("div",{className:"bg-blue-100 rounded-full p-1 mr-3 mt-1",children:(0,We.jsx)(Vn,{icon:_i,className:"text-blue-600 text-xs"})}),(0,We.jsx)("p",{className:"text-blue-800",children:"Coortes recentes mostram tend\xeancia de melhora na reten\xe7\xe3o inicial"})]})]})]}),(0,We.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:[(0,We.jsxs)("h4",{className:"text-lg font-semibold text-green-900 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:_r,className:"mr-2"}),"A\xe7\xf5es Recomendadas"]}),(0,We.jsxs)("div",{className:"space-y-3",children:[(0,We.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,We.jsx)("h5",{className:"font-medium text-gray-900 mb-1",children:"Programa de Onboarding"}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Fortalecer processo de integra\xe7\xe3o nos primeiros 90 dias"})]}),(0,We.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,We.jsx)("h5",{className:"font-medium text-gray-900 mb-1",children:"Check-ins Proativos"}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Agendar reuni\xf5es no 3\xba e 6\xba m\xeas para identificar problemas"})]}),(0,We.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,We.jsx)("h5",{className:"font-medium text-gray-900 mb-1",children:"Programa de Fidelidade"}),(0,We.jsx)("p",{className:"text-sm text-gray-600",children:"Criar incentivos para clientes que completam 12 meses"})]})]})]})]})]}):(0,We.jsxs)("div",{className:"text-center py-12",children:[(0,We.jsx)(Vn,{icon:yo,className:"text-4xl text-gray-400 mb-4"}),(0,We.jsx)("p",{className:"text-gray-500",children:"An\xe1lise de Coortes"}),(0,We.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Dados n\xe3o dispon\xedveis"})]})},wp=()=>{const{user:e,logout:t}=Ye(),[a,n]=(0,s.useState)("dashboard"),[r,i]=(0,s.useState)(!0),[o,l]=(0,s.useState)(""),[c,d]=(0,s.useState)({}),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)([]),[x,b]=(0,s.useState)([]),[v,y]=(0,s.useState)({status:"",search:""}),[j,N]=(0,s.useState)({status:"",clinic_id:""}),[w,_]=(0,s.useState)(!1),[S,C]=(0,s.useState)(!1),[k,A]=(0,s.useState)(!1),[P,E]=(0,s.useState)(!1),[L,D]=(0,s.useState)(!1),[O,T]=(0,s.useState)(!1),[M,R]=(0,s.useState)(!1),[I,F]=(0,s.useState)(null),[z,B]=(0,s.useState)(null);(0,s.useEffect)((()=>{e&&"super_admin"===e.role||t()}),[e,t]);const q=(0,s.useCallback)((async()=>{try{i(!0);const[e,t,a,s]=await Promise.all([_m(),Cm(),Mm(),Sm()]);d(e.data||{}),h(t.data||[]),g(a.data||[]),b(s.data||[])}catch(o){console.error("Erro ao carregar dados:",o),l("Erro ao carregar dados do sistema.")}finally{i(!1)}}),[]);(0,s.useEffect)((()=>{q()}),[q]);const U=(0,s.useCallback)((async()=>{try{const e=await Cm(v);h(e.data||[])}catch(o){console.error("Erro ao carregar cl\xednicas:",o)}}),[v]),H=(0,s.useCallback)((async()=>{try{const e=await Dm(j);p(e.data||[])}catch(o){console.error("Erro ao carregar cobran\xe7as:",o)}}),[j]);(0,s.useEffect)((()=>{"clinics"===a&&U()}),[a,U]),(0,s.useEffect)((()=>{"financial"===a&&H()}),[a,H]);const W=(0,s.useMemo)((()=>f.length?{labels:f.map((e=>e.month_label)),datasets:[{label:"Receita Mensal (R$)",data:f.map((e=>parseFloat(e.revenue||0))),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"rgb(59, 130, 246)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:6,pointHoverRadius:8}]}:null),[f]),V=(0,s.useMemo)((()=>x.length?{labels:x.map((e=>e.month_label)),datasets:[{label:"Novas Cl\xednicas",data:x.map((e=>parseInt(e.new_clinics||0))),backgroundColor:"rgba(34, 197, 94, 0.6)",borderColor:"rgb(34, 197, 94)",borderWidth:1},{label:"Novos Usu\xe1rios",data:x.map((e=>parseInt(e.new_users||0))),backgroundColor:"rgba(59, 130, 246, 0.6)",borderColor:"rgb(59, 130, 246)",borderWidth:1}]}:null),[x]),G=(0,s.useMemo)((()=>{const e=parseInt(c.active_clinics||0),t=parseInt(c.suspended_clinics||0);return{labels:["Ativas","Suspensas","Inativas"],datasets:[{data:[e,t,parseInt(c.total_clinics||0)-e-t],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.8)","rgba(156, 163, 175, 0.8)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(156, 163, 175)"],borderWidth:2}]}}),[c]);return r?(0,We.jsxs)("div",{className:"flex justify-center items-center min-h-screen",children:[(0,We.jsx)(Vn,{icon:xo,className:"text-4xl text-blue-500 animate-spin"}),(0,We.jsx)("span",{className:"ml-3 text-lg",children:"Carregando painel super admin..."})]}):o?(0,We.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,We.jsxs)("div",{className:"text-red-500 text-center",children:[(0,We.jsx)(Vn,{icon:To,className:"text-4xl mb-4"}),(0,We.jsx)("p",{className:"text-lg",children:o})]})}):(0,We.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,We.jsx)("div",{className:"bg-white shadow border-b border-gray-200",children:(0,We.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,We.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:Hr,className:"text-2xl text-blue-600 mr-3"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Super Admin"}),(0,We.jsx)("p",{className:"text-sm text-gray-500",children:"Painel de controle do sistema ABAplay"})]})]}),(0,We.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,We.jsxs)("div",{className:"text-sm text-gray-500",children:["Bem-vindo, ",(0,We.jsx)("span",{className:"font-semibold text-gray-700",children:null===e||void 0===e?void 0:e.name})]}),(0,We.jsx)("button",{onClick:t,className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Sair"})]})]})})}),(0,We.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,We.jsx)("div",{className:"border-b border-gray-200 bg-white",children:(0,We.jsx)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[{key:"dashboard",label:"Dashboard",icon:$i},{key:"enterprise",label:"Business Intelligence",icon:Io},{key:"clinics",label:"Cl\xednicas",icon:No},{key:"programs",label:"Programas Globais",icon:kr},{key:"financial",label:"Financeiro",icon:Uo},{key:"calendar",label:"Calend\xe1rio",icon:er}].map((e=>(0,We.jsxs)("button",{onClick:()=>n(e.key),className:"".concat(a===e.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm flex items-center"),children:[(0,We.jsx)(Vn,{icon:e.icon,className:"mr-2"}),e.label]},e.key)))})})}),(0,We.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:["dashboard"===a&&(0,We.jsx)(mp,{metrics:c,processedRevenueChart:W,processedGrowthChart:V,statusChart:G}),"enterprise"===a&&(0,We.jsx)(xp,{}),"clinics"===a&&(0,We.jsx)(pp,{clinics:u,filters:v,setFilters:y,onCreateClinic:()=>_(!0),onEditLimit:e=>{F(e),C(!0)},onSuspend:e=>{F(e),A(!0)},onReactivate:async e=>{try{await Pm(e),U()}catch(o){console.error("Erro ao reativar cl\xednica:",o)}},onViewDetails:e=>{F(e),D(!0)},onDeleteClinic:async e=>{try{u.find((t=>t.id===e));const o=await Rm(e);if(o.success){var t,a,s,n,r,i,l,c,d,h;const e=o.data.total_eliminated||0;alert('\u2705 Cl\xednica "'.concat(o.data.clinic_name,'" eliminada com sucesso!\n\n')+"Total de registros eliminados: ".concat(e,"\n\n")+"Detalhes:\n"+"\u2022 Usu\xe1rios: ".concat((null===(t=o.data.eliminated_records)||void 0===t?void 0:t.users)||0,"\n")+"\u2022 Pacientes: ".concat((null===(a=o.data.eliminated_records)||void 0===a?void 0:a.patients)||0,"\n")+"\u2022 Cobran\xe7as: ".concat((null===(s=o.data.eliminated_records)||void 0===s?void 0:s.billings)||0,"\n")+"\u2022 Discuss\xf5es: ".concat((null===(n=o.data.eliminated_records)||void 0===n?void 0:n.case_discussions)||0,"\n")+"\u2022 Chats: ".concat((null===(r=o.data.eliminated_records)||void 0===r?void 0:r.parent_chats)||0,"\n")+"\u2022 Sess\xf5es: ".concat((null===(i=o.data.eliminated_records)||void 0===i?void 0:i.program_sessions)||0,"\n")+"\u2022 Progressos: ".concat((null===(l=o.data.eliminated_records)||void 0===l?void 0:l.progress_records)||0,"\n")+"\u2022 Programas: ".concat((null===(c=o.data.eliminated_records)||void 0===c?void 0:c.program_assignments)||0,"\n")+"\u2022 Atribui\xe7\xf5es: ".concat((null===(d=o.data.eliminated_records)||void 0===d?void 0:d.therapist_assignments)||0,"\n")+"\u2022 Notifica\xe7\xf5es: ".concat((null===(h=o.data.eliminated_records)||void 0===h?void 0:h.notifications)||0)),U(),q()}}catch(o){var m,p,f,g;const t=(null===(m=o.response)||void 0===m||null===(p=m.data)||void 0===p||null===(f=p.errors)||void 0===f||null===(g=f[0])||void 0===g?void 0:g.msg)||"Erro interno do servidor.";alert("\u274c Erro ao eliminar cl\xednica:\n\n".concat(t)),console.error("Erro ao eliminar cl\xednica:",o)}}}),"programs"===a&&(0,We.jsx)(dp,{}),"financial"===a&&(0,We.jsx)(fp,{billings:m,metrics:c,filters:j,setFilters:N,onRecordPayment:e=>{B(e),E(!0)},onCreateBilling:()=>T(!0),loadInitialData:q}),"calendar"===a&&(0,We.jsx)(gp,{billings:m,onViewBilling:e=>{B(e)},onRecordPayment:e=>{B(e),E(!0)},onEditDueDate:e=>{B(e),R(!0)},onCreateBilling:()=>T(!0)})]}),(0,We.jsx)(Qm,{isOpen:w,onClose:()=>_(!1),onSubmit:async e=>{try{await km(e),_(!1),U(),q()}catch(o){console.error("Erro ao criar cl\xednica:",o)}}}),(0,We.jsx)(Zm,{isOpen:S,onClose:()=>{C(!1),F(null)},clinic:I,onSubmit:e=>(async(e,t)=>{try{await Em(e,t),C(!1),F(null),U()}catch(o){console.error("Erro ao atualizar limite:",o)}})(I.id,e),onResetPassword:async e=>{try{await Lm(e),alert("Senha resetada! O administrador dever\xe1 cadastrar nova senha no pr\xf3ximo login.")}catch(o){throw console.error("Erro ao resetar senha:",o),new Error("Erro ao resetar senha do administrador da cl\xednica")}}}),(0,We.jsx)(ep,{isOpen:k,onClose:()=>{A(!1),F(null)},clinic:I,onSubmit:e=>(async(e,t)=>{try{await Am(e,t),A(!1),F(null),U()}catch(o){console.error("Erro ao suspender cl\xednica:",o)}})(I.id,e)}),(0,We.jsx)(tp,{isOpen:P,onClose:()=>{E(!1),B(null)},billing:z,onSubmit:async e=>{try{await Tm(z.id,e),E(!1),B(null),H(),q()}catch(o){console.error("Erro ao registrar pagamento:",o)}}}),(0,We.jsx)(op,{isOpen:O,onClose:()=>T(!1),clinics:u,onSubmit:async e=>{try{await Om(e),T(!1),H(),q()}catch(o){console.error("Erro ao criar cobran\xe7a:",o)}}}),(0,We.jsx)(lp,{isOpen:M,onClose:()=>{R(!1),B(null)},billing:z,onSubmit:async e=>{try{await Im(z.id,e),R(!1),B(null),H(),q()}catch(o){console.error("Erro ao editar data de vencimento:",o)}}}),L&&I&&(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Detalhes da Cl\xednica: ",I.name]}),(0,We.jsx)("button",{onClick:()=>{D(!1),F(null)},className:"text-gray-400 hover:text-gray-600",children:(0,We.jsx)(Vn,{icon:lo})})]}),(0,We.jsxs)("div",{className:"p-6 space-y-4",children:[(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),(0,We.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("active"===I.status?"bg-green-100 text-green-800":"suspended"===I.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:"active"===I.status?"Ativa":"suspended"===I.status?"Suspensa":"Inativa"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pacientes Atuais"}),(0,We.jsxs)("p",{className:"text-sm text-gray-900",children:[I.current_patients||0," / ",I.max_patients]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Terapeutas"}),(0,We.jsx)("p",{className:"text-sm text-gray-900",children:I.therapists_count||0})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Pais"}),(0,We.jsx)("p",{className:"text-sm text-gray-900",children:I.parents_count||0})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Data de Cria\xe7\xe3o"}),(0,We.jsx)("p",{className:"text-sm text-gray-900",children:new Date(I.created_at).toLocaleDateString("pt-BR")})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Administrador"}),(0,We.jsx)("p",{className:"text-sm text-gray-900",children:I.admin_name||"N/A"})]})]}),I.suspended_at&&(0,We.jsxs)("div",{className:"mt-4 p-4 bg-red-50 rounded-lg",children:[(0,We.jsx)("h4",{className:"font-medium text-red-800",children:"Informa\xe7\xf5es da Suspens\xe3o"}),(0,We.jsxs)("p",{className:"text-sm text-red-700 mt-1",children:[(0,We.jsx)("strong",{children:"Data:"})," ",new Date(I.suspended_at).toLocaleDateString("pt-BR")]}),I.suspension_reason&&(0,We.jsxs)("p",{className:"text-sm text-red-700 mt-1",children:[(0,We.jsx)("strong",{children:"Motivo:"})," ",I.suspension_reason]})]})]})]})})]})},_p=$e.A.create({baseURL:qe.H});_p.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e)));const Sp=async e=>{try{const t=(0,Ie.A)((0,Ie.A)({},e),{},{scheduled_date:Ip(e.scheduled_date),patient_id:parseInt(e.patient_id),therapist_id:parseInt(e.therapist_id),discipline_id:e.discipline_id?parseInt(e.discipline_id):null});return(await _p.post("/admin/scheduling/appointments",t)).data}catch(r){var t,a,s,n;throw console.error("[SCHEDULING-API] Erro ao criar agendamento"),new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"Erro ao criar agendamento")}},Cp=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;Object.entries(e).forEach((e=>{let[a,s]=e;void 0!==s&&null!==s&&""!==s&&t.append(a,s)}));return(await _p.get("/admin/scheduling/appointments?".concat(t.toString()))).data}catch(r){var t,a,s,n;throw console.error("[SCHEDULING-API] Erro ao buscar agendamentos"),new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"Erro ao buscar agendamentos")}},kp=async(e,t)=>{try{const a=(0,Ie.A)({},t);t.scheduled_date&&(a.scheduled_date=Ip(t.scheduled_date));return(await _p.put("/admin/scheduling/appointments/".concat(e),a)).data}catch(i){var a,s,n,r;throw console.error("[SCHEDULING-API] Erro ao atualizar agendamento ID ".concat(e)),new Error((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"Erro ao atualizar agendamento")}},Ap=async(e,t)=>{try{return(await _p.delete("/admin/scheduling/appointments/".concat(e),{data:t})).data}catch(i){var a,s,n,r;throw console.error("[SCHEDULING-API] Erro ao cancelar agendamento ID ".concat(e)),new Error((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"Erro ao cancelar agendamento")}},Pp=async e=>{try{return(await _p.delete("/admin/scheduling/appointments/".concat(e,"/permanent"))).data}catch(r){var t,a,s,n;throw console.error("[SCHEDULING-API] Erro ao remover agendamento ID ".concat(e)),new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"Erro ao remover agendamento")}},Ep=async(e,t)=>{try{const a=new URLSearchParams;e&&a.append("start_date",e),t&&a.append("end_date",t);return(await _p.get("/admin/scheduling/statistics?".concat(a.toString()))).data}catch(i){var a,s,n,r;throw console.error("[SCHEDULING-API] Erro ao buscar estat\xedsticas da cl\xednica"),new Error((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"Erro ao buscar estat\xedsticas")}},Lp=async(e,t)=>{try{return(await _p.post("/scheduling/justify-absence/".concat(e),t)).data}catch(i){var a,s,n,r;throw console.error("[SCHEDULING-API] Erro ao justificar aus\xeancia ID ".concat(e)),new Error((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"Erro ao justificar aus\xeancia")}},Dp=e=>e?new Date(e).toLocaleDateString("pt-BR"):"-",Op=e=>e?e.slice(0,5):"-",Tp=e=>({scheduled:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",missed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-800"}[e]||"bg-gray-100 text-gray-600"),Mp=function(e){return{scheduled:"Agendado",completed:"Realizado",missed:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)?"N\xe3o Realizado / Justificado":"N\xe3o Realizado",cancelled:"Cancelado"}[e]||"Desconhecido"},Rp=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;try{if(!e||!t)return{isValid:!1,message:"Data e hor\xe1rio s\xe3o obrigat\xf3rios"};if(!/^\d{4}-\d{2}-\d{2}$/.test(e))return{isValid:!1,message:"Data deve estar no formato YYYY-MM-DD"};if(!/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(t))return{isValid:!1,message:"Hor\xe1rio deve estar no formato HH:MM"};const[s,n,r]=e.split("-").map(Number),[i,o]=t.split(":").map(Number),l=new Date(s,n-1,r,i,o,0);if(isNaN(l.getTime()))return{isValid:!1,message:"Data ou hor\xe1rio inv\xe1lidos"};const c=new Date;if(l<new Date(c.getTime()-60*a*1e3))return{isValid:!1,message:"N\xe3o \xe9 poss\xedvel agendar para datas passadas"};const d=new Date;return d.setFullYear(d.getFullYear()+1),l>d?{isValid:!1,message:"N\xe3o \xe9 poss\xedvel agendar com mais de 1 ano de anteced\xeancia"}:{isValid:!0,message:"Data e hor\xe1rio v\xe1lidos"}}catch(s){return{isValid:!1,message:"Erro ao validar data/hor\xe1rio: "+s.message}}},Ip=e=>{if(!e||null===e||void 0===e)return"";const t=String(e).trim();try{if(/^\d{4}-\d{2}-\d{2}$/.test(t))return t;if(/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(t)){const[e,a,s]=t.split("/");return"".concat(s,"-").concat(a.padStart(2,"0"),"-").concat(e.padStart(2,"0"))}if(/^\d{1,2}-\d{1,2}-\d{4}$/.test(t)){const[e,a,s]=t.split("-");return"".concat(s,"-").concat(a.padStart(2,"0"),"-").concat(e.padStart(2,"0"))}const e=new Date(t);if(!isNaN(e.getTime())){const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(s)}return""}catch(a){return console.error("[NORMALIZE-DATE] Erro ao normalizar:",t,a),""}},Fp=e=>{const t=[];if(e.patient_id||t.push("Paciente \xe9 obrigat\xf3rio"),e.therapist_id||t.push("Terapeuta \xe9 obrigat\xf3rio"),e.scheduled_date||t.push("Data do agendamento \xe9 obrigat\xf3ria"),e.scheduled_time||t.push("Hor\xe1rio do agendamento \xe9 obrigat\xf3rio"),e.scheduled_date&&e.scheduled_time){const a=Ip(e.scheduled_date);if(a){const s=Rp(a,e.scheduled_time);s.isValid||t.push(s.message)}else t.push("Formato de data inv\xe1lido")}return e.duration_minutes&&(e.duration_minutes<15||e.duration_minutes>240)&&t.push("Dura\xe7\xe3o deve estar entre 15 e 240 minutos"),t},zp=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;e.start_date&&t.append("start_date",e.start_date),e.end_date&&t.append("end_date",e.end_date),e.limit&&t.append("limit",e.limit),e.offset&&t.append("offset",e.offset);return(await _p.get("/admin/scheduling/orphan-sessions?".concat(t.toString()))).data}catch(r){var t,a,s,n;throw console.error("[SCHEDULING-API] Erro ao buscar sess\xf5es \xf3rf\xe3s"),new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"Erro ao buscar sess\xf5es \xf3rf\xe3s")}},Bp=async e=>{try{return(await _p.post("/admin/scheduling/intelligent-detection",e)).data}catch(r){var t,a,s,n;throw console.error("[SCHEDULING-API] Erro na detec\xe7\xe3o inteligente"),new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"Erro na detec\xe7\xe3o inteligente")}},qp=async(e,t)=>{try{return(await _p.post("/admin/scheduling/create-retroactive/".concat(e),t)).data}catch(i){var a,s,n,r;throw console.error("[SCHEDULING-API] Erro ao criar agendamento retroativo"),new Error((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"Erro ao criar agendamento retroativo")}},Up=async()=>{try{return(await _p.get("/scheduling/pending-actions")).data}catch(n){var e,t,a,s;throw console.error("[SCHEDULING-API] Erro ao buscar a\xe7\xf5es pendentes"),new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.errors)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.msg)||"Erro ao buscar a\xe7\xf5es pendentes")}},Hp=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return(await _p.post("/scheduling/retroactive/batch",{session_ids:e,common_data:t})).data}catch(i){var a,s,n,r;throw console.error("[SCHEDULING-API] Erro ao criar retroativos em lote"),new Error((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"Erro ao criar retroativos em lote")}},Wp=async(e,t)=>{try{return(await _p.post("/admin/scheduling/notify-therapist",{therapist_id:e,appointment_id:t})).data}catch(i){var a,s,n,r;throw console.error("[SCHEDULING-API] Erro ao notificar terapeuta"),new Error((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"Erro ao enviar notifica\xe7\xe3o")}},Vp=async(e,t)=>{try{return(await _p.delete("/admin/scheduling/recurring-series/".concat(e),{data:{appointment_id:t}})).data}catch(i){var a,s,n,r;throw console.error("[SCHEDULING-API] Erro ao excluir s\xe9rie recorrente"),new Error((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"Erro ao excluir s\xe9rie recorrente")}},Gp=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{return(await _p.get("/admin/scheduling/recurring-series/".concat(e,"/next"),{params:{limit:t}})).data}catch(i){var a,s,n,r;throw console.error("[SCHEDULING-API] Erro ao buscar pr\xf3ximas ocorr\xeancias"),new Error((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"Erro ao buscar pr\xf3ximas ocorr\xeancias")}},Yp=async e=>{try{return(await _p.post("/admin/scheduling/validate-conflicts",e)).data}catch(r){var t,a,s,n;throw console.error("[SCHEDULING-API] Erro ao validar conflitos"),new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"Erro ao validar conflitos de hor\xe1rio")}},$p=async(e,t)=>{try{return(await _p.post("/admin/scheduling/validate-assignment",{patient_id:e,therapist_id:t})).data}catch(i){var a,s,n,r;throw console.error("[SCHEDULING-API] Erro ao validar assignment"),new Error((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"Erro ao validar assignment")}},Xp=$e.A.create({baseURL:qe.H});Xp.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e))),Xp.interceptors.response.use((e=>e.data),(e=>{var t,a,s,n,r,i,o;throw console.error("[RECURRING-API] Erro na requisi\xe7\xe3o:",{url:null===(t=e.config)||void 0===t?void 0:t.url,method:null===(a=e.config)||void 0===a?void 0:a.method,status:null===(s=e.response)||void 0===s?void 0:s.status,message:(null===(n=e.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||e.message}),401===(null===(i=e.response)||void 0===i?void 0:i.status)&&(localStorage.removeItem("token"),window.location.href="/login"),(null===(o=e.response)||void 0===o?void 0:o.data)||e}));const Jp={createTemplate:async e=>await Xp.post("/admin/recurring-appointments",e),async getTemplates(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new URLSearchParams;Object.entries(e).forEach((e=>{let[a,s]=e;void 0!==s&&""!==s&&t.append(a,s)}));const a=t.toString(),s=a?"/admin/recurring-appointments?".concat(a):"/admin/recurring-appointments";return await Xp.get(s)},getTemplateById:async e=>await Xp.get("/admin/recurring-appointments/".concat(e)),updateTemplate:async(e,t)=>await Xp.put("/admin/recurring-appointments/".concat(e),t),async deactivateTemplate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Desativado pelo usu\xe1rio";return await Xp.delete("/admin/recurring-appointments/".concat(e),{data:{reason:t}})},async generateMoreAppointments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return await Xp.post("/admin/recurring-appointments/".concat(e,"/generate"),{weeks_ahead:t})},async pauseTemplate(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return await Xp.post("/admin/recurring-appointments/".concat(e,"/pause"),{reason:t,pause_until:a})},resumeTemplate:async e=>await Xp.post("/admin/recurring-appointments/".concat(e,"/resume")),async getTemplateAppointments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=new URLSearchParams;Object.entries(t).forEach((e=>{let[t,s]=e;void 0!==s&&""!==s&&a.append(t,s)}));const s=a.toString(),n=s?"/admin/recurring-appointments/".concat(e,"/appointments?").concat(s):"/admin/recurring-appointments/".concat(e,"/appointments");return await Xp.get(n)},checkConflicts:async e=>await Xp.post("/admin/recurring-appointments/check-conflicts",e),generateAllPending:async()=>await Xp.post("/admin/recurring-appointments/generate-all"),generatePreview(e){const{start_date:t,end_date:a,recurrence_type:s,day_of_week:n,scheduled_time:r,generate_weeks_ahead:i=4}=e;if(!t||!r||void 0===n)return[];const o=[],l=new Date(t),c=a?new Date(a):null,d=Math.min(i,12);let u=new Date(l);let h=parseInt(n)-u.getDay();h<0&&(h+=7),u.setDate(u.getDate()+h);for(let m=0;m<d&&o.length<20&&!(c&&u>c);m++)switch(u>=l&&o.push({date:u.toISOString().split("T")[0],formatted_date:u.toLocaleDateString("pt-BR"),day_name:u.toLocaleDateString("pt-BR",{weekday:"long"}),time:r,week_number:m+1}),s){case"weekly":default:u.setDate(u.getDate()+7);break;case"biweekly":u.setDate(u.getDate()+14);break;case"monthly":u.setDate(u.getDate()+28)}return o},validateTemplate(e){const t=[];if(e.patient_id||t.push("Paciente \xe9 obrigat\xf3rio"),e.therapist_id||t.push("Terapeuta \xe9 obrigat\xf3rio"),e.recurrence_type||t.push("Tipo de recorr\xeancia \xe9 obrigat\xf3rio"),void 0!==e.day_of_week&&""!==e.day_of_week||t.push("Dia da semana \xe9 obrigat\xf3rio"),e.scheduled_time||t.push("Hor\xe1rio \xe9 obrigat\xf3rio"),e.start_date||t.push("Data de in\xedcio \xe9 obrigat\xf3ria"),e.start_date){const a=new Date(e.start_date),s=new Date;s.setHours(0,0,0,0),a<s&&t.push("Data de in\xedcio n\xe3o pode ser no passado")}if(e.start_date&&e.end_date){const a=new Date(e.start_date);new Date(e.end_date)<=a&&t.push("Data de fim deve ser posterior \xe0 data de in\xedcio")}return e.scheduled_time&&!/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/.test(e.scheduled_time)&&t.push("Hor\xe1rio deve estar no formato HH:MM"),t},formatRecurrenceDescription(e){const t=["Domingo","Segunda-feira","Ter\xe7a-feira","Quarta-feira","Quinta-feira","Sexta-feira","S\xe1bado"][e.day_of_week],a={weekly:"Toda semana",biweekly:"A cada 2 semanas",monthly:"Todo m\xeas"}[e.recurrence_type]||e.recurrence_type;let s="".concat(a," \xe0s ").concat(e.scheduled_time," (").concat(t,")");return e.discipline_name?s+=" - ".concat(e.discipline_name):s+=" - Sess\xe3o geral",e.duration_minutes&&60!==e.duration_minutes&&(s+=" - ".concat(e.duration_minutes," min")),s}},Kp=e=>{if(!e)return"";try{let t;if("string"===typeof e&&/^\d{4}-\d{2}-\d{2}$/.test(e)&&(t=new Date(e+"T00:00:00"),!isNaN(t.getTime())))return e;if("string"===typeof e&&/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(e)){const[a,s,n]=e.split("/");t=new Date(parseInt(n),parseInt(s)-1,parseInt(a))}else if("string"===typeof e&&/^\d{1,2}-\d{1,2}-\d{4}$/.test(e)){const[a,s,n]=e.split("-");t=new Date(parseInt(n),parseInt(s)-1,parseInt(a))}else t=new Date(e);if(isNaN(t.getTime()))return console.warn("[DATE-UTILS] Data inv\xe1lida fornecida:",e),"";const a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"".concat(a,"-").concat(s,"-").concat(n)}catch(t){return console.warn("[DATE-UTILS] Erro ao processar data:",e,t),""}},Qp=e=>{var t;let{isOpen:a,onClose:n,onSubmit:r,editingAppointment:i=null,isLoading:o=!1}=e;const{token:l}=Ye(),[c,d]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)(!1),[x,b]=(0,s.useState)(!1),[v,y]=(0,s.useState)(!1),[j,N]=(0,s.useState)({patient_id:"",therapist_id:"",discipline_id:"",scheduled_date:"",scheduled_time:"",duration_minutes:60,notes:""}),[w,_]=(0,s.useState)(!1),[S,C]=(0,s.useState)({type:"weekly",endDate:"",generateWeeks:4,skipHolidays:!1,notes:""}),[k,A]=(0,s.useState)([]),[P,E]=(0,s.useState)(!1),[L,D]=(0,s.useState)(!1),[O,T]=(0,s.useState)([]),[M,R]=(0,s.useState)([]),[I,F]=(0,s.useState)(null),[z,B]=(0,s.useState)(!1),[q,U]=(0,s.useState)(null),[H,W]=(0,s.useState)(!1),[V,G]=(0,s.useState)(null);(0,s.useEffect)((()=>{a&&l&&(Y(),$(),X())}),[a,l]);const Y=async()=>{try{g(!0);const e=await(async e=>{try{return(await $e.A.get("".concat(Xe,"/admin/therapists"),Je(e))).data.therapists||[]}catch(r){var t,a,s,n;throw new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"N\xe3o foi poss\xedvel carregar a lista de terapeutas.")}})(l);d(e)}catch(e){console.error("Erro ao carregar terapeutas"),R(["Erro ao carregar lista de terapeutas"])}finally{g(!1)}},$=async()=>{try{b(!0);const e=await Ze(l);h(e)}catch(e){console.error("Erro ao carregar pacientes"),R(["Erro ao carregar lista de pacientes"])}finally{b(!1)}},X=async()=>{try{y(!0);const e=await(0,st.uc)();let t=[];e&&"object"===typeof e&&(t=Object.keys(e).map((t=>({id:e[t].id,name:t})))),p(t)}catch(e){console.error("Erro ao carregar disciplinas"),R(["Erro ao carregar lista de disciplinas"]),p([])}finally{y(!1)}};(0,s.useEffect)((()=>{a&&(i?(N({patient_id:i.patient_id||"",therapist_id:i.therapist_id||"",discipline_id:i.discipline_id||"",scheduled_date:Kp(i.scheduled_date)||"",scheduled_time:i.scheduled_time||"",duration_minutes:i.duration_minutes||60,notes:i.notes||""}),_(!1)):(N({patient_id:"",therapist_id:"",discipline_id:"",scheduled_date:"",scheduled_time:"",duration_minutes:60,notes:""}),_(!1),C({type:"weekly",endDate:"",generateWeeks:4,skipHolidays:!1,notes:""}),A([]),E(!1),T([])),R([]),F(null))}),[a,i]);const J=e=>{const{name:t,value:a}=e.target;let s=a;"scheduled_date"===t&&a&&(s=Kp(a));const n=(0,Ie.A)((0,Ie.A)({},j),{},{[t]:s});if(N(n),M.length>0&&R([]),("scheduled_date"===t||"scheduled_time"===t)&&n.scheduled_date&&n.scheduled_time){const e=Rp(n.scheduled_date,n.scheduled_time);e.isValid?F(null):F(e.message)}else"scheduled_date"!==t&&"scheduled_time"!==t||F(null)},K=e=>{const{name:t,value:a,type:s,checked:n}=e.target,r="checkbox"===s?n:a;C((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:r}))),j.scheduled_date&&j.scheduled_time&&j.patient_id&&j.therapist_id&&Q((0,Ie.A)((0,Ie.A)({},S),{},{[t]:r}))},Q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;if(!j.scheduled_date||!j.scheduled_time||!w)return void A([]);const t=new Date(j.scheduled_date).getDay(),a={start_date:j.scheduled_date,end_date:e.endDate||null,recurrence_type:e.type,day_of_week:t,scheduled_time:j.scheduled_time,generate_weeks_ahead:e.generateWeeks},s=Jp.generatePreview(a);A(s)};(0,s.useEffect)((()=>{w&&j.scheduled_date&&j.scheduled_time&&Q()}),[j.scheduled_date,j.scheduled_time,w]);(0,s.useEffect)((()=>{j.patient_id&&j.therapist_id&&(async()=>{if(j.patient_id&&j.therapist_id)try{W(!0),G(null);const e=await $p(parseInt(j.patient_id),parseInt(j.therapist_id));e.isValid?(G({type:"success",message:"\u2713 Assignment v\xe1lido: ".concat(e.assignment.therapist_name," atende ").concat(e.assignment.patient_name)}),setTimeout((()=>{G(null)}),3e3)):G({type:"error",message:e.message||"Este terapeuta n\xe3o est\xe1 atribu\xeddo a este paciente."})}catch(e){G({type:"warning",message:"N\xe3o foi poss\xedvel verificar assignment. Prossiga com cautela."})}finally{W(!1)}else G(null)})()}),[j.patient_id,j.therapist_id]),(0,s.useEffect)((()=>{j.patient_id&&j.therapist_id&&j.scheduled_date&&j.scheduled_time&&(async()=>{if(j.patient_id&&j.therapist_id&&j.scheduled_date&&j.scheduled_time)try{B(!0),U(null);const e={patient_id:parseInt(j.patient_id),therapist_id:parseInt(j.therapist_id),scheduled_date:j.scheduled_date,scheduled_time:j.scheduled_time,duration_minutes:parseInt(j.duration_minutes)||60,exclude_id:(null===i||void 0===i?void 0:i.id)||null},t=await Yp(e);t.hasConflict?U({type:"error",message:t.message||"Conflito de hor\xe1rio detectado. J\xe1 existe um agendamento neste hor\xe1rio."}):(U({type:"success",message:"Hor\xe1rio dispon\xedvel! Nenhum conflito detectado."}),setTimeout((()=>{U(null)}),3e3))}catch(e){U({type:"warning",message:"N\xe3o foi poss\xedvel verificar conflitos. Prossiga com cautela."})}finally{B(!1)}else U(null)})()}),[j.patient_id,j.therapist_id,j.scheduled_date,j.scheduled_time,j.duration_minutes]);return a?(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-3 text-blue-600"}),i?"Editar Agendamento":"Novo Agendamento"]}),(0,We.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:o,children:(0,We.jsx)(Vn,{icon:lo,className:"w-6 h-6"})})]}),(0,We.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),V&&"error"===V.type)return void R(["Corrija o problema de assignment antes de continuar. Este terapeuta n\xe3o est\xe1 atribu\xeddo a este paciente."]);if(q&&"error"===q.type)return void R(["H\xe1 um conflito de hor\xe1rio. Escolha outro hor\xe1rio ou resolva o conflito antes de continuar."]);const t=Fp(j);if(t.length>0)R(t);else if(w&&!i){const e=new Date(j.scheduled_date).getDay(),t={patient_id:parseInt(j.patient_id),therapist_id:parseInt(j.therapist_id),discipline_id:j.discipline_id?parseInt(j.discipline_id):null,recurrence_type:S.type,day_of_week:e,scheduled_time:j.scheduled_time,duration_minutes:parseInt(j.duration_minutes),start_date:Kp(j.scheduled_date),end_date:S.endDate?Kp(S.endDate):null,generate_weeks_ahead:parseInt(S.generateWeeks),skip_holidays:Boolean(S.skipHolidays),notes:S.notes||j.notes||null},n=Jp.validateTemplate(t);if(n.length>0)return void R(n);try{const e=await Jp.createTemplate(t);r({type:"recurring",template:e.template,generated_appointments:e.generated_appointments,conflicts:e.conflicts})}catch(s){var a;R((null===(a=s.errors)||void 0===a?void 0:a.map((e=>e.msg)))||["Erro ao criar agendamento recorrente"])}}else{const e=(0,Ie.A)((0,Ie.A)({},j),{},{patient_id:parseInt(j.patient_id),therapist_id:parseInt(j.therapist_id),discipline_id:j.discipline_id?parseInt(j.discipline_id):null,duration_minutes:parseInt(j.duration_minutes),scheduled_date:Kp(j.scheduled_date)});r(e)}},className:"p-6",children:[M.length>0&&(0,We.jsxs)("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md",children:[(0,We.jsx)("h4",{className:"text-sm font-medium text-red-800 mb-2",children:"Corrigir os seguintes erros:"}),(0,We.jsx)("ul",{className:"text-sm text-red-700 space-y-1",children:M.map(((e,t)=>(0,We.jsxs)("li",{children:["\u2022 ",e]},t)))})]}),(0,We.jsxs)("div",{className:"space-y-6 mb-6",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Sr,className:"mr-2 text-gray-400"}),"Paciente *"]}),(0,We.jsxs)("select",{name:"patient_id",value:j.patient_id,onChange:J,required:!0,disabled:o||x,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,We.jsx)("option",{value:"",children:x?"Carregando pacientes...":"Selecione um paciente"}),u.map((e=>(0,We.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Xn,className:"mr-2 text-gray-400"}),"Terapeuta *"]}),(0,We.jsxs)("select",{name:"therapist_id",value:j.therapist_id,onChange:J,required:!0,disabled:o||f,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,We.jsx)("option",{value:"",children:f?"Carregando terapeutas...":"Selecione um terapeuta"}),c.map((e=>(0,We.jsx)("option",{value:e.id,children:e.full_name},e.id)))]})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:qo,className:"mr-2 text-gray-400"}),"\xc1rea de Interven\xe7\xe3o ",(0,We.jsx)("span",{className:"text-gray-500 text-sm",children:"(opcional)"})]}),(0,We.jsxs)("select",{name:"discipline_id",value:j.discipline_id,onChange:J,disabled:o||v,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed",children:[(0,We.jsx)("option",{value:"",children:v?"Carregando disciplinas...":"Sess\xe3o geral (todos os programas)"}),Array.isArray(m)&&m.map((e=>(0,We.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,We.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:"\ud83d\udca1 Deixe em branco para sess\xe3o geral que pode trabalhar qualquer programa do paciente"}),v&&(0,We.jsxs)("div",{className:"mt-2 flex items-center text-sm text-gray-500",children:[(0,We.jsx)(Vn,{icon:xo,className:"animate-spin mr-2"}),"Carregando \xe1reas de interven\xe7\xe3o..."]})]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2 text-gray-400"}),"Data do Agendamento *"]}),(0,We.jsx)("input",{type:"date",name:"scheduled_date",value:j.scheduled_date,onChange:J,min:Kp(new Date),required:!0,disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Ti,className:"mr-2 text-gray-400"}),"Hor\xe1rio *"]}),(0,We.jsxs)("select",{name:"scheduled_time",value:j.scheduled_time,onChange:J,required:!0,disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[(0,We.jsx)("option",{value:"",children:"Selecione um hor\xe1rio..."}),(()=>{const e=[];for(let t=7;t<=20;t++)e.push("".concat(t.toString().padStart(2,"0"),":00")),t<20&&e.push("".concat(t.toString().padStart(2,"0"),":30"));return e})().map((e=>(0,We.jsx)("option",{value:e,children:e},e)))]})]})]}),I&&(0,We.jsx)("div",{className:"mb-6 p-3 bg-orange-50 border border-orange-200 rounded-md",children:(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)("svg",{className:"w-4 h-4 text-orange-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,We.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,We.jsx)("span",{className:"text-orange-800 text-sm",children:I})]})}),(H||V)&&(0,We.jsx)("div",{className:"mb-6 p-3 rounded-md border ".concat(H?"bg-blue-50 border-blue-200":"error"===V.type?"bg-red-50 border-red-300":"success"===V.type?"bg-green-50 border-green-300":"bg-yellow-50 border-yellow-300"),children:(0,We.jsx)("div",{className:"flex items-center",children:H?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-blue-500 mr-2"}),(0,We.jsx)("span",{className:"text-blue-800 text-sm",children:"Verificando assignment..."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:(V.type,To),className:"mr-2 ".concat("error"===V.type?"text-red-500":"success"===V.type?"text-green-500":"text-yellow-500")}),(0,We.jsx)("span",{className:"text-sm ".concat("error"===V.type?"text-red-800 font-semibold":"success"===V.type?"text-green-800":"text-yellow-800"),children:V.message})]})})}),(z||q)&&(0,We.jsx)("div",{className:"mb-6 p-3 rounded-md border ".concat(z?"bg-blue-50 border-blue-200":"error"===q.type?"bg-red-50 border-red-300":"success"===q.type?"bg-green-50 border-green-300":"bg-yellow-50 border-yellow-300"),children:(0,We.jsx)("div",{className:"flex items-center",children:z?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin text-blue-500 mr-2"}),(0,We.jsx)("span",{className:"text-blue-800 text-sm",children:"Verificando conflitos de hor\xe1rio..."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:(q.type,To),className:"mr-2 ".concat("error"===q.type?"text-red-500":"success"===q.type?"text-green-500":"text-yellow-500")}),(0,We.jsx)("span",{className:"text-sm ".concat("error"===q.type?"text-red-800 font-semibold":"success"===q.type?"text-green-800":"text-yellow-800"),children:q.message})]})})}),(0,We.jsxs)("div",{className:"mb-6",children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Xn,className:"mr-2 text-gray-400"}),"Dura\xe7\xe3o (minutos)"]}),(0,We.jsxs)("select",{name:"duration_minutes",value:j.duration_minutes,onChange:J,disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[(0,We.jsx)("option",{value:30,children:"30 minutos"}),(0,We.jsx)("option",{value:45,children:"45 minutos"}),(0,We.jsx)("option",{value:60,children:"60 minutos"}),(0,We.jsx)("option",{value:90,children:"90 minutos"}),(0,We.jsx)("option",{value:120,children:"120 minutos"})]})]}),(0,We.jsxs)("div",{className:"mb-6",children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:qo,className:"mr-2 text-gray-400"}),"Observa\xe7\xf5es"]}),(0,We.jsx)("textarea",{name:"notes",value:j.notes,onChange:J,rows:3,maxLength:500,placeholder:"Observa\xe7\xf5es sobre o agendamento (opcional)...",disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 resize-none"}),(0,We.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[j.notes.length,"/500 caracteres"]})]}),!i&&(0,We.jsxs)("div",{className:"mb-6 border-t pt-6",children:[(0,We.jsxs)("div",{className:"flex items-center mb-4",children:[(0,We.jsx)("input",{type:"checkbox",id:"recurrence-enabled",checked:w,onChange:e=>_(e.target.checked),disabled:o,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,We.jsxs)("label",{htmlFor:"recurrence-enabled",className:"ml-2 font-medium text-gray-700",children:[(0,We.jsx)(Vn,{icon:Hi,className:"mr-2 text-blue-600"}),"Criar agendamento recorrente"]})]}),w&&(0,We.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg space-y-4",children:[(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Frequ\xeancia"}),(0,We.jsxs)("select",{name:"type",value:S.type,onChange:K,disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[(0,We.jsx)("option",{value:"weekly",children:"\ud83d\udcc5 Toda semana"}),(0,We.jsx)("option",{value:"biweekly",children:"\ud83d\udcc5 A cada 2 semanas"}),(0,We.jsx)("option",{value:"monthly",children:"\ud83d\udcc5 Todo m\xeas"})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gerar para pr\xf3ximas"}),(0,We.jsxs)("select",{name:"generateWeeks",value:S.generateWeeks,onChange:K,disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100",children:[(0,We.jsx)("option",{value:4,children:"4 semanas"}),(0,We.jsx)("option",{value:6,children:"6 semanas"}),(0,We.jsx)("option",{value:8,children:"8 semanas"}),(0,We.jsx)("option",{value:12,children:"12 semanas"}),(0,We.jsx)("option",{value:16,children:"16 semanas"})]})]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Terminar em (opcional)"}),(0,We.jsx)("input",{type:"date",name:"endDate",value:S.endDate,onChange:K,min:j.scheduled_date,disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100"}),(0,We.jsx)("div",{className:"mt-1 text-xs text-gray-500",children:"Deixe em branco para gerar indefinidamente"})]}),(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)("input",{type:"checkbox",id:"skip-holidays",name:"skipHolidays",checked:S.skipHolidays,onChange:K,disabled:o,className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,We.jsx)("label",{htmlFor:"skip-holidays",className:"ml-2 text-sm text-gray-700",children:"Pular feriados automaticamente"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observa\xe7\xf5es da recorr\xeancia"}),(0,We.jsx)("textarea",{name:"notes",value:S.notes,onChange:K,rows:2,maxLength:200,placeholder:"Observa\xe7\xf5es espec\xedficas da s\xe9rie recorrente...",disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 resize-none"}),(0,We.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[S.notes.length,"/200 caracteres"]})]}),(0,We.jsxs)("div",{className:"flex space-x-2",children:[(0,We.jsxs)("button",{type:"button",onClick:()=>E(!P),disabled:o||!j.scheduled_date||!j.scheduled_time,className:"px-3 py-2 text-sm font-medium text-blue-700 bg-blue-100 border border-blue-300 rounded-md shadow-sm hover:bg-blue-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[(0,We.jsx)(Vn,{icon:li,className:"mr-1 w-3 h-3"}),P?"Ocultar Preview":"Ver Preview"]}),(0,We.jsxs)("button",{type:"button",onClick:async()=>{if(j.patient_id&&j.therapist_id&&j.scheduled_date&&j.scheduled_time){D(!0);try{const e=new Date(j.scheduled_date).getDay(),t={patient_id:parseInt(j.patient_id),therapist_id:parseInt(j.therapist_id),day_of_week:e,scheduled_time:j.scheduled_time,start_date:j.scheduled_date,end_date:S.endDate||null},a=await Jp.checkConflicts(t);T(a.conflicts||[])}catch(e){console.error("Erro ao verificar conflitos:",e),T([])}finally{D(!1)}}},disabled:o||L||!j.patient_id||!j.therapist_id||!j.scheduled_date||!j.scheduled_time,className:"px-3 py-2 text-sm font-medium text-orange-700 bg-orange-100 border border-orange-300 rounded-md shadow-sm hover:bg-orange-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[L?(0,We.jsx)(Vn,{icon:xo,className:"mr-1 w-3 h-3 animate-spin"}):(0,We.jsx)(Vn,{icon:To,className:"mr-1 w-3 h-3"}),"Verificar Conflitos"]})]}),P&&k.length>0&&(0,We.jsxs)("div",{className:"bg-white p-3 rounded border",children:[(0,We.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:["Preview dos Agendamentos (",k.length," agendamentos)"]}),(0,We.jsxs)("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[k.slice(0,10).map(((e,t)=>(0,We.jsxs)("div",{className:"text-xs text-gray-600 flex justify-between",children:[(0,We.jsxs)("span",{children:[e.formatted_date," (",e.day_name,")"]}),(0,We.jsx)("span",{children:e.time})]},t))),k.length>10&&(0,We.jsxs)("div",{className:"text-xs text-gray-500 text-center pt-1",children:["... e mais ",k.length-10," agendamentos"]})]})]}),O.length>0&&(0,We.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-3",children:[(0,We.jsxs)("div",{className:"flex items-center mb-2",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-500 mr-2"}),(0,We.jsxs)("h4",{className:"text-sm font-medium text-red-800",children:["Conflitos Detectados (",O.length,")"]})]}),(0,We.jsxs)("div",{className:"max-h-24 overflow-y-auto space-y-1",children:[O.slice(0,3).map(((e,t)=>(0,We.jsxs)("div",{className:"text-xs text-red-700",children:[e.scheduled_date," \xe0s ",e.scheduled_time," - ",e.patient_name]},t))),O.length>3&&(0,We.jsxs)("div",{className:"text-xs text-red-600",children:["... e mais ",O.length-3," conflitos"]})]}),(0,We.jsx)("div",{className:"mt-2 text-xs text-red-600",children:"\u26a0\ufe0f Agendamentos com conflito n\xe3o ser\xe3o criados automaticamente"})]}),j.scheduled_date&&j.scheduled_time&&(0,We.jsx)("div",{className:"bg-white p-3 rounded border",children:(0,We.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,We.jsx)("strong",{children:"Resumo:"})," ",Jp.formatRecurrenceDescription({recurrence_type:S.type,day_of_week:new Date(j.scheduled_date).getDay(),scheduled_time:j.scheduled_time,duration_minutes:j.duration_minutes,discipline_name:j.discipline_id?null===(t=m.find((e=>e.id===parseInt(j.discipline_id))))||void 0===t?void 0:t.name:null})]})})]})]}),(0,We.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,We.jsx)("button",{type:"button",onClick:n,disabled:o,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancelar"}),(0,We.jsxs)("button",{type:"submit",disabled:o,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[o&&(0,We.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,We.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,We.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i?"Atualizar":w?"Criar S\xe9rie Recorrente":"Agendar"]})]})]})]})}):null},Zp=function(e){return{scheduled:"Agendado",completed:"Realizado",missed:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)?"N\xe3o Realizado / Justificado":"N\xe3o Realizado",cancelled:"Cancelado"}[e]||e},ef=e=>({scheduled:"bg-yellow-100 text-yellow-800 border-yellow-200",completed:"bg-green-100 text-green-800 border-green-200",missed:"bg-red-100 text-red-800 border-red-200",cancelled:"bg-orange-100 text-orange-800 border-orange-200"}[e]||"bg-gray-100 text-gray-800 border-gray-200"),tf=e=>{let{appointment:t,onEdit:a,onEditSeries:n,onDelete:r,onDeleteSeries:i,onViewDetails:o,onJustify:l,onViewNextOccurrences:c,onCancel:d,className:u=""}=e;const[h,m]=(0,s.useState)(!1),p=(0,s.useRef)(null),f=!!t.recurring_template_id,g="missed"===t.status,x="completed"===t.status,b="scheduled"===t.status,v="cancelled"===t.status,y=!!t.justified_at;(0,s.useEffect)((()=>{const e=e=>{p.current&&!p.current.contains(e.target)&&m(!1)};return h&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[h]);const j=(e,a)=>{m(!1),a&&a(t)};return(0,We.jsxs)("div",{className:"relative ".concat(u),ref:p,children:[(0,We.jsx)("button",{onClick:()=>m(!h),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",title:"A\xe7\xf5es",children:(0,We.jsx)(Vn,{icon:Ri,className:"h-4 w-4"})}),h&&(0,We.jsxs)("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-xl border-2 border-gray-200 z-50 py-2",children:[(0,We.jsxs)("button",{onClick:()=>j(0,o),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:Qn,className:"w-4 h-4 text-blue-500"}),(0,We.jsx)("span",{children:"Ver Detalhes"})]}),b&&!v&&(0,We.jsxs)("button",{onClick:()=>j(0,d),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-orange-50 flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:lo,className:"w-4 h-4 text-orange-500"}),(0,We.jsx)("span",{children:"Cancelar Agendamento"})]}),!x&&!g&&!v&&(0,We.jsx)(We.Fragment,{children:f?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("button",{onClick:()=>j(0,a),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:vr,className:"w-4 h-4 text-yellow-500"}),(0,We.jsx)("span",{children:"Editar Este Agendamento"})]}),(0,We.jsxs)("button",{onClick:()=>j(0,n),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:$r,className:"w-4 h-4 text-purple-500"}),(0,We.jsx)("span",{children:"Editar Toda a S\xe9rie"})]})]}):(0,We.jsxs)("button",{onClick:()=>j(0,a),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:vr,className:"w-4 h-4 text-yellow-500"}),(0,We.jsx)("span",{children:"Editar"})]})}),f&&(0,We.jsxs)("button",{onClick:()=>j(0,c),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:er,className:"w-4 h-4 text-indigo-500"}),(0,We.jsx)("span",{children:"Ver Pr\xf3ximas Ocorr\xeancias"})]}),g&&!y&&(0,We.jsxs)("button",{onClick:()=>j(0,l),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:To,className:"w-4 h-4 text-orange-500"}),(0,We.jsx)("span",{children:"Justificar Aus\xeancia"})]}),(0,We.jsx)("div",{className:"my-2 border-t border-gray-200"}),!x&&!y&&!v&&(0,We.jsx)(We.Fragment,{children:f?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("button",{onClick:()=>j(0,r),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:gi,className:"w-4 h-4"}),(0,We.jsx)("span",{children:"Excluir Este Agendamento"})]}),(0,We.jsxs)("button",{onClick:()=>j(0,i),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:$r,className:"w-4 h-4"}),(0,We.jsx)("span",{children:"Excluir Toda a S\xe9rie"})]})]}):(0,We.jsxs)("button",{onClick:()=>j(0,r),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-3",children:[(0,We.jsx)(Vn,{icon:gi,className:"w-4 h-4"}),(0,We.jsx)("span",{children:"Excluir"})]})}),y&&(0,We.jsx)("div",{className:"px-4 py-3 bg-blue-50 border-t border-blue-100",children:(0,We.jsxs)("div",{className:"flex items-start gap-2",children:[(0,We.jsx)(Vn,{icon:To,className:"text-blue-500 flex-shrink-0 mt-0.5 w-3 h-3"}),(0,We.jsx)("p",{className:"text-xs text-gray-600 leading-relaxed",children:"Justificado. N\xe3o pode ser alterado (auditoria)."})]})}),v&&(0,We.jsx)("div",{className:"px-4 py-3 bg-orange-50 border-t border-orange-100",children:(0,We.jsxs)("div",{className:"flex items-start gap-2",children:[(0,We.jsx)(Vn,{icon:lo,className:"text-orange-500 flex-shrink-0 mt-0.5 w-3 h-3"}),(0,We.jsx)("p",{className:"text-xs text-gray-600 leading-relaxed",children:"Cancelado. N\xe3o pode ser alterado ou exclu\xeddo (auditoria)."})]})})]})]})},af=e=>{let{appointments:t=[],onEdit:a,onDelete:n,onView:r,onEditSeries:i,onDeleteSeries:o,onJustify:l,onViewNextOccurrences:c,onCancel:d,isLoading:u=!1,pagination:h=null,onPageChange:m=null,showFilters:p=!0}=e;const[f,g]=(0,s.useState)({search:"",status:"",startDate:"",endDate:"",therapistId:"",recurringOnly:!1}),[x,b]=(0,s.useState)("scheduled_date"),[v,y]=(0,s.useState)("asc"),[j,N]=(0,s.useState)(!1),w=[...new Set(t.map((e=>e.therapist_name)))].sort(),_=e=>{if(!e.recurring_template_id)return null;return{weekly:"Semanal",biweekly:"Quinzenal",monthly:"Mensal"}[e.recurrence_type]||"Recorrente"},S=(e,t)=>{g((a=>(0,Ie.A)((0,Ie.A)({},a),{},{[e]:t})))},C=e=>{x===e?y("asc"===v?"desc":"asc"):(b(e),y("asc"))},k=[...t.filter((e=>{const t=!f.search||e.patient_name.toLowerCase().includes(f.search.toLowerCase())||e.discipline_name&&e.discipline_name.toLowerCase().includes(f.search.toLowerCase())||e.therapist_name.toLowerCase().includes(f.search.toLowerCase()),a=!f.status||e.status===f.status,s=(!f.startDate||e.scheduled_date>=f.startDate)&&(!f.endDate||e.scheduled_date<=f.endDate),n=!f.therapistId||e.therapist_name===f.therapistId,r=!f.recurringOnly||!!e.recurring_template_id;return t&&a&&s&&n&&r}))].sort(((e,t)=>{let a=e[x],s=t[x];return"scheduled_date"===x&&(a=new Date("".concat(e.scheduled_date,"T").concat(e.scheduled_time)),s=new Date("".concat(t.scheduled_date,"T").concat(t.scheduled_time))),"string"===typeof a&&(a=a.toLowerCase(),s=s.toLowerCase()),"asc"===v?a>s?1:-1:a<s?1:-1})),A=e=>x!==e?null:"asc"===v?Nr:Qi,P=e=>{const t=new Date,a=new Date("".concat(e.scheduled_date,"T").concat(e.scheduled_time));let s="hover:bg-gray-50 transition-colors";return"scheduled"===e.status&&a<t?s+=" bg-red-50 border-l-4 border-red-400":"completed"===e.status?s+=" bg-green-50":"cancelled"===e.status&&(s+=" bg-gray-100 opacity-75"),s};return u?(0,We.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,We.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,We.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,We.jsx)("span",{className:"ml-3 text-gray-600",children:"Carregando agendamentos..."})]})}):(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[p&&(0,We.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,We.jsxs)("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:ti,className:"mr-2 text-gray-400"}),"Filtros"]}),(0,We.jsxs)("button",{onClick:()=>N(!j),className:"text-sm text-blue-600 hover:text-blue-800 flex items-center",children:[j?"Ocultar filtros":"Mais filtros",(0,We.jsx)(Vn,{icon:j?Nr:Qi,className:"ml-1 w-3 h-3"})]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,We.jsx)(Vn,{icon:Ki,className:"mr-1 text-gray-400"}),"Buscar"]}),(0,We.jsx)("input",{type:"text",value:f.search,onChange:e=>S("search",e.target.value),placeholder:"Paciente, disciplina ou terapeuta...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,We.jsxs)("select",{value:f.status,onChange:e=>S("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"",children:"Todos os status"}),(0,We.jsx)("option",{value:"scheduled",children:"Agendado"}),(0,We.jsx)("option",{value:"completed",children:"Realizado"}),(0,We.jsx)("option",{value:"missed",children:"N\xe3o realizado"}),(0,We.jsx)("option",{value:"cancelled",children:"Cancelado"})]})]}),(0,We.jsx)("div",{className:"flex items-end",children:(0,We.jsx)("button",{onClick:()=>{g({search:"",status:"",startDate:"",endDate:"",therapistId:""})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Limpar filtros"})})]}),j&&(0,We.jsxs)("div",{className:"pt-4 border-t border-gray-200 space-y-4",children:[(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data inicial"}),(0,We.jsx)("input",{type:"date",value:f.startDate,onChange:e=>S("startDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data final"}),(0,We.jsx)("input",{type:"date",value:f.endDate,onChange:e=>S("endDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Terapeuta"}),(0,We.jsxs)("select",{value:f.therapistId,onChange:e=>S("therapistId",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"",children:"Todos os terapeutas"}),w.map((e=>(0,We.jsx)("option",{value:e,children:e},e)))]})]})]}),(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)("input",{type:"checkbox",id:"recurringOnly",checked:f.recurringOnly,onChange:e=>S("recurringOnly",e.target.checked),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded cursor-pointer"}),(0,We.jsxs)("label",{htmlFor:"recurringOnly",className:"ml-2 text-sm font-medium text-gray-700 cursor-pointer flex items-center",children:[(0,We.jsx)(Vn,{icon:$r,className:"mr-2 text-purple-600"}),"Mostrar apenas agendamentos recorrentes"]})]})]})]}),(0,We.jsx)("div",{className:"overflow-x-auto",children:0===k.length?(0,We.jsxs)("div",{className:"p-8 text-center",children:[(0,We.jsx)(Vn,{icon:er,className:"text-gray-300 text-4xl mb-4"}),(0,We.jsx)("p",{className:"text-gray-500",children:0===t.length?"Nenhum agendamento encontrado":"Nenhum agendamento corresponde aos filtros selecionados"})]}):(0,We.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,We.jsx)("thead",{className:"bg-gray-50",children:(0,We.jsxs)("tr",{children:[(0,We.jsx)("th",{onClick:()=>C("scheduled_date"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2"}),"Data/Hora",A("scheduled_date")&&(0,We.jsx)(Vn,{icon:A("scheduled_date"),className:"ml-1 w-3 h-3"})]})}),(0,We.jsx)("th",{onClick:()=>C("patient_name"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:Sr,className:"mr-2"}),"Paciente",A("patient_name")&&(0,We.jsx)(Vn,{icon:A("patient_name"),className:"ml-1 w-3 h-3"})]})}),(0,We.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[(0,We.jsx)(Vn,{icon:Xn,className:"mr-2"}),"\xc1rea de Interven\xe7\xe3o"]}),(0,We.jsx)("th",{onClick:()=>C("therapist_name"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:(0,We.jsxs)("div",{className:"flex items-center",children:["Terapeuta",A("therapist_name")&&(0,We.jsx)(Vn,{icon:A("therapist_name"),className:"ml-1 w-3 h-3"})]})}),(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:$r,className:"mr-2"}),"Recorr\xeancia"]})}),(0,We.jsx)("th",{onClick:()=>C("status"),className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",children:(0,We.jsxs)("div",{className:"flex items-center",children:["Status",A("status")&&(0,We.jsx)(Vn,{icon:A("status"),className:"ml-1 w-3 h-3"})]})}),(0,We.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,We.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map((e=>(0,We.jsxs)("tr",{className:P(e),children:[(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsxs)("div",{className:"flex flex-col",children:[(0,We.jsx)("div",{className:"text-sm font-medium text-gray-900",children:Dp(e.scheduled_date)}),(0,We.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,We.jsx)(Vn,{icon:Ti,className:"mr-1 w-3 h-3"}),Op(e.scheduled_time),(0,We.jsxs)("span",{className:"ml-1",children:["(",e.duration_minutes,"min)"]})]})]})}),(0,We.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,We.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.patient_name}),e.patient_age&&(0,We.jsxs)("div",{className:"text-sm text-gray-500",children:[e.patient_age," anos"]})]}),(0,We.jsxs)("td",{className:"px-6 py-4",children:[(0,We.jsx)("div",{className:"text-sm text-gray-900",children:e.discipline_name||"Sess\xe3o Geral"}),e.active_programs_count>0&&(0,We.jsxs)("div",{className:"text-sm text-gray-500",children:[e.active_programs_count," programa(s) ativo(s)"]})]}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsx)("div",{className:"text-sm text-gray-900",children:e.therapist_name})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:_(e)?(0,We.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200",children:[(0,We.jsx)(Vn,{icon:$r,className:"mr-1 w-3 h-3"}),_(e)]}):(0,We.jsx)("span",{className:"text-gray-400 text-xs",children:"-"})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(Tp(e.status)),children:Zp(e.status,e.justified_at)})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,We.jsx)(tf,{appointment:e,onEdit:a,onEditSeries:i,onDelete:n,onDeleteSeries:o,onViewDetails:r,onJustify:l,onViewNextOccurrences:c,onCancel:d})})]},e.id)))})]})}),h&&h.totalPages>1&&(0,We.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[(0,We.jsxs)("div",{className:"text-sm text-gray-700",children:["Mostrando ",h.startItem," a ",h.endItem," de ",h.totalItems," agendamentos"]}),(0,We.jsxs)("div",{className:"flex space-x-2",children:[(0,We.jsx)("button",{onClick:()=>m(h.currentPage-1),disabled:h.currentPage<=1,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Anterior"}),Array.from({length:h.totalPages},((e,t)=>t+1)).map((e=>(0,We.jsx)("button",{onClick:()=>m(e),className:"px-3 py-1 text-sm border rounded-md ".concat(e===h.currentPage?"bg-blue-600 text-white border-blue-600":"border-gray-300 hover:bg-gray-50"),children:e},e))),(0,We.jsx)("button",{onClick:()=>m(h.currentPage+1),disabled:h.currentPage>=h.totalPages,className:"px-3 py-1 text-sm border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Pr\xf3xima"})]})]})]})},sf=e=>{let{isOpen:t,onClose:a,appointment:s,onEdit:n=null,onDelete:r=null,canEdit:i=!1,canDelete:o=!1}=e;if(!t||!s)return null;const l="scheduled"===s.status,c="completed"===s.status,d="missed"===s.status,u="cancelled"===s.status,h=new Date,m=(()=>{try{const e=s.scheduled_date,t=s.scheduled_time;if(!e||!t)return new Date;let a=e;if(e instanceof Date){const t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");a="".concat(t,"-").concat(s,"-").concat(n)}else"string"===typeof e&&e.includes("T")&&(a=e.split("T")[0]);const[n,r,i]=a.split("-").map(Number),[o,l]=t.split(":").map(Number);return new Date(n,r-1,i,o,l,0)}catch(e){return console.error("Erro ao processar data do agendamento:",e),new Date}})(),p=l&&m<h,f=(()=>{if(c&&s.completed_at){return{label:"Realizado em:",value:new Date(s.completed_at).toLocaleString("pt-BR"),icon:Ur,color:"text-green-600"}}if(d&&s.missed_at){return{label:"Marcado como n\xe3o realizado em:",value:new Date(s.missed_at).toLocaleString("pt-BR"),icon:zo,color:"text-red-600"}}if(u&&s.cancelled_at){return{label:"Cancelado em:",value:new Date(s.cancelled_at).toLocaleString("pt-BR"),icon:zo,color:"text-gray-600"}}if(p){const e=h-m,t=Math.floor(e/36e5),a=Math.floor(e%36e5/6e4);return{label:"Atrasado h\xe1:",value:t>0?"".concat(t,"h ").concat(a,"min"):"".concat(a," minutos"),icon:zo,color:"text-red-600"}}if(l){const e=m-h,t=Math.floor(e/36e5),a=Math.floor(e%36e5/6e4),s=Math.floor(t/24);let n;return n=s>0?"Em ".concat(s," dia(s)"):t>0?"Em ".concat(t,"h ").concat(a,"min"):"Em ".concat(a," minutos"),{label:"Tempo restante:",value:n,icon:Ti,color:"text-blue-600"}}return null})();return(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:_i,className:"mr-3 text-blue-600"}),"Detalhes do Agendamento"]}),(0,We.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,We.jsx)(Vn,{icon:lo,className:"w-6 h-6"})})]}),(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"inline-flex px-3 py-1 text-sm font-semibold rounded-full ".concat(Tp(s.status)),children:Mp(s.status,s.justified_at)}),p&&(0,We.jsx)("span",{className:"ml-3 inline-flex px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800",children:"Atrasado"})]}),(0,We.jsxs)("div",{className:"flex space-x-2",children:[i&&l&&n&&(0,We.jsxs)("button",{onClick:()=>n(s),className:"px-3 py-2 text-sm font-medium text-yellow-700 bg-yellow-100 border border-yellow-300 rounded-md hover:bg-yellow-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 flex items-center",children:[(0,We.jsx)(Vn,{icon:vr,className:"mr-2 w-4 h-4"}),"Editar"]}),o&&(l||u||d||c)&&r&&(0,We.jsxs)("button",{onClick:()=>r(s),className:"px-3 py-2 text-sm font-medium text-red-700 bg-red-100 border border-red-300 rounded-md hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 flex items-center",children:[(0,We.jsx)(Vn,{icon:gi,className:"mr-2 w-4 h-4"}),"Remover"]})]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,We.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,We.jsxs)("h3",{className:"text-sm font-medium text-blue-800 mb-3 flex items-center",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2"}),"Data e Hor\xe1rio"]}),(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-blue-700",children:"Data:"}),(0,We.jsx)("span",{className:"ml-2 text-blue-600",children:Dp(s.scheduled_date)})]}),(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-blue-700",children:"Hor\xe1rio:"}),(0,We.jsx)("span",{className:"ml-2 text-blue-600",children:Op(s.scheduled_time)})]}),(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-blue-700",children:"Dura\xe7\xe3o:"}),(0,We.jsxs)("span",{className:"ml-2 text-blue-600",children:[s.duration_minutes," minutos"]})]}),f&&(0,We.jsxs)("div",{className:"text-sm pt-2 border-t border-blue-200",children:[(0,We.jsx)("span",{className:"font-medium text-blue-700",children:f.label}),(0,We.jsxs)("span",{className:"ml-2 ".concat(f.color," flex items-center"),children:[(0,We.jsx)(Vn,{icon:f.icon,className:"mr-1 w-3 h-3"}),f.value]})]})]})]}),(0,We.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,We.jsxs)("h3",{className:"text-sm font-medium text-green-800 mb-3 flex items-center",children:[(0,We.jsx)(Vn,{icon:Sr,className:"mr-2"}),"Paciente"]}),(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-green-700",children:"Nome:"}),(0,We.jsx)("span",{className:"ml-2 text-green-600",children:s.patient_name})]}),s.patient_age&&(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-green-700",children:"Idade:"}),(0,We.jsxs)("span",{className:"ml-2 text-green-600",children:[s.patient_age," anos"]})]}),(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-green-700",children:"Terapeuta:"}),(0,We.jsx)("span",{className:"ml-2 text-green-600",children:s.therapist_name})]})]})]})]}),(0,We.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg mb-6",children:[(0,We.jsxs)("h3",{className:"text-sm font-medium text-purple-800 mb-3 flex items-center",children:[(0,We.jsx)(Vn,{icon:Xn,className:"mr-2"}),"\xc1rea de Interven\xe7\xe3o"]}),(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-purple-700",children:"\xc1rea:"}),(0,We.jsx)("span",{className:"ml-2 text-purple-600",children:s.discipline_name||"Sess\xe3o Geral"})]}),s.active_programs_count>0&&(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-purple-700",children:"Programas Ativos:"}),(0,We.jsxs)("span",{className:"ml-2 text-purple-600",children:[s.active_programs_count," programa(s)"]})]}),s.available_programs&&(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-purple-700",children:"Programas Dispon\xedveis:"}),(0,We.jsx)("div",{className:"ml-2 text-purple-600 text-xs mt-1",children:s.available_programs.length>100?s.available_programs.substring(0,100)+"...":s.available_programs})]}),s.area_name&&(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-purple-700",children:"\xc1rea:"}),(0,We.jsx)("span",{className:"ml-2 text-purple-600",children:s.area_name})]})]})]}),s.notes&&(0,We.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[(0,We.jsxs)("h3",{className:"text-sm font-medium text-gray-800 mb-3 flex items-center",children:[(0,We.jsx)(Vn,{icon:qo,className:"mr-2"}),"Observa\xe7\xf5es"]}),(0,We.jsx)("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:s.notes})]}),(d||u)&&(s.missed_reason||s.cancellation_reason)&&(0,We.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg mb-6",children:[(0,We.jsxs)("h3",{className:"text-sm font-medium text-red-800 mb-3 flex items-center",children:[(0,We.jsx)(Vn,{icon:_i,className:"mr-2"}),d?"Justificativa da Aus\xeancia":"Motivo do Cancelamento"]}),(0,We.jsxs)("div",{className:"space-y-2",children:[s.missed_reason&&(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-red-700",children:"Motivo:"}),(0,We.jsx)("span",{className:"ml-2 text-red-600",children:s.missed_reason})]}),s.missed_by&&(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-red-700",children:"Respons\xe1vel:"}),(0,We.jsxs)("span",{className:"ml-2 text-red-600",children:["patient"===s.missed_by&&"Paciente","therapist"===s.missed_by&&"Terapeuta","both"===s.missed_by&&"Ambos","other"===s.missed_by&&"Outros fatores"]})]}),s.cancellation_reason&&(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-red-700",children:"Motivo:"}),(0,We.jsx)("span",{className:"ml-2 text-red-600",children:s.cancellation_reason})]})]})]}),s.justified_at&&s.justified_by_name&&(0,We.jsxs)("div",{className:"bg-blue-50 border-2 border-blue-200 p-4 rounded-lg mb-6",children:[(0,We.jsxs)("h3",{className:"text-sm font-medium text-blue-800 mb-3 flex items-center",children:[(0,We.jsx)(Vn,{icon:_o,className:"mr-2"}),"Hist\xf3rico de Justificativa (Auditoria)"]}),(0,We.jsxs)("div",{className:"space-y-3",children:[(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:no,className:"text-blue-600 mt-1 mr-3 w-4 h-4"}),(0,We.jsx)("div",{className:"flex-1",children:(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-blue-700",children:"Justificado por:"}),(0,We.jsx)("span",{className:"ml-2 text-blue-900 font-semibold",children:s.justified_by_name}),s.justified_by===s.therapist_id?(0,We.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:"Terapeuta Respons\xe1vel"}):(0,We.jsx)("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800 border border-purple-200",children:"Administrador (Override)"})]})})]}),(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:Ti,className:"text-blue-600 mt-1 mr-3 w-4 h-4"}),(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsxs)("div",{className:"text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-blue-700",children:"Data/Hora da Justificativa:"}),(0,We.jsx)("span",{className:"ml-2 text-blue-900",children:new Date(s.justified_at).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,We.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:(()=>{const e=new Date(s.justified_at),t=new Date-e,a=Math.floor(t/36e5),n=Math.floor(a/24);return n>0?"Justificado h\xe1 ".concat(n," dia(s)"):a>0?"Justificado h\xe1 ".concat(a," hora(s)"):"Justificado recentemente"})()})]})]}),(0,We.jsx)("div",{className:"pt-2 border-t border-blue-200",children:(0,We.jsxs)("div",{className:"text-xs text-blue-600",children:[(0,We.jsx)("span",{className:"font-medium",children:"ID do Respons\xe1vel:"}),(0,We.jsxs)("span",{className:"ml-2 font-mono",children:["#",s.justified_by]}),(0,We.jsx)("span",{className:"ml-4 font-medium",children:"ID do Agendamento:"}),(0,We.jsxs)("span",{className:"ml-2 font-mono",children:["#",s.id]})]})})]}),(0,We.jsxs)("div",{className:"mt-3 p-2 bg-blue-100 border border-blue-300 rounded text-xs text-blue-800 flex items-start",children:[(0,We.jsx)(Vn,{icon:_i,className:"mr-2 mt-0.5 flex-shrink-0"}),(0,We.jsxs)("span",{children:[(0,We.jsx)("strong",{children:"Nota de Auditoria:"})," Todas as justificativas s\xe3o rastreadas no sistema para fins de auditoria e controle de qualidade.",s.justified_by!==s.therapist_id&&(0,We.jsx)("span",{className:"block mt-1",children:"Esta justificativa foi realizada por um administrador usando override administrativo."})]})]})]}),(0,We.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg text-xs text-gray-500",children:(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium",children:"ID do Agendamento:"}),(0,We.jsxs)("span",{className:"ml-2",children:["#",s.id]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium",children:"Criado em:"}),(0,We.jsx)("span",{className:"ml-2",children:s.created_at?new Date(s.created_at).toLocaleString("pt-BR"):"N\xe3o informado"})]}),s.session_id&&(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium",children:"Sess\xe3o vinculada:"}),(0,We.jsxs)("span",{className:"ml-2",children:["#",s.session_id]})]}),s.updated_at&&(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium",children:"\xdaltima atualiza\xe7\xe3o:"}),(0,We.jsx)("span",{className:"ml-2",children:new Date(s.updated_at).toLocaleString("pt-BR")})]})]})})]}),(0,We.jsx)("div",{className:"flex justify-end p-6 border-t border-gray-200",children:(0,We.jsx)("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Fechar"})})]})})},nf=e=>{let{isOpen:t,onClose:a,onGenerate:n,therapists:r=[],isGenerating:i=!1}=e;const[o,l]=(0,s.useState)({type:"week",startDate:"",endDate:""}),[c,d]=(0,s.useState)({type:"all",therapistId:null}),[u,h]=(0,s.useState)({});(0,s.useEffect)((()=>{const e=new Date;let t,a;switch(o.type){case"month":t=new Date(e.getFullYear(),e.getMonth()-1,e.getDate()),a=e;break;case"quarter":t=new Date(e.getFullYear(),e.getMonth()-3,e.getDate()),a=e;break;default:return}"custom"!==o.type&&l((e=>(0,Ie.A)((0,Ie.A)({},e),{},{startDate:t.toISOString().split("T")[0],endDate:a.toISOString().split("T")[0]})))}),[o.type]),(0,s.useEffect)((()=>{t&&(h({}),l({type:"month",startDate:"",endDate:""}),d({type:"all",therapistId:null}))}),[t]);return t?(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-red-600 to-pink-600 px-6 py-4 rounded-t-2xl",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("h2",{className:"text-xl font-bold text-white",children:"Relat\xf3rio de Agendamentos"}),(0,We.jsx)("p",{className:"text-red-100 text-sm",children:"Configura\xe7\xe3o do Relat\xf3rio"})]}),(0,We.jsx)("button",{onClick:a,disabled:i,className:"text-white hover:text-red-200 transition-colors disabled:opacity-50",children:(0,We.jsx)(Vn,{icon:lo,className:"text-xl"})})]})}),(0,We.jsx)("div",{className:"p-6",children:(0,We.jsxs)("div",{className:"space-y-6",children:[(0,We.jsxs)("div",{className:"text-center mb-6",children:[(0,We.jsx)("div",{className:"bg-gradient-to-br from-red-100 to-pink-100 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,We.jsx)(Vn,{icon:bi,className:"text-2xl text-red-600"})}),(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Configura\xe7\xe3o do Relat\xf3rio"}),(0,We.jsx)("p",{className:"text-gray-600 text-sm",children:"Configure o per\xedodo e escopo do relat\xf3rio de agendamentos"})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2 text-red-500"}),"Per\xedodo do Relat\xf3rio"]}),(0,We.jsx)("div",{className:"space-y-2",children:[{value:"month",label:"\xdaltimo M\xeas"},{value:"quarter",label:"\xdaltimo Trimestre"},{value:"custom",label:"Per\xedodo Customizado"}].map((e=>(0,We.jsxs)("label",{className:"flex items-center",children:[(0,We.jsx)("input",{type:"radio",name:"period",value:e.value,checked:o.type===e.value,onChange:e=>l((t=>(0,Ie.A)((0,Ie.A)({},t),{},{type:e.target.value}))),disabled:i,className:"mr-3 text-red-600 focus:ring-red-500"}),e.label]},e.value)))}),"custom"===o.type&&(0,We.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-xs text-gray-500 mb-2",children:"Data Inicial"}),(0,We.jsx)("input",{type:"date",value:o.startDate,onChange:e=>l((t=>(0,Ie.A)((0,Ie.A)({},t),{},{startDate:e.target.value}))),disabled:i,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}),u.startDate&&(0,We.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.startDate})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-xs text-gray-500 mb-2",children:"Data Final"}),(0,We.jsx)("input",{type:"date",value:o.endDate,onChange:e=>l((t=>(0,Ie.A)((0,Ie.A)({},t),{},{endDate:e.target.value}))),disabled:i,className:"w-full px-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"}),u.endDate&&(0,We.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.endDate})]})]}),o.startDate&&o.endDate&&(0,We.jsxs)("div",{className:"mt-3 p-3 bg-red-50 rounded-lg text-sm text-red-700",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2"}),"Per\xedodo: ",(()=>{if(!o.startDate||!o.endDate)return"Per\xedodo ser\xe1 calculado automaticamente";try{const e=new Date(o.startDate).toLocaleDateString("pt-BR"),t=new Date(o.endDate).toLocaleDateString("pt-BR");return"".concat(e," a ").concat(t)}catch(e){return"Per\xedodo ser\xe1 calculado automaticamente"}})()]}),u.dateRange&&(0,We.jsx)("p",{className:"text-red-500 text-sm mt-2",children:u.dateRange})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:[(0,We.jsx)(Vn,{icon:yr,className:"mr-2 text-red-500"}),"Escopo do Relat\xf3rio"]}),(0,We.jsxs)("div",{className:"space-y-3",children:[(0,We.jsxs)("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,We.jsx)("input",{type:"radio",name:"scope",value:"all",checked:"all"===c.type,onChange:e=>d({type:e.target.value,therapistId:null}),disabled:i,className:"mr-3 text-red-600 focus:ring-red-500"}),(0,We.jsx)(Vn,{icon:yr,className:"mr-3 text-blue-600"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"font-medium",children:"Todos os Terapeutas"}),(0,We.jsx)("div",{className:"text-sm text-gray-500",children:"Relat\xf3rio geral com todos os profissionais"})]})]}),(0,We.jsxs)("label",{className:"flex items-center p-3 border border-gray-300 rounded-lg hover:bg-gray-50 cursor-pointer",children:[(0,We.jsx)("input",{type:"radio",name:"scope",value:"individual",checked:"individual"===c.type,onChange:e=>d((t=>(0,Ie.A)((0,Ie.A)({},t),{},{type:e.target.value}))),disabled:i,className:"mr-3 text-red-600 focus:ring-red-500"}),(0,We.jsx)(Vn,{icon:Sr,className:"mr-3 text-green-600"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"font-medium",children:"Terapeuta Individual"}),(0,We.jsx)("div",{className:"text-sm text-gray-500",children:"Relat\xf3rio detalhado de um profissional espec\xedfico"})]})]})]}),"individual"===c.type&&(0,We.jsxs)("div",{className:"mt-4",children:[(0,We.jsxs)("select",{value:c.therapistId||"",onChange:e=>d((t=>(0,Ie.A)((0,Ie.A)({},t),{},{therapistId:e.target.value||null}))),disabled:i,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500",children:[(0,We.jsx)("option",{value:"",children:"Selecione um terapeuta..."}),r.map((e=>(0,We.jsx)("option",{value:e.id,children:e.full_name},e.id)))]}),u.therapist&&(0,We.jsx)("p",{className:"text-red-500 text-xs mt-2",children:u.therapist})]})]}),(0,We.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,We.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,We.jsx)(Vn,{icon:zr,className:"text-blue-600 mt-1"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h4",{className:"font-medium text-blue-800",children:"Sobre os Relat\xf3rios"}),(0,We.jsx)("p",{className:"text-blue-700 text-sm",children:"Os relat\xf3rios incluem estat\xedsticas detalhadas, taxa de comparecimento, agenda completa e an\xe1lises de performance. Dados baseados nos agendamentos reais."})]})]})})]})}),(0,We.jsx)("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end",children:(0,We.jsxs)("div",{className:"flex space-x-3",children:[(0,We.jsx)("button",{onClick:a,disabled:i,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancelar"}),(0,We.jsx)("button",{onClick:async()=>{if(!(()=>{const e={};return"custom"===o.type&&(o.startDate||(e.startDate="Data inicial \xe9 obrigat\xf3ria"),o.endDate||(e.endDate="Data final \xe9 obrigat\xf3ria"),o.startDate&&o.endDate&&o.startDate>o.endDate&&(e.dateRange="Data inicial deve ser anterior \xe0 data final")),"individual"!==c.type||c.therapistId||(e.therapist="Selecione um terapeuta para relat\xf3rio individual"),h(e),0===Object.keys(e).length})())return;let e=o.startDate,t=o.endDate;if(!e||!t){const a=new Date;let s,n;switch(o.type){case"month":default:s=new Date(a.getFullYear(),a.getMonth()-1,a.getDate()),n=a;break;case"quarter":s=new Date(a.getFullYear(),a.getMonth()-3,a.getDate()),n=a}e=s.toISOString().split("T")[0],t=n.toISOString().split("T")[0]}const a={period:{type:o.type,startDate:e,endDate:t},scope:{type:c.type,therapistId:c.therapistId}};n(a)},disabled:i,className:"px-6 py-2 bg-gradient-to-r from-red-600 to-pink-600 text-white rounded-lg hover:from-red-700 hover:to-pink-700 transition-all disabled:opacity-50 flex items-center space-x-2",children:i?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin"}),(0,We.jsx)("span",{children:"Gerando..."})]}):(0,We.jsx)("span",{children:"Gerar Relat\xf3rio PDF"})})]})})]})}):null},rf=e=>{let{isOpen:t,onClose:a,selectedSessions:n,onSuccess:r}=e;const[i,o]=(0,s.useState)({discipline_id:"",notes:"Agendamentos retroativos criados em lote"}),[l,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(!1),[p,f]=(0,s.useState)(null),[g,x]=(0,s.useState)(null);(0,s.useEffect)((()=>{t&&(b(),o({discipline_id:"",notes:"Agendamentos retroativos criados em lote (".concat(n.length," sess\xf5es)")}),f(null),x(null))}),[t,n.length]);const b=async()=>{try{m(!0);const e=await(0,st.uc)();let t=[];e&&"object"===typeof e&&(t=Object.keys(e).map((t=>({id:e[t].id,name:t})))),c(t)}catch(p){console.error("Erro ao carregar disciplinas:",p),f("Erro ao carregar lista de disciplinas")}finally{m(!1)}},v=e=>{const{name:t,value:a}=e.target;o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:a})))},y=()=>{d||(o({discipline_id:"",notes:""}),f(null),x(null),a())};return t?(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:Li,className:"mr-3 text-green-600"}),"Criar Agendamentos Retroativos em Lote"]}),(0,We.jsx)("button",{onClick:y,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:d,children:(0,We.jsx)(Vn,{icon:lo,className:"w-6 h-6"})})]}),(0,We.jsx)("div",{className:"p-6",children:g?(0,We.jsxs)("div",{className:"text-center py-8",children:[(0,We.jsx)(Vn,{icon:Ur,className:"h-16 w-16 text-green-500 mb-4"}),(0,We.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Agendamentos Criados com Sucesso!"}),(0,We.jsxs)("p",{className:"text-gray-600 mb-4",children:[g.created," de ",g.total," agendamentos foram criados"]}),g.errors&&g.errors.length>0&&(0,We.jsxs)("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-md text-left",children:[(0,We.jsx)("p",{className:"text-yellow-800 font-medium mb-2",children:"Alguns agendamentos falharam:"}),(0,We.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[g.errors.slice(0,3).map(((e,t)=>(0,We.jsxs)("li",{children:["\u2022 ",e]},t))),g.errors.length>3&&(0,We.jsxs)("li",{children:["... e mais ",g.errors.length-3," erros"]})]})]})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,We.jsxs)("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:[n.length," Sess\xe3o(\xf5es) Selecionada(s)"]}),(0,We.jsxs)("div",{className:"max-h-32 overflow-y-auto space-y-2",children:[n.slice(0,5).map(((e,t)=>(0,We.jsxs)("div",{className:"text-sm text-blue-700 flex justify-between",children:[(0,We.jsx)("span",{children:e.patient_name}),(0,We.jsx)("span",{children:new Date(e.session_date).toLocaleDateString("pt-BR")})]},t))),n.length>5&&(0,We.jsxs)("div",{className:"text-sm text-blue-600 text-center",children:["... e mais ",n.length-5," sess\xf5es"]})]})]}),(0,We.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{u(!0),f(null);const e=n.map((e=>e.session_id)),t={discipline_id:i.discipline_id?parseInt(i.discipline_id):null,notes:i.notes},a=await Hp(e,t);x(a),setTimeout((()=>{r&&r(a)}),2e3)}catch(p){console.error("Erro ao criar agendamentos em lote:",p),f(p.message||"Erro ao criar agendamentos retroativos"),u(!1)}},className:"space-y-6",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Xn,className:"mr-2 text-gray-400"}),"\xc1rea de Interven\xe7\xe3o ",(0,We.jsx)("span",{className:"text-gray-500 text-sm",children:"(aplicar a todas)"})]}),(0,We.jsxs)("select",{name:"discipline_id",value:i.discipline_id,onChange:v,disabled:d||h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100",children:[(0,We.jsx)("option",{value:"",children:h?"Carregando...":"Sess\xe3o geral (padr\xe3o)"}),Array.isArray(l)&&l.map((e=>(0,We.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,We.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Esta configura\xe7\xe3o ser\xe1 aplicada a todos os agendamentos"})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:qo,className:"mr-2 text-gray-400"}),"Observa\xe7\xf5es"]}),(0,We.jsx)("textarea",{name:"notes",value:i.notes,onChange:v,rows:3,maxLength:500,placeholder:"Observa\xe7\xf5es comuns para todos os agendamentos...",disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100 resize-none"}),(0,We.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[i.notes.length,"/500 caracteres"]})]}),(0,We.jsx)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:To,className:"text-yellow-600 mt-0.5 mr-2 flex-shrink-0"}),(0,We.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,We.jsx)("strong",{children:"Aten\xe7\xe3o:"})," Esta opera\xe7\xe3o criar\xe1 ",n.length,' agendamentos retroativos de uma vez. Todos ser\xe3o marcados como "realizados" e vinculados \xe0s sess\xf5es correspondentes.']})]})}),p&&(0,We.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-500 mr-2"}),(0,We.jsx)("span",{className:"text-red-800 text-sm font-medium",children:p})]})}),(0,We.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,We.jsx)("button",{type:"button",onClick:y,disabled:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:"Cancelar"}),(0,We.jsx)("button",{type:"submit",disabled:d,className:"px-6 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 flex items-center",children:d?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"animate-spin mr-2"}),"Criando ",n.length," agendamentos..."]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:Li,className:"mr-2"}),"Criar ",n.length," Agendamentos"]})})]})]})]})})]})}):null},of=e=>{let{onCreateRetroactive:t,refreshTrigger:a=0}=e;const{token:n}=Ye(),[r,i]=(0,s.useState)([]),[o,l]=(0,s.useState)(!0),[c,d]=(0,s.useState)(null),[u,h]=(0,s.useState)(!1),[m,p]=(0,s.useState)([]),[f,g]=(0,s.useState)(!1),[x,b]=(0,s.useState)({startDate:"",endDate:"",patientName:"",therapistName:""});(0,s.useEffect)((()=>{v()}),[a]);const v=async()=>{try{l(!0),d(null);const e={};x.startDate&&(e.start_date=x.startDate),x.endDate&&(e.end_date=x.endDate),e.limit=100;const t=await zp(e);i(t.orphan_sessions||[])}catch(c){console.error("Erro ao carregar sess\xf5es \xf3rf\xe3s:",c),d("Erro ao carregar sess\xf5es \xf3rf\xe3s. Tente novamente.")}finally{l(!1)}},y=(e,t)=>{b((a=>(0,Ie.A)((0,Ie.A)({},a),{},{[e]:t})))},j=e=>"".concat(e.patient_id,"-").concat(e.therapist_id,"-").concat(e.session_date),N=()=>{m.length===w.length?p([]):p([...w])},w=r.filter((e=>{const t=!x.patientName||e.patient_name.toLowerCase().includes(x.patientName.toLowerCase()),a=!x.therapistName||e.therapist_name.toLowerCase().includes(x.therapistName.toLowerCase());return t&&a}));return o?(0,We.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,We.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,We.jsx)(Vn,{icon:xo,className:"animate-spin h-8 w-8 text-blue-600 mr-3"}),(0,We.jsx)("span",{className:"text-gray-600",children:"Carregando sess\xf5es \xf3rf\xe3s..."})]})}):c?(0,We.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,We.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,We.jsx)(Vn,{icon:To,className:"h-8 w-8 text-red-500 mr-3"}),(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("p",{className:"text-red-600 font-medium",children:"Erro ao carregar dados"}),(0,We.jsx)("p",{className:"text-gray-500 text-sm",children:c}),(0,We.jsx)("button",{onClick:v,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Tentar novamente"})]})]})}):(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,We.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"mr-3 text-orange-500"}),"Sess\xf5es \xd3rf\xe3s"]}),(0,We.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[w.length," encontradas",m.length>0&&" \u2022 ".concat(m.length," selecionadas")]})]}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[w.length>0&&(0,We.jsx)("button",{onClick:N,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:m.length===w.length?"Desmarcar Todas":"Selecionar Todas"}),m.length>0&&(0,We.jsxs)("button",{onClick:()=>{0!==m.length?g(!0):alert("Selecione pelo menos uma sess\xe3o \xf3rf\xe3")},className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 transition-colors flex items-center",children:[(0,We.jsx)(Vn,{icon:Li,className:"mr-2"}),"Criar ",m.length," Agendamento(s)"]}),(0,We.jsxs)("button",{onClick:()=>h(!u),className:"flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors",children:[(0,We.jsx)(Vn,{icon:ti,className:"mr-2"}),"Filtros",(0,We.jsx)(Vn,{icon:u?Nr:Qi,className:"ml-2 w-3 h-3"})]})]})]})}),u&&(0,We.jsxs)("div",{className:"p-6 border-b border-gray-200 bg-gray-50",children:[(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data inicial"}),(0,We.jsx)("input",{type:"date",value:x.startDate,onChange:e=>y("startDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data final"}),(0,We.jsx)("input",{type:"date",value:x.endDate,onChange:e=>y("endDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,We.jsx)(Vn,{icon:Sr,className:"mr-1"}),"Paciente"]}),(0,We.jsx)("input",{type:"text",value:x.patientName,onChange:e=>y("patientName",e.target.value),placeholder:"Nome do paciente...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[(0,We.jsx)(Vn,{icon:Xn,className:"mr-1"}),"Terapeuta"]}),(0,We.jsx)("input",{type:"text",value:x.therapistName,onChange:e=>y("therapistName",e.target.value),placeholder:"Nome do terapeuta...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,We.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[(0,We.jsx)("button",{onClick:()=>{b({startDate:"",endDate:"",patientName:"",therapistName:""}),setTimeout(v,100)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Limpar"}),(0,We.jsxs)("button",{onClick:()=>{v()},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:[(0,We.jsx)(Vn,{icon:Ki,className:"mr-2"}),"Aplicar"]})]})]}),(0,We.jsx)("div",{className:"overflow-x-auto",children:0===w.length?(0,We.jsxs)("div",{className:"text-center py-12",children:[(0,We.jsx)(Vn,{icon:er,className:"h-12 w-12 text-gray-400 mb-4"}),(0,We.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma sess\xe3o \xf3rf\xe3 encontrada"}),(0,We.jsx)("p",{className:"text-gray-500",children:0===r.length?"N\xe3o h\xe1 sess\xf5es realizadas sem agendamento pr\xe9vio no per\xedodo selecionado.":"Nenhuma sess\xe3o corresponde aos filtros aplicados."})]}):(0,We.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,We.jsx)("thead",{className:"bg-gray-50",children:(0,We.jsxs)("tr",{children:[(0,We.jsx)("th",{className:"px-6 py-3 text-left",children:(0,We.jsx)("input",{type:"checkbox",checked:m.length===w.length&&w.length>0,onChange:N,className:"rounded border-gray-300 text-green-600 focus:ring-green-500"})}),(0,We.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2"}),"Data/Hora da Sess\xe3o"]}),(0,We.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[(0,We.jsx)(Vn,{icon:Sr,className:"mr-2"}),"Paciente"]}),(0,We.jsxs)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:[(0,We.jsx)(Vn,{icon:Xn,className:"mr-2"}),"Terapeuta"]}),(0,We.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Programa"}),(0,We.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,We.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map((e=>{return(0,We.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsx)("input",{type:"checkbox",checked:m.some((t=>j(t)===j(e))),onChange:()=>(e=>{const t=j(e);p((a=>{const s=a.some((e=>j(e)===t));return s?a.filter((e=>j(e)!==t)):[...a,e]}))})(e),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:er,className:"text-gray-400 mr-2"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("div",{className:"text-sm font-medium text-gray-900",children:(a=e.session_date,a?new Date(a).toLocaleDateString("pt-BR"):"-")}),(0,We.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,We.jsx)(Vn,{icon:Ti,className:"mr-1"}),"Hor\xe1rio aproximado da sess\xe3o"]})]})]})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.patient_name})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,We.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.therapist_name})}),(0,We.jsx)("td",{className:"px-6 py-4",children:(0,We.jsx)("div",{className:"text-sm text-gray-900",children:e.program_names?(0,We.jsxs)("div",{children:[(0,We.jsxs)("div",{className:"font-medium",children:[e.programs_count," programa(s) trabalhados"]}),(0,We.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.program_names.length>100?e.program_names.substring(0,100)+"...":e.program_names})]}):(0,We.jsx)("span",{className:"text-gray-500",children:"Programas n\xe3o identificados"})})}),(0,We.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,We.jsxs)("button",{onClick:()=>t(e),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-white bg-green-600 rounded-md hover:bg-green-700 transition-colors",children:[(0,We.jsx)(Vn,{icon:Li,className:"mr-2"}),"Criar Agendamento"]})})]},"".concat(e.patient_id,"-").concat(e.therapist_id,"-").concat(e.session_date));var a}))})]})}),w.length>0&&(0,We.jsx)("div",{className:"p-4 border-t border-gray-200 bg-blue-50",children:(0,We.jsxs)("div",{className:"flex items-center text-sm text-blue-700",children:[(0,We.jsx)(Vn,{icon:To,className:"mr-2 text-blue-500"}),(0,We.jsxs)("span",{children:[(0,We.jsx)("strong",{children:"Sess\xf5es \xf3rf\xe3s"})," s\xe3o sess\xf5es que foram realizadas mas n\xe3o tinham agendamento pr\xe9vio. Criar agendamentos retroativos ajuda a manter o hist\xf3rico completo das sess\xf5es."]})]})}),f&&(0,We.jsx)(rf,{isOpen:f,onClose:()=>{g(!1),p([])},selectedSessions:m.map((e=>(0,Ie.A)((0,Ie.A)({},e),{},{session_id:e.session_id||"".concat(e.patient_id,"-").concat(e.therapist_id,"-").concat(e.session_date)}))),onSuccess:()=>{g(!1),p([]),v()}})]})},lf=e=>{var t,a,n,r,i;let{isOpen:o,onClose:l,onDetectionComplete:c}=e;const[d,u]=(0,s.useState)({start_date:"",end_date:"",auto_create_retroactive:!1}),[h,m]=(0,s.useState)(!1),[p,f]=(0,s.useState)(null),[g,x]=(0,s.useState)(null),b=e=>{const{name:t,value:a,type:s,checked:n}=e.target;u((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:"checkbox"===s?n:a})))},v=()=>{u({start_date:"",end_date:"",auto_create_retroactive:!1}),f(null),x(null),m(!1),l()};return o?(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:Io,className:"mr-3 text-purple-600"}),"Detec\xe7\xe3o Inteligente de Sess\xf5es"]}),(0,We.jsx)("button",{onClick:v,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:h,children:(0,We.jsx)(Vn,{icon:lo,className:"w-6 h-6"})})]}),(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsx)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:_i,className:"text-blue-500 mt-1 mr-3"}),(0,We.jsxs)("div",{className:"text-sm text-blue-700",children:[(0,We.jsx)("h4",{className:"font-medium mb-2",children:"Como funciona a detec\xe7\xe3o inteligente:"}),(0,We.jsxs)("ul",{className:"space-y-1 text-xs",children:[(0,We.jsxs)("li",{children:["\u2022 ",(0,We.jsx)("strong",{children:"Analisa sess\xf5es realizadas"})," no per\xedodo selecionado"]}),(0,We.jsxs)("li",{children:["\u2022 ",(0,We.jsx)("strong",{children:"Identifica agendamentos correspondentes"})," com base em paciente, terapeuta e data"]}),(0,We.jsxs)("li",{children:["\u2022 ",(0,We.jsx)("strong",{children:"Marca agendamentos como completados"})," quando h\xe1 sess\xf5es correspondentes"]}),(0,We.jsxs)("li",{children:["\u2022 ",(0,We.jsx)("strong",{children:"Detecta sess\xf5es \xf3rf\xe3s"})," (realizadas sem agendamento pr\xe9vio)"]}),(0,We.jsxs)("li",{children:["\u2022 ",(0,We.jsx)("strong",{children:"Opcionalmente cria agendamentos retroativos"})," para sess\xf5es \xf3rf\xe3s"]})]})]})]})}),p?(0,We.jsxs)("div",{className:"space-y-6",children:[(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)(Vn,{icon:Ur,className:"h-16 w-16 text-green-500 mb-4"}),(0,We.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Detec\xe7\xe3o Conclu\xedda com Sucesso!"}),(0,We.jsx)("p",{className:"text-gray-600",children:"A an\xe1lise foi executada no per\xedodo especificado."})]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,We.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[(0,We.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null===(t=p.completed_sessions)||void 0===t?void 0:t.length)||0}),(0,We.jsx)("div",{className:"text-sm text-green-700 font-medium",children:"Agendamentos Completados"}),(0,We.jsx)("div",{className:"text-xs text-green-600 mt-1",children:"Agendamentos marcados como realizados"})]}),(0,We.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg text-center",children:[(0,We.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:(null===(a=p.orphan_sessions)||void 0===a?void 0:a.length)||0}),(0,We.jsx)("div",{className:"text-sm text-orange-700 font-medium",children:"Sess\xf5es \xd3rf\xe3s"}),(0,We.jsx)("div",{className:"text-xs text-orange-600 mt-1",children:"Sess\xf5es sem agendamento pr\xe9vio"})]}),(0,We.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[(0,We.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null===(n=p.retroactive_created)||void 0===n?void 0:n.length)||0}),(0,We.jsx)("div",{className:"text-sm text-blue-700 font-medium",children:"Retroativos Criados"}),(0,We.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:"Agendamentos criados automaticamente"})]})]}),(null===(r=p.completed_sessions)||void 0===r?void 0:r.length)>0&&(0,We.jsxs)("div",{className:"border border-green-200 rounded-lg p-4",children:[(0,We.jsx)("h4",{className:"font-medium text-green-800 mb-2",children:"\u2713 Agendamentos marcados como completados:"}),(0,We.jsxs)("div",{className:"text-sm text-green-700 space-y-1",children:[p.completed_sessions.slice(0,5).map(((e,t)=>(0,We.jsxs)("div",{children:["\u2022 ",e.patient_name," - ",e.therapist_name," (",new Date(e.scheduled_date).toLocaleDateString("pt-BR"),")"]},t))),p.completed_sessions.length>5&&(0,We.jsxs)("div",{className:"text-xs text-green-600",children:["... e mais ",p.completed_sessions.length-5," agendamentos"]})]})]}),(null===(i=p.orphan_sessions)||void 0===i?void 0:i.length)>0&&(0,We.jsxs)("div",{className:"border border-orange-200 rounded-lg p-4",children:[(0,We.jsx)("h4",{className:"font-medium text-orange-800 mb-2",children:"\u26a0 Sess\xf5es \xf3rf\xe3s encontradas:"}),(0,We.jsxs)("div",{className:"text-sm text-orange-700 space-y-1",children:[p.orphan_sessions.slice(0,5).map(((e,t)=>(0,We.jsxs)("div",{children:["\u2022 ",e.patient_name," - ",e.therapist_name," (",new Date(e.session_date).toLocaleDateString("pt-BR"),")"]},t))),p.orphan_sessions.length>5&&(0,We.jsxs)("div",{className:"text-xs text-orange-600",children:["... e mais ",p.orphan_sessions.length-5," sess\xf5es \xf3rf\xe3s"]})]}),!d.auto_create_retroactive&&(0,We.jsx)("p",{className:"text-xs text-orange-600 mt-2",children:'\ud83d\udca1 Use a aba "Sess\xf5es \xd3rf\xe3s" para criar agendamentos retroativos manualmente.'})]}),(0,We.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,We.jsx)("button",{onClick:()=>f(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50",children:"Nova Detec\xe7\xe3o"}),(0,We.jsx)("button",{onClick:v,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700",children:"Concluir"})]})]}):(0,We.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{try{m(!0),x(null),f(null);const e=await Bp(d);f(e.detection_results),c&&c(e.detection_results)}catch(g){console.error("Erro na detec\xe7\xe3o inteligente:",g),x(g.message||"Erro ao executar detec\xe7\xe3o inteligente")}finally{m(!1)}})()},className:"space-y-6",children:[(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2 text-gray-400"}),"Data inicial"]}),(0,We.jsx)("input",{type:"date",name:"start_date",value:d.start_date,onChange:b,placeholder:(()=>{const e=new Date;return e.setDate(e.getDate()-30),e.toISOString().split("T")[0]})(),disabled:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 disabled:bg-gray-100"}),(0,We.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Deixe em branco para \xfaltimos 30 dias"})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2 text-gray-400"}),"Data final"]}),(0,We.jsx)("input",{type:"date",name:"end_date",value:d.end_date,onChange:b,placeholder:(new Date).toISOString().split("T")[0],disabled:h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-purple-500 focus:border-purple-500 disabled:bg-gray-100"}),(0,We.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Deixe em branco para hoje"})]})]}),(0,We.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,We.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[(0,We.jsx)(Vn,{icon:Oi,className:"mr-2 text-gray-400"}),"Op\xe7\xf5es Avan\xe7adas"]}),(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)("input",{type:"checkbox",id:"auto_create_retroactive",name:"auto_create_retroactive",checked:d.auto_create_retroactive,onChange:b,disabled:h,className:"mt-1 h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"}),(0,We.jsxs)("label",{htmlFor:"auto_create_retroactive",className:"ml-3 text-sm",children:[(0,We.jsx)("span",{className:"font-medium text-gray-900",children:"Criar agendamentos retroativos automaticamente"}),(0,We.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Quando ativado, criar\xe1 automaticamente agendamentos retroativos para todas as sess\xf5es \xf3rf\xe3s encontradas. Caso contr\xe1rio, apenas listar\xe1 as sess\xf5es \xf3rf\xe3s para cria\xe7\xe3o manual."})]})]})]}),g&&(0,We.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-500 mr-2"}),(0,We.jsx)("span",{className:"text-red-800 text-sm font-medium",children:"Erro na detec\xe7\xe3o"})]}),(0,We.jsx)("p",{className:"text-red-700 text-sm mt-1",children:g})]}),(0,We.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,We.jsx)("button",{type:"button",onClick:v,disabled:h,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",children:"Cancelar"}),(0,We.jsx)("button",{type:"submit",disabled:h,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md shadow-sm hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 flex items-center",children:h?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"animate-spin mr-2"}),"Executando..."]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:Ki,className:"mr-2"}),"Executar Detec\xe7\xe3o"]})})]})]})]})]})}):null},cf=e=>{let{isOpen:t,onClose:a,orphanSession:n,onSuccess:r}=e;const[i,o]=(0,s.useState)({discipline_id:"",notes:""}),[l,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(!1),[h,m]=(0,s.useState)(!1),[p,f]=(0,s.useState)(null),[g,x]=(0,s.useState)(!1);(0,s.useEffect)((()=>{t&&(b(),o({discipline_id:"",notes:"Agendamento retroativo criado para sess\xe3o realizada em ".concat(j(null===n||void 0===n?void 0:n.session_date),".")}),f(null),x(!1))}),[t,n]);const b=async()=>{try{m(!0);const e=await(0,st.uc)();c(e||[])}catch(p){console.error("Erro ao carregar disciplinas:",p),f("Erro ao carregar lista de disciplinas")}finally{m(!1)}},v=e=>{const{name:t,value:a}=e.target;o((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:a})))},y=()=>{o({discipline_id:"",notes:""}),f(null),x(!1),a()},j=e=>e?new Date(e).toLocaleDateString("pt-BR"):"";return t&&n?(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:Li,className:"mr-3 text-green-600"}),"Criar Agendamento Retroativo"]}),(0,We.jsx)("button",{onClick:y,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:d,children:(0,We.jsx)(Vn,{icon:lo,className:"w-6 h-6"})})]}),(0,We.jsx)("div",{className:"p-6",children:g?(0,We.jsxs)("div",{className:"text-center py-8",children:[(0,We.jsx)(Vn,{icon:Ur,className:"h-16 w-16 text-green-500 mb-4"}),(0,We.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Agendamento Retroativo Criado!"}),(0,We.jsx)("p",{className:"text-gray-600",children:"O agendamento foi criado com sucesso para a sess\xe3o realizada."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsxs)("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[(0,We.jsxs)("h3",{className:"text-sm font-medium text-blue-800 mb-3 flex items-center",children:[(0,We.jsx)(Vn,{icon:_i,className:"mr-2"}),"Sess\xe3o Realizada (sem agendamento pr\xe9vio)"]}),(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-blue-700",children:"Paciente:"}),(0,We.jsxs)("div",{className:"text-blue-600 flex items-center",children:[(0,We.jsx)(Vn,{icon:Sr,className:"mr-2"}),n.patient_name]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-blue-700",children:"Terapeuta:"}),(0,We.jsxs)("div",{className:"text-blue-600 flex items-center",children:[(0,We.jsx)(Vn,{icon:Xn,className:"mr-2"}),n.therapist_name]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-blue-700",children:"Data da Sess\xe3o:"}),(0,We.jsxs)("div",{className:"text-blue-600 flex items-center",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2"}),j(n.session_date)]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("span",{className:"font-medium text-blue-700",children:"Programas Trabalhados:"}),(0,We.jsx)("div",{className:"text-blue-600",children:n.programs_count>0?"".concat(n.programs_count," programa(s)"):"N\xe3o identificados"})]})]}),n.program_names&&(0,We.jsxs)("div",{className:"mt-3 text-xs text-blue-600",children:[(0,We.jsx)("strong",{children:"Programas:"})," ",n.program_names]})]}),(0,We.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),n)try{u(!0),f(null);const e={discipline_id:i.discipline_id?parseInt(i.discipline_id):null,notes:i.notes||"Agendamento retroativo"};await qp(n.session_id,e),x(!0),setTimeout((()=>{r&&r(),y()}),2e3)}catch(p){console.error("Erro ao criar agendamento retroativo:",p),f(p.message||"Erro ao criar agendamento retroativo")}finally{u(!1)}},className:"space-y-6",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:Xn,className:"mr-2 text-gray-400"}),"\xc1rea de Interven\xe7\xe3o ",(0,We.jsx)("span",{className:"text-gray-500 text-sm",children:"(opcional)"})]}),(0,We.jsxs)("select",{name:"discipline_id",value:i.discipline_id,onChange:v,disabled:d||h,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100",children:[(0,We.jsx)("option",{value:"",children:h?"Carregando disciplinas...":"Sess\xe3o geral (todos os programas)"}),l.map((e=>(0,We.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,We.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\ud83d\udca1 Deixe em branco se a sess\xe3o trabalhou programas de m\xfaltiplas \xe1reas"})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,We.jsx)(Vn,{icon:qo,className:"mr-2 text-gray-400"}),"Observa\xe7\xf5es"]}),(0,We.jsx)("textarea",{name:"notes",value:i.notes,onChange:v,rows:3,maxLength:500,placeholder:"Observa\xe7\xf5es sobre o agendamento retroativo...",disabled:d,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-green-500 focus:border-green-500 disabled:bg-gray-100 resize-none"}),(0,We.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[i.notes.length,"/500 caracteres"]})]}),(0,We.jsx)("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:_i,className:"text-yellow-600 mt-0.5 mr-2 flex-shrink-0"}),(0,We.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,We.jsx)("strong",{children:"Agendamento Retroativo:"}),' Este agendamento ser\xe1 criado com a data/hora da sess\xe3o realizada e marcado automaticamente como "realizado". Isso ajuda a manter o hist\xf3rico completo das sess\xf5es e permite que a sess\xe3o \xf3rf\xe3 seja devidamente registrada no sistema.']})]})}),p&&(0,We.jsxs)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-md",children:[(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-500 mr-2"}),(0,We.jsx)("span",{className:"text-red-800 text-sm font-medium",children:"Erro"})]}),(0,We.jsx)("p",{className:"text-red-700 text-sm mt-1",children:p})]}),(0,We.jsxs)("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,We.jsx)("button",{type:"button",onClick:y,disabled:d,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:"Cancelar"}),(0,We.jsx)("button",{type:"submit",disabled:d,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 flex items-center",children:d?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"animate-spin mr-2"}),"Criando..."]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:Li,className:"mr-2"}),"Criar Agendamento"]})})]})]})]})})]})}):null},df=e=>{let{appointments:t=[],onNotifyTherapist:a,onViewDetails:n,onJustify:r,onRefresh:i}=e;const[o,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)({}),[u,h]=(0,s.useState)({}),m=(e,t)=>{if(!e||!t)return"Data n\xe3o informada";try{let a;a=e instanceof Date?e.toISOString().split("T")[0]:String(e).split("T")[0];const s=String(t).slice(0,5);if(!/^\d{4}-\d{2}-\d{2}$/.test(a))return"Formato de data inv\xe1lido";if(!/^\d{2}:\d{2}$/.test(s))return"Formato de hora inv\xe1lido";const n="".concat(a,"T").concat(s,":00"),r=new Date(n);if(isNaN(r.getTime()))return"Data inv\xe1lida";const i=new Date-r;if(i<0)return"Agendamento futuro";const o=Math.floor(i/864e5),l=Math.floor(i%864e5/36e5);return o>0?"".concat(o," dia(s), ").concat(l," hora(s)"):"".concat(l," hora(s)")}catch(a){return"Erro no c\xe1lculo"}},p=e=>{if(!e)return"-";return new Date(e).toLocaleDateString("pt-BR")};return 0===t.length?null:(0,We.jsxs)("div",{className:"bg-gradient-to-br from-red-50 to-rose-50 border-2 border-red-200 rounded-lg overflow-hidden transition-all duration-300 hover:shadow-md",children:[(0,We.jsx)("div",{className:"p-4 cursor-pointer",onClick:()=>l(!o),children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-red-500 to-rose-600 p-3 rounded-full shadow-sm flex-shrink-0",children:(0,We.jsx)(Vn,{icon:Qn,className:"text-white h-5 w-5"})}),(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsxs)("p",{className:"text-red-900 font-bold text-lg",children:[t.length," Agendamento(s) N\xe3o Realizado(s)"]}),(0,We.jsx)("p",{className:"text-red-700 text-sm mt-1",children:"Aguardando justificativa do terapeuta"})]})]}),(0,We.jsxs)("button",{className:"px-4 py-2 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 transition-colors flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"font-medium",children:o?"Recolher":"Expandir Lista"}),(0,We.jsx)(Vn,{icon:o?Nr:Qi,className:"h-4 w-4"})]})]})}),o&&(0,We.jsxs)("div",{className:"border-t-2 border-red-200 p-4 space-y-4 bg-white",children:[t.map((e=>{return(0,We.jsxs)("div",{className:"bg-gradient-to-r from-red-50 to-rose-50 rounded-lg p-4 border border-red-200 hover:border-red-300 transition-all duration-200",children:[(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mb-4",children:[(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsxs)("div",{className:"flex items-center text-sm",children:[(0,We.jsx)(Vn,{icon:Sr,className:"text-gray-400 mr-2 w-4"}),(0,We.jsx)("span",{className:"text-gray-600",children:"Paciente:"}),(0,We.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:e.patient_name})]}),(0,We.jsxs)("div",{className:"flex items-center text-sm",children:[(0,We.jsx)(Vn,{icon:Xn,className:"text-gray-400 mr-2 w-4"}),(0,We.jsx)("span",{className:"text-gray-600",children:"Terapeuta:"}),(0,We.jsx)("span",{className:"ml-2 font-medium text-gray-900",children:e.therapist_name})]})]}),(0,We.jsxs)("div",{className:"space-y-2",children:[(0,We.jsxs)("div",{className:"flex items-center text-sm",children:[(0,We.jsx)(Vn,{icon:er,className:"text-gray-400 mr-2 w-4"}),(0,We.jsx)("span",{className:"text-gray-600",children:"Data/Hora:"}),(0,We.jsxs)("span",{className:"ml-2 font-medium text-gray-900",children:[p(e.scheduled_date)," \xe0s ",(t=e.scheduled_time,t?t.slice(0,5):"-")]})]}),(0,We.jsxs)("div",{className:"flex items-center text-sm",children:[(0,We.jsx)(Vn,{icon:Ti,className:"text-gray-400 mr-2 w-4"}),(0,We.jsx)("span",{className:"text-gray-600",children:"Pendente h\xe1:"}),(0,We.jsx)("span",{className:"ml-2 font-medium text-red-600",children:m(e.scheduled_date,e.scheduled_time)})]})]})]}),e.notes&&(0,We.jsxs)("div",{className:"mb-4 p-3 bg-white rounded border border-red-100",children:[(0,We.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Observa\xe7\xf5es:"}),(0,We.jsx)("p",{className:"text-sm text-gray-700",children:e.notes})]}),(0,We.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,We.jsxs)("button",{onClick:()=>(async(e,t)=>{d((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!0})));try{const s=await Wp(e,t);h((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!0}))),alert("\u2705 Notifica\xe7\xe3o enviada com sucesso para ".concat(s.therapist_name,"!")),a&&a(e,t),i&&i()}catch(s){alert("\u274c Erro ao enviar notifica\xe7\xe3o: ".concat(s.message))}finally{d((e=>(0,Ie.A)((0,Ie.A)({},e),{},{[t]:!1})))}})(e.therapist_id,e.id),disabled:c[e.id]||u[e.id],className:"flex-1 min-w-[140px] px-3 py-2 rounded-md transition-colors text-sm font-medium flex items-center justify-center ".concat(u[e.id]?"bg-green-500 text-white cursor-default":c[e.id]?"bg-gray-400 text-white cursor-wait":"bg-blue-500 text-white hover:bg-blue-600"),title:u[e.id]?"Terapeuta j\xe1 foi notificado":"Enviar notifica\xe7\xe3o ao terapeuta",children:[(0,We.jsx)(Vn,{icon:u[e.id]?Ur:yi,className:"mr-2"}),u[e.id]?"Notificado \u2713":c[e.id]?"Enviando...":"Notificar Terapeuta"]}),n&&(0,We.jsxs)("button",{onClick:()=>n(e),className:"flex-1 min-w-[140px] px-3 py-2 bg-indigo-500 text-white rounded-md hover:bg-indigo-600 transition-colors text-sm font-medium flex items-center justify-center",title:"Abrir modal com informa\xe7\xf5es completas do agendamento",children:[(0,We.jsx)(Vn,{icon:li,className:"mr-2"}),"Detalhes Completos"]}),r&&(0,We.jsxs)("button",{onClick:()=>r(e),className:"flex-1 min-w-[140px] px-3 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors text-sm font-medium flex items-center justify-center",title:"Adicionar justificativa de aus\xeancia",children:[(0,We.jsx)(Vn,{icon:vr,className:"mr-2"}),"Justificar"]})]})]},e.id);var t})),(0,We.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,We.jsxs)("p",{className:"text-sm text-blue-800 flex items-center",children:[(0,We.jsx)(Vn,{icon:Ti,className:"mr-2"}),(0,We.jsx)("strong",{children:"Dica:"})," Notifique os terapeutas para que eles adicionem as justificativas dos agendamentos n\xe3o realizados."]})})]})]})},uf=e=>{let{orphanSessions:t=[],onCreateRetroactive:a,onCreateBatch:n,maxDisplay:r=5}=e;const[i,o]=(0,s.useState)(!1),[l,c]=(0,s.useState)([]),d=e=>{if(!e)return"-";return new Date(e).toLocaleDateString("pt-BR")},u=e=>"".concat(e.patient_id,"-").concat(e.therapist_id,"-").concat(e.session_date);if(0===t.length)return null;const h=i?t:t.slice(0,r),m=t.length>r;return(0,We.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 border-2 border-orange-200 rounded-lg overflow-hidden transition-all duration-300 hover:shadow-md",children:[(0,We.jsx)("div",{className:"p-4 cursor-pointer",onClick:()=>o(!i),children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-amber-600 p-3 rounded-full shadow-sm flex-shrink-0",children:(0,We.jsx)(Vn,{icon:To,className:"text-white h-5 w-5"})}),(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsxs)("p",{className:"text-orange-900 font-bold text-lg",children:[t.length," Sess\xe3o(\xf5es) \xd3rf\xe3(s)"]}),(0,We.jsx)("p",{className:"text-orange-700 text-sm mt-1",children:"Sess\xf5es realizadas sem agendamento pr\xe9vio"}),l.length>0&&(0,We.jsxs)("p",{className:"text-orange-600 text-xs mt-1 font-medium",children:[l.length," selecionada(s)"]})]})]}),(0,We.jsxs)("button",{className:"px-4 py-2 bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors flex items-center space-x-2",children:[(0,We.jsx)("span",{className:"font-medium",children:i?"Fechar":m?"Ver ".concat(r," Primeiras"):"Ver Detalhes"}),(0,We.jsx)(Vn,{icon:i?Nr:Qi,className:"h-4 w-4"})]})]})}),i&&(0,We.jsxs)("div",{className:"border-t-2 border-orange-200 p-4 space-y-4 bg-white",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between pb-3 border-b border-orange-200",children:[(0,We.jsxs)("button",{onClick:()=>{const e=i?t:t.slice(0,r);l.length===e.length?c([]):c([...e])},className:"text-sm font-medium text-orange-700 hover:text-orange-800 flex items-center",children:[(0,We.jsx)(Vn,{icon:l.length===h.length?gr:Qr,className:"mr-2"}),l.length===h.length?"Desmarcar todas":"Selecionar todas vis\xedveis"]}),l.length>0&&(0,We.jsxs)("button",{onClick:()=>{0!==l.length?n&&n(l):alert("Selecione pelo menos uma sess\xe3o \xf3rf\xe3")},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm font-medium flex items-center",children:[(0,We.jsx)(Vn,{icon:Li,className:"mr-2"}),"Criar ",l.length," Retroativo(s)"]})]}),(0,We.jsx)("div",{className:"space-y-3",children:h.map((e=>{const t=u(e),s=l.some((e=>u(e)===t));return(0,We.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-amber-50 rounded-lg p-4 border-2 transition-all duration-200 ".concat(s?"border-orange-400 shadow-md":"border-orange-200 hover:border-orange-300"),children:[(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)("input",{type:"checkbox",checked:s,onChange:()=>(e=>{const t=u(e);c((a=>{const s=a.some((e=>u(e)===t));return s?a.filter((e=>u(e)!==t)):[...a,e]}))})(e),className:"mt-1 mr-3 h-5 w-5 rounded border-orange-300 text-orange-600 focus:ring-orange-500 cursor-pointer"}),(0,We.jsxs)("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-3 gap-3",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-xs text-gray-600",children:"Paciente"}),(0,We.jsxs)("p",{className:"font-medium text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:Sr,className:"text-gray-400 mr-2 w-4"}),e.patient_name]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-xs text-gray-600",children:"Terapeuta"}),(0,We.jsxs)("p",{className:"font-medium text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:Xn,className:"text-gray-400 mr-2 w-4"}),e.therapist_name]})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-xs text-gray-600",children:"Data da Sess\xe3o"}),(0,We.jsxs)("p",{className:"font-medium text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:er,className:"text-gray-400 mr-2 w-4"}),d(e.session_date)]})]})]}),(0,We.jsxs)("button",{onClick:()=>a&&a(e),className:"ml-4 px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors text-sm font-medium whitespace-nowrap flex items-center",title:"Criar agendamento retroativo para esta sess\xe3o",children:[(0,We.jsx)(Vn,{icon:Li,className:"mr-2"}),"Criar Retroativo"]})]}),e.program_names&&(0,We.jsxs)("div",{className:"mt-3 pt-3 border-t border-orange-200",children:[(0,We.jsxs)("p",{className:"text-xs text-gray-600 mb-1 flex items-center",children:[(0,We.jsx)(Vn,{icon:Ei,className:"mr-2"}),"Programas trabalhados (",e.programs_count||0,"):"]}),(0,We.jsx)("p",{className:"text-sm text-gray-700",children:e.program_names.length>150?e.program_names.substring(0,150)+"...":e.program_names})]})]},t)}))}),(0,We.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,We.jsxs)("p",{className:"text-sm text-blue-800 flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"mr-2 text-blue-600"}),(0,We.jsx)("strong",{children:"Sess\xf5es \xf3rf\xe3s"}),"\xa0s\xe3o sess\xf5es que foram realizadas mas n\xe3o tinham agendamento pr\xe9vio. Criar agendamentos retroativos ajuda a manter o hist\xf3rico completo."]})}),m&&!i&&(0,We.jsx)("div",{className:"mt-4 text-center",children:(0,We.jsxs)("button",{onClick:()=>o(!0),className:"text-orange-600 hover:text-orange-700 font-medium text-sm",children:["Ver todas as ",t.length," sess\xf5es \xf3rf\xe3s \u2192"]})})]})]})},hf=e=>{let{onResolveAction:t,onResolveOrphans:a,onResolveAll:n,onViewAppointmentDetails:r,onJustifyAppointment:i,onCreateRetroactive:o,onCreateBatchRetroactive:l,refreshTrigger:c=0}=e;const[d,u]=(0,s.useState)(null),[h,m]=(0,s.useState)(!0),[p,f]=(0,s.useState)(null),[g,x]=(0,s.useState)(null);(0,s.useEffect)((()=>{b()}),[c]);const b=async()=>{try{m(!0),f(null);const e=await Up();u(e),x(new Date)}catch(Ff){f("Erro ao carregar dados do sistema")}finally{m(!1)}},v=()=>{if(!g)return"";const e=Math.floor((new Date-g)/1e3);if(e<60)return"agora mesmo";const t=Math.floor(e/60);return 1===t?"h\xe1 1 minuto":"h\xe1 ".concat(t," minutos")};if(h)return(0,We.jsx)("div",{className:"bg-white rounded-xl shadow-sm border-2 border-gray-200 p-8",children:(0,We.jsxs)("div",{className:"flex items-center justify-center space-x-3",children:[(0,We.jsx)(Vn,{icon:xo,className:"animate-spin h-6 w-6 text-blue-600"}),(0,We.jsx)("span",{className:"text-gray-600 font-medium",children:"Carregando status do sistema..."})]})});if(p)return(0,We.jsx)("div",{className:"bg-white rounded-xl shadow-sm border-2 border-red-200 p-6",children:(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"bg-red-100 p-3 rounded-full",children:(0,We.jsx)(Vn,{icon:pr,className:"text-red-500 h-5 w-5"})}),(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsx)("h3",{className:"text-red-800 font-semibold",children:p}),(0,We.jsx)("button",{onClick:b,className:"text-sm text-red-600 hover:text-red-700 underline mt-1",children:"Tentar novamente"})]})]})});const{orphan_sessions:y=[],missed_appointments:j=[],detected_today:N=0}=d||{},w=y.length+j.length;return 0===w&&0===N?(0,We.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl shadow-sm border-2 border-green-200 p-6 transition-all duration-300 hover:shadow-md",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-3 rounded-full shadow-sm",children:(0,We.jsx)(Vn,{icon:Ur,className:"text-white h-6 w-6"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"text-green-900 font-bold text-lg",children:"Sistema Funcionando Perfeitamente"}),(0,We.jsxs)("p",{className:"text-green-700 text-sm flex items-center mt-1",children:[(0,We.jsx)(Vn,{icon:bo,className:"mr-2"}),"Automa\xe7\xe3o ativa \u2022 Nenhuma a\xe7\xe3o pendente"]})]})]}),(0,We.jsx)("div",{className:"text-right",children:(0,We.jsxs)("p",{className:"text-xs text-green-600 flex items-center",children:[(0,We.jsx)(Vn,{icon:Ti,className:"mr-1"}),"Atualizado ",v()]})})]})}):(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border-2 border-gray-200 overflow-hidden transition-all duration-300 hover:shadow-md",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 px-6 py-4",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"bg-white bg-opacity-20 p-2 rounded-full",children:(0,We.jsx)(Vn,{icon:bo,className:"text-white h-5 w-5"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h2",{className:"text-white font-bold text-lg",children:"Sistema de Automa\xe7\xe3o"}),(0,We.jsxs)("p",{className:"text-blue-100 text-sm flex items-center",children:[(0,We.jsx)(Vn,{icon:Ti,className:"mr-2 text-xs"}),"Atualizado ",v()," \u2022 Execu\xe7\xe3o a cada 30 minutos"]})]})]}),w>0&&(0,We.jsx)("div",{className:"bg-white text-blue-600 px-4 py-2 rounded-full font-bold text-lg shadow-sm",children:w})]})}),(0,We.jsxs)("div",{className:"p-6 space-y-4",children:[N>0&&(0,We.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg p-4 transition-all duration-200 hover:shadow-sm",children:(0,We.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-3 rounded-full shadow-sm flex-shrink-0",children:(0,We.jsx)(Vn,{icon:Ur,className:"text-white h-5 w-5"})}),(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsxs)("p",{className:"text-green-900 font-bold text-lg",children:[N," Sess\xf5es Vinculadas Hoje"]}),(0,We.jsx)("p",{className:"text-green-700 text-sm mt-1",children:"Sistema detectou e vinculou automaticamente \xe0s sess\xf5es agendadas"})]}),(0,We.jsx)("div",{className:"bg-green-100 text-green-700 px-3 py-1 rounded-full text-xs font-semibold",children:"Autom\xe1tico"})]})}),y.length>0&&(0,We.jsx)("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 border-2 border-orange-200 rounded-lg p-4 transition-all duration-200 hover:shadow-md hover:border-orange-300",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-orange-500 to-amber-600 p-3 rounded-full shadow-sm flex-shrink-0",children:(0,We.jsx)(Vn,{icon:Li,className:"text-white h-5 w-5"})}),(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsxs)("p",{className:"text-orange-900 font-bold text-lg",children:[y.length," Sess\xe3o(\xf5es) \xd3rf\xe3(s)"]}),(0,We.jsx)("p",{className:"text-orange-700 text-sm mt-1",children:"Sess\xf5es realizadas sem agendamento pr\xe9vio \u2022 Criar retroativos"})]})]}),(0,We.jsxs)("button",{onClick:()=>{return e="orphans",void(t?t(e):"orphans"===e&&a?a():"all"===e&&n?n():"missed"===e&&alert("Para justificar aus\xeancias, acesse a lista de agendamentos e clique no agendamento n\xe3o realizado para adicionar a justificativa."));var e},className:"ml-4 px-5 py-2.5 bg-gradient-to-r from-orange-500 to-amber-600 text-white rounded-lg font-semibold text-sm hover:from-orange-600 hover:to-amber-700 hover:shadow-lg transition-all duration-200 flex items-center space-x-2 transform hover:scale-105 flex-shrink-0",children:[(0,We.jsx)("span",{children:"Resolver"}),(0,We.jsx)(Vn,{icon:mo,className:"h-3 w-3"})]})]})}),j.length>0&&(0,We.jsx)(df,{appointments:j,onNotifyTherapist:(e,t)=>{console.log("Notificar terapeuta ".concat(e," sobre agendamento ").concat(t)),alert("Funcionalidade de notifica\xe7\xe3o ser\xe1 implementada na Fase 2")},onViewDetails:e=>{r?r(e):console.log("Ver detalhes do agendamento ".concat(e.id))},onJustify:e=>{i?i(e):console.log("Justificar agendamento ".concat(e.id))},onRefresh:b}),y.length>0&&(0,We.jsx)(uf,{orphanSessions:y,onCreateRetroactive:o,onCreateBatch:l,maxDisplay:5})]})]}),(0,We.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 flex items-center justify-center space-x-2 text-sm text-blue-700",children:[(0,We.jsx)(Vn,{icon:bo,className:"text-blue-500"}),(0,We.jsxs)("span",{className:"font-medium",children:["Pr\xf3xima detec\xe7\xe3o autom\xe1tica em aproximadamente ",30-(new Date).getMinutes()%30," minutos"]})]})]})},mf=e=>{let{isOpen:t,onClose:a,onEditSingle:n,onEditSeries:r,onDeleteSingle:i,onDeleteSeries:o,appointment:l,actionType:c="edit"}=e;const[d,u]=(0,s.useState)("single");if(!t||!l)return null;const h={edit:{title:"Editar Agendamento Recorrente",single:"Editar apenas este agendamento",singleDesc:"Altera somente este agendamento espec\xedfico, sem afetar os demais da s\xe9rie",series:"Editar toda a s\xe9rie",seriesDesc:"Altera este e todos os agendamentos futuros da s\xe9rie recorrente",icon:vr,color:"blue"},delete:{title:"Excluir Agendamento Recorrente",single:"Excluir apenas este agendamento",singleDesc:"Remove somente este agendamento espec\xedfico, mantendo os demais da s\xe9rie",series:"Excluir toda a s\xe9rie",seriesDesc:"Remove este e todos os agendamentos futuros da s\xe9rie recorrente",icon:gi,color:"red"}}[c];return(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,We.jsxs)("div",{className:"bg-gradient-to-r from-".concat(h.color,"-500 to-").concat(h.color,"-600 px-6 py-4 flex items-center justify-between"),children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"bg-white bg-opacity-20 p-2 rounded-full",children:(0,We.jsx)(Vn,{icon:h.icon,className:"text-white h-5 w-5"})}),(0,We.jsx)("h2",{className:"text-xl font-bold text-white",children:h.title})]}),(0,We.jsx)("button",{onClick:a,className:"text-white hover:bg-white hover:bg-opacity-20 p-2 rounded-lg transition-colors",children:(0,We.jsx)(Vn,{icon:lo,className:"h-5 w-5"})})]}),(0,We.jsxs)("div",{className:"p-6 space-y-6",children:[(0,We.jsxs)("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-lg p-4",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,We.jsx)(Vn,{icon:$r,className:"text-purple-600"}),(0,We.jsxs)("h3",{className:"font-bold text-purple-900",children:["Agendamento Recorrente - ",{weekly:"Semanal",biweekly:"Quinzenal",monthly:"Mensal"}[l.recurrence_type]||"Recorrente"]})]}),(0,We.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-gray-600",children:"Paciente"}),(0,We.jsx)("p",{className:"font-medium text-gray-900",children:l.patient_name})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-gray-600",children:"Terapeuta"}),(0,We.jsx)("p",{className:"font-medium text-gray-900",children:l.therapist_name})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-gray-600",children:"Data"}),(0,We.jsx)("p",{className:"font-medium text-gray-900",children:(e=>{if(!e)return"-";return new Date(e).toLocaleDateString("pt-BR")})(l.scheduled_date)})]}),(0,We.jsxs)("div",{children:[(0,We.jsx)("p",{className:"text-gray-600",children:"Hor\xe1rio"}),(0,We.jsx)("p",{className:"font-medium text-gray-900",children:(m=l.scheduled_time,m?m.substring(0,5):"-")})]})]})]}),(0,We.jsxs)("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4 flex items-start space-x-3",children:[(0,We.jsx)(Vn,{icon:To,className:"text-yellow-600 mt-1"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h4",{className:"font-semibold text-yellow-900 mb-1",children:"Aten\xe7\xe3o"}),(0,We.jsx)("p",{className:"text-sm text-yellow-800",children:"Este agendamento faz parte de uma s\xe9rie recorrente. Escolha como deseja proceder:"})]})]}),(0,We.jsxs)("div",{className:"space-y-3",children:[(0,We.jsx)("label",{className:"block border-2 rounded-lg p-4 cursor-pointer transition-all ".concat("single"===d?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:(0,We.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,We.jsx)("input",{type:"radio",name:"editOption",value:"single",checked:"single"===d,onChange:e=>u(e.target.value),className:"mt-1 h-5 w-5 text-blue-600 focus:ring-blue-500"}),(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:er,className:"text-blue-600"}),(0,We.jsx)("h4",{className:"font-bold text-gray-900",children:h.single})]}),(0,We.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:h.singleDesc})]})]})}),(0,We.jsx)("label",{className:"block border-2 rounded-lg p-4 cursor-pointer transition-all ".concat("series"===d?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:(0,We.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,We.jsx)("input",{type:"radio",name:"editOption",value:"series",checked:"series"===d,onChange:e=>u(e.target.value),className:"mt-1 h-5 w-5 text-purple-600 focus:ring-purple-500"}),(0,We.jsxs)("div",{className:"flex-1",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,We.jsx)(Vn,{icon:$r,className:"text-purple-600"}),(0,We.jsx)("h4",{className:"font-bold text-gray-900",children:h.series})]}),(0,We.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:h.seriesDesc})]})]})})]})]}),(0,We.jsxs)("div",{className:"px-6 py-4 bg-gray-50 flex items-center justify-end space-x-3 rounded-b-xl",children:[(0,We.jsx)("button",{onClick:a,className:"px-4 py-2 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors font-medium",children:"Cancelar"}),(0,We.jsx)("button",{onClick:()=>{"single"===d?"edit"===c?n(l):i(l):"edit"===c?r(l):o(l),a()},className:"px-6 py-2 bg-gradient-to-r from-".concat(h.color,"-500 to-").concat(h.color,"-600 text-white rounded-lg hover:from-").concat(h.color,"-600 hover:to-").concat(h.color,"-700 transition-all font-semibold shadow-sm hover:shadow-md"),children:"Confirmar"})]})]})});var m},pf=e=>{let{isOpen:t,onClose:a,onConfirm:n,appointment:r,isLoading:i=!1}=e;const[o,l]=(0,s.useState)("cancelado_paciente"),[c,d]=(0,s.useState)(""),[u,h]=(0,s.useState)({});if(!t||!r)return null;return(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,We.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,We.jsx)("div",{className:"bg-gradient-to-r from-orange-600 to-red-600 px-6 py-4 rounded-t-2xl",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,We.jsx)("div",{className:"bg-white bg-opacity-20 p-3 rounded-full",children:(0,We.jsx)(Vn,{icon:Pr,className:"text-white text-xl"})}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h2",{className:"text-xl font-bold text-white",children:"Cancelar Agendamento"}),(0,We.jsx)("p",{className:"text-orange-100 text-sm",children:"Manter hist\xf3rico para auditoria"})]})]}),(0,We.jsx)("button",{onClick:a,disabled:i,className:"text-white hover:text-orange-200 transition-colors disabled:opacity-50",children:(0,We.jsx)(Vn,{icon:lo,className:"text-xl"})})]})}),(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,We.jsxs)("h3",{className:"font-semibold text-gray-800 mb-3 flex items-center",children:[(0,We.jsx)(Vn,{icon:_i,className:"mr-2 text-blue-500"}),"Agendamento a ser cancelado"]}),(0,We.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Paciente:"}),(0,We.jsx)("span",{className:"font-semibold text-gray-900",children:r.patient_name})]}),(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Terapeuta:"}),(0,We.jsx)("span",{className:"font-semibold text-gray-900",children:r.therapist_name})]}),(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Data:"}),(0,We.jsxs)("span",{className:"font-semibold text-gray-900",children:[(e=>{try{return new Date(e).toLocaleDateString("pt-BR")}catch(t){return e}})(r.scheduled_date)," \xe0s ",r.scheduled_time]})]}),r.discipline_name&&(0,We.jsxs)("div",{className:"flex justify-between",children:[(0,We.jsx)("span",{className:"text-gray-600",children:"Disciplina:"}),(0,We.jsx)("span",{className:"font-semibold text-gray-900",children:r.discipline_name})]})]})]}),(0,We.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:To,className:"text-yellow-600 mt-1 mr-3"}),(0,We.jsxs)("div",{children:[(0,We.jsx)("h4",{className:"font-semibold text-yellow-800 mb-1",children:"Diferen\xe7a entre Cancelar e Excluir"}),(0,We.jsxs)("ul",{className:"text-sm text-yellow-700 space-y-1",children:[(0,We.jsxs)("li",{children:["\u2022 ",(0,We.jsx)("strong",{children:"Cancelar:"})," Mant\xe9m hist\xf3rico, registra motivo, conta nas estat\xedsticas"]}),(0,We.jsxs)("li",{children:["\u2022 ",(0,We.jsx)("strong",{children:"Excluir:"})," Remove permanentemente do banco (n\xe3o recomendado)"]})]}),(0,We.jsx)("p",{className:"text-sm text-yellow-700 mt-2",children:"\u26a0\ufe0f Cancelamentos n\xe3o podem ser revertidos, mas mant\xeam rastreabilidade para auditoria."})]})]})}),(0,We.jsxs)("div",{className:"space-y-4",children:[(0,We.jsxs)("div",{children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tipo de Motivo *"}),(0,We.jsx)("select",{value:o,onChange:e=>l(e.target.value),disabled:i,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[{value:"cancelado_paciente",label:"Cancelado pelo Paciente/Respons\xe1vel"},{value:"cancelado_clinica",label:"Cancelado pela Cl\xednica"},{value:"terapeuta_indisponivel",label:"Terapeuta Indispon\xedvel"},{value:"feriado",label:"Feriado/Cl\xednica Fechada"},{value:"remarcacao",label:"Remarca\xe7\xe3o Solicitada"},{value:"outro",label:"Outro Motivo"}].map((e=>(0,We.jsx)("option",{value:e.value,children:e.label},e.value)))})]}),(0,We.jsxs)("div",{children:[(0,We.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Descri\xe7\xe3o do Motivo *",(0,We.jsxs)("span",{className:"text-gray-500 font-normal ml-2",children:["(",c.length,"/500 caracteres)"]})]}),(0,We.jsx)("textarea",{value:c,onChange:e=>{d(e.target.value),h((e=>(0,Ie.A)((0,Ie.A)({},e),{},{reasonDescription:null})))},disabled:i,placeholder:"Descreva detalhadamente o motivo do cancelamento. Ex: Paciente avisou que n\xe3o poder\xe1 comparecer devido a problema de transporte.",rows:4,maxLength:500,className:"w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 disabled:opacity-50 disabled:cursor-not-allowed ".concat(u.reasonDescription?"border-red-500":"border-gray-300")}),u.reasonDescription&&(0,We.jsx)("p",{className:"text-red-500 text-sm mt-1",children:u.reasonDescription}),(0,We.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"M\xednimo 10 caracteres. Seja espec\xedfico para facilitar an\xe1lises futuras."})]})]}),(0,We.jsx)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,We.jsxs)("div",{className:"flex items-start",children:[(0,We.jsx)(Vn,{icon:_i,className:"text-blue-600 mt-1 mr-3"}),(0,We.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,We.jsx)("p",{className:"font-semibold mb-1",children:"Registro de Auditoria"}),(0,We.jsx)("p",{children:"O cancelamento ser\xe1 registrado com seu nome de usu\xe1rio e timestamp para rastreabilidade completa. Esses dados ficam dispon\xedveis para consulta futura."})]})]})})]}),(0,We.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[(0,We.jsx)("button",{onClick:a,disabled:i,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Voltar"}),(0,We.jsx)("button",{onClick:()=>{if(!(()=>{const e={};return c.trim()?c.length<10?e.reasonDescription="Descri\xe7\xe3o deve ter pelo menos 10 caracteres":c.length>500&&(e.reasonDescription="Descri\xe7\xe3o deve ter no m\xe1ximo 500 caracteres"):e.reasonDescription="Descri\xe7\xe3o do motivo \xe9 obrigat\xf3ria",h(e),0===Object.keys(e).length})())return;const e={reason_type:o,reason_description:c.trim()};n(r,e)},disabled:i,className:"px-6 py-2 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg hover:from-orange-700 hover:to-red-700 transition-all disabled:opacity-50 flex items-center space-x-2",children:i?(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:xo,className:"fa-spin"}),(0,We.jsx)("span",{children:"Cancelando..."})]}):(0,We.jsxs)(We.Fragment,{children:[(0,We.jsx)(Vn,{icon:Pr}),(0,We.jsx)("span",{children:"Confirmar Cancelamento"})]})})]})]})})},ff=e=>{let{appointments:t=[],therapists:a=[],onAppointmentClick:n,onCreateAppointment:r}=e;const[i,o]=(0,s.useState)(h(new Date)),[l,c]=(0,s.useState)("all"),d=Array.from({length:16},((e,t)=>t+6)),u=["Segunda","Ter\xe7a","Quarta","Quinta","Sexta","S\xe1bado"];function h(e){const t=new Date(e),a=t.getDay(),s=t.getDate()-a+(0===a?-6:1);return new Date(t.setDate(s))}const m="all"===l?t:t.filter((e=>e.therapist_id===parseInt(l))),p=e=>e.toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}),f=e=>{const t=new Date;return e.toDateString()===t.toDateString()},g=(()=>{const e=[];for(let t=0;t<6;t++){const a=new Date(i);a.setDate(i.getDate()+t),e.push(a)}return e})();return(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[0===t.length&&(0,We.jsx)("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,We.jsx)("p",{className:"text-sm text-yellow-800",children:'\u26a0\ufe0f Nenhum agendamento carregado. Verifique se h\xe1 agendamentos cadastrados ou ajuste os filtros na aba "Lista".'})}),t.length>0&&0===m.length&&(0,We.jsx)("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,We.jsx)("p",{className:"text-sm text-blue-800",children:'\u2139\ufe0f Nenhum agendamento do terapeuta selecionado. Tente "Todos os Terapeutas".'})}),(0,We.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,We.jsxs)("div",{className:"flex items-center gap-4",children:[(0,We.jsx)("button",{onClick:()=>{const e=new Date(i);e.setDate(e.getDate()-7),o(e)},className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",title:"Semana anterior",children:(0,We.jsx)(Vn,{icon:ho,className:"text-gray-700"})}),(0,We.jsxs)("button",{onClick:()=>{o(h(new Date))},className:"px-4 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg transition-colors flex items-center gap-2",title:"Voltar para semana atual",children:[(0,We.jsx)(Vn,{icon:Ro}),(0,We.jsx)("span",{className:"font-medium",children:"Hoje"})]}),(0,We.jsx)("button",{onClick:()=>{const e=new Date(i);e.setDate(e.getDate()+7),o(e)},className:"px-3 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",title:"Pr\xf3xima semana",children:(0,We.jsx)(Vn,{icon:mo,className:"text-gray-700"})}),(0,We.jsx)("div",{className:"ml-4",children:(0,We.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:[g[0].toLocaleDateString("pt-BR",{day:"2-digit",month:"long"})," - ",g[5].toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"})]})})]}),(0,We.jsxs)("div",{className:"flex items-center gap-3",children:[(0,We.jsx)(Vn,{icon:ti,className:"text-gray-500"}),(0,We.jsxs)("select",{value:l,onChange:e=>c(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"all",children:"Todos os Terapeutas"}),a.map((e=>(0,We.jsx)("option",{value:e.id,children:e.full_name},e.id)))]})]})]}),(0,We.jsx)("div",{className:"overflow-x-auto",children:(0,We.jsxs)("div",{className:"min-w-[900px]",children:[(0,We.jsxs)("div",{className:"grid grid-cols-7 border-b-2 border-gray-300",children:[(0,We.jsx)("div",{className:"p-2 font-semibold text-gray-600 text-center bg-gray-50",children:"Hor\xe1rio"}),g.map(((e,t)=>(0,We.jsxs)("div",{className:"p-2 font-semibold text-center ".concat(f(e)?"bg-blue-100 text-blue-800":"bg-gray-50 text-gray-700"),children:[(0,We.jsx)("div",{className:"text-xs",children:u[t]}),(0,We.jsx)("div",{className:"text-sm ".concat(f(e)?"font-bold":""),children:p(e)})]},t)))]}),d.map((e=>(0,We.jsxs)("div",{className:"grid grid-cols-7 border-b border-gray-200",children:[(0,We.jsx)("div",{className:"p-2 text-sm font-medium text-gray-600 text-center bg-gray-50 border-r border-gray-200",children:"".concat(e.toString().padStart(2,"0"),":00")}),g.map(((t,a)=>{const s=((e,t)=>{const a=e.toISOString().split("T")[0];return m.filter((e=>!(!e.scheduled_date||!e.scheduled_time)&&(e.scheduled_date.split("T")[0]===a&&parseInt(e.scheduled_time.split(":")[0])===t)))})(t,e),r=s.length>1;return(0,We.jsx)("div",{className:"p-1 min-h-[80px] border-r border-gray-200 ".concat(f(t)?"bg-blue-50/30":""," ").concat(r?"bg-red-50":""),children:0===s.length?(0,We.jsx)("div",{className:"h-full flex items-center justify-center text-gray-300",children:(0,We.jsx)("span",{className:"text-xs",children:"\u2014"})}):(0,We.jsx)("div",{className:"space-y-1",children:s.map(((e,t)=>{var a;return(0,We.jsxs)("div",{onClick:()=>n&&n(e),className:"\n                              p-2 rounded text-xs cursor-pointer\n                              transition-all hover:shadow-md hover:scale-105\n                              ".concat(ef(e.status),"\n                              ").concat(r?"border-2 border-red-500":"","\n                            "),title:"".concat(e.patient_name," - ").concat(e.therapist_name,"\n").concat(Zp(e.status,e.justified_at)),children:[(0,We.jsxs)("div",{className:"font-semibold truncate",children:["[",null===(a=e.therapist_name)||void 0===a?void 0:a.split(" ")[0],"]"]}),(0,We.jsx)("div",{className:"truncate text-xs mt-0.5",children:e.patient_name}),e.discipline_name&&(0,We.jsx)("div",{className:"text-xs opacity-75 truncate mt-0.5",children:e.discipline_name})]},e.id||t)}))})},a)}))]},e)))]})}),(0,We.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,We.jsxs)("div",{className:"flex items-center justify-between",children:[(0,We.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,We.jsxs)("div",{className:"flex items-center gap-2",children:[(0,We.jsx)("div",{className:"w-4 h-4 rounded bg-yellow-100 border border-yellow-200"}),(0,We.jsx)("span",{className:"text-gray-700",children:"Agendado"})]}),(0,We.jsxs)("div",{className:"flex items-center gap-2",children:[(0,We.jsx)("div",{className:"w-4 h-4 rounded bg-green-100 border border-green-200"}),(0,We.jsx)("span",{className:"text-gray-700",children:"Realizado"})]}),(0,We.jsxs)("div",{className:"flex items-center gap-2",children:[(0,We.jsx)("div",{className:"w-4 h-4 rounded bg-red-100 border border-red-200"}),(0,We.jsx)("span",{className:"text-gray-700",children:"N\xe3o Realizado"})]}),(0,We.jsxs)("div",{className:"flex items-center gap-2",children:[(0,We.jsx)("div",{className:"w-4 h-4 rounded bg-orange-100 border border-orange-200"}),(0,We.jsx)("span",{className:"text-gray-700",children:"Cancelado"})]}),(0,We.jsxs)("div",{className:"flex items-center gap-2",children:[(0,We.jsx)("div",{className:"w-4 h-4 rounded bg-red-50 border-2 border-red-500"}),(0,We.jsx)("span",{className:"text-gray-700 font-semibold",children:"Conflito"})]})]}),(0,We.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,We.jsx)(Vn,{icon:li,className:"mr-2"}),(0,We.jsx)("span",{className:"font-medium",children:m.length})," agendamentos vis\xedveis"]})]})})]})};var gf=a(7762);a(557);class xf{async generateReport(e){try{const t=await this.fetchReportData(e);return"all"===e.scope.type?this.generateGeneralReport(t,e):this.generateIndividualReport(t,e)}catch(t){throw console.error("Erro ao gerar relat\xf3rio:",t),new Error("Falha na gera\xe7\xe3o do relat\xf3rio")}}async fetchReportData(e){const t={start_date:e.period.startDate,end_date:e.period.endDate,therapist_id:e.scope.therapistId||void 0,limit:1e3},a=(await Cp(t)).appointments||[],s=await Ep(e.period.startDate,e.period.endDate);return{appointments:a,statistics:s.clinic_statistics?{total_appointments:s.clinic_statistics.total_appointments||0,completed_appointments:s.clinic_statistics.completed||0,missed_appointments:s.clinic_statistics.missed||0,cancelled_appointments:s.clinic_statistics.cancelled||0,scheduled_appointments:s.clinic_statistics.scheduled||0,attendance_rate:s.clinic_statistics.attendance_rate||0,completion_rate:s.clinic_statistics.completion_rate||0}:{total_appointments:0,completed_appointments:0,missed_appointments:0,cancelled_appointments:0,scheduled_appointments:0,attendance_rate:0,completion_rate:0},config:e}}generateGeneralReport(e,t){var a=this;const s=new gf.default({orientation:"portrait",unit:"mm",format:"a4"}),{appointments:n,statistics:r}=e;let i=25;i=this.addReportHeader(s,"RELATORIO DE AGENDAMENTOS - GERAL",t);const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e>s.internal.pageSize.getHeight()-15-t?(a.addReportFooter(s),s.addPage(),25):e};i=o(i),i=this.addExecutiveSummary(s,r,n,i),i=o(i),i=this.addPredictedVsActual(s,r,i),i=o(i),i=this.addTherapistPerformance(s,n,i),i=o(i),i=this.addDetailedSchedule(s,n,i),this.addReportFooter(s);const l="relatorio_agendamentos_geral_".concat(t.period.startDate,"_").concat(t.period.endDate,".pdf");return s.save(l),{success:!0,fileName:l}}generateIndividualReport(e,t){var a=this;const s=new gf.default("portrait","mm","a4"),{appointments:n}=e,r=n.length>0?n[0].therapist_name:"Terapeuta N\xe3o Encontrado";let i=this.addReportHeader(s,"RELAT\xd3RIO INDIVIDUAL - ".concat(r.toUpperCase()),t);const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;return e>s.internal.pageSize.getHeight()-15-t?(a.addReportFooter(s),s.addPage(),25):e};i=o(i),i=this.addIndividualPerformance(s,n,i),i=o(i),i=this.addStatisticalDetails(s,n,i),i=o(i),i=this.addIndividualDetailedSchedule(s,n,i),i=o(i),i=this.addPaymentSummary(s,n,t,i),this.addReportFooter(s);const l="relatorio_individual_".concat(r.replace(/\s+/g,"_"),"_").concat(t.period.startDate,"_").concat(t.period.endDate,".pdf");return s.save(l),{success:!0,fileName:l}}addReportHeader(e,t,a){const s=15,n=e.internal.pageSize.getWidth();let r=25;e.setFontSize(16),e.setFont("helvetica","bold"),e.text(t,n/2,r,{align:"center"}),r+=8,e.setFontSize(10),e.setFont("helvetica","normal"),e.text("Per\xedodo: ".concat(this.formatDate(a.period.startDate)," a ").concat(this.formatDate(a.period.endDate)),s,r),e.text("Gerado em: ".concat(this.formatDate((new Date).toISOString())),n-s,r,{align:"right"}),r+=6;const i="all"===a.scope.type?"Escopo: Todos os Terapeutas":"Escopo: Terapeuta Individual";return e.text(i,s,r),r+=10,e.setLineWidth(.2),e.line(s,r,n-s,r),r+8}addExecutiveSummary(e,t,a,s){const n=15,r=e.internal.pageSize.getWidth();e.setFontSize(12),e.setFont("helvetica","bold"),e.setFillColor(240,248,255),e.rect(n,s-4,r-30,7,"F"),e.setTextColor(25,118,210),e.text("RESUMO EXECUTIVO",17,s),e.setTextColor(0,0,0),s+=12;const i=a.filter((e=>"missed"===e.status&&e.justified_at)).length,o=(t.missed_appointments||0)-i,l=[["Total de Agendamentos","".concat(t.total_appointments||0)],["Sess\xf5es Realizadas","".concat(t.completed_appointments||0," (").concat(this.calculatePercentage(t.completed_appointments,t.total_appointments),"%)")],["Faltas N\xe3o Justificadas","".concat(o," (").concat(this.calculatePercentage(o,t.total_appointments),"%)")],["Faltas Justificadas","".concat(i," (").concat(this.calculatePercentage(i,t.total_appointments),"%)")],["Cancelamentos","".concat(t.cancelled_appointments||0," (").concat(this.calculatePercentage(t.cancelled_appointments,t.total_appointments),"%)")],["Taxa de Comparecimento","".concat(t.attendance_rate||0,"%")]];e.autoTable({startY:s,head:[["Indicador","Resultado"]],body:l,theme:"grid",headStyles:{fillColor:[25,118,210],textColor:[255,255,255],fontStyle:"bold",fontSize:10,halign:"center"},bodyStyles:{fontSize:9,textColor:[60,60,60],lineColor:[200,200,200],lineWidth:.5},columnStyles:{0:{cellWidth:110,halign:"left",fontStyle:"normal",textColor:[70,70,70]},1:{cellWidth:70,halign:"center",fontStyle:"bold",textColor:[25,118,210]}},margin:{left:n,right:n}});let c=e.lastAutoTable.finalY+5;const d=t.total_appointments-(t.cancelled_appointments||0);return e.setFontSize(8),e.setFont("helvetica","italic"),e.setTextColor(100,100,100),e.text("* Taxa de Comparecimento calculada sobre agendamentos n\xe3o cancelados",n,c),e.text("  (".concat(t.completed_appointments||0," realizadas \xf7 ").concat(d," n\xe3o canceladas = ").concat(t.attendance_rate||0,"%)"),n,c+4),e.setTextColor(0,0,0),e.setFont("helvetica","normal"),c+20}addPredictedVsActual(e,t,a){const s=e.internal.pageSize.getWidth();e.setFontSize(12),e.setFont("helvetica","bold"),e.setFillColor(255,247,237),e.rect(15,a-4,s-30,7,"F"),e.setTextColor(234,88,12),e.text("AN\xc1LISE DE EFETIVIDADE",17,a),e.setTextColor(0,0,0),a+=12;const n=(t.completed_appointments||0)+(t.missed_appointments||0),r=t.completed_appointments||0,i=t.missed_appointments||0,o=this.calculatePercentage(r,n),l=[["Sess\xf5es Programadas (Passadas)","".concat(n)],["Sess\xf5es Efetivamente Realizadas","".concat(r)],["Aus\xeancias Registradas","".concat(i)],["Taxa de Efetividade Geral","".concat(o,"%")]];return e.autoTable({startY:a,head:[["M\xe9trica","Resultado"]],body:l,theme:"grid",headStyles:{fillColor:[234,88,12],textColor:[255,255,255],fontStyle:"bold",fontSize:10,halign:"center"},bodyStyles:{fontSize:9,textColor:[60,60,60],lineColor:[200,200,200],lineWidth:.5},columnStyles:{0:{cellWidth:110,halign:"left",fontStyle:"normal",textColor:[70,70,70]},1:{cellWidth:70,halign:"center",fontStyle:"bold",textColor:[234,88,12]}},margin:{left:15,right:15}}),e.lastAutoTable.finalY+20}addTherapistPerformance(e,t,a){const s=15,n=e.internal.pageSize.getWidth();e.setFontSize(12),e.setFont("helvetica","bold"),e.setFillColor(240,253,244),e.rect(s,a-4,n-30,7,"F"),e.setTextColor(21,128,61),e.text("PERFORMANCE POR TERAPEUTA",17,a),e.setTextColor(0,0,0),a+=12;const r=this.groupAppointmentsByTherapist(t);if(0===r.length)return e.setFontSize(10),e.setFont("helvetica","normal"),e.text("Nenhum dado de performance encontrado para o per\xedodo selecionado.",s,a+10),a+30;const i=r.map((e=>[e.name,e.scheduled.toString(),e.completed.toString(),e.missed.toString(),"".concat(e.rate,"%")])),o=this.calculateTotals(r);return i.push(["TOTAL CLINICA",o.scheduled.toString(),o.completed.toString(),o.missed.toString(),"".concat(o.rate,"%")]),e.autoTable({head:[["Terapeuta","Agend","Real","Faltas","Taxa%"]],body:i,startY:a,theme:"grid",headStyles:{fillColor:[21,128,61],textColor:[255,255,255],fontStyle:"bold",fontSize:10,halign:"center"},bodyStyles:{fontSize:9,textColor:[60,60,60],lineColor:[200,200,200],lineWidth:.5},columnStyles:{0:{cellWidth:90,halign:"left",textColor:[70,70,70]},1:{cellWidth:22,halign:"center",textColor:[21,128,61]},2:{cellWidth:22,halign:"center",textColor:[21,128,61],fontStyle:"bold"},3:{cellWidth:22,halign:"center",textColor:[185,28,28]},4:{cellWidth:24,halign:"center",textColor:[21,128,61],fontStyle:"bold"}},margin:{left:s,right:s}}),e.lastAutoTable.finalY+15}addDetailedSchedule(e,t,a){const s=15,n=e.internal.pageSize.getWidth();e.setFontSize(12),e.setFont("helvetica","bold"),e.setFillColor(250,245,255),e.rect(s,a-4,n-30,7,"F"),e.setTextColor(124,58,237),e.text("AGENDA DETALHADA",17,a),e.setTextColor(0,0,0),a+=12;const r=t.sort(((e,t)=>new Date("".concat(e.scheduled_date,"T").concat(e.scheduled_time))-new Date("".concat(t.scheduled_date,"T").concat(t.scheduled_time)))),i=r.slice(0,50).map((e=>[this.formatDate(e.scheduled_date),e.scheduled_time||"",e.patient_name||"N/A",e.therapist_name||"N/A",this.formatStatus(e.status,e.justified_at)]));e.autoTable({head:[["Data","Hora","Paciente","Terapeuta","Status"]],body:i,startY:a,theme:"grid",headStyles:{fillColor:[124,58,237],textColor:[255,255,255],fontStyle:"bold",fontSize:10},bodyStyles:{fontSize:8,textColor:[60,60,60],lineColor:[200,200,200],lineWidth:.5},columnStyles:{0:{cellWidth:24,halign:"center"},1:{cellWidth:18,halign:"center"},2:{cellWidth:56,halign:"left"},3:{cellWidth:56,halign:"left"},4:{cellWidth:26,halign:"center"}},didParseCell:function(e){if(4===e.column.index&&"body"===e.section){switch(e.cell.raw){case"Realizada":e.cell.styles.fillColor=[220,252,231],e.cell.styles.textColor=[21,128,61],e.cell.styles.fontStyle="bold";break;case"Falta / Just.":e.cell.styles.fillColor=[219,234,254],e.cell.styles.textColor=[30,64,175],e.cell.styles.fontStyle="normal";break;case"Falta":e.cell.styles.fillColor=[254,226,226],e.cell.styles.textColor=[185,28,28],e.cell.styles.fontStyle="bold";break;case"Cancelada":e.cell.styles.fillColor=[249,250,251],e.cell.styles.textColor=[107,114,128];break;case"Agendada":e.cell.styles.fillColor=[239,246,255],e.cell.styles.textColor=[29,78,216]}}},margin:{left:s,right:s}});let o=e.lastAutoTable.finalY+10;return r.length>50&&(e.setFontSize(8),e.text("Nota: Mostrando apenas os primeiros 50 registros de ".concat(r.length," total."),s,o),o+=8),o}addIndividualPerformance(e,t,a){const s=15,n=e.internal.pageSize.getWidth();e.setFontSize(12),e.setFont("helvetica","bold"),e.setFillColor(240,248,255),e.rect(s,a-4,n-30,7,"F"),e.setTextColor(25,118,210),e.text("PERFORMANCE INDIVIDUAL",17,a),e.setTextColor(0,0,0),a+=12;const r=this.calculateIndividualStats(t),i=t.filter((e=>"missed"===e.status&&e.justified_at)).length,o=r.missed-i,l=[["Total de Agendamentos","".concat(r.total)],["Sess\xf5es Realizadas","".concat(r.completed," (").concat(r.completedRate,"%)")],["Faltas N\xe3o Justificadas","".concat(o," (").concat(this.calculatePercentage(o,r.total),"%)")],["Faltas Justificadas","".concat(i," (").concat(this.calculatePercentage(i,r.total),"%)")],["Cancelamentos","".concat(r.cancelled," (").concat(r.cancelledRate,"%)")],["Taxa de Comparecimento","".concat(r.attendanceRate,"%")]];e.autoTable({startY:a,head:[["Indicador","Resultado"]],body:l,theme:"grid",headStyles:{fillColor:[25,118,210],textColor:[255,255,255],fontStyle:"bold",fontSize:10,halign:"center"},bodyStyles:{fontSize:9,textColor:[60,60,60],lineColor:[200,200,200],lineWidth:.5},columnStyles:{0:{cellWidth:110,halign:"left",fontStyle:"normal",textColor:[70,70,70]},1:{cellWidth:70,halign:"center",fontStyle:"bold",textColor:[25,118,210]}},margin:{left:s,right:s}});let c=e.lastAutoTable.finalY+5;return e.setFontSize(8),e.setFont("helvetica","italic"),e.setTextColor(100,100,100),e.text("* Taxa de Comparecimento calculada sobre agendamentos n\xe3o cancelados",s,c),e.text("  (".concat(r.completed," realizadas \xf7 ").concat(r.total-r.cancelled," n\xe3o canceladas = ").concat(r.attendanceRate,"%)"),s,c+4),e.setTextColor(0,0,0),e.setFont("helvetica","normal"),c+15}addStatisticalDetails(e,t,a){const s=e.internal.pageSize.getWidth();e.setFontSize(12),e.setFont("helvetica","bold"),e.setFillColor(240,253,244),e.rect(15,a-4,s-30,7,"F"),e.setTextColor(21,128,61),e.text("DETALHAMENTO ESTAT\xcdSTICO",17,a),e.setTextColor(0,0,0),a+=12;const n=this.calculateAdvancedStats(t),r=[["Agendamentos por Semana","".concat(n.avgPerWeek," (m\xe9dia)")],["Sess\xf5es Realizadas por Semana","".concat(n.completedPerWeek," (m\xe9dia)")],["Maior Sequ\xeancia de Sucessos","".concat(n.longestSuccessStreak," sess\xf5es")],["\xdaltima Falta Registrada",n.lastMissed||"Nenhuma falta no per\xedodo"],["Pontualidade Geral","".concat(n.punctuality,"%")]];return e.autoTable({startY:a,head:[["Indicador Avan\xe7ado","Valor"]],body:r,theme:"grid",headStyles:{fillColor:[21,128,61],textColor:[255,255,255],fontStyle:"bold",fontSize:10,halign:"center"},bodyStyles:{fontSize:9,textColor:[60,60,60],lineColor:[200,200,200],lineWidth:.5},columnStyles:{0:{cellWidth:110,halign:"left",fontStyle:"normal",textColor:[70,70,70]},1:{cellWidth:70,halign:"center",fontStyle:"bold",textColor:[21,128,61]}},margin:{left:15,right:15}}),e.lastAutoTable.finalY+15}addIndividualDetailedSchedule(e,t,a){const s=e.internal.pageSize.getWidth();e.setFontSize(12),e.setFont("helvetica","bold"),e.setFillColor(250,245,255),e.rect(15,a-4,s-30,7,"F"),e.setTextColor(124,58,237),e.text("AGENDA DETALHADA - TERAPEUTA",17,a),e.setTextColor(0,0,0),a+=12;const n=t.sort(((e,t)=>new Date("".concat(e.scheduled_date,"T").concat(e.scheduled_time))-new Date("".concat(t.scheduled_date,"T").concat(t.scheduled_time)))).map((e=>[this.formatDate(e.scheduled_date),e.scheduled_time,e.patient_name||"N/A",e.discipline_name||"Sess\xe3o Geral",this.formatStatus(e.status,e.justified_at)]));return e.autoTable({head:[["Data","Hora","Paciente","\xc1rea/Disciplina","Status"]],body:n,startY:a,theme:"grid",headStyles:{fillColor:[124,58,237],textColor:[255,255,255],fontStyle:"bold",fontSize:10,halign:"center"},bodyStyles:{fontSize:9,textColor:[60,60,60],lineColor:[200,200,200],lineWidth:.5},columnStyles:{0:{cellWidth:24,halign:"center"},1:{cellWidth:18,halign:"center"},2:{cellWidth:52,halign:"left"},3:{cellWidth:52,halign:"left"},4:{cellWidth:34,halign:"center"}}}),e.lastAutoTable.finalY+15}addPaymentSummary(e,t,a,s){const n=e.internal.pageSize.getWidth();e.setFontSize(12),e.setFont("helvetica","bold"),e.setFillColor(255,247,237),e.rect(15,s-4,n-30,7,"F"),e.setTextColor(194,65,12),e.text("RESUMO PARA PAGAMENTO",17,s),e.setTextColor(0,0,0),s+=12;const r=this.calculateIndividualStats(t),i=t.filter((e=>"missed"===e.status&&e.justified_at)).length,o=[["Total de Sess\xf5es Efetivamente Realizadas","".concat(r.completed)],["Per\xedodo de Refer\xeancia","".concat(this.formatDate(a.period.startDate)," a ").concat(this.formatDate(a.period.endDate))],["Taxa de Efetiva\xe7\xe3o","".concat(r.attendanceRate,"%")],["Observa\xe7\xf5es","".concat(i," falta(s) justificada(s)")]];return e.autoTable({startY:s,head:[["Item","Valor"]],body:o,theme:"grid",headStyles:{fillColor:[194,65,12],textColor:[255,255,255],fontStyle:"bold",fontSize:10,halign:"center"},bodyStyles:{fontSize:9,textColor:[60,60,60],lineColor:[200,200,200],lineWidth:.5},columnStyles:{0:{cellWidth:110,halign:"left",fontStyle:"normal",textColor:[70,70,70]},1:{cellWidth:70,halign:"center",fontStyle:"bold",textColor:[194,65,12]}},margin:{left:15,right:15}}),e.lastAutoTable.finalY+15}addReportFooter(e){const t=e.internal.getNumberOfPages(),a=e.internal.pageSize.getWidth(),s=e.internal.pageSize.getHeight();for(let n=1;n<=t;n++){e.setPage(n),e.setFontSize(8),e.setTextColor(100);const r="P\xe1gina ".concat(n," de ").concat(t);e.text(r,a/2,s-7.5,{align:"center"}),e.text("Gerado em: ".concat(this.formatDate((new Date).toISOString())),15,s-7.5),e.setTextColor(0)}}formatDate(e){if(!e)return"N/A";try{const t=new Date(e);return isNaN(t.getTime())?"Data inv\xe1lida":t.toLocaleDateString("pt-BR")}catch(t){return"Data inv\xe1lida"}}formatStatus(e){return{completed:"Realizada",missed:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)?"Falta / Just.":"Falta",cancelled:"Cancelada",scheduled:"Agendada"}[e]||e}calculatePercentage(e,t){return t&&0!==t?(e/t*100).toFixed(1):"0"}groupAppointmentsByTherapist(e){if(!e||0===e.length)return[];const t=new Map;return e.forEach((e=>{const a=e.therapist_id,s=e.therapist_name||"Terapeuta Desconhecido";if(!a)return;t.has(a)||t.set(a,{name:s,scheduled:0,completed:0,missed:0,cancelled:0});const n=t.get(a);switch(n.scheduled++,e.status){case"completed":n.completed++;break;case"missed":n.missed++;break;case"cancelled":n.cancelled++}})),Array.from(t.values()).map((e=>(0,Ie.A)((0,Ie.A)({},e),{},{rate:this.calculatePercentage(e.completed,e.scheduled)})))}calculateTotals(e){const t=e.reduce(((e,t)=>({scheduled:e.scheduled+t.scheduled,completed:e.completed+t.completed,missed:e.missed+t.missed,cancelled:e.cancelled+t.cancelled})),{scheduled:0,completed:0,missed:0,cancelled:0});return(0,Ie.A)((0,Ie.A)({},t),{},{rate:this.calculatePercentage(t.completed,t.scheduled)})}calculateIndividualStats(e){const t=e.length,a=e.filter((e=>"completed"===e.status)).length,s=e.filter((e=>"missed"===e.status)).length,n=e.filter((e=>"cancelled"===e.status)).length,r=t-n;return{total:t,completed:a,missed:s,cancelled:n,completedRate:this.calculatePercentage(a,t),missedRate:this.calculatePercentage(s,t),cancelledRate:this.calculatePercentage(n,t),attendanceRate:this.calculatePercentage(a,r)}}calculateAdvancedStats(e){const t=e.filter((e=>"completed"===e.status)),a=this.getWeeksInPeriod(e);return{avgPerWeek:(e.length/Math.max(a,1)).toFixed(1),completedPerWeek:(t.length/Math.max(a,1)).toFixed(1),longestSuccessStreak:this.calculateSuccessStreak(e),lastMissed:this.getLastMissed(e),punctuality:this.calculatePercentage(t.length,e.length)}}getWeeksInPeriod(e){if(0===e.length)return 1;const t=e.map((e=>new Date(e.scheduled_date))),a=new Date(Math.min(...t)),s=new Date(Math.max(...t)).getTime()-a.getTime(),n=Math.ceil(s/864e5);return Math.max(Math.ceil(n/7),1)}calculateSuccessStreak(e){const t=e.sort(((e,t)=>new Date("".concat(e.scheduled_date,"T").concat(e.scheduled_time))-new Date("".concat(t.scheduled_date,"T").concat(t.scheduled_time))));let a=0,s=0;return t.forEach((e=>{"completed"===e.status?(s++,a=Math.max(a,s)):s=0})),a}getLastMissed(e){const t=e.filter((e=>"missed"===e.status)).sort(((e,t)=>new Date(t.scheduled_date)-new Date(e.scheduled_date)));return t.length>0?this.formatDate(t[0].scheduled_date):null}}const bf=()=>{const{user:e,token:t}=Ye(),[a,n]=(0,s.useState)([]),[r,i]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[c,d]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null),[m,p]=(0,s.useState)(!1),[f,g]=(0,s.useState)(!1),[x,b]=(0,s.useState)(!1),[v,y]=(0,s.useState)(!1),[j,N]=(0,s.useState)(!1),[w,_]=(0,s.useState)(!1),[S,C]=(0,s.useState)(null),[k,A]=(0,s.useState)(null),[P,E]=(0,s.useState)(null),[L,D]=(0,s.useState)(!1),[O,T]=(0,s.useState)(!1),[M,R]=(0,s.useState)(!1),[I,F]=(0,s.useState)("appointments"),[z,B]=(0,s.useState)(0),[q,U]=(0,s.useState)(!1),[H,W]=(0,s.useState)("edit"),[V,G]=(0,s.useState)(null),[Y,$]=(0,s.useState)({therapist_id:"",patient_id:"",status:"",start_date:"",end_date:"",recurring_only:!1,page:1,limit:20}),[X,J]=(0,s.useState)(null),K=e=>{E(e),N(!0)},Q=(0,s.useCallback)((async()=>{try{if(!t)return;const e=await tt(t);i(e);const a=Array.from(new Map(e.map((e=>[e.therapist_id,{id:e.therapist_id,full_name:e.therapist_name}]))).values());l(a)}catch(u){console.error("Erro ao carregar assignments")}}),[t]),Z=(0,s.useCallback)((async()=>{try{d(!0),h(null);const e=await Cp(Y);n(e.appointments||[]),J(e.pagination||null)}catch(u){console.error("Erro ao carregar agendamentos"),h("Erro ao carregar agendamentos. Tente novamente.")}finally{d(!1)}}),[Y]);(0,s.useEffect)((()=>{Z(),Q()}),[Z,Q]),(0,s.useEffect)((()=>{Z()}),[Z]),(0,s.useEffect)((()=>{if("calendar"===I){const e=new Date,t=new Date(e);t.setDate(e.getDate()-30);const a=new Date(e);a.setDate(e.getDate()+60),$((e=>(0,Ie.A)((0,Ie.A)({},e),{},{start_date:t.toISOString().split("T")[0],end_date:a.toISOString().split("T")[0],limit:1e3,page:1})))}else if("appointments"===I){const e=new Date,t=new Date(e);t.setDate(e.getDate()-60);const a=new Date(e);a.setDate(e.getDate()+90),$((e=>(0,Ie.A)((0,Ie.A)({},e),{},{start_date:t.toISOString().split("T")[0],end_date:a.toISOString().split("T")[0],limit:500,page:1})))}}),[I]);const ee=e=>{C(e),p(!0),g(!1)},te=async e=>{if(window.confirm("Tem certeza que deseja remover o agendamento de ".concat(e.patient_name," para ").concat(e.scheduled_date," \xe0s ").concat(e.scheduled_time,"?")))try{await Pp(e.id),await Z(),g(!1)}catch(u){console.error("Erro ao remover agendamento"),alert("Erro ao remover agendamento. Tente novamente.")}},ae=e=>{A(e),g(!0)},se=async e=>{const t=prompt("Justificar aus\xeancia do agendamento:\n\nPaciente: ".concat(e.patient_name,"\nData: ").concat(new Date(e.scheduled_date).toLocaleDateString("pt-BR"),"\n\nDigite o motivo da aus\xeancia:"));if(t&&""!==t.trim())try{await Lp(e.id,{missed_reason_type:"other",missed_reason_description:t,admin_override:!0}),await Z(),alert("\u2705 Justificativa adicionada com sucesso!")}catch(u){console.error("Erro ao justificar aus\xeancia:",u),alert("\u274c Erro ao justificar: ".concat(u.message))}},ne=e&&e.is_admin,re=e&&e.is_admin,ie=e&&e.is_admin;return ne?(0,We.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,We.jsx)("div",{className:"bg-white shadow",children:(0,We.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,We.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-3 text-blue-600"}),"Sistema de Agendamento"]}),(0,We.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Gerencie agendamentos de sess\xf5es e acompanhe estat\xedsticas da cl\xednica"})]}),(0,We.jsxs)("div",{className:"flex space-x-3",children:[(0,We.jsxs)("button",{onClick:()=>{Z()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 hover:shadow transition-all duration-200 flex items-center",children:[(0,We.jsx)(Vn,{icon:Yr,className:"mr-2 w-4 h-4"}),"Atualizar"]}),(0,We.jsxs)("button",{onClick:()=>b(!0),className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-red-500 to-red-600 border border-transparent rounded-lg shadow-sm hover:from-red-600 hover:to-red-700 hover:shadow transition-all duration-200 flex items-center",children:[(0,We.jsx)(Vn,{icon:bi,className:"mr-2 w-4 h-4"}),"Gerar Relat\xf3rio"]}),(0,We.jsxs)("button",{onClick:()=>p(!0),className:"px-4 py-2 text-sm font-medium text-white bg-gradient-to-r from-blue-500 to-indigo-600 border border-transparent rounded-lg shadow-sm hover:from-blue-600 hover:to-indigo-700 hover:shadow-md transition-all duration-200 flex items-center transform hover:scale-105",children:[(0,We.jsx)(Vn,{icon:Li,className:"mr-2 w-4 h-4"}),"Novo Agendamento"]})]})]})})}),(0,We.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u&&(0,We.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-400 mr-2"}),(0,We.jsx)("span",{className:"text-red-800",children:u})]})}),(0,We.jsx)("div",{className:"mb-8",children:(0,We.jsx)(hf,{onResolveOrphans:()=>F("orphans"),onResolveAll:()=>F("orphans"),onViewAppointmentDetails:ae,onJustifyAppointment:se,onCreateRetroactive:K,onCreateBatchRetroactive:e=>{console.log("Criar retroativos em lote:",e),alert("Funcionalidade de cria\xe7\xe3o em lote de ".concat(e.length," retroativos ser\xe1 implementada em breve."))},refreshTrigger:z})}),(0,We.jsx)("div",{className:"mb-6",children:(0,We.jsx)("div",{className:"border-b border-gray-200",children:(0,We.jsxs)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[(0,We.jsxs)("button",{onClick:()=>F("appointments"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("appointments"===I?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,We.jsx)(Vn,{icon:er,className:"mr-2"}),"Lista"]}),(0,We.jsxs)("button",{onClick:()=>F("calendar"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("calendar"===I?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,We.jsx)(Vn,{icon:qi,className:"mr-2"}),"Calend\xe1rio"]}),(0,We.jsxs)("button",{onClick:()=>F("orphans"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("orphans"===I?"border-orange-500 text-orange-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,We.jsx)(Vn,{icon:To,className:"mr-2"}),"Sess\xf5es \xd3rf\xe3s"]})]})})}),"appointments"===I&&(0,We.jsx)(af,{appointments:a,onEdit:ee,onDelete:te,onView:ae,onEditSeries:e=>{G(e),W("edit"),U(!0)},onDeleteSeries:e=>{G(e),W("delete"),U(!0)},onJustify:se,onViewNextOccurrences:async e=>{try{const t=(await Gp(e.recurring_template_id,10)).occurrences||[];if(0===t.length)return void alert("N\xe3o h\xe1 mais ocorr\xeancias futuras para esta s\xe9rie.");const a=t.map((e=>{const t=new Date(e.scheduled_date).toLocaleDateString("pt-BR"),a=e.scheduled_time.substring(0,5);return"\u2022 ".concat(t," \xe0s ").concat(a)})).join("\n");alert("\ud83d\udcc5 Pr\xf3ximas ".concat(t.length," Ocorr\xeancias:\n\n").concat(a))}catch(u){console.error("Erro ao buscar pr\xf3ximas ocorr\xeancias:",u),alert("\u274c Erro: ".concat(u.message))}},onCancel:e=>{A(e),_(!0)},isLoading:c,pagination:X,onPageChange:e=>{$((t=>(0,Ie.A)((0,Ie.A)({},t),{},{page:e})))},showFilters:!0}),"calendar"===I&&(0,We.jsx)(ff,{appointments:a,therapists:o,onAppointmentClick:ae,onCreateAppointment:()=>p(!0)}),"orphans"===I&&(0,We.jsx)(of,{onCreateRetroactive:K,refreshTrigger:z})]}),(0,We.jsx)(Qp,{isOpen:m,onClose:()=>{p(!1),C(null)},onSubmit:S?async e=>{try{D(!0);const t=await kp(S.id,e);await Z(),p(!1),C(null),A(t.appointment),g(!0)}catch(u){throw console.error("Erro ao atualizar agendamento"),u}finally{D(!1)}}:async e=>{try{if(D(!0),"recurring"===e.type){const{template:t,generated_appointments:a,conflicts:s}=e;p(!1),C(null),alert("Template recorrente criado com sucesso!\n\n".concat(a," agendamentos gerados\n").concat(s," conflitos encontrados\n\nTemplate ID: ").concat(t.id)),await Z()}else{const t=await Sp(e);await Z(),p(!1),C(null),A(t.appointment),g(!0)}}catch(u){throw console.error("Erro ao criar agendamento"),u}finally{D(!1)}},assignments:r,editingAppointment:S,isLoading:L}),(0,We.jsx)(sf,{isOpen:f,onClose:()=>{g(!1),A(null)},appointment:k,onEdit:ee,onDelete:te,canEdit:re,canDelete:ie}),(0,We.jsx)(nf,{isOpen:x,onClose:()=>b(!1),onGenerate:async e=>{try{T(!0);const t=await(async e=>{const t=new xf;return await t.generateReport(e)})(e);if(!t.success)throw new Error("Falha na gera\xe7\xe3o do relat\xf3rio");b(!1)}catch(u){console.error("Erro ao gerar relat\xf3rio:",u),alert("Erro ao gerar relat\xf3rio. Tente novamente.")}finally{T(!1)}},therapists:(()=>{const e=new Map;return r.forEach((t=>{t.therapist_id&&t.therapist_name&&e.set(t.therapist_id,{id:t.therapist_id,full_name:t.therapist_name})})),a.forEach((t=>{t.therapist_id&&t.therapist_name&&e.set(t.therapist_id,{id:t.therapist_id,full_name:t.therapist_name})})),Array.from(e.values())})(),isGenerating:O}),(0,We.jsx)(lf,{isOpen:v,onClose:()=>y(!1),onDetectionComplete:e=>{Z(),B((e=>e+1))}}),(0,We.jsx)(cf,{isOpen:j,onClose:()=>{N(!1),E(null)},orphanSession:P,onSuccess:()=>{Z(),B((e=>e+1))}}),(0,We.jsx)(mf,{isOpen:q,onClose:()=>{U(!1),G(null)},appointment:V,actionType:H,onEditSingle:e=>{ee(e),U(!1)},onEditSeries:async e=>{C((0,Ie.A)((0,Ie.A)({},e),{},{editMode:"series"})),p(!0),U(!1)},onDeleteSingle:async e=>{U(!1),te(e)},onDeleteSeries:async e=>{U(!1);if(window.confirm("Tem certeza que deseja remover TODA A S\xc9RIE de agendamentos recorrentes?\n\nIsso afetar\xe1 todos os agendamentos futuros desta s\xe9rie."))try{const t=await Vp(e.recurring_template_id,e.id);await Z(),alert("\u2705 ".concat(t.count," agendamento(s) da s\xe9rie foram removidos com sucesso!"))}catch(u){console.error("Erro ao excluir s\xe9rie recorrente:",u),alert("\u274c Erro ao excluir s\xe9rie: ".concat(u.message))}}}),(0,We.jsx)(pf,{isOpen:w,onClose:()=>{_(!1),A(null)},appointment:k,onConfirm:async(e,t)=>{try{R(!0),await Ap(e.id,t),await Z(),_(!1),A(null),alert("\u2705 Agendamento cancelado com sucesso!")}catch(u){console.error("Erro ao cancelar agendamento:",u),alert("\u274c Erro ao cancelar: ".concat(u.message))}finally{R(!1)}},isLoading:M})]}):(0,We.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,We.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-500 text-4xl mb-4"}),(0,We.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Acesso Restrito"}),(0,We.jsx)("p",{className:"text-gray-600",children:"Voc\xea n\xe3o tem permiss\xe3o para acessar o sistema de agendamento. Esta funcionalidade est\xe1 dispon\xedvel apenas para administradores."})]})})})},vf=$e.A.create({baseURL:qe.H});vf.interceptors.request.use((e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(e=>Promise.reject(e)));const yf=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;Object.entries(e).forEach((e=>{let[a,s]=e;void 0!==s&&null!==s&&""!==s&&t.append(a,s)}));return(await vf.get("/therapist/schedule?".concat(t.toString()))).data}catch(r){var t,a,s,n;throw console.error("[THERAPIST-SCHEDULE-API] Erro ao buscar agenda pessoal"),new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"Erro ao buscar agenda")}},jf=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;try{return(await vf.get("/therapist/schedule/upcoming?days_ahead=".concat(e))).data}catch(r){var t,a,s,n;throw console.error("[THERAPIST-SCHEDULE-API] Erro ao buscar pr\xf3ximos agendamentos"),new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"Erro ao buscar pr\xf3ximos agendamentos")}},Nf=async()=>{try{return(await vf.get("/therapist/schedule/today")).data}catch(n){var e,t,a,s;throw console.error("[THERAPIST-SCHEDULE-API] Erro ao buscar agenda de hoje"),new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t||null===(a=t.errors)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.msg)||"Erro ao buscar agenda de hoje")}},wf=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{return(await vf.get("/therapist/schedule/missed?include_justified=".concat(e))).data}catch(r){var t,a,s,n;throw console.error("[THERAPIST-SCHEDULE-API] Erro ao buscar agendamentos perdidos"),new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"Erro ao buscar agendamentos perdidos")}},_f=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;Object.entries(e).forEach((e=>{let[a,s]=e;void 0!==s&&null!==s&&""!==s&&t.append(a,s)}));return(await vf.get("/therapist/schedule/statistics?".concat(t.toString()))).data}catch(r){var t,a,s,n;throw console.error("[THERAPIST-SCHEDULE-API] Erro ao buscar estat\xedsticas pessoais"),new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"Erro ao buscar estat\xedsticas")}},Sf=async e=>{try{return(await vf.get("/therapist/schedule/appointments/".concat(e))).data}catch(r){var t,a,s,n;throw console.error("[THERAPIST-SCHEDULE-API] Erro ao buscar agendamento ID ".concat(e)),new Error((null===(t=r.response)||void 0===t||null===(a=t.data)||void 0===a||null===(s=a.errors)||void 0===s||null===(n=s[0])||void 0===n?void 0:n.msg)||"Agendamento n\xe3o encontrado")}},Cf=async(e,t)=>{try{return(await vf.post("/therapist/schedule/justify/".concat(e),t)).data}catch(i){var a,s,n,r;throw console.error("[THERAPIST-SCHEDULE-API] Erro ao justificar agendamento ID ".concat(e)),new Error((null===(a=i.response)||void 0===a||null===(s=a.data)||void 0===s||null===(n=s.errors)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.msg)||"Erro ao justificar agendamento")}},kf=e=>{const t={};return e.forEach((e=>{const a=e.scheduled_date;t[a]||(t[a]=[]),t[a].push(e)})),Object.keys(t).forEach((e=>{t[e].sort(((e,t)=>e.scheduled_time.localeCompare(t.scheduled_time)))})),t},Af=e=>{const t=new Date,a=t.toISOString().split("T")[0],s=t.toTimeString().slice(0,5),n=e.filter((e=>"scheduled"===e.status&&(e.scheduled_date>a||e.scheduled_date===a&&e.scheduled_time>s)));return 0===n.length?null:(n.sort(((e,t)=>{const a=e.scheduled_date.localeCompare(t.scheduled_date);return 0!==a?a:e.scheduled_time.localeCompare(t.scheduled_time)})),n[0])},Pf=e=>{const t={total:e.length,scheduled:0,completed:0,missed:0,cancelled:0,completion_rate:0,attendance_rate:0};e.forEach((e=>{t[e.status]++})),t.total>0&&(t.completion_rate=Math.round(t.completed/t.total*100));const a=t.total-t.cancelled;return a>0&&(t.attendance_rate=Math.round(t.completed/a*100)),t},Ef=e=>{if("scheduled"!==e.status)return!1;const t=new Date;return new Date("".concat(e.scheduled_date,"T").concat(e.scheduled_time))<t},Lf=e=>{const t=new Date,a=(()=>{try{const t=e.scheduled_date,a=e.scheduled_time;if(!t||!a)return new Date;let s=t;if(t instanceof Date){const e=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");s="".concat(e,"-").concat(a,"-").concat(n)}else"string"===typeof t&&t.includes("T")&&(s=t.split("T")[0]);const[n,r,i]=s.split("-").map(Number),[o,l]=a.split(":").map(Number);return new Date(n,r-1,i,o,l,0)}catch(t){return console.error("Erro ao processar data do agendamento:",t),new Date}})()-t;if(a<0)return"Atrasado";const s=Math.floor(a/36e5),n=Math.floor(a%36e5/6e4),r=Math.floor(s/24);return r>0?"Em ".concat(r," dia(s)"):s>0?"Em ".concat(s,"h ").concat(n,"min"):"Em ".concat(n," minutos")},Df=e=>e>=90?"text-green-600":e>=70?"text-yellow-600":"text-red-600",Of=()=>{const{user:e}=Ye(),[t,a]=(0,s.useState)([]),[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)([]),[l,c]=(0,s.useState)([]),[d,u]=(0,s.useState)(null),[h,m]=(0,s.useState)(!0),[p,f]=(0,s.useState)(null),[g,x]=(0,s.useState)(!1),[b,v]=(0,s.useState)(null),[y,j]=(0,s.useState)(!1),[N,w]=(0,s.useState)(null),[_,S]=(0,s.useState)("today"),[C,k]=(0,s.useState)({start_date:(new Date).toISOString().split("T")[0],end_date:new Date(Date.now()+6048e5).toISOString().split("T")[0]}),[A,P]=(0,s.useState)({missed_reason:"",missed_by:"patient"}),[E,L]=(0,s.useState)(!1),D=(0,s.useCallback)((async()=>{try{m(!0),f(null),await Promise.all([T(),M(),R(),I(),O()])}catch(p){console.error("Erro ao carregar dados da agenda"),f("Erro ao carregar dados da agenda. Tente novamente.")}finally{m(!1)}}),[]),O=(0,s.useCallback)((async()=>{try{const e=await yf(C);a(e.appointments||[])}catch(p){console.error("Erro ao carregar agenda")}}),[C]);(0,s.useEffect)((()=>{e&&"terapeuta"===e.role&&!e.is_admin&&D()}),[e,D]),(0,s.useEffect)((()=>{"schedule"===_&&O()}),[_,O]);const T=async()=>{try{const e=await Nf();r(e.appointments||[])}catch(p){console.error("Erro ao carregar agenda de hoje")}},M=async()=>{try{const e=await jf(7);o(e.appointments||[])}catch(p){console.error("Erro ao carregar pr\xf3ximos agendamentos")}},R=async()=>{try{const e=await wf(!1);c(e.appointments||[])}catch(p){console.error("Erro ao carregar agendamentos perdidos")}},I=async()=>{try{const e=(new Date).toISOString().split("T")[0],t=new Date(Date.now()-2592e6).toISOString().split("T")[0],a=await _f({start_date:t,end_date:e,period:"month"});u(a)}catch(p){console.error("Erro ao carregar estat\xedsticas")}},F=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=Ef(e);return(0,We.jsx)("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors hover:bg-gray-50 ".concat(a?"border-red-300 bg-red-50":"border-gray-200"),onClick:()=>(async e=>{try{const t=await Sf(e.id);v(t.appointment),x(!0)}catch(p){console.error("Erro ao carregar detalhes do agendamento"),alert("Erro ao carregar detalhes do agendamento")}})(e),children:(0,We.jsxs)("div",{className:"flex items-start justify-between",children:[(0,We.jsxs)("div",{className:"flex-1",children:[t&&(0,We.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:new Date(e.scheduled_date).toLocaleDateString("pt-BR")}),(0,We.jsxs)("div",{className:"flex items-center mb-2",children:[(0,We.jsx)(Vn,{icon:Ti,className:"text-blue-500 mr-2 w-4 h-4"}),(0,We.jsxs)("span",{className:"font-medium text-gray-900",children:[e.scheduled_time," (",e.duration_minutes,"min)"]}),a&&(0,We.jsx)("span",{className:"ml-2 px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full",children:"Atrasado"})]}),(0,We.jsxs)("div",{className:"flex items-center mb-1",children:[(0,We.jsx)(Vn,{icon:Sr,className:"text-green-500 mr-2 w-4 h-4"}),(0,We.jsx)("span",{className:"text-gray-700",children:e.patient_name})]}),(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:Xn,className:"text-purple-500 mr-2 w-4 h-4"}),(0,We.jsx)("span",{className:"text-sm text-gray-600",children:e.program_name})]})]}),(0,We.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,We.jsxs)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("scheduled"===e.status?"bg-yellow-100 text-yellow-800":"completed"===e.status?"bg-green-100 text-green-800":"missed"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:["scheduled"===e.status&&"Agendado","completed"===e.status&&"Realizado","missed"===e.status&&"Perdido","cancelled"===e.status&&"Cancelado"]}),"missed"===e.status&&!e.missed_reason&&(0,We.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{w(e),P({missed_reason:"",missed_by:"patient"}),j(!0)})(e)},className:"px-2 py-1 text-xs font-medium text-red-700 bg-red-100 rounded hover:bg-red-200",children:"Justificar"})]})]})},e.id)};return!e||"terapeuta"!==e.role||e.is_admin?(0,We.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,We.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-500 text-4xl mb-4"}),(0,We.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Acesso Restrito"}),(0,We.jsx)("p",{className:"text-gray-600",children:"Voc\xea n\xe3o tem permiss\xe3o para acessar esta p\xe1gina. Esta funcionalidade est\xe1 dispon\xedvel apenas para terapeutas."})]})})}):h?(0,We.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,We.jsxs)("div",{className:"text-center",children:[(0,We.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,We.jsx)("p",{className:"text-gray-600",children:"Carregando sua agenda..."})]})}):(0,We.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,We.jsx)("div",{className:"bg-white shadow",children:(0,We.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,We.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,We.jsxs)("div",{children:[(0,We.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-3 text-blue-600"}),"Minha Agenda"]}),(0,We.jsx)("p",{className:"mt-1 text-sm text-gray-600",children:"Visualize seus agendamentos e gerencie sua rotina"})]}),(0,We.jsxs)("button",{onClick:D,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 flex items-center",children:[(0,We.jsx)(Vn,{icon:Yr,className:"mr-2 w-4 h-4"}),"Atualizar"]})]})})}),(0,We.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p&&(0,We.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-md p-4",children:(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"text-red-400 mr-2"}),(0,We.jsx)("span",{className:"text-red-800",children:p})]})}),(0,We.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:(()=>{Pf([...n,...i]);const e=Af([...n,...i]);return[{title:"Agendamentos Hoje",value:n.length,icon:Si,color:"bg-blue-500"},{title:"Pr\xf3ximos 7 Dias",value:i.length,icon:er,color:"bg-green-500"},{title:"Aguardando Justificativa",value:l.length,icon:To,color:"bg-red-500"},{title:"Pr\xf3ximo Agendamento",value:e?Lf(e):"Nenhum",icon:Ti,color:"bg-purple-500",subtitle:e?"".concat(e.patient_name," - ").concat(e.scheduled_time):"Nenhum agendamento pr\xf3ximo"}]})().map(((e,t)=>(0,We.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,We.jsxs)("div",{className:"flex items-center",children:[(0,We.jsx)("div",{className:"flex-shrink-0 ".concat(e.color," rounded-md p-3"),children:(0,We.jsx)(Vn,{icon:e.icon,className:"text-white w-6 h-6"})}),(0,We.jsxs)("div",{className:"ml-4",children:[(0,We.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:e.title}),(0,We.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.value}),e.subtitle&&(0,We.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.subtitle})]})]})},t)))}),(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow mb-8",children:[(0,We.jsx)("div",{className:"border-b border-gray-200",children:(0,We.jsx)("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[{id:"today",name:"Hoje",icon:Si},{id:"upcoming",name:"Pr\xf3ximos",icon:er},{id:"schedule",name:"Agenda Completa",icon:er},{id:"missed",name:"Perdidos",icon:To,badge:l.length},{id:"stats",name:"Estat\xedsticas",icon:zr}].map((e=>(0,We.jsxs)("button",{onClick:()=>S(e.id),className:"".concat(_===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"," whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm flex items-center"),children:[(0,We.jsx)(Vn,{icon:e.icon,className:"mr-2 w-4 h-4"}),e.name,e.badge>0&&(0,We.jsx)("span",{className:"ml-2 bg-red-100 text-red-600 py-0.5 px-2 rounded-full text-xs font-medium",children:e.badge})]},e.id)))})}),(0,We.jsxs)("div",{className:"p-6",children:["today"===_&&(0,We.jsx)("div",{className:"space-y-6",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,We.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:Si,className:"mr-3 text-blue-600"}),"Agenda de Hoje - ",(new Date).toLocaleDateString("pt-BR")]}),0===n.length?(0,We.jsx)("p",{className:"text-gray-500 text-center py-8",children:"Nenhum agendamento para hoje"}):(0,We.jsx)("div",{className:"space-y-3",children:n.map((e=>F(e)))})]})}),"upcoming"===_&&(0,We.jsx)("div",{className:"space-y-6",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,We.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-3 text-green-600"}),"Pr\xf3ximos Agendamentos (7 dias)"]}),0===i.length?(0,We.jsx)("p",{className:"text-gray-500 text-center py-8",children:"Nenhum agendamento nos pr\xf3ximos 7 dias"}):(0,We.jsx)("div",{className:"space-y-3",children:i.map((e=>F(e,!0)))})]})}),"schedule"===_&&(()=>{const e=kf(t),a=Object.keys(e).sort();return(0,We.jsx)("div",{className:"space-y-6",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,We.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,We.jsx)(Vn,{icon:er,className:"mr-3 text-purple-600"}),"Agenda Completa"]}),(0,We.jsxs)("div",{className:"flex space-x-4",children:[(0,We.jsx)("input",{type:"date",value:C.start_date,onChange:e=>k((t=>(0,Ie.A)((0,Ie.A)({},t),{},{start_date:e.target.value}))),className:"px-3 py-2 border border-gray-300 rounded-md text-sm"}),(0,We.jsx)("input",{type:"date",value:C.end_date,onChange:e=>k((t=>(0,Ie.A)((0,Ie.A)({},t),{},{end_date:e.target.value}))),className:"px-3 py-2 border border-gray-300 rounded-md text-sm"})]})]}),0===a.length?(0,We.jsx)("p",{className:"text-gray-500 text-center py-8",children:"Nenhum agendamento no per\xedodo selecionado"}):(0,We.jsx)("div",{className:"space-y-6",children:a.map((t=>(0,We.jsxs)("div",{children:[(0,We.jsx)("h3",{className:"text-md font-medium text-gray-700 mb-3 border-b border-gray-200 pb-2",children:new Date(t).toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,We.jsx)("div",{className:"space-y-3",children:e[t].map((e=>F(e)))})]},t)))})]})})})(),"missed"===_&&(0,We.jsx)("div",{className:"space-y-6",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,We.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,We.jsx)(Vn,{icon:To,className:"mr-3 text-red-600"}),"Agendamentos Perdidos Sem Justificativa"]}),0===l.length?(0,We.jsxs)("div",{className:"text-center py-8",children:[(0,We.jsx)(Vn,{icon:Ur,className:"text-green-500 text-4xl mb-4"}),(0,We.jsx)("p",{className:"text-gray-500",children:"Nenhum agendamento perdido aguardando justificativa"})]}):(0,We.jsx)("div",{className:"space-y-3",children:l.map((e=>F(e,!0)))})]})}),"stats"===_&&(0,We.jsx)("div",{className:"space-y-6",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,We.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-6 flex items-center",children:[(0,We.jsx)(Vn,{icon:zr,className:"mr-3 text-indigo-600"}),"Estat\xedsticas Pessoais (\xdaltimos 30 dias)"]}),d?(0,We.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,We.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,We.jsx)("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Total de Agendamentos"}),(0,We.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:d.total_appointments||0})]}),(0,We.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,We.jsx)("h3",{className:"text-sm font-medium text-green-800 mb-2",children:"Agendamentos Realizados"}),(0,We.jsx)("p",{className:"text-2xl font-bold text-green-600",children:d.completed_appointments||0})]}),(0,We.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg",children:[(0,We.jsx)("h3",{className:"text-sm font-medium text-red-800 mb-2",children:"Agendamentos Perdidos"}),(0,We.jsx)("p",{className:"text-2xl font-bold text-red-600",children:d.missed_appointments||0})]}),(0,We.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,We.jsx)("h3",{className:"text-sm font-medium text-purple-800 mb-2",children:"Taxa de Comparecimento"}),(0,We.jsxs)("p",{className:"text-2xl font-bold ".concat(Df(d.attendance_rate||0)),children:[d.attendance_rate||0,"%"]})]}),(0,We.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,We.jsx)("h3",{className:"text-sm font-medium text-yellow-800 mb-2",children:"Taxa de Conclus\xe3o"}),(0,We.jsxs)("p",{className:"text-2xl font-bold ".concat(Df(d.completion_rate||0)),children:[d.completion_rate||0,"%"]})]}),(0,We.jsxs)("div",{className:"bg-indigo-50 p-4 rounded-lg",children:[(0,We.jsx)("h3",{className:"text-sm font-medium text-indigo-800 mb-2",children:"Pacientes Atendidos"}),(0,We.jsx)("p",{className:"text-2xl font-bold text-indigo-600",children:d.unique_patients||0})]})]}):(0,We.jsx)("p",{className:"text-gray-500 text-center py-8",children:"Carregando estat\xedsticas..."})]})})]})]})]}),(0,We.jsx)(sf,{isOpen:g,onClose:()=>{x(!1),v(null)},appointment:b,canEdit:!1,canDelete:!1}),y&&(0,We.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,We.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,We.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,We.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Justificar Aus\xeancia"}),(0,We.jsx)("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:(0,We.jsx)(Vn,{icon:lo,className:"w-6 h-6"})})]}),(0,We.jsxs)("div",{className:"p-6",children:[(0,We.jsxs)("div",{className:"mb-4",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Respons\xe1vel pela aus\xeancia"}),(0,We.jsxs)("select",{value:A.missed_by,onChange:e=>P((t=>(0,Ie.A)((0,Ie.A)({},t),{},{missed_by:e.target.value}))),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,We.jsx)("option",{value:"patient",children:"Paciente"}),(0,We.jsx)("option",{value:"therapist",children:"Terapeuta"}),(0,We.jsx)("option",{value:"both",children:"Ambos"}),(0,We.jsx)("option",{value:"other",children:"Outros fatores"})]})]}),(0,We.jsxs)("div",{className:"mb-6",children:[(0,We.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo da aus\xeancia *"}),(0,We.jsx)("textarea",{value:A.missed_reason,onChange:e=>P((t=>(0,Ie.A)((0,Ie.A)({},t),{},{missed_reason:e.target.value}))),rows:4,maxLength:500,placeholder:"Descreva o motivo da aus\xeancia...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 resize-none"}),(0,We.jsxs)("div",{className:"mt-1 text-xs text-gray-500",children:[A.missed_reason.length,"/500 caracteres"]})]}),(0,We.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,We.jsx)("button",{onClick:()=>j(!1),disabled:E,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:"Cancelar"}),(0,We.jsxs)("button",{onClick:async()=>{if(A.missed_reason.trim())try{L(!0),await Cf(N.id,A),await R(),await I(),j(!1),w(null),alert("Justificativa adicionada com sucesso.")}catch(p){console.error("Erro ao justificar agendamento"),alert("Erro ao adicionar justificativa. Tente novamente.")}finally{L(!1)}else alert("Por favor, forne\xe7a um motivo para a aus\xeancia.")},disabled:E||!A.missed_reason.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[E&&(0,We.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,We.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,We.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Justificar"]})]})]})]})})]})},Tf=e=>{let{children:t}=e;const{user:a}=Ye();return a&&a.is_admin?t:(0,We.jsx)(fe,{to:"/",replace:!0})},Mf=e=>{let{children:t}=e;const{user:a}=Ye();return a&&"super_admin"===a.role?t:(0,We.jsx)(fe,{to:"/",replace:!0})};const Rf=function(){return(0,We.jsx)(Ge,{children:(0,We.jsx)(Pe,{children:(0,We.jsx)("div",{className:"bg-gray-100 min-h-screen",children:(0,We.jsxs)(ve,{children:[(0,We.jsx)(xe,{path:"/login",element:(0,We.jsx)($o,{})}),(0,We.jsx)(xe,{path:"/super-admin",element:(0,We.jsx)(Mf,{children:(0,We.jsx)(wp,{})})}),(0,We.jsxs)(xe,{path:"/",element:(0,We.jsx)(ct,{children:(0,We.jsx)(ht,{children:(0,We.jsx)(nl,{})})}),children:[(0,We.jsx)(xe,{index:!0,element:(0,We.jsx)(rl,{})}),(0,We.jsx)(xe,{path:"clients",element:(0,We.jsx)(Wh,{})}),(0,We.jsx)(xe,{path:"parent-dashboard",element:(0,We.jsx)(cm,{})}),(0,We.jsx)(xe,{path:"colleagues",element:(0,We.jsx)(jm,{})}),(0,We.jsx)(xe,{path:"admin",element:(0,We.jsx)(Tf,{children:(0,We.jsx)(xm,{})})}),(0,We.jsx)(xe,{path:"programs",element:(0,We.jsx)(Kh,{})}),(0,We.jsx)(xe,{path:"session/:assignmentId",element:(0,We.jsx)(bm,{})}),(0,We.jsx)(xe,{path:"notes",element:(0,We.jsx)(Qh,{})}),(0,We.jsx)(xe,{path:"dashboard",element:(0,We.jsx)(im,{})}),(0,We.jsx)(xe,{path:"scheduling",element:(0,We.jsx)(Tf,{children:(0,We.jsx)(bf,{})})}),(0,We.jsx)(xe,{path:"my-schedule",element:(0,We.jsx)(Of,{})})]}),(0,We.jsx)(xe,{path:"*",element:(0,We.jsx)(fe,{to:"/",replace:!0})})]})})})})};r.createRoot(document.getElementById("root")).render((0,We.jsx)(s.StrictMode,{children:(0,We.jsx)(Rf,{})}))})()})();
//# sourceMappingURL=main.53cc4233.js.map